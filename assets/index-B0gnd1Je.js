function yO(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Pi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ad(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function In(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return t[r]}})}),n}var NG={exports:{}},wT={},DG={exports:{}},mn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var d1=Symbol.for("react.element"),Pee=Symbol.for("react.portal"),Iee=Symbol.for("react.fragment"),Mee=Symbol.for("react.strict_mode"),Lee=Symbol.for("react.profiler"),Oee=Symbol.for("react.provider"),kee=Symbol.for("react.context"),Nee=Symbol.for("react.forward_ref"),Dee=Symbol.for("react.suspense"),Bee=Symbol.for("react.memo"),Fee=Symbol.for("react.lazy"),PF=Symbol.iterator;function Uee(t){return t===null||typeof t!="object"?null:(t=PF&&t[PF]||t["@@iterator"],typeof t=="function"?t:null)}var BG={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},FG=Object.assign,UG={};function yg(t,e,n){this.props=t,this.context=e,this.refs=UG,this.updater=n||BG}yg.prototype.isReactComponent={};yg.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};yg.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function zG(){}zG.prototype=yg.prototype;function _O(t,e,n){this.props=t,this.context=e,this.refs=UG,this.updater=n||BG}var bO=_O.prototype=new zG;bO.constructor=_O;FG(bO,yg.prototype);bO.isPureReactComponent=!0;var IF=Array.isArray,$G=Object.prototype.hasOwnProperty,xO={current:null},jG={key:!0,ref:!0,__self:!0,__source:!0};function GG(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)$G.call(e,r)&&!jG.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];i.children=l}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:d1,type:t,key:s,ref:o,props:i,_owner:xO.current}}function zee(t,e){return{$$typeof:d1,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function EO(t){return typeof t=="object"&&t!==null&&t.$$typeof===d1}function $ee(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var MF=/\/+/g;function MA(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$ee(""+t.key):e.toString(36)}function Fx(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case d1:case Pee:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+MA(o,0):r,IF(i)?(n="",t!=null&&(n=t.replace(MF,"$&/")+"/"),Fx(i,e,n,"",function(c){return c})):i!=null&&(EO(i)&&(i=zee(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(MF,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",IF(t))for(var a=0;a<t.length;a++){s=t[a];var l=r+MA(s,a);o+=Fx(s,e,n,l,i)}else if(l=Uee(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=r+MA(s,a++),o+=Fx(s,e,n,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function K_(t,e,n){if(t==null)return t;var r=[],i=0;return Fx(t,r,"","",function(s){return e.call(n,s,i++)}),r}function jee(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ks={current:null},Ux={transition:null},Gee={ReactCurrentDispatcher:ks,ReactCurrentBatchConfig:Ux,ReactCurrentOwner:xO};mn.Children={map:K_,forEach:function(t,e,n){K_(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return K_(t,function(){e++}),e},toArray:function(t){return K_(t,function(e){return e})||[]},only:function(t){if(!EO(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};mn.Component=yg;mn.Fragment=Iee;mn.Profiler=Lee;mn.PureComponent=_O;mn.StrictMode=Mee;mn.Suspense=Dee;mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gee;mn.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=FG({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=xO.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)$G.call(e,l)&&!jG.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:d1,type:t.type,key:i,ref:s,props:r,_owner:o}};mn.createContext=function(t){return t={$$typeof:kee,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Oee,_context:t},t.Consumer=t};mn.createElement=GG;mn.createFactory=function(t){var e=GG.bind(null,t);return e.type=t,e};mn.createRef=function(){return{current:null}};mn.forwardRef=function(t){return{$$typeof:Nee,render:t}};mn.isValidElement=EO;mn.lazy=function(t){return{$$typeof:Fee,_payload:{_status:-1,_result:t},_init:jee}};mn.memo=function(t,e){return{$$typeof:Bee,type:t,compare:e===void 0?null:e}};mn.startTransition=function(t){var e=Ux.transition;Ux.transition={};try{t()}finally{Ux.transition=e}};mn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};mn.useCallback=function(t,e){return ks.current.useCallback(t,e)};mn.useContext=function(t){return ks.current.useContext(t)};mn.useDebugValue=function(){};mn.useDeferredValue=function(t){return ks.current.useDeferredValue(t)};mn.useEffect=function(t,e){return ks.current.useEffect(t,e)};mn.useId=function(){return ks.current.useId()};mn.useImperativeHandle=function(t,e,n){return ks.current.useImperativeHandle(t,e,n)};mn.useInsertionEffect=function(t,e){return ks.current.useInsertionEffect(t,e)};mn.useLayoutEffect=function(t,e){return ks.current.useLayoutEffect(t,e)};mn.useMemo=function(t,e){return ks.current.useMemo(t,e)};mn.useReducer=function(t,e,n){return ks.current.useReducer(t,e,n)};mn.useRef=function(t){return ks.current.useRef(t)};mn.useState=function(t){return ks.current.useState(t)};mn.useSyncExternalStore=function(t,e,n){return ks.current.useSyncExternalStore(t,e,n)};mn.useTransition=function(){return ks.current.useTransition()};mn.version="18.2.0";DG.exports=mn;var A=DG.exports;const Gn=Ad(A),OE=yO({__proto__:null,default:Gn},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hee=A,Vee=Symbol.for("react.element"),Wee=Symbol.for("react.fragment"),Xee=Object.prototype.hasOwnProperty,Yee=Hee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Kee={key:!0,ref:!0,__self:!0,__source:!0};function HG(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Xee.call(e,r)&&!Kee.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Vee,type:t,key:s,ref:o,props:i,_owner:Yee.current}}wT.Fragment=Wee;wT.jsx=HG;wT.jsxs=HG;NG.exports=wT;var Z=NG.exports;function qee(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function Zee(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var Qee=function(){function t(n){var r=this;this._insertTag=function(i){var s;r.tags.length===0?r.insertionPoint?s=r.insertionPoint.nextSibling:r.prepend?s=r.container.firstChild:s=r.before:s=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,s),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(r){r.forEach(this._insertTag)},e.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Zee(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var s=qee(i);try{s.insertRule(r,s.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},e.flush=function(){this.tags.forEach(function(r){return r.parentNode&&r.parentNode.removeChild(r)}),this.tags=[],this.ctr=0},t}(),ss="-ms-",kE="-moz-",An="-webkit-",VG="comm",wO="rule",TO="decl",Jee="@import",WG="@keyframes",ete="@layer",tte=Math.abs,TT=String.fromCharCode,nte=Object.assign;function rte(t,e){return Vi(t,0)^45?(((e<<2^Vi(t,0))<<2^Vi(t,1))<<2^Vi(t,2))<<2^Vi(t,3):0}function XG(t){return t.trim()}function ite(t,e){return(t=e.exec(t))?t[0]:t}function Rn(t,e,n){return t.replace(e,n)}function C2(t,e){return t.indexOf(e)}function Vi(t,e){return t.charCodeAt(e)|0}function Zv(t,e,n){return t.slice(e,n)}function Cl(t){return t.length}function SO(t){return t.length}function q_(t,e){return e.push(t),t}function ste(t,e){return t.map(e).join("")}var ST=1,Rm=1,YG=0,Zs=0,qr=0,_g="";function CT(t,e,n,r,i,s,o){return{value:t,root:e,parent:n,type:r,props:i,children:s,line:ST,column:Rm,length:o,return:""}}function t0(t,e){return nte(CT("",null,null,"",null,null,0),t,{length:-t.length},e)}function ote(){return qr}function ate(){return qr=Zs>0?Vi(_g,--Zs):0,Rm--,qr===10&&(Rm=1,ST--),qr}function _o(){return qr=Zs<YG?Vi(_g,Zs++):0,Rm++,qr===10&&(Rm=1,ST++),qr}function Nl(){return Vi(_g,Zs)}function zx(){return Zs}function h1(t,e){return Zv(_g,t,e)}function Qv(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function KG(t){return ST=Rm=1,YG=Cl(_g=t),Zs=0,[]}function qG(t){return _g="",t}function $x(t){return XG(h1(Zs-1,A2(t===91?t+2:t===40?t+1:t)))}function lte(t){for(;(qr=Nl())&&qr<33;)_o();return Qv(t)>2||Qv(qr)>3?"":" "}function cte(t,e){for(;--e&&_o()&&!(qr<48||qr>102||qr>57&&qr<65||qr>70&&qr<97););return h1(t,zx()+(e<6&&Nl()==32&&_o()==32))}function A2(t){for(;_o();)switch(qr){case t:return Zs;case 34:case 39:t!==34&&t!==39&&A2(qr);break;case 40:t===41&&A2(t);break;case 92:_o();break}return Zs}function ute(t,e){for(;_o()&&t+qr!==57;)if(t+qr===84&&Nl()===47)break;return"/*"+h1(e,Zs-1)+"*"+TT(t===47?t:_o())}function dte(t){for(;!Qv(Nl());)_o();return h1(t,Zs)}function hte(t){return qG(jx("",null,null,null,[""],t=KG(t),0,[0],t))}function jx(t,e,n,r,i,s,o,a,l){for(var c=0,u=0,d=o,h=0,f=0,p=0,m=1,_=1,y=1,x=0,b="",E=i,w=s,T=r,C=b;_;)switch(p=x,x=_o()){case 40:if(p!=108&&Vi(C,d-1)==58){C2(C+=Rn($x(x),"&","&\f"),"&\f")!=-1&&(y=-1);break}case 34:case 39:case 91:C+=$x(x);break;case 9:case 10:case 13:case 32:C+=lte(p);break;case 92:C+=cte(zx()-1,7);continue;case 47:switch(Nl()){case 42:case 47:q_(fte(ute(_o(),zx()),e,n),l);break;default:C+="/"}break;case 123*m:a[c++]=Cl(C)*y;case 125*m:case 59:case 0:switch(x){case 0:case 125:_=0;case 59+u:y==-1&&(C=Rn(C,/\f/g,"")),f>0&&Cl(C)-d&&q_(f>32?OF(C+";",r,n,d-1):OF(Rn(C," ","")+";",r,n,d-2),l);break;case 59:C+=";";default:if(q_(T=LF(C,e,n,c,u,i,a,b,E=[],w=[],d),s),x===123)if(u===0)jx(C,e,T,T,E,s,d,a,w);else switch(h===99&&Vi(C,3)===110?100:h){case 100:case 108:case 109:case 115:jx(t,T,T,r&&q_(LF(t,T,T,0,0,i,a,b,i,E=[],d),w),i,w,d,a,r?E:w);break;default:jx(C,T,T,T,[""],w,0,a,w)}}c=u=f=0,m=y=1,b=C="",d=o;break;case 58:d=1+Cl(C),f=p;default:if(m<1){if(x==123)--m;else if(x==125&&m++==0&&ate()==125)continue}switch(C+=TT(x),x*m){case 38:y=u>0?1:(C+="\f",-1);break;case 44:a[c++]=(Cl(C)-1)*y,y=1;break;case 64:Nl()===45&&(C+=$x(_o())),h=Nl(),u=d=Cl(b=C+=dte(zx())),x++;break;case 45:p===45&&Cl(C)==2&&(m=0)}}return s}function LF(t,e,n,r,i,s,o,a,l,c,u){for(var d=i-1,h=i===0?s:[""],f=SO(h),p=0,m=0,_=0;p<r;++p)for(var y=0,x=Zv(t,d+1,d=tte(m=o[p])),b=t;y<f;++y)(b=XG(m>0?h[y]+" "+x:Rn(x,/&\f/g,h[y])))&&(l[_++]=b);return CT(t,e,n,i===0?wO:a,l,c,u)}function fte(t,e,n){return CT(t,e,n,VG,TT(ote()),Zv(t,2,-2),0)}function OF(t,e,n,r){return CT(t,e,n,TO,Zv(t,0,r),Zv(t,r+1,-1),r)}function lm(t,e){for(var n="",r=SO(t),i=0;i<r;i++)n+=e(t[i],i,t,e)||"";return n}function pte(t,e,n,r){switch(t.type){case ete:if(t.children.length)break;case Jee:case TO:return t.return=t.return||t.value;case VG:return"";case WG:return t.return=t.value+"{"+lm(t.children,r)+"}";case wO:t.value=t.props.join(",")}return Cl(n=lm(t.children,r))?t.return=t.value+"{"+n+"}":""}function mte(t){var e=SO(t);return function(n,r,i,s){for(var o="",a=0;a<e;a++)o+=t[a](n,r,i,s)||"";return o}}function gte(t){return function(e){e.root||(e=e.return)&&t(e)}}function ZG(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var vte=function(e,n,r){for(var i=0,s=0;i=s,s=Nl(),i===38&&s===12&&(n[r]=1),!Qv(s);)_o();return h1(e,Zs)},yte=function(e,n){var r=-1,i=44;do switch(Qv(i)){case 0:i===38&&Nl()===12&&(n[r]=1),e[r]+=vte(Zs-1,n,r);break;case 2:e[r]+=$x(i);break;case 4:if(i===44){e[++r]=Nl()===58?"&\f":"",n[r]=e[r].length;break}default:e[r]+=TT(i)}while(i=_o());return e},_te=function(e,n){return qG(yte(KG(e),n))},kF=new WeakMap,bte=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,r=e.parent,i=e.column===r.column&&e.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!kF.get(r))&&!i){kF.set(e,!0);for(var s=[],o=_te(n,s),a=r.props,l=0,c=0;l<o.length;l++)for(var u=0;u<a.length;u++,c++)e.props[c]=s[l]?o[l].replace(/&\f/g,a[u]):a[u]+" "+o[l]}}},xte=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function QG(t,e){switch(rte(t,e)){case 5103:return An+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return An+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return An+t+kE+t+ss+t+t;case 6828:case 4268:return An+t+ss+t+t;case 6165:return An+t+ss+"flex-"+t+t;case 5187:return An+t+Rn(t,/(\w+).+(:[^]+)/,An+"box-$1$2"+ss+"flex-$1$2")+t;case 5443:return An+t+ss+"flex-item-"+Rn(t,/flex-|-self/,"")+t;case 4675:return An+t+ss+"flex-line-pack"+Rn(t,/align-content|flex-|-self/,"")+t;case 5548:return An+t+ss+Rn(t,"shrink","negative")+t;case 5292:return An+t+ss+Rn(t,"basis","preferred-size")+t;case 6060:return An+"box-"+Rn(t,"-grow","")+An+t+ss+Rn(t,"grow","positive")+t;case 4554:return An+Rn(t,/([^-])(transform)/g,"$1"+An+"$2")+t;case 6187:return Rn(Rn(Rn(t,/(zoom-|grab)/,An+"$1"),/(image-set)/,An+"$1"),t,"")+t;case 5495:case 3959:return Rn(t,/(image-set\([^]*)/,An+"$1$`$1");case 4968:return Rn(Rn(t,/(.+:)(flex-)?(.*)/,An+"box-pack:$3"+ss+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+An+t+t;case 4095:case 3583:case 4068:case 2532:return Rn(t,/(.+)-inline(.+)/,An+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Cl(t)-1-e>6)switch(Vi(t,e+1)){case 109:if(Vi(t,e+4)!==45)break;case 102:return Rn(t,/(.+:)(.+)-([^]+)/,"$1"+An+"$2-$3$1"+kE+(Vi(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~C2(t,"stretch")?QG(Rn(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(Vi(t,e+1)!==115)break;case 6444:switch(Vi(t,Cl(t)-3-(~C2(t,"!important")&&10))){case 107:return Rn(t,":",":"+An)+t;case 101:return Rn(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+An+(Vi(t,14)===45?"inline-":"")+"box$3$1"+An+"$2$3$1"+ss+"$2box$3")+t}break;case 5936:switch(Vi(t,e+11)){case 114:return An+t+ss+Rn(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return An+t+ss+Rn(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return An+t+ss+Rn(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return An+t+ss+t+t}return t}var Ete=function(e,n,r,i){if(e.length>-1&&!e.return)switch(e.type){case TO:e.return=QG(e.value,e.length);break;case WG:return lm([t0(e,{value:Rn(e.value,"@","@"+An)})],i);case wO:if(e.length)return ste(e.props,function(s){switch(ite(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return lm([t0(e,{props:[Rn(s,/:(read-\w+)/,":"+kE+"$1")]})],i);case"::placeholder":return lm([t0(e,{props:[Rn(s,/:(plac\w+)/,":"+An+"input-$1")]}),t0(e,{props:[Rn(s,/:(plac\w+)/,":"+kE+"$1")]}),t0(e,{props:[Rn(s,/:(plac\w+)/,ss+"input-$1")]})],i)}return""})}},wte=[Ete],Tte=function(e){var n=e.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(m){var _=m.getAttribute("data-emotion");_.indexOf(" ")!==-1&&(document.head.appendChild(m),m.setAttribute("data-s",""))})}var i=e.stylisPlugins||wte,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(m){for(var _=m.getAttribute("data-emotion").split(" "),y=1;y<_.length;y++)s[_[y]]=!0;a.push(m)});var l,c=[bte,xte];{var u,d=[pte,gte(function(m){u.insert(m)})],h=mte(c.concat(i,d)),f=function(_){return lm(hte(_),h)};l=function(_,y,x,b){u=x,f(_?_+"{"+y.styles+"}":y.styles),b&&(p.inserted[y.name]=!0)}}var p={key:n,sheet:new Qee({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return p.sheet.hydrate(a),p};function U(){return U=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},U.apply(this,arguments)}var JG={exports:{}},Un={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mi=typeof Symbol=="function"&&Symbol.for,CO=Mi?Symbol.for("react.element"):60103,AO=Mi?Symbol.for("react.portal"):60106,AT=Mi?Symbol.for("react.fragment"):60107,RT=Mi?Symbol.for("react.strict_mode"):60108,PT=Mi?Symbol.for("react.profiler"):60114,IT=Mi?Symbol.for("react.provider"):60109,MT=Mi?Symbol.for("react.context"):60110,RO=Mi?Symbol.for("react.async_mode"):60111,LT=Mi?Symbol.for("react.concurrent_mode"):60111,OT=Mi?Symbol.for("react.forward_ref"):60112,kT=Mi?Symbol.for("react.suspense"):60113,Ste=Mi?Symbol.for("react.suspense_list"):60120,NT=Mi?Symbol.for("react.memo"):60115,DT=Mi?Symbol.for("react.lazy"):60116,Cte=Mi?Symbol.for("react.block"):60121,Ate=Mi?Symbol.for("react.fundamental"):60117,Rte=Mi?Symbol.for("react.responder"):60118,Pte=Mi?Symbol.for("react.scope"):60119;function Mo(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case CO:switch(t=t.type,t){case RO:case LT:case AT:case PT:case RT:case kT:return t;default:switch(t=t&&t.$$typeof,t){case MT:case OT:case DT:case NT:case IT:return t;default:return e}}case AO:return e}}}function eH(t){return Mo(t)===LT}Un.AsyncMode=RO;Un.ConcurrentMode=LT;Un.ContextConsumer=MT;Un.ContextProvider=IT;Un.Element=CO;Un.ForwardRef=OT;Un.Fragment=AT;Un.Lazy=DT;Un.Memo=NT;Un.Portal=AO;Un.Profiler=PT;Un.StrictMode=RT;Un.Suspense=kT;Un.isAsyncMode=function(t){return eH(t)||Mo(t)===RO};Un.isConcurrentMode=eH;Un.isContextConsumer=function(t){return Mo(t)===MT};Un.isContextProvider=function(t){return Mo(t)===IT};Un.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===CO};Un.isForwardRef=function(t){return Mo(t)===OT};Un.isFragment=function(t){return Mo(t)===AT};Un.isLazy=function(t){return Mo(t)===DT};Un.isMemo=function(t){return Mo(t)===NT};Un.isPortal=function(t){return Mo(t)===AO};Un.isProfiler=function(t){return Mo(t)===PT};Un.isStrictMode=function(t){return Mo(t)===RT};Un.isSuspense=function(t){return Mo(t)===kT};Un.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===AT||t===LT||t===PT||t===RT||t===kT||t===Ste||typeof t=="object"&&t!==null&&(t.$$typeof===DT||t.$$typeof===NT||t.$$typeof===IT||t.$$typeof===MT||t.$$typeof===OT||t.$$typeof===Ate||t.$$typeof===Rte||t.$$typeof===Pte||t.$$typeof===Cte)};Un.typeOf=Mo;JG.exports=Un;var Ite=JG.exports,tH=Ite,Mte={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Lte={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},nH={};nH[tH.ForwardRef]=Mte;nH[tH.Memo]=Lte;var Ote=!0;function rH(t,e,n){var r="";return n.split(" ").forEach(function(i){t[i]!==void 0?e.push(t[i]+";"):r+=i+" "}),r}var PO=function(e,n,r){var i=e.key+"-"+n.name;(r===!1||Ote===!1)&&e.registered[i]===void 0&&(e.registered[i]=n.styles)},IO=function(e,n,r){PO(e,n,r);var i=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+i:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function kte(t){for(var e=0,n,r=0,i=t.length;i>=4;++r,i-=4)n=t.charCodeAt(r)&255|(t.charCodeAt(++r)&255)<<8|(t.charCodeAt(++r)&255)<<16|(t.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(i){case 3:e^=(t.charCodeAt(r+2)&255)<<16;case 2:e^=(t.charCodeAt(r+1)&255)<<8;case 1:e^=t.charCodeAt(r)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var Nte={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Dte=/[A-Z]|^ms/g,Bte=/_EMO_([^_]+?)_([^]*?)_EMO_/g,iH=function(e){return e.charCodeAt(1)===45},NF=function(e){return e!=null&&typeof e!="boolean"},LA=ZG(function(t){return iH(t)?t:t.replace(Dte,"-$&").toLowerCase()}),DF=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(Bte,function(r,i,s){return Al={name:i,styles:s,next:Al},i})}return Nte[e]!==1&&!iH(e)&&typeof n=="number"&&n!==0?n+"px":n};function Jv(t,e,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return Al={name:n.name,styles:n.styles,next:Al},n.name;if(n.styles!==void 0){var r=n.next;if(r!==void 0)for(;r!==void 0;)Al={name:r.name,styles:r.styles,next:Al},r=r.next;var i=n.styles+";";return i}return Fte(t,e,n)}case"function":{if(t!==void 0){var s=Al,o=n(t);return Al=s,Jv(t,e,o)}break}}if(e==null)return n;var a=e[n];return a!==void 0?a:n}function Fte(t,e,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Jv(t,e,n[i])+";";else for(var s in n){var o=n[s];if(typeof o!="object")e!=null&&e[o]!==void 0?r+=s+"{"+e[o]+"}":NF(o)&&(r+=LA(s)+":"+DF(s,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var a=0;a<o.length;a++)NF(o[a])&&(r+=LA(s)+":"+DF(s,o[a])+";");else{var l=Jv(t,e,o);switch(s){case"animation":case"animationName":{r+=LA(s)+":"+l+";";break}default:r+=s+"{"+l+"}"}}}return r}var BF=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Al,BT=function(e,n,r){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var i=!0,s="";Al=void 0;var o=e[0];o==null||o.raw===void 0?(i=!1,s+=Jv(r,n,o)):s+=o[0];for(var a=1;a<e.length;a++)s+=Jv(r,n,e[a]),i&&(s+=o[a]);BF.lastIndex=0;for(var l="",c;(c=BF.exec(s))!==null;)l+="-"+c[1];var u=kte(s)+l;return{name:u,styles:s,next:Al}},Ute=function(e){return e()},sH=OE.useInsertionEffect?OE.useInsertionEffect:!1,oH=sH||Ute,FF=sH||A.useLayoutEffect,FT={}.hasOwnProperty,aH=A.createContext(typeof HTMLElement<"u"?Tte({key:"css"}):null);aH.Provider;var MO=function(e){return A.forwardRef(function(n,r){var i=A.useContext(aH);return e(n,i,r)})},UT=A.createContext({}),R2="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",lH=function(e,n){var r={};for(var i in n)FT.call(n,i)&&(r[i]=n[i]);return r[R2]=e,r},zte=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return PO(n,r,i),oH(function(){return IO(n,r,i)}),null},$te=MO(function(t,e,n){var r=t.css;typeof r=="string"&&e.registered[r]!==void 0&&(r=e.registered[r]);var i=t[R2],s=[r],o="";typeof t.className=="string"?o=rH(e.registered,s,t.className):t.className!=null&&(o=t.className+" ");var a=BT(s,void 0,A.useContext(UT));o+=e.key+"-"+a.name;var l={};for(var c in t)FT.call(t,c)&&c!=="css"&&c!==R2&&(l[c]=t[c]);return l.ref=n,l.className=o,A.createElement(A.Fragment,null,A.createElement(zte,{cache:e,serialized:a,isStringTag:typeof i=="string"}),A.createElement(i,l))}),cH=$te,ui=Z.Fragment;function D(t,e,n){return FT.call(e,"css")?Z.jsx(cH,lH(t,e),n):Z.jsx(t,e,n)}function Pe(t,e,n){return FT.call(e,"css")?Z.jsxs(cH,lH(t,e),n):Z.jsxs(t,e,n)}var uH={exports:{}},Lo={},dH={exports:{}},hH={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,H){var Q=j.length;j.push(H);e:for(;0<Q;){var V=Q-1>>>1,ee=j[V];if(0<i(ee,H))j[V]=H,j[Q]=ee,Q=V;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var H=j[0],Q=j.pop();if(Q!==H){j[0]=Q;e:for(var V=0,ee=j.length,ye=ee>>>1;V<ye;){var se=2*(V+1)-1,fe=j[se],ve=se+1,Oe=j[ve];if(0>i(fe,Q))ve<ee&&0>i(Oe,fe)?(j[V]=Oe,j[ve]=Q,V=ve):(j[V]=fe,j[se]=Q,V=se);else if(ve<ee&&0>i(Oe,Q))j[V]=Oe,j[ve]=Q,V=ve;else break e}}return H}function i(j,H){var Q=j.sortIndex-H.sortIndex;return Q!==0?Q:j.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,h=3,f=!1,p=!1,m=!1,_=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(j){for(var H=n(c);H!==null;){if(H.callback===null)r(c);else if(H.startTime<=j)r(c),H.sortIndex=H.expirationTime,e(l,H);else break;H=n(c)}}function E(j){if(m=!1,b(j),!p)if(n(l)!==null)p=!0,X(w);else{var H=n(c);H!==null&&G(E,H.startTime-j)}}function w(j,H){p=!1,m&&(m=!1,y(P),P=-1),f=!0;var Q=h;try{for(b(H),d=n(l);d!==null&&(!(d.expirationTime>H)||j&&!F());){var V=d.callback;if(typeof V=="function"){d.callback=null,h=d.priorityLevel;var ee=V(d.expirationTime<=H);H=t.unstable_now(),typeof ee=="function"?d.callback=ee:d===n(l)&&r(l),b(H)}else r(l);d=n(l)}if(d!==null)var ye=!0;else{var se=n(c);se!==null&&G(E,se.startTime-H),ye=!1}return ye}finally{d=null,h=Q,f=!1}}var T=!1,C=null,P=-1,M=5,N=-1;function F(){return!(t.unstable_now()-N<M)}function I(){if(C!==null){var j=t.unstable_now();N=j;var H=!0;try{H=C(!0,j)}finally{H?k():(T=!1,C=null)}}else T=!1}var k;if(typeof x=="function")k=function(){x(I)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,z=R.port2;R.port1.onmessage=I,k=function(){z.postMessage(null)}}else k=function(){_(I,0)};function X(j){C=j,T||(T=!0,k())}function G(j,H){P=_(function(){j(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,X(w))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(j){switch(h){case 1:case 2:case 3:var H=3;break;default:H=h}var Q=h;h=H;try{return j()}finally{h=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,H){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var Q=h;h=j;try{return H()}finally{h=Q}},t.unstable_scheduleCallback=function(j,H,Q){var V=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?V+Q:V):Q=V,j){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return ee=Q+ee,j={id:u++,callback:H,priorityLevel:j,startTime:Q,expirationTime:ee,sortIndex:-1},Q>V?(j.sortIndex=Q,e(c,j),n(l)===null&&j===n(c)&&(m?(y(P),P=-1):m=!0,G(E,Q-V))):(j.sortIndex=ee,e(l,j),p||f||(p=!0,X(w))),j},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(j){var H=h;return function(){var Q=h;h=H;try{return j.apply(this,arguments)}finally{h=Q}}}})(hH);dH.exports=hH;var jte=dH.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fH=A,So=jte;function Ke(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pH=new Set,ey={};function Tf(t,e){Pm(t,e),Pm(t+"Capture",e)}function Pm(t,e){for(ey[t]=e,t=0;t<e.length;t++)pH.add(e[t])}var Oc=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),P2=Object.prototype.hasOwnProperty,Gte=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,UF={},zF={};function Hte(t){return P2.call(zF,t)?!0:P2.call(UF,t)?!1:Gte.test(t)?zF[t]=!0:(UF[t]=!0,!1)}function Vte(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Wte(t,e,n,r){if(e===null||typeof e>"u"||Vte(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ns(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Yi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Yi[t]=new Ns(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Yi[e]=new Ns(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Yi[t]=new Ns(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Yi[t]=new Ns(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Yi[t]=new Ns(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Yi[t]=new Ns(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Yi[t]=new Ns(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Yi[t]=new Ns(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Yi[t]=new Ns(t,5,!1,t.toLowerCase(),null,!1,!1)});var LO=/[\-:]([a-z])/g;function OO(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(LO,OO);Yi[e]=new Ns(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(LO,OO);Yi[e]=new Ns(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(LO,OO);Yi[e]=new Ns(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Yi[t]=new Ns(t,1,!1,t.toLowerCase(),null,!1,!1)});Yi.xlinkHref=new Ns("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Yi[t]=new Ns(t,1,!1,t.toLowerCase(),null,!0,!0)});function kO(t,e,n,r){var i=Yi.hasOwnProperty(e)?Yi[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Wte(e,n,i,r)&&(n=null),r||i===null?Hte(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Vc=fH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Z_=Symbol.for("react.element"),Up=Symbol.for("react.portal"),zp=Symbol.for("react.fragment"),NO=Symbol.for("react.strict_mode"),I2=Symbol.for("react.profiler"),mH=Symbol.for("react.provider"),gH=Symbol.for("react.context"),DO=Symbol.for("react.forward_ref"),M2=Symbol.for("react.suspense"),L2=Symbol.for("react.suspense_list"),BO=Symbol.for("react.memo"),Pu=Symbol.for("react.lazy"),vH=Symbol.for("react.offscreen"),$F=Symbol.iterator;function n0(t){return t===null||typeof t!="object"?null:(t=$F&&t[$F]||t["@@iterator"],typeof t=="function"?t:null)}var Cr=Object.assign,OA;function H0(t){if(OA===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);OA=e&&e[1]||""}return`
`+OA+t}var kA=!1;function NA(t,e){if(!t||kA)return"";kA=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{kA=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?H0(t):""}function Xte(t){switch(t.tag){case 5:return H0(t.type);case 16:return H0("Lazy");case 13:return H0("Suspense");case 19:return H0("SuspenseList");case 0:case 2:case 15:return t=NA(t.type,!1),t;case 11:return t=NA(t.type.render,!1),t;case 1:return t=NA(t.type,!0),t;default:return""}}function O2(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case zp:return"Fragment";case Up:return"Portal";case I2:return"Profiler";case NO:return"StrictMode";case M2:return"Suspense";case L2:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case gH:return(t.displayName||"Context")+".Consumer";case mH:return(t._context.displayName||"Context")+".Provider";case DO:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case BO:return e=t.displayName||null,e!==null?e:O2(t.type)||"Memo";case Pu:e=t._payload,t=t._init;try{return O2(t(e))}catch{}}return null}function Yte(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return O2(e);case 8:return e===NO?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function pd(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function yH(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Kte(t){var e=yH(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Q_(t){t._valueTracker||(t._valueTracker=Kte(t))}function _H(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=yH(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function NE(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function k2(t,e){var n=e.checked;return Cr({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function jF(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=pd(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function bH(t,e){e=e.checked,e!=null&&kO(t,"checked",e,!1)}function N2(t,e){bH(t,e);var n=pd(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?D2(t,e.type,n):e.hasOwnProperty("defaultValue")&&D2(t,e.type,pd(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function GF(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function D2(t,e,n){(e!=="number"||NE(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var V0=Array.isArray;function cm(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+pd(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function B2(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ke(91));return Cr({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function HF(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ke(92));if(V0(n)){if(1<n.length)throw Error(Ke(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:pd(n)}}function xH(t,e){var n=pd(e.value),r=pd(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function VF(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function EH(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function F2(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?EH(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var J_,wH=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(J_=J_||document.createElement("div"),J_.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=J_.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ty(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var vv={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qte=["Webkit","ms","Moz","O"];Object.keys(vv).forEach(function(t){qte.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),vv[e]=vv[t]})});function TH(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||vv.hasOwnProperty(t)&&vv[t]?(""+e).trim():e+"px"}function SH(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=TH(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Zte=Cr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function U2(t,e){if(e){if(Zte[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ke(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ke(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ke(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ke(62))}}function z2(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $2=null;function FO(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var j2=null,um=null,dm=null;function WF(t){if(t=m1(t)){if(typeof j2!="function")throw Error(Ke(280));var e=t.stateNode;e&&(e=HT(e),j2(t.stateNode,t.type,e))}}function CH(t){um?dm?dm.push(t):dm=[t]:um=t}function AH(){if(um){var t=um,e=dm;if(dm=um=null,WF(t),e)for(t=0;t<e.length;t++)WF(e[t])}}function RH(t,e){return t(e)}function PH(){}var DA=!1;function IH(t,e,n){if(DA)return t(e,n);DA=!0;try{return RH(t,e,n)}finally{DA=!1,(um!==null||dm!==null)&&(PH(),AH())}}function ny(t,e){var n=t.stateNode;if(n===null)return null;var r=HT(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ke(231,e,typeof n));return n}var G2=!1;if(Oc)try{var r0={};Object.defineProperty(r0,"passive",{get:function(){G2=!0}}),window.addEventListener("test",r0,r0),window.removeEventListener("test",r0,r0)}catch{G2=!1}function Qte(t,e,n,r,i,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var yv=!1,DE=null,BE=!1,H2=null,Jte={onError:function(t){yv=!0,DE=t}};function ene(t,e,n,r,i,s,o,a,l){yv=!1,DE=null,Qte.apply(Jte,arguments)}function tne(t,e,n,r,i,s,o,a,l){if(ene.apply(this,arguments),yv){if(yv){var c=DE;yv=!1,DE=null}else throw Error(Ke(198));BE||(BE=!0,H2=c)}}function Sf(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function MH(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function XF(t){if(Sf(t)!==t)throw Error(Ke(188))}function nne(t){var e=t.alternate;if(!e){if(e=Sf(t),e===null)throw Error(Ke(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return XF(i),t;if(s===r)return XF(i),e;s=s.sibling}throw Error(Ke(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(Ke(189))}}if(n.alternate!==r)throw Error(Ke(190))}if(n.tag!==3)throw Error(Ke(188));return n.stateNode.current===n?t:e}function LH(t){return t=nne(t),t!==null?OH(t):null}function OH(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=OH(t);if(e!==null)return e;t=t.sibling}return null}var kH=So.unstable_scheduleCallback,YF=So.unstable_cancelCallback,rne=So.unstable_shouldYield,ine=So.unstable_requestPaint,Hr=So.unstable_now,sne=So.unstable_getCurrentPriorityLevel,UO=So.unstable_ImmediatePriority,NH=So.unstable_UserBlockingPriority,FE=So.unstable_NormalPriority,one=So.unstable_LowPriority,DH=So.unstable_IdlePriority,zT=null,Dl=null;function ane(t){if(Dl&&typeof Dl.onCommitFiberRoot=="function")try{Dl.onCommitFiberRoot(zT,t,void 0,(t.current.flags&128)===128)}catch{}}var Ha=Math.clz32?Math.clz32:une,lne=Math.log,cne=Math.LN2;function une(t){return t>>>=0,t===0?32:31-(lne(t)/cne|0)|0}var eb=64,tb=4194304;function W0(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function UE(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=W0(a):(s&=o,s!==0&&(r=W0(s)))}else o=n&~i,o!==0?r=W0(o):s!==0&&(r=W0(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ha(e),i=1<<n,r|=t[n],e&=~i;return r}function dne(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hne(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ha(s),a=1<<o,l=i[o];l===-1?(!(a&n)||a&r)&&(i[o]=dne(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function V2(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function BH(){var t=eb;return eb<<=1,!(eb&4194240)&&(eb=64),t}function BA(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function f1(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ha(e),t[e]=n}function fne(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ha(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function zO(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ha(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Bn=0;function FH(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var UH,$O,zH,$H,jH,W2=!1,nb=[],ed=null,td=null,nd=null,ry=new Map,iy=new Map,Nu=[],pne="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function KF(t,e){switch(t){case"focusin":case"focusout":ed=null;break;case"dragenter":case"dragleave":td=null;break;case"mouseover":case"mouseout":nd=null;break;case"pointerover":case"pointerout":ry.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":iy.delete(e.pointerId)}}function i0(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=m1(e),e!==null&&$O(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function mne(t,e,n,r,i){switch(e){case"focusin":return ed=i0(ed,t,e,n,r,i),!0;case"dragenter":return td=i0(td,t,e,n,r,i),!0;case"mouseover":return nd=i0(nd,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ry.set(s,i0(ry.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,iy.set(s,i0(iy.get(s)||null,t,e,n,r,i)),!0}return!1}function GH(t){var e=wh(t.target);if(e!==null){var n=Sf(e);if(n!==null){if(e=n.tag,e===13){if(e=MH(n),e!==null){t.blockedOn=e,jH(t.priority,function(){zH(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Gx(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=X2(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);$2=r,n.target.dispatchEvent(r),$2=null}else return e=m1(n),e!==null&&$O(e),t.blockedOn=n,!1;e.shift()}return!0}function qF(t,e,n){Gx(t)&&n.delete(e)}function gne(){W2=!1,ed!==null&&Gx(ed)&&(ed=null),td!==null&&Gx(td)&&(td=null),nd!==null&&Gx(nd)&&(nd=null),ry.forEach(qF),iy.forEach(qF)}function s0(t,e){t.blockedOn===e&&(t.blockedOn=null,W2||(W2=!0,So.unstable_scheduleCallback(So.unstable_NormalPriority,gne)))}function sy(t){function e(i){return s0(i,t)}if(0<nb.length){s0(nb[0],t);for(var n=1;n<nb.length;n++){var r=nb[n];r.blockedOn===t&&(r.blockedOn=null)}}for(ed!==null&&s0(ed,t),td!==null&&s0(td,t),nd!==null&&s0(nd,t),ry.forEach(e),iy.forEach(e),n=0;n<Nu.length;n++)r=Nu[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Nu.length&&(n=Nu[0],n.blockedOn===null);)GH(n),n.blockedOn===null&&Nu.shift()}var hm=Vc.ReactCurrentBatchConfig,zE=!0;function vne(t,e,n,r){var i=Bn,s=hm.transition;hm.transition=null;try{Bn=1,jO(t,e,n,r)}finally{Bn=i,hm.transition=s}}function yne(t,e,n,r){var i=Bn,s=hm.transition;hm.transition=null;try{Bn=4,jO(t,e,n,r)}finally{Bn=i,hm.transition=s}}function jO(t,e,n,r){if(zE){var i=X2(t,e,n,r);if(i===null)XA(t,e,r,$E,n),KF(t,r);else if(mne(i,t,e,n,r))r.stopPropagation();else if(KF(t,r),e&4&&-1<pne.indexOf(t)){for(;i!==null;){var s=m1(i);if(s!==null&&UH(s),s=X2(t,e,n,r),s===null&&XA(t,e,r,$E,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else XA(t,e,r,null,n)}}var $E=null;function X2(t,e,n,r){if($E=null,t=FO(r),t=wh(t),t!==null)if(e=Sf(t),e===null)t=null;else if(n=e.tag,n===13){if(t=MH(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return $E=t,null}function HH(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(sne()){case UO:return 1;case NH:return 4;case FE:case one:return 16;case DH:return 536870912;default:return 16}default:return 16}}var Hu=null,GO=null,Hx=null;function VH(){if(Hx)return Hx;var t,e=GO,n=e.length,r,i="value"in Hu?Hu.value:Hu.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Hx=i.slice(t,1<r?1-r:void 0)}function Vx(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function rb(){return!0}function ZF(){return!1}function Oo(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?rb:ZF,this.isPropagationStopped=ZF,this}return Cr(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=rb)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=rb)},persist:function(){},isPersistent:rb}),e}var bg={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},HO=Oo(bg),p1=Cr({},bg,{view:0,detail:0}),_ne=Oo(p1),FA,UA,o0,$T=Cr({},p1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:VO,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==o0&&(o0&&t.type==="mousemove"?(FA=t.screenX-o0.screenX,UA=t.screenY-o0.screenY):UA=FA=0,o0=t),FA)},movementY:function(t){return"movementY"in t?t.movementY:UA}}),QF=Oo($T),bne=Cr({},$T,{dataTransfer:0}),xne=Oo(bne),Ene=Cr({},p1,{relatedTarget:0}),zA=Oo(Ene),wne=Cr({},bg,{animationName:0,elapsedTime:0,pseudoElement:0}),Tne=Oo(wne),Sne=Cr({},bg,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Cne=Oo(Sne),Ane=Cr({},bg,{data:0}),JF=Oo(Ane),Rne={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Pne={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ine={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mne(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Ine[t])?!!e[t]:!1}function VO(){return Mne}var Lne=Cr({},p1,{key:function(t){if(t.key){var e=Rne[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vx(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Pne[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:VO,charCode:function(t){return t.type==="keypress"?Vx(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vx(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),One=Oo(Lne),kne=Cr({},$T,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),e4=Oo(kne),Nne=Cr({},p1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:VO}),Dne=Oo(Nne),Bne=Cr({},bg,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fne=Oo(Bne),Une=Cr({},$T,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),zne=Oo(Une),$ne=[9,13,27,32],WO=Oc&&"CompositionEvent"in window,_v=null;Oc&&"documentMode"in document&&(_v=document.documentMode);var jne=Oc&&"TextEvent"in window&&!_v,WH=Oc&&(!WO||_v&&8<_v&&11>=_v),t4=" ",n4=!1;function XH(t,e){switch(t){case"keyup":return $ne.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function YH(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var $p=!1;function Gne(t,e){switch(t){case"compositionend":return YH(e);case"keypress":return e.which!==32?null:(n4=!0,t4);case"textInput":return t=e.data,t===t4&&n4?null:t;default:return null}}function Hne(t,e){if($p)return t==="compositionend"||!WO&&XH(t,e)?(t=VH(),Hx=GO=Hu=null,$p=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return WH&&e.locale!=="ko"?null:e.data;default:return null}}var Vne={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function r4(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Vne[t.type]:e==="textarea"}function KH(t,e,n,r){CH(r),e=jE(e,"onChange"),0<e.length&&(n=new HO("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var bv=null,oy=null;function Wne(t){oV(t,0)}function jT(t){var e=Hp(t);if(_H(e))return t}function Xne(t,e){if(t==="change")return e}var qH=!1;if(Oc){var $A;if(Oc){var jA="oninput"in document;if(!jA){var i4=document.createElement("div");i4.setAttribute("oninput","return;"),jA=typeof i4.oninput=="function"}$A=jA}else $A=!1;qH=$A&&(!document.documentMode||9<document.documentMode)}function s4(){bv&&(bv.detachEvent("onpropertychange",ZH),oy=bv=null)}function ZH(t){if(t.propertyName==="value"&&jT(oy)){var e=[];KH(e,oy,t,FO(t)),IH(Wne,e)}}function Yne(t,e,n){t==="focusin"?(s4(),bv=e,oy=n,bv.attachEvent("onpropertychange",ZH)):t==="focusout"&&s4()}function Kne(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return jT(oy)}function qne(t,e){if(t==="click")return jT(e)}function Zne(t,e){if(t==="input"||t==="change")return jT(e)}function Qne(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var qa=typeof Object.is=="function"?Object.is:Qne;function ay(t,e){if(qa(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!P2.call(e,i)||!qa(t[i],e[i]))return!1}return!0}function o4(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function a4(t,e){var n=o4(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=o4(n)}}function QH(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?QH(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function JH(){for(var t=window,e=NE();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=NE(t.document)}return e}function XO(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Jne(t){var e=JH(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&QH(n.ownerDocument.documentElement,n)){if(r!==null&&XO(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=a4(n,s);var o=a4(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ere=Oc&&"documentMode"in document&&11>=document.documentMode,jp=null,Y2=null,xv=null,K2=!1;function l4(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;K2||jp==null||jp!==NE(r)||(r=jp,"selectionStart"in r&&XO(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),xv&&ay(xv,r)||(xv=r,r=jE(Y2,"onSelect"),0<r.length&&(e=new HO("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=jp)))}function ib(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Gp={animationend:ib("Animation","AnimationEnd"),animationiteration:ib("Animation","AnimationIteration"),animationstart:ib("Animation","AnimationStart"),transitionend:ib("Transition","TransitionEnd")},GA={},eV={};Oc&&(eV=document.createElement("div").style,"AnimationEvent"in window||(delete Gp.animationend.animation,delete Gp.animationiteration.animation,delete Gp.animationstart.animation),"TransitionEvent"in window||delete Gp.transitionend.transition);function GT(t){if(GA[t])return GA[t];if(!Gp[t])return t;var e=Gp[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in eV)return GA[t]=e[n];return t}var tV=GT("animationend"),nV=GT("animationiteration"),rV=GT("animationstart"),iV=GT("transitionend"),sV=new Map,c4="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rd(t,e){sV.set(t,e),Tf(e,[t])}for(var HA=0;HA<c4.length;HA++){var VA=c4[HA],tre=VA.toLowerCase(),nre=VA[0].toUpperCase()+VA.slice(1);Rd(tre,"on"+nre)}Rd(tV,"onAnimationEnd");Rd(nV,"onAnimationIteration");Rd(rV,"onAnimationStart");Rd("dblclick","onDoubleClick");Rd("focusin","onFocus");Rd("focusout","onBlur");Rd(iV,"onTransitionEnd");Pm("onMouseEnter",["mouseout","mouseover"]);Pm("onMouseLeave",["mouseout","mouseover"]);Pm("onPointerEnter",["pointerout","pointerover"]);Pm("onPointerLeave",["pointerout","pointerover"]);Tf("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Tf("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Tf("onBeforeInput",["compositionend","keypress","textInput","paste"]);Tf("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Tf("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Tf("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var X0="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),rre=new Set("cancel close invalid load scroll toggle".split(" ").concat(X0));function u4(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,tne(r,e,void 0,t),t.currentTarget=null}function oV(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;u4(i,a,c),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;u4(i,a,c),s=l}}}if(BE)throw t=H2,BE=!1,H2=null,t}function rr(t,e){var n=e[eI];n===void 0&&(n=e[eI]=new Set);var r=t+"__bubble";n.has(r)||(aV(e,t,2,!1),n.add(r))}function WA(t,e,n){var r=0;e&&(r|=4),aV(n,t,r,e)}var sb="_reactListening"+Math.random().toString(36).slice(2);function ly(t){if(!t[sb]){t[sb]=!0,pH.forEach(function(n){n!=="selectionchange"&&(rre.has(n)||WA(n,!1,t),WA(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[sb]||(e[sb]=!0,WA("selectionchange",!1,e))}}function aV(t,e,n,r){switch(HH(e)){case 1:var i=vne;break;case 4:i=yne;break;default:i=jO}n=i.bind(null,e,n,t),i=void 0,!G2||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function XA(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=wh(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}IH(function(){var c=s,u=FO(n),d=[];e:{var h=sV.get(t);if(h!==void 0){var f=HO,p=t;switch(t){case"keypress":if(Vx(n)===0)break e;case"keydown":case"keyup":f=One;break;case"focusin":p="focus",f=zA;break;case"focusout":p="blur",f=zA;break;case"beforeblur":case"afterblur":f=zA;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=QF;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=xne;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Dne;break;case tV:case nV:case rV:f=Tne;break;case iV:f=Fne;break;case"scroll":f=_ne;break;case"wheel":f=zne;break;case"copy":case"cut":case"paste":f=Cne;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=e4}var m=(e&4)!==0,_=!m&&t==="scroll",y=m?h!==null?h+"Capture":null:h;m=[];for(var x=c,b;x!==null;){b=x;var E=b.stateNode;if(b.tag===5&&E!==null&&(b=E,y!==null&&(E=ny(x,y),E!=null&&m.push(cy(x,E,b)))),_)break;x=x.return}0<m.length&&(h=new f(h,p,null,n,u),d.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==$2&&(p=n.relatedTarget||n.fromElement)&&(wh(p)||p[kc]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=c,p=p?wh(p):null,p!==null&&(_=Sf(p),p!==_||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(m=QF,E="onMouseLeave",y="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(m=e4,E="onPointerLeave",y="onPointerEnter",x="pointer"),_=f==null?h:Hp(f),b=p==null?h:Hp(p),h=new m(E,x+"leave",f,n,u),h.target=_,h.relatedTarget=b,E=null,wh(u)===c&&(m=new m(y,x+"enter",p,n,u),m.target=b,m.relatedTarget=_,E=m),_=E,f&&p)t:{for(m=f,y=p,x=0,b=m;b;b=ep(b))x++;for(b=0,E=y;E;E=ep(E))b++;for(;0<x-b;)m=ep(m),x--;for(;0<b-x;)y=ep(y),b--;for(;x--;){if(m===y||y!==null&&m===y.alternate)break t;m=ep(m),y=ep(y)}m=null}else m=null;f!==null&&d4(d,h,f,m,!1),p!==null&&_!==null&&d4(d,_,p,m,!0)}}e:{if(h=c?Hp(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var w=Xne;else if(r4(h))if(qH)w=Zne;else{w=Kne;var T=Yne}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=qne);if(w&&(w=w(t,c))){KH(d,w,n,u);break e}T&&T(t,h,c),t==="focusout"&&(T=h._wrapperState)&&T.controlled&&h.type==="number"&&D2(h,"number",h.value)}switch(T=c?Hp(c):window,t){case"focusin":(r4(T)||T.contentEditable==="true")&&(jp=T,Y2=c,xv=null);break;case"focusout":xv=Y2=jp=null;break;case"mousedown":K2=!0;break;case"contextmenu":case"mouseup":case"dragend":K2=!1,l4(d,n,u);break;case"selectionchange":if(ere)break;case"keydown":case"keyup":l4(d,n,u)}var C;if(WO)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else $p?XH(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(WH&&n.locale!=="ko"&&($p||P!=="onCompositionStart"?P==="onCompositionEnd"&&$p&&(C=VH()):(Hu=u,GO="value"in Hu?Hu.value:Hu.textContent,$p=!0)),T=jE(c,P),0<T.length&&(P=new JF(P,t,null,n,u),d.push({event:P,listeners:T}),C?P.data=C:(C=YH(n),C!==null&&(P.data=C)))),(C=jne?Gne(t,n):Hne(t,n))&&(c=jE(c,"onBeforeInput"),0<c.length&&(u=new JF("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=C))}oV(d,e)})}function cy(t,e,n){return{instance:t,listener:e,currentTarget:n}}function jE(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=ny(t,n),s!=null&&r.unshift(cy(t,s,i)),s=ny(t,e),s!=null&&r.push(cy(t,s,i))),t=t.return}return r}function ep(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function d4(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,i?(l=ny(n,s),l!=null&&o.unshift(cy(n,l,a))):i||(l=ny(n,s),l!=null&&o.push(cy(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var ire=/\r\n?/g,sre=/\u0000|\uFFFD/g;function h4(t){return(typeof t=="string"?t:""+t).replace(ire,`
`).replace(sre,"")}function ob(t,e,n){if(e=h4(e),h4(t)!==e&&n)throw Error(Ke(425))}function GE(){}var q2=null,Z2=null;function Q2(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var J2=typeof setTimeout=="function"?setTimeout:void 0,ore=typeof clearTimeout=="function"?clearTimeout:void 0,f4=typeof Promise=="function"?Promise:void 0,are=typeof queueMicrotask=="function"?queueMicrotask:typeof f4<"u"?function(t){return f4.resolve(null).then(t).catch(lre)}:J2;function lre(t){setTimeout(function(){throw t})}function YA(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),sy(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);sy(e)}function rd(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function p4(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var xg=Math.random().toString(36).slice(2),Pl="__reactFiber$"+xg,uy="__reactProps$"+xg,kc="__reactContainer$"+xg,eI="__reactEvents$"+xg,cre="__reactListeners$"+xg,ure="__reactHandles$"+xg;function wh(t){var e=t[Pl];if(e)return e;for(var n=t.parentNode;n;){if(e=n[kc]||n[Pl]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=p4(t);t!==null;){if(n=t[Pl])return n;t=p4(t)}return e}t=n,n=t.parentNode}return null}function m1(t){return t=t[Pl]||t[kc],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Hp(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ke(33))}function HT(t){return t[uy]||null}var tI=[],Vp=-1;function Pd(t){return{current:t}}function ar(t){0>Vp||(t.current=tI[Vp],tI[Vp]=null,Vp--)}function er(t,e){Vp++,tI[Vp]=t.current,t.current=e}var md={},fs=Pd(md),Vs=Pd(!1),Qh=md;function Im(t,e){var n=t.type.contextTypes;if(!n)return md;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ws(t){return t=t.childContextTypes,t!=null}function HE(){ar(Vs),ar(fs)}function m4(t,e,n){if(fs.current!==md)throw Error(Ke(168));er(fs,e),er(Vs,n)}function lV(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(Ke(108,Yte(t)||"Unknown",i));return Cr({},n,r)}function VE(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||md,Qh=fs.current,er(fs,t),er(Vs,Vs.current),!0}function g4(t,e,n){var r=t.stateNode;if(!r)throw Error(Ke(169));n?(t=lV(t,e,Qh),r.__reactInternalMemoizedMergedChildContext=t,ar(Vs),ar(fs),er(fs,t)):ar(Vs),er(Vs,n)}var gc=null,VT=!1,KA=!1;function cV(t){gc===null?gc=[t]:gc.push(t)}function dre(t){VT=!0,cV(t)}function Id(){if(!KA&&gc!==null){KA=!0;var t=0,e=Bn;try{var n=gc;for(Bn=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}gc=null,VT=!1}catch(i){throw gc!==null&&(gc=gc.slice(t+1)),kH(UO,Id),i}finally{Bn=e,KA=!1}}return null}var Wp=[],Xp=0,WE=null,XE=0,Zo=[],Qo=0,Jh=null,wc=1,Tc="";function dh(t,e){Wp[Xp++]=XE,Wp[Xp++]=WE,WE=t,XE=e}function uV(t,e,n){Zo[Qo++]=wc,Zo[Qo++]=Tc,Zo[Qo++]=Jh,Jh=t;var r=wc;t=Tc;var i=32-Ha(r)-1;r&=~(1<<i),n+=1;var s=32-Ha(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,wc=1<<32-Ha(e)+i|n<<i|r,Tc=s+t}else wc=1<<s|n<<i|r,Tc=t}function YO(t){t.return!==null&&(dh(t,1),uV(t,1,0))}function KO(t){for(;t===WE;)WE=Wp[--Xp],Wp[Xp]=null,XE=Wp[--Xp],Wp[Xp]=null;for(;t===Jh;)Jh=Zo[--Qo],Zo[Qo]=null,Tc=Zo[--Qo],Zo[Qo]=null,wc=Zo[--Qo],Zo[Qo]=null}var bo=null,go=null,yr=!1,ka=null;function dV(t,e){var n=ta(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function v4(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,bo=t,go=rd(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,bo=t,go=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Jh!==null?{id:wc,overflow:Tc}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ta(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,bo=t,go=null,!0):!1;default:return!1}}function nI(t){return(t.mode&1)!==0&&(t.flags&128)===0}function rI(t){if(yr){var e=go;if(e){var n=e;if(!v4(t,e)){if(nI(t))throw Error(Ke(418));e=rd(n.nextSibling);var r=bo;e&&v4(t,e)?dV(r,n):(t.flags=t.flags&-4097|2,yr=!1,bo=t)}}else{if(nI(t))throw Error(Ke(418));t.flags=t.flags&-4097|2,yr=!1,bo=t}}}function y4(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;bo=t}function ab(t){if(t!==bo)return!1;if(!yr)return y4(t),yr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Q2(t.type,t.memoizedProps)),e&&(e=go)){if(nI(t))throw hV(),Error(Ke(418));for(;e;)dV(t,e),e=rd(e.nextSibling)}if(y4(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ke(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){go=rd(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}go=null}}else go=bo?rd(t.stateNode.nextSibling):null;return!0}function hV(){for(var t=go;t;)t=rd(t.nextSibling)}function Mm(){go=bo=null,yr=!1}function qO(t){ka===null?ka=[t]:ka.push(t)}var hre=Vc.ReactCurrentBatchConfig;function Ia(t,e){if(t&&t.defaultProps){e=Cr({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var YE=Pd(null),KE=null,Yp=null,ZO=null;function QO(){ZO=Yp=KE=null}function JO(t){var e=YE.current;ar(YE),t._currentValue=e}function iI(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function fm(t,e){KE=t,ZO=Yp=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Hs=!0),t.firstContext=null)}function ca(t){var e=t._currentValue;if(ZO!==t)if(t={context:t,memoizedValue:e,next:null},Yp===null){if(KE===null)throw Error(Ke(308));Yp=t,KE.dependencies={lanes:0,firstContext:t}}else Yp=Yp.next=t;return e}var Th=null;function ek(t){Th===null?Th=[t]:Th.push(t)}function fV(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,ek(e)):(n.next=i.next,i.next=n),e.interleaved=n,Nc(t,r)}function Nc(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Iu=!1;function tk(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pV(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ac(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function id(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,bn&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Nc(t,n)}return i=r.interleaved,i===null?(e.next=e,ek(r)):(e.next=i.next,i.next=e),r.interleaved=e,Nc(t,n)}function Wx(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,zO(t,n)}}function _4(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function qE(t,e,n,r){var i=t.updateQueue;Iu=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,u=c=l=null,a=s;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,m=a;switch(h=e,f=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Cr({},d,h);break e;case 2:Iu=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=d):u=u.next=f,o|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(u===null&&(l=d),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);tf|=o,t.lanes=o,t.memoizedState=d}}function b4(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Ke(191,i));i.call(r)}}}var mV=new fH.Component().refs;function sI(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Cr({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var WT={isMounted:function(t){return(t=t._reactInternals)?Sf(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ms(),i=od(t),s=Ac(r,i);s.payload=e,n!=null&&(s.callback=n),e=id(t,s,i),e!==null&&(Va(e,t,i,r),Wx(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ms(),i=od(t),s=Ac(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=id(t,s,i),e!==null&&(Va(e,t,i,r),Wx(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ms(),r=od(t),i=Ac(n,r);i.tag=2,e!=null&&(i.callback=e),e=id(t,i,r),e!==null&&(Va(e,t,r,n),Wx(e,t,r))}};function x4(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ay(n,r)||!ay(i,s):!0}function gV(t,e,n){var r=!1,i=md,s=e.contextType;return typeof s=="object"&&s!==null?s=ca(s):(i=Ws(e)?Qh:fs.current,r=e.contextTypes,s=(r=r!=null)?Im(t,i):md),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=WT,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function E4(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&WT.enqueueReplaceState(e,e.state,null)}function oI(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=mV,tk(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ca(s):(s=Ws(e)?Qh:fs.current,i.context=Im(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(sI(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&WT.enqueueReplaceState(i,i.state,null),qE(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function a0(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ke(309));var r=n.stateNode}if(!r)throw Error(Ke(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===mV&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Ke(284));if(!n._owner)throw Error(Ke(290,t))}return t}function lb(t,e){throw t=Object.prototype.toString.call(e),Error(Ke(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function w4(t){var e=t._init;return e(t._payload)}function vV(t){function e(y,x){if(t){var b=y.deletions;b===null?(y.deletions=[x],y.flags|=16):b.push(x)}}function n(y,x){if(!t)return null;for(;x!==null;)e(y,x),x=x.sibling;return null}function r(y,x){for(y=new Map;x!==null;)x.key!==null?y.set(x.key,x):y.set(x.index,x),x=x.sibling;return y}function i(y,x){return y=ad(y,x),y.index=0,y.sibling=null,y}function s(y,x,b){return y.index=b,t?(b=y.alternate,b!==null?(b=b.index,b<x?(y.flags|=2,x):b):(y.flags|=2,x)):(y.flags|=1048576,x)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,x,b,E){return x===null||x.tag!==6?(x=nR(b,y.mode,E),x.return=y,x):(x=i(x,b),x.return=y,x)}function l(y,x,b,E){var w=b.type;return w===zp?u(y,x,b.props.children,E,b.key):x!==null&&(x.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Pu&&w4(w)===x.type)?(E=i(x,b.props),E.ref=a0(y,x,b),E.return=y,E):(E=Qx(b.type,b.key,b.props,null,y.mode,E),E.ref=a0(y,x,b),E.return=y,E)}function c(y,x,b,E){return x===null||x.tag!==4||x.stateNode.containerInfo!==b.containerInfo||x.stateNode.implementation!==b.implementation?(x=rR(b,y.mode,E),x.return=y,x):(x=i(x,b.children||[]),x.return=y,x)}function u(y,x,b,E,w){return x===null||x.tag!==7?(x=Nh(b,y.mode,E,w),x.return=y,x):(x=i(x,b),x.return=y,x)}function d(y,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return x=nR(""+x,y.mode,b),x.return=y,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Z_:return b=Qx(x.type,x.key,x.props,null,y.mode,b),b.ref=a0(y,null,x),b.return=y,b;case Up:return x=rR(x,y.mode,b),x.return=y,x;case Pu:var E=x._init;return d(y,E(x._payload),b)}if(V0(x)||n0(x))return x=Nh(x,y.mode,b,null),x.return=y,x;lb(y,x)}return null}function h(y,x,b,E){var w=x!==null?x.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return w!==null?null:a(y,x,""+b,E);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Z_:return b.key===w?l(y,x,b,E):null;case Up:return b.key===w?c(y,x,b,E):null;case Pu:return w=b._init,h(y,x,w(b._payload),E)}if(V0(b)||n0(b))return w!==null?null:u(y,x,b,E,null);lb(y,b)}return null}function f(y,x,b,E,w){if(typeof E=="string"&&E!==""||typeof E=="number")return y=y.get(b)||null,a(x,y,""+E,w);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Z_:return y=y.get(E.key===null?b:E.key)||null,l(x,y,E,w);case Up:return y=y.get(E.key===null?b:E.key)||null,c(x,y,E,w);case Pu:var T=E._init;return f(y,x,b,T(E._payload),w)}if(V0(E)||n0(E))return y=y.get(b)||null,u(x,y,E,w,null);lb(x,E)}return null}function p(y,x,b,E){for(var w=null,T=null,C=x,P=x=0,M=null;C!==null&&P<b.length;P++){C.index>P?(M=C,C=null):M=C.sibling;var N=h(y,C,b[P],E);if(N===null){C===null&&(C=M);break}t&&C&&N.alternate===null&&e(y,C),x=s(N,x,P),T===null?w=N:T.sibling=N,T=N,C=M}if(P===b.length)return n(y,C),yr&&dh(y,P),w;if(C===null){for(;P<b.length;P++)C=d(y,b[P],E),C!==null&&(x=s(C,x,P),T===null?w=C:T.sibling=C,T=C);return yr&&dh(y,P),w}for(C=r(y,C);P<b.length;P++)M=f(C,y,P,b[P],E),M!==null&&(t&&M.alternate!==null&&C.delete(M.key===null?P:M.key),x=s(M,x,P),T===null?w=M:T.sibling=M,T=M);return t&&C.forEach(function(F){return e(y,F)}),yr&&dh(y,P),w}function m(y,x,b,E){var w=n0(b);if(typeof w!="function")throw Error(Ke(150));if(b=w.call(b),b==null)throw Error(Ke(151));for(var T=w=null,C=x,P=x=0,M=null,N=b.next();C!==null&&!N.done;P++,N=b.next()){C.index>P?(M=C,C=null):M=C.sibling;var F=h(y,C,N.value,E);if(F===null){C===null&&(C=M);break}t&&C&&F.alternate===null&&e(y,C),x=s(F,x,P),T===null?w=F:T.sibling=F,T=F,C=M}if(N.done)return n(y,C),yr&&dh(y,P),w;if(C===null){for(;!N.done;P++,N=b.next())N=d(y,N.value,E),N!==null&&(x=s(N,x,P),T===null?w=N:T.sibling=N,T=N);return yr&&dh(y,P),w}for(C=r(y,C);!N.done;P++,N=b.next())N=f(C,y,P,N.value,E),N!==null&&(t&&N.alternate!==null&&C.delete(N.key===null?P:N.key),x=s(N,x,P),T===null?w=N:T.sibling=N,T=N);return t&&C.forEach(function(I){return e(y,I)}),yr&&dh(y,P),w}function _(y,x,b,E){if(typeof b=="object"&&b!==null&&b.type===zp&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Z_:e:{for(var w=b.key,T=x;T!==null;){if(T.key===w){if(w=b.type,w===zp){if(T.tag===7){n(y,T.sibling),x=i(T,b.props.children),x.return=y,y=x;break e}}else if(T.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Pu&&w4(w)===T.type){n(y,T.sibling),x=i(T,b.props),x.ref=a0(y,T,b),x.return=y,y=x;break e}n(y,T);break}else e(y,T);T=T.sibling}b.type===zp?(x=Nh(b.props.children,y.mode,E,b.key),x.return=y,y=x):(E=Qx(b.type,b.key,b.props,null,y.mode,E),E.ref=a0(y,x,b),E.return=y,y=E)}return o(y);case Up:e:{for(T=b.key;x!==null;){if(x.key===T)if(x.tag===4&&x.stateNode.containerInfo===b.containerInfo&&x.stateNode.implementation===b.implementation){n(y,x.sibling),x=i(x,b.children||[]),x.return=y,y=x;break e}else{n(y,x);break}else e(y,x);x=x.sibling}x=rR(b,y.mode,E),x.return=y,y=x}return o(y);case Pu:return T=b._init,_(y,x,T(b._payload),E)}if(V0(b))return p(y,x,b,E);if(n0(b))return m(y,x,b,E);lb(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,x!==null&&x.tag===6?(n(y,x.sibling),x=i(x,b),x.return=y,y=x):(n(y,x),x=nR(b,y.mode,E),x.return=y,y=x),o(y)):n(y,x)}return _}var Lm=vV(!0),yV=vV(!1),g1={},Bl=Pd(g1),dy=Pd(g1),hy=Pd(g1);function Sh(t){if(t===g1)throw Error(Ke(174));return t}function nk(t,e){switch(er(hy,e),er(dy,t),er(Bl,g1),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:F2(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=F2(e,t)}ar(Bl),er(Bl,e)}function Om(){ar(Bl),ar(dy),ar(hy)}function _V(t){Sh(hy.current);var e=Sh(Bl.current),n=F2(e,t.type);e!==n&&(er(dy,t),er(Bl,n))}function rk(t){dy.current===t&&(ar(Bl),ar(dy))}var Er=Pd(0);function ZE(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var qA=[];function ik(){for(var t=0;t<qA.length;t++)qA[t]._workInProgressVersionPrimary=null;qA.length=0}var Xx=Vc.ReactCurrentDispatcher,ZA=Vc.ReactCurrentBatchConfig,ef=0,Sr=null,ci=null,Si=null,QE=!1,Ev=!1,fy=0,fre=0;function ts(){throw Error(Ke(321))}function sk(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!qa(t[n],e[n]))return!1;return!0}function ok(t,e,n,r,i,s){if(ef=s,Sr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Xx.current=t===null||t.memoizedState===null?vre:yre,t=n(r,i),Ev){s=0;do{if(Ev=!1,fy=0,25<=s)throw Error(Ke(301));s+=1,Si=ci=null,e.updateQueue=null,Xx.current=_re,t=n(r,i)}while(Ev)}if(Xx.current=JE,e=ci!==null&&ci.next!==null,ef=0,Si=ci=Sr=null,QE=!1,e)throw Error(Ke(300));return t}function ak(){var t=fy!==0;return fy=0,t}function wl(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Si===null?Sr.memoizedState=Si=t:Si=Si.next=t,Si}function ua(){if(ci===null){var t=Sr.alternate;t=t!==null?t.memoizedState:null}else t=ci.next;var e=Si===null?Sr.memoizedState:Si.next;if(e!==null)Si=e,ci=t;else{if(t===null)throw Error(Ke(310));ci=t,t={memoizedState:ci.memoizedState,baseState:ci.baseState,baseQueue:ci.baseQueue,queue:ci.queue,next:null},Si===null?Sr.memoizedState=Si=t:Si=Si.next=t}return Si}function py(t,e){return typeof e=="function"?e(t):e}function QA(t){var e=ua(),n=e.queue;if(n===null)throw Error(Ke(311));n.lastRenderedReducer=t;var r=ci,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((ef&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,Sr.lanes|=u,tf|=u}c=c.next}while(c!==null&&c!==s);l===null?o=r:l.next=a,qa(r,e.memoizedState)||(Hs=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=l,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Sr.lanes|=s,tf|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function JA(t){var e=ua(),n=e.queue;if(n===null)throw Error(Ke(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);qa(s,e.memoizedState)||(Hs=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function bV(){}function xV(t,e){var n=Sr,r=ua(),i=e(),s=!qa(r.memoizedState,i);if(s&&(r.memoizedState=i,Hs=!0),r=r.queue,lk(TV.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Si!==null&&Si.memoizedState.tag&1){if(n.flags|=2048,my(9,wV.bind(null,n,r,i,e),void 0,null),Ii===null)throw Error(Ke(349));ef&30||EV(n,e,i)}return i}function EV(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Sr.updateQueue,e===null?(e={lastEffect:null,stores:null},Sr.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function wV(t,e,n,r){e.value=n,e.getSnapshot=r,SV(e)&&CV(t)}function TV(t,e,n){return n(function(){SV(e)&&CV(t)})}function SV(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!qa(t,n)}catch{return!0}}function CV(t){var e=Nc(t,1);e!==null&&Va(e,t,1,-1)}function T4(t){var e=wl();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:py,lastRenderedState:t},e.queue=t,t=t.dispatch=gre.bind(null,Sr,t),[e.memoizedState,t]}function my(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Sr.updateQueue,e===null?(e={lastEffect:null,stores:null},Sr.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function AV(){return ua().memoizedState}function Yx(t,e,n,r){var i=wl();Sr.flags|=t,i.memoizedState=my(1|e,n,void 0,r===void 0?null:r)}function XT(t,e,n,r){var i=ua();r=r===void 0?null:r;var s=void 0;if(ci!==null){var o=ci.memoizedState;if(s=o.destroy,r!==null&&sk(r,o.deps)){i.memoizedState=my(e,n,s,r);return}}Sr.flags|=t,i.memoizedState=my(1|e,n,s,r)}function S4(t,e){return Yx(8390656,8,t,e)}function lk(t,e){return XT(2048,8,t,e)}function RV(t,e){return XT(4,2,t,e)}function PV(t,e){return XT(4,4,t,e)}function IV(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function MV(t,e,n){return n=n!=null?n.concat([t]):null,XT(4,4,IV.bind(null,e,t),n)}function ck(){}function LV(t,e){var n=ua();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sk(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function OV(t,e){var n=ua();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&sk(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function kV(t,e,n){return ef&21?(qa(n,e)||(n=BH(),Sr.lanes|=n,tf|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Hs=!0),t.memoizedState=n)}function pre(t,e){var n=Bn;Bn=n!==0&&4>n?n:4,t(!0);var r=ZA.transition;ZA.transition={};try{t(!1),e()}finally{Bn=n,ZA.transition=r}}function NV(){return ua().memoizedState}function mre(t,e,n){var r=od(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},DV(t))BV(e,n);else if(n=fV(t,e,n,r),n!==null){var i=Ms();Va(n,t,r,i),FV(n,e,r)}}function gre(t,e,n){var r=od(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(DV(t))BV(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,qa(a,o)){var l=e.interleaved;l===null?(i.next=i,ek(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}n=fV(t,e,i,r),n!==null&&(i=Ms(),Va(n,t,r,i),FV(n,e,r))}}function DV(t){var e=t.alternate;return t===Sr||e!==null&&e===Sr}function BV(t,e){Ev=QE=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function FV(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,zO(t,n)}}var JE={readContext:ca,useCallback:ts,useContext:ts,useEffect:ts,useImperativeHandle:ts,useInsertionEffect:ts,useLayoutEffect:ts,useMemo:ts,useReducer:ts,useRef:ts,useState:ts,useDebugValue:ts,useDeferredValue:ts,useTransition:ts,useMutableSource:ts,useSyncExternalStore:ts,useId:ts,unstable_isNewReconciler:!1},vre={readContext:ca,useCallback:function(t,e){return wl().memoizedState=[t,e===void 0?null:e],t},useContext:ca,useEffect:S4,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Yx(4194308,4,IV.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Yx(4194308,4,t,e)},useInsertionEffect:function(t,e){return Yx(4,2,t,e)},useMemo:function(t,e){var n=wl();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=wl();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=mre.bind(null,Sr,t),[r.memoizedState,t]},useRef:function(t){var e=wl();return t={current:t},e.memoizedState=t},useState:T4,useDebugValue:ck,useDeferredValue:function(t){return wl().memoizedState=t},useTransition:function(){var t=T4(!1),e=t[0];return t=pre.bind(null,t[1]),wl().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Sr,i=wl();if(yr){if(n===void 0)throw Error(Ke(407));n=n()}else{if(n=e(),Ii===null)throw Error(Ke(349));ef&30||EV(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,S4(TV.bind(null,r,s,t),[t]),r.flags|=2048,my(9,wV.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=wl(),e=Ii.identifierPrefix;if(yr){var n=Tc,r=wc;n=(r&~(1<<32-Ha(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=fy++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=fre++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},yre={readContext:ca,useCallback:LV,useContext:ca,useEffect:lk,useImperativeHandle:MV,useInsertionEffect:RV,useLayoutEffect:PV,useMemo:OV,useReducer:QA,useRef:AV,useState:function(){return QA(py)},useDebugValue:ck,useDeferredValue:function(t){var e=ua();return kV(e,ci.memoizedState,t)},useTransition:function(){var t=QA(py)[0],e=ua().memoizedState;return[t,e]},useMutableSource:bV,useSyncExternalStore:xV,useId:NV,unstable_isNewReconciler:!1},_re={readContext:ca,useCallback:LV,useContext:ca,useEffect:lk,useImperativeHandle:MV,useInsertionEffect:RV,useLayoutEffect:PV,useMemo:OV,useReducer:JA,useRef:AV,useState:function(){return JA(py)},useDebugValue:ck,useDeferredValue:function(t){var e=ua();return ci===null?e.memoizedState=t:kV(e,ci.memoizedState,t)},useTransition:function(){var t=JA(py)[0],e=ua().memoizedState;return[t,e]},useMutableSource:bV,useSyncExternalStore:xV,useId:NV,unstable_isNewReconciler:!1};function km(t,e){try{var n="",r=e;do n+=Xte(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function eR(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function aI(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var bre=typeof WeakMap=="function"?WeakMap:Map;function UV(t,e,n){n=Ac(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){tw||(tw=!0,vI=r),aI(t,e)},n}function zV(t,e,n){n=Ac(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){aI(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){aI(t,e),typeof r!="function"&&(sd===null?sd=new Set([this]):sd.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function C4(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new bre;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=kre.bind(null,t,e,n),e.then(t,t))}function A4(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function R4(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ac(-1,1),e.tag=2,id(n,e,1))),n.lanes|=1),t)}var xre=Vc.ReactCurrentOwner,Hs=!1;function ws(t,e,n,r){e.child=t===null?yV(e,null,n,r):Lm(e,t.child,n,r)}function P4(t,e,n,r,i){n=n.render;var s=e.ref;return fm(e,i),r=ok(t,e,n,r,s,i),n=ak(),t!==null&&!Hs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Dc(t,e,i)):(yr&&n&&YO(e),e.flags|=1,ws(t,e,r,i),e.child)}function I4(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!vk(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,$V(t,e,s,r,i)):(t=Qx(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ay,n(o,r)&&t.ref===e.ref)return Dc(t,e,i)}return e.flags|=1,t=ad(s,r),t.ref=e.ref,t.return=e,e.child=t}function $V(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ay(s,r)&&t.ref===e.ref)if(Hs=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Hs=!0);else return e.lanes=t.lanes,Dc(t,e,i)}return lI(t,e,n,r,i)}function jV(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},er(qp,uo),uo|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,er(qp,uo),uo|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,er(qp,uo),uo|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,er(qp,uo),uo|=r;return ws(t,e,i,n),e.child}function GV(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function lI(t,e,n,r,i){var s=Ws(n)?Qh:fs.current;return s=Im(e,s),fm(e,i),n=ok(t,e,n,r,s,i),r=ak(),t!==null&&!Hs?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Dc(t,e,i)):(yr&&r&&YO(e),e.flags|=1,ws(t,e,n,i),e.child)}function M4(t,e,n,r,i){if(Ws(n)){var s=!0;VE(e)}else s=!1;if(fm(e,i),e.stateNode===null)Kx(t,e),gV(e,n,r),oI(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=ca(c):(c=Ws(n)?Qh:fs.current,c=Im(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==c)&&E4(e,o,r,c),Iu=!1;var h=e.memoizedState;o.state=h,qE(e,r,o,i),l=e.memoizedState,a!==r||h!==l||Vs.current||Iu?(typeof u=="function"&&(sI(e,n,u,r),l=e.memoizedState),(a=Iu||x4(e,n,a,r,h,l,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,pV(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Ia(e.type,a),o.props=c,d=e.pendingProps,h=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=ca(l):(l=Ws(n)?Qh:fs.current,l=Im(e,l));var f=n.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||h!==l)&&E4(e,o,r,l),Iu=!1,h=e.memoizedState,o.state=h,qE(e,r,o,i);var p=e.memoizedState;a!==d||h!==p||Vs.current||Iu?(typeof f=="function"&&(sI(e,n,f,r),p=e.memoizedState),(c=Iu||x4(e,n,c,r,h,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return cI(t,e,n,r,s,i)}function cI(t,e,n,r,i,s){GV(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&g4(e,n,!1),Dc(t,e,s);r=e.stateNode,xre.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Lm(e,t.child,null,s),e.child=Lm(e,null,a,s)):ws(t,e,a,s),e.memoizedState=r.state,i&&g4(e,n,!0),e.child}function HV(t){var e=t.stateNode;e.pendingContext?m4(t,e.pendingContext,e.pendingContext!==e.context):e.context&&m4(t,e.context,!1),nk(t,e.containerInfo)}function L4(t,e,n,r,i){return Mm(),qO(i),e.flags|=256,ws(t,e,n,r),e.child}var uI={dehydrated:null,treeContext:null,retryLane:0};function dI(t){return{baseLanes:t,cachePool:null,transitions:null}}function VV(t,e,n){var r=e.pendingProps,i=Er.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),er(Er,i&1),t===null)return rI(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=qT(o,r,0,null),t=Nh(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=dI(n),e.memoizedState=uI,t):uk(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return Ere(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=ad(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=ad(a,s):(s=Nh(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?dI(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=uI,r}return s=t.child,t=s.sibling,r=ad(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function uk(t,e){return e=qT({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function cb(t,e,n,r){return r!==null&&qO(r),Lm(e,t.child,null,n),t=uk(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Ere(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=eR(Error(Ke(422))),cb(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=qT({mode:"visible",children:r.children},i,0,null),s=Nh(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&Lm(e,t.child,null,o),e.child.memoizedState=dI(o),e.memoizedState=uI,s);if(!(e.mode&1))return cb(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(Ke(419)),r=eR(s,r,void 0),cb(t,e,o,r)}if(a=(o&t.childLanes)!==0,Hs||a){if(r=Ii,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Nc(t,i),Va(r,t,i,-1))}return gk(),r=eR(Error(Ke(421))),cb(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Nre.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,go=rd(i.nextSibling),bo=e,yr=!0,ka=null,t!==null&&(Zo[Qo++]=wc,Zo[Qo++]=Tc,Zo[Qo++]=Jh,wc=t.id,Tc=t.overflow,Jh=e),e=uk(e,r.children),e.flags|=4096,e)}function O4(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),iI(t.return,e,n)}function tR(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function WV(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(ws(t,e,r.children,n),r=Er.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&O4(t,n,e);else if(t.tag===19)O4(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(er(Er,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ZE(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),tR(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ZE(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}tR(e,!0,n,null,s);break;case"together":tR(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Kx(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Dc(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),tf|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ke(153));if(e.child!==null){for(t=e.child,n=ad(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ad(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function wre(t,e,n){switch(e.tag){case 3:HV(e),Mm();break;case 5:_V(e);break;case 1:Ws(e.type)&&VE(e);break;case 4:nk(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;er(YE,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(er(Er,Er.current&1),e.flags|=128,null):n&e.child.childLanes?VV(t,e,n):(er(Er,Er.current&1),t=Dc(t,e,n),t!==null?t.sibling:null);er(Er,Er.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return WV(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),er(Er,Er.current),r)break;return null;case 22:case 23:return e.lanes=0,jV(t,e,n)}return Dc(t,e,n)}var XV,hI,YV,KV;XV=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};hI=function(){};YV=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Sh(Bl.current);var s=null;switch(n){case"input":i=k2(t,i),r=k2(t,r),s=[];break;case"select":i=Cr({},i,{value:void 0}),r=Cr({},r,{value:void 0}),s=[];break;case"textarea":i=B2(t,i),r=B2(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=GE)}U2(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ey.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var l=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ey.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&rr("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};KV=function(t,e,n,r){n!==r&&(e.flags|=4)};function l0(t,e){if(!yr)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ns(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Tre(t,e,n){var r=e.pendingProps;switch(KO(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ns(e),null;case 1:return Ws(e.type)&&HE(),ns(e),null;case 3:return r=e.stateNode,Om(),ar(Vs),ar(fs),ik(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ab(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ka!==null&&(bI(ka),ka=null))),hI(t,e),ns(e),null;case 5:rk(e);var i=Sh(hy.current);if(n=e.type,t!==null&&e.stateNode!=null)YV(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(Ke(166));return ns(e),null}if(t=Sh(Bl.current),ab(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Pl]=e,r[uy]=s,t=(e.mode&1)!==0,n){case"dialog":rr("cancel",r),rr("close",r);break;case"iframe":case"object":case"embed":rr("load",r);break;case"video":case"audio":for(i=0;i<X0.length;i++)rr(X0[i],r);break;case"source":rr("error",r);break;case"img":case"image":case"link":rr("error",r),rr("load",r);break;case"details":rr("toggle",r);break;case"input":jF(r,s),rr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},rr("invalid",r);break;case"textarea":HF(r,s),rr("invalid",r)}U2(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&ob(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ob(r.textContent,a,t),i=["children",""+a]):ey.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&rr("scroll",r)}switch(n){case"input":Q_(r),GF(r,s,!0);break;case"textarea":Q_(r),VF(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=GE)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=EH(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Pl]=e,t[uy]=r,XV(t,e,!1,!1),e.stateNode=t;e:{switch(o=z2(n,r),n){case"dialog":rr("cancel",t),rr("close",t),i=r;break;case"iframe":case"object":case"embed":rr("load",t),i=r;break;case"video":case"audio":for(i=0;i<X0.length;i++)rr(X0[i],t);i=r;break;case"source":rr("error",t),i=r;break;case"img":case"image":case"link":rr("error",t),rr("load",t),i=r;break;case"details":rr("toggle",t),i=r;break;case"input":jF(t,r),i=k2(t,r),rr("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Cr({},r,{value:void 0}),rr("invalid",t);break;case"textarea":HF(t,r),i=B2(t,r),rr("invalid",t);break;default:i=r}U2(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?SH(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&wH(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&ty(t,l):typeof l=="number"&&ty(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(ey.hasOwnProperty(s)?l!=null&&s==="onScroll"&&rr("scroll",t):l!=null&&kO(t,s,l,o))}switch(n){case"input":Q_(t),GF(t,r,!1);break;case"textarea":Q_(t),VF(t);break;case"option":r.value!=null&&t.setAttribute("value",""+pd(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?cm(t,!!r.multiple,s,!1):r.defaultValue!=null&&cm(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=GE)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ns(e),null;case 6:if(t&&e.stateNode!=null)KV(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(Ke(166));if(n=Sh(hy.current),Sh(Bl.current),ab(e)){if(r=e.stateNode,n=e.memoizedProps,r[Pl]=e,(s=r.nodeValue!==n)&&(t=bo,t!==null))switch(t.tag){case 3:ob(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ob(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Pl]=e,e.stateNode=r}return ns(e),null;case 13:if(ar(Er),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(yr&&go!==null&&e.mode&1&&!(e.flags&128))hV(),Mm(),e.flags|=98560,s=!1;else if(s=ab(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(Ke(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ke(317));s[Pl]=e}else Mm(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ns(e),s=!1}else ka!==null&&(bI(ka),ka=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Er.current&1?di===0&&(di=3):gk())),e.updateQueue!==null&&(e.flags|=4),ns(e),null);case 4:return Om(),hI(t,e),t===null&&ly(e.stateNode.containerInfo),ns(e),null;case 10:return JO(e.type._context),ns(e),null;case 17:return Ws(e.type)&&HE(),ns(e),null;case 19:if(ar(Er),s=e.memoizedState,s===null)return ns(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)l0(s,!1);else{if(di!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ZE(t),o!==null){for(e.flags|=128,l0(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return er(Er,Er.current&1|2),e.child}t=t.sibling}s.tail!==null&&Hr()>Nm&&(e.flags|=128,r=!0,l0(s,!1),e.lanes=4194304)}else{if(!r)if(t=ZE(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),l0(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!yr)return ns(e),null}else 2*Hr()-s.renderingStartTime>Nm&&n!==1073741824&&(e.flags|=128,r=!0,l0(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Hr(),e.sibling=null,n=Er.current,er(Er,r?n&1|2:n&1),e):(ns(e),null);case 22:case 23:return mk(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?uo&1073741824&&(ns(e),e.subtreeFlags&6&&(e.flags|=8192)):ns(e),null;case 24:return null;case 25:return null}throw Error(Ke(156,e.tag))}function Sre(t,e){switch(KO(e),e.tag){case 1:return Ws(e.type)&&HE(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Om(),ar(Vs),ar(fs),ik(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return rk(e),null;case 13:if(ar(Er),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ke(340));Mm()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ar(Er),null;case 4:return Om(),null;case 10:return JO(e.type._context),null;case 22:case 23:return mk(),null;case 24:return null;default:return null}}var ub=!1,ls=!1,Cre=typeof WeakSet=="function"?WeakSet:Set,_t=null;function Kp(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Or(t,e,r)}else n.current=null}function fI(t,e,n){try{n()}catch(r){Or(t,e,r)}}var k4=!1;function Are(t,e){if(q2=zE,t=JH(),XO(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,d=t,h=null;t:for(;;){for(var f;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++c===i&&(a=o),h===s&&++u===r&&(l=o),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Z2={focusedElem:t,selectionRange:n},zE=!1,_t=e;_t!==null;)if(e=_t,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,_t=t;else for(;_t!==null;){e=_t;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,_=p.memoizedState,y=e.stateNode,x=y.getSnapshotBeforeUpdate(e.elementType===e.type?m:Ia(e.type,m),_);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ke(163))}}catch(E){Or(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,_t=t;break}_t=e.return}return p=k4,k4=!1,p}function wv(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&fI(e,n,s)}i=i.next}while(i!==r)}}function YT(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function pI(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function qV(t){var e=t.alternate;e!==null&&(t.alternate=null,qV(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Pl],delete e[uy],delete e[eI],delete e[cre],delete e[ure])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ZV(t){return t.tag===5||t.tag===3||t.tag===4}function N4(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ZV(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function mI(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=GE));else if(r!==4&&(t=t.child,t!==null))for(mI(t,e,n),t=t.sibling;t!==null;)mI(t,e,n),t=t.sibling}function gI(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(gI(t,e,n),t=t.sibling;t!==null;)gI(t,e,n),t=t.sibling}var ji=null,Ma=!1;function du(t,e,n){for(n=n.child;n!==null;)QV(t,e,n),n=n.sibling}function QV(t,e,n){if(Dl&&typeof Dl.onCommitFiberUnmount=="function")try{Dl.onCommitFiberUnmount(zT,n)}catch{}switch(n.tag){case 5:ls||Kp(n,e);case 6:var r=ji,i=Ma;ji=null,du(t,e,n),ji=r,Ma=i,ji!==null&&(Ma?(t=ji,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ji.removeChild(n.stateNode));break;case 18:ji!==null&&(Ma?(t=ji,n=n.stateNode,t.nodeType===8?YA(t.parentNode,n):t.nodeType===1&&YA(t,n),sy(t)):YA(ji,n.stateNode));break;case 4:r=ji,i=Ma,ji=n.stateNode.containerInfo,Ma=!0,du(t,e,n),ji=r,Ma=i;break;case 0:case 11:case 14:case 15:if(!ls&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&fI(n,e,o),i=i.next}while(i!==r)}du(t,e,n);break;case 1:if(!ls&&(Kp(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Or(n,e,a)}du(t,e,n);break;case 21:du(t,e,n);break;case 22:n.mode&1?(ls=(r=ls)||n.memoizedState!==null,du(t,e,n),ls=r):du(t,e,n);break;default:du(t,e,n)}}function D4(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Cre),e.forEach(function(r){var i=Dre.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ta(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ji=a.stateNode,Ma=!1;break e;case 3:ji=a.stateNode.containerInfo,Ma=!0;break e;case 4:ji=a.stateNode.containerInfo,Ma=!0;break e}a=a.return}if(ji===null)throw Error(Ke(160));QV(s,o,i),ji=null,Ma=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(c){Or(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)JV(e,t),e=e.sibling}function JV(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ta(e,t),fl(t),r&4){try{wv(3,t,t.return),YT(3,t)}catch(m){Or(t,t.return,m)}try{wv(5,t,t.return)}catch(m){Or(t,t.return,m)}}break;case 1:Ta(e,t),fl(t),r&512&&n!==null&&Kp(n,n.return);break;case 5:if(Ta(e,t),fl(t),r&512&&n!==null&&Kp(n,n.return),t.flags&32){var i=t.stateNode;try{ty(i,"")}catch(m){Or(t,t.return,m)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&bH(i,s),z2(a,o);var c=z2(a,s);for(o=0;o<l.length;o+=2){var u=l[o],d=l[o+1];u==="style"?SH(i,d):u==="dangerouslySetInnerHTML"?wH(i,d):u==="children"?ty(i,d):kO(i,u,d,c)}switch(a){case"input":N2(i,s);break;case"textarea":xH(i,s);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?cm(i,!!s.multiple,f,!1):h!==!!s.multiple&&(s.defaultValue!=null?cm(i,!!s.multiple,s.defaultValue,!0):cm(i,!!s.multiple,s.multiple?[]:"",!1))}i[uy]=s}catch(m){Or(t,t.return,m)}}break;case 6:if(Ta(e,t),fl(t),r&4){if(t.stateNode===null)throw Error(Ke(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(m){Or(t,t.return,m)}}break;case 3:if(Ta(e,t),fl(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{sy(e.containerInfo)}catch(m){Or(t,t.return,m)}break;case 4:Ta(e,t),fl(t);break;case 13:Ta(e,t),fl(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(fk=Hr())),r&4&&D4(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(ls=(c=ls)||u,Ta(e,t),ls=c):Ta(e,t),fl(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(_t=t,u=t.child;u!==null;){for(d=_t=u;_t!==null;){switch(h=_t,f=h.child,h.tag){case 0:case 11:case 14:case 15:wv(4,h,h.return);break;case 1:Kp(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Or(r,n,m)}}break;case 5:Kp(h,h.return);break;case 22:if(h.memoizedState!==null){F4(d);continue}}f!==null?(f.return=h,_t=f):F4(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=TH("display",o))}catch(m){Or(t,t.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){Or(t,t.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ta(e,t),fl(t),r&4&&D4(t);break;case 21:break;default:Ta(e,t),fl(t)}}function fl(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ZV(n)){var r=n;break e}n=n.return}throw Error(Ke(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ty(i,""),r.flags&=-33);var s=N4(t);gI(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=N4(t);mI(t,a,o);break;default:throw Error(Ke(161))}}catch(l){Or(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Rre(t,e,n){_t=t,eW(t)}function eW(t,e,n){for(var r=(t.mode&1)!==0;_t!==null;){var i=_t,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ub;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||ls;a=ub;var c=ls;if(ub=o,(ls=l)&&!c)for(_t=i;_t!==null;)o=_t,l=o.child,o.tag===22&&o.memoizedState!==null?U4(i):l!==null?(l.return=o,_t=l):U4(i);for(;s!==null;)_t=s,eW(s),s=s.sibling;_t=i,ub=a,ls=c}B4(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,_t=s):B4(t)}}function B4(t){for(;_t!==null;){var e=_t;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ls||YT(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ls)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ia(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&b4(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}b4(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&sy(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ke(163))}ls||e.flags&512&&pI(e)}catch(h){Or(e,e.return,h)}}if(e===t){_t=null;break}if(n=e.sibling,n!==null){n.return=e.return,_t=n;break}_t=e.return}}function F4(t){for(;_t!==null;){var e=_t;if(e===t){_t=null;break}var n=e.sibling;if(n!==null){n.return=e.return,_t=n;break}_t=e.return}}function U4(t){for(;_t!==null;){var e=_t;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{YT(4,e)}catch(l){Or(e,n,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(l){Or(e,i,l)}}var s=e.return;try{pI(e)}catch(l){Or(e,s,l)}break;case 5:var o=e.return;try{pI(e)}catch(l){Or(e,o,l)}}}catch(l){Or(e,e.return,l)}if(e===t){_t=null;break}var a=e.sibling;if(a!==null){a.return=e.return,_t=a;break}_t=e.return}}var Pre=Math.ceil,ew=Vc.ReactCurrentDispatcher,dk=Vc.ReactCurrentOwner,ia=Vc.ReactCurrentBatchConfig,bn=0,Ii=null,Zr=null,Xi=0,uo=0,qp=Pd(0),di=0,gy=null,tf=0,KT=0,hk=0,Tv=null,Gs=null,fk=0,Nm=1/0,fc=null,tw=!1,vI=null,sd=null,db=!1,Vu=null,nw=0,Sv=0,yI=null,qx=-1,Zx=0;function Ms(){return bn&6?Hr():qx!==-1?qx:qx=Hr()}function od(t){return t.mode&1?bn&2&&Xi!==0?Xi&-Xi:hre.transition!==null?(Zx===0&&(Zx=BH()),Zx):(t=Bn,t!==0||(t=window.event,t=t===void 0?16:HH(t.type)),t):1}function Va(t,e,n,r){if(50<Sv)throw Sv=0,yI=null,Error(Ke(185));f1(t,n,r),(!(bn&2)||t!==Ii)&&(t===Ii&&(!(bn&2)&&(KT|=n),di===4&&Du(t,Xi)),Xs(t,r),n===1&&bn===0&&!(e.mode&1)&&(Nm=Hr()+500,VT&&Id()))}function Xs(t,e){var n=t.callbackNode;hne(t,e);var r=UE(t,t===Ii?Xi:0);if(r===0)n!==null&&YF(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&YF(n),e===1)t.tag===0?dre(z4.bind(null,t)):cV(z4.bind(null,t)),are(function(){!(bn&6)&&Id()}),n=null;else{switch(FH(r)){case 1:n=UO;break;case 4:n=NH;break;case 16:n=FE;break;case 536870912:n=DH;break;default:n=FE}n=lW(n,tW.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function tW(t,e){if(qx=-1,Zx=0,bn&6)throw Error(Ke(327));var n=t.callbackNode;if(pm()&&t.callbackNode!==n)return null;var r=UE(t,t===Ii?Xi:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=rw(t,r);else{e=r;var i=bn;bn|=2;var s=rW();(Ii!==t||Xi!==e)&&(fc=null,Nm=Hr()+500,kh(t,e));do try{Lre();break}catch(a){nW(t,a)}while(!0);QO(),ew.current=s,bn=i,Zr!==null?e=0:(Ii=null,Xi=0,e=di)}if(e!==0){if(e===2&&(i=V2(t),i!==0&&(r=i,e=_I(t,i))),e===1)throw n=gy,kh(t,0),Du(t,r),Xs(t,Hr()),n;if(e===6)Du(t,r);else{if(i=t.current.alternate,!(r&30)&&!Ire(i)&&(e=rw(t,r),e===2&&(s=V2(t),s!==0&&(r=s,e=_I(t,s))),e===1))throw n=gy,kh(t,0),Du(t,r),Xs(t,Hr()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(Ke(345));case 2:hh(t,Gs,fc);break;case 3:if(Du(t,r),(r&130023424)===r&&(e=fk+500-Hr(),10<e)){if(UE(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ms(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=J2(hh.bind(null,t,Gs,fc),e);break}hh(t,Gs,fc);break;case 4:if(Du(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Ha(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Hr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Pre(r/1960))-r,10<r){t.timeoutHandle=J2(hh.bind(null,t,Gs,fc),r);break}hh(t,Gs,fc);break;case 5:hh(t,Gs,fc);break;default:throw Error(Ke(329))}}}return Xs(t,Hr()),t.callbackNode===n?tW.bind(null,t):null}function _I(t,e){var n=Tv;return t.current.memoizedState.isDehydrated&&(kh(t,e).flags|=256),t=rw(t,e),t!==2&&(e=Gs,Gs=n,e!==null&&bI(e)),t}function bI(t){Gs===null?Gs=t:Gs.push.apply(Gs,t)}function Ire(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!qa(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Du(t,e){for(e&=~hk,e&=~KT,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ha(e),r=1<<n;t[n]=-1,e&=~r}}function z4(t){if(bn&6)throw Error(Ke(327));pm();var e=UE(t,0);if(!(e&1))return Xs(t,Hr()),null;var n=rw(t,e);if(t.tag!==0&&n===2){var r=V2(t);r!==0&&(e=r,n=_I(t,r))}if(n===1)throw n=gy,kh(t,0),Du(t,e),Xs(t,Hr()),n;if(n===6)throw Error(Ke(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,hh(t,Gs,fc),Xs(t,Hr()),null}function pk(t,e){var n=bn;bn|=1;try{return t(e)}finally{bn=n,bn===0&&(Nm=Hr()+500,VT&&Id())}}function nf(t){Vu!==null&&Vu.tag===0&&!(bn&6)&&pm();var e=bn;bn|=1;var n=ia.transition,r=Bn;try{if(ia.transition=null,Bn=1,t)return t()}finally{Bn=r,ia.transition=n,bn=e,!(bn&6)&&Id()}}function mk(){uo=qp.current,ar(qp)}function kh(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,ore(n)),Zr!==null)for(n=Zr.return;n!==null;){var r=n;switch(KO(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&HE();break;case 3:Om(),ar(Vs),ar(fs),ik();break;case 5:rk(r);break;case 4:Om();break;case 13:ar(Er);break;case 19:ar(Er);break;case 10:JO(r.type._context);break;case 22:case 23:mk()}n=n.return}if(Ii=t,Zr=t=ad(t.current,null),Xi=uo=e,di=0,gy=null,hk=KT=tf=0,Gs=Tv=null,Th!==null){for(e=0;e<Th.length;e++)if(n=Th[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Th=null}return t}function nW(t,e){do{var n=Zr;try{if(QO(),Xx.current=JE,QE){for(var r=Sr.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}QE=!1}if(ef=0,Si=ci=Sr=null,Ev=!1,fy=0,dk.current=null,n===null||n.return===null){di=1,gy=e,Zr=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=Xi,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=A4(o);if(f!==null){f.flags&=-257,R4(f,o,a,s,e),f.mode&1&&C4(s,c,e),e=f,l=c;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){C4(s,c,e),gk();break e}l=Error(Ke(426))}}else if(yr&&a.mode&1){var _=A4(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),R4(_,o,a,s,e),qO(km(l,a));break e}}s=l=km(l,a),di!==4&&(di=2),Tv===null?Tv=[s]:Tv.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=UV(s,l,e);_4(s,y);break e;case 1:a=l;var x=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(sd===null||!sd.has(b)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=zV(s,a,e);_4(s,E);break e}}s=s.return}while(s!==null)}sW(n)}catch(w){e=w,Zr===n&&n!==null&&(Zr=n=n.return);continue}break}while(!0)}function rW(){var t=ew.current;return ew.current=JE,t===null?JE:t}function gk(){(di===0||di===3||di===2)&&(di=4),Ii===null||!(tf&268435455)&&!(KT&268435455)||Du(Ii,Xi)}function rw(t,e){var n=bn;bn|=2;var r=rW();(Ii!==t||Xi!==e)&&(fc=null,kh(t,e));do try{Mre();break}catch(i){nW(t,i)}while(!0);if(QO(),bn=n,ew.current=r,Zr!==null)throw Error(Ke(261));return Ii=null,Xi=0,di}function Mre(){for(;Zr!==null;)iW(Zr)}function Lre(){for(;Zr!==null&&!rne();)iW(Zr)}function iW(t){var e=aW(t.alternate,t,uo);t.memoizedProps=t.pendingProps,e===null?sW(t):Zr=e,dk.current=null}function sW(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Sre(n,e),n!==null){n.flags&=32767,Zr=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{di=6,Zr=null;return}}else if(n=Tre(n,e,uo),n!==null){Zr=n;return}if(e=e.sibling,e!==null){Zr=e;return}Zr=e=t}while(e!==null);di===0&&(di=5)}function hh(t,e,n){var r=Bn,i=ia.transition;try{ia.transition=null,Bn=1,Ore(t,e,n,r)}finally{ia.transition=i,Bn=r}return null}function Ore(t,e,n,r){do pm();while(Vu!==null);if(bn&6)throw Error(Ke(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ke(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(fne(t,s),t===Ii&&(Zr=Ii=null,Xi=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||db||(db=!0,lW(FE,function(){return pm(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=ia.transition,ia.transition=null;var o=Bn;Bn=1;var a=bn;bn|=4,dk.current=null,Are(t,n),JV(n,t),Jne(Z2),zE=!!q2,Z2=q2=null,t.current=n,Rre(n),ine(),bn=a,Bn=o,ia.transition=s}else t.current=n;if(db&&(db=!1,Vu=t,nw=i),s=t.pendingLanes,s===0&&(sd=null),ane(n.stateNode),Xs(t,Hr()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(tw)throw tw=!1,t=vI,vI=null,t;return nw&1&&t.tag!==0&&pm(),s=t.pendingLanes,s&1?t===yI?Sv++:(Sv=0,yI=t):Sv=0,Id(),null}function pm(){if(Vu!==null){var t=FH(nw),e=ia.transition,n=Bn;try{if(ia.transition=null,Bn=16>t?16:t,Vu===null)var r=!1;else{if(t=Vu,Vu=null,nw=0,bn&6)throw Error(Ke(331));var i=bn;for(bn|=4,_t=t.current;_t!==null;){var s=_t,o=s.child;if(_t.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(_t=c;_t!==null;){var u=_t;switch(u.tag){case 0:case 11:case 15:wv(8,u,s)}var d=u.child;if(d!==null)d.return=u,_t=d;else for(;_t!==null;){u=_t;var h=u.sibling,f=u.return;if(qV(u),u===c){_t=null;break}if(h!==null){h.return=f,_t=h;break}_t=f}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var _=m.sibling;m.sibling=null,m=_}while(m!==null)}}_t=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,_t=o;else e:for(;_t!==null;){if(s=_t,s.flags&2048)switch(s.tag){case 0:case 11:case 15:wv(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,_t=y;break e}_t=s.return}}var x=t.current;for(_t=x;_t!==null;){o=_t;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,_t=b;else e:for(o=x;_t!==null;){if(a=_t,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:YT(9,a)}}catch(w){Or(a,a.return,w)}if(a===o){_t=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,_t=E;break e}_t=a.return}}if(bn=i,Id(),Dl&&typeof Dl.onPostCommitFiberRoot=="function")try{Dl.onPostCommitFiberRoot(zT,t)}catch{}r=!0}return r}finally{Bn=n,ia.transition=e}}return!1}function $4(t,e,n){e=km(n,e),e=UV(t,e,1),t=id(t,e,1),e=Ms(),t!==null&&(f1(t,1,e),Xs(t,e))}function Or(t,e,n){if(t.tag===3)$4(t,t,n);else for(;e!==null;){if(e.tag===3){$4(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(sd===null||!sd.has(r))){t=km(n,t),t=zV(e,t,1),e=id(e,t,1),t=Ms(),e!==null&&(f1(e,1,t),Xs(e,t));break}}e=e.return}}function kre(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ms(),t.pingedLanes|=t.suspendedLanes&n,Ii===t&&(Xi&n)===n&&(di===4||di===3&&(Xi&130023424)===Xi&&500>Hr()-fk?kh(t,0):hk|=n),Xs(t,e)}function oW(t,e){e===0&&(t.mode&1?(e=tb,tb<<=1,!(tb&130023424)&&(tb=4194304)):e=1);var n=Ms();t=Nc(t,e),t!==null&&(f1(t,e,n),Xs(t,n))}function Nre(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),oW(t,n)}function Dre(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(Ke(314))}r!==null&&r.delete(e),oW(t,n)}var aW;aW=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Vs.current)Hs=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Hs=!1,wre(t,e,n);Hs=!!(t.flags&131072)}else Hs=!1,yr&&e.flags&1048576&&uV(e,XE,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Kx(t,e),t=e.pendingProps;var i=Im(e,fs.current);fm(e,n),i=ok(null,e,r,t,i,n);var s=ak();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ws(r)?(s=!0,VE(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,tk(e),i.updater=WT,e.stateNode=i,i._reactInternals=e,oI(e,r,t,n),e=cI(null,e,r,!0,s,n)):(e.tag=0,yr&&s&&YO(e),ws(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Kx(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=Fre(r),t=Ia(r,t),i){case 0:e=lI(null,e,r,t,n);break e;case 1:e=M4(null,e,r,t,n);break e;case 11:e=P4(null,e,r,t,n);break e;case 14:e=I4(null,e,r,Ia(r.type,t),n);break e}throw Error(Ke(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ia(r,i),lI(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ia(r,i),M4(t,e,r,i,n);case 3:e:{if(HV(e),t===null)throw Error(Ke(387));r=e.pendingProps,s=e.memoizedState,i=s.element,pV(t,e),qE(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=km(Error(Ke(423)),e),e=L4(t,e,r,n,i);break e}else if(r!==i){i=km(Error(Ke(424)),e),e=L4(t,e,r,n,i);break e}else for(go=rd(e.stateNode.containerInfo.firstChild),bo=e,yr=!0,ka=null,n=yV(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Mm(),r===i){e=Dc(t,e,n);break e}ws(t,e,r,n)}e=e.child}return e;case 5:return _V(e),t===null&&rI(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Q2(r,i)?o=null:s!==null&&Q2(r,s)&&(e.flags|=32),GV(t,e),ws(t,e,o,n),e.child;case 6:return t===null&&rI(e),null;case 13:return VV(t,e,n);case 4:return nk(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Lm(e,null,r,n):ws(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ia(r,i),P4(t,e,r,i,n);case 7:return ws(t,e,e.pendingProps,n),e.child;case 8:return ws(t,e,e.pendingProps.children,n),e.child;case 12:return ws(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,er(YE,r._currentValue),r._currentValue=o,s!==null)if(qa(s.value,o)){if(s.children===i.children&&!Vs.current){e=Dc(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=Ac(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),iI(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ke(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),iI(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ws(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,fm(e,n),i=ca(i),r=r(i),e.flags|=1,ws(t,e,r,n),e.child;case 14:return r=e.type,i=Ia(r,e.pendingProps),i=Ia(r.type,i),I4(t,e,r,i,n);case 15:return $V(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ia(r,i),Kx(t,e),e.tag=1,Ws(r)?(t=!0,VE(e)):t=!1,fm(e,n),gV(e,r,i),oI(e,r,i,n),cI(null,e,r,!0,t,n);case 19:return WV(t,e,n);case 22:return jV(t,e,n)}throw Error(Ke(156,e.tag))};function lW(t,e){return kH(t,e)}function Bre(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ta(t,e,n,r){return new Bre(t,e,n,r)}function vk(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Fre(t){if(typeof t=="function")return vk(t)?1:0;if(t!=null){if(t=t.$$typeof,t===DO)return 11;if(t===BO)return 14}return 2}function ad(t,e){var n=t.alternate;return n===null?(n=ta(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Qx(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")vk(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case zp:return Nh(n.children,i,s,e);case NO:o=8,i|=8;break;case I2:return t=ta(12,n,e,i|2),t.elementType=I2,t.lanes=s,t;case M2:return t=ta(13,n,e,i),t.elementType=M2,t.lanes=s,t;case L2:return t=ta(19,n,e,i),t.elementType=L2,t.lanes=s,t;case vH:return qT(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case mH:o=10;break e;case gH:o=9;break e;case DO:o=11;break e;case BO:o=14;break e;case Pu:o=16,r=null;break e}throw Error(Ke(130,t==null?t:typeof t,""))}return e=ta(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Nh(t,e,n,r){return t=ta(7,t,r,e),t.lanes=n,t}function qT(t,e,n,r){return t=ta(22,t,r,e),t.elementType=vH,t.lanes=n,t.stateNode={isHidden:!1},t}function nR(t,e,n){return t=ta(6,t,null,e),t.lanes=n,t}function rR(t,e,n){return e=ta(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Ure(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=BA(0),this.expirationTimes=BA(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=BA(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function yk(t,e,n,r,i,s,o,a,l){return t=new Ure(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ta(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},tk(s),t}function zre(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Up,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function cW(t){if(!t)return md;t=t._reactInternals;e:{if(Sf(t)!==t||t.tag!==1)throw Error(Ke(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ws(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ke(171))}if(t.tag===1){var n=t.type;if(Ws(n))return lV(t,n,e)}return e}function uW(t,e,n,r,i,s,o,a,l){return t=yk(n,r,!0,t,i,s,o,a,l),t.context=cW(null),n=t.current,r=Ms(),i=od(n),s=Ac(r,i),s.callback=e??null,id(n,s,i),t.current.lanes=i,f1(t,i,r),Xs(t,r),t}function ZT(t,e,n,r){var i=e.current,s=Ms(),o=od(i);return n=cW(n),e.context===null?e.context=n:e.pendingContext=n,e=Ac(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=id(i,e,o),t!==null&&(Va(t,i,o,s),Wx(t,i,o)),o}function iw(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function j4(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function _k(t,e){j4(t,e),(t=t.alternate)&&j4(t,e)}function $re(){return null}var dW=typeof reportError=="function"?reportError:function(t){console.error(t)};function bk(t){this._internalRoot=t}QT.prototype.render=bk.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ke(409));ZT(t,e,null,null)};QT.prototype.unmount=bk.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;nf(function(){ZT(null,t,null,null)}),e[kc]=null}};function QT(t){this._internalRoot=t}QT.prototype.unstable_scheduleHydration=function(t){if(t){var e=$H();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Nu.length&&e!==0&&e<Nu[n].priority;n++);Nu.splice(n,0,t),n===0&&GH(t)}};function xk(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function JT(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function G4(){}function jre(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=iw(o);s.call(c)}}var o=uW(e,r,t,0,null,!1,!1,"",G4);return t._reactRootContainer=o,t[kc]=o.current,ly(t.nodeType===8?t.parentNode:t),nf(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=iw(l);a.call(c)}}var l=yk(t,0,!1,null,null,!1,!1,"",G4);return t._reactRootContainer=l,t[kc]=l.current,ly(t.nodeType===8?t.parentNode:t),nf(function(){ZT(e,l,n,r)}),l}function eS(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=iw(o);a.call(l)}}ZT(e,o,t,i)}else o=jre(n,e,t,i,r);return iw(o)}UH=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=W0(e.pendingLanes);n!==0&&(zO(e,n|1),Xs(e,Hr()),!(bn&6)&&(Nm=Hr()+500,Id()))}break;case 13:nf(function(){var r=Nc(t,1);if(r!==null){var i=Ms();Va(r,t,1,i)}}),_k(t,1)}};$O=function(t){if(t.tag===13){var e=Nc(t,134217728);if(e!==null){var n=Ms();Va(e,t,134217728,n)}_k(t,134217728)}};zH=function(t){if(t.tag===13){var e=od(t),n=Nc(t,e);if(n!==null){var r=Ms();Va(n,t,e,r)}_k(t,e)}};$H=function(){return Bn};jH=function(t,e){var n=Bn;try{return Bn=t,e()}finally{Bn=n}};j2=function(t,e,n){switch(e){case"input":if(N2(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=HT(r);if(!i)throw Error(Ke(90));_H(r),N2(r,i)}}}break;case"textarea":xH(t,n);break;case"select":e=n.value,e!=null&&cm(t,!!n.multiple,e,!1)}};RH=pk;PH=nf;var Gre={usingClientEntryPoint:!1,Events:[m1,Hp,HT,CH,AH,pk]},c0={findFiberByHostInstance:wh,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Hre={bundleType:c0.bundleType,version:c0.version,rendererPackageName:c0.rendererPackageName,rendererConfig:c0.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Vc.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=LH(t),t===null?null:t.stateNode},findFiberByHostInstance:c0.findFiberByHostInstance||$re,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hb=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hb.isDisabled&&hb.supportsFiber)try{zT=hb.inject(Hre),Dl=hb}catch{}}Lo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gre;Lo.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!xk(e))throw Error(Ke(200));return zre(t,e,null,n)};Lo.createRoot=function(t,e){if(!xk(t))throw Error(Ke(299));var n=!1,r="",i=dW;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=yk(t,1,!1,null,null,n,!1,r,i),t[kc]=e.current,ly(t.nodeType===8?t.parentNode:t),new bk(e)};Lo.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ke(188)):(t=Object.keys(t).join(","),Error(Ke(268,t)));return t=LH(e),t=t===null?null:t.stateNode,t};Lo.flushSync=function(t){return nf(t)};Lo.hydrate=function(t,e,n){if(!JT(e))throw Error(Ke(200));return eS(null,t,e,!0,n)};Lo.hydrateRoot=function(t,e,n){if(!xk(t))throw Error(Ke(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=dW;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=uW(e,null,t,1,n??null,i,!1,s,o),t[kc]=e.current,ly(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new QT(e)};Lo.render=function(t,e,n){if(!JT(e))throw Error(Ke(200));return eS(null,t,e,!1,n)};Lo.unmountComponentAtNode=function(t){if(!JT(t))throw Error(Ke(40));return t._reactRootContainer?(nf(function(){eS(null,null,t,!1,function(){t._reactRootContainer=null,t[kc]=null})}),!0):!1};Lo.unstable_batchedUpdates=pk;Lo.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!JT(n))throw Error(Ke(200));if(t==null||t._reactInternals===void 0)throw Error(Ke(38));return eS(t,e,n,!1,r)};Lo.version="18.2.0-next-9e3b772b8-20220608";function hW(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hW)}catch(t){console.error(t)}}hW(),uH.exports=Lo;var Wc=uH.exports;const Y0=Ad(Wc),Vre=yO({__proto__:null,default:Y0},[Wc]);/**
 * @remix-run/router v1.15.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function kr(){return kr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},kr.apply(this,arguments)}var $r;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})($r||($r={}));const H4="popstate";function Wre(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:a="",hash:l=""}=Kl(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),vy("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=i.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof s=="string"?s:sf(s))}function r(i,s){rf(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return Yre(e,n,r,t)}function dn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function rf(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Xre(){return Math.random().toString(36).substr(2,8)}function V4(t,e){return{usr:t.state,key:t.key,idx:e}}function vy(t,e,n,r){return n===void 0&&(n=null),kr({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Kl(e):e,{state:n,key:e&&e.key||r||Xre()})}function sf(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Kl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Yre(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=$r.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(kr({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function d(){a=$r.Pop;let _=u(),y=_==null?null:_-c;c=_,l&&l({action:a,location:m.location,delta:y})}function h(_,y){a=$r.Push;let x=vy(m.location,_,y);n&&n(x,_),c=u()+1;let b=V4(x,c),E=m.createHref(x);try{o.pushState(b,"",E)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;i.location.assign(E)}s&&l&&l({action:a,location:m.location,delta:1})}function f(_,y){a=$r.Replace;let x=vy(m.location,_,y);n&&n(x,_),c=u();let b=V4(x,c),E=m.createHref(x);o.replaceState(b,"",E),s&&l&&l({action:a,location:m.location,delta:0})}function p(_){let y=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof _=="string"?_:sf(_);return x=x.replace(/ $/,"%20"),dn(y,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,y)}let m={get action(){return a},get location(){return t(i,o)},listen(_){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(H4,d),l=_,()=>{i.removeEventListener(H4,d),l=null}},createHref(_){return e(i,_)},createURL:p,encodeLocation(_){let y=p(_);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:f,go(_){return o.go(_)}};return m}var Lr;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Lr||(Lr={}));const Kre=new Set(["lazy","caseSensitive","path","id","index","children"]);function qre(t){return t.index===!0}function xI(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,s)=>{let o=[...n,s],a=typeof i.id=="string"?i.id:o.join("-");if(dn(i.index!==!0||!i.children,"Cannot specify children on an index route"),dn(!r[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),qre(i)){let l=kr({},i,e(i),{id:a});return r[a]=l,l}else{let l=kr({},i,e(i),{id:a,children:void 0});return r[a]=l,i.children&&(l.children=xI(i.children,e,o,r)),l}})}function Zp(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Kl(e):e,i=Eg(r.pathname||"/",n);if(i==null)return null;let s=fW(t);Qre(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let l=uie(i);o=aie(s[a],l)}return o}function Zre(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function fW(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(dn(l.relativePath.startsWith(r),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(r.length));let c=Rc([r,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(dn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),fW(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:sie(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let l of pW(s.path))i(s,o,l)}),e}function pW(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=pW(r.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),i&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function Qre(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:oie(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Jre=/^:[\w-]+$/,eie=3,tie=2,nie=1,rie=10,iie=-2,W4=t=>t==="*";function sie(t,e){let n=t.split("/"),r=n.length;return n.some(W4)&&(r+=iie),e&&(r+=tie),n.filter(i=>!W4(i)).reduce((i,s)=>i+(Jre.test(s)?eie:s===""?nie:rie),r)}function oie(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function aie(t,e){let{routesMeta:n}=t,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],l=o===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",u=lie({path:a.relativePath,caseSensitive:a.caseSensitive,end:l},c);if(!u)return null;Object.assign(r,u.params);let d=a.route;s.push({params:r,pathname:Rc([i,u.pathname]),pathnameBase:fie(Rc([i,u.pathnameBase])),route:d}),u.pathnameBase!=="/"&&(i=Rc([i,u.pathnameBase]))}return s}function lie(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=cie(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((c,u,d)=>{let{paramName:h,isOptional:f}=u;if(h==="*"){let m=a[d]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[d];return f&&!p?c[h]=void 0:c[h]=(p||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function cie(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),rf(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(r.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function uie(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return rf(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Eg(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function die(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Kl(t):t;return{pathname:n?n.startsWith("/")?n:hie(n,e):e,search:pie(r),hash:mie(i)}}function hie(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function iR(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function mW(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Ek(t,e){let n=mW(t);return e?n.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function wk(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Kl(t):(i=kr({},t),dn(!i.pathname||!i.pathname.includes("?"),iR("?","pathname","search",i)),dn(!i.pathname||!i.pathname.includes("#"),iR("#","pathname","hash",i)),dn(!i.search||!i.search.includes("#"),iR("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),d-=1;i.pathname=h.join("/")}a=d>=0?e[d]:"/"}let l=die(i,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Rc=t=>t.join("/").replace(/\/\/+/g,"/"),fie=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),pie=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,mie=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class Tk{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function gW(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const vW=["post","put","patch","delete"],gie=new Set(vW),vie=["get",...vW],yie=new Set(vie),_ie=new Set([301,302,303,307,308]),bie=new Set([307,308]),sR={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},xie={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},u0={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},yW=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Eie=t=>({hasErrorBoundary:!!t.hasErrorBoundary}),_W="remix-router-transitions";function wie(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;dn(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let le=t.detectErrorBoundary;i=_e=>({hasErrorBoundary:le(_e)})}else i=Eie;let s={},o=xI(t.routes,i,void 0,s),a,l=t.basename||"/",c=kr({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},t.future),u=null,d=new Set,h=null,f=null,p=null,m=t.hydrationData!=null,_=Zp(o,t.history.location,l),y=null;if(_==null){let le=Wo(404,{pathname:t.history.location.pathname}),{matches:_e,route:Me}=e5(o);_=_e,y={[Me.id]:le}}let x,b=_.some(le=>le.route.lazy),E=_.some(le=>le.route.loader);if(b)x=!1;else if(!E)x=!0;else if(c.v7_partialHydration){let le=t.hydrationData?t.hydrationData.loaderData:null,_e=t.hydrationData?t.hydrationData.errors:null;x=_.every(Me=>Me.route.loader&&Me.route.loader.hydrate!==!0&&(le&&le[Me.route.id]!==void 0||_e&&_e[Me.route.id]!==void 0))}else x=t.hydrationData!=null;let w,T={historyAction:t.history.action,location:t.history.location,matches:_,initialized:x,navigation:sR,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||y,fetchers:new Map,blockers:new Map},C=$r.Pop,P=!1,M,N=!1,F=new Map,I=null,k=!1,R=!1,z=[],X=[],G=new Map,j=0,H=-1,Q=new Map,V=new Set,ee=new Map,ye=new Map,se=new Set,fe=new Map,ve=new Map,Oe=!1;function ae(){if(u=t.history.listen(le=>{let{action:_e,location:Me,delta:et}=le;if(Oe){Oe=!1;return}rf(ve.size===0||et!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ct=Ye({currentLocation:T.location,nextLocation:Me,historyAction:_e});if(ct&&et!=null){Oe=!0,t.history.go(et*-1),Ve(ct,{state:"blocked",location:Me,proceed(){Ve(ct,{state:"proceeding",proceed:void 0,reset:void 0,location:Me}),t.history.go(et)},reset(){let jt=new Map(T.blockers);jt.set(ct,u0),pe({blockers:jt})}});return}return oe(_e,Me)}),n){kie(e,F);let le=()=>Nie(e,F);e.addEventListener("pagehide",le),I=()=>e.removeEventListener("pagehide",le)}return T.initialized||oe($r.Pop,T.location,{initialHydration:!0}),w}function ue(){u&&u(),I&&I(),d.clear(),M&&M.abort(),T.fetchers.forEach((le,_e)=>St(_e)),T.blockers.forEach((le,_e)=>It(_e))}function Ce(le){return d.add(le),()=>d.delete(le)}function pe(le,_e){_e===void 0&&(_e={}),T=kr({},T,le);let Me=[],et=[];c.v7_fetcherPersist&&T.fetchers.forEach((ct,jt)=>{ct.state==="idle"&&(se.has(jt)?et.push(jt):Me.push(jt))}),[...d].forEach(ct=>ct(T,{deletedFetchers:et,unstable_viewTransitionOpts:_e.viewTransitionOpts,unstable_flushSync:_e.flushSync===!0})),c.v7_fetcherPersist&&(Me.forEach(ct=>T.fetchers.delete(ct)),et.forEach(ct=>St(ct)))}function ke(le,_e,Me){var et,ct;let{flushSync:jt}=Me===void 0?{}:Me,Pt=T.actionData!=null&&T.navigation.formMethod!=null&&La(T.navigation.formMethod)&&T.navigation.state==="loading"&&((et=le.state)==null?void 0:et._isRedirect)!==!0,Ct;_e.actionData?Object.keys(_e.actionData).length>0?Ct=_e.actionData:Ct=null:Pt?Ct=T.actionData:Ct=null;let vt=_e.loaderData?J4(T.loaderData,_e.loaderData,_e.matches||[],_e.errors):T.loaderData,Jt=T.blockers;Jt.size>0&&(Jt=new Map(Jt),Jt.forEach((Kt,Nn)=>Jt.set(Nn,u0)));let Sn=P===!0||T.navigation.formMethod!=null&&La(T.navigation.formMethod)&&((ct=le.state)==null?void 0:ct._isRedirect)!==!0;a&&(o=a,a=void 0),k||C===$r.Pop||(C===$r.Push?t.history.push(le,le.state):C===$r.Replace&&t.history.replace(le,le.state));let Nt;if(C===$r.Pop){let Kt=F.get(T.location.pathname);Kt&&Kt.has(le.pathname)?Nt={currentLocation:T.location,nextLocation:le}:F.has(le.pathname)&&(Nt={currentLocation:le,nextLocation:T.location})}else if(N){let Kt=F.get(T.location.pathname);Kt?Kt.add(le.pathname):(Kt=new Set([le.pathname]),F.set(T.location.pathname,Kt)),Nt={currentLocation:T.location,nextLocation:le}}pe(kr({},_e,{actionData:Ct,loaderData:vt,historyAction:C,location:le,initialized:!0,navigation:sR,revalidation:"idle",restoreScrollPosition:Kn(le,_e.matches||T.matches),preventScrollReset:Sn,blockers:Jt}),{viewTransitionOpts:Nt,flushSync:jt===!0}),C=$r.Pop,P=!1,N=!1,k=!1,R=!1,z=[],X=[]}async function Re(le,_e){if(typeof le=="number"){t.history.go(le);return}let Me=EI(T.location,T.matches,l,c.v7_prependBasename,le,c.v7_relativeSplatPath,_e==null?void 0:_e.fromRouteId,_e==null?void 0:_e.relative),{path:et,submission:ct,error:jt}=X4(c.v7_normalizeFormMethod,!1,Me,_e),Pt=T.location,Ct=vy(T.location,et,_e&&_e.state);Ct=kr({},Ct,t.history.encodeLocation(Ct));let vt=_e&&_e.replace!=null?_e.replace:void 0,Jt=$r.Push;vt===!0?Jt=$r.Replace:vt===!1||ct!=null&&La(ct.formMethod)&&ct.formAction===T.location.pathname+T.location.search&&(Jt=$r.Replace);let Sn=_e&&"preventScrollReset"in _e?_e.preventScrollReset===!0:void 0,Nt=(_e&&_e.unstable_flushSync)===!0,Kt=Ye({currentLocation:Pt,nextLocation:Ct,historyAction:Jt});if(Kt){Ve(Kt,{state:"blocked",location:Ct,proceed(){Ve(Kt,{state:"proceeding",proceed:void 0,reset:void 0,location:Ct}),Re(le,_e)},reset(){let Nn=new Map(T.blockers);Nn.set(Kt,u0),pe({blockers:Nn})}});return}return await oe(Jt,Ct,{submission:ct,pendingError:jt,preventScrollReset:Sn,replace:_e&&_e.replace,enableViewTransition:_e&&_e.unstable_viewTransition,flushSync:Nt})}function B(){if(Ae(),pe({revalidation:"loading"}),T.navigation.state!=="submitting"){if(T.navigation.state==="idle"){oe(T.historyAction,T.location,{startUninterruptedRevalidation:!0});return}oe(C||T.historyAction,T.navigation.location,{overrideNavigation:T.navigation})}}async function oe(le,_e,Me){M&&M.abort(),M=null,C=le,k=(Me&&Me.startUninterruptedRevalidation)===!0,zn(T.location,T.matches),P=(Me&&Me.preventScrollReset)===!0,N=(Me&&Me.enableViewTransition)===!0;let et=a||o,ct=Me&&Me.overrideNavigation,jt=Zp(et,_e,l),Pt=(Me&&Me.flushSync)===!0;if(!jt){let Nn=Wo(404,{pathname:_e.pathname}),{matches:qn,route:Mn}=e5(et);ft(),ke(_e,{matches:qn,loaderData:{},errors:{[Mn.id]:Nn}},{flushSync:Pt});return}if(T.initialized&&!R&&Rie(T.location,_e)&&!(Me&&Me.submission&&La(Me.submission.formMethod))){ke(_e,{matches:jt},{flushSync:Pt});return}M=new AbortController;let Ct=h0(t.history,_e,M.signal,Me&&Me.submission),vt,Jt;if(Me&&Me.pendingError)Jt={[Cv(jt).route.id]:Me.pendingError};else if(Me&&Me.submission&&La(Me.submission.formMethod)){let Nn=await ie(Ct,_e,Me.submission,jt,{replace:Me.replace,flushSync:Pt});if(Nn.shortCircuited)return;vt=Nn.pendingActionData,Jt=Nn.pendingActionError,ct=oR(_e,Me.submission),Pt=!1,Ct=new Request(Ct.url,{signal:Ct.signal})}let{shortCircuited:Sn,loaderData:Nt,errors:Kt}=await q(Ct,_e,jt,ct,Me&&Me.submission,Me&&Me.fetcherSubmission,Me&&Me.replace,Me&&Me.initialHydration===!0,Pt,vt,Jt);Sn||(M=null,ke(_e,kr({matches:jt},vt?{actionData:vt}:{},{loaderData:Nt,errors:Kt})))}async function ie(le,_e,Me,et,ct){ct===void 0&&(ct={}),Ae();let jt=Lie(_e,Me);pe({navigation:jt},{flushSync:ct.flushSync===!0});let Pt,Ct=TI(et,_e);if(!Ct.route.action&&!Ct.route.lazy)Pt={type:Lr.error,error:Wo(405,{method:le.method,pathname:_e.pathname,routeId:Ct.route.id})};else if(Pt=await d0("action",le,Ct,et,s,i,l,c.v7_relativeSplatPath),le.signal.aborted)return{shortCircuited:!0};if(Ah(Pt)){let vt;return ct&&ct.replace!=null?vt=ct.replace:vt=Pt.location===T.location.pathname+T.location.search,await he(T,Pt,{submission:Me,replace:vt}),{shortCircuited:!0}}if(Qp(Pt)){let vt=Cv(et,Ct.route.id);return(ct&&ct.replace)!==!0&&(C=$r.Push),{pendingActionData:{},pendingActionError:{[vt.route.id]:Pt.error}}}if(Ch(Pt))throw Wo(400,{type:"defer-action"});return{pendingActionData:{[Ct.route.id]:Pt.data}}}async function q(le,_e,Me,et,ct,jt,Pt,Ct,vt,Jt,Sn){let Nt=et||oR(_e,ct),Kt=ct||jt||r5(Nt),Nn=a||o,[qn,Mn]=Y4(t.history,T,Me,Kt,_e,c.v7_partialHydration&&Ct===!0,R,z,X,se,ee,V,Nn,l,Jt,Sn);if(ft(Zt=>!(Me&&Me.some($n=>$n.route.id===Zt))||qn&&qn.some($n=>$n.route.id===Zt)),H=++j,qn.length===0&&Mn.length===0){let Zt=gt();return ke(_e,kr({matches:Me,loaderData:{},errors:Sn||null},Jt?{actionData:Jt}:{},Zt?{fetchers:new Map(T.fetchers)}:{}),{flushSync:vt}),{shortCircuited:!0}}if(!k&&(!c.v7_partialHydration||!Ct)){Mn.forEach($n=>{let Oi=T.fetchers.get($n.key),br=f0(void 0,Oi?Oi.data:void 0);T.fetchers.set($n.key,br)});let Zt=Jt||T.actionData;pe(kr({navigation:Nt},Zt?Object.keys(Zt).length===0?{actionData:null}:{actionData:Zt}:{},Mn.length>0?{fetchers:new Map(T.fetchers)}:{}),{flushSync:vt})}Mn.forEach(Zt=>{G.has(Zt.key)&&we(Zt.key),Zt.controller&&G.set(Zt.key,Zt.controller)});let ti=()=>Mn.forEach(Zt=>we(Zt.key));M&&M.signal.addEventListener("abort",ti);let{results:gs,loaderResults:Zi,fetcherResults:un}=await de(T.matches,Me,qn,Mn,le);if(le.signal.aborted)return{shortCircuited:!0};M&&M.signal.removeEventListener("abort",ti),Mn.forEach(Zt=>G.delete(Zt.key));let yn=t5(gs);if(yn){if(yn.idx>=qn.length){let Zt=Mn[yn.idx-qn.length].key;V.add(Zt)}return await he(T,yn.result,{replace:Pt}),{shortCircuited:!0}}let{loaderData:ni,errors:gi}=Q4(T,Me,qn,Zi,Sn,Mn,un,fe);fe.forEach((Zt,$n)=>{Zt.subscribe(Oi=>{(Oi||Zt.done)&&fe.delete($n)})});let _r=gt(),vs=Bt(H),Xt=_r||vs||Mn.length>0;return kr({loaderData:ni,errors:gi},Xt?{fetchers:new Map(T.fetchers)}:{})}function Y(le,_e,Me,et){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");G.has(le)&&we(le);let ct=(et&&et.unstable_flushSync)===!0,jt=a||o,Pt=EI(T.location,T.matches,l,c.v7_prependBasename,Me,c.v7_relativeSplatPath,_e,et==null?void 0:et.relative),Ct=Zp(jt,Pt,l);if(!Ct){Be(le,_e,Wo(404,{pathname:Pt}),{flushSync:ct});return}let{path:vt,submission:Jt,error:Sn}=X4(c.v7_normalizeFormMethod,!0,Pt,et);if(Sn){Be(le,_e,Sn,{flushSync:ct});return}let Nt=TI(Ct,vt);if(P=(et&&et.preventScrollReset)===!0,Jt&&La(Jt.formMethod)){ne(le,_e,vt,Nt,Ct,ct,Jt);return}ee.set(le,{routeId:_e,path:vt}),me(le,_e,vt,Nt,Ct,ct,Jt)}async function ne(le,_e,Me,et,ct,jt,Pt){if(Ae(),ee.delete(le),!et.route.action&&!et.route.lazy){let $n=Wo(405,{method:Pt.formMethod,pathname:Me,routeId:_e});Be(le,_e,$n,{flushSync:jt});return}let Ct=T.fetchers.get(le);De(le,Oie(Pt,Ct),{flushSync:jt});let vt=new AbortController,Jt=h0(t.history,Me,vt.signal,Pt);G.set(le,vt);let Sn=j,Nt=await d0("action",Jt,et,ct,s,i,l,c.v7_relativeSplatPath);if(Jt.signal.aborted){G.get(le)===vt&&G.delete(le);return}if(c.v7_fetcherPersist&&se.has(le)){if(Ah(Nt)||Qp(Nt)){De(le,Cu(void 0));return}}else{if(Ah(Nt))if(G.delete(le),H>Sn){De(le,Cu(void 0));return}else return V.add(le),De(le,f0(Pt)),he(T,Nt,{fetcherSubmission:Pt});if(Qp(Nt)){Be(le,_e,Nt.error);return}}if(Ch(Nt))throw Wo(400,{type:"defer-action"});let Kt=T.navigation.location||T.location,Nn=h0(t.history,Kt,vt.signal),qn=a||o,Mn=T.navigation.state!=="idle"?Zp(qn,T.navigation.location,l):T.matches;dn(Mn,"Didn't find any matches after fetcher action");let ti=++j;Q.set(le,ti);let gs=f0(Pt,Nt.data);T.fetchers.set(le,gs);let[Zi,un]=Y4(t.history,T,Mn,Pt,Kt,!1,R,z,X,se,ee,V,qn,l,{[et.route.id]:Nt.data},void 0);un.filter($n=>$n.key!==le).forEach($n=>{let Oi=$n.key,br=T.fetchers.get(Oi),ko=f0(void 0,br?br.data:void 0);T.fetchers.set(Oi,ko),G.has(Oi)&&we(Oi),$n.controller&&G.set(Oi,$n.controller)}),pe({fetchers:new Map(T.fetchers)});let yn=()=>un.forEach($n=>we($n.key));vt.signal.addEventListener("abort",yn);let{results:ni,loaderResults:gi,fetcherResults:_r}=await de(T.matches,Mn,Zi,un,Nn);if(vt.signal.aborted)return;vt.signal.removeEventListener("abort",yn),Q.delete(le),G.delete(le),un.forEach($n=>G.delete($n.key));let vs=t5(ni);if(vs){if(vs.idx>=Zi.length){let $n=un[vs.idx-Zi.length].key;V.add($n)}return he(T,vs.result)}let{loaderData:Xt,errors:Zt}=Q4(T,T.matches,Zi,gi,void 0,un,_r,fe);if(T.fetchers.has(le)){let $n=Cu(Nt.data);T.fetchers.set(le,$n)}Bt(ti),T.navigation.state==="loading"&&ti>H?(dn(C,"Expected pending action"),M&&M.abort(),ke(T.navigation.location,{matches:Mn,loaderData:Xt,errors:Zt,fetchers:new Map(T.fetchers)})):(pe({errors:Zt,loaderData:J4(T.loaderData,Xt,Mn,Zt),fetchers:new Map(T.fetchers)}),R=!1)}async function me(le,_e,Me,et,ct,jt,Pt){let Ct=T.fetchers.get(le);De(le,f0(Pt,Ct?Ct.data:void 0),{flushSync:jt});let vt=new AbortController,Jt=h0(t.history,Me,vt.signal);G.set(le,vt);let Sn=j,Nt=await d0("loader",Jt,et,ct,s,i,l,c.v7_relativeSplatPath);if(Ch(Nt)&&(Nt=await EW(Nt,Jt.signal,!0)||Nt),G.get(le)===vt&&G.delete(le),!Jt.signal.aborted){if(se.has(le)){De(le,Cu(void 0));return}if(Ah(Nt))if(H>Sn){De(le,Cu(void 0));return}else{V.add(le),await he(T,Nt);return}if(Qp(Nt)){Be(le,_e,Nt.error);return}dn(!Ch(Nt),"Unhandled fetcher deferred data"),De(le,Cu(Nt.data))}}async function he(le,_e,Me){let{submission:et,fetcherSubmission:ct,replace:jt}=Me===void 0?{}:Me;_e.revalidate&&(R=!0);let Pt=vy(le.location,_e.location,{_isRedirect:!0});if(dn(Pt,"Expected a location on the redirect navigation"),n){let Kt=!1;if(_e.reloadDocument)Kt=!0;else if(yW.test(_e.location)){const Nn=t.history.createURL(_e.location);Kt=Nn.origin!==e.location.origin||Eg(Nn.pathname,l)==null}if(Kt){jt?e.location.replace(_e.location):e.location.assign(_e.location);return}}M=null;let Ct=jt===!0?$r.Replace:$r.Push,{formMethod:vt,formAction:Jt,formEncType:Sn}=le.navigation;!et&&!ct&&vt&&Jt&&Sn&&(et=r5(le.navigation));let Nt=et||ct;if(bie.has(_e.status)&&Nt&&La(Nt.formMethod))await oe(Ct,Pt,{submission:kr({},Nt,{formAction:_e.location}),preventScrollReset:P});else{let Kt=oR(Pt,et);await oe(Ct,Pt,{overrideNavigation:Kt,fetcherSubmission:ct,preventScrollReset:P})}}async function de(le,_e,Me,et,ct){let jt=await Promise.all([...Me.map(vt=>d0("loader",ct,vt,_e,s,i,l,c.v7_relativeSplatPath)),...et.map(vt=>vt.matches&&vt.match&&vt.controller?d0("loader",h0(t.history,vt.path,vt.controller.signal),vt.match,vt.matches,s,i,l,c.v7_relativeSplatPath):{type:Lr.error,error:Wo(404,{pathname:vt.path})})]),Pt=jt.slice(0,Me.length),Ct=jt.slice(Me.length);return await Promise.all([n5(le,Me,Pt,Pt.map(()=>ct.signal),!1,T.loaderData),n5(le,et.map(vt=>vt.match),Ct,et.map(vt=>vt.controller?vt.controller.signal:null),!0)]),{results:jt,loaderResults:Pt,fetcherResults:Ct}}function Ae(){R=!0,z.push(...ft()),ee.forEach((le,_e)=>{G.has(_e)&&(X.push(_e),we(_e))})}function De(le,_e,Me){Me===void 0&&(Me={}),T.fetchers.set(le,_e),pe({fetchers:new Map(T.fetchers)},{flushSync:(Me&&Me.flushSync)===!0})}function Be(le,_e,Me,et){et===void 0&&(et={});let ct=Cv(T.matches,_e);St(le),pe({errors:{[ct.route.id]:Me},fetchers:new Map(T.fetchers)},{flushSync:(et&&et.flushSync)===!0})}function tt(le){return c.v7_fetcherPersist&&(ye.set(le,(ye.get(le)||0)+1),se.has(le)&&se.delete(le)),T.fetchers.get(le)||xie}function St(le){let _e=T.fetchers.get(le);G.has(le)&&!(_e&&_e.state==="loading"&&Q.has(le))&&we(le),ee.delete(le),Q.delete(le),V.delete(le),se.delete(le),T.fetchers.delete(le)}function be(le){if(c.v7_fetcherPersist){let _e=(ye.get(le)||0)-1;_e<=0?(ye.delete(le),se.add(le)):ye.set(le,_e)}else St(le);pe({fetchers:new Map(T.fetchers)})}function we(le){let _e=G.get(le);dn(_e,"Expected fetch controller: "+le),_e.abort(),G.delete(le)}function qe(le){for(let _e of le){let Me=tt(_e),et=Cu(Me.data);T.fetchers.set(_e,et)}}function gt(){let le=[],_e=!1;for(let Me of V){let et=T.fetchers.get(Me);dn(et,"Expected fetcher: "+Me),et.state==="loading"&&(V.delete(Me),le.push(Me),_e=!0)}return qe(le),_e}function Bt(le){let _e=[];for(let[Me,et]of Q)if(et<le){let ct=T.fetchers.get(Me);dn(ct,"Expected fetcher: "+Me),ct.state==="loading"&&(we(Me),Q.delete(Me),_e.push(Me))}return qe(_e),_e.length>0}function Ie(le,_e){let Me=T.blockers.get(le)||u0;return ve.get(le)!==_e&&ve.set(le,_e),Me}function It(le){T.blockers.delete(le),ve.delete(le)}function Ve(le,_e){let Me=T.blockers.get(le)||u0;dn(Me.state==="unblocked"&&_e.state==="blocked"||Me.state==="blocked"&&_e.state==="blocked"||Me.state==="blocked"&&_e.state==="proceeding"||Me.state==="blocked"&&_e.state==="unblocked"||Me.state==="proceeding"&&_e.state==="unblocked","Invalid blocker state transition: "+Me.state+" -> "+_e.state);let et=new Map(T.blockers);et.set(le,_e),pe({blockers:et})}function Ye(le){let{currentLocation:_e,nextLocation:Me,historyAction:et}=le;if(ve.size===0)return;ve.size>1&&rf(!1,"A router only supports one blocker at a time");let ct=Array.from(ve.entries()),[jt,Pt]=ct[ct.length-1],Ct=T.blockers.get(jt);if(!(Ct&&Ct.state==="proceeding")&&Pt({currentLocation:_e,nextLocation:Me,historyAction:et}))return jt}function ft(le){let _e=[];return fe.forEach((Me,et)=>{(!le||le(et))&&(Me.cancel(),_e.push(et),fe.delete(et))}),_e}function kt(le,_e,Me){if(h=le,p=_e,f=Me||null,!m&&T.navigation===sR){m=!0;let et=Kn(T.location,T.matches);et!=null&&pe({restoreScrollPosition:et})}return()=>{h=null,p=null,f=null}}function vn(le,_e){return f&&f(le,_e.map(et=>Zre(et,T.loaderData)))||le.key}function zn(le,_e){if(h&&p){let Me=vn(le,_e);h[Me]=p()}}function Kn(le,_e){if(h){let Me=vn(le,_e),et=h[Me];if(typeof et=="number")return et}return null}function ur(le){s={},a=xI(le,i,void 0,s)}return w={get basename(){return l},get future(){return c},get state(){return T},get routes(){return o},get window(){return e},initialize:ae,subscribe:Ce,enableScrollRestoration:kt,navigate:Re,fetch:Y,revalidate:B,createHref:le=>t.history.createHref(le),encodeLocation:le=>t.history.encodeLocation(le),getFetcher:tt,deleteFetcher:be,dispose:ue,getBlocker:Ie,deleteBlocker:It,_internalFetchControllers:G,_internalActiveDeferreds:fe,_internalSetRoutes:ur},w}function Tie(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function EI(t,e,n,r,i,s,o,a){let l,c;if(o){l=[];for(let d of e)if(l.push(d),d.route.id===o){c=d;break}}else l=e,c=e[e.length-1];let u=wk(i||".",Ek(l,s),Eg(t.pathname,n)||t.pathname,a==="path");return i==null&&(u.search=t.search,u.hash=t.hash),(i==null||i===""||i===".")&&c&&c.route.index&&!Sk(u.search)&&(u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(u.pathname=u.pathname==="/"?n:Rc([n,u.pathname])),sf(u)}function X4(t,e,n,r){if(!r||!Tie(r))return{path:n};if(r.formMethod&&!Mie(r.formMethod))return{path:n,error:Wo(405,{method:r.formMethod})};let i=()=>({path:n,error:Wo(400,{type:"invalid-body"})}),s=r.formMethod||"get",o=t?s.toUpperCase():s.toLowerCase(),a=xW(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!La(o))return i();let h=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((f,p)=>{let[m,_]=p;return""+f+m+"="+_+`
`},""):String(r.body);return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:void 0,text:h}}}else if(r.formEncType==="application/json"){if(!La(o))return i();try{let h=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:o,formAction:a,formEncType:r.formEncType,formData:void 0,json:h,text:void 0}}}catch{return i()}}}dn(typeof FormData=="function","FormData is not available in this environment");let l,c;if(r.formData)l=wI(r.formData),c=r.formData;else if(r.body instanceof FormData)l=wI(r.body),c=r.body;else if(r.body instanceof URLSearchParams)l=r.body,c=Z4(l);else if(r.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(r.body),c=Z4(l)}catch{return i()}let u={formMethod:o,formAction:a,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(La(u.formMethod))return{path:n,submission:u};let d=Kl(n);return e&&d.search&&Sk(d.search)&&l.append("index",""),d.search="?"+l,{path:sf(d),submission:u}}function Sie(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function Y4(t,e,n,r,i,s,o,a,l,c,u,d,h,f,p,m){let _=m?Object.values(m)[0]:p?Object.values(p)[0]:void 0,y=t.createURL(e.location),x=t.createURL(i),b=m?Object.keys(m)[0]:void 0,w=Sie(n,b).filter((C,P)=>{let{route:M}=C;if(M.lazy)return!0;if(M.loader==null)return!1;if(s)return M.loader.hydrate?!0:e.loaderData[M.id]===void 0&&(!e.errors||e.errors[M.id]===void 0);if(Cie(e.loaderData,e.matches[P],C)||a.some(I=>I===C.route.id))return!0;let N=e.matches[P],F=C;return K4(C,kr({currentUrl:y,currentParams:N.params,nextUrl:x,nextParams:F.params},r,{actionResult:_,defaultShouldRevalidate:o||y.pathname+y.search===x.pathname+x.search||y.search!==x.search||bW(N,F)}))}),T=[];return u.forEach((C,P)=>{if(s||!n.some(k=>k.route.id===C.routeId)||c.has(P))return;let M=Zp(h,C.path,f);if(!M){T.push({key:P,routeId:C.routeId,path:C.path,matches:null,match:null,controller:null});return}let N=e.fetchers.get(P),F=TI(M,C.path),I=!1;d.has(P)?I=!1:l.includes(P)?I=!0:N&&N.state!=="idle"&&N.data===void 0?I=o:I=K4(F,kr({currentUrl:y,currentParams:e.matches[e.matches.length-1].params,nextUrl:x,nextParams:n[n.length-1].params},r,{actionResult:_,defaultShouldRevalidate:o})),I&&T.push({key:P,routeId:C.routeId,path:C.path,matches:M,match:F,controller:new AbortController})}),[w,T]}function Cie(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function bW(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function K4(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function q4(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];dn(i,"No route found in manifest");let s={};for(let o in r){let l=i[o]!==void 0&&o!=="hasErrorBoundary";rf(!l,'Route "'+i.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!Kre.has(o)&&(s[o]=r[o])}Object.assign(i,s),Object.assign(i,kr({},e(i),{lazy:void 0}))}async function d0(t,e,n,r,i,s,o,a,l){l===void 0&&(l={});let c,u,d,h=m=>{let _,y=new Promise((x,b)=>_=b);return d=()=>_(),e.signal.addEventListener("abort",d),Promise.race([m({request:e,params:n.params,context:l.requestContext}),y])};try{let m=n.route[t];if(n.route.lazy)if(m){let _,y=await Promise.all([h(m).catch(x=>{_=x}),q4(n.route,s,i)]);if(_)throw _;u=y[0]}else if(await q4(n.route,s,i),m=n.route[t],m)u=await h(m);else if(t==="action"){let _=new URL(e.url),y=_.pathname+_.search;throw Wo(405,{method:e.method,pathname:y,routeId:n.route.id})}else return{type:Lr.data,data:void 0};else if(m)u=await h(m);else{let _=new URL(e.url),y=_.pathname+_.search;throw Wo(404,{pathname:y})}dn(u!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(m){c=Lr.error,u=m}finally{d&&e.signal.removeEventListener("abort",d)}if(Iie(u)){let m=u.status;if(_ie.has(m)){let y=u.headers.get("Location");if(dn(y,"Redirects returned/thrown from loaders/actions must have a Location header"),!yW.test(y))y=EI(new URL(e.url),r.slice(0,r.indexOf(n)+1),o,!0,y,a);else if(!l.isStaticRequest){let x=new URL(e.url),b=y.startsWith("//")?new URL(x.protocol+y):new URL(y),E=Eg(b.pathname,o)!=null;b.origin===x.origin&&E&&(y=b.pathname+b.search+b.hash)}if(l.isStaticRequest)throw u.headers.set("Location",y),u;return{type:Lr.redirect,status:m,location:y,revalidate:u.headers.get("X-Remix-Revalidate")!==null,reloadDocument:u.headers.get("X-Remix-Reload-Document")!==null}}if(l.isRouteRequest)throw{type:c===Lr.error?Lr.error:Lr.data,response:u};let _;try{let y=u.headers.get("Content-Type");y&&/\bapplication\/json\b/.test(y)?u.body==null?_=null:_=await u.json():_=await u.text()}catch(y){return{type:Lr.error,error:y}}return c===Lr.error?{type:c,error:new Tk(m,u.statusText,_),headers:u.headers}:{type:Lr.data,data:_,statusCode:u.status,headers:u.headers}}if(c===Lr.error)return{type:c,error:u};if(Pie(u)){var f,p;return{type:Lr.deferred,deferredData:u,statusCode:(f=u.init)==null?void 0:f.status,headers:((p=u.init)==null?void 0:p.headers)&&new Headers(u.init.headers)}}return{type:Lr.data,data:u}}function h0(t,e,n,r){let i=t.createURL(xW(e)).toString(),s={signal:n};if(r&&La(r.formMethod)){let{formMethod:o,formEncType:a}=r;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(r.json)):a==="text/plain"?s.body=r.text:a==="application/x-www-form-urlencoded"&&r.formData?s.body=wI(r.formData):s.body=r.formData}return new Request(i,s)}function wI(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function Z4(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function Aie(t,e,n,r,i){let s={},o=null,a,l=!1,c={};return n.forEach((u,d)=>{let h=e[d].route.id;if(dn(!Ah(u),"Cannot handle redirect results in processLoaderData"),Qp(u)){let f=Cv(t,h),p=u.error;r&&(p=Object.values(r)[0],r=void 0),o=o||{},o[f.route.id]==null&&(o[f.route.id]=p),s[h]=void 0,l||(l=!0,a=gW(u.error)?u.error.status:500),u.headers&&(c[h]=u.headers)}else Ch(u)?(i.set(h,u.deferredData),s[h]=u.deferredData.data):s[h]=u.data,u.statusCode!=null&&u.statusCode!==200&&!l&&(a=u.statusCode),u.headers&&(c[h]=u.headers)}),r&&(o=r,s[Object.keys(r)[0]]=void 0),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:c}}function Q4(t,e,n,r,i,s,o,a){let{loaderData:l,errors:c}=Aie(e,n,r,i,a);for(let u=0;u<s.length;u++){let{key:d,match:h,controller:f}=s[u];dn(o!==void 0&&o[u]!==void 0,"Did not find corresponding fetcher result");let p=o[u];if(!(f&&f.signal.aborted))if(Qp(p)){let m=Cv(t.matches,h==null?void 0:h.route.id);c&&c[m.route.id]||(c=kr({},c,{[m.route.id]:p.error})),t.fetchers.delete(d)}else if(Ah(p))dn(!1,"Unhandled fetcher revalidation redirect");else if(Ch(p))dn(!1,"Unhandled fetcher deferred data");else{let m=Cu(p.data);t.fetchers.set(d,m)}}return{loaderData:l,errors:c}}function J4(t,e,n,r){let i=kr({},e);for(let s of n){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(i[o]=e[o]):t[o]!==void 0&&s.route.loader&&(i[o]=t[o]),r&&r.hasOwnProperty(o))break}return i}function Cv(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function e5(t){let e=t.length===1?t[0]:t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Wo(t,e){let{pathname:n,routeId:r,method:i,type:s}=e===void 0?{}:e,o="Unknown Server Error",a="Unknown @remix-run/router error";return t===400?(o="Bad Request",i&&n&&r?a="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":s==="defer-action"?a="defer() is not supported in actions":s==="invalid-body"&&(a="Unable to encode submission body")):t===403?(o="Forbidden",a='Route "'+r+'" does not match URL "'+n+'"'):t===404?(o="Not Found",a='No route matches URL "'+n+'"'):t===405&&(o="Method Not Allowed",i&&n&&r?a="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(a='Invalid request method "'+i.toUpperCase()+'"')),new Tk(t||500,o,new Error(a),!0)}function t5(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(Ah(n))return{result:n,idx:e}}}function xW(t){let e=typeof t=="string"?Kl(t):t;return sf(kr({},e,{hash:""}))}function Rie(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function Ch(t){return t.type===Lr.deferred}function Qp(t){return t.type===Lr.error}function Ah(t){return(t&&t.type)===Lr.redirect}function Pie(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function Iie(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function Mie(t){return yie.has(t.toLowerCase())}function La(t){return gie.has(t.toLowerCase())}async function n5(t,e,n,r,i,s){for(let o=0;o<n.length;o++){let a=n[o],l=e[o];if(!l)continue;let c=t.find(d=>d.route.id===l.route.id),u=c!=null&&!bW(c,l)&&(s&&s[l.route.id])!==void 0;if(Ch(a)&&(i||u)){let d=r[o];dn(d,"Expected an AbortSignal for revalidating fetcher deferred result"),await EW(a,d,i).then(h=>{h&&(n[o]=h||n[o])})}}}async function EW(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:Lr.data,data:t.deferredData.unwrappedData}}catch(i){return{type:Lr.error,error:i}}return{type:Lr.data,data:t.deferredData.data}}}function Sk(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function TI(t,e){let n=typeof e=="string"?Kl(e).search:e.search;if(t[t.length-1].route.index&&Sk(n||""))return t[t.length-1];let r=mW(t);return r[r.length-1]}function r5(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:s,json:o}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(s!=null)return{formMethod:e,formAction:n,formEncType:r,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:o,text:void 0}}}function oR(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function Lie(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function f0(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Oie(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0}}function Cu(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function kie(t,e){try{let n=t.sessionStorage.getItem(_W);if(n){let r=JSON.parse(n);for(let[i,s]of Object.entries(r||{}))s&&Array.isArray(s)&&e.set(i,new Set(s||[]))}}catch{}}function Nie(t,e){if(e.size>0){let n={};for(let[r,i]of e)n[r]=[...i];try{t.sessionStorage.setItem(_W,JSON.stringify(n))}catch(r){rf(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.22.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yy(){return yy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yy.apply(this,arguments)}const tS=A.createContext(null),wW=A.createContext(null),Cf=A.createContext(null),nS=A.createContext(null),Md=A.createContext({outlet:null,matches:[],isDataRoute:!1}),TW=A.createContext(null);function Die(t,e){let{relative:n}=e===void 0?{}:e;v1()||dn(!1);let{basename:r,navigator:i}=A.useContext(Cf),{hash:s,pathname:o,search:a}=CW(t,{relative:n}),l=o;return r!=="/"&&(l=o==="/"?r:Rc([r,o])),i.createHref({pathname:l,search:a,hash:s})}function v1(){return A.useContext(nS)!=null}function rS(){return v1()||dn(!1),A.useContext(nS).location}function SW(t){A.useContext(Cf).static||A.useLayoutEffect(t)}function mi(){let{isDataRoute:t}=A.useContext(Md);return t?Kie():Bie()}function Bie(){v1()||dn(!1);let t=A.useContext(tS),{basename:e,future:n,navigator:r}=A.useContext(Cf),{matches:i}=A.useContext(Md),{pathname:s}=rS(),o=JSON.stringify(Ek(i,n.v7_relativeSplatPath)),a=A.useRef(!1);return SW(()=>{a.current=!0}),A.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=wk(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Rc([e,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[e,r,o,s,t])}const Fie=A.createContext(null);function Uie(t){let e=A.useContext(Md).outlet;return e&&A.createElement(Fie.Provider,{value:t},e)}function CW(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=A.useContext(Cf),{matches:i}=A.useContext(Md),{pathname:s}=rS(),o=JSON.stringify(Ek(i,r.v7_relativeSplatPath));return A.useMemo(()=>wk(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function zie(t,e,n,r){v1()||dn(!1);let{navigator:i}=A.useContext(Cf),{matches:s}=A.useContext(Md),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=rS(),u;if(e){var d;let _=typeof e=="string"?Kl(e):e;l==="/"||(d=_.pathname)!=null&&d.startsWith(l)||dn(!1),u=_}else u=c;let h=u.pathname||"/",f=h;if(l!=="/"){let _=l.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(_.length).join("/")}let p=Zp(t,{pathname:f}),m=Vie(p&&p.map(_=>Object.assign({},_,{params:Object.assign({},a,_.params),pathname:Rc([l,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?l:Rc([l,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),s,n,r);return e&&m?A.createElement(nS.Provider,{value:{location:yy({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:$r.Pop}},m):m}function $ie(){let t=Yie(),e=gW(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:i},n):null,null)}const jie=A.createElement($ie,null);class Gie extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?A.createElement(Md.Provider,{value:this.props.routeContext},A.createElement(TW.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Hie(t){let{routeContext:e,match:n,children:r}=t,i=A.useContext(tS);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),A.createElement(Md.Provider,{value:e},r)}function Vie(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if((s=n)!=null&&s.errors)t=n.matches;else return null}let o=t,a=(i=n)==null?void 0:i.errors;if(a!=null){let u=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id]));u>=0||dn(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let u=0;u<o.length;u++){let d=o[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=u),d.route.id){let{loaderData:h,errors:f}=n,p=d.route.loader&&h[d.route.id]===void 0&&(!f||f[d.route.id]===void 0);if(d.route.lazy||p){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,d,h)=>{let f,p=!1,m=null,_=null;n&&(f=a&&d.route.id?a[d.route.id]:void 0,m=d.route.errorElement||jie,l&&(c<0&&h===0?(qie("route-fallback",!1),p=!0,_=null):c===h&&(p=!0,_=d.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,h+1)),x=()=>{let b;return f?b=m:p?b=_:d.route.Component?b=A.createElement(d.route.Component,null):d.route.element?b=d.route.element:b=u,A.createElement(Hie,{match:d,routeContext:{outlet:u,matches:y,isDataRoute:n!=null},children:b})};return n&&(d.route.ErrorBoundary||d.route.errorElement||h===0)?A.createElement(Gie,{location:n.location,revalidation:n.revalidation,component:m,error:f,children:x(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):x()},null)}var AW=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(AW||{}),Dm=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Dm||{});function Wie(t){let e=A.useContext(tS);return e||dn(!1),e}function RW(t){let e=A.useContext(wW);return e||dn(!1),e}function Xie(t){let e=A.useContext(Md);return e||dn(!1),e}function Ck(t){let e=Xie(),n=e.matches[e.matches.length-1];return n.route.id||dn(!1),n.route.id}function ql(){let t=RW(Dm.UseLoaderData),e=Ck(Dm.UseLoaderData);if(t.errors&&t.errors[e]!=null){console.error("You cannot `useLoaderData` in an errorElement (routeId: "+e+")");return}return t.loaderData[e]}function Yie(){var t;let e=A.useContext(TW),n=RW(Dm.UseRouteError),r=Ck(Dm.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Kie(){let{router:t}=Wie(AW.UseNavigateStable),e=Ck(Dm.UseNavigateStable),n=A.useRef(!1);return SW(()=>{n.current=!0}),A.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,yy({fromRouteId:e},s)))},[t,e])}const i5={};function qie(t,e,n){!e&&!i5[t]&&(i5[t]=!0)}function Ak(t){return Uie(t.context)}function Zie(t){let{basename:e="/",children:n=null,location:r,navigationType:i=$r.Pop,navigator:s,static:o=!1,future:a}=t;v1()&&dn(!1);let l=e.replace(/^\/*/,"/"),c=A.useMemo(()=>({basename:l,navigator:s,static:o,future:yy({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof r=="string"&&(r=Kl(r));let{pathname:u="/",search:d="",hash:h="",state:f=null,key:p="default"}=r,m=A.useMemo(()=>{let _=Eg(u,l);return _==null?null:{location:{pathname:_,search:d,hash:h,state:f,key:p},navigationType:i}},[l,u,d,h,f,p,i]);return m==null?null:A.createElement(Cf.Provider,{value:c},A.createElement(nS.Provider,{children:n,value:m}))}new Promise(()=>{});function Qie(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:A.createElement(t.Component),Component:void 0}),t.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:A.createElement(t.HydrateFallback),HydrateFallback:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:A.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.22.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _y(){return _y=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_y.apply(this,arguments)}function Jie(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function ese(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function tse(t,e){return t.button===0&&(!e||e==="_self")&&!ese(t)}const nse=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],rse="6";try{window.__reactRouterVersion=rse}catch{}function ise(t,e){return wie({basename:e==null?void 0:e.basename,future:_y({},e==null?void 0:e.future,{v7_prependBasename:!0}),history:Wre({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||sse(),routes:t,mapRouteProperties:Qie,window:e==null?void 0:e.window}).initialize()}function sse(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=_y({},e,{errors:ose(e.errors)})),e}function ose(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new Tk(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let s=window[i.__subType];if(typeof s=="function")try{let o=new s(i.message);o.stack="",n[r]=o}catch{}}if(n[r]==null){let s=new Error(i.message);s.stack="",n[r]=s}}else n[r]=i;return n}const ase=A.createContext({isTransitioning:!1}),lse=A.createContext(new Map),cse="startTransition",s5=OE[cse],use="flushSync",o5=Vre[use];function dse(t){s5?s5(t):t()}function p0(t){o5?o5(t):t()}class hse{constructor(){this.status="pending",this.promise=new Promise((e,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",e(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function fse(t){let{fallbackElement:e,router:n,future:r}=t,[i,s]=A.useState(n.state),[o,a]=A.useState(),[l,c]=A.useState({isTransitioning:!1}),[u,d]=A.useState(),[h,f]=A.useState(),[p,m]=A.useState(),_=A.useRef(new Map),{v7_startTransition:y}=r||{},x=A.useCallback(C=>{y?dse(C):C()},[y]),b=A.useCallback((C,P)=>{let{deletedFetchers:M,unstable_flushSync:N,unstable_viewTransitionOpts:F}=P;M.forEach(k=>_.current.delete(k)),C.fetchers.forEach((k,R)=>{k.data!==void 0&&_.current.set(R,k.data)});let I=n.window==null||typeof n.window.document.startViewTransition!="function";if(!F||I){N?p0(()=>s(C)):x(()=>s(C));return}if(N){p0(()=>{h&&(u&&u.resolve(),h.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:F.currentLocation,nextLocation:F.nextLocation})});let k=n.window.document.startViewTransition(()=>{p0(()=>s(C))});k.finished.finally(()=>{p0(()=>{d(void 0),f(void 0),a(void 0),c({isTransitioning:!1})})}),p0(()=>f(k));return}h?(u&&u.resolve(),h.skipTransition(),m({state:C,currentLocation:F.currentLocation,nextLocation:F.nextLocation})):(a(C),c({isTransitioning:!0,flushSync:!1,currentLocation:F.currentLocation,nextLocation:F.nextLocation}))},[n.window,h,u,_,x]);A.useLayoutEffect(()=>n.subscribe(b),[n,b]),A.useEffect(()=>{l.isTransitioning&&!l.flushSync&&d(new hse)},[l]),A.useEffect(()=>{if(u&&o&&n.window){let C=o,P=u.promise,M=n.window.document.startViewTransition(async()=>{x(()=>s(C)),await P});M.finished.finally(()=>{d(void 0),f(void 0),a(void 0),c({isTransitioning:!1})}),f(M)}},[x,o,u,n.window]),A.useEffect(()=>{u&&o&&i.location.key===o.location.key&&u.resolve()},[u,h,i.location,o]),A.useEffect(()=>{!l.isTransitioning&&p&&(a(p.state),c({isTransitioning:!0,flushSync:!1,currentLocation:p.currentLocation,nextLocation:p.nextLocation}),m(void 0))},[l.isTransitioning,p]),A.useEffect(()=>{},[]);let E=A.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:C=>n.navigate(C),push:(C,P,M)=>n.navigate(C,{state:P,preventScrollReset:M==null?void 0:M.preventScrollReset}),replace:(C,P,M)=>n.navigate(C,{replace:!0,state:P,preventScrollReset:M==null?void 0:M.preventScrollReset})}),[n]),w=n.basename||"/",T=A.useMemo(()=>({router:n,navigator:E,static:!1,basename:w}),[n,E,w]);return A.createElement(A.Fragment,null,A.createElement(tS.Provider,{value:T},A.createElement(wW.Provider,{value:i},A.createElement(lse.Provider,{value:_.current},A.createElement(ase.Provider,{value:l},A.createElement(Zie,{basename:w,location:i.location,navigationType:i.historyAction,navigator:E,future:{v7_relativeSplatPath:n.future.v7_relativeSplatPath}},i.initialized||n.future.v7_partialHydration?A.createElement(pse,{routes:n.routes,future:n.future,state:i}):e))))),null)}function pse(t){let{routes:e,future:n,state:r}=t;return zie(e,void 0,r,n)}const mse=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",gse=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bm=A.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,unstable_viewTransition:d}=e,h=Jie(e,nse),{basename:f}=A.useContext(Cf),p,m=!1;if(typeof c=="string"&&gse.test(c)&&(p=c,mse))try{let b=new URL(window.location.href),E=c.startsWith("//")?new URL(b.protocol+c):new URL(c),w=Eg(E.pathname,f);E.origin===b.origin&&w!=null?c=w+E.search+E.hash:m=!0}catch{}let _=Die(c,{relative:i}),y=vse(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:i,unstable_viewTransition:d});function x(b){r&&r(b),b.defaultPrevented||y(b)}return A.createElement("a",_y({},h,{href:p||_,onClick:m||s?r:x,ref:n,target:l}))});var a5;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(a5||(a5={}));var l5;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(l5||(l5={}));function vse(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a}=e===void 0?{}:e,l=mi(),c=rS(),u=CW(t,{relative:o});return A.useCallback(d=>{if(tse(d,n)){d.preventDefault();let h=r!==void 0?r:sf(c)===sf(u);l(t,{replace:h,state:i,preventScrollReset:s,relative:o,unstable_viewTransition:a})}},[c,l,u,r,i,n,t,s,o,a])}var PW,c5=Wc;PW=c5.createRoot,c5.hydrateRoot;var ai={VITE_MAP_TILER_API_KEY:"lMsL1JaJvv3fuJWczgIa",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};let yse=0;function Ld(t,e){const n=`atom${++yse}`,r={toString:()=>n};return typeof t=="function"?r.read=t:(r.init=t,r.read=_se,r.write=bse),e&&(r.write=e),r}function _se(t){return t(this)}function bse(t,e,n){return e(this,typeof n=="function"?n(t(this)):n)}const aR=(t,e)=>t.unstable_is?t.unstable_is(e):e===t,lR=t=>"init"in t,cR=t=>!!t.write,sw=new WeakMap,xse=(t,e)=>{sw.set(t,e),t.catch(()=>{}).finally(()=>sw.delete(t))},u5=(t,e)=>{const n=sw.get(t);n&&(sw.delete(t),n(e))},d5=(t,e)=>{t.status="fulfilled",t.value=e},h5=(t,e)=>{t.status="rejected",t.reason=e},Ese=t=>typeof(t==null?void 0:t.then)=="function",m0=(t,e)=>!!t&&"v"in t&&"v"in e&&Object.is(t.v,e.v),f5=(t,e)=>!!t&&"e"in t&&"e"in e&&Object.is(t.e,e.e),tp=t=>!!t&&"v"in t&&t.v instanceof Promise,wse=(t,e)=>"v"in t&&"v"in e&&t.v.orig&&t.v.orig===e.v.orig,fb=t=>{if("e"in t)throw t.e;return t.v},Tse=()=>{const t=new WeakMap,e=new WeakMap,n=new Map;let r,i;(ai?"production":void 0)!=="production"&&(r=new Set,i=new Set);const s=P=>t.get(P),o=(P,M)=>{(ai?"production":void 0)!=="production"&&Object.freeze(M);const N=s(P);if(t.set(P,M),n.has(P)||n.set(P,N),tp(N)){const F="v"in M?M.v instanceof Promise?M.v:Promise.resolve(M.v):Promise.reject(M.e);N.v!==F&&u5(N.v,F)}},a=(P,M,N,F)=>{const I=new Map(F?M.d:null);let k=!1;N.forEach((R,z)=>{!R&&aR(P,z)&&(R=M),R?(I.set(z,R),M.d.get(z)!==R&&(k=!0)):(ai?"production":void 0)!=="production"&&console.warn("[Bug] atom state not found")}),(k||M.d.size!==I.size)&&(M.d=I)},l=(P,M,N,F)=>{const I=s(P),k={d:(I==null?void 0:I.d)||new Map,v:M};if(N&&a(P,k,N,F),m0(I,k)&&I.d===k.d)return I;if(tp(I)&&tp(k)&&wse(I,k)){if(I.d===k.d)return I;k.v=I.v}return o(P,k),k},c=(P,M,N,F)=>{if(Ese(M)){let I;const k=()=>{const z=s(P);if(!tp(z)||z.v!==R)return;const X=l(P,R,N);e.has(P)&&z.d!==X.d&&w(P,X,z.d)},R=new Promise((z,X)=>{let G=!1;M.then(j=>{G||(G=!0,d5(R,j),z(j),k())},j=>{G||(G=!0,h5(R,j),X(j),k())}),I=j=>{G||(G=!0,j.then(H=>d5(R,H),H=>h5(R,H)),z(j))}});return R.orig=M,R.status="pending",xse(R,z=>{z&&I(z),F==null||F()}),l(P,R,N,!0)}return l(P,M,N)},u=(P,M,N)=>{const F=s(P),I={d:(F==null?void 0:F.d)||new Map,e:M};return N&&a(P,I,N),f5(F,I)&&F.d===I.d?F:(o(P,I),I)},d=(P,M)=>{const N=s(P);if(!M&&N&&(e.has(P)||Array.from(N.d).every(([G,j])=>{if(G===P)return!0;const H=d(G);return H===j||m0(H,j)})))return N;const F=new Map;let I=!0;const k=G=>{if(aR(P,G)){const H=s(G);if(H)return F.set(G,H),fb(H);if(lR(G))return F.set(G,void 0),G.init;throw new Error("no atom init")}const j=d(G);return F.set(G,j),fb(j)};let R,z;const X={get signal(){return R||(R=new AbortController),R.signal},get setSelf(){return(ai?"production":void 0)!=="production"&&!cR(P)&&console.warn("setSelf function cannot be used with read-only atom"),!z&&cR(P)&&(z=(...G)=>{if((ai?"production":void 0)!=="production"&&I&&console.warn("setSelf function cannot be called in sync"),!I)return x(P,...G)}),z}};try{const G=P.read(k,X);return c(P,G,F,()=>R==null?void 0:R.abort())}catch(G){return u(P,G,F)}finally{I=!1}},h=P=>fb(d(P)),f=P=>{let M=e.get(P);return M||(M=b(P)),M},p=(P,M)=>!M.l.size&&(!M.t.size||M.t.size===1&&M.t.has(P)),m=P=>{const M=e.get(P);M&&p(P,M)&&E(P)},_=P=>{const M=R=>{var z;const X=new Set((z=e.get(R))==null?void 0:z.t);return n.forEach((G,j)=>{var H;(H=s(j))!=null&&H.d.has(R)&&X.add(j)}),X},N=new Array,F=new Set,I=R=>{if(!F.has(R)){F.add(R);for(const z of M(R))R!==z&&I(z);N.push(R)}};I(P);const k=new Set([P]);for(let R=N.length-1;R>=0;--R){const z=N[R],X=s(z);if(!X)continue;let G=!1;for(const j of X.d.keys())if(j!==z&&k.has(j)){G=!0;break}if(G){const j=d(z,!0);m0(X,j)||k.add(z)}}},y=(P,...M)=>{let N=!0;const F=R=>fb(d(R)),I=(R,...z)=>{let X;if(aR(P,R)){if(!lR(R))throw new Error("atom not writable");const G=s(R),j=c(R,z[0]);m0(G,j)||_(R)}else X=y(R,...z);if(!N){const G=T();(ai?"production":void 0)!=="production"&&r.forEach(j=>j({type:"async-write",flushed:G}))}return X},k=P.write(F,I,...M);return N=!1,k},x=(P,...M)=>{const N=y(P,...M),F=T();return(ai?"production":void 0)!=="production"&&r.forEach(I=>I({type:"write",flushed:F})),N},b=(P,M,N)=>{var F;const I=N||[];(F=s(P))==null||F.d.forEach((R,z)=>{const X=e.get(z);X?X.t.add(P):z!==P&&b(z,P,I)}),d(P);const k={t:new Set(M&&[M]),l:new Set};if(e.set(P,k),(ai?"production":void 0)!=="production"&&i.add(P),cR(P)&&P.onMount){const{onMount:R}=P;I.push(()=>{const z=R((...X)=>x(P,...X));z&&(k.u=z)})}return N||I.forEach(R=>R()),k},E=P=>{var M;const N=(M=e.get(P))==null?void 0:M.u;N&&N(),e.delete(P),(ai?"production":void 0)!=="production"&&i.delete(P);const F=s(P);F?(tp(F)&&u5(F.v),F.d.forEach((I,k)=>{if(k!==P){const R=e.get(k);R&&(R.t.delete(P),p(k,R)&&E(k))}})):(ai?"production":void 0)!=="production"&&console.warn("[Bug] could not find atom state to unmount",P)},w=(P,M,N)=>{const F=new Set(M.d.keys()),I=new Set;N==null||N.forEach((k,R)=>{if(F.has(R)){F.delete(R);return}I.add(R);const z=e.get(R);z&&z.t.delete(P)}),F.forEach(k=>{const R=e.get(k);R?R.t.add(P):e.has(P)&&b(k,P)}),I.forEach(k=>{const R=e.get(k);R&&p(k,R)&&E(k)})},T=()=>{let P;for((ai?"production":void 0)!=="production"&&(P=new Set);n.size;){const M=Array.from(n);n.clear(),M.forEach(([N,F])=>{const I=s(N);if(I){const k=e.get(N);k&&I.d!==(F==null?void 0:F.d)&&w(N,I,F==null?void 0:F.d),k&&!(!tp(F)&&(m0(F,I)||f5(F,I)))&&(k.l.forEach(R=>R()),(ai?"production":void 0)!=="production"&&P.add(N))}else(ai?"production":void 0)!=="production"&&console.warn("[Bug] no atom state to flush")})}if((ai?"production":void 0)!=="production")return P},C=(P,M)=>{const N=f(P),F=T(),I=N.l;return I.add(M),(ai?"production":void 0)!=="production"&&r.forEach(k=>k({type:"sub",flushed:F})),()=>{I.delete(M),m(P),(ai?"production":void 0)!=="production"&&r.forEach(k=>k({type:"unsub"}))}};return(ai?"production":void 0)!=="production"?{get:h,set:x,sub:C,dev_subscribe_store:(P,M)=>{if(M!==2)throw new Error("The current StoreListener revision is 2.");return r.add(P),()=>{r.delete(P)}},dev_get_mounted_atoms:()=>i.values(),dev_get_atom_state:P=>t.get(P),dev_get_mounted:P=>e.get(P),dev_restore_atoms:P=>{for(const[N,F]of P)lR(N)&&(c(N,F),_(N));const M=T();r.forEach(N=>N({type:"restore",flushed:M}))}}:{get:h,set:x,sub:C}};let uR;(ai?"production":void 0)!=="production"&&(typeof globalThis.__NUMBER_OF_JOTAI_INSTANCES__=="number"?++globalThis.__NUMBER_OF_JOTAI_INSTANCES__:globalThis.__NUMBER_OF_JOTAI_INSTANCES__=1);const Sse=()=>(uR||((ai?"production":void 0)!=="production"&&globalThis.__NUMBER_OF_JOTAI_INSTANCES__!==1&&console.warn("Detected multiple Jotai instances. It may cause unexpected behavior with the default store. https://github.com/pmndrs/jotai/discussions/2044"),uR=Tse()),uR);var Cse={VITE_MAP_TILER_API_KEY:"lMsL1JaJvv3fuJWczgIa",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Ase=A.createContext(void 0),IW=t=>{const e=A.useContext(Ase);return(t==null?void 0:t.store)||e||Sse()},Rse=t=>typeof(t==null?void 0:t.then)=="function",Pse=Gn.use||(t=>{if(t.status==="pending")throw t;if(t.status==="fulfilled")return t.value;throw t.status==="rejected"?t.reason:(t.status="pending",t.then(e=>{t.status="fulfilled",t.value=e},e=>{t.status="rejected",t.reason=e}),t)});function Fm(t,e){const n=IW(e),[[r,i,s],o]=A.useReducer(c=>{const u=n.get(t);return Object.is(c[0],u)&&c[1]===n&&c[2]===t?c:[u,n,t]},void 0,()=>[n.get(t),n,t]);let a=r;(i!==n||s!==t)&&(o(),a=n.get(t));const l=e==null?void 0:e.delay;return A.useEffect(()=>{const c=n.sub(t,()=>{if(typeof l=="number"){setTimeout(o,l);return}o()});return o(),c},[n,t,l]),A.useDebugValue(a),Rse(a)?Pse(a):a}function MW(t,e){const n=IW(e);return A.useCallback((...i)=>{if((Cse?"production":void 0)!=="production"&&!("write"in t))throw new Error("not writable atom");return n.set(t,...i)},[n,t])}function of(t,e){return[Fm(t,e),MW(t,e)]}var Rk=Symbol.for("immer-nothing"),Av=Symbol.for("immer-draftable"),Co=Symbol.for("immer-state");function cs(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var af=Object.getPrototypeOf;function lf(t){return!!t&&!!t[Co]}function gd(t){var e;return t?LW(t)||Array.isArray(t)||!!t[Av]||!!((e=t.constructor)!=null&&e[Av])||y1(t)||_1(t):!1}var Ise=Object.prototype.constructor.toString();function LW(t){if(!t||typeof t!="object")return!1;const e=af(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Ise}function Um(t,e){cf(t)===0?Object.entries(t).forEach(([n,r])=>{e(n,r,t)}):t.forEach((n,r)=>e(r,n,t))}function cf(t){const e=t[Co];return e?e.type_:Array.isArray(t)?1:y1(t)?2:_1(t)?3:0}function by(t,e){return cf(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function dR(t,e){return cf(t)===2?t.get(e):t[e]}function OW(t,e,n){const r=cf(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function Mse(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function y1(t){return t instanceof Map}function _1(t){return t instanceof Set}function fh(t){return t.copy_||t.base_}function SI(t,e){if(y1(t))return new Map(t);if(_1(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);if(!e&&LW(t))return af(t)?{...t}:Object.assign(Object.create(null),t);const n=Object.getOwnPropertyDescriptors(t);delete n[Co];let r=Reflect.ownKeys(n);for(let i=0;i<r.length;i++){const s=r[i],o=n[s];o.writable===!1&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(n[s]={configurable:!0,writable:!0,enumerable:o.enumerable,value:t[s]})}return Object.create(af(t),n)}function Pk(t,e=!1){return iS(t)||lf(t)||!gd(t)||(cf(t)>1&&(t.set=t.add=t.clear=t.delete=Lse),Object.freeze(t),e&&Um(t,(n,r)=>Pk(r,!0))),t}function Lse(){cs(2)}function iS(t){return Object.isFrozen(t)}var CI={};function uf(t){const e=CI[t];return e||cs(0,t),e}function Ose(t,e){CI[t]||(CI[t]=e)}var xy;function kW(){return xy}function kse(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function p5(t,e){e&&(uf("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function AI(t){RI(t),t.drafts_.forEach(Nse),t.drafts_=null}function RI(t){t===xy&&(xy=t.parent_)}function m5(t){return xy=kse(xy,t)}function Nse(t){const e=t[Co];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function g5(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[Co].modified_&&(AI(e),cs(4)),gd(t)&&(t=ow(e,t),e.parent_||aw(e,t)),e.patches_&&uf("Patches").generateReplacementPatches_(n[Co].base_,t,e.patches_,e.inversePatches_)):t=ow(e,n,[]),AI(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==Rk?t:void 0}function ow(t,e,n){if(iS(e))return e;const r=e[Co];if(!r)return Um(e,(i,s)=>v5(t,r,e,i,s,n)),e;if(r.scope_!==t)return e;if(!r.modified_)return aw(t,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),Um(s,(a,l)=>v5(t,r,i,a,l,n,o)),aw(t,i,!1),n&&t.patches_&&uf("Patches").generatePatches_(r,n,t.patches_,t.inversePatches_)}return r.copy_}function v5(t,e,n,r,i,s,o){if(lf(i)){const a=s&&e&&e.type_!==3&&!by(e.assigned_,r)?s.concat(r):void 0,l=ow(t,i,a);if(OW(n,r,l),lf(l))t.canAutoFreeze_=!1;else return}else o&&n.add(i);if(gd(i)&&!iS(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;ow(t,i),(!e||!e.scope_.parent_)&&aw(t,i)}}function aw(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&Pk(e,n)}function Dse(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:kW(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=Ik;n&&(i=[r],s=Ey);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var Ik={get(t,e){if(e===Co)return t;const n=fh(t);if(!by(n,e))return Bse(t,n,e);const r=n[e];return t.finalized_||!gd(r)?r:r===hR(t.base_,e)?(fR(t),t.copy_[e]=II(r,t)):r},has(t,e){return e in fh(t)},ownKeys(t){return Reflect.ownKeys(fh(t))},set(t,e,n){const r=NW(fh(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=hR(fh(t),e),s=i==null?void 0:i[Co];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(Mse(n,i)&&(n!==void 0||by(t.base_,e)))return!0;fR(t),PI(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return hR(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,fR(t),PI(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=fh(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){cs(11)},getPrototypeOf(t){return af(t.base_)},setPrototypeOf(){cs(12)}},Ey={};Um(Ik,(t,e)=>{Ey[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Ey.deleteProperty=function(t,e){return Ey.set.call(this,t,e,void 0)};Ey.set=function(t,e,n){return Ik.set.call(this,t[0],e,n,t[0])};function hR(t,e){const n=t[Co];return(n?fh(n):t)[e]}function Bse(t,e,n){var i;const r=NW(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function NW(t,e){if(!(e in t))return;let n=af(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=af(n)}}function PI(t){t.modified_||(t.modified_=!0,t.parent_&&PI(t.parent_))}function fR(t){t.copy_||(t.copy_=SI(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var Fse=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const o=this;return function(l=s,...c){return o.produce(l,u=>n.call(this,u,...c))}}typeof n!="function"&&cs(6),r!==void 0&&typeof r!="function"&&cs(7);let i;if(gd(e)){const s=m5(this),o=II(e,void 0);let a=!0;try{i=n(o),a=!1}finally{a?AI(s):RI(s)}return p5(s,r),g5(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===Rk&&(i=void 0),this.autoFreeze_&&Pk(i,!0),r){const s=[],o=[];uf("Patches").generateReplacementPatches_(e,i,s,o),r(s,o)}return i}else cs(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...a)=>this.produceWithPatches(o,l=>e(l,...a));let r,i;return[this.produce(e,n,(o,a)=>{r=o,i=a}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){gd(t)||cs(8),lf(t)&&(t=Use(t));const e=m5(this),n=II(t,void 0);return n[Co].isManual_=!0,RI(e),n}finishDraft(t,e){const n=t&&t[Co];(!n||!n.isManual_)&&cs(9);const{scope_:r}=n;return p5(r,e),g5(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=uf("Patches").applyPatches_;return lf(t)?r(t,e):this.produce(t,i=>r(i,e))}};function II(t,e){const n=y1(t)?uf("MapSet").proxyMap_(t,e):_1(t)?uf("MapSet").proxySet_(t,e):Dse(t,e);return(e?e.scope_:kW()).drafts_.push(n),n}function Use(t){return lf(t)||cs(10,t),DW(t)}function DW(t){if(!gd(t)||iS(t))return t;const e=t[Co];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=SI(t,e.scope_.immer_.useStrictShallowCopy_)}else n=SI(t,!0);return Um(n,(r,i)=>{OW(n,r,DW(i))}),e&&(e.finalized_=!1),n}function BW(){const e="replace",n="add",r="remove";function i(h,f,p,m){switch(h.type_){case 0:case 2:return o(h,f,p,m);case 1:return s(h,f,p,m);case 3:return a(h,f,p,m)}}function s(h,f,p,m){let{base_:_,assigned_:y}=h,x=h.copy_;x.length<_.length&&([_,x]=[x,_],[p,m]=[m,p]);for(let b=0;b<_.length;b++)if(y[b]&&x[b]!==_[b]){const E=f.concat([b]);p.push({op:e,path:E,value:d(x[b])}),m.push({op:e,path:E,value:d(_[b])})}for(let b=_.length;b<x.length;b++){const E=f.concat([b]);p.push({op:n,path:E,value:d(x[b])})}for(let b=x.length-1;_.length<=b;--b){const E=f.concat([b]);m.push({op:r,path:E})}}function o(h,f,p,m){const{base_:_,copy_:y}=h;Um(h.assigned_,(x,b)=>{const E=dR(_,x),w=dR(y,x),T=b?by(_,x)?e:n:r;if(E===w&&T===e)return;const C=f.concat(x);p.push(T===r?{op:T,path:C}:{op:T,path:C,value:w}),m.push(T===n?{op:r,path:C}:T===r?{op:n,path:C,value:d(E)}:{op:e,path:C,value:d(E)})})}function a(h,f,p,m){let{base_:_,copy_:y}=h,x=0;_.forEach(b=>{if(!y.has(b)){const E=f.concat([x]);p.push({op:r,path:E,value:b}),m.unshift({op:n,path:E,value:b})}x++}),x=0,y.forEach(b=>{if(!_.has(b)){const E=f.concat([x]);p.push({op:n,path:E,value:b}),m.unshift({op:r,path:E,value:b})}x++})}function l(h,f,p,m){p.push({op:e,path:[],value:f===Rk?void 0:f}),m.push({op:e,path:[],value:h})}function c(h,f){return f.forEach(p=>{const{path:m,op:_}=p;let y=h;for(let w=0;w<m.length-1;w++){const T=cf(y);let C=m[w];typeof C!="string"&&typeof C!="number"&&(C=""+C),(T===0||T===1)&&(C==="__proto__"||C==="constructor")&&cs(19),typeof y=="function"&&C==="prototype"&&cs(19),y=dR(y,C),typeof y!="object"&&cs(18,m.join("/"))}const x=cf(y),b=u(p.value),E=m[m.length-1];switch(_){case e:switch(x){case 2:return y.set(E,b);case 3:cs(16);default:return y[E]=b}case n:switch(x){case 1:return E==="-"?y.push(b):y.splice(E,0,b);case 2:return y.set(E,b);case 3:return y.add(b);default:return y[E]=b}case r:switch(x){case 1:return y.splice(E,1);case 2:return y.delete(E);case 3:return y.delete(p.value);default:return delete y[E]}default:cs(17,_)}}),h}function u(h){if(!gd(h))return h;if(Array.isArray(h))return h.map(u);if(y1(h))return new Map(Array.from(h.entries()).map(([p,m])=>[p,u(m)]));if(_1(h))return new Set(Array.from(h).map(u));const f=Object.create(af(h));for(const p in h)f[p]=u(h[p]);return by(h,Av)&&(f[Av]=h[Av]),f}function d(h){return lf(h)?u(h):h}Ose("Patches",{applyPatches_:c,generatePatches_:i,generateReplacementPatches_:l})}var Ao=new Fse,Jp=Ao.produce,zse=Ao.produceWithPatches.bind(Ao);Ao.setAutoFreeze.bind(Ao);Ao.setUseStrictShallowCopy.bind(Ao);var y5=Ao.applyPatches.bind(Ao);Ao.createDraft.bind(Ao);Ao.finishDraft.bind(Ao);const $se=t=>({current:t,history:[],future:[],staging:[]});function jse(t){const e=new Set,n=new Set,r=[],i=[];for(let s=t.length-1;s>=0;s--){const o=t[s];for(let a=t[s].patch.length-1;a>=0;a--){const l=o.patch[a],c=JSON.stringify(l.path);l.op==="replace"&&e.has(c)||(e.add(c),r.push(l))}}for(let s=0;s<t.length;s++){const o=t[s];for(let a=0;a<t[s].patch.length;a++){const l=o.inversePatch[a],c=JSON.stringify(l.path);l.op==="replace"&&n.has(c)||(n.add(c),i.push(l))}}return r.length===0&&i.length===0?null:{patch:r.reverse(),inversePatch:i}}const sS=(t,e=30)=>{const[{history:n,future:r,current:i,staging:s},o]=of(t);return{set:(u,d=!0,h)=>{const[f,p,m]=zse(i,u),_={patch:p,inversePatch:m,label:h};if(d){const y=jse(s.length>0?s:[_]);if(y===null)return;o(x=>{const b=x.history.length>=e?[...x.history.slice(1),y]:[...x.history,y];return{current:f,history:b,future:[],staging:[]}})}else{const y=[...s,_];o(x=>({...x,current:f,staging:y}))}},undo:()=>{o(u=>{if(n.length===0||u.history.length===0)return u;const d=n[u.history.length-1];if(!d)return u;const h=y5(u.current,d.inversePatch);return{history:u.history.slice(0,-1),future:[d,...u.future],current:h,staging:[]}})},redo:()=>{o(u=>{if(r.length===0||u.future.length===0)return u;const d=u.future[0];if(!d)return u;const h=y5(u.current,d.patch);return{history:[...u.history,d],future:u.future.slice(1),current:h,staging:[]}})},history:n,future:r,staging:s,current:i}},Da={ManufactureShare:"Share of Manufacturing",AgricultureShare:"Share of Agriculture",PriceIndex:"Price Index",NominalWage:"Nominal Wage",RealWage:"Real Wage"},Gse=[Da.ManufactureShare,Da.AgricultureShare,Da.PriceIndex,Da.NominalWage,Da.RealWage];function FW(t){const e=Ld(t,(n,r,i)=>r(e,Jp(n(e),typeof i=="function"?i:()=>i)));return e}function Hse(t,e){const n=MW(t,e);return A.useCallback(r=>n(Jp(r)),[n])}function UW(t,e){return[Fm(t,e),Hse(t,e)]}function pb(t,e){return t.toFixed(2).toString()}function Bc(t){return t===Number.POSITIVE_INFINITY||t>=1e9||isNaN(t)}const _5=(t,e,n)=>{const r=Math.log(t),i=Math.log(e),s=r+(1-n)*(i-r);return Math.exp(s)};var Mk={exports:{}};Mk.exports;(function(t){(function(e,n,r){function i(l){var c=this,u=a();c.next=function(){var d=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=d-(c.c=d|0)},c.c=1,c.s0=u(" "),c.s1=u(" "),c.s2=u(" "),c.s0-=u(l),c.s0<0&&(c.s0+=1),c.s1-=u(l),c.s1<0&&(c.s1+=1),c.s2-=u(l),c.s2<0&&(c.s2+=1),u=null}function s(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function o(l,c){var u=new i(l),d=c&&c.state,h=u.next;return h.int32=function(){return u.next()*4294967296|0},h.double=function(){return h()+(h()*2097152|0)*11102230246251565e-32},h.quick=h,d&&(typeof d=="object"&&s(d,u),h.state=function(){return s(u,{})}),h}function a(){var l=4022871197,c=function(u){u=String(u);for(var d=0;d<u.length;d++){l+=u.charCodeAt(d);var h=.02519603282416938*l;l=h>>>0,h-=l,h*=l,l=h>>>0,h-=l,l+=h*4294967296}return(l>>>0)*23283064365386963e-26};return c}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.alea=o})(Pi,t,!1)})(Mk);var Vse=Mk.exports,Lk={exports:{}};Lk.exports;(function(t){(function(e,n,r){function i(a){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var d=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^d^d>>>8},a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,l.next()}function s(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l}function o(a,l){var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&s(u,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor128=o})(Pi,t,!1)})(Lk);var Wse=Lk.exports,Ok={exports:{}};Ok.exports;(function(t){(function(e,n,r){function i(a){var l=this,c="";l.next=function(){var d=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(d^d<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,a===(a|0)?l.x=a:c+=a;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,u==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function s(a,l){return l.x=a.x,l.y=a.y,l.z=a.z,l.w=a.w,l.v=a.v,l.d=a.d,l}function o(a,l){var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&s(u,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorwow=o})(Pi,t,!1)})(Ok);var Xse=Ok.exports,kk={exports:{}};kk.exports;(function(t){(function(e,n,r){function i(a){var l=this;l.next=function(){var u=l.x,d=l.i,h,f;return h=u[d],h^=h>>>7,f=h^h<<24,h=u[d+1&7],f^=h^h>>>10,h=u[d+3&7],f^=h^h>>>3,h=u[d+4&7],f^=h^h<<7,h=u[d+7&7],h=h^h<<13,f^=h^h<<9,u[d]=f,l.i=d+1&7,f};function c(u,d){var h,f=[];if(d===(d|0))f[0]=d;else for(d=""+d,h=0;h<d.length;++h)f[h&7]=f[h&7]<<15^d.charCodeAt(h)+f[h+1&7]<<13;for(;f.length<8;)f.push(0);for(h=0;h<8&&f[h]===0;++h);for(h==8?f[7]=-1:f[h],u.x=f,u.i=0,h=256;h>0;--h)u.next()}c(l,a)}function s(a,l){return l.x=a.x.slice(),l.i=a.i,l}function o(a,l){a==null&&(a=+new Date);var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(u.x&&s(u,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xorshift7=o})(Pi,t,!1)})(kk);var Yse=kk.exports,Nk={exports:{}};Nk.exports;(function(t){(function(e,n,r){function i(a){var l=this;l.next=function(){var u=l.w,d=l.X,h=l.i,f,p;return l.w=u=u+1640531527|0,p=d[h+34&127],f=d[h=h+1&127],p^=p<<13,f^=f<<17,p^=p>>>15,f^=f>>>12,p=d[h]=p^f,l.i=h,p+(u^u>>>16)|0};function c(u,d){var h,f,p,m,_,y=[],x=128;for(d===(d|0)?(f=d,d=null):(d=d+"\0",f=0,x=Math.max(x,d.length)),p=0,m=-32;m<x;++m)d&&(f^=d.charCodeAt((m+32)%d.length)),m===0&&(_=f),f^=f<<10,f^=f>>>15,f^=f<<4,f^=f>>>13,m>=0&&(_=_+1640531527|0,h=y[m&127]^=f+_,p=h==0?p+1:0);for(p>=128&&(y[(d&&d.length||0)&127]=-1),p=127,m=4*128;m>0;--m)f=y[p+34&127],h=y[p=p+1&127],f^=f<<13,h^=h<<17,f^=f>>>15,h^=h>>>12,y[p]=f^h;u.w=_,u.X=y,u.i=p}c(l,a)}function s(a,l){return l.i=a.i,l.w=a.w,l.X=a.X.slice(),l}function o(a,l){a==null&&(a=+new Date);var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(u.X&&s(u,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.xor4096=o})(Pi,t,!1)})(Nk);var Kse=Nk.exports,Dk={exports:{}};Dk.exports;(function(t){(function(e,n,r){function i(a){var l=this,c="";l.next=function(){var d=l.b,h=l.c,f=l.d,p=l.a;return d=d<<25^d>>>7^h,h=h-f|0,f=f<<24^f>>>8^p,p=p-d|0,l.b=d=d<<20^d>>>12^h,l.c=h=h-f|0,l.d=f<<16^h>>>16^p,l.a=p-d|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,a===Math.floor(a)?(l.a=a/4294967296|0,l.b=a|0):c+=a;for(var u=0;u<c.length+20;u++)l.b^=c.charCodeAt(u)|0,l.next()}function s(a,l){return l.a=a.a,l.b=a.b,l.c=a.c,l.d=a.d,l}function o(a,l){var c=new i(a),u=l&&l.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var h=c.next()>>>11,f=(c.next()>>>0)/4294967296,p=(h+f)/(1<<21);while(p===0);return p},d.int32=c.next,d.quick=d,u&&(typeof u=="object"&&s(u,c),d.state=function(){return s(c,{})}),d}n&&n.exports?n.exports=o:r&&r.amd?r(function(){return o}):this.tychei=o})(Pi,t,!1)})(Dk);var qse=Dk.exports,zW={exports:{}};const Zse={},Qse=Object.freeze(Object.defineProperty({__proto__:null,default:Zse},Symbol.toStringTag,{value:"Module"})),$W=In(Qse);(function(t){(function(e,n,r){var i=256,s=6,o=52,a="random",l=r.pow(i,s),c=r.pow(2,o),u=c*2,d=i-1,h;function f(E,w,T){var C=[];w=w==!0?{entropy:!0}:w||{};var P=y(_(w.entropy?[E,b(n)]:E??x(),3),C),M=new p(C),N=function(){for(var F=M.g(s),I=l,k=0;F<c;)F=(F+k)*i,I*=i,k=M.g(1);for(;F>=u;)F/=2,I/=2,k>>>=1;return(F+k)/I};return N.int32=function(){return M.g(4)|0},N.quick=function(){return M.g(4)/4294967296},N.double=N,y(b(M.S),n),(w.pass||T||function(F,I,k,R){return R&&(R.S&&m(R,M),F.state=function(){return m(M,{})}),k?(r[a]=F,I):F})(N,P,"global"in w?w.global:this==r,w.state)}function p(E){var w,T=E.length,C=this,P=0,M=C.i=C.j=0,N=C.S=[];for(T||(E=[T++]);P<i;)N[P]=P++;for(P=0;P<i;P++)N[P]=N[M=d&M+E[P%T]+(w=N[P])],N[M]=w;(C.g=function(F){for(var I,k=0,R=C.i,z=C.j,X=C.S;F--;)I=X[R=d&R+1],k=k*i+X[d&(X[R]=X[z=d&z+I])+(X[z]=I)];return C.i=R,C.j=z,k})(i)}function m(E,w){return w.i=E.i,w.j=E.j,w.S=E.S.slice(),w}function _(E,w){var T=[],C=typeof E,P;if(w&&C=="object")for(P in E)try{T.push(_(E[P],w-1))}catch{}return T.length?T:C=="string"?E:E+"\0"}function y(E,w){for(var T=E+"",C,P=0;P<T.length;)w[d&P]=d&(C^=w[d&P]*19)+T.charCodeAt(P++);return b(w)}function x(){try{var E;return h&&(E=h.randomBytes)?E=E(i):(E=new Uint8Array(i),(e.crypto||e.msCrypto).getRandomValues(E)),b(E)}catch{var w=e.navigator,T=w&&w.plugins;return[+new Date,e,T,e.screen,b(n)]}}function b(E){return String.fromCharCode.apply(0,E)}if(y(r.random(),n),t.exports){t.exports=f;try{h=$W}catch{}}else r["seed"+a]=f})(typeof self<"u"?self:Pi,[],Math)})(zW);var Jse=zW.exports,eoe=Vse,toe=Wse,noe=Xse,roe=Yse,ioe=Kse,soe=qse,Af=Jse;Af.alea=eoe;Af.xor128=toe;Af.xorwow=noe;Af.xorshift7=roe;Af.xor4096=ioe;Af.tychei=soe;var ooe=Af;const aoe=Ad(ooe);class jW{constructor(e){e===void 0&&(e=Math.random().toString()),this.rng=aoe(e.toString())}random(){return this.rng.double()}}const loe=new URLSearchParams(window.location.search).get("seed")||Math.random(),lw=new jW(loe),coe=.05,cw=(t,e)=>e*(1+(t.random()-.5)*coe),GW=({id:t,label:e,point:n,share:r,randomize:i})=>{const s=i?cw(lw,r):r,o=i?cw(lw,r):r;return{id:t,label:e,point:n,velocity:[0,0],manufactureShare:s,manufactureShare0:s,agricultureShare:o,priceIndex:1,priceIndex0:1,nominalWage:1,nominalWage0:1,realWage:1,income:1,income0:1}};function uoe(t,e){return t.priceIndex=1,t.priceIndex0=1,t.nominalWage=1,t.nominalWage0=1,t.realWage=1,t.income=1,t.income0=1,e&&0<e&&(t.manufactureShare=cw(lw,1/e),t.agricultureShare=cw(lw,1/e),t.manufactureShare0=t.manufactureShare),t}function doe(t){t.income0=t.income,t.nominalWage0=t.nominalWage,t.priceIndex0=t.priceIndex,t.manufactureShare0=t.manufactureShare}function hoe(t,e){return t*e.manufactureShare*e.nominalWage+(1-t)*e.agricultureShare}function foe(t,e,n,r,i){const s=t.map((o,a)=>{const l=n[i][a];return Bc(l)?0:o.manufactureShare*Math.pow(o.nominalWage0*l,1-e)}).reduce((o,a)=>o+a,0);return Math.pow(s,1/(1-e))}function poe(t,e,n,r){const i=t.map((s,o)=>{const a=n[r][o];return Bc(a)?0:s.income0*Math.pow(a,1-e)*Math.pow(s.priceIndex0,e-1)}).reduce((s,o)=>s+o,0);return Math.pow(i,1/e)}function moe(t,e){return e.nominalWage*Math.pow(e.priceIndex,-1*t)}function goe(t,e,n,r){return r.manufactureShare>1/t/10?e*(r.realWage-n)*r.manufactureShare:1/t/10}let mb;const voe=new Uint8Array(16);function yoe(){if(!mb&&(mb=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!mb))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return mb(voe)}const $i=[];for(let t=0;t<256;++t)$i.push((t+256).toString(16).slice(1));function _oe(t,e=0){return $i[t[e+0]]+$i[t[e+1]]+$i[t[e+2]]+$i[t[e+3]]+"-"+$i[t[e+4]]+$i[t[e+5]]+"-"+$i[t[e+6]]+$i[t[e+7]]+"-"+$i[t[e+8]]+$i[t[e+9]]+"-"+$i[t[e+10]]+$i[t[e+11]]+$i[t[e+12]]+$i[t[e+13]]+$i[t[e+14]]+$i[t[e+15]]}const boe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),b5={randomUUID:boe};function Rf(t,e,n){if(b5.randomUUID&&!e&&!t)return b5.randomUUID();t=t||{};const r=t.random||(t.rng||yoe)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){n=n||0;for(let i=0;i<16;++i)e[n+i]=r[i];return e}return _oe(r)}const wg=(t,e)=>{const n=[];for(let r=0;r<t;r++){const i=[];for(let s=0;s<t;s++)i.push(e?e(r,s):0);n.push(i)}return n};function xoe(t,e){const n=new Set(e),r=new Set(t.concat(e)),i=new Set(t.filter(s=>n.has(s)));return Array.from(r).filter(s=>!i.has(s))}const Rv=(t,e)=>{e||(e=t-1,t=0);const n=[];for(let r=t;r<=e;r++)n.push(r);return n};function MI(t,e){let n=0,r=t.length-1;for(;n<=r;){let i=Math.floor((n+r)/2);if(t[i].id===e){for(;i>0&&t[i-1].id===e;)i--;return i}else t[i].id<e?n=i+1:r=i-1}return-1}function zm(t,e){let n=0,r=t.length-1;for(;n<=r;){let i=Math.floor((n+r)/2);if(t[i].id===e){for(;i>0&&t[i-1].id===e;)i--;return t[i]}else t[i].id<e?n=i+1:r=i-1}return null}function Eoe(t){for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t}function woe(t){const e={};return t.forEach(([n,r])=>{e[n]=r}),e}var Us=63710088e-1,Toe={centimeters:Us*100,centimetres:Us*100,degrees:Us/111325,feet:Us*3.28084,inches:Us*39.37,kilometers:Us/1e3,kilometres:Us/1e3,meters:Us,metres:Us,miles:Us/1609.344,millimeters:Us*1e3,millimetres:Us*1e3,nauticalmiles:Us/1852,radians:1,yards:Us*1.0936};function Soe(t,e){e===void 0&&(e="kilometers");var n=Toe[e];if(!n)throw new Error(e+" units is invalid");return t*n}function gb(t){var e=t%360;return e*Math.PI/180}function x5(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return t.geometry.coordinates;if(t.type==="Point")return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}function Coe(t,e,n){n===void 0&&(n={});var r=x5(t),i=x5(e),s=gb(i[1]-r[1]),o=gb(i[0]-r[0]),a=gb(r[1]),l=gb(i[1]),c=Math.pow(Math.sin(s/2),2)+Math.pow(Math.sin(o/2),2)*Math.cos(a)*Math.cos(l);return Soe(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),n.units)}var Bk={exports:{}};Bk.exports=oS;Bk.exports.default=oS;function oS(t,e,n){n=n||2;var r=e&&e.length,i=r?e[0]*n:t.length,s=HW(t,0,i,n,!0),o=[];if(!s||s.next===s.prev)return o;var a,l,c,u,d,h,f;if(r&&(s=Moe(t,e,s,n)),t.length>80*n){a=c=t[0],l=u=t[1];for(var p=n;p<i;p+=n)d=t[p],h=t[p+1],d<a&&(a=d),h<l&&(l=h),d>c&&(c=d),h>u&&(u=h);f=Math.max(c-a,u-l),f=f!==0?32767/f:0}return wy(s,o,n,a,l,f,0),o}function HW(t,e,n,r,i){var s,o;if(i===kI(t,e,n,r)>0)for(s=e;s<n;s+=r)o=E5(s,t[s],t[s+1],o);else for(s=n-r;s>=e;s-=r)o=E5(s,t[s],t[s+1],o);return o&&aS(o,o.next)&&(Sy(o),o=o.next),o}function df(t,e){if(!t)return t;e||(e=t);var n=t,r;do if(r=!1,!n.steiner&&(aS(n,n.next)||wr(n.prev,n,n.next)===0)){if(Sy(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function wy(t,e,n,r,i,s,o){if(t){!o&&s&&Doe(t,r,i,s);for(var a=t,l,c;t.prev!==t.next;){if(l=t.prev,c=t.next,s?Roe(t,r,i,s):Aoe(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(c.i/n|0),Sy(t),t=c.next,a=c.next;continue}if(t=c,t===a){o?o===1?(t=Poe(df(t),e,n),wy(t,e,n,r,i,s,2)):o===2&&Ioe(t,e,n,r,i,s):wy(df(t),e,n,r,i,s,1);break}}}}function Aoe(t){var e=t.prev,n=t,r=t.next;if(wr(e,n,r)>=0)return!1;for(var i=e.x,s=n.x,o=r.x,a=e.y,l=n.y,c=r.y,u=i<s?i<o?i:o:s<o?s:o,d=a<l?a<c?a:c:l<c?l:c,h=i>s?i>o?i:o:s>o?s:o,f=a>l?a>c?a:c:l>c?l:c,p=r.next;p!==e;){if(p.x>=u&&p.x<=h&&p.y>=d&&p.y<=f&&em(i,a,s,l,o,c,p.x,p.y)&&wr(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Roe(t,e,n,r){var i=t.prev,s=t,o=t.next;if(wr(i,s,o)>=0)return!1;for(var a=i.x,l=s.x,c=o.x,u=i.y,d=s.y,h=o.y,f=a<l?a<c?a:c:l<c?l:c,p=u<d?u<h?u:h:d<h?d:h,m=a>l?a>c?a:c:l>c?l:c,_=u>d?u>h?u:h:d>h?d:h,y=LI(f,p,e,n,r),x=LI(m,_,e,n,r),b=t.prevZ,E=t.nextZ;b&&b.z>=y&&E&&E.z<=x;){if(b.x>=f&&b.x<=m&&b.y>=p&&b.y<=_&&b!==i&&b!==o&&em(a,u,l,d,c,h,b.x,b.y)&&wr(b.prev,b,b.next)>=0||(b=b.prevZ,E.x>=f&&E.x<=m&&E.y>=p&&E.y<=_&&E!==i&&E!==o&&em(a,u,l,d,c,h,E.x,E.y)&&wr(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;b&&b.z>=y;){if(b.x>=f&&b.x<=m&&b.y>=p&&b.y<=_&&b!==i&&b!==o&&em(a,u,l,d,c,h,b.x,b.y)&&wr(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;E&&E.z<=x;){if(E.x>=f&&E.x<=m&&E.y>=p&&E.y<=_&&E!==i&&E!==o&&em(a,u,l,d,c,h,E.x,E.y)&&wr(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function Poe(t,e,n){var r=t;do{var i=r.prev,s=r.next.next;!aS(i,s)&&VW(i,r,r.next,s)&&Ty(i,s)&&Ty(s,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),Sy(r),Sy(r.next),r=t=s),r=r.next}while(r!==t);return df(r)}function Ioe(t,e,n,r,i,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&Uoe(o,a)){var l=WW(o,a);o=df(o,o.next),l=df(l,l.next),wy(o,e,n,r,i,s,0),wy(l,e,n,r,i,s,0);return}a=a.next}o=o.next}while(o!==t)}function Moe(t,e,n,r){var i=[],s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*r,l=s<o-1?e[s+1]*r:t.length,c=HW(t,a,l,r,!1),c===c.next&&(c.steiner=!0),i.push(Foe(c));for(i.sort(Loe),s=0;s<i.length;s++)n=Ooe(i[s],n);return n}function Loe(t,e){return t.x-e.x}function Ooe(t,e){var n=koe(t,e);if(!n)return e;var r=WW(n,t);return df(r,r.next),df(n,n.next)}function koe(t,e){var n=e,r=t.x,i=t.y,s=-1/0,o;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){var a=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=r&&a>s&&(s=a,o=n.x<n.next.x?n:n.next,a===r))return o}n=n.next}while(n!==e);if(!o)return null;var l=o,c=o.x,u=o.y,d=1/0,h;n=o;do r>=n.x&&n.x>=c&&r!==n.x&&em(i<u?r:s,i,c,u,i<u?s:r,i,n.x,n.y)&&(h=Math.abs(i-n.y)/(r-n.x),Ty(n,t)&&(h<d||h===d&&(n.x>o.x||n.x===o.x&&Noe(o,n)))&&(o=n,d=h)),n=n.next;while(n!==l);return o}function Noe(t,e){return wr(t.prev,t,e.prev)<0&&wr(e.next,t,t.next)<0}function Doe(t,e,n,r){var i=t;do i.z===0&&(i.z=LI(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,Boe(i)}function Boe(t){var e,n,r,i,s,o,a,l,c=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,r=n,a=0,e=0;e<c&&(a++,r=r.nextZ,!!r);e++);for(l=c;a>0||l>0&&r;)a!==0&&(l===0||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;n=r}s.nextZ=null,c*=2}while(o>1);return t}function LI(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function Foe(t){var e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function em(t,e,n,r,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(r-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(i-o)*(r-a)}function Uoe(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!zoe(t,e)&&(Ty(t,e)&&Ty(e,t)&&$oe(t,e)&&(wr(t.prev,t,e.prev)||wr(t,e.prev,e))||aS(t,e)&&wr(t.prev,t,t.next)>0&&wr(e.prev,e,e.next)>0)}function wr(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function aS(t,e){return t.x===e.x&&t.y===e.y}function VW(t,e,n,r){var i=yb(wr(t,e,n)),s=yb(wr(t,e,r)),o=yb(wr(n,r,t)),a=yb(wr(n,r,e));return!!(i!==s&&o!==a||i===0&&vb(t,n,e)||s===0&&vb(t,r,e)||o===0&&vb(n,t,r)||a===0&&vb(n,e,r))}function vb(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function yb(t){return t>0?1:t<0?-1:0}function zoe(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&VW(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Ty(t,e){return wr(t.prev,t,t.next)<0?wr(t,e,t.next)>=0&&wr(t,t.prev,e)>=0:wr(t,e,t.prev)<0||wr(t,t.next,e)<0}function $oe(t,e){var n=t,r=!1,i=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function WW(t,e){var n=new OI(t.i,t.x,t.y),r=new OI(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function E5(t,e,n,r){var i=new OI(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Sy(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function OI(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}oS.deviation=function(t,e,n,r){var i=e&&e.length,s=i?e[0]*n:t.length,o=Math.abs(kI(t,0,s,n));if(i)for(var a=0,l=e.length;a<l;a++){var c=e[a]*n,u=a<l-1?e[a+1]*n:t.length;o-=Math.abs(kI(t,c,u,n))}var d=0;for(a=0;a<r.length;a+=3){var h=r[a]*n,f=r[a+1]*n,p=r[a+2]*n;d+=Math.abs((t[h]-t[p])*(t[f+1]-t[h+1])-(t[h]-t[f])*(t[p+1]-t[h+1]))}return o===0&&d===0?0:Math.abs((d-o)/o)};function kI(t,e,n,r){for(var i=0,s=e,o=n-r;s<n;s+=r)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}oS.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},r=0,i=0;i<t.length;i++){for(var s=0;s<t[i].length;s++)for(var o=0;o<e;o++)n.vertices.push(t[i][s][o]);i>0&&(r+=t[i-1].length,n.holes.push(r))}return n};var joe=Bk.exports;const Fk=Ad(joe);var Goe=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},n=Symbol("test"),r=Object(n);if(typeof n=="string"||Object.prototype.toString.call(n)!=="[object Symbol]"||Object.prototype.toString.call(r)!=="[object Symbol]")return!1;var i=42;e[n]=i;for(n in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==n||!Object.prototype.propertyIsEnumerable.call(e,n))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,n);if(o.value!==i||o.enumerable!==!0)return!1}return!0},Hoe=Error,Voe=EvalError,Woe=RangeError,Xoe=ReferenceError,XW=SyntaxError,b1=TypeError,Yoe=URIError,w5=typeof Symbol<"u"&&Symbol,Koe=Goe,qoe=function(){return typeof w5!="function"||typeof Symbol!="function"||typeof w5("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:Koe()},T5={foo:{}},Zoe=Object,Qoe=function(){return{__proto__:T5}.foo===T5.foo&&!({__proto__:null}instanceof Zoe)},Joe="Function.prototype.bind called on incompatible ",eae=Object.prototype.toString,tae=Math.max,nae="[object Function]",S5=function(e,n){for(var r=[],i=0;i<e.length;i+=1)r[i]=e[i];for(var s=0;s<n.length;s+=1)r[s+e.length]=n[s];return r},rae=function(e,n){for(var r=[],i=n||0,s=0;i<e.length;i+=1,s+=1)r[s]=e[i];return r},iae=function(t,e){for(var n="",r=0;r<t.length;r+=1)n+=t[r],r+1<t.length&&(n+=e);return n},sae=function(e){var n=this;if(typeof n!="function"||eae.apply(n)!==nae)throw new TypeError(Joe+n);for(var r=rae(arguments,1),i,s=function(){if(this instanceof i){var u=n.apply(this,S5(r,arguments));return Object(u)===u?u:this}return n.apply(e,S5(r,arguments))},o=tae(0,n.length-r.length),a=[],l=0;l<o;l++)a[l]="$"+l;if(i=Function("binder","return function ("+iae(a,",")+"){ return binder.apply(this,arguments); }")(s),n.prototype){var c=function(){};c.prototype=n.prototype,i.prototype=new c,c.prototype=null}return i},oae=sae,Uk=Function.prototype.bind||oae,aae=Function.prototype.call,lae=Object.prototype.hasOwnProperty,cae=Uk,uae=cae.call(aae,lae),hn,dae=Hoe,hae=Voe,fae=Woe,pae=Xoe,$m=XW,mm=b1,mae=Yoe,YW=Function,pR=function(t){try{return YW('"use strict"; return ('+t+").constructor;")()}catch{}},Dh=Object.getOwnPropertyDescriptor;if(Dh)try{Dh({},"")}catch{Dh=null}var mR=function(){throw new mm},gae=Dh?function(){try{return arguments.callee,mR}catch{try{return Dh(arguments,"callee").get}catch{return mR}}}():mR,np=qoe(),vae=Qoe(),Ti=Object.getPrototypeOf||(vae?function(t){return t.__proto__}:null),Pp={},yae=typeof Uint8Array>"u"||!Ti?hn:Ti(Uint8Array),Bh={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?hn:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?hn:ArrayBuffer,"%ArrayIteratorPrototype%":np&&Ti?Ti([][Symbol.iterator]()):hn,"%AsyncFromSyncIteratorPrototype%":hn,"%AsyncFunction%":Pp,"%AsyncGenerator%":Pp,"%AsyncGeneratorFunction%":Pp,"%AsyncIteratorPrototype%":Pp,"%Atomics%":typeof Atomics>"u"?hn:Atomics,"%BigInt%":typeof BigInt>"u"?hn:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?hn:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?hn:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?hn:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":dae,"%eval%":eval,"%EvalError%":hae,"%Float32Array%":typeof Float32Array>"u"?hn:Float32Array,"%Float64Array%":typeof Float64Array>"u"?hn:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?hn:FinalizationRegistry,"%Function%":YW,"%GeneratorFunction%":Pp,"%Int8Array%":typeof Int8Array>"u"?hn:Int8Array,"%Int16Array%":typeof Int16Array>"u"?hn:Int16Array,"%Int32Array%":typeof Int32Array>"u"?hn:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":np&&Ti?Ti(Ti([][Symbol.iterator]())):hn,"%JSON%":typeof JSON=="object"?JSON:hn,"%Map%":typeof Map>"u"?hn:Map,"%MapIteratorPrototype%":typeof Map>"u"||!np||!Ti?hn:Ti(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?hn:Promise,"%Proxy%":typeof Proxy>"u"?hn:Proxy,"%RangeError%":fae,"%ReferenceError%":pae,"%Reflect%":typeof Reflect>"u"?hn:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?hn:Set,"%SetIteratorPrototype%":typeof Set>"u"||!np||!Ti?hn:Ti(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?hn:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":np&&Ti?Ti(""[Symbol.iterator]()):hn,"%Symbol%":np?Symbol:hn,"%SyntaxError%":$m,"%ThrowTypeError%":gae,"%TypedArray%":yae,"%TypeError%":mm,"%Uint8Array%":typeof Uint8Array>"u"?hn:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?hn:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?hn:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?hn:Uint32Array,"%URIError%":mae,"%WeakMap%":typeof WeakMap>"u"?hn:WeakMap,"%WeakRef%":typeof WeakRef>"u"?hn:WeakRef,"%WeakSet%":typeof WeakSet>"u"?hn:WeakSet};if(Ti)try{null.error}catch(t){var _ae=Ti(Ti(t));Bh["%Error.prototype%"]=_ae}var bae=function t(e){var n;if(e==="%AsyncFunction%")n=pR("async function () {}");else if(e==="%GeneratorFunction%")n=pR("function* () {}");else if(e==="%AsyncGeneratorFunction%")n=pR("async function* () {}");else if(e==="%AsyncGenerator%"){var r=t("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&Ti&&(n=Ti(i.prototype))}return Bh[e]=n,n},C5={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},x1=Uk,uw=uae,xae=x1.call(Function.call,Array.prototype.concat),Eae=x1.call(Function.apply,Array.prototype.splice),A5=x1.call(Function.call,String.prototype.replace),dw=x1.call(Function.call,String.prototype.slice),wae=x1.call(Function.call,RegExp.prototype.exec),Tae=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,Sae=/\\(\\)?/g,Cae=function(e){var n=dw(e,0,1),r=dw(e,-1);if(n==="%"&&r!=="%")throw new $m("invalid intrinsic syntax, expected closing `%`");if(r==="%"&&n!=="%")throw new $m("invalid intrinsic syntax, expected opening `%`");var i=[];return A5(e,Tae,function(s,o,a,l){i[i.length]=a?A5(l,Sae,"$1"):o||s}),i},Aae=function(e,n){var r=e,i;if(uw(C5,r)&&(i=C5[r],r="%"+i[0]+"%"),uw(Bh,r)){var s=Bh[r];if(s===Pp&&(s=bae(r)),typeof s>"u"&&!n)throw new mm("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:r,value:s}}throw new $m("intrinsic "+e+" does not exist!")},Tg=function(e,n){if(typeof e!="string"||e.length===0)throw new mm("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof n!="boolean")throw new mm('"allowMissing" argument must be a boolean');if(wae(/^%?[^%]*%?$/,e)===null)throw new $m("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var r=Cae(e),i=r.length>0?r[0]:"",s=Aae("%"+i+"%",n),o=s.name,a=s.value,l=!1,c=s.alias;c&&(i=c[0],Eae(r,xae([0,1],c)));for(var u=1,d=!0;u<r.length;u+=1){var h=r[u],f=dw(h,0,1),p=dw(h,-1);if((f==='"'||f==="'"||f==="`"||p==='"'||p==="'"||p==="`")&&f!==p)throw new $m("property names with quotes must have matching quotes");if((h==="constructor"||!d)&&(l=!0),i+="."+h,o="%"+i+"%",uw(Bh,o))a=Bh[o];else if(a!=null){if(!(h in a)){if(!n)throw new mm("base intrinsic for "+e+" exists, but the property is not available.");return}if(Dh&&u+1>=r.length){var m=Dh(a,h);d=!!m,d&&"get"in m&&!("originalValue"in m.get)?a=m.get:a=a[h]}else d=uw(a,h),a=a[h];d&&!l&&(Bh[o]=a)}}return a},KW={exports:{}},gR,R5;function zk(){if(R5)return gR;R5=1;var t=Tg,e=t("%Object.defineProperty%",!0)||!1;if(e)try{e({},"a",{value:1})}catch{e=!1}return gR=e,gR}var Rae=Tg,Jx=Rae("%Object.getOwnPropertyDescriptor%",!0);if(Jx)try{Jx([],"length")}catch{Jx=null}var qW=Jx,P5=zk(),Pae=XW,rp=b1,I5=qW,Iae=function(e,n,r){if(!e||typeof e!="object"&&typeof e!="function")throw new rp("`obj` must be an object or a function`");if(typeof n!="string"&&typeof n!="symbol")throw new rp("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new rp("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new rp("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new rp("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new rp("`loose`, if provided, must be a boolean");var i=arguments.length>3?arguments[3]:null,s=arguments.length>4?arguments[4]:null,o=arguments.length>5?arguments[5]:null,a=arguments.length>6?arguments[6]:!1,l=!!I5&&I5(e,n);if(P5)P5(e,n,{configurable:o===null&&l?l.configurable:!o,enumerable:i===null&&l?l.enumerable:!i,value:r,writable:s===null&&l?l.writable:!s});else if(a||!i&&!s&&!o)e[n]=r;else throw new Pae("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},NI=zk(),ZW=function(){return!!NI};ZW.hasArrayLengthDefineBug=function(){if(!NI)return null;try{return NI([],"length",{value:1}).length!==1}catch{return!0}};var Mae=ZW,Lae=Tg,M5=Iae,Oae=Mae(),L5=qW,O5=b1,kae=Lae("%Math.floor%"),Nae=function(e,n){if(typeof e!="function")throw new O5("`fn` is not a function");if(typeof n!="number"||n<0||n>4294967295||kae(n)!==n)throw new O5("`length` must be a positive 32-bit integer");var r=arguments.length>2&&!!arguments[2],i=!0,s=!0;if("length"in e&&L5){var o=L5(e,"length");o&&!o.configurable&&(i=!1),o&&!o.writable&&(s=!1)}return(i||s||!r)&&(Oae?M5(e,"length",n,!0,!0):M5(e,"length",n)),e};(function(t){var e=Uk,n=Tg,r=Nae,i=b1,s=n("%Function.prototype.apply%"),o=n("%Function.prototype.call%"),a=n("%Reflect.apply%",!0)||e.call(o,s),l=zk(),c=n("%Math.max%");t.exports=function(h){if(typeof h!="function")throw new i("a function is required");var f=a(e,o,arguments);return r(f,1+c(0,h.length-(arguments.length-1)),!0)};var u=function(){return a(e,s,arguments)};l?l(t.exports,"apply",{value:u}):t.exports.apply=u})(KW);var Dae=KW.exports,QW=Tg,JW=Dae,Bae=JW(QW("String.prototype.indexOf")),Fae=function(e,n){var r=QW(e,!!n);return typeof r=="function"&&Bae(e,".prototype.")>-1?JW(r):r};const Fh=.01;function hf(t,e,n){return t&&e?n?Coe(t,e,{units:"kilometers"}):Math.sqrt(((t[0]-e[0])*Fh)**2+((t[1]-e[1])*Fh)**2):Number.NaN}function Uae(t,e,n){const r=zm(t,e),i=zm(t,n);return hf(r==null?void 0:r.point,i==null?void 0:i.point,!1)}function e9(t,e){const n=t.locations.length/e;let r=t.locationSerialNumber;const i=Rv(e).map(a=>{const l=1/Fh/(2*Math.sin(Math.PI/e)),c=-1*(2*Math.PI*a)/e-Math.PI/2,u=l*Math.cos(c),d=l*Math.sin(c);if(a===0&&e===1)return{...t.locations[0],point:[0,0],manufactureShare:1,agricultureShare:1};if(a<t.locations.length){const h=t.locations[a];return{...h,point:[u,d],manufactureShare:n*h.manufactureShare,agricultureShare:n*h.agricultureShare}}else return GW({id:r++,label:Rf(),point:[u,d],share:1/e,randomize:!0})}),s=t.parameterSet.units==="degrees",o=e===1?[]:Rv(e).map(a=>{const[l,c]=a!==e-1?[i[a],i[a+1]]:[i[0],i[e-1]];return{source:l.id,target:c.id,distance:hf(l.point,c.point,s)}});return{locations:i,edges:o,locationSerialNumber:r,addedIndices:e>t.locations.length?Rv(e-t.locations.length).map(a=>a+t.locations.length):[]}}function zae(t,e,n,r){const i=t[t.length-1];return n.map(s=>({source:t[s].id,target:i.id,distance:hf(t[s].point,i.point,r)}))}const $ae=.5;function jae(t,e,n){const r="_",i=new Set(e.map(c=>`${c.source}${r}${c.target}`)),s=[];for(let c=0;c<t.length;c++)for(let u=c+1;u<t.length;u++)i.has(`${c}${r}${u}`)||s.push(c+r+u);const o=new Set(t.map(c=>c.id)),a=Eoe(s).filter((c,u)=>u<t.length*$ae).map(c=>{const[u,d]=c.split(r).map(f=>parseInt(f)),h=hf(t[u].point,t[d].point,n);return{source:t[u].id,target:t[d].id,distance:h}});a.forEach(c=>{o.delete(c.source),o.delete(c.target)}),o.size;const l=[...o].map(c=>{const u=t.filter(d=>d.id!==c).map(d=>({location:d,distance:hf(d.point,t[c].point,n)})).reduce((d,h)=>d===null||d.distance>h.distance?h:d,null);return u?c<(u==null?void 0:u.location.id)?{source:c,target:u==null?void 0:u.location.id,id:c,distance:u==null?void 0:u.distance}:{source:u==null?void 0:u.location.id,id:c,target:c,distance:u==null?void 0:u.distance}:null}).filter(c=>c!==null);return e.concat(a).concat(l)}function t9(t,e,n){const r=n!==void 0?n:t.locations.length+1,i=new jW(t.locations.length),s=t.locations.length/r,o=t.locations.map(_=>({..._,manufactureShare:_.manufactureShare*s,agricultureShare:_.agricultureShare*s}));let a=i.random()*2*Math.PI,l=0,c=1/Fh;const u=[];let d=t.locationSerialNumber;for(let _=t.locations.length;_<r;_++){l=2*i.random()-.5,a+=2*Math.PI*(i.random()-.5)/2,c=Math.min(50,Math.max(400,c+l));const{x:y,y:x}=t.locations.length===0&&_===0?{x:0,y:0}:_<t.locations.length?{x:t.locations[_].point[0],y:t.locations[_].point[1]}:_==t.locations.length?{x:t.locations[t.locations.length-1].point[0]+c*Math.cos(a),y:t.locations[t.locations.length-1].point[1]+c*Math.sin(a)}:{x:u[_-t.locations.length-1].point[0]+c*Math.cos(a),y:u[_-t.locations.length-1].point[1]+c*Math.sin(a)},b=GW({id:d++,label:Rf(),point:[y,x],share:1/r,randomize:!0});u.push(b)}const h=[...o,...u],f=t.parameterSet.units==="degrees",p=n===void 0?zae(h,t.edges,e,f):jae(h,t.edges,f),m=[...t.edges,...p];return{locations:h,edges:m,locationSerialNumber:d,addedIndices:Rv(u.length).map(_=>_+o.length)}}const $k=(t,e,n)=>{switch(console.log(t),t.parameterSet.type){case"Racetrack":return e9(t,n);case"Graph":return t9(t,e,n);default:return{...t,addedIndices:[]}}};function Gae(t,e){const n=new Set(e.locations.filter((o,a)=>t<=a).map(o=>o.id)),r=e.locations.length/t,i=e.locations.filter((o,a)=>a<t).map(o=>({...o,manufactureShare:o.manufactureShare*r,agricultureShare:o.agricultureShare*r})),s=e.edges.filter(o=>!n.has(o.source)&&!n.has(o.target));return{locations:i,edges:s,locationSerialNumber:e.locationSerialNumber}}const Hae=(t,e)=>{switch(e.parameterSet.type){case"Racetrack":return e9(e,t);case"Graph":return Gae(t,e);default:throw new Error("invalid type: "+e.parameterSet.type)}};var Lt=(t=>(t.Racetrack="Racetrack",t.Graph="Graph",t.RealWorld="RealWorld",t))(Lt||{});const jm={[Lt.Racetrack]:[{caseId:"Racetrack-0",title:"Base case",description:"Base case (K=12, =0.2, =2, =4). All workers usually end up in several(one or more) concentrations.",type:Lt.Racetrack,numLocations:12,manufactureShare:.2,transportationCost:2,elasticitySubstitution:4,units:"kilometers"},{caseId:"Racetrack-1",title:"Case i",description:"Less differentiated products (K=12, =0.2, =2, =2). In this case (in which firms have more market power, and in which the equilibrium degree of scale economies is also larger), all runs produced only a single location.",type:Lt.Racetrack,numLocations:12,manufactureShare:.2,transportationCost:2,elasticitySubstitution:2,units:"kilometers"},{caseId:"Racetrack-2",title:"Case ii",description:"A larger manufacturing share (K=12, =0.4, =2, =4). In this case, in which one would expect the backward and forward linkages driving agglomeration to be stronger, we also consistently get only a single location.",type:Lt.Racetrack,numLocations:12,manufactureShare:.4,transportationCost:2,elasticitySubstitution:4,units:"kilometers"},{caseId:"Racetrack-3",title:"Case iii",description:"Lower transport costs (K=12, =0.2, =1, =4). In this case we would expect there to be less incentive to set up multiple urban centers, and again all ten runs produce only a single location.",type:Lt.Racetrack,numLocations:12,manufactureShare:.2,transportationCost:1,elasticitySubstitution:4,units:"kilometers"}],[Lt.Graph]:[{caseId:"Graph-0",title:"Base case",description:"Base case (K=12, =0.2, =2, =4). All workers usually end up in several(one or more) concentrations.",type:Lt.Graph,numLocations:12,manufactureShare:.2,transportationCost:2,elasticitySubstitution:4,units:"kilometers"},{caseId:"Graph-1",title:"Case A",description:"Less differentiated products (K=12, =0.2, =2, =2). In this case (in which firms have more market power, and in which the equilibrium degree of scale economies is also larger), all runs produced only a single location.",type:Lt.Graph,numLocations:12,manufactureShare:.2,transportationCost:2,elasticitySubstitution:2,units:"kilometers"},{caseId:"Graph-2",title:"Case B",description:"A larger manufacturing share (K=12, =0.4, =2, =4). In this case, in which one would expect the backward and forward linkages driving agglomeration to be stronger, we also consistently get only a single location.",type:Lt.Graph,numLocations:12,manufactureShare:.4,transportationCost:2,elasticitySubstitution:4,units:"kilometers"},{caseId:"Graph-3",title:"Case C",description:"Lower transport costs (K=12, =0.2, =1, =4). In this case we would expect there to be less incentive to set up multiple urban centers, and again all ten runs produce only a single location.",type:Lt.Graph,numLocations:12,manufactureShare:.2,transportationCost:1,elasticitySubstitution:4,units:"kilometers"}],[Lt.RealWorld]:[{caseId:"RealWorld-0",title:"IDE-GSM 0",description:"sample 0",type:Lt.RealWorld,numLocations:4,manufactureShare:.2,transportationCost:2,elasticitySubstitution:4,units:"degrees"},{caseId:"RealWorld-1",title:"IDE-GSM 1",description:"sample 1",type:Lt.RealWorld,numLocations:10,manufactureShare:.2,transportationCost:2,elasticitySubstitution:4,units:"degrees"}]},vR=window.location.hash,Vae=vR.startsWith("/"+Lt.Racetrack)?Lt.Racetrack:vR.startsWith("/"+Lt.Graph)?Lt.Graph:vR.startsWith("/"+Lt.RealWorld)?Lt.RealWorld:Lt.Racetrack,DI=jm[Vae][0],or=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Jr=Object.keys,ds=Array.isArray;function Ls(t,e){return typeof e!="object"||Jr(e).forEach(function(n){t[n]=e[n]}),t}typeof Promise>"u"||or.Promise||(or.Promise=Promise);const Cy=Object.getPrototypeOf,Wae={}.hasOwnProperty;function Ro(t,e){return Wae.call(t,e)}function Gm(t,e){typeof e=="function"&&(e=e(Cy(t))),(typeof Reflect>"u"?Jr:Reflect.ownKeys)(e).forEach(n=>{Pc(t,n,e[n])})}const n9=Object.defineProperty;function Pc(t,e,n,r){n9(t,e,Ls(n&&Ro(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},r))}function gm(t){return{from:function(e){return t.prototype=Object.create(e.prototype),Pc(t.prototype,"constructor",t),{extend:Gm.bind(null,t.prototype)}}}}const Xae=Object.getOwnPropertyDescriptor;function jk(t,e){let n;return Xae(t,e)||(n=Cy(t))&&jk(n,e)}const Yae=[].slice;function hw(t,e,n){return Yae.call(t,e,n)}function r9(t,e){return e(t)}function K0(t){if(!t)throw new Error("Assertion Failed")}function i9(t){or.setImmediate?setImmediate(t):setTimeout(t,0)}function s9(t,e){return t.reduce((n,r,i)=>{var s=e(r,i);return s&&(n[s[0]]=s[1]),n},{})}function Ic(t,e){if(typeof e=="string"&&Ro(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],r=0,i=e.length;r<i;++r){var s=Ic(t,e[r]);n.push(s)}return n}var o=e.indexOf(".");if(o!==-1){var a=t[e.substr(0,o)];return a===void 0?void 0:Ic(a,e.substr(o+1))}}function Wa(t,e,n){if(t&&e!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){K0(typeof n!="string"&&"length"in n);for(var r=0,i=e.length;r<i;++r)Wa(t,e[r],n[r])}else{var s=e.indexOf(".");if(s!==-1){var o=e.substr(0,s),a=e.substr(s+1);if(a==="")n===void 0?ds(t)&&!isNaN(parseInt(o))?t.splice(o,1):delete t[o]:t[o]=n;else{var l=t[o];l&&Ro(t,o)||(l=t[o]={}),Wa(l,a,n)}}else n===void 0?ds(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function o9(t){var e={};for(var n in t)Ro(t,n)&&(e[n]=t[n]);return e}const Kae=[].concat;function a9(t){return Kae.apply([],t)}const l9="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(a9([8,16,32,64].map(t=>["Int","Uint","Float"].map(e=>e+t+"Array")))).filter(t=>or[t]),qae=l9.map(t=>or[t]);s9(l9,t=>[t,!0]);let Mu=null;function E1(t){Mu=typeof WeakMap<"u"&&new WeakMap;const e=BI(t);return Mu=null,e}function BI(t){if(!t||typeof t!="object")return t;let e=Mu&&Mu.get(t);if(e)return e;if(ds(t)){e=[],Mu&&Mu.set(t,e);for(var n=0,r=t.length;n<r;++n)e.push(BI(t[n]))}else if(qae.indexOf(t.constructor)>=0)e=t;else{const s=Cy(t);for(var i in e=s===Object.prototype?{}:Object.create(s),Mu&&Mu.set(t,e),t)Ro(t,i)&&(e[i]=BI(t[i]))}return e}const{toString:Zae}={};function FI(t){return Zae.call(t).slice(8,-1)}const UI=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Qae=typeof UI=="symbol"?function(t){var e;return t!=null&&(e=t[UI])&&e.apply(t)}:function(){return null},Ip={};function bc(t){var e,n,r,i;if(arguments.length===1){if(ds(t))return t.slice();if(this===Ip&&typeof t=="string")return[t];if(i=Qae(t)){for(n=[];!(r=i.next()).done;)n.push(r.value);return n}if(t==null)return[t];if(typeof(e=t.length)=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}const Gk=typeof Symbol<"u"?t=>t[Symbol.toStringTag]==="AsyncFunction":()=>!1;var Zl=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function c9(t,e){Zl=t,u9=e}var u9=()=>!0;const Jae=!new Error("").stack;function Pf(){if(Jae)try{throw Pf.arguments,new Error}catch(t){return t}return new Error}function zI(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(u9).map(r=>`
`+r).join("")):""}var d9=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Hk=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(d9),ele={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function vm(t,e){this._e=Pf(),this.name=t,this.message=e}function h9(t,e){return t+". Errors: "+Object.keys(e).map(n=>e[n].toString()).filter((n,r,i)=>i.indexOf(n)===r).join(`
`)}function fw(t,e,n,r){this._e=Pf(),this.failures=e,this.failedKeys=r,this.successCount=n,this.message=h9(t,e)}function Pv(t,e){this._e=Pf(),this.name="BulkError",this.failures=Object.keys(e).map(n=>e[n]),this.failuresByPos=e,this.message=h9(t,e)}gm(vm).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+zI(this._e,2))}},toString:function(){return this.name+": "+this.message}}),gm(fw).from(vm),gm(Pv).from(vm);var Vk=Hk.reduce((t,e)=>(t[e]=e+"Error",t),{});const tle=vm;var Vt=Hk.reduce((t,e)=>{var n=e+"Error";function r(i,s){this._e=Pf(),this.name=n,i?typeof i=="string"?(this.message=`${i}${s?`
 `+s:""}`,this.inner=s||null):typeof i=="object"&&(this.message=`${i.name} ${i.message}`,this.inner=i):(this.message=ele[e]||n,this.inner=null)}return gm(r).from(tle),t[e]=r,t},{});Vt.Syntax=SyntaxError,Vt.Type=TypeError,Vt.Range=RangeError;var k5=d9.reduce((t,e)=>(t[e+"Error"]=Vt[e],t),{}),eE=Hk.reduce((t,e)=>(["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=Vt[e]),t),{});function Xn(){}function Ay(t){return t}function nle(t,e){return t==null||t===Ay?e:function(n){return e(t(n))}}function ff(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function rle(t,e){return t===Xn?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?ff(r,this.onsuccess):r),i&&(this.onerror=this.onerror?ff(i,this.onerror):i),s!==void 0?s:n}}function ile(t,e){return t===Xn?e:function(){t.apply(this,arguments);var n=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?ff(n,this.onsuccess):n),r&&(this.onerror=this.onerror?ff(r,this.onerror):r)}}function sle(t,e){return t===Xn?e:function(n){var r=t.apply(this,arguments);Ls(n,r);var i=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?ff(i,this.onsuccess):i),s&&(this.onerror=this.onerror?ff(s,this.onerror):s),r===void 0?o===void 0?void 0:o:Ls(r,o)}}function ole(t,e){return t===Xn?e:function(){return e.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function Wk(t,e){return t===Xn?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var r=this,i=arguments.length,s=new Array(i);i--;)s[i]=arguments[i];return n.then(function(){return e.apply(r,s)})}return e.apply(this,arguments)}}eE.ModifyError=fw,eE.DexieError=vm,eE.BulkError=Pv;var Ry={};const f9=100,[$I,pw,jI]=typeof Promise>"u"?[]:(()=>{let t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,Cy(t),t];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,Cy(e),t]})(),p9=pw&&pw.then,tE=$I&&$I.constructor,Xk=!!jI;var GI=!1,ale=jI?()=>{jI.then(_b)}:or.setImmediate?setImmediate.bind(null,_b):or.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver(()=>{_b(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(_b,0)},Iv=function(t,e){q0.push([t,e]),mw&&(ale(),mw=!1)},HI=!0,mw=!0,Uh=[],nE=[],VI=null,WI=Ay,ym={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:B5,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(t=>{try{B5(t[0],t[1])}catch{}})}},Dt=ym,q0=[],zh=0,rE=[];function mt(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=Xn,this._lib=!1;var e=this._PSD=Dt;if(Zl&&(this._stackHolder=Pf(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==Ry)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&YI(this,this._value))}this._state=null,this._value=null,++e.ref,g9(this,t)}const XI={get:function(){var t=Dt,e=gw;function n(r,i){var s=!t.global&&(t!==Dt||e!==gw);const o=s&&!Fc();var a=new mt((l,c)=>{Yk(this,new m9(vw(r,t,s,o),vw(i,t,s,o),l,c,t))});return Zl&&_9(a,this),a}return n.prototype=Ry,n},set:function(t){Pc(this,"then",t&&t.prototype===Ry?XI:{get:function(){return t},set:XI.set})}};function m9(t,e,n,r,i){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=r,this.psd=i}function g9(t,e){try{e(n=>{if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var r=t._lib&&w1();n&&typeof n.then=="function"?g9(t,(i,s)=>{n instanceof mt?n._then(i,s):n.then(i,s)}):(t._state=!0,t._value=n,v9(t)),r&&T1()}},YI.bind(null,t))}catch(n){YI(t,n)}}function YI(t,e){if(nE.push(e),t._state===null){var n=t._lib&&w1();e=WI(e),t._state=!1,t._value=e,Zl&&e!==null&&typeof e=="object"&&!e._promise&&function(r,i,s){try{r.apply(null,s)}catch(o){i&&i(o)}}(()=>{var r=jk(e,"stack");e._promise=t,Pc(e,"stack",{get:()=>GI?r&&(r.get?r.get.apply(e):r.value):t.stack})}),function(r){Uh.some(i=>i._value===r._value)||Uh.push(r)}(t),v9(t),n&&T1()}}function v9(t){var e=t._listeners;t._listeners=[];for(var n=0,r=e.length;n<r;++n)Yk(t,e[n]);var i=t._PSD;--i.ref||i.finalize(),zh===0&&(++zh,Iv(()=>{--zh==0&&Kk()},[]))}function Yk(t,e){if(t._state!==null){var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++zh,Iv(lle,[n,t,e])}else t._listeners.push(e)}function lle(t,e,n){try{VI=e;var r,i=e._value;e._state?r=t(i):(nE.length&&(nE=[]),r=t(i),nE.indexOf(i)===-1&&function(s){for(var o=Uh.length;o;)if(Uh[--o]._value===s._value)return void Uh.splice(o,1)}(e)),n.resolve(r)}catch(s){n.reject(s)}finally{VI=null,--zh==0&&Kk(),--n.psd.ref||n.psd.finalize()}}function y9(t,e,n){if(e.length===n)return e;var r="";if(t._state===!1){var i,s,o=t._value;o!=null?(i=o.name||"Error",s=o.message||o,r=zI(o,0)):(i=o,s=""),e.push(i+(s?": "+s:"")+r)}return Zl&&((r=zI(t._stackHolder,2))&&e.indexOf(r)===-1&&e.push(r),t._prev&&y9(t._prev,e,n)),e}function _9(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function _b(){w1()&&T1()}function w1(){var t=HI;return HI=!1,mw=!1,t}function T1(){var t,e,n;do for(;q0.length>0;)for(t=q0,q0=[],n=t.length,e=0;e<n;++e){var r=t[e];r[0].apply(null,r[1])}while(q0.length>0);HI=!0,mw=!0}function Kk(){var t=Uh;Uh=[],t.forEach(r=>{r._PSD.onunhandled.call(null,r._value,r)});for(var e=rE.slice(0),n=e.length;n;)e[--n]()}function bb(t){return new mt(Ry,!1,t)}function vr(t,e){var n=Dt;return function(){var r=w1(),i=Dt;try{return yd(n,!0),t.apply(this,arguments)}catch(s){e&&e(s)}finally{yd(i,!1),r&&T1()}}}Gm(mt.prototype,{then:XI,_then:function(t,e){Yk(this,new m9(null,null,t,e,Dt))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,r=>r instanceof e?n(r):bb(r)):this.then(null,r=>r&&r.name===e?n(r):bb(r))},finally:function(t){return this.then(e=>(t(),e),e=>(t(),bb(e)))},stack:{get:function(){if(this._stack)return this._stack;try{GI=!0;var t=y9(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{GI=!1}}},timeout:function(t,e){return t<1/0?new mt((n,r)=>{var i=setTimeout(()=>r(new Vt.Timeout(e)),t);this.then(n,r).finally(clearTimeout.bind(null,i))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Pc(mt.prototype,Symbol.toStringTag,"Dexie.Promise"),ym.env=b9(),Gm(mt,{all:function(){var t=bc.apply(null,arguments).map(xb);return new mt(function(e,n){t.length===0&&e([]);var r=t.length;t.forEach((i,s)=>mt.resolve(i).then(o=>{t[s]=o,--r||e(t)},n))})},resolve:t=>{if(t instanceof mt)return t;if(t&&typeof t.then=="function")return new mt((n,r)=>{t.then(n,r)});var e=new mt(Ry,!0,t);return _9(e,VI),e},reject:bb,race:function(){var t=bc.apply(null,arguments).map(xb);return new mt((e,n)=>{t.map(r=>mt.resolve(r).then(e,n))})},PSD:{get:()=>Dt,set:t=>Dt=t},totalEchoes:{get:()=>gw},newPSD:vd,usePSD:Cg,scheduler:{get:()=>Iv,set:t=>{Iv=t}},rejectionMapper:{get:()=>WI,set:t=>{WI=t}},follow:(t,e)=>new mt((n,r)=>vd((i,s)=>{var o=Dt;o.unhandleds=[],o.onunhandled=s,o.finalize=ff(function(){(function(a){function l(){a(),rE.splice(rE.indexOf(l),1)}rE.push(l),++zh,Iv(()=>{--zh==0&&Kk()},[])})(()=>{this.unhandleds.length===0?i():s(this.unhandleds[0])})},o.finalize),t()},e,n,r))}),tE&&(tE.allSettled&&Pc(mt,"allSettled",function(){const t=bc.apply(null,arguments).map(xb);return new mt(e=>{t.length===0&&e([]);let n=t.length;const r=new Array(n);t.forEach((i,s)=>mt.resolve(i).then(o=>r[s]={status:"fulfilled",value:o},o=>r[s]={status:"rejected",reason:o}).then(()=>--n||e(r)))})}),tE.any&&typeof AggregateError<"u"&&Pc(mt,"any",function(){const t=bc.apply(null,arguments).map(xb);return new mt((e,n)=>{t.length===0&&n(new AggregateError([]));let r=t.length;const i=new Array(r);t.forEach((s,o)=>mt.resolve(s).then(a=>e(a),a=>{i[o]=a,--r||n(new AggregateError(i))}))})}));const us={awaits:0,echoes:0,id:0};var cle=0,iE=[],yR=0,gw=0,ule=0;function vd(t,e,n,r){var i=Dt,s=Object.create(i);s.parent=i,s.ref=0,s.global=!1,s.id=++ule;var o=ym.env;s.env=Xk?{Promise:mt,PromiseProp:{value:mt,configurable:!0,writable:!0},all:mt.all,race:mt.race,allSettled:mt.allSettled,any:mt.any,resolve:mt.resolve,reject:mt.reject,nthen:N5(o.nthen,s),gthen:N5(o.gthen,s)}:{},e&&Ls(s,e),++i.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=Cg(s,t,n,r);return s.ref===0&&s.finalize(),a}function Sg(){return us.id||(us.id=++cle),++us.awaits,us.echoes+=f9,us.id}function Fc(){return!!us.awaits&&(--us.awaits==0&&(us.id=0),us.echoes=us.awaits*f9,!0)}function xb(t){return us.echoes&&t&&t.constructor===tE?(Sg(),t.then(e=>(Fc(),e),e=>(Fc(),hi(e)))):t}function dle(t){++gw,us.echoes&&--us.echoes!=0||(us.echoes=us.id=0),iE.push(Dt),yd(t,!0)}function hle(){var t=iE[iE.length-1];iE.pop(),yd(t,!1)}function yd(t,e){var n=Dt;if((e?!us.echoes||yR++&&t===Dt:!yR||--yR&&t===Dt)||x9(e?dle.bind(null,t):hle),t!==Dt&&(Dt=t,n===ym&&(ym.env=b9()),Xk)){var r=ym.env.Promise,i=t.env;pw.then=i.nthen,r.prototype.then=i.gthen,(n.global||t.global)&&(Object.defineProperty(or,"Promise",i.PromiseProp),r.all=i.all,r.race=i.race,r.resolve=i.resolve,r.reject=i.reject,i.allSettled&&(r.allSettled=i.allSettled),i.any&&(r.any=i.any))}}function b9(){var t=or.Promise;return Xk?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(or,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:pw.then,gthen:t.prototype.then}:{}}function Cg(t,e,n,r,i){var s=Dt;try{return yd(t,!0),e(n,r,i)}finally{yd(s,!1)}}function x9(t){p9.call($I,t)}function vw(t,e,n,r){return typeof t!="function"?t:function(){var i=Dt;n&&Sg(),yd(e,!0);try{return t.apply(this,arguments)}finally{yd(i,!1),r&&x9(Fc)}}}function N5(t,e){return function(n,r){return t.call(this,vw(n,e),vw(r,e))}}(""+p9).indexOf("[native code]")===-1&&(Sg=Fc=Xn);const D5="unhandledrejection";function B5(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var r,i={promise:e,reason:t};if(or.document&&document.createEvent?((r=document.createEvent("Event")).initEvent(D5,!0,!0),Ls(r,i)):or.CustomEvent&&Ls(r=new CustomEvent(D5,{detail:i}),i),r&&or.dispatchEvent&&(dispatchEvent(r),!or.PromiseRejectionEvent&&or.onunhandledrejection))try{or.onunhandledrejection(r)}catch{}Zl&&r&&!r.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch{}}var hi=mt.reject;function KI(t,e,n,r){if(t.idbdb&&(t._state.openComplete||Dt.letThrough||t._vip)){var i=t._createTransaction(e,n,t._dbSchema);try{i.create(),t._state.PR1398_maxLoop=3}catch(s){return s.name===Vk.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>KI(t,e,n,r))):hi(s)}return i._promise(e,(s,o)=>vd(()=>(Dt.trans=i,r(s,o,i)))).then(s=>i._completion.then(()=>s))}if(t._state.openComplete)return hi(new Vt.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return hi(new Vt.DatabaseClosed);t.open().catch(Xn)}return t._state.dbReadyPromise.then(()=>KI(t,e,n,r))}const F5="3.2.5",Rh="",qI=-1/0,ac="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",E9="String expected.",Mv=[],lS=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),fle=lS,ple=lS,w9=t=>!/(dexie\.js|dexie\.min\.js)/.test(t),cS="__dbnames",_R="readonly",bR="readwrite";function pf(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}const T9={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Eb(t){return typeof t!="string"||/\./.test(t)?e=>e:e=>(e[t]===void 0&&t in e&&delete(e=E1(e))[t],e)}class mle{_trans(e,n,r){const i=this._tx||Dt.trans,s=this.name;function o(l,c,u){if(!u.schema[s])throw new Vt.NotFound("Table "+s+" not part of transaction");return n(u.idbtrans,u)}const a=w1();try{return i&&i.db===this.db?i===Dt.trans?i._promise(e,o,r):vd(()=>i._promise(e,o,r),{trans:i,transless:Dt.transless||Dt}):KI(this.db,e,[this.name],o)}finally{a&&T1()}}get(e,n){return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",r=>this.core.get({trans:r,key:e}).then(i=>this.hook.reading.fire(i))).then(n)}where(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(ds(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const n=Jr(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);const r=this.schema.indexes.concat(this.schema.primKey).filter(c=>{if(c.compound&&n.every(u=>c.keyPath.indexOf(u)>=0)){for(let u=0;u<n.length;++u)if(n.indexOf(c.keyPath[u])===-1)return!1;return!0}return!1}).sort((c,u)=>c.keyPath.length-u.keyPath.length)[0];if(r&&this.db._maxKey!==Rh){const c=r.keyPath.slice(0,n.length);return this.where(c).equals(c.map(u=>e[u]))}!r&&Zl&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:i}=this.schema,s=this.db._deps.indexedDB;function o(c,u){try{return s.cmp(c,u)===0}catch{return!1}}const[a,l]=n.reduce(([c,u],d)=>{const h=i[d],f=e[d];return[c||h,c||!h?pf(u,h&&h.multi?p=>{const m=Ic(p,d);return ds(m)&&m.some(_=>o(f,_))}:p=>o(f,Ic(p,d))):u]},[null,null]);return a?this.where(a.name).equals(e[a.keyPath]).filter(l):r?this.filter(l):this.where(n).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,ds(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const n=r=>{if(!r)return r;const i=Object.create(e.prototype);for(var s in r)if(Ro(r,s))try{i[s]=r[s]}catch{}return i};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e}defineClass(){return this.mapToClass(function(e){Ls(this,e)})}add(e,n){const{auto:r,keyPath:i}=this.schema.primKey;let s=e;return i&&r&&(s=Eb(i)(e)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"add",keys:n!=null?[n]:null,values:[s]})).then(o=>o.numFailures?mt.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{Wa(e,i,o)}catch{}return o})}update(e,n){if(typeof e!="object"||ds(e))return this.where(":id").equals(e).modify(n);{const r=Ic(e,this.schema.primKey.keyPath);if(r===void 0)return hi(new Vt.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?Jr(n).forEach(i=>{Wa(e,i,n[i])}):n(e,{value:e,primKey:r})}catch{}return this.where(":id").equals(r).modify(n)}}put(e,n){const{auto:r,keyPath:i}=this.schema.primKey;let s=e;return i&&r&&(s=Eb(i)(e)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"put",values:[s],keys:n!=null?[n]:null})).then(o=>o.numFailures?mt.reject(o.failures[0]):o.lastResult).then(o=>{if(i)try{Wa(e,i,o)}catch{}return o})}delete(e){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[e]})).then(n=>n.numFailures?mt.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:T9})).then(e=>e.numFailures?mt.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",n=>this.core.getMany({keys:e,trans:n}).then(r=>r.map(i=>this.hook.reading.fire(i))))}bulkAdd(e,n,r){const i=Array.isArray(n)?n:void 0,s=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:l}=this.schema.primKey;if(l&&i)throw new Vt.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new Vt.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let u=l&&a?e.map(Eb(l)):e;return this.core.mutate({trans:o,type:"add",keys:i,values:u,wantResults:s}).then(({numFailures:d,results:h,lastResult:f,failures:p})=>{if(d===0)return s?h:f;throw new Pv(`${this.name}.bulkAdd(): ${d} of ${c} operations failed`,p)})})}bulkPut(e,n,r){const i=Array.isArray(n)?n:void 0,s=(r=r||(i?void 0:n))?r.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:l}=this.schema.primKey;if(l&&i)throw new Vt.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(i&&i.length!==e.length)throw new Vt.InvalidArgument("Arguments objects and keys must have the same length");const c=e.length;let u=l&&a?e.map(Eb(l)):e;return this.core.mutate({trans:o,type:"put",keys:i,values:u,wantResults:s}).then(({numFailures:d,results:h,lastResult:f,failures:p})=>{if(d===0)return s?h:f;throw new Pv(`${this.name}.bulkPut(): ${d} of ${c} operations failed`,p)})})}bulkDelete(e){const n=e.length;return this._trans("readwrite",r=>this.core.mutate({trans:r,type:"delete",keys:e})).then(({numFailures:r,lastResult:i,failures:s})=>{if(r===0)return i;throw new Pv(`${this.name}.bulkDelete(): ${r} of ${n} operations failed`,s)})}}function Lv(t){var e={},n=function(o,a){if(a){for(var l=arguments.length,c=new Array(l-1);--l;)c[l-1]=arguments[l];return e[o].subscribe.apply(null,c),t}if(typeof o=="string")return e[o]};n.addEventType=s;for(var r=1,i=arguments.length;r<i;++r)s(arguments[r]);return n;function s(o,a,l){if(typeof o!="object"){var c;a||(a=ole),l||(l=Xn);var u={subscribers:[],fire:l,subscribe:function(d){u.subscribers.indexOf(d)===-1&&(u.subscribers.push(d),u.fire=a(u.fire,d))},unsubscribe:function(d){u.subscribers=u.subscribers.filter(function(h){return h!==d}),u.fire=u.subscribers.reduce(a,l)}};return e[o]=n[o]=u,u}Jr(c=o).forEach(function(d){var h=c[d];if(ds(h))s(d,c[d][0],c[d][1]);else{if(h!=="asap")throw new Vt.InvalidArgument("Invalid event config");var f=s(d,Ay,function(){for(var p=arguments.length,m=new Array(p);p--;)m[p]=arguments[p];f.subscribers.forEach(function(_){i9(function(){_.apply(null,m)})})})}})}}function g0(t,e){return gm(e).from({prototype:t}),e}function ip(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function xR(t,e){t.filter=pf(t.filter,e)}function ER(t,e,n){var r=t.replayFilter;t.replayFilter=r?()=>pf(r(),e()):e,t.justLimit=n&&!r}function sE(t,e){if(t.isPrimKey)return e.primaryKey;const n=e.getIndexByKeyPath(t.index);if(!n)throw new Vt.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function U5(t,e,n){const r=sE(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:r,range:t.range}})}function wb(t,e,n,r){const i=t.replayFilter?pf(t.filter,t.replayFilter()):t.filter;if(t.or){const s={},o=(a,l,c)=>{if(!i||i(l,c,h=>l.stop(h),h=>l.fail(h))){var u=l.primaryKey,d=""+u;d==="[object ArrayBuffer]"&&(d=""+new Uint8Array(u)),Ro(s,d)||(s[d]=!0,e(a,l,c))}};return Promise.all([t.or._iterate(o,n),z5(U5(t,r,n),t.algorithm,o,!t.keysOnly&&t.valueMapper)])}return z5(U5(t,r,n),pf(t.algorithm,i),e,!t.keysOnly&&t.valueMapper)}function z5(t,e,n,r){var i=vr(r?(s,o,a)=>n(r(s),o,a):n);return t.then(s=>{if(s)return s.start(()=>{var o=()=>s.continue();e&&!e(s,a=>o=a,a=>{s.stop(a),o=Xn},a=>{s.fail(a),o=Xn})||i(s.value,s,a=>o=a),o()})})}function Rs(t,e){try{const n=$5(t),r=$5(e);if(n!==r)return n==="Array"?1:r==="Array"?-1:n==="binary"?1:r==="binary"?-1:n==="string"?1:r==="string"?-1:n==="Date"?1:r!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return function(i,s){const o=i.length,a=s.length,l=o<a?o:a;for(let c=0;c<l;++c)if(i[c]!==s[c])return i[c]<s[c]?-1:1;return o===a?0:o<a?-1:1}(j5(t),j5(e));case"Array":return function(i,s){const o=i.length,a=s.length,l=o<a?o:a;for(let c=0;c<l;++c){const u=Rs(i[c],s[c]);if(u!==0)return u}return o===a?0:o<a?-1:1}(t,e)}}catch{}return NaN}function $5(t){const e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";const n=FI(t);return n==="ArrayBuffer"?"binary":n}function j5(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}class gle{_read(e,n){var r=this._ctx;return r.error?r.table._trans(null,hi.bind(null,r.error)):r.table._trans("readonly",e).then(n)}_write(e){var n=this._ctx;return n.error?n.table._trans(null,hi.bind(null,n.error)):n.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var n=this._ctx;n.algorithm=pf(n.algorithm,e)}_iterate(e,n){return wb(this._ctx,e,n,this._ctx.table.core)}clone(e){var n=Object.create(this.constructor.prototype),r=Object.create(this._ctx);return e&&Ls(r,e),n._ctx=r,n}raw(){return this._ctx.valueMapper=null,this}each(e){var n=this._ctx;return this._read(r=>wb(n,e,r,n.table.core))}count(e){return this._read(n=>{const r=this._ctx,i=r.table.core;if(ip(r,!0))return i.count({trans:n,query:{index:sE(r,i.schema),range:r.range}}).then(o=>Math.min(o,r.limit));var s=0;return wb(r,()=>(++s,!1),n,i).then(()=>s)}).then(e)}sortBy(e,n){const r=e.split(".").reverse(),i=r[0],s=r.length-1;function o(c,u){return u?o(c[r[u]],u-1):c[i]}var a=this._ctx.dir==="next"?1:-1;function l(c,u){var d=o(c,s),h=o(u,s);return d<h?-a:d>h?a:0}return this.toArray(function(c){return c.sort(l)}).then(n)}toArray(e){return this._read(n=>{var r=this._ctx;if(r.dir==="next"&&ip(r,!0)&&r.limit>0){const{valueMapper:i}=r,s=sE(r,r.table.core.schema);return r.table.core.query({trans:n,limit:r.limit,values:!0,query:{index:s,range:r.range}}).then(({result:o})=>i?o.map(i):o)}{const i=[];return wb(r,s=>i.push(s),n,r.table.core).then(()=>i)}},e)}offset(e){var n=this._ctx;return e<=0||(n.offset+=e,ip(n)?ER(n,()=>{var r=e;return(i,s)=>r===0||(r===1?(--r,!1):(s(()=>{i.advance(r),r=0}),!1))}):ER(n,()=>{var r=e;return()=>--r<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),ER(this._ctx,()=>{var n=e;return function(r,i,s){return--n<=0&&i(s),n>=0}},!0),this}until(e,n){return xR(this._ctx,function(r,i,s){return!e(r.value)||(i(s),n)}),this}first(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var n,r;return xR(this._ctx,function(i){return e(i.value)}),n=this._ctx,r=e,n.isMatch=pf(n.isMatch,r),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.key,i)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(r,i){e(i.primaryKey,i)})}keys(e){var n=this._ctx;n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.key)}).then(function(){return r}).then(e)}primaryKeys(e){var n=this._ctx;if(n.dir==="next"&&ip(n,!0)&&n.limit>0)return this._read(i=>{var s=sE(n,n.table.core.schema);return n.table.core.query({trans:i,values:!1,limit:n.limit,query:{index:s,range:n.range}})}).then(({result:i})=>i).then(e);n.keysOnly=!n.isMatch;var r=[];return this.each(function(i,s){r.push(s.primaryKey)}).then(function(){return r}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(n){return n[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var r={};return xR(this._ctx,function(i){var s=i.primaryKey.toString(),o=Ro(r,s);return r[s]=!0,!o}),this}modify(e){var n=this._ctx;return this._write(r=>{var i;if(typeof e=="function")i=e;else{var s=Jr(e),o=s.length;i=function(m){for(var _=!1,y=0;y<o;++y){var x=s[y],b=e[x];Ic(m,x)!==b&&(Wa(m,x,b),_=!0)}return _}}const a=n.table.core,{outbound:l,extractKey:c}=a.schema.primaryKey,u=this.db._options.modifyChunkSize||200,d=[];let h=0;const f=[],p=(m,_)=>{const{failures:y,numFailures:x}=_;h+=m-x;for(let b of Jr(y))d.push(y[b])};return this.clone().primaryKeys().then(m=>{const _=y=>{const x=Math.min(u,m.length-y);return a.getMany({trans:r,keys:m.slice(y,y+x),cache:"immutable"}).then(b=>{const E=[],w=[],T=l?[]:null,C=[];for(let M=0;M<x;++M){const N=b[M],F={value:E1(N),primKey:m[y+M]};i.call(F,F.value,F)!==!1&&(F.value==null?C.push(m[y+M]):l||Rs(c(N),c(F.value))===0?(w.push(F.value),l&&T.push(m[y+M])):(C.push(m[y+M]),E.push(F.value)))}const P=ip(n)&&n.limit===1/0&&(typeof e!="function"||e===wR)&&{index:n.index,range:n.range};return Promise.resolve(E.length>0&&a.mutate({trans:r,type:"add",values:E}).then(M=>{for(let N in M.failures)C.splice(parseInt(N),1);p(E.length,M)})).then(()=>(w.length>0||P&&typeof e=="object")&&a.mutate({trans:r,type:"put",keys:T,values:w,criteria:P,changeSpec:typeof e!="function"&&e}).then(M=>p(w.length,M))).then(()=>(C.length>0||P&&e===wR)&&a.mutate({trans:r,type:"delete",keys:C,criteria:P}).then(M=>p(C.length,M))).then(()=>m.length>y+x&&_(y+u))})};return _(0).then(()=>{if(d.length>0)throw new fw("Error modifying one or more objects",d,h,f);return m.length})})})}delete(){var e=this._ctx,n=e.range;return ip(e)&&(e.isPrimKey&&!ple||n.type===3)?this._write(r=>{const{primaryKey:i}=e.table.core.schema,s=n;return e.table.core.count({trans:r,query:{index:i,range:s}}).then(o=>e.table.core.mutate({trans:r,type:"deleteRange",range:s}).then(({failures:a,lastResult:l,results:c,numFailures:u})=>{if(u)throw new fw("Could not delete some values",Object.keys(a).map(d=>a[d]),o-u);return o-u}))}):this.modify(wR)}}const wR=(t,e)=>e.value=null;function vle(t,e){return t<e?-1:t===e?0:1}function yle(t,e){return t>e?-1:t===e?0:1}function oo(t,e,n){var r=t instanceof C9?new t.Collection(t):t;return r._ctx.error=n?new n(e):new TypeError(e),r}function sp(t){return new t.Collection(t,()=>S9("")).limit(0)}function _le(t,e,n,r,i,s){for(var o=Math.min(t.length,r.length),a=-1,l=0;l<o;++l){var c=e[l];if(c!==r[l])return i(t[l],n[l])<0?t.substr(0,l)+n[l]+n.substr(l+1):i(t[l],r[l])<0?t.substr(0,l)+r[l]+n.substr(l+1):a>=0?t.substr(0,a)+e[a]+n.substr(a+1):null;i(t[l],c)<0&&(a=l)}return o<r.length&&s==="next"?t+n.substr(t.length):o<t.length&&s==="prev"?t.substr(0,n.length):a<0?null:t.substr(0,a)+r[a]+n.substr(a+1)}function Tb(t,e,n,r){var i,s,o,a,l,c,u,d=n.length;if(!n.every(m=>typeof m=="string"))return oo(t,E9);function h(m){i=function(y){return y==="next"?x=>x.toUpperCase():x=>x.toLowerCase()}(m),s=function(y){return y==="next"?x=>x.toLowerCase():x=>x.toUpperCase()}(m),o=m==="next"?vle:yle;var _=n.map(function(y){return{lower:s(y),upper:i(y)}}).sort(function(y,x){return o(y.lower,x.lower)});a=_.map(function(y){return y.upper}),l=_.map(function(y){return y.lower}),c=m,u=m==="next"?"":r}h("next");var f=new t.Collection(t,()=>Au(a[0],l[d-1]+r));f._ondirectionchange=function(m){h(m)};var p=0;return f._addAlgorithm(function(m,_,y){var x=m.key;if(typeof x!="string")return!1;var b=s(x);if(e(b,l,p))return!0;for(var E=null,w=p;w<d;++w){var T=_le(x,b,a[w],l[w],o,c);T===null&&E===null?p=w+1:(E===null||o(E,T)>0)&&(E=T)}return _(E!==null?function(){m.continue(E+u)}:y),!1}),f}function Au(t,e,n,r){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:r}}function S9(t){return{type:1,lower:t,upper:t}}let C9=class{get Collection(){return this._ctx.table.db.Collection}between(e,n,r,i){r=r!==!1,i=i===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(r||i)&&(!r||!i)?sp(this):new this.Collection(this,()=>Au(e,n,!r,!i))}catch{return oo(this,ac)}}equals(e){return e==null?oo(this,ac):new this.Collection(this,()=>S9(e))}above(e){return e==null?oo(this,ac):new this.Collection(this,()=>Au(e,void 0,!0))}aboveOrEqual(e){return e==null?oo(this,ac):new this.Collection(this,()=>Au(e,void 0,!1))}below(e){return e==null?oo(this,ac):new this.Collection(this,()=>Au(void 0,e,!1,!0))}belowOrEqual(e){return e==null?oo(this,ac):new this.Collection(this,()=>Au(void 0,e))}startsWith(e){return typeof e!="string"?oo(this,E9):this.between(e,e+Rh,!0,!0)}startsWithIgnoreCase(e){return e===""?this.startsWith(e):Tb(this,(n,r)=>n.indexOf(r[0])===0,[e],Rh)}equalsIgnoreCase(e){return Tb(this,(n,r)=>n===r[0],[e],"")}anyOfIgnoreCase(){var e=bc.apply(Ip,arguments);return e.length===0?sp(this):Tb(this,(n,r)=>r.indexOf(n)!==-1,e,"")}startsWithAnyOfIgnoreCase(){var e=bc.apply(Ip,arguments);return e.length===0?sp(this):Tb(this,(n,r)=>r.some(i=>n.indexOf(i)===0),e,Rh)}anyOf(){const e=bc.apply(Ip,arguments);let n=this._cmp;try{e.sort(n)}catch{return oo(this,ac)}if(e.length===0)return sp(this);const r=new this.Collection(this,()=>Au(e[0],e[e.length-1]));r._ondirectionchange=s=>{n=s==="next"?this._ascending:this._descending,e.sort(n)};let i=0;return r._addAlgorithm((s,o,a)=>{const l=s.key;for(;n(l,e[i])>0;)if(++i,i===e.length)return o(a),!1;return n(l,e[i])===0||(o(()=>{s.continue(e[i])}),!1)}),r}notEqual(e){return this.inAnyRange([[qI,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=bc.apply(Ip,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return oo(this,ac)}const n=e.reduce((r,i)=>r?r.concat([[r[r.length-1][1],i]]):[[qI,i]],null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,n){const r=this._cmp,i=this._ascending,s=this._descending,o=this._min,a=this._max;if(e.length===0)return sp(this);if(!e.every(x=>x[0]!==void 0&&x[1]!==void 0&&i(x[0],x[1])<=0))return oo(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Vt.InvalidArgument);const l=!n||n.includeLowers!==!1,c=n&&n.includeUppers===!0;let u,d=i;function h(x,b){return d(x[0],b[0])}try{u=e.reduce(function(x,b){let E=0,w=x.length;for(;E<w;++E){const T=x[E];if(r(b[0],T[1])<0&&r(b[1],T[0])>0){T[0]=o(T[0],b[0]),T[1]=a(T[1],b[1]);break}}return E===w&&x.push(b),x},[]),u.sort(h)}catch{return oo(this,ac)}let f=0;const p=c?x=>i(x,u[f][1])>0:x=>i(x,u[f][1])>=0,m=l?x=>s(x,u[f][0])>0:x=>s(x,u[f][0])>=0;let _=p;const y=new this.Collection(this,()=>Au(u[0][0],u[u.length-1][1],!l,!c));return y._ondirectionchange=x=>{x==="next"?(_=p,d=i):(_=m,d=s),u.sort(h)},y._addAlgorithm((x,b,E)=>{for(var w=x.key;_(w);)if(++f,f===u.length)return b(E),!1;return!!function(T){return!p(T)&&!m(T)}(w)||(this._cmp(w,u[f][1])===0||this._cmp(w,u[f][0])===0||b(()=>{d===i?x.continue(u[f][0]):x.continue(u[f][1])}),!1)}),y}startsWithAnyOf(){const e=bc.apply(Ip,arguments);return e.every(n=>typeof n=="string")?e.length===0?sp(this):this.inAnyRange(e.map(n=>[n,n+Rh])):oo(this,"startsWithAnyOf() only works with strings")}};function Sl(t){return vr(function(e){return Py(e),t(e.target.error),!1})}function Py(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}const Iy="storagemutated",Bu="x-storagemutated-1",_d=Lv(null,Iy);let ble=class{_lock(){return K0(!Dt.global),++this._reculock,this._reculock!==1||Dt.global||(Dt.lockOwnerFor=this),this}_unlock(){if(K0(!Dt.global),--this._reculock==0)for(Dt.global||(Dt.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{Cg(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&Dt.lockOwnerFor!==this}create(e){if(!this.mode)return this;const n=this.db.idbdb,r=this.db._state.dbOpenError;if(K0(!this.idbtrans),!e&&!n)switch(r&&r.name){case"DatabaseClosedError":throw new Vt.DatabaseClosed(r);case"MissingAPIError":throw new Vt.MissingAPI(r.message,r);default:throw new Vt.OpenFailed(r)}if(!this.active)throw new Vt.TransactionInactive;return K0(this._completion._state===null),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=vr(i=>{Py(i),this._reject(e.error)}),e.onabort=vr(i=>{Py(i),this.active&&this._reject(new Vt.Abort(e.error)),this.active=!1,this.on("abort").fire(i)}),e.oncomplete=vr(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&_d.storagemutated.fire(e.mutatedParts)}),this}_promise(e,n,r){if(e==="readwrite"&&this.mode!=="readwrite")return hi(new Vt.ReadOnly("Transaction is readonly"));if(!this.active)return hi(new Vt.TransactionInactive);if(this._locked())return new mt((s,o)=>{this._blockedFuncs.push([()=>{this._promise(e,n,r).then(s,o)},Dt])});if(r)return vd(()=>{var s=new mt((o,a)=>{this._lock();const l=n(o,a,this);l&&l.then&&l.then(o,a)});return s.finally(()=>this._unlock()),s._lib=!0,s});var i=new mt((s,o)=>{var a=n(s,o,this);a&&a.then&&a.then(s,o)});return i._lib=!0,i}_root(){return this.parent?this.parent._root():this}waitFor(e){var n=this._root();const r=mt.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>r);else{n._waitingFor=r,n._waitingQueue=[];var i=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(i.get(-1/0).onsuccess=o)})()}var s=n._waitingFor;return new mt((o,a)=>{r.then(l=>n._waitingQueue.push(vr(o.bind(null,l))),l=>n._waitingQueue.push(vr(a.bind(null,l)))).finally(()=>{n._waitingFor===s&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Vt.Abort))}table(e){const n=this._memoizedTables||(this._memoizedTables={});if(Ro(n,e))return n[e];const r=this.schema[e];if(!r)throw new Vt.NotFound("Table "+e+" not part of transaction");const i=new this.db.Table(e,r,this);return i.core=this.db.core.table(e),n[e]=i,i}};function ZI(t,e,n,r,i,s,o){return{name:t,keyPath:e,unique:n,multi:r,auto:i,compound:s,src:(n&&!o?"&":"")+(r?"*":"")+(i?"++":"")+A9(e)}}function A9(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function R9(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:s9(n,r=>[r.name,r])}}let My=t=>{try{return t.only([[]]),My=()=>[[]],[[]]}catch{return My=()=>Rh,Rh}};function QI(t){return t==null?()=>{}:typeof t=="string"?function(e){return e.split(".").length===1?r=>r[e]:r=>Ic(r,e)}(t):e=>Ic(e,t)}function G5(t){return[].slice.call(t)}let xle=0;function Ov(t){return t==null?":id":typeof t=="string"?t:`[${t.join("+")}]`}function Ele(t,e,n){function r(l){if(l.type===3)return null;if(l.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:c,upper:u,lowerOpen:d,upperOpen:h}=l;return c===void 0?u===void 0?null:e.upperBound(u,!!h):u===void 0?e.lowerBound(c,!!d):e.bound(c,u,!!d,!!h)}const{schema:i,hasGetAll:s}=function(l,c){const u=G5(l.objectStoreNames);return{schema:{name:l.name,tables:u.map(d=>c.objectStore(d)).map(d=>{const{keyPath:h,autoIncrement:f}=d,p=ds(h),m=h==null,_={},y={name:d.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:m,compound:p,keyPath:h,autoIncrement:f,unique:!0,extractKey:QI(h)},indexes:G5(d.indexNames).map(x=>d.index(x)).map(x=>{const{name:b,unique:E,multiEntry:w,keyPath:T}=x,C={name:b,compound:ds(T),keyPath:T,unique:E,multiEntry:w,extractKey:QI(T)};return _[Ov(T)]=C,C}),getIndexByKeyPath:x=>_[Ov(x)]};return _[":id"]=y.primaryKey,h!=null&&(_[Ov(h)]=y.primaryKey),y})},hasGetAll:u.length>0&&"getAll"in c.objectStore(u[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(t,n),o=i.tables.map(l=>function(c){const u=c.name;return{name:u,schema:c,mutate:function({trans:d,type:h,keys:f,values:p,range:m}){return new Promise((_,y)=>{_=vr(_);const x=d.objectStore(u),b=x.keyPath==null,E=h==="put"||h==="add";if(!E&&h!=="delete"&&h!=="deleteRange")throw new Error("Invalid operation type: "+h);const{length:w}=f||p||{length:1};if(f&&p&&f.length!==p.length)throw new Error("Given keys array must have same length as given values array.");if(w===0)return _({numFailures:0,failures:{},results:[],lastResult:void 0});let T;const C=[],P=[];let M=0;const N=I=>{++M,Py(I)};if(h==="deleteRange"){if(m.type===4)return _({numFailures:M,failures:P,results:[],lastResult:void 0});m.type===3?C.push(T=x.clear()):C.push(T=x.delete(r(m)))}else{const[I,k]=E?b?[p,f]:[p,null]:[f,null];if(E)for(let R=0;R<w;++R)C.push(T=k&&k[R]!==void 0?x[h](I[R],k[R]):x[h](I[R])),T.onerror=N;else for(let R=0;R<w;++R)C.push(T=x[h](I[R])),T.onerror=N}const F=I=>{const k=I.target.result;C.forEach((R,z)=>R.error!=null&&(P[z]=R.error)),_({numFailures:M,failures:P,results:h==="delete"?f:C.map(R=>R.result),lastResult:k})};T.onerror=I=>{N(I),F(I)},T.onsuccess=F})},getMany:({trans:d,keys:h})=>new Promise((f,p)=>{f=vr(f);const m=d.objectStore(u),_=h.length,y=new Array(_);let x,b=0,E=0;const w=C=>{const P=C.target;y[P._pos]=P.result,++E===b&&f(y)},T=Sl(p);for(let C=0;C<_;++C)h[C]!=null&&(x=m.get(h[C]),x._pos=C,x.onsuccess=w,x.onerror=T,++b);b===0&&f(y)}),get:({trans:d,key:h})=>new Promise((f,p)=>{f=vr(f);const m=d.objectStore(u).get(h);m.onsuccess=_=>f(_.target.result),m.onerror=Sl(p)}),query:function(d){return h=>new Promise((f,p)=>{f=vr(f);const{trans:m,values:_,limit:y,query:x}=h,b=y===1/0?void 0:y,{index:E,range:w}=x,T=m.objectStore(u),C=E.isPrimaryKey?T:T.index(E.name),P=r(w);if(y===0)return f({result:[]});if(d){const M=_?C.getAll(P,b):C.getAllKeys(P,b);M.onsuccess=N=>f({result:N.target.result}),M.onerror=Sl(p)}else{let M=0;const N=_||!("openKeyCursor"in C)?C.openCursor(P):C.openKeyCursor(P),F=[];N.onsuccess=I=>{const k=N.result;return k?(F.push(_?k.value:k.primaryKey),++M===y?f({result:F}):void k.continue()):f({result:F})},N.onerror=Sl(p)}})}(s),openCursor:function({trans:d,values:h,query:f,reverse:p,unique:m}){return new Promise((_,y)=>{_=vr(_);const{index:x,range:b}=f,E=d.objectStore(u),w=x.isPrimaryKey?E:E.index(x.name),T=p?m?"prevunique":"prev":m?"nextunique":"next",C=h||!("openKeyCursor"in w)?w.openCursor(r(b),T):w.openKeyCursor(r(b),T);C.onerror=Sl(y),C.onsuccess=vr(P=>{const M=C.result;if(!M)return void _(null);M.___id=++xle,M.done=!1;const N=M.continue.bind(M);let F=M.continuePrimaryKey;F&&(F=F.bind(M));const I=M.advance.bind(M),k=()=>{throw new Error("Cursor not stopped")};M.trans=d,M.stop=M.continue=M.continuePrimaryKey=M.advance=()=>{throw new Error("Cursor not started")},M.fail=vr(y),M.next=function(){let R=1;return this.start(()=>R--?this.continue():this.stop()).then(()=>this)},M.start=R=>{const z=new Promise((G,j)=>{G=vr(G),C.onerror=Sl(j),M.fail=j,M.stop=H=>{M.stop=M.continue=M.continuePrimaryKey=M.advance=k,G(H)}}),X=()=>{if(C.result)try{R()}catch(G){M.fail(G)}else M.done=!0,M.start=()=>{throw new Error("Cursor behind last entry")},M.stop()};return C.onsuccess=vr(G=>{C.onsuccess=X,X()}),M.continue=N,M.continuePrimaryKey=F,M.advance=I,X(),z},_(M)},y)})},count({query:d,trans:h}){const{index:f,range:p}=d;return new Promise((m,_)=>{const y=h.objectStore(u),x=f.isPrimaryKey?y:y.index(f.name),b=r(p),E=b?x.count(b):x.count();E.onsuccess=vr(w=>m(w.target.result)),E.onerror=Sl(_)})}}}(l)),a={};return o.forEach(l=>a[l.name]=l),{stack:"dbcore",transaction:t.transaction.bind(t),table(l){if(!a[l])throw new Error(`Table '${l}' not found`);return a[l]},MIN_KEY:-1/0,MAX_KEY:My(e),schema:i}}function JI({_novip:t},e){const n=e.db,r=function(i,s,{IDBKeyRange:o,indexedDB:a},l){return{dbcore:function(u,d){return d.reduce((h,{create:f})=>({...h,...f(h)}),u)}(Ele(s,o,l),i.dbcore)}}(t._middlewares,n,t._deps,e);t.core=r.dbcore,t.tables.forEach(i=>{const s=i.name;t.core.schema.tables.some(o=>o.name===s)&&(i.core=t.core.table(s),t[s]instanceof t.Table&&(t[s].core=i.core))})}function yw({_novip:t},e,n,r){n.forEach(i=>{const s=r[i];e.forEach(o=>{const a=jk(o,i);(!a||"value"in a&&a.value===void 0)&&(o===t.Transaction.prototype||o instanceof t.Transaction?Pc(o,i,{get(){return this.table(i)},set(l){n9(this,i,{value:l,writable:!0,configurable:!0,enumerable:!0})}}):o[i]=new t.Table(i,s))})})}function eM({_novip:t},e){e.forEach(n=>{for(let r in n)n[r]instanceof t.Table&&delete n[r]})}function wle(t,e){return t._cfg.version-e._cfg.version}function Tle(t,e,n,r){const i=t._dbSchema,s=t._createTransaction("readwrite",t._storeNames,i);s.create(n),s._completion.catch(r);const o=s._reject.bind(s),a=Dt.transless||Dt;vd(()=>{Dt.trans=s,Dt.transless=a,e===0?(Jr(i).forEach(l=>{TR(n,l,i[l].primKey,i[l].indexes)}),JI(t,n),mt.follow(()=>t.on.populate.fire(s)).catch(o)):function({_novip:l},c,u,d){const h=[],f=l._versions;let p=l._dbSchema=nM(l,l.idbdb,d),m=!1;const _=f.filter(x=>x._cfg.version>=c);function y(){return h.length?mt.resolve(h.shift()(u.idbtrans)).then(y):mt.resolve()}return _.forEach(x=>{h.push(()=>{const b=p,E=x._cfg.dbschema;rM(l,b,d),rM(l,E,d),p=l._dbSchema=E;const w=P9(b,E);w.add.forEach(C=>{TR(d,C[0],C[1].primKey,C[1].indexes)}),w.change.forEach(C=>{if(C.recreate)throw new Vt.Upgrade("Not yet support for changing primary key");{const P=d.objectStore(C.name);C.add.forEach(M=>tM(P,M)),C.change.forEach(M=>{P.deleteIndex(M.name),tM(P,M)}),C.del.forEach(M=>P.deleteIndex(M))}});const T=x._cfg.contentUpgrade;if(T&&x._cfg.version>c){JI(l,d),u._memoizedTables={},m=!0;let C=o9(E);w.del.forEach(F=>{C[F]=b[F]}),eM(l,[l.Transaction.prototype]),yw(l,[l.Transaction.prototype],Jr(C),C),u.schema=C;const P=Gk(T);let M;P&&Sg();const N=mt.follow(()=>{if(M=T(u),M&&P){var F=Fc.bind(null,null);M.then(F,F)}});return M&&typeof M.then=="function"?mt.resolve(M):N.then(()=>M)}}),h.push(b=>{(!m||!fle)&&function(E,w){[].slice.call(w.db.objectStoreNames).forEach(T=>E[T]==null&&w.db.deleteObjectStore(T))}(x._cfg.dbschema,b),eM(l,[l.Transaction.prototype]),yw(l,[l.Transaction.prototype],l._storeNames,l._dbSchema),u.schema=l._dbSchema})}),y().then(()=>{var x,b;b=d,Jr(x=p).forEach(E=>{b.db.objectStoreNames.contains(E)||TR(b,E,x[E].primKey,x[E].indexes)})})}(t,e,s,n).catch(o)})}function P9(t,e){const n={del:[],add:[],change:[]};let r;for(r in t)e[r]||n.del.push(r);for(r in e){const i=t[r],s=e[r];if(i){const o={name:r,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(i.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||i.primKey.auto!==s.primKey.auto&&!lS)o.recreate=!0,n.change.push(o);else{const a=i.idxByName,l=s.idxByName;let c;for(c in a)l[c]||o.del.push(c);for(c in l){const u=a[c],d=l[c];u?u.src!==d.src&&o.change.push(d):o.add.push(d)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}else n.add.push([r,s])}return n}function TR(t,e,n,r){const i=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return r.forEach(s=>tM(i,s)),i}function tM(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function nM(t,e,n){const r={};return hw(e.objectStoreNames,0).forEach(i=>{const s=n.objectStore(i);let o=s.keyPath;const a=ZI(A9(o),o||"",!1,!1,!!s.autoIncrement,o&&typeof o!="string",!0),l=[];for(let u=0;u<s.indexNames.length;++u){const d=s.index(s.indexNames[u]);o=d.keyPath;var c=ZI(d.name,o,!!d.unique,!!d.multiEntry,!1,o&&typeof o!="string",!1);l.push(c)}r[i]=R9(i,a,l)}),r}function rM({_novip:t},e,n){const r=n.db.objectStoreNames;for(let i=0;i<r.length;++i){const s=r[i],o=n.objectStore(s);t._hasGetAll="getAll"in o;for(let a=0;a<o.indexNames.length;++a){const l=o.indexNames[a],c=o.index(l).keyPath,u=typeof c=="string"?c:"["+hw(c).join("+")+"]";if(e[s]){const d=e[s].idxByName[u];d&&(d.name=l,delete e[s].idxByName[u],e[s].idxByName[l]=d)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&or.WorkerGlobalScope&&or instanceof or.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}let Sle=class{_parseStoresSpec(e,n){Jr(e).forEach(r=>{if(e[r]!==null){var i=e[r].split(",").map((o,a)=>{const l=(o=o.trim()).replace(/([&*]|\+\+)/g,""),c=/^\[/.test(l)?l.match(/^\[(.*)\]$/)[1].split("+"):l;return ZI(l,c||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),ds(c),a===0)}),s=i.shift();if(s.multi)throw new Vt.Schema("Primary key cannot be multi-valued");i.forEach(o=>{if(o.auto)throw new Vt.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new Vt.Schema("Index must have a name and cannot be an empty string")}),n[r]=R9(r,s,i)}})}stores(e){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?Ls(this._cfg.storesSource,e):e;const r=n._versions,i={};let s={};return r.forEach(o=>{Ls(i,o._cfg.storesSource),s=o._cfg.dbschema={},o._parseStoresSpec(i,s)}),n._dbSchema=s,eM(n,[n._allTables,n,n.Transaction.prototype]),yw(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],Jr(s),s),n._storeNames=Jr(s),this}upgrade(e){return this._cfg.contentUpgrade=Wk(this._cfg.contentUpgrade||Xn,e),this}};function qk(t,e){let n=t._dbNamesDB;return n||(n=t._dbNamesDB=new Yt(cS,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Zk(t){return t&&typeof t.databases=="function"}function iM(t){return vd(function(){return Dt.letThrough=!0,t()})}function Cle(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)}):Promise.resolve()}function Ale(t){const e=t._state,{indexedDB:n}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?hi(e.dbOpenError):t);Zl&&(e.openCanceller._stackHolder=Pf()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const r=e.openCanceller;function i(){if(e.openCanceller!==r)throw new Vt.DatabaseClosed("db.open() was cancelled")}let s=e.dbReadyResolve,o=null,a=!1;const l=()=>new mt((c,u)=>{if(i(),!n)throw new Vt.MissingAPI;const d=t.name,h=e.autoSchema?n.open(d):n.open(d,Math.round(10*t.verno));if(!h)throw new Vt.MissingAPI;h.onerror=Sl(u),h.onblocked=vr(t._fireOnBlocked),h.onupgradeneeded=vr(f=>{if(o=h.transaction,e.autoSchema&&!t._options.allowEmptyDB){h.onerror=Py,o.abort(),h.result.close();const m=n.deleteDatabase(d);m.onsuccess=m.onerror=vr(()=>{u(new Vt.NoSuchDatabase(`Database ${d} doesnt exist`))})}else{o.onerror=Sl(u);var p=f.oldVersion>Math.pow(2,62)?0:f.oldVersion;a=p<1,t._novip.idbdb=h.result,Tle(t,p/10,o,u)}},u),h.onsuccess=vr(()=>{o=null;const f=t._novip.idbdb=h.result,p=hw(f.objectStoreNames);if(p.length>0)try{const _=f.transaction((m=p).length===1?m[0]:m,"readonly");e.autoSchema?function({_novip:y},x,b){y.verno=x.version/10;const E=y._dbSchema=nM(0,x,b);y._storeNames=hw(x.objectStoreNames,0),yw(y,[y._allTables],Jr(E),E)}(t,f,_):(rM(t,t._dbSchema,_),function(y,x){const b=P9(nM(0,y.idbdb,x),y._dbSchema);return!(b.add.length||b.change.some(E=>E.add.length||E.change.length))}(t,_)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),JI(t,_)}catch{}var m;Mv.push(t),f.onversionchange=vr(_=>{e.vcFired=!0,t.on("versionchange").fire(_)}),f.onclose=vr(_=>{t.on("close").fire(_)}),a&&function({indexedDB:_,IDBKeyRange:y},x){!Zk(_)&&x!==cS&&qk(_,y).put({name:x}).catch(Xn)}(t._deps,d),c()},u)}).catch(c=>c&&c.name==="UnknownError"&&e.PR1398_maxLoop>0?(e.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),l()):mt.reject(c));return mt.race([r,(typeof navigator>"u"?mt.resolve():Cle()).then(l)]).then(()=>(i(),e.onReadyBeingFired=[],mt.resolve(iM(()=>t.on.ready.fire(t.vip))).then(function c(){if(e.onReadyBeingFired.length>0){let u=e.onReadyBeingFired.reduce(Wk,Xn);return e.onReadyBeingFired=[],mt.resolve(iM(()=>u(t.vip))).then(c)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>t).catch(c=>{e.dbOpenError=c;try{o&&o.abort()}catch{}return r===e.openCanceller&&t._close(),hi(c)}).finally(()=>{e.openComplete=!0,s()})}function sM(t){var e=s=>t.next(s),n=i(e),r=i(s=>t.throw(s));function i(s){return o=>{var a=s(o),l=a.value;return a.done?l:l&&typeof l.then=="function"?l.then(n,r):ds(l)?Promise.all(l).then(n,r):n(l)}}return i(e)()}function Rle(t,e,n){var r=arguments.length;if(r<2)throw new Vt.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];return n=i.pop(),[t,a9(i),n]}function I9(t,e,n,r,i){return mt.resolve().then(()=>{const s=Dt.transless||Dt,o=t._createTransaction(e,n,t._dbSchema,r),a={trans:o,transless:s};if(r)o.idbtrans=r.idbtrans;else try{o.create(),t._state.PR1398_maxLoop=3}catch(d){return d.name===Vk.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>I9(t,e,n,null,i))):hi(d)}const l=Gk(i);let c;l&&Sg();const u=mt.follow(()=>{if(c=i.call(o,o),c)if(l){var d=Fc.bind(null,null);c.then(d,d)}else typeof c.next=="function"&&typeof c.throw=="function"&&(c=sM(c))},a);return(c&&typeof c.then=="function"?mt.resolve(c).then(d=>o.active?d:hi(new Vt.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):u.then(()=>c)).then(d=>(r&&o._resolve(),o._completion.then(()=>d))).catch(d=>(o._reject(d),hi(d)))})}function Sb(t,e,n){const r=ds(t)?t.slice():[t];for(let i=0;i<n;++i)r.push(e);return r}const Ple={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return{...t,table(e){const n=t.table(e),{schema:r}=n,i={},s=[];function o(u,d,h){const f=Ov(u),p=i[f]=i[f]||[],m=u==null?0:typeof u=="string"?1:u.length,_=d>0,y={...h,isVirtual:_,keyTail:d,keyLength:m,extractKey:QI(u),unique:!_&&h.unique};return p.push(y),y.isPrimaryKey||s.push(y),m>1&&o(m===2?u[0]:u.slice(0,m-1),d+1,h),p.sort((x,b)=>x.keyTail-b.keyTail),y}const a=o(r.primaryKey.keyPath,0,r.primaryKey);i[":id"]=[a];for(const u of r.indexes)o(u.keyPath,0,u);function l(u){const d=u.query.index;return d.isVirtual?{...u,query:{index:d,range:(h=u.query.range,f=d.keyTail,{type:h.type===1?2:h.type,lower:Sb(h.lower,h.lowerOpen?t.MAX_KEY:t.MIN_KEY,f),lowerOpen:!0,upper:Sb(h.upper,h.upperOpen?t.MIN_KEY:t.MAX_KEY,f),upperOpen:!0})}}:u;var h,f}return{...n,schema:{...r,primaryKey:a,indexes:s,getIndexByKeyPath:function(u){const d=i[Ov(u)];return d&&d[0]}},count:u=>n.count(l(u)),query:u=>n.query(l(u)),openCursor(u){const{keyTail:d,isVirtual:h,keyLength:f}=u.query.index;return h?n.openCursor(l(u)).then(p=>p&&function(m){return Object.create(m,{continue:{value:function(y){y!=null?m.continue(Sb(y,u.reverse?t.MAX_KEY:t.MIN_KEY,d)):u.unique?m.continue(m.key.slice(0,f).concat(u.reverse?t.MIN_KEY:t.MAX_KEY,d)):m.continue()}},continuePrimaryKey:{value(y,x){m.continuePrimaryKey(Sb(y,t.MAX_KEY,d),x)}},primaryKey:{get:()=>m.primaryKey},key:{get(){const y=m.key;return f===1?y[0]:y.slice(0,f)}},value:{get:()=>m.value}})}(p)):n.openCursor(u)}}}}}};function Qk(t,e,n,r){return n=n||{},r=r||"",Jr(t).forEach(i=>{if(Ro(e,i)){var s=t[i],o=e[i];if(typeof s=="object"&&typeof o=="object"&&s&&o){const a=FI(s);a!==FI(o)?n[r+i]=e[i]:a==="Object"?Qk(s,o,n,r+i+"."):s!==o&&(n[r+i]=e[i])}else s!==o&&(n[r+i]=e[i])}else n[r+i]=void 0}),Jr(e).forEach(i=>{Ro(t,i)||(n[r+i]=e[i])}),n}const Ile={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>({...t,table(e){const n=t.table(e),{primaryKey:r}=n.schema;return{...n,mutate(s){const o=Dt.trans,{deleting:a,creating:l,updating:c}=o.table(e).hook;switch(s.type){case"add":if(l.fire===Xn)break;return o._promise("readwrite",()=>u(s),!0);case"put":if(l.fire===Xn&&c.fire===Xn)break;return o._promise("readwrite",()=>u(s),!0);case"delete":if(a.fire===Xn)break;return o._promise("readwrite",()=>u(s),!0);case"deleteRange":if(a.fire===Xn)break;return o._promise("readwrite",()=>function(h){return d(h.trans,h.range,1e4)}(s),!0)}return n.mutate(s);function u(h){const f=Dt.trans,p=h.keys||function(m,_){return _.type==="delete"?_.keys:_.keys||_.values.map(m.extractKey)}(r,h);if(!p)throw new Error("Keys missing");return(h=h.type==="add"||h.type==="put"?{...h,keys:p}:{...h}).type!=="delete"&&(h.values=[...h.values]),h.keys&&(h.keys=[...h.keys]),function(m,_,y){return _.type==="add"?Promise.resolve([]):m.getMany({trans:_.trans,keys:y,cache:"immutable"})}(n,h,p).then(m=>{const _=p.map((y,x)=>{const b=m[x],E={onerror:null,onsuccess:null};if(h.type==="delete")a.fire.call(E,y,b,f);else if(h.type==="add"||b===void 0){const w=l.fire.call(E,y,h.values[x],f);y==null&&w!=null&&(y=w,h.keys[x]=y,r.outbound||Wa(h.values[x],r.keyPath,y))}else{const w=Qk(b,h.values[x]),T=c.fire.call(E,w,y,b,f);if(T){const C=h.values[x];Object.keys(T).forEach(P=>{Ro(C,P)?C[P]=T[P]:Wa(C,P,T[P])})}}return E});return n.mutate(h).then(({failures:y,results:x,numFailures:b,lastResult:E})=>{for(let w=0;w<p.length;++w){const T=x?x[w]:p[w],C=_[w];T==null?C.onerror&&C.onerror(y[w]):C.onsuccess&&C.onsuccess(h.type==="put"&&m[w]?h.values[w]:T)}return{failures:y,results:x,numFailures:b,lastResult:E}}).catch(y=>(_.forEach(x=>x.onerror&&x.onerror(y)),Promise.reject(y)))})}function d(h,f,p){return n.query({trans:h,values:!1,query:{index:r,range:f},limit:p}).then(({result:m})=>u({type:"delete",keys:m,trans:h}).then(_=>_.numFailures>0?Promise.reject(_.failures[0]):m.length<p?{failures:[],numFailures:0,lastResult:void 0}:d(h,{...f,lower:m[m.length-1],lowerOpen:!0},p)))}}}}})};function M9(t,e,n){try{if(!e||e.keys.length<t.length)return null;const r=[];for(let i=0,s=0;i<e.keys.length&&s<t.length;++i)Rs(e.keys[i],t[s])===0&&(r.push(n?E1(e.values[i]):e.values[i]),++s);return r.length===t.length?r:null}catch{return null}}const Mle={stack:"dbcore",level:-1,create:t=>({table:e=>{const n=t.table(e);return{...n,getMany:r=>{if(!r.cache)return n.getMany(r);const i=M9(r.keys,r.trans._cache,r.cache==="clone");return i?mt.resolve(i):n.getMany(r).then(s=>(r.trans._cache={keys:r.keys,values:r.cache==="clone"?E1(s):s},s))},mutate:r=>(r.type!=="add"&&(r.trans._cache=null),n.mutate(r))}}})};function Jk(t){return!("from"in t)}const vc=function(t,e){if(!this){const n=new vc;return t&&"d"in t&&Ls(n,t),n}Ls(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function Ly(t,e,n){const r=Rs(e,n);if(isNaN(r))return;if(r>0)throw RangeError();if(Jk(t))return Ls(t,{from:e,to:n,d:1});const i=t.l,s=t.r;if(Rs(n,t.from)<0)return i?Ly(i,e,n):t.l={from:e,to:n,d:1,l:null,r:null},H5(t);if(Rs(e,t.to)>0)return s?Ly(s,e,n):t.r={from:e,to:n,d:1,l:null,r:null},H5(t);Rs(e,t.from)<0&&(t.from=e,t.l=null,t.d=s?s.d+1:1),Rs(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);const o=!t.r;i&&!t.l&&_w(t,i),s&&o&&_w(t,s)}function _w(t,e){Jk(e)||function n(r,{from:i,to:s,l:o,r:a}){Ly(r,i,s),o&&n(r,o),a&&n(r,a)}(t,e)}function Lle(t,e){const n=oM(e);let r=n.next();if(r.done)return!1;let i=r.value;const s=oM(t);let o=s.next(i.from),a=o.value;for(;!r.done&&!o.done;){if(Rs(a.from,i.to)<=0&&Rs(a.to,i.from)>=0)return!0;Rs(i.from,a.from)<0?i=(r=n.next(a.from)).value:a=(o=s.next(i.from)).value}return!1}function oM(t){let e=Jk(t)?null:{s:0,n:t};return{next(n){const r=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,r)for(;e.n.l&&Rs(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!r||Rs(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function H5(t){var e,n;const r=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),i=r>1?"r":r<-1?"l":"";if(i){const s=i==="r"?"l":"r",o={...t},a=t[i];t.from=a.from,t.to=a.to,t[i]=a[i],o[i]=a[s],t[s]=o,o.d=V5(o)}t.d=V5(t)}function V5({r:t,l:e}){return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}Gm(vc.prototype,{add(t){return _w(this,t),this},addKey(t){return Ly(this,t,t),this},addKeys(t){return t.forEach(e=>Ly(this,e,e)),this},[UI](){return oM(this)}});const Ole={stack:"dbcore",level:0,create:t=>{const e=t.schema.name,n=new vc(t.MIN_KEY,t.MAX_KEY);return{...t,table:r=>{const i=t.table(r),{schema:s}=i,{primaryKey:o}=s,{extractKey:a,outbound:l}=o,c={...i,mutate:h=>{const f=h.trans,p=f.mutatedParts||(f.mutatedParts={}),m=T=>{const C=`idb://${e}/${r}/${T}`;return p[C]||(p[C]=new vc)},_=m(""),y=m(":dels"),{type:x}=h;let[b,E]=h.type==="deleteRange"?[h.range]:h.type==="delete"?[h.keys]:h.values.length<50?[[],h.values]:[];const w=h.trans._cache;return i.mutate(h).then(T=>{if(ds(b)){x!=="delete"&&(b=T.results),_.addKeys(b);const C=M9(b,w);C||x==="add"||y.addKeys(b),(C||E)&&function(P,M,N,F){function I(k){const R=P(k.name||"");function z(G){return G!=null?k.extractKey(G):null}const X=G=>k.multiEntry&&ds(G)?G.forEach(j=>R.addKey(j)):R.addKey(G);(N||F).forEach((G,j)=>{const H=N&&z(N[j]),Q=F&&z(F[j]);Rs(H,Q)!==0&&(H!=null&&X(H),Q!=null&&X(Q))})}M.indexes.forEach(I)}(m,s,C,E)}else if(b){const C={from:b.lower,to:b.upper};y.add(C),_.add(C)}else _.add(n),y.add(n),s.indexes.forEach(C=>m(C.name).add(n));return T})}},u=({query:{index:h,range:f}})=>{var p,m;return[h,new vc((p=f.lower)!==null&&p!==void 0?p:t.MIN_KEY,(m=f.upper)!==null&&m!==void 0?m:t.MAX_KEY)]},d={get:h=>[o,new vc(h.key)],getMany:h=>[o,new vc().addKeys(h.keys)],count:u,query:u,openCursor:u};return Jr(d).forEach(h=>{c[h]=function(f){const{subscr:p}=Dt;if(p){const m=E=>{const w=`idb://${e}/${r}/${E}`;return p[w]||(p[w]=new vc)},_=m(""),y=m(":dels"),[x,b]=d[h](f);if(m(x.name||"").add(b),!x.isPrimaryKey){if(h!=="count"){const E=h==="query"&&l&&f.values&&i.query({...f,values:!1});return i[h].apply(this,arguments).then(w=>{if(h==="query"){if(l&&f.values)return E.then(({result:C})=>(_.addKeys(C),w));const T=f.values?w.result.map(a):w.result;f.values?_.addKeys(T):y.addKeys(T)}else if(h==="openCursor"){const T=w,C=f.values;return T&&Object.create(T,{key:{get:()=>(y.addKey(T.primaryKey),T.key)},primaryKey:{get(){const P=T.primaryKey;return y.addKey(P),P}},value:{get:()=>(C&&_.addKey(T.primaryKey),T.value)}})}return w})}y.add(n)}}return i[h].apply(this,arguments)}}),c}}}};class Yt{constructor(e,n){this._middlewares={},this.verno=0;const r=Yt.dependencies;this._options=n={addons:Yt.addons,autoOpen:!0,indexedDB:r.indexedDB,IDBKeyRange:r.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:i}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Xn,dbReadyPromise:null,cancelOpen:Xn,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var o;s.dbReadyPromise=new mt(a=>{s.dbReadyResolve=a}),s.openCanceller=new mt((a,l)=>{s.cancelOpen=l}),this._state=s,this.name=e,this.on=Lv(this,"populate","blocked","versionchange","close",{ready:[Wk,Xn]}),this.on.ready.subscribe=r9(this.on.ready.subscribe,a=>(l,c)=>{Yt.vip(()=>{const u=this._state;if(u.openComplete)u.dbOpenError||mt.resolve().then(l),c&&a(l);else if(u.onReadyBeingFired)u.onReadyBeingFired.push(l),c&&a(l);else{a(l);const d=this;c||a(function h(){d.on.ready.unsubscribe(l),d.on.ready.unsubscribe(h)})}})}),this.Collection=(o=this,g0(gle.prototype,function(a,l){this.db=o;let c=T9,u=null;if(l)try{c=l()}catch(p){u=p}const d=a._ctx,h=d.table,f=h.hook.reading.fire;this._ctx={table:h,index:d.index,isPrimKey:!d.index||h.schema.primKey.keyPath&&d.index===h.schema.primKey.name,range:c,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:u,or:d.or,valueMapper:f!==Ay?f:null}})),this.Table=function(a){return g0(mle.prototype,function(l,c,u){this.db=a,this._tx=u,this.name=l,this.schema=c,this.hook=a._allTables[l]?a._allTables[l].hook:Lv(null,{creating:[rle,Xn],reading:[nle,Ay],updating:[sle,Xn],deleting:[ile,Xn]})})}(this),this.Transaction=function(a){return g0(ble.prototype,function(l,c,u,d,h){this.db=a,this.mode=l,this.storeNames=c,this.schema=u,this.chromeTransactionDurability=d,this.idbtrans=null,this.on=Lv(this,"complete","error","abort"),this.parent=h||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new mt((f,p)=>{this._resolve=f,this._reject=p}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},f=>{var p=this.active;return this.active=!1,this.on.error.fire(f),this.parent?this.parent._reject(f):p&&this.idbtrans&&this.idbtrans.abort(),hi(f)})})}(this),this.Version=function(a){return g0(Sle.prototype,function(l){this.db=a,this._cfg={version:l,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(a){return g0(C9.prototype,function(l,c,u){this.db=a,this._ctx={table:l,index:c===":id"?null:c,or:u};const d=a._deps.indexedDB;if(!d)throw new Vt.MissingAPI;this._cmp=this._ascending=d.cmp.bind(d),this._descending=(h,f)=>d.cmp(f,h),this._max=(h,f)=>d.cmp(h,f)>0?h:f,this._min=(h,f)=>d.cmp(h,f)<0?h:f,this._IDBKeyRange=a._deps.IDBKeyRange})}(this),this.on("versionchange",a=>{a.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",a=>{!a.newVersion||a.newVersion<a.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${a.oldVersion/10}`)}),this._maxKey=My(n.IDBKeyRange),this._createTransaction=(a,l,c,u)=>new this.Transaction(a,l,c,this._options.chromeTransactionDurability,u),this._fireOnBlocked=a=>{this.on("blocked").fire(a),Mv.filter(l=>l.name===this.name&&l!==this&&!l._state.vcFired).map(l=>l.on("versionchange").fire(a))},this.use(Ple),this.use(Ile),this.use(Ole),this.use(Mle),this.vip=Object.create(this,{_vip:{value:!0}}),i.forEach(a=>a(this))}version(e){if(isNaN(e)||e<.1)throw new Vt.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new Vt.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const n=this._versions;var r=n.filter(i=>i._cfg.version===e)[0];return r||(r=new this.Version(e),n.push(r),n.sort(wle),r.stores({}),this._state.autoSchema=!1,r)}_whenReady(e){return this.idbdb&&(this._state.openComplete||Dt.letThrough||this._vip)?e():new mt((n,r)=>{if(this._state.openComplete)return r(new Vt.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void r(new Vt.DatabaseClosed);this.open().catch(Xn)}this._state.dbReadyPromise.then(n,r)}).then(e)}use({stack:e,create:n,level:r,name:i}){i&&this.unuse({stack:e,name:i});const s=this._middlewares[e]||(this._middlewares[e]=[]);return s.push({stack:e,create:n,level:r??10,name:i}),s.sort((o,a)=>o.level-a.level),this}unuse({stack:e,name:n,create:r}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(i=>r?i.create!==r:!!n&&i.name!==n)),this}open(){return Ale(this)}_close(){const e=this._state,n=Mv.indexOf(this);if(n>=0&&Mv.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new mt(r=>{e.dbReadyResolve=r}),e.openCanceller=new mt((r,i)=>{e.cancelOpen=i})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new Vt.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,n=this._state;return new mt((r,i)=>{const s=()=>{this.close();var o=this._deps.indexedDB.deleteDatabase(this.name);o.onsuccess=vr(()=>{(function({indexedDB:a,IDBKeyRange:l},c){!Zk(a)&&c!==cS&&qk(a,l).delete(c).catch(Xn)})(this._deps,this.name),r()}),o.onerror=Sl(i),o.onblocked=this._fireOnBlocked};if(e)throw new Vt.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(s):s()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return Jr(this._allTables).map(e=>this._allTables[e])}transaction(){const e=Rle.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,n,r){let i=Dt.trans;i&&i.db===this&&e.indexOf("!")===-1||(i=null);const s=e.indexOf("?")!==-1;let o,a;e=e.replace("!","").replace("?","");try{if(a=n.map(c=>{var u=c instanceof this.Table?c.name:c;if(typeof u!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return u}),e=="r"||e===_R)o=_R;else{if(e!="rw"&&e!=bR)throw new Vt.InvalidArgument("Invalid transaction mode: "+e);o=bR}if(i){if(i.mode===_R&&o===bR){if(!s)throw new Vt.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");i=null}i&&a.forEach(c=>{if(i&&i.storeNames.indexOf(c)===-1){if(!s)throw new Vt.SubTransaction("Table "+c+" not included in parent transaction.");i=null}}),s&&i&&!i.active&&(i=null)}}catch(c){return i?i._promise(null,(u,d)=>{d(c)}):hi(c)}const l=I9.bind(null,this,o,a,i,r);return i?i._promise(o,l,"lock"):Dt.trans?Cg(Dt.transless,()=>this._whenReady(l)):this._whenReady(l)}table(e){if(!Ro(this._allTables,e))throw new Vt.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const kle=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class Nle{constructor(e){this._subscribe=e}subscribe(e,n,r){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:n,complete:r})}[kle](){return this}}function L9(t,e){return Jr(e).forEach(n=>{_w(t[n]||(t[n]=new vc),e[n])}),t}function Dle(t){let e,n=!1;const r=new Nle(i=>{const s=Gk(t);let o=!1,a={},l={};const c={get closed(){return o},unsubscribe:()=>{o=!0,_d.storagemutated.unsubscribe(f)}};i.start&&i.start(c);let u=!1,d=!1;function h(){return Jr(l).some(m=>a[m]&&Lle(a[m],l[m]))}const f=m=>{L9(a,m),h()&&p()},p=()=>{if(u||o)return;a={};const m={},_=function(y){s&&Sg();const x=()=>vd(t,{subscr:y,trans:null}),b=Dt.trans?Cg(Dt.transless,x):x();return s&&b.then(Fc,Fc),b}(m);d||(_d(Iy,f),d=!0),u=!0,Promise.resolve(_).then(y=>{n=!0,e=y,u=!1,o||(h()?p():(a={},l=m,i.next&&i.next(y)))},y=>{u=!1,n=!1,i.error&&i.error(y),c.unsubscribe()})};return p(),c});return r.hasValue=()=>n,r.getValue=()=>e,r}let aM;try{aM={indexedDB:or.indexedDB||or.mozIndexedDB||or.webkitIndexedDB||or.msIndexedDB,IDBKeyRange:or.IDBKeyRange||or.webkitIDBKeyRange}}catch{aM={indexedDB:null,IDBKeyRange:null}}const Qd=Yt;function oE(t){let e=Sc;try{Sc=!0,_d.storagemutated.fire(t)}finally{Sc=e}}Gm(Qd,{...eE,delete:t=>new Qd(t,{addons:[]}).delete(),exists:t=>new Qd(t,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(t){try{return function({indexedDB:e,IDBKeyRange:n}){return Zk(e)?Promise.resolve(e.databases()).then(r=>r.map(i=>i.name).filter(i=>i!==cS)):qk(e,n).toCollection().primaryKeys()}(Qd.dependencies).then(t)}catch{return hi(new Vt.MissingAPI)}},defineClass:()=>function(t){Ls(this,t)},ignoreTransaction:t=>Dt.trans?Cg(Dt.transless,t):t(),vip:iM,async:function(t){return function(){try{var e=sM(t.apply(this,arguments));return e&&typeof e.then=="function"?e:mt.resolve(e)}catch(n){return hi(n)}}},spawn:function(t,e,n){try{var r=sM(t.apply(n,e||[]));return r&&typeof r.then=="function"?r:mt.resolve(r)}catch(i){return hi(i)}},currentTransaction:{get:()=>Dt.trans||null},waitFor:function(t,e){const n=mt.resolve(typeof t=="function"?Qd.ignoreTransaction(t):t).timeout(e||6e4);return Dt.trans?Dt.trans.waitFor(n):n},Promise:mt,debug:{get:()=>Zl,set:t=>{c9(t,t==="dexie"?()=>!0:w9)}},derive:gm,extend:Ls,props:Gm,override:r9,Events:Lv,on:_d,liveQuery:Dle,extendObservabilitySet:L9,getByKeyPath:Ic,setByKeyPath:Wa,delByKeyPath:function(t,e){typeof e=="string"?Wa(t,e,void 0):"length"in e&&[].map.call(e,function(n){Wa(t,n,void 0)})},shallowClone:o9,deepClone:E1,getObjectDiff:Qk,cmp:Rs,asap:i9,minKey:qI,addons:[],connections:Mv,errnames:Vk,dependencies:aM,semVer:F5,version:F5.split(".").map(t=>parseInt(t)).reduce((t,e,n)=>t+e/Math.pow(10,2*n))}),Qd.maxKey=My(Qd.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(_d(Iy,t=>{if(!Sc){let e;lS?(e=document.createEvent("CustomEvent"),e.initCustomEvent(Bu,!0,!0,t)):e=new CustomEvent(Bu,{detail:t}),Sc=!0,dispatchEvent(e),Sc=!1}}),addEventListener(Bu,({detail:t})=>{Sc||oE(t)}));let Sc=!1;if(typeof BroadcastChannel<"u"){const t=new BroadcastChannel(Bu);typeof t.unref=="function"&&t.unref(),_d(Iy,e=>{Sc||t.postMessage(e)}),t.onmessage=e=>{e.data&&oE(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){_d(Iy,e=>{try{Sc||(typeof localStorage<"u"&&localStorage.setItem(Bu,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:Bu,changedParts:e})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",e=>{if(e.key===Bu){const n=JSON.parse(e.newValue);n&&oE(n.changedParts)}});const t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",function({data:e}){e&&e.type===Bu&&oE(e.changedParts)})}mt.rejectionMapper=function(t,e){if(!t||t instanceof vm||t instanceof TypeError||t instanceof SyntaxError||!t.name||!k5[t.name])return t;var n=new k5[t.name](e||t.message,t);return"stack"in t&&Pc(n,"stack",{get:function(){return this.inner.stack}}),n},c9(Zl,w9);const eN="Spatialec",zl=eN,tN=eN+"_Resources",nN=eN+"_Projects",SR={latitude:47.65,longitude:7,zoom:4.5,maxZoom:20,maxPitch:89,bearing:0},an={resources:"resources",projects:"projects"},mc=class mc extends Yt{constructor(e){super(e),this.version(14).stores({layerPanelState:"++id",layoutState:"++id, &i"}),this.layerPanelState=this.table(mc.layerPanelState),this.layerPanelState.toArray().then(n=>{n.length===0&&this.layerPanelState.add({mapTileUuid:"",gadmGeoJsonUuid:[],mapTileEnabled:!0,gadmGeoJsonEnabled:!0})}),this.layoutState=this.table(mc.layoutState)}static async saveComponentState(e,n){const r=n.map((s,o)=>({...s,zIndex:o})),i=await mc.openProject(e);i.transaction("rw",i.layoutState,async()=>{await i.layoutState.clear(),await i.layoutState.bulkAdd(r)})}static async getComponentState(e){return await(await mc.openProject(e)).layoutState.toArray()}async getLayerPanelState(){const e=await this.layerPanelState.toArray();if(e&&e.length>0)return e[0]}async getComponentState(e){return await this.layoutState.where("name").equals(e).last()}async updateComponentState(e,n){await this.layoutState.where("name").equals(e).modify(n)}async updateLayerPanelState(e){const n=(await this.layerPanelState.toArray())[0];await this.layerPanelState.update(n,e).then(function(r){console.log(r?"updated":"Nothing was updated",n,e,r)})}static fileNameOf(e,n){switch(e){case an.resources:return`${tN}-${n}`;case an.projects:return`${nN}-${n}`;default:throw new Error("invalid type:"+e)}}static async openProject(e){return new mc(this.fileNameOf(an.projects,e))}};mc.layerPanelState="layerPanelState",mc.layoutState="layoutState";let Hi=mc;BW();const CR=$k({parameterSet:DI,locations:[],edges:[],locationSerialNumber:0},[],DI.numLocations),Ble={parameterSet:DI,locations:CR.locations,edges:CR.edges,locationSerialNumber:CR.locationSerialNumber},Fle=$se(Ble),$h=FW(Fle),Ule=Ld({adjacencyMatrix:[],distanceMatrix:[],predecessorMatrix:[],transportationCostMatrix:[]}),zle=Ld({viewportCenter:[3,0,0],focusedIndices:[],selectedIndices:[],draggingIndex:null,chartScale:1,chartType:Da.ManufactureShare,autoLayoutFinished:!0}),$le=async function(t){const e=t.params.projectType,n=t.params.uuid,r=await Hi.openProject(n),i=parseFloat(t.params.zoom),s=parseFloat(t.params.y),o=parseFloat(t.params.x);return{uuid:n,project:r,type:e,y:s,x:o,zoom:i}},lM={GPUMatrixEngine:"GPUFloydWarshall",CPUMatrixEngine:"CPUFloydWarshall"},O9=lM.CPUMatrixEngine,jle=new URLSearchParams(window.location.search),W5=jle.get("engine")||O9,Gle={maxRowColLength:30,matrixEngineType:O9},Hle=Ld(Gle);function Vle(t){const e=t.map(n=>n.manufactureShare).reduce((n,r)=>n+r,0);t.forEach(n=>{n.manufactureShare=n.manufactureShare/e})}const Wle=50;function Xle(t,e){for(let r=0;r<Wle;r++)t.locations.forEach((i,s)=>{doe(i)}),t.locations.forEach((i,s)=>{i.income=hoe(t.parameterSet.manufactureShare,i)}),t.locations.forEach((i,s)=>{i.priceIndex=foe(t.locations,t.parameterSet.elasticitySubstitution,e,i,s)}),t.locations.forEach((i,s)=>{i.nominalWage=poe(t.locations,t.parameterSet.elasticitySubstitution,e,s)}),t.locations.forEach((i,s)=>{i.realWage=moe(t.parameterSet.manufactureShare,i)});const n=t.locations.map(r=>r.realWage*r.manufactureShare).reduce((r,i)=>r+i,0);t.locations.forEach((r,i)=>{r.manufactureShare+=goe(t.parameterSet.numLocations,t.parameterSet.elasticitySubstitution,n,r)}),Vle(t.locations)}class k9{constructor(e,n){this.numLocations=e,this.numEdges=n}getNumLocations(){return this.numLocations}getNumEdges(){return this.numEdges}getAdjacencyMatrix(e,n,r){return this.adjacencyMatrix?Promise.resolve(this.adjacencyMatrix):this.createAdjacencyMatrix(e,n,r)}async getDistanceMatrix(e,n,r){return this.distanceMatrix||await this.createDistanceAndPredecessorMatrix(e,n,r),Promise.resolve(this.distanceMatrix)}async getPredecessorMatrix(e,n,r){return this.predecessorMatrix||await this.createDistanceAndPredecessorMatrix(e,n,r),Promise.resolve(this.predecessorMatrix)}getTransportationCostMatrix(e,n,r){return this.transportationCostMatrix?Promise.resolve(this.transportationCostMatrix):this.createTransportationCostMatrix(e,n,r)}async updateAdjacencyMatrix(e,n,r){return this.adjacencyMatrix=void 0,this.distanceMatrix=void 0,this.predecessorMatrix=void 0,this.transportationCostMatrix=void 0,{transportationCostMatrix:await this.getTransportationCostMatrix(e,n,r),distanceMatrix:await this.getDistanceMatrix(e,n,r),predecessorMatrix:await this.getPredecessorMatrix(e,n,r),adjacencyMatrix:await this.getAdjacencyMatrix(e,n,r)}}async updateDistanceAndPredecessorMatrix(e,n,r){return this.distanceMatrix=void 0,this.predecessorMatrix=void 0,this.transportationCostMatrix=void 0,{transportationCostMatrix:await this.getTransportationCostMatrix(e,n,r),distanceMatrix:await this.getDistanceMatrix(e,n,r),predecessorMatrix:await this.getPredecessorMatrix(e,n,r)}}async updateTransportationCostMatrix(e,n,r){return this.transportationCostMatrix=void 0,{transportationCostMatrix:await this.getTransportationCostMatrix(e,n,r)}}}const Yle=()=>`
@group(0) @binding(0) var<uniform> numVertices: u32;
@group(0) @binding(4) var<storage, read_write> adjacencyMatrix: array<f32>;

const WORK_GROUP_SIZE = 64u;
@compute @workgroup_size(WORK_GROUP_SIZE)
fn main(@builtin(global_invocation_id) global_id: vec3<u32>) {
    let index = global_id.x;
    let totalSize = numVertices * numVertices;
    let items = max(1, totalSize / WORK_GROUP_SIZE);
    // 
    let start = index * items; // 
    let end = min((index + 1) * items, totalSize); // 

    for (var i: u32 = start; i < end; i++) {
        let rowIndex = i / numVertices;
        let colIndex = i % numVertices;
        if (rowIndex === colIndex) {
           adjacencyMatrix[i] = f32(0); // 0
        } else {
            adjacencyMatrix[i] = f32(1e10); // 1e10
        }
    }
}
`,Kle=()=>`
struct Vertex {
    x: f32,
    y: f32
};

struct Edge {
    start: u32,
    end: u32
};

fn distance(a: vec2<f32>, b:vec2<f32>) -> f32 {
    let dx: f32 = a.x - b.x;
    let dy: f32 = a.y - b.y;
    return sqrt(dx * dx + dy * dy) * ${Fh};
}

fn distance4(ax: f32, ay: f32, bx: f32, by: f32) -> f32 {
    let dx: f32 = ax - bx;
    let dy: f32 = ay - by;
    return sqrt(dx * dx + dy * dy) * ${Fh};
}

@group(0) @binding(0) var<uniform> numVertices: u32;
@group(0) @binding(1) var<uniform> numEdges: u32;
@group(0) @binding(2) var<storage, read> vertices: array<vec2<f32>>;
@group(0) @binding(3) var<storage, read> edges: array<u32>;
@group(0) @binding(4) var<storage, read_write> adjacencyMatrix: array<f32>;

const WORK_GROUP_SIZE = 64u;
@compute @workgroup_size(WORK_GROUP_SIZE)
fn main(@builtin(global_invocation_id) global_id: vec3<u32>) {
    let edgeIndex: u32 = global_id.x;
    let edgeItems: u32 = max(1u, numEdges / WORK_GROUP_SIZE);
    let startEdgeIndex: u32 = edgeIndex * edgeItems; // 
    let endEdgeIndex: u32 = min((edgeIndex + 1u) * edgeItems, numEdges); // 

    for (var edgeIndex: u32 = startEdgeIndex; edgeIndex < endEdgeIndex; edgeIndex++) {
      //let edge = edges[edgeIndex * 2];
      //let startVertexIndex: u32 = edge.x;
      //let endVertexIndex: u32 = edge.y;
      //let edge = edges[edgeIndex * 2];
      let startVertexIndex: u32 = edges[edgeIndex * 2];
      let endVertexIndex: u32 = edges[edgeIndex * 2 + 1];
      
      let dx = vertices[startVertexIndex][0] - vertices[endVertexIndex][0];
      let dy = vertices[startVertexIndex][1] - vertices[endVertexIndex][1];
      let distance: f32 = sqrt(dx * dx + dy * dy) * ${Fh};
      
      let matrixIndex1: u32 = (startVertexIndex * numVertices) + endVertexIndex;
      let matrixIndex2: u32 = (endVertexIndex * numVertices) + startVertexIndex;

      adjacencyMatrix[matrixIndex1] = distance;
      adjacencyMatrix[matrixIndex2] = distance;

/*
      adjacencyMatrix[edgeIndex*4+0u] = f32(startVertexIndex); 
      adjacencyMatrix[edgeIndex*4+1u] = f32(endVertexIndex);
      adjacencyMatrix[edgeIndex*4+2u] = f32(startVertexIndex * numVertices + endVertexIndex);
      adjacencyMatrix[edgeIndex*4+3u] = f32(endVertexIndex * numVertices + startVertexIndex);
      */
      //adjacencyMatrix[edgeIndex*4+3u] = distance;
    }
}
`,qle=()=>`
@group(0) @binding(0) var<uniform> numVertices: u32;
@group(0) @binding(4) var<storage, read_write> adjacencyMatrix: array<f32>;
@group(0) @binding(5) var<storage, read_write> distanceMatrix: array<f32>;
@group(0) @binding(6) var<storage, read_write> predecessorMatrix: array<i32>;

const WORKGROUP_SIZE = 64u;

@compute @workgroup_size(WORKGROUP_SIZE)
fn main(@builtin(global_invocation_id) global_id: vec3<u32>) {
    let numElements = numVertices * numVertices;
    let numElementsPerThread: u32 = (numElements + WORKGROUP_SIZE - 1u) / WORKGROUP_SIZE;
    let startIndex: u32 = global_id.x * numElementsPerThread;
    let endIndex: u32 = min(startIndex + numElementsPerThread, numElements);

    // 
    for (var index: u32 = startIndex; index < endIndex; index++) {
        let i = index / numVertices;
        let j = index % numVertices;

        // distanceMatrixpredecessorMatrix
        if (i < numVertices && j < numVertices) {
            distanceMatrix[index] = adjacencyMatrix[index];
            predecessorMatrix[index] = i32(j);
        }
    }

    // Floyd-Warshall
    for (var k: u32 = 0; k < numVertices; k++) {
        workgroupBarrier(); // 

        for (var index: u32 = startIndex; index < endIndex; index++) {
            let i = index / numVertices;
            let j = index % numVertices;

            if (i < numVertices && j < numVertices) {
                let ik = i * numVertices + k;
                let kj = k * numVertices + j;
                let newDist = distanceMatrix[ik] + distanceMatrix[kj];

                if (newDist < distanceMatrix[index]) {
                    distanceMatrix[index] = newDist;
                    predecessorMatrix[index] = predecessorMatrix[ik];
                }
            }
        }
    }
}`,Zle=()=>`
@group(0) @binding(0) var<uniform> numVertices: u32;
@group(0) @binding(5) var<storage, read_write> distanceMatrix: array<f32>;
@group(0) @binding(7) var<storage, read_write> maxValueBuffer : array<f32>;

const WORKGROUP_SIZE = 1u;

@compute @workgroup_size(WORKGROUP_SIZE)
fn main(@builtin(global_invocation_id) global_id : vec3<u32>, @builtin(local_invocation_id) local_id : vec3<u32>) {

    var max_value: f32 = -1e10;

    // 
    for (var i: u32 = 0; i < arrayLength(&distanceMatrix); i = i + 1) {
        let value = distanceMatrix[i];
        if (value !== 1e10 && value > max_value) {
            max_value = value;
        }
    }
    // 
    maxValueBuffer[0] = max_value;
}
`,Qle=()=>`
@group(0) @binding(0) var<uniform> numVertices: u32;
@group(0) @binding(5) var<storage, read_write> distanceMatrix: array<f32>;
@group(0) @binding(7) var<storage, read_write> maxValueBuffer: array<f32>;
@group(0) @binding(8) var<storage, read_write> transportationCostBuffer: array<f32>;
@group(0) @binding(9) var<storage, read_write> transportationCostMatrix: array<f32>;

@compute @workgroup_size(64)
fn main(@builtin(global_invocation_id) global_id: vec3<u32>) {

  let i = global_id.x;
  if(distanceMatrix[i] != f32(1e10)) {
    let normalized = exp(transportationCostBuffer[0] * distanceMatrix[i] / maxValueBuffer[0]);
    transportationCostMatrix[i] = normalized;
  }else{
    transportationCostMatrix[i] = f32(1e10);
  }
}
 `,Jle=t=>t.createBindGroupLayout({entries:[{binding:0,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform",minBindingSize:4}},{binding:1,visibility:GPUShaderStage.COMPUTE,buffer:{type:"uniform",minBindingSize:4}},{binding:2,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage",hasDynamicOffset:!1}},{binding:3,visibility:GPUShaderStage.COMPUTE,buffer:{type:"read-only-storage",hasDynamicOffset:!1}},{binding:4,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:5,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:6,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:7,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}},{binding:8,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage",minBindingSize:4}},{binding:9,visibility:GPUShaderStage.COMPUTE,buffer:{type:"storage"}}]}),ece=async()=>{var e;const t=await((e=navigator.gpu)==null?void 0:e.requestAdapter());if(!t)throw new Error("GPU Adapter is not available");return await t.requestDevice()},X5=({device:t,vertexBuffer:e,edgeBuffer:n,transportationCostBuffer:r},i,s,o)=>{const a=new Map;i.forEach((u,d)=>{a.set(u.id,d)});const l=new Float32Array(i.length*2),c=new Uint32Array(s.length*2);if(l.set(i.flatMap(u=>u.point)),c.set(s.flatMap(u=>{const d=a.get(u.source),h=a.get(u.target);return[d!==void 0?d:-1,h!==void 0?h:-1]})),t.queue.writeBuffer(e,0,l),t.queue.writeBuffer(n,0,c),o!==void 0){const u=Math.log(o);t.queue.writeBuffer(r,0,new Float32Array([u]))}},tce=async(t,e)=>{const n=await ece(),r=Jle(n),i=n.createShaderModule({code:Yle()}),s=n.createShaderModule({code:Kle()}),o=n.createShaderModule({code:qle()}),a=n.createShaderModule({code:Zle()}),l=n.createShaderModule({code:Qle()}),c=t**2*4,u=n.createBuffer({size:4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST});n.queue.writeBuffer(u,0,new Uint32Array([t]));const d=n.createBuffer({size:4,usage:GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST});n.queue.writeBuffer(d,0,new Uint32Array([e]));const h=n.createBuffer({size:t*2*4,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST}),f=n.createBuffer({size:Math.max(4,e*2*4),usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST}),p=n.createBuffer({size:c,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC}),m=n.createBuffer({size:c,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC}),_=n.createBuffer({size:c,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC}),y=n.createBuffer({size:4,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC}),x=n.createBuffer({size:4,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_DST}),b=n.createBuffer({size:c,usage:GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC}),E=new ArrayBuffer(t*4*2),w=new ArrayBuffer(Math.max(4,e*4*2)),T=n.createBindGroup({entries:[{binding:0,resource:{buffer:u}},{binding:1,resource:{buffer:d}},{binding:2,resource:{buffer:h}},{binding:3,resource:{buffer:f}},{binding:4,resource:{buffer:p}},{binding:5,resource:{buffer:m}},{binding:6,resource:{buffer:_}},{binding:7,resource:{buffer:y}},{binding:8,resource:{buffer:x}},{binding:9,resource:{buffer:b}}],layout:r}),C=n.createComputePipeline({layout:n.createPipelineLayout({bindGroupLayouts:[r]}),compute:{module:i,entryPoint:"main"}}),P=n.createComputePipeline({layout:n.createPipelineLayout({bindGroupLayouts:[r]}),compute:{module:s,entryPoint:"main"}}),M=n.createComputePipeline({layout:n.createPipelineLayout({bindGroupLayouts:[r]}),compute:{module:o,entryPoint:"main"}}),N=n.createComputePipeline({layout:n.createPipelineLayout({bindGroupLayouts:[r]}),compute:{module:a,entryPoint:"main"}}),F=n.createComputePipeline({layout:n.createPipelineLayout({bindGroupLayouts:[r]}),compute:{module:l,entryPoint:"main"}});return{device:n,numVertices:t,numEdges:e,matrixSize:c,vertexData:E,edgeData:w,vertexBuffer:h,edgeBuffer:f,bindGroup:T,initializeAdjacencyMatrixShaderModule:i,createAdjacencyMatrixShaderModule:s,createDistanceAndPredecessorMatrixShaderModule:o,findMaxValueShaderModule:a,createTransportationCostMatrixShaderModule:l,adjacencyMatrixBuffer:p,distanceMatrixBuffer:m,predecessorMatrixBuffer:_,maxValueBuffer:y,transportationCostBuffer:x,transportationCostMatrixBuffer:b,initializeAdjacencyMatrixPipeline:C,createAdjacencyMatrixPipeline:P,createDistanceAndPredecessorMatrixPipeline:M,findMaxValuePipeline:N,createTransportationCostMatrixPipeline:F}},Oy=(t,e,n,r,i,s,o)=>{const a=t.createCommandEncoder(),l=a.beginComputePass();return l.setPipeline(r),l.setBindGroup(e,n),l.dispatchWorkgroups(i,s,o),l.end(),a},AR=t=>{const e=[Oy(t.device,0,t.bindGroup,t.initializeAdjacencyMatrixPipeline,Math.ceil(t.matrixSize/64)),Oy(t.device,0,t.bindGroup,t.createAdjacencyMatrixPipeline,Math.max(1,Math.ceil(t.numEdges/64)))],n=t.device.createBuffer({size:t.matrixSize,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});return e[1].copyBufferToBuffer(t.adjacencyMatrixBuffer,0,n,0,t.matrixSize),{adjacencyMatrixReadBuffer:n,gpuCommandBuffers:e.map(r=>r.finish())}},RR=async(t,e)=>{await t.mapAsync(GPUMapMode.READ);const n=new Float32Array(t.getMappedRange()),r=wg(e,(i,s)=>n[i*e+s]);return t.unmap(),r},Y5=t=>{const e=Oy(t.device,0,t.bindGroup,t.createDistanceAndPredecessorMatrixPipeline,Math.ceil(t.numVertices/64)),n=t.device.createBuffer({size:t.matrixSize,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),r=t.device.createBuffer({size:t.matrixSize,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});e.copyBufferToBuffer(t.distanceMatrixBuffer,0,n,0,t.matrixSize),e.copyBufferToBuffer(t.predecessorMatrixBuffer,0,r,0,t.matrixSize);const i=e.finish();return{distanceMatrixReadBuffer:n,predecessorMatrixReadBuffer:r,gpuCommandBuffer:i}},K5=async(t,e)=>{await t.mapAsync(GPUMapMode.READ);const n=new Float32Array(t.getMappedRange()),r=wg(e,(i,s)=>n[i*e+s]);return t.unmap(),r},q5=async(t,e)=>{await t.mapAsync(GPUMapMode.READ);const n=new Int32Array(t.getMappedRange()),r=wg(e,(i,s)=>n[i*e+s]);return t.unmap(),r},nce=t=>{const e=Oy(t.device,0,t.bindGroup,t.findMaxValuePipeline,1),n=t.device.createBuffer({size:4,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});e.copyBufferToBuffer(t.maxValueBuffer,0,n,0,4);const r=e.finish();return{maxValueReadBuffer:n,gpuCommandBuffer:r}},rce=t=>{const e=Oy(t.device,0,t.bindGroup,t.createTransportationCostMatrixPipeline,Math.ceil(t.numVertices*t.numVertices/64)),n=t.device.createBuffer({size:t.matrixSize,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});e.copyBufferToBuffer(t.transportationCostMatrixBuffer,0,n,0,t.matrixSize);const r=e.finish();return{transportationCostMatrixReadBuffer:n,gpuCommandBuffer:r}},ice=async(t,e)=>{await t.mapAsync(GPUMapMode.READ);const n=new Float32Array(t.getMappedRange()),r=wg(e,(i,s)=>n[i*e+s]);return t.unmap(),r};class sce extends k9{constructor(e,n){super(e,n)}async update(e,n,r){return(!this.resources||this.resources.numVertices!==e.length||this.resources.numEdges!==n.length)&&(this.resources=await tce(e.length,n.length)),X5(this.resources,e,n,r),this.resources}async createAdjacencyMatrix(e,n,r){const i=await this.update(e,n,r),{gpuCommandBuffers:s,adjacencyMatrixReadBuffer:o}=AR(i);i.device.queue.submit(s);const a=await RR(o,i.numVertices);return this.adjacencyMatrix=a}async createDistanceAndPredecessorMatrix(e,n,r){const i=await this.update(e,n,r);X5(i,e,n,r);const{adjacencyMatrixReadBuffer:s,gpuCommandBuffers:o}=AR(i),{distanceMatrixReadBuffer:a,predecessorMatrixReadBuffer:l,gpuCommandBuffer:c}=Y5(i);i.device.queue.submit(o.concat(c));const u=await RR(s,i.numVertices),d=await K5(a,i.numVertices),h=await q5(l,i.numVertices);return this.adjacencyMatrix=u,this.distanceMatrix=d,this.predecessorMatrix=h,Promise.resolve([d,h])}async createTransportationCostMatrix(e,n,r){const i=await this.update(e,n,r),{adjacencyMatrixReadBuffer:s,gpuCommandBuffers:o}=AR(i),{distanceMatrixReadBuffer:a,predecessorMatrixReadBuffer:l,gpuCommandBuffer:c}=Y5(i),{maxValueReadBuffer:u,gpuCommandBuffer:d}=nce(i),{transportationCostMatrixReadBuffer:h,gpuCommandBuffer:f}=rce(i);i.device.queue.submit(o.concat(c).concat([d,f]));const p=await RR(s,i.numVertices),m=await K5(a,i.numVertices),_=await q5(l,i.numVertices),y=await ice(h,i.numVertices);return this.adjacencyMatrix=p,this.distanceMatrix=m,this.predecessorMatrix=_,this.transportationCostMatrix=y,Promise.resolve(y)}}const op=16;function Z5(t){const e=t.length,n=new Array(e),r=new Array(e);for(let i=0;i<e;i++){n[i]=new Array(e),r[i]=new Array(e);for(let s=0;s<e;s++)n[i][s]=t[i][s],r[i][s]=s}for(let i=0;i<e;i+=op)for(let s=0;s<e;s+=op)for(let o=0;o<e;o+=op)for(let a=i;a<Math.min(e,i+op);a++)for(let l=s;l<Math.min(e,s+op);l++)for(let c=o;c<Math.min(e,o+op);c++)n[l][a]+n[a][c]<n[l][c]&&(n[l][c]=n[l][a]+n[a][c],r[l][c]=r[l][a]);for(let i=0;i<e;i++)for(let s=0;s<e;s++)for(let o=0;o<e;o++)n[s][i]+n[i][o]<n[s][o]&&(n[s][o]=n[s][i]+n[i][o],r[s][o]=r[s][i]);return[n,r]}function Q5(t,e){const n=wg(t.length,(i,s)=>i!==s?Number.POSITIVE_INFINITY:0),r=new Map(t.map((i,s)=>[i.id,s]));return e.forEach(i=>{const s=i.distance||(i.distance=Uae(t,i.source,i.target)),o=r.get(i.source),a=r.get(i.target);o!==void 0&&a!==void 0&&(n[o][a]=s,n[a][o]=s)}),n}function J5(t,e){const n=t.length;let r=0;for(let o=0;o<n;o++)if(t&&o<t.length)for(let a=0;a<n;a++)a<t[o].length&&t[o][a]!==Number.POSITIVE_INFINITY&&(r=Math.max(t[o][a],r));const i=wg(n,(o,a)=>o!==a?Number.POSITIVE_INFINITY:0);if(r===0)return i;const s=Math.log(e);for(let o=0;o<n;o++)if(t&&o<t.length){for(let a=o;a<n;a++)if(a<t[o].length)if(t[o][a]!==Number.POSITIVE_INFINITY){const l=t[o][a]/r;i[a][o]=i[o][a]=Math.exp(s*l)}else i[a][o]=i[o][a]=Number.POSITIVE_INFINITY}return i}class eU extends k9{createAdjacencyMatrix(e,n){return Promise.resolve(this.adjacencyMatrix=Q5(e,n))}async createDistanceAndPredecessorMatrix(e,n,r){const[i,s]=Z5(await this.getAdjacencyMatrix(e,n,r));return this.distanceMatrix=i,this.predecessorMatrix=s,Promise.resolve([this.distanceMatrix,this.predecessorMatrix])}async createTransportationCostMatrix(e,n,r){const i=J5(await this.getDistanceMatrix(e,n,r),r);return this.transportationCostMatrix=i,Promise.resolve(i)}async createMatrices(e,n,r){const i=Q5(e,n),[s,o]=Z5(i),a=J5(s,r);return this.adjacencyMatrix=i,this.distanceMatrix=s,this.predecessorMatrix=o,this.transportationCostMatrix=a,Promise.resolve({adjacencyMatrix:i,distanceMatrix:s,predecessorMatrix:o,transportationCostMatrix:a})}}const tU=(t,e)=>W5===lM.CPUMatrixEngine?new eU(t,e):W5===lM.GPUMatrixEngine?new sce(t,e):new eU(t,e);function oce(t,e){const[n,r]=A.useState(tU(t,e));return A.useEffect(()=>{r(tU(t,e))},[t,e]),n}const ace={black:"#000",white:"#fff"},ky=ace,lce={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},ap=lce,cce={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},lp=cce,uce={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},cp=uce,dce={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},up=dce,hce={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},dp=hce,fce={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},v0=fce,pce={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},mce=pce;function bd(t){let e="https://mui.com/production-error/?code="+t;for(let n=1;n<arguments.length;n+=1)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified MUI error #"+t+"; visit "+e+" for the full message."}const S1="$$material";function $e(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var gce=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,vce=ZG(function(t){return gce.test(t)||t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)<91}),yce=MO(function(t,e){var n=t.styles,r=BT([n],void 0,A.useContext(UT)),i=A.useRef();return FF(function(){var s=e.key+"-global",o=new e.sheet.constructor({key:s,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),a=!1,l=document.querySelector('style[data-emotion="'+s+" "+r.name+'"]');return e.sheet.tags.length&&(o.before=e.sheet.tags[0]),l!==null&&(a=!0,l.setAttribute("data-emotion",s),o.hydrate([l])),i.current=[o,a],function(){o.flush()}},[e]),FF(function(){var s=i.current,o=s[0],a=s[1];if(a){s[1]=!1;return}if(r.next!==void 0&&IO(e,r.next,!0),o.tags.length){var l=o.tags[o.tags.length-1].nextElementSibling;o.before=l,o.flush()}e.insert("",r,o,!1)},[e,r.name]),null});function If(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return BT(e)}var Od=function(){var e=If.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},_ce=vce,bce=function(e){return e!=="theme"},nU=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?_ce:bce},rU=function(e,n,r){var i;if(n){var s=n.shouldForwardProp;i=e.__emotion_forwardProp&&s?function(o){return e.__emotion_forwardProp(o)&&s(o)}:s}return typeof i!="function"&&r&&(i=e.__emotion_forwardProp),i},xce=function(e){var n=e.cache,r=e.serialized,i=e.isStringTag;return PO(n,r,i),oH(function(){return IO(n,r,i)}),null},Ece=function t(e,n){var r=e.__emotion_real===e,i=r&&e.__emotion_base||e,s,o;n!==void 0&&(s=n.label,o=n.target);var a=rU(e,n,r),l=a||nU(i),c=!l("as");return function(){var u=arguments,d=r&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(s!==void 0&&d.push("label:"+s+";"),u[0]==null||u[0].raw===void 0)d.push.apply(d,u);else{d.push(u[0][0]);for(var h=u.length,f=1;f<h;f++)d.push(u[f],u[0][f])}var p=MO(function(m,_,y){var x=c&&m.as||i,b="",E=[],w=m;if(m.theme==null){w={};for(var T in m)w[T]=m[T];w.theme=A.useContext(UT)}typeof m.className=="string"?b=rH(_.registered,E,m.className):m.className!=null&&(b=m.className+" ");var C=BT(d.concat(E),_.registered,w);b+=_.key+"-"+C.name,o!==void 0&&(b+=" "+o);var P=c&&a===void 0?nU(x):l,M={};for(var N in m)c&&N==="as"||P(N)&&(M[N]=m[N]);return M.className=b,M.ref=y,A.createElement(A.Fragment,null,A.createElement(xce,{cache:_,serialized:C,isStringTag:typeof x=="string"}),A.createElement(x,M))});return p.displayName=s!==void 0?s:"Styled("+(typeof i=="string"?i:i.displayName||i.name||"Component")+")",p.defaultProps=e.defaultProps,p.__emotion_real=p,p.__emotion_base=i,p.__emotion_styles=d,p.__emotion_forwardProp=a,Object.defineProperty(p,"toString",{value:function(){return"."+o}}),p.withComponent=function(m,_){return t(m,U({},n,_,{shouldForwardProp:rU(p,_,!0)})).apply(void 0,d)},p}},wce=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],Tt=Ece.bind();wce.forEach(function(t){Tt[t]=Tt(t)});var N9={exports:{}},Tce="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Sce=Tce,Cce=Sce;function D9(){}function B9(){}B9.resetWarningCache=D9;var Ace=function(){function t(r,i,s,o,a,l){if(l!==Cce){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:B9,resetWarningCache:D9};return n.PropTypes=n,n};N9.exports=Ace();var Xc=N9.exports;const ir=Ad(Xc);function Rce(t){return t==null||Object.keys(t).length===0}function Pce(t){const{styles:e,defaultTheme:n={}}=t,r=typeof e=="function"?i=>e(Rce(i)?n:i):e;return Z.jsx(yce,{styles:r})}function F9(t,e){return Tt(t,e)}const Ice=(t,e)=>{Array.isArray(t.__emotion_styles)&&(t.__emotion_styles=e(t.__emotion_styles))};function Fu(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function U9(t){if(!Fu(t))return t;const e={};return Object.keys(t).forEach(n=>{e[n]=U9(t[n])}),e}function Ys(t,e,n={clone:!0}){const r=n.clone?U({},t):t;return Fu(t)&&Fu(e)&&Object.keys(e).forEach(i=>{i!=="__proto__"&&(Fu(e[i])&&i in t&&Fu(t[i])?r[i]=Ys(t[i],e[i],n):n.clone?r[i]=Fu(e[i])?U9(e[i]):e[i]:r[i]=e[i])}),r}var Hn={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rN=Symbol.for("react.element"),iN=Symbol.for("react.portal"),uS=Symbol.for("react.fragment"),dS=Symbol.for("react.strict_mode"),hS=Symbol.for("react.profiler"),fS=Symbol.for("react.provider"),pS=Symbol.for("react.context"),Mce=Symbol.for("react.server_context"),mS=Symbol.for("react.forward_ref"),gS=Symbol.for("react.suspense"),vS=Symbol.for("react.suspense_list"),yS=Symbol.for("react.memo"),_S=Symbol.for("react.lazy"),Lce=Symbol.for("react.offscreen"),z9;z9=Symbol.for("react.module.reference");function pa(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case rN:switch(t=t.type,t){case uS:case hS:case dS:case gS:case vS:return t;default:switch(t=t&&t.$$typeof,t){case Mce:case pS:case mS:case _S:case yS:case fS:return t;default:return e}}case iN:return e}}}Hn.ContextConsumer=pS;Hn.ContextProvider=fS;Hn.Element=rN;Hn.ForwardRef=mS;Hn.Fragment=uS;Hn.Lazy=_S;Hn.Memo=yS;Hn.Portal=iN;Hn.Profiler=hS;Hn.StrictMode=dS;Hn.Suspense=gS;Hn.SuspenseList=vS;Hn.isAsyncMode=function(){return!1};Hn.isConcurrentMode=function(){return!1};Hn.isContextConsumer=function(t){return pa(t)===pS};Hn.isContextProvider=function(t){return pa(t)===fS};Hn.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===rN};Hn.isForwardRef=function(t){return pa(t)===mS};Hn.isFragment=function(t){return pa(t)===uS};Hn.isLazy=function(t){return pa(t)===_S};Hn.isMemo=function(t){return pa(t)===yS};Hn.isPortal=function(t){return pa(t)===iN};Hn.isProfiler=function(t){return pa(t)===hS};Hn.isStrictMode=function(t){return pa(t)===dS};Hn.isSuspense=function(t){return pa(t)===gS};Hn.isSuspenseList=function(t){return pa(t)===vS};Hn.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===uS||t===hS||t===dS||t===gS||t===vS||t===Lce||typeof t=="object"&&t!==null&&(t.$$typeof===_S||t.$$typeof===yS||t.$$typeof===fS||t.$$typeof===pS||t.$$typeof===mS||t.$$typeof===z9||t.getModuleId!==void 0)};Hn.typeOf=pa;function xe(t){if(typeof t!="string")throw new Error(bd(7));return t.charAt(0).toUpperCase()+t.slice(1)}function bw(...t){return t.reduce((e,n)=>n==null?e:function(...i){e.apply(this,i),n.apply(this,i)},()=>{})}function C1(t,e=166){let n;function r(...i){const s=()=>{t.apply(this,i)};clearTimeout(n),n=setTimeout(s,e)}return r.clear=()=>{clearTimeout(n)},r}function Oce(t,e){return()=>null}function _m(t,e){var n,r;return A.isValidElement(t)&&e.indexOf((n=t.type.muiName)!=null?n:(r=t.type)==null||(r=r._payload)==null||(r=r.value)==null?void 0:r.muiName)!==-1}function tr(t){return t&&t.ownerDocument||document}function $l(t){return tr(t).defaultView||window}function kce(t,e){return()=>null}function xw(t,e){typeof t=="function"?t(e):t&&(t.current=e)}const Os=typeof window<"u"?A.useLayoutEffect:A.useEffect;let iU=0;function Nce(t){const[e,n]=A.useState(t),r=t||e;return A.useEffect(()=>{e==null&&(iU+=1,n(`mui-${iU}`))},[e]),r}const sU=OE.useId;function kd(t){if(sU!==void 0){const e=sU();return t??e}return Nce(t)}function Dce(t,e,n,r,i){return null}function xd({controlled:t,default:e,name:n,state:r="value"}){const{current:i}=A.useRef(t!==void 0),[s,o]=A.useState(e),a=i?t:s,l=A.useCallback(c=>{i||o(c)},[]);return[a,l]}function Vr(t){const e=A.useRef(t);return Os(()=>{e.current=t}),A.useRef((...n)=>(0,e.current)(...n)).current}function Fn(...t){return A.useMemo(()=>t.every(e=>e==null)?null:e=>{t.forEach(n=>{xw(n,e)})},t)}const oU={};function Bce(t,e){const n=A.useRef(oU);return n.current===oU&&(n.current=t(e)),n}const Fce=[];function Uce(t){A.useEffect(t,Fce)}class A1{constructor(){this.currentId=0,this.clear=()=>{this.currentId!==0&&(clearTimeout(this.currentId),this.currentId=0)},this.disposeEffect=()=>this.clear}static create(){return new A1}start(e,n){this.clear(),this.currentId=setTimeout(()=>{this.currentId=0,n()},e)}}function Wu(){const t=Bce(A1.create).current;return Uce(t.disposeEffect),t}let bS=!0,cM=!1;const zce=new A1,$ce={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function jce(t){const{type:e,tagName:n}=t;return!!(n==="INPUT"&&$ce[e]&&!t.readOnly||n==="TEXTAREA"&&!t.readOnly||t.isContentEditable)}function Gce(t){t.metaKey||t.altKey||t.ctrlKey||(bS=!0)}function PR(){bS=!1}function Hce(){this.visibilityState==="hidden"&&cM&&(bS=!0)}function Vce(t){t.addEventListener("keydown",Gce,!0),t.addEventListener("mousedown",PR,!0),t.addEventListener("pointerdown",PR,!0),t.addEventListener("touchstart",PR,!0),t.addEventListener("visibilitychange",Hce,!0)}function Wce(t){const{target:e}=t;try{return e.matches(":focus-visible")}catch{}return bS||jce(e)}function xS(){const t=A.useCallback(i=>{i!=null&&Vce(i.ownerDocument)},[]),e=A.useRef(!1);function n(){return e.current?(cM=!0,zce.start(100,()=>{cM=!1}),e.current=!1,!0):!1}function r(i){return Wce(i)?(e.current=!0,!0):!1}return{isFocusVisibleRef:e,onFocus:r,onBlur:n,ref:t}}function $9(t){const e=t.documentElement.clientWidth;return Math.abs(window.innerWidth-e)}let hp;function j9(){if(hp)return hp;const t=document.createElement("div"),e=document.createElement("div");return e.style.width="10px",e.style.height="1px",t.appendChild(e),t.dir="rtl",t.style.fontSize="14px",t.style.width="4px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.overflow="scroll",document.body.appendChild(t),hp="reverse",t.scrollLeft>0?hp="default":(t.scrollLeft=1,t.scrollLeft===0&&(hp="negative")),document.body.removeChild(t),hp}function Xce(t,e){const n=t.scrollLeft;if(e!=="rtl")return n;switch(j9()){case"negative":return t.scrollWidth-t.clientWidth+n;case"reverse":return t.scrollWidth-t.clientWidth-n;default:return n}}const G9=t=>{const e=A.useRef({});return A.useEffect(()=>{e.current=t}),e.current};function H9(t){return A.Children.toArray(t).filter(e=>A.isValidElement(e))}const Yce={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:-1,overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"},Kce=Yce;function R1(t,e){const n=U({},e);return Object.keys(t).forEach(r=>{if(r.toString().match(/^(components|slots)$/))n[r]=U({},t[r],n[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const i=t[r]||{},s=e[r];n[r]={},!s||!Object.keys(s)?n[r]=i:!i||!Object.keys(i)?n[r]=s:(n[r]=U({},s),Object.keys(i).forEach(o=>{n[r][o]=R1(i[o],s[o])}))}else n[r]===void 0&&(n[r]=t[r])}),n}function st(t,e,n=void 0){const r={};return Object.keys(t).forEach(i=>{r[i]=t[i].reduce((s,o)=>{if(o){const a=e(o);a!==""&&s.push(a),n&&n[o]&&s.push(n[o])}return s},[]).join(" ")}),r}const aU=t=>t,qce=()=>{let t=aU;return{configure(e){t=e},generate(e){return t(e)},reset(){t=aU}}},Zce=qce(),sN=Zce,V9={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function ot(t,e,n="Mui"){const r=V9[e];return r?`${n}-${r}`:`${sN.generate(t)}-${e}`}function it(t,e,n="Mui"){const r={};return e.forEach(i=>{r[i]=ot(t,i,n)}),r}function xh(t,e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER){return Math.max(e,Math.min(t,n))}const Qce=["values","unit","step"],Jce=t=>{const e=Object.keys(t).map(n=>({key:n,val:t[n]}))||[];return e.sort((n,r)=>n.val-r.val),e.reduce((n,r)=>U({},n,{[r.key]:r.val}),{})};function eue(t){const{values:e={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:n="px",step:r=5}=t,i=$e(t,Qce),s=Jce(e),o=Object.keys(s);function a(h){return`@media (min-width:${typeof e[h]=="number"?e[h]:h}${n})`}function l(h){return`@media (max-width:${(typeof e[h]=="number"?e[h]:h)-r/100}${n})`}function c(h,f){const p=o.indexOf(f);return`@media (min-width:${typeof e[h]=="number"?e[h]:h}${n}) and (max-width:${(p!==-1&&typeof e[o[p]]=="number"?e[o[p]]:f)-r/100}${n})`}function u(h){return o.indexOf(h)+1<o.length?c(h,o[o.indexOf(h)+1]):a(h)}function d(h){const f=o.indexOf(h);return f===0?a(o[1]):f===o.length-1?l(o[f]):c(h,o[o.indexOf(h)+1]).replace("@media","@media not all and")}return U({keys:o,values:s,up:a,down:l,between:c,only:u,not:d,unit:n},i)}const tue={borderRadius:4},nue=tue;function kv(t,e){return e?Ys(t,e,{clone:!1}):t}const oN={xs:0,sm:600,md:900,lg:1200,xl:1536},lU={keys:["xs","sm","md","lg","xl"],up:t=>`@media (min-width:${oN[t]}px)`};function Za(t,e,n){const r=t.theme||{};if(Array.isArray(e)){const s=r.breakpoints||lU;return e.reduce((o,a,l)=>(o[s.up(s.keys[l])]=n(e[l]),o),{})}if(typeof e=="object"){const s=r.breakpoints||lU;return Object.keys(e).reduce((o,a)=>{if(Object.keys(s.values||oN).indexOf(a)!==-1){const l=s.up(a);o[l]=n(e[a],a)}else{const l=a;o[l]=e[l]}return o},{})}return n(e)}function W9(t={}){var e;return((e=t.keys)==null?void 0:e.reduce((r,i)=>{const s=t.up(i);return r[s]={},r},{}))||{}}function X9(t,e){return t.reduce((n,r)=>{const i=n[r];return(!i||Object.keys(i).length===0)&&delete n[r],n},e)}function rue(t,...e){const n=W9(t),r=[n,...e].reduce((i,s)=>Ys(i,s),{});return X9(Object.keys(n),r)}function iue(t,e){if(typeof t!="object")return{};const n={},r=Object.keys(e);return Array.isArray(t)?r.forEach((i,s)=>{s<t.length&&(n[i]=!0)}):r.forEach(i=>{t[i]!=null&&(n[i]=!0)}),n}function IR({values:t,breakpoints:e,base:n}){const r=n||iue(t,e),i=Object.keys(r);if(i.length===0)return t;let s;return i.reduce((o,a,l)=>(Array.isArray(t)?(o[a]=t[l]!=null?t[l]:t[s],s=l):typeof t=="object"?(o[a]=t[a]!=null?t[a]:t[s],s=a):o[a]=t,o),{})}function ES(t,e,n=!0){if(!e||typeof e!="string")return null;if(t&&t.vars&&n){const r=`vars.${e}`.split(".").reduce((i,s)=>i&&i[s]?i[s]:null,t);if(r!=null)return r}return e.split(".").reduce((r,i)=>r&&r[i]!=null?r[i]:null,t)}function Ew(t,e,n,r=n){let i;return typeof t=="function"?i=t(n):Array.isArray(t)?i=t[n]||r:i=ES(t,n)||r,e&&(i=e(i,r,t)),i}function Wr(t){const{prop:e,cssProperty:n=t.prop,themeKey:r,transform:i}=t,s=o=>{if(o[e]==null)return null;const a=o[e],l=o.theme,c=ES(l,r)||{};return Za(o,a,d=>{let h=Ew(c,i,d);return d===h&&typeof d=="string"&&(h=Ew(c,i,`${e}${d==="default"?"":xe(d)}`,d)),n===!1?h:{[n]:h}})};return s.propTypes={},s.filterProps=[e],s}function sue(t){const e={};return n=>(e[n]===void 0&&(e[n]=t(n)),e[n])}const oue={m:"margin",p:"padding"},aue={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},cU={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},lue=sue(t=>{if(t.length>2)if(cU[t])t=cU[t];else return[t];const[e,n]=t.split(""),r=oue[e],i=aue[n]||"";return Array.isArray(i)?i.map(s=>r+s):[r+i]}),aN=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],lN=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...aN,...lN];function P1(t,e,n,r){var i;const s=(i=ES(t,e,!1))!=null?i:n;return typeof s=="number"?o=>typeof o=="string"?o:s*o:Array.isArray(s)?o=>typeof o=="string"?o:s[o]:typeof s=="function"?s:()=>{}}function cN(t){return P1(t,"spacing",8)}function mf(t,e){if(typeof e=="string"||e==null)return e;const n=Math.abs(e),r=t(n);return e>=0?r:typeof r=="number"?-r:`-${r}`}function cue(t,e){return n=>t.reduce((r,i)=>(r[i]=mf(e,n),r),{})}function uue(t,e,n,r){if(e.indexOf(n)===-1)return null;const i=lue(n),s=cue(i,r),o=t[n];return Za(t,o,s)}function Y9(t,e){const n=cN(t.theme);return Object.keys(t).map(r=>uue(t,e,r,n)).reduce(kv,{})}function Pr(t){return Y9(t,aN)}Pr.propTypes={};Pr.filterProps=aN;function Ir(t){return Y9(t,lN)}Ir.propTypes={};Ir.filterProps=lN;function due(t=8){if(t.mui)return t;const e=cN({spacing:t}),n=(...r)=>(r.length===0?[1]:r).map(s=>{const o=e(s);return typeof o=="number"?`${o}px`:o}).join(" ");return n.mui=!0,n}function wS(...t){const e=t.reduce((r,i)=>(i.filterProps.forEach(s=>{r[s]=i}),r),{}),n=r=>Object.keys(r).reduce((i,s)=>e[s]?kv(i,e[s](r)):i,{});return n.propTypes={},n.filterProps=t.reduce((r,i)=>r.concat(i.filterProps),[]),n}function Jo(t){return typeof t!="number"?t:`${t}px solid`}function ma(t,e){return Wr({prop:t,themeKey:"borders",transform:e})}const hue=ma("border",Jo),fue=ma("borderTop",Jo),pue=ma("borderRight",Jo),mue=ma("borderBottom",Jo),gue=ma("borderLeft",Jo),vue=ma("borderColor"),yue=ma("borderTopColor"),_ue=ma("borderRightColor"),bue=ma("borderBottomColor"),xue=ma("borderLeftColor"),Eue=ma("outline",Jo),wue=ma("outlineColor"),TS=t=>{if(t.borderRadius!==void 0&&t.borderRadius!==null){const e=P1(t.theme,"shape.borderRadius",4),n=r=>({borderRadius:mf(e,r)});return Za(t,t.borderRadius,n)}return null};TS.propTypes={};TS.filterProps=["borderRadius"];wS(hue,fue,pue,mue,gue,vue,yue,_ue,bue,xue,TS,Eue,wue);const SS=t=>{if(t.gap!==void 0&&t.gap!==null){const e=P1(t.theme,"spacing",8),n=r=>({gap:mf(e,r)});return Za(t,t.gap,n)}return null};SS.propTypes={};SS.filterProps=["gap"];const CS=t=>{if(t.columnGap!==void 0&&t.columnGap!==null){const e=P1(t.theme,"spacing",8),n=r=>({columnGap:mf(e,r)});return Za(t,t.columnGap,n)}return null};CS.propTypes={};CS.filterProps=["columnGap"];const AS=t=>{if(t.rowGap!==void 0&&t.rowGap!==null){const e=P1(t.theme,"spacing",8),n=r=>({rowGap:mf(e,r)});return Za(t,t.rowGap,n)}return null};AS.propTypes={};AS.filterProps=["rowGap"];const Tue=Wr({prop:"gridColumn"}),Sue=Wr({prop:"gridRow"}),Cue=Wr({prop:"gridAutoFlow"}),Aue=Wr({prop:"gridAutoColumns"}),Rue=Wr({prop:"gridAutoRows"}),Pue=Wr({prop:"gridTemplateColumns"}),Iue=Wr({prop:"gridTemplateRows"}),Mue=Wr({prop:"gridTemplateAreas"}),Lue=Wr({prop:"gridArea"});wS(SS,CS,AS,Tue,Sue,Cue,Aue,Rue,Pue,Iue,Mue,Lue);function bm(t,e){return e==="grey"?e:t}const Oue=Wr({prop:"color",themeKey:"palette",transform:bm}),kue=Wr({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:bm}),Nue=Wr({prop:"backgroundColor",themeKey:"palette",transform:bm});wS(Oue,kue,Nue);function mo(t){return t<=1&&t!==0?`${t*100}%`:t}const Due=Wr({prop:"width",transform:mo}),uN=t=>{if(t.maxWidth!==void 0&&t.maxWidth!==null){const e=n=>{var r,i;const s=((r=t.theme)==null||(r=r.breakpoints)==null||(r=r.values)==null?void 0:r[n])||oN[n];return s?((i=t.theme)==null||(i=i.breakpoints)==null?void 0:i.unit)!=="px"?{maxWidth:`${s}${t.theme.breakpoints.unit}`}:{maxWidth:s}:{maxWidth:mo(n)}};return Za(t,t.maxWidth,e)}return null};uN.filterProps=["maxWidth"];const Bue=Wr({prop:"minWidth",transform:mo}),Fue=Wr({prop:"height",transform:mo}),Uue=Wr({prop:"maxHeight",transform:mo}),zue=Wr({prop:"minHeight",transform:mo});Wr({prop:"size",cssProperty:"width",transform:mo});Wr({prop:"size",cssProperty:"height",transform:mo});const $ue=Wr({prop:"boxSizing"});wS(Due,uN,Bue,Fue,Uue,zue,$ue);const jue={border:{themeKey:"borders",transform:Jo},borderTop:{themeKey:"borders",transform:Jo},borderRight:{themeKey:"borders",transform:Jo},borderBottom:{themeKey:"borders",transform:Jo},borderLeft:{themeKey:"borders",transform:Jo},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:Jo},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:TS},color:{themeKey:"palette",transform:bm},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:bm},backgroundColor:{themeKey:"palette",transform:bm},p:{style:Ir},pt:{style:Ir},pr:{style:Ir},pb:{style:Ir},pl:{style:Ir},px:{style:Ir},py:{style:Ir},padding:{style:Ir},paddingTop:{style:Ir},paddingRight:{style:Ir},paddingBottom:{style:Ir},paddingLeft:{style:Ir},paddingX:{style:Ir},paddingY:{style:Ir},paddingInline:{style:Ir},paddingInlineStart:{style:Ir},paddingInlineEnd:{style:Ir},paddingBlock:{style:Ir},paddingBlockStart:{style:Ir},paddingBlockEnd:{style:Ir},m:{style:Pr},mt:{style:Pr},mr:{style:Pr},mb:{style:Pr},ml:{style:Pr},mx:{style:Pr},my:{style:Pr},margin:{style:Pr},marginTop:{style:Pr},marginRight:{style:Pr},marginBottom:{style:Pr},marginLeft:{style:Pr},marginX:{style:Pr},marginY:{style:Pr},marginInline:{style:Pr},marginInlineStart:{style:Pr},marginInlineEnd:{style:Pr},marginBlock:{style:Pr},marginBlockStart:{style:Pr},marginBlockEnd:{style:Pr},displayPrint:{cssProperty:!1,transform:t=>({"@media print":{display:t}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:SS},rowGap:{style:AS},columnGap:{style:CS},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:mo},maxWidth:{style:uN},minWidth:{transform:mo},height:{transform:mo},maxHeight:{transform:mo},minHeight:{transform:mo},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},RS=jue;function Gue(...t){const e=t.reduce((r,i)=>r.concat(Object.keys(i)),[]),n=new Set(e);return t.every(r=>n.size===Object.keys(r).length)}function Hue(t,e){return typeof t=="function"?t(e):t}function Vue(){function t(n,r,i,s){const o={[n]:r,theme:i},a=s[n];if(!a)return{[n]:r};const{cssProperty:l=n,themeKey:c,transform:u,style:d}=a;if(r==null)return null;if(c==="typography"&&r==="inherit")return{[n]:r};const h=ES(i,c)||{};return d?d(o):Za(o,r,p=>{let m=Ew(h,u,p);return p===m&&typeof p=="string"&&(m=Ew(h,u,`${n}${p==="default"?"":xe(p)}`,p)),l===!1?m:{[l]:m}})}function e(n){var r;const{sx:i,theme:s={}}=n||{};if(!i)return null;const o=(r=s.unstable_sxConfig)!=null?r:RS;function a(l){let c=l;if(typeof l=="function")c=l(s);else if(typeof l!="object")return l;if(!c)return null;const u=W9(s.breakpoints),d=Object.keys(u);let h=u;return Object.keys(c).forEach(f=>{const p=Hue(c[f],s);if(p!=null)if(typeof p=="object")if(o[f])h=kv(h,t(f,p,s,o));else{const m=Za({theme:s},p,_=>({[f]:_}));Gue(m,p)?h[f]=e({sx:p,theme:s}):h=kv(h,m)}else h=kv(h,t(f,p,s,o))}),X9(d,h)}return Array.isArray(i)?i.map(a):a(i)}return e}const K9=Vue();K9.filterProps=["sx"];const PS=K9;function Wue(t,e){const n=this;return n.vars&&typeof n.getColorSchemeSelector=="function"?{[n.getColorSchemeSelector(t).replace(/(\[[^\]]+\])/,"*:where($1)")]:e}:n.palette.mode===t?e:{}}const Xue=["breakpoints","palette","spacing","shape"];function IS(t={},...e){const{breakpoints:n={},palette:r={},spacing:i,shape:s={}}=t,o=$e(t,Xue),a=eue(n),l=due(i);let c=Ys({breakpoints:a,direction:"ltr",components:{},palette:U({mode:"light"},r),spacing:l,shape:U({},nue,s)},o);return c.applyStyles=Wue,c=e.reduce((u,d)=>Ys(u,d),c),c.unstable_sxConfig=U({},RS,o==null?void 0:o.unstable_sxConfig),c.unstable_sx=function(d){return PS({sx:d,theme:this})},c}function Yue(t){return Object.keys(t).length===0}function dN(t=null){const e=A.useContext(UT);return!e||Yue(e)?t:e}const Kue=IS();function MS(t=Kue){return dN(t)}function que({styles:t,themeId:e,defaultTheme:n={}}){const r=MS(n),i=typeof t=="function"?t(e&&r[e]||r):t;return Z.jsx(Pce,{styles:i})}const Zue=["sx"],Que=t=>{var e,n;const r={systemProps:{},otherProps:{}},i=(e=t==null||(n=t.theme)==null?void 0:n.unstable_sxConfig)!=null?e:RS;return Object.keys(t).forEach(s=>{i[s]?r.systemProps[s]=t[s]:r.otherProps[s]=t[s]}),r};function hN(t){const{sx:e}=t,n=$e(t,Zue),{systemProps:r,otherProps:i}=Que(n);let s;return Array.isArray(e)?s=[r,...e]:typeof e=="function"?s=(...o)=>{const a=e(...o);return Fu(a)?U({},r,a):r}:s=U({},r,e),U({},i,{sx:s})}function q9(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=q9(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Ue(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=q9(t))&&(r&&(r+=" "),r+=e);return r}const Jue=["className","component"];function ede(t={}){const{themeId:e,defaultTheme:n,defaultClassName:r="MuiBox-root",generateClassName:i}=t,s=F9("div",{shouldForwardProp:a=>a!=="theme"&&a!=="sx"&&a!=="as"})(PS);return A.forwardRef(function(l,c){const u=MS(n),d=hN(l),{className:h,component:f="div"}=d,p=$e(d,Jue);return Z.jsx(s,U({as:f,ref:c,className:Ue(h,i?i(r):r),theme:e&&u[e]||u},p))})}const tde=["ownerState"],nde=["variants"],rde=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function ide(t){return Object.keys(t).length===0}function sde(t){return typeof t=="string"&&t.charCodeAt(0)>96}function Nv(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}const ode=IS(),ade=t=>t&&t.charAt(0).toLowerCase()+t.slice(1);function Cb({defaultTheme:t,theme:e,themeId:n}){return ide(e)?t:e[n]||e}function lde(t){return t?(e,n)=>n[t]:null}function aE(t,e){let{ownerState:n}=e,r=$e(e,tde);const i=typeof t=="function"?t(U({ownerState:n},r)):t;if(Array.isArray(i))return i.flatMap(s=>aE(s,U({ownerState:n},r)));if(i&&typeof i=="object"&&Array.isArray(i.variants)){const{variants:s=[]}=i;let a=$e(i,nde);return s.forEach(l=>{let c=!0;typeof l.props=="function"?c=l.props(U({ownerState:n},r)):Object.keys(l.props).forEach(u=>{(n==null?void 0:n[u])!==l.props[u]&&r[u]!==l.props[u]&&(c=!1)}),c&&(Array.isArray(a)||(a=[a]),a.push(typeof l.style=="function"?l.style(U({ownerState:n},r)):l.style))}),a}return i}function Z9(t={}){const{themeId:e,defaultTheme:n=ode,rootShouldForwardProp:r=Nv,slotShouldForwardProp:i=Nv}=t,s=o=>PS(U({},o,{theme:Cb(U({},o,{defaultTheme:n,themeId:e}))}));return s.__mui_systemSx=!0,(o,a={})=>{Ice(o,w=>w.filter(T=>!(T!=null&&T.__mui_systemSx)));const{name:l,slot:c,skipVariantsResolver:u,skipSx:d,overridesResolver:h=lde(ade(c))}=a,f=$e(a,rde),p=u!==void 0?u:c&&c!=="Root"&&c!=="root"||!1,m=d||!1;let _,y=Nv;c==="Root"||c==="root"?y=r:c?y=i:sde(o)&&(y=void 0);const x=F9(o,U({shouldForwardProp:y,label:_},f)),b=w=>typeof w=="function"&&w.__emotion_real!==w||Fu(w)?T=>aE(w,U({},T,{theme:Cb({theme:T.theme,defaultTheme:n,themeId:e})})):w,E=(w,...T)=>{let C=b(w);const P=T?T.map(b):[];l&&h&&P.push(F=>{const I=Cb(U({},F,{defaultTheme:n,themeId:e}));if(!I.components||!I.components[l]||!I.components[l].styleOverrides)return null;const k=I.components[l].styleOverrides,R={};return Object.entries(k).forEach(([z,X])=>{R[z]=aE(X,U({},F,{theme:I}))}),h(F,R)}),l&&!p&&P.push(F=>{var I;const k=Cb(U({},F,{defaultTheme:n,themeId:e})),R=k==null||(I=k.components)==null||(I=I[l])==null?void 0:I.variants;return aE({variants:R},U({},F,{theme:k}))}),m||P.push(s);const M=P.length-T.length;if(Array.isArray(w)&&M>0){const F=new Array(M).fill("");C=[...w,...F],C.raw=[...w.raw,...F]}const N=x(C,...P);return o.muiName&&(N.muiName=o.muiName),N};return x.withConfig&&(E.withConfig=x.withConfig),E}}const cde=Z9();function Q9(t){const{theme:e,name:n,props:r}=t;return!e||!e.components||!e.components[n]||!e.components[n].defaultProps?r:R1(e.components[n].defaultProps,r)}function J9({props:t,name:e,defaultTheme:n,themeId:r}){let i=MS(n);return r&&(i=i[r]||i),Q9({theme:i,name:e,props:t})}function fN(t,e=0,n=1){return xh(t,e,n)}function ude(t){t=t.slice(1);const e=new RegExp(`.{1,${t.length>=6?2:1}}`,"g");let n=t.match(e);return n&&n[0].length===1&&(n=n.map(r=>r+r)),n?`rgb${n.length===4?"a":""}(${n.map((r,i)=>i<3?parseInt(r,16):Math.round(parseInt(r,16)/255*1e3)/1e3).join(", ")})`:""}function gf(t){if(t.type)return t;if(t.charAt(0)==="#")return gf(ude(t));const e=t.indexOf("("),n=t.substring(0,e);if(["rgb","rgba","hsl","hsla","color"].indexOf(n)===-1)throw new Error(bd(9,t));let r=t.substring(e+1,t.length-1),i;if(n==="color"){if(r=r.split(" "),i=r.shift(),r.length===4&&r[3].charAt(0)==="/"&&(r[3]=r[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(i)===-1)throw new Error(bd(10,i))}else r=r.split(",");return r=r.map(s=>parseFloat(s)),{type:n,values:r,colorSpace:i}}function LS(t){const{type:e,colorSpace:n}=t;let{values:r}=t;return e.indexOf("rgb")!==-1?r=r.map((i,s)=>s<3?parseInt(i,10):i):e.indexOf("hsl")!==-1&&(r[1]=`${r[1]}%`,r[2]=`${r[2]}%`),e.indexOf("color")!==-1?r=`${n} ${r.join(" ")}`:r=`${r.join(", ")}`,`${e}(${r})`}function dde(t){t=gf(t);const{values:e}=t,n=e[0],r=e[1]/100,i=e[2]/100,s=r*Math.min(i,1-i),o=(c,u=(c+n/30)%12)=>i-s*Math.max(Math.min(u-3,9-u,1),-1);let a="rgb";const l=[Math.round(o(0)*255),Math.round(o(8)*255),Math.round(o(4)*255)];return t.type==="hsla"&&(a+="a",l.push(e[3])),LS({type:a,values:l})}function uM(t){t=gf(t);let e=t.type==="hsl"||t.type==="hsla"?gf(dde(t)).values:t.values;return e=e.map(n=>(t.type!=="color"&&(n/=255),n<=.03928?n/12.92:((n+.055)/1.055)**2.4)),Number((.2126*e[0]+.7152*e[1]+.0722*e[2]).toFixed(3))}function hde(t,e){const n=uM(t),r=uM(e);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function rn(t,e){return t=gf(t),e=fN(e),(t.type==="rgb"||t.type==="hsl")&&(t.type+="a"),t.type==="color"?t.values[3]=`/${e}`:t.values[3]=e,LS(t)}function vf(t,e){if(t=gf(t),e=fN(e),t.type.indexOf("hsl")!==-1)t.values[2]*=1-e;else if(t.type.indexOf("rgb")!==-1||t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]*=1-e;return LS(t)}function yf(t,e){if(t=gf(t),e=fN(e),t.type.indexOf("hsl")!==-1)t.values[2]+=(100-t.values[2])*e;else if(t.type.indexOf("rgb")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(255-t.values[n])*e;else if(t.type.indexOf("color")!==-1)for(let n=0;n<3;n+=1)t.values[n]+=(1-t.values[n])*e;return LS(t)}function fde(t,e=.15){return uM(t)>.5?vf(t,e):yf(t,e)}const pde=["component","direction","spacing","divider","children","className","useFlexGap"],mde=IS(),gde=cde("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root});function vde(t){return J9({props:t,name:"MuiStack",defaultTheme:mde})}function yde(t,e){const n=A.Children.toArray(t).filter(Boolean);return n.reduce((r,i,s)=>(r.push(i),s<n.length-1&&r.push(A.cloneElement(e,{key:`separator-${s}`})),r),[])}const _de=t=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[t],bde=({ownerState:t,theme:e})=>{let n=U({display:"flex",flexDirection:"column"},Za({theme:e},IR({values:t.direction,breakpoints:e.breakpoints.values}),r=>({flexDirection:r})));if(t.spacing){const r=cN(e),i=Object.keys(e.breakpoints.values).reduce((l,c)=>((typeof t.spacing=="object"&&t.spacing[c]!=null||typeof t.direction=="object"&&t.direction[c]!=null)&&(l[c]=!0),l),{}),s=IR({values:t.direction,base:i}),o=IR({values:t.spacing,base:i});typeof s=="object"&&Object.keys(s).forEach((l,c,u)=>{if(!s[l]){const h=c>0?s[u[c-1]]:"column";s[l]=h}}),n=Ys(n,Za({theme:e},o,(l,c)=>t.useFlexGap?{gap:mf(r,l)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${_de(c?s[c]:t.direction)}`]:mf(r,l)}}))}return n=rue(e.breakpoints,n),n};function xde(t={}){const{createStyledComponent:e=gde,useThemeProps:n=vde,componentName:r="MuiStack"}=t,i=()=>st({root:["root"]},l=>ot(r,l),{}),s=e(bde);return A.forwardRef(function(l,c){const u=n(l),d=hN(u),{component:h="div",direction:f="column",spacing:p=0,divider:m,children:_,className:y,useFlexGap:x=!1}=d,b=$e(d,pde),E={direction:f,spacing:p,useFlexGap:x},w=i();return Z.jsx(s,U({as:h,ownerState:E,ref:c,className:Ue(w.root,y)},b,{children:m?yde(_,m):_}))})}function Ede(t,e){return U({toolbar:{minHeight:56,[t.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[t.up("sm")]:{minHeight:64}}},e)}const wde=["mode","contrastThreshold","tonalOffset"],uU={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:ky.white,default:ky.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},MR={text:{primary:ky.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:ky.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function dU(t,e,n,r){const i=r.light||r,s=r.dark||r*1.5;t[e]||(t.hasOwnProperty(n)?t[e]=t[n]:e==="light"?t.light=yf(t.main,i):e==="dark"&&(t.dark=vf(t.main,s)))}function Tde(t="light"){return t==="dark"?{main:cp[200],light:cp[50],dark:cp[400]}:{main:cp[700],light:cp[400],dark:cp[800]}}function Sde(t="light"){return t==="dark"?{main:lp[200],light:lp[50],dark:lp[400]}:{main:lp[500],light:lp[300],dark:lp[700]}}function Cde(t="light"){return t==="dark"?{main:ap[500],light:ap[300],dark:ap[700]}:{main:ap[700],light:ap[400],dark:ap[800]}}function Ade(t="light"){return t==="dark"?{main:up[400],light:up[300],dark:up[700]}:{main:up[700],light:up[500],dark:up[900]}}function Rde(t="light"){return t==="dark"?{main:dp[400],light:dp[300],dark:dp[700]}:{main:dp[800],light:dp[500],dark:dp[900]}}function Pde(t="light"){return t==="dark"?{main:v0[400],light:v0[300],dark:v0[700]}:{main:"#ed6c02",light:v0[500],dark:v0[900]}}function Ide(t){const{mode:e="light",contrastThreshold:n=3,tonalOffset:r=.2}=t,i=$e(t,wde),s=t.primary||Tde(e),o=t.secondary||Sde(e),a=t.error||Cde(e),l=t.info||Ade(e),c=t.success||Rde(e),u=t.warning||Pde(e);function d(m){return hde(m,MR.text.primary)>=n?MR.text.primary:uU.text.primary}const h=({color:m,name:_,mainShade:y=500,lightShade:x=300,darkShade:b=700})=>{if(m=U({},m),!m.main&&m[y]&&(m.main=m[y]),!m.hasOwnProperty("main"))throw new Error(bd(11,_?` (${_})`:"",y));if(typeof m.main!="string")throw new Error(bd(12,_?` (${_})`:"",JSON.stringify(m.main)));return dU(m,"light",x,r),dU(m,"dark",b,r),m.contrastText||(m.contrastText=d(m.main)),m},f={dark:MR,light:uU};return Ys(U({common:U({},ky),mode:e,primary:h({color:s,name:"primary"}),secondary:h({color:o,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:h({color:a,name:"error"}),warning:h({color:u,name:"warning"}),info:h({color:l,name:"info"}),success:h({color:c,name:"success"}),grey:mce,contrastThreshold:n,getContrastText:d,augmentColor:h,tonalOffset:r},f[e]),i)}const Mde=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function Lde(t){return Math.round(t*1e5)/1e5}const hU={textTransform:"uppercase"},fU='"Roboto", "Helvetica", "Arial", sans-serif';function Ode(t,e){const n=typeof e=="function"?e(t):e,{fontFamily:r=fU,fontSize:i=14,fontWeightLight:s=300,fontWeightRegular:o=400,fontWeightMedium:a=500,fontWeightBold:l=700,htmlFontSize:c=16,allVariants:u,pxToRem:d}=n,h=$e(n,Mde),f=i/14,p=d||(y=>`${y/c*f}rem`),m=(y,x,b,E,w)=>U({fontFamily:r,fontWeight:y,fontSize:p(x),lineHeight:b},r===fU?{letterSpacing:`${Lde(E/x)}em`}:{},w,u),_={h1:m(s,96,1.167,-1.5),h2:m(s,60,1.2,-.5),h3:m(o,48,1.167,0),h4:m(o,34,1.235,.25),h5:m(o,24,1.334,0),h6:m(a,20,1.6,.15),subtitle1:m(o,16,1.75,.15),subtitle2:m(a,14,1.57,.1),body1:m(o,16,1.5,.15),body2:m(o,14,1.43,.15),button:m(a,14,1.75,.4,hU),caption:m(o,12,1.66,.4),overline:m(o,12,2.66,1,hU),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return Ys(U({htmlFontSize:c,pxToRem:p,fontFamily:r,fontSize:i,fontWeightLight:s,fontWeightRegular:o,fontWeightMedium:a,fontWeightBold:l},_),h,{clone:!1})}const kde=.2,Nde=.14,Dde=.12;function pr(...t){return[`${t[0]}px ${t[1]}px ${t[2]}px ${t[3]}px rgba(0,0,0,${kde})`,`${t[4]}px ${t[5]}px ${t[6]}px ${t[7]}px rgba(0,0,0,${Nde})`,`${t[8]}px ${t[9]}px ${t[10]}px ${t[11]}px rgba(0,0,0,${Dde})`].join(",")}const Bde=["none",pr(0,2,1,-1,0,1,1,0,0,1,3,0),pr(0,3,1,-2,0,2,2,0,0,1,5,0),pr(0,3,3,-2,0,3,4,0,0,1,8,0),pr(0,2,4,-1,0,4,5,0,0,1,10,0),pr(0,3,5,-1,0,5,8,0,0,1,14,0),pr(0,3,5,-1,0,6,10,0,0,1,18,0),pr(0,4,5,-2,0,7,10,1,0,2,16,1),pr(0,5,5,-3,0,8,10,1,0,3,14,2),pr(0,5,6,-3,0,9,12,1,0,3,16,2),pr(0,6,6,-3,0,10,14,1,0,4,18,3),pr(0,6,7,-4,0,11,15,1,0,4,20,3),pr(0,7,8,-4,0,12,17,2,0,5,22,4),pr(0,7,8,-4,0,13,19,2,0,5,24,4),pr(0,7,9,-4,0,14,21,2,0,5,26,4),pr(0,8,9,-5,0,15,22,2,0,6,28,5),pr(0,8,10,-5,0,16,24,2,0,6,30,5),pr(0,8,11,-5,0,17,26,2,0,6,32,5),pr(0,9,11,-5,0,18,28,2,0,7,34,6),pr(0,9,12,-6,0,19,29,2,0,7,36,6),pr(0,10,13,-6,0,20,31,3,0,8,38,7),pr(0,10,13,-6,0,21,33,3,0,8,40,7),pr(0,10,14,-6,0,22,35,3,0,8,42,7),pr(0,11,14,-7,0,23,36,3,0,9,44,8),pr(0,11,15,-7,0,24,38,3,0,9,46,8)],Fde=["duration","easing","delay"],Ude={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},e7={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function pU(t){return`${Math.round(t)}ms`}function zde(t){if(!t)return 0;const e=t/36;return Math.round((4+15*e**.25+e/5)*10)}function $de(t){const e=U({},Ude,t.easing),n=U({},e7,t.duration);return U({getAutoHeightDuration:zde,create:(i=["all"],s={})=>{const{duration:o=n.standard,easing:a=e.easeInOut,delay:l=0}=s;return $e(s,Fde),(Array.isArray(i)?i:[i]).map(c=>`${c} ${typeof o=="string"?o:pU(o)} ${a} ${typeof l=="string"?l:pU(l)}`).join(",")}},t,{easing:e,duration:n})}const jde={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},Gde=jde,Hde=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function t7(t={},...e){const{mixins:n={},palette:r={},transitions:i={},typography:s={}}=t,o=$e(t,Hde);if(t.vars)throw new Error(bd(18));const a=Ide(r),l=IS(t);let c=Ys(l,{mixins:Ede(l.breakpoints,n),palette:a,shadows:Bde.slice(),typography:Ode(a,s),transitions:$de(i),zIndex:U({},Gde)});return c=Ys(c,o),c=e.reduce((u,d)=>Ys(u,d),c),c.unstable_sxConfig=U({},RS,o==null?void 0:o.unstable_sxConfig),c.unstable_sx=function(d){return PS({sx:d,theme:this})},c}const Vde=t7(),OS=Vde;function ms(){const t=MS(OS);return t[S1]||t}function at({props:t,name:e}){return J9({props:t,name:e,defaultTheme:OS,themeId:S1})}const Li=t=>Nv(t)&&t!=="classes",pN=Nv,Se=Z9({themeId:S1,defaultTheme:OS,rootShouldForwardProp:Li}),mU=t=>{let e;return t<1?e=5.11916*t**2:e=4.5*Math.log(t+1)+2,(e/100).toFixed(2)};function Wde(t){return ot("MuiSvgIcon",t)}it("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const Xde=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],Yde=t=>{const{color:e,fontSize:n,classes:r}=t,i={root:["root",e!=="inherit"&&`color${xe(e)}`,`fontSize${xe(n)}`]};return st(i,Wde,r)},Kde=Se("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="inherit"&&e[`color${xe(n.color)}`],e[`fontSize${xe(n.fontSize)}`]]}})(({theme:t,ownerState:e})=>{var n,r,i,s,o,a,l,c,u,d,h,f,p;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:e.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(n=t.transitions)==null||(r=n.create)==null?void 0:r.call(n,"fill",{duration:(i=t.transitions)==null||(i=i.duration)==null?void 0:i.shorter}),fontSize:{inherit:"inherit",small:((s=t.typography)==null||(o=s.pxToRem)==null?void 0:o.call(s,20))||"1.25rem",medium:((a=t.typography)==null||(l=a.pxToRem)==null?void 0:l.call(a,24))||"1.5rem",large:((c=t.typography)==null||(u=c.pxToRem)==null?void 0:u.call(c,35))||"2.1875rem"}[e.fontSize],color:(d=(h=(t.vars||t).palette)==null||(h=h[e.color])==null?void 0:h.main)!=null?d:{action:(f=(t.vars||t).palette)==null||(f=f.action)==null?void 0:f.active,disabled:(p=(t.vars||t).palette)==null||(p=p.action)==null?void 0:p.disabled,inherit:void 0}[e.color]}}),Hm=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiSvgIcon"}),{children:i,className:s,color:o="inherit",component:a="svg",fontSize:l="medium",htmlColor:c,inheritViewBox:u=!1,titleAccess:d,viewBox:h="0 0 24 24"}=r,f=$e(r,Xde),p=A.isValidElement(i)&&i.type==="svg",m=U({},r,{color:o,component:a,fontSize:l,instanceFontSize:e.fontSize,inheritViewBox:u,viewBox:h,hasSvgAsChild:p}),_={};u||(_.viewBox=h);const y=Yde(m);return Z.jsxs(Kde,U({as:a,className:Ue(y.root,s),focusable:"false",color:c,"aria-hidden":d?void 0:!0,role:d?"img":void 0,ref:n},_,f,p&&i.props,{ownerState:m,children:[p?i.props.children:i,d?Z.jsx("title",{children:d}):null]}))});Hm.muiName="SvgIcon";function lt(t,e){function n(r,i){return Z.jsx(Hm,U({"data-testid":`${e}Icon`,ref:i},r,{children:t}))}return n.muiName=Hm.muiName,A.memo(A.forwardRef(n))}const qde={configure:t=>{sN.configure(t)}},Zde=Object.freeze(Object.defineProperty({__proto__:null,capitalize:xe,createChainedFunction:bw,createSvgIcon:lt,debounce:C1,deprecatedPropType:Oce,isMuiElement:_m,ownerDocument:tr,ownerWindow:$l,requirePropFactory:kce,setRef:xw,unstable_ClassNameGenerator:qde,unstable_useEnhancedEffect:Os,unstable_useId:kd,unsupportedProp:Dce,useControlled:xd,useEventCallback:Vr,useForkRef:Fn,useIsFocusVisible:xS},Symbol.toStringTag,{value:"Module"}));function dM(t,e){return dM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},dM(t,e)}function n7(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,dM(t,e)}const gU={disabled:!1},ww=Gn.createContext(null);var Qde=function(e){return e.scrollTop},Z0="unmounted",ph="exited",mh="entering",Mp="entered",hM="exiting",Yc=function(t){n7(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,l;return s.appearStatus=null,r.in?a?(l=ph,s.appearStatus=mh):l=Mp:r.unmountOnExit||r.mountOnEnter?l=Z0:l=ph,s.state={status:l},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===Z0?{status:ph}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==mh&&o!==Mp&&(s=mh):(o===mh||o===Mp)&&(s=hM)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===mh){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:Y0.findDOMNode(this);o&&Qde(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ph&&this.setState({status:Z0})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,l=this.props.nodeRef?[a]:[Y0.findDOMNode(this),a],c=l[0],u=l[1],d=this.getTimeouts(),h=a?d.appear:d.enter;if(!i&&!o||gU.disabled){this.safeSetState({status:Mp},function(){s.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:mh},function(){s.props.onEntering(c,u),s.onTransitionEnd(h,function(){s.safeSetState({status:Mp},function(){s.props.onEntered(c,u)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:Y0.findDOMNode(this);if(!s||gU.disabled){this.safeSetState({status:ph},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:hM},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:ph},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:Y0.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===Z0)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=$e(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Gn.createElement(ww.Provider,{value:null},typeof o=="function"?o(i,a):Gn.cloneElement(Gn.Children.only(o),a))},e}(Gn.Component);Yc.contextType=ww;Yc.propTypes={};function fp(){}Yc.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:fp,onEntering:fp,onEntered:fp,onExit:fp,onExiting:fp,onExited:fp};Yc.UNMOUNTED=Z0;Yc.EXITED=ph;Yc.ENTERING=mh;Yc.ENTERED=Mp;Yc.EXITING=hM;const kS=Yc;function Jde(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mN(t,e){var n=function(s){return e&&A.isValidElement(s)?e(s):s},r=Object.create(null);return t&&A.Children.map(t,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function ehe(t,e){t=t||{},e=e||{};function n(u){return u in e?e[u]:t[u]}var r=Object.create(null),i=[];for(var s in t)s in e?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var l in e){if(r[l])for(o=0;o<r[l].length;o++){var c=r[l][o];a[r[l][o]]=n(c)}a[l]=n(l)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function Ph(t,e,n){return n[e]!=null?n[e]:t.props[e]}function the(t,e){return mN(t.children,function(n){return A.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:Ph(n,"appear",t),enter:Ph(n,"enter",t),exit:Ph(n,"exit",t)})})}function nhe(t,e,n){var r=mN(t.children),i=ehe(e,r);return Object.keys(i).forEach(function(s){var o=i[s];if(A.isValidElement(o)){var a=s in e,l=s in r,c=e[s],u=A.isValidElement(c)&&!c.props.in;l&&(!a||u)?i[s]=A.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:Ph(o,"exit",t),enter:Ph(o,"enter",t)}):!l&&a&&!u?i[s]=A.cloneElement(o,{in:!1}):l&&a&&A.isValidElement(c)&&(i[s]=A.cloneElement(o,{onExited:n.bind(null,o),in:c.props.in,exit:Ph(o,"exit",t),enter:Ph(o,"enter",t)}))}}),i}var rhe=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},ihe={component:"div",childFactory:function(e){return e}},gN=function(t){n7(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var o=s.handleExited.bind(Jde(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,l=s.firstRender;return{children:l?the(i,a):nhe(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=mN(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var l=U({},a.children);return delete l[i.key],{children:l}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=$e(i,["component","childFactory"]),l=this.state.contextValue,c=rhe(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?Gn.createElement(ww.Provider,{value:l},c):Gn.createElement(ww.Provider,{value:l},Gn.createElement(s,a,c))},e}(Gn.Component);gN.propTypes={};gN.defaultProps=ihe;const she=gN,vN=t=>t.scrollTop;function Ed(t,e){var n,r;const{timeout:i,easing:s,style:o={}}=t;return{duration:(n=o.transitionDuration)!=null?n:typeof i=="number"?i:i[e.mode]||0,easing:(r=o.transitionTimingFunction)!=null?r:typeof s=="object"?s[e.mode]:s,delay:o.transitionDelay}}function ohe(t){return ot("MuiCollapse",t)}it("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const ahe=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],lhe=t=>{const{orientation:e,classes:n}=t,r={root:["root",`${e}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${e}`],wrapperInner:["wrapperInner",`${e}`]};return st(r,ohe,n)},che=Se("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.orientation],n.state==="entered"&&e.entered,n.state==="exited"&&!n.in&&n.collapsedSize==="0px"&&e.hidden]}})(({theme:t,ownerState:e})=>U({height:0,overflow:"hidden",transition:t.transitions.create("height")},e.orientation==="horizontal"&&{height:"auto",width:0,transition:t.transitions.create("width")},e.state==="entered"&&U({height:"auto",overflow:"visible"},e.orientation==="horizontal"&&{width:"auto"}),e.state==="exited"&&!e.in&&e.collapsedSize==="0px"&&{visibility:"hidden"})),uhe=Se("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(t,e)=>e.wrapper})(({ownerState:t})=>U({display:"flex",width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),dhe=Se("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(t,e)=>e.wrapperInner})(({ownerState:t})=>U({width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),r7=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiCollapse"}),{addEndListener:i,children:s,className:o,collapsedSize:a="0px",component:l,easing:c,in:u,onEnter:d,onEntered:h,onEntering:f,onExit:p,onExited:m,onExiting:_,orientation:y="vertical",style:x,timeout:b=e7.standard,TransitionComponent:E=kS}=r,w=$e(r,ahe),T=U({},r,{orientation:y,collapsedSize:a}),C=lhe(T),P=ms(),M=Wu(),N=A.useRef(null),F=A.useRef(),I=typeof a=="number"?`${a}px`:a,k=y==="horizontal",R=k?"width":"height",z=A.useRef(null),X=Fn(n,z),G=ve=>Oe=>{if(ve){const ae=z.current;Oe===void 0?ve(ae):ve(ae,Oe)}},j=()=>N.current?N.current[k?"clientWidth":"clientHeight"]:0,H=G((ve,Oe)=>{N.current&&k&&(N.current.style.position="absolute"),ve.style[R]=I,d&&d(ve,Oe)}),Q=G((ve,Oe)=>{const ae=j();N.current&&k&&(N.current.style.position="");const{duration:ue,easing:Ce}=Ed({style:x,timeout:b,easing:c},{mode:"enter"});if(b==="auto"){const pe=P.transitions.getAutoHeightDuration(ae);ve.style.transitionDuration=`${pe}ms`,F.current=pe}else ve.style.transitionDuration=typeof ue=="string"?ue:`${ue}ms`;ve.style[R]=`${ae}px`,ve.style.transitionTimingFunction=Ce,f&&f(ve,Oe)}),V=G((ve,Oe)=>{ve.style[R]="auto",h&&h(ve,Oe)}),ee=G(ve=>{ve.style[R]=`${j()}px`,p&&p(ve)}),ye=G(m),se=G(ve=>{const Oe=j(),{duration:ae,easing:ue}=Ed({style:x,timeout:b,easing:c},{mode:"exit"});if(b==="auto"){const Ce=P.transitions.getAutoHeightDuration(Oe);ve.style.transitionDuration=`${Ce}ms`,F.current=Ce}else ve.style.transitionDuration=typeof ae=="string"?ae:`${ae}ms`;ve.style[R]=I,ve.style.transitionTimingFunction=ue,_&&_(ve)}),fe=ve=>{b==="auto"&&M.start(F.current||0,ve),i&&i(z.current,ve)};return Z.jsx(E,U({in:u,onEnter:H,onEntered:V,onEntering:Q,onExit:ee,onExited:ye,onExiting:se,addEndListener:fe,nodeRef:z,timeout:b==="auto"?null:b},w,{children:(ve,Oe)=>Z.jsx(che,U({as:l,className:Ue(C.root,o,{entered:C.entered,exited:!u&&I==="0px"&&C.hidden}[ve]),style:U({[k?"minWidth":"minHeight"]:I},x),ownerState:U({},T,{state:ve}),ref:X},Oe,{children:Z.jsx(uhe,{ownerState:U({},T,{state:ve}),className:C.wrapper,ref:N,children:Z.jsx(dhe,{ownerState:U({},T,{state:ve}),className:C.wrapperInner,children:s})})}))}))});r7.muiSupportAuto=!0;const i7=r7;function hhe(t){return ot("MuiPaper",t)}it("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);const fhe=["className","component","elevation","square","variant"],phe=t=>{const{square:e,elevation:n,variant:r,classes:i}=t,s={root:["root",r,!e&&"rounded",r==="elevation"&&`elevation${n}`]};return st(s,hhe,i)},mhe=Se("div",{name:"MuiPaper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],!n.square&&e.rounded,n.variant==="elevation"&&e[`elevation${n.elevation}`]]}})(({theme:t,ownerState:e})=>{var n;return U({backgroundColor:(t.vars||t).palette.background.paper,color:(t.vars||t).palette.text.primary,transition:t.transitions.create("box-shadow")},!e.square&&{borderRadius:t.shape.borderRadius},e.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.divider}`},e.variant==="elevation"&&U({boxShadow:(t.vars||t).shadows[e.elevation]},!t.vars&&t.palette.mode==="dark"&&{backgroundImage:`linear-gradient(${rn("#fff",mU(e.elevation))}, ${rn("#fff",mU(e.elevation))})`},t.vars&&{backgroundImage:(n=t.vars.overlays)==null?void 0:n[e.elevation]}))}),ghe=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiPaper"}),{className:i,component:s="div",elevation:o=1,square:a=!1,variant:l="elevation"}=r,c=$e(r,fhe),u=U({},r,{component:s,elevation:o,square:a,variant:l}),d=phe(u);return Z.jsx(mhe,U({as:s,ownerState:u,className:Ue(d.root,i),ref:n},c))}),Nd=ghe;function ld(t){return typeof t=="string"}function Q0(t,e,n){return t===void 0||ld(t)?e:U({},e,{ownerState:U({},e.ownerState,n)})}function vhe(t,e,n=(r,i)=>r===i){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}const yhe={disableDefaultClasses:!1},_he=A.createContext(yhe);function bhe(t){const{disableDefaultClasses:e}=A.useContext(_he);return n=>e?"":t(n)}function Dv(t,e=[]){if(t===void 0)return{};const n={};return Object.keys(t).filter(r=>r.match(/^on[A-Z]/)&&typeof t[r]=="function"&&!e.includes(r)).forEach(r=>{n[r]=t[r]}),n}function xhe(t,e,n){return typeof t=="function"?t(e,n):t}function vU(t){if(t===void 0)return{};const e={};return Object.keys(t).filter(n=>!(n.match(/^on[A-Z]/)&&typeof t[n]=="function")).forEach(n=>{e[n]=t[n]}),e}function Ehe(t){const{getSlotProps:e,additionalProps:n,externalSlotProps:r,externalForwardedProps:i,className:s}=t;if(!e){const f=Ue(n==null?void 0:n.className,s,i==null?void 0:i.className,r==null?void 0:r.className),p=U({},n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),m=U({},n,i,r);return f.length>0&&(m.className=f),Object.keys(p).length>0&&(m.style=p),{props:m,internalRef:void 0}}const o=Dv(U({},i,r)),a=vU(r),l=vU(i),c=e(o),u=Ue(c==null?void 0:c.className,n==null?void 0:n.className,s,i==null?void 0:i.className,r==null?void 0:r.className),d=U({},c==null?void 0:c.style,n==null?void 0:n.style,i==null?void 0:i.style,r==null?void 0:r.style),h=U({},c,n,l,a);return u.length>0&&(h.className=u),Object.keys(d).length>0&&(h.style=d),{props:h,internalRef:c.ref}}const whe=["elementType","externalSlotProps","ownerState","skipResolvingSlotProps"];function Nr(t){var e;const{elementType:n,externalSlotProps:r,ownerState:i,skipResolvingSlotProps:s=!1}=t,o=$e(t,whe),a=s?{}:xhe(r,i),{props:l,internalRef:c}=Ehe(U({},o,{externalSlotProps:a})),u=Fn(c,a==null?void 0:a.ref,(e=t.additionalProps)==null?void 0:e.ref);return Q0(n,U({},l,{ref:u}),i)}function The(t){const{className:e,classes:n,pulsate:r=!1,rippleX:i,rippleY:s,rippleSize:o,in:a,onExited:l,timeout:c}=t,[u,d]=A.useState(!1),h=Ue(e,n.ripple,n.rippleVisible,r&&n.ripplePulsate),f={width:o,height:o,top:-(o/2)+s,left:-(o/2)+i},p=Ue(n.child,u&&n.childLeaving,r&&n.childPulsate);return!a&&!u&&d(!0),A.useEffect(()=>{if(!a&&l!=null){const m=setTimeout(l,c);return()=>{clearTimeout(m)}}},[l,a,c]),Z.jsx("span",{className:h,style:f,children:Z.jsx("span",{className:p})})}const Yo=it("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),She=["center","classes","className"];let NS=t=>t,yU,_U,bU,xU;const fM=550,Che=80,Ahe=Od(yU||(yU=NS`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),Rhe=Od(_U||(_U=NS`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),Phe=Od(bU||(bU=NS`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),Ihe=Se("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),Mhe=Se(The,{name:"MuiTouchRipple",slot:"Ripple"})(xU||(xU=NS`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),Yo.rippleVisible,Ahe,fM,({theme:t})=>t.transitions.easing.easeInOut,Yo.ripplePulsate,({theme:t})=>t.transitions.duration.shorter,Yo.child,Yo.childLeaving,Rhe,fM,({theme:t})=>t.transitions.easing.easeInOut,Yo.childPulsate,Phe,({theme:t})=>t.transitions.easing.easeInOut),Lhe=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiTouchRipple"}),{center:i=!1,classes:s={},className:o}=r,a=$e(r,She),[l,c]=A.useState([]),u=A.useRef(0),d=A.useRef(null);A.useEffect(()=>{d.current&&(d.current(),d.current=null)},[l]);const h=A.useRef(!1),f=Wu(),p=A.useRef(null),m=A.useRef(null),_=A.useCallback(E=>{const{pulsate:w,rippleX:T,rippleY:C,rippleSize:P,cb:M}=E;c(N=>[...N,Z.jsx(Mhe,{classes:{ripple:Ue(s.ripple,Yo.ripple),rippleVisible:Ue(s.rippleVisible,Yo.rippleVisible),ripplePulsate:Ue(s.ripplePulsate,Yo.ripplePulsate),child:Ue(s.child,Yo.child),childLeaving:Ue(s.childLeaving,Yo.childLeaving),childPulsate:Ue(s.childPulsate,Yo.childPulsate)},timeout:fM,pulsate:w,rippleX:T,rippleY:C,rippleSize:P},u.current)]),u.current+=1,d.current=M},[s]),y=A.useCallback((E={},w={},T=()=>{})=>{const{pulsate:C=!1,center:P=i||w.pulsate,fakeElement:M=!1}=w;if((E==null?void 0:E.type)==="mousedown"&&h.current){h.current=!1;return}(E==null?void 0:E.type)==="touchstart"&&(h.current=!0);const N=M?null:m.current,F=N?N.getBoundingClientRect():{width:0,height:0,left:0,top:0};let I,k,R;if(P||E===void 0||E.clientX===0&&E.clientY===0||!E.clientX&&!E.touches)I=Math.round(F.width/2),k=Math.round(F.height/2);else{const{clientX:z,clientY:X}=E.touches&&E.touches.length>0?E.touches[0]:E;I=Math.round(z-F.left),k=Math.round(X-F.top)}if(P)R=Math.sqrt((2*F.width**2+F.height**2)/3),R%2===0&&(R+=1);else{const z=Math.max(Math.abs((N?N.clientWidth:0)-I),I)*2+2,X=Math.max(Math.abs((N?N.clientHeight:0)-k),k)*2+2;R=Math.sqrt(z**2+X**2)}E!=null&&E.touches?p.current===null&&(p.current=()=>{_({pulsate:C,rippleX:I,rippleY:k,rippleSize:R,cb:T})},f.start(Che,()=>{p.current&&(p.current(),p.current=null)})):_({pulsate:C,rippleX:I,rippleY:k,rippleSize:R,cb:T})},[i,_,f]),x=A.useCallback(()=>{y({},{pulsate:!0})},[y]),b=A.useCallback((E,w)=>{if(f.clear(),(E==null?void 0:E.type)==="touchend"&&p.current){p.current(),p.current=null,f.start(0,()=>{b(E,w)});return}p.current=null,c(T=>T.length>0?T.slice(1):T),d.current=w},[f]);return A.useImperativeHandle(n,()=>({pulsate:x,start:y,stop:b}),[x,y,b]),Z.jsx(Ihe,U({className:Ue(Yo.root,s.root,o),ref:m},a,{children:Z.jsx(she,{component:null,exit:!0,children:l})}))}),Ohe=Lhe;function khe(t){return ot("MuiButtonBase",t)}const Nhe=it("MuiButtonBase",["root","disabled","focusVisible"]),Dhe=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],Bhe=t=>{const{disabled:e,focusVisible:n,focusVisibleClassName:r,classes:i}=t,o=st({root:["root",e&&"disabled",n&&"focusVisible"]},khe,i);return n&&r&&(o.root+=` ${r}`),o},Fhe=Se("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${Nhe.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),Uhe=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiButtonBase"}),{action:i,centerRipple:s=!1,children:o,className:a,component:l="button",disabled:c=!1,disableRipple:u=!1,disableTouchRipple:d=!1,focusRipple:h=!1,LinkComponent:f="a",onBlur:p,onClick:m,onContextMenu:_,onDragLeave:y,onFocus:x,onFocusVisible:b,onKeyDown:E,onKeyUp:w,onMouseDown:T,onMouseLeave:C,onMouseUp:P,onTouchEnd:M,onTouchMove:N,onTouchStart:F,tabIndex:I=0,TouchRippleProps:k,touchRippleRef:R,type:z}=r,X=$e(r,Dhe),G=A.useRef(null),j=A.useRef(null),H=Fn(j,R),{isFocusVisibleRef:Q,onFocus:V,onBlur:ee,ref:ye}=xS(),[se,fe]=A.useState(!1);c&&se&&fe(!1),A.useImperativeHandle(i,()=>({focusVisible:()=>{fe(!0),G.current.focus()}}),[]);const[ve,Oe]=A.useState(!1);A.useEffect(()=>{Oe(!0)},[]);const ae=ve&&!u&&!c;A.useEffect(()=>{se&&h&&!u&&ve&&j.current.pulsate()},[u,h,se,ve]);function ue(we,qe,gt=d){return Vr(Bt=>(qe&&qe(Bt),!gt&&j.current&&j.current[we](Bt),!0))}const Ce=ue("start",T),pe=ue("stop",_),ke=ue("stop",y),Re=ue("stop",P),B=ue("stop",we=>{se&&we.preventDefault(),C&&C(we)}),oe=ue("start",F),ie=ue("stop",M),q=ue("stop",N),Y=ue("stop",we=>{ee(we),Q.current===!1&&fe(!1),p&&p(we)},!1),ne=Vr(we=>{G.current||(G.current=we.currentTarget),V(we),Q.current===!0&&(fe(!0),b&&b(we)),x&&x(we)}),me=()=>{const we=G.current;return l&&l!=="button"&&!(we.tagName==="A"&&we.href)},he=A.useRef(!1),de=Vr(we=>{h&&!he.current&&se&&j.current&&we.key===" "&&(he.current=!0,j.current.stop(we,()=>{j.current.start(we)})),we.target===we.currentTarget&&me()&&we.key===" "&&we.preventDefault(),E&&E(we),we.target===we.currentTarget&&me()&&we.key==="Enter"&&!c&&(we.preventDefault(),m&&m(we))}),Ae=Vr(we=>{h&&we.key===" "&&j.current&&se&&!we.defaultPrevented&&(he.current=!1,j.current.stop(we,()=>{j.current.pulsate(we)})),w&&w(we),m&&we.target===we.currentTarget&&me()&&we.key===" "&&!we.defaultPrevented&&m(we)});let De=l;De==="button"&&(X.href||X.to)&&(De=f);const Be={};De==="button"?(Be.type=z===void 0?"button":z,Be.disabled=c):(!X.href&&!X.to&&(Be.role="button"),c&&(Be["aria-disabled"]=c));const tt=Fn(n,ye,G),St=U({},r,{centerRipple:s,component:l,disabled:c,disableRipple:u,disableTouchRipple:d,focusRipple:h,tabIndex:I,focusVisible:se}),be=Bhe(St);return Z.jsxs(Fhe,U({as:De,className:Ue(be.root,a),ownerState:St,onBlur:Y,onClick:m,onContextMenu:pe,onFocus:ne,onKeyDown:de,onKeyUp:Ae,onMouseDown:Ce,onMouseLeave:B,onMouseUp:Re,onDragLeave:ke,onTouchEnd:ie,onTouchMove:q,onTouchStart:oe,ref:tt,tabIndex:c?-1:I,type:z},Be,X,{children:[o,ae?Z.jsx(Ohe,U({ref:H,center:s},k)):null]}))}),da=Uhe;function zhe(t){return ot("MuiAlert",t)}const $he=it("MuiAlert",["root","action","icon","message","filled","filledSuccess","filledInfo","filledWarning","filledError","outlined","outlinedSuccess","outlinedInfo","outlinedWarning","outlinedError","standard","standardSuccess","standardInfo","standardWarning","standardError"]),EU=$he;function jhe(t){return ot("MuiIconButton",t)}const Ghe=it("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),Hhe=["edge","children","className","color","disabled","disableFocusRipple","size"],Vhe=t=>{const{classes:e,disabled:n,color:r,edge:i,size:s}=t,o={root:["root",n&&"disabled",r!=="default"&&`color${xe(r)}`,i&&`edge${xe(i)}`,`size${xe(s)}`]};return st(o,jhe,e)},Whe=Se(da,{name:"MuiIconButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.color!=="default"&&e[`color${xe(n.color)}`],n.edge&&e[`edge${xe(n.edge)}`],e[`size${xe(n.size)}`]]}})(({theme:t,ownerState:e})=>U({textAlign:"center",flex:"0 0 auto",fontSize:t.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:(t.vars||t).palette.action.active,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shortest})},!e.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.activeChannel} / ${t.vars.palette.action.hoverOpacity})`:rn(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12}),({theme:t,ownerState:e})=>{var n;const r=(n=(t.vars||t).palette)==null?void 0:n[e.color];return U({},e.color==="inherit"&&{color:"inherit"},e.color!=="inherit"&&e.color!=="default"&&U({color:r==null?void 0:r.main},!e.disableRipple&&{"&:hover":U({},r&&{backgroundColor:t.vars?`rgba(${r.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:rn(r.main,t.palette.action.hoverOpacity)},{"@media (hover: none)":{backgroundColor:"transparent"}})}),e.size==="small"&&{padding:5,fontSize:t.typography.pxToRem(18)},e.size==="large"&&{padding:12,fontSize:t.typography.pxToRem(28)},{[`&.${Ghe.disabled}`]:{backgroundColor:"transparent",color:(t.vars||t).palette.action.disabled}})}),Xhe=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiIconButton"}),{edge:i=!1,children:s,className:o,color:a="default",disabled:l=!1,disableFocusRipple:c=!1,size:u="medium"}=r,d=$e(r,Hhe),h=U({},r,{edge:i,color:a,disabled:l,disableFocusRipple:c,size:u}),f=Vhe(h);return Z.jsx(Whe,U({className:Ue(f.root,o),centerRipple:!0,focusRipple:!c,disabled:l,ref:n,ownerState:h},d,{children:s}))}),fi=Xhe,Yhe=lt(Z.jsx("path",{d:"M20,12A8,8 0 0,1 12,20A8,8 0 0,1 4,12A8,8 0 0,1 12,4C12.76,4 13.5,4.11 14.2, 4.31L15.77,2.74C14.61,2.26 13.34,2 12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12M7.91,10.08L6.5,11.5L11,16L21,6L19.59,4.58L11,13.17L7.91,10.08Z"}),"SuccessOutlined"),Khe=lt(Z.jsx("path",{d:"M12 5.99L19.53 19H4.47L12 5.99M12 2L1 21h22L12 2zm1 14h-2v2h2v-2zm0-6h-2v4h2v-4z"}),"ReportProblemOutlined"),qhe=lt(Z.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline"),Zhe=lt(Z.jsx("path",{d:"M11,9H13V7H11M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20, 12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10, 10 0 0,0 12,2M11,17H13V11H11V17Z"}),"InfoOutlined"),Qhe=lt(Z.jsx("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),Jhe=["action","children","className","closeText","color","components","componentsProps","icon","iconMapping","onClose","role","severity","slotProps","slots","variant"],efe=t=>{const{variant:e,color:n,severity:r,classes:i}=t,s={root:["root",`${e}${xe(n||r)}`,`${e}`],icon:["icon"],message:["message"],action:["action"]};return st(s,zhe,i)},tfe=Se(Nd,{name:"MuiAlert",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${xe(n.color||n.severity)}`]]}})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?vf:yf,r=t.palette.mode==="light"?yf:vf,i=e.color||e.severity;return U({},t.typography.body2,{backgroundColor:"transparent",display:"flex",padding:"6px 16px"},i&&e.variant==="standard"&&{color:t.vars?t.vars.palette.Alert[`${i}Color`]:n(t.palette[i].light,.6),backgroundColor:t.vars?t.vars.palette.Alert[`${i}StandardBg`]:r(t.palette[i].light,.9),[`& .${EU.icon}`]:t.vars?{color:t.vars.palette.Alert[`${i}IconColor`]}:{color:t.palette[i].main}},i&&e.variant==="outlined"&&{color:t.vars?t.vars.palette.Alert[`${i}Color`]:n(t.palette[i].light,.6),border:`1px solid ${(t.vars||t).palette[i].light}`,[`& .${EU.icon}`]:t.vars?{color:t.vars.palette.Alert[`${i}IconColor`]}:{color:t.palette[i].main}},i&&e.variant==="filled"&&U({fontWeight:t.typography.fontWeightMedium},t.vars?{color:t.vars.palette.Alert[`${i}FilledColor`],backgroundColor:t.vars.palette.Alert[`${i}FilledBg`]}:{backgroundColor:t.palette.mode==="dark"?t.palette[i].dark:t.palette[i].main,color:t.palette.getContrastText(t.palette[i].main)}))}),nfe=Se("div",{name:"MuiAlert",slot:"Icon",overridesResolver:(t,e)=>e.icon})({marginRight:12,padding:"7px 0",display:"flex",fontSize:22,opacity:.9}),rfe=Se("div",{name:"MuiAlert",slot:"Message",overridesResolver:(t,e)=>e.message})({padding:"8px 0",minWidth:0,overflow:"auto"}),wU=Se("div",{name:"MuiAlert",slot:"Action",overridesResolver:(t,e)=>e.action})({display:"flex",alignItems:"flex-start",padding:"4px 0 0 16px",marginLeft:"auto",marginRight:-8}),TU={success:Z.jsx(Yhe,{fontSize:"inherit"}),warning:Z.jsx(Khe,{fontSize:"inherit"}),error:Z.jsx(qhe,{fontSize:"inherit"}),info:Z.jsx(Zhe,{fontSize:"inherit"})},ife=A.forwardRef(function(e,n){var r,i,s,o,a,l;const c=at({props:e,name:"MuiAlert"}),{action:u,children:d,className:h,closeText:f="Close",color:p,components:m={},componentsProps:_={},icon:y,iconMapping:x=TU,onClose:b,role:E="alert",severity:w="success",slotProps:T={},slots:C={},variant:P="standard"}=c,M=$e(c,Jhe),N=U({},c,{color:p,severity:w,variant:P}),F=efe(N),I=(r=(i=C.closeButton)!=null?i:m.CloseButton)!=null?r:fi,k=(s=(o=C.closeIcon)!=null?o:m.CloseIcon)!=null?s:Qhe,R=(a=T.closeButton)!=null?a:_.closeButton,z=(l=T.closeIcon)!=null?l:_.closeIcon;return Z.jsxs(tfe,U({role:E,elevation:0,ownerState:N,className:Ue(F.root,h),ref:n},M,{children:[y!==!1?Z.jsx(nfe,{ownerState:N,className:F.icon,children:y||x[w]||TU[w]}):null,Z.jsx(rfe,{ownerState:N,className:F.message,children:d}),u!=null?Z.jsx(wU,{ownerState:N,className:F.action,children:u}):null,u==null&&b?Z.jsx(wU,{ownerState:N,className:F.action,children:Z.jsx(I,U({size:"small","aria-label":f,title:f,color:"inherit",onClick:b},R,{children:Z.jsx(k,U({fontSize:"small"},z))}))}):null]}))}),cd=ife;function sfe(t){return ot("MuiTypography",t)}it("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const ofe=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],afe=t=>{const{align:e,gutterBottom:n,noWrap:r,paragraph:i,variant:s,classes:o}=t,a={root:["root",s,t.align!=="inherit"&&`align${xe(e)}`,n&&"gutterBottom",r&&"noWrap",i&&"paragraph"]};return st(a,sfe,o)},lfe=Se("span",{name:"MuiTypography",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.variant&&e[n.variant],n.align!=="inherit"&&e[`align${xe(n.align)}`],n.noWrap&&e.noWrap,n.gutterBottom&&e.gutterBottom,n.paragraph&&e.paragraph]}})(({theme:t,ownerState:e})=>U({margin:0},e.variant==="inherit"&&{font:"inherit"},e.variant!=="inherit"&&t.typography[e.variant],e.align!=="inherit"&&{textAlign:e.align},e.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e.gutterBottom&&{marginBottom:"0.35em"},e.paragraph&&{marginBottom:16})),SU={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},cfe={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},ufe=t=>cfe[t]||t,dfe=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiTypography"}),i=ufe(r.color),s=hN(U({},r,{color:i})),{align:o="inherit",className:a,component:l,gutterBottom:c=!1,noWrap:u=!1,paragraph:d=!1,variant:h="body1",variantMapping:f=SU}=s,p=$e(s,ofe),m=U({},s,{align:o,color:i,className:a,component:l,gutterBottom:c,noWrap:u,paragraph:d,variant:h,variantMapping:f}),_=l||(d?"p":f[h]||SU[h])||"span",y=afe(m);return Z.jsx(lfe,U({as:_,ref:n,ownerState:m,className:Ue(y.root,a)},p))}),en=dfe;function hfe(t){const{badgeContent:e,invisible:n=!1,max:r=99,showZero:i=!1}=t,s=G9({badgeContent:e,max:r});let o=n;n===!1&&e===0&&!i&&(o=!0);const{badgeContent:a,max:l=r}=o?s:t,c=a&&Number(a)>l?`${l}+`:a;return{badgeContent:a,invisible:o,max:l,displayValue:c}}const s7="base";function ffe(t){return`${s7}--${t}`}function pfe(t,e){return`${s7}-${t}-${e}`}function o7(t,e){const n=V9[e];return n?ffe(n):pfe(t,e)}function mfe(t,e){const n={};return e.forEach(r=>{n[r]=o7(t,r)}),n}function CU(t){return t.substring(2).toLowerCase()}function gfe(t,e){return e.documentElement.clientWidth<t.clientX||e.documentElement.clientHeight<t.clientY}function vfe(t){const{children:e,disableReactTree:n=!1,mouseEvent:r="onClick",onClickAway:i,touchEvent:s="onTouchEnd"}=t,o=A.useRef(!1),a=A.useRef(null),l=A.useRef(!1),c=A.useRef(!1);A.useEffect(()=>(setTimeout(()=>{l.current=!0},0),()=>{l.current=!1}),[]);const u=Fn(e.ref,a),d=Vr(p=>{const m=c.current;c.current=!1;const _=tr(a.current);if(!l.current||!a.current||"clientX"in p&&gfe(p,_))return;if(o.current){o.current=!1;return}let y;p.composedPath?y=p.composedPath().indexOf(a.current)>-1:y=!_.documentElement.contains(p.target)||a.current.contains(p.target),!y&&(n||!m)&&i(p)}),h=p=>m=>{c.current=!0;const _=e.props[p];_&&_(m)},f={ref:u};return s!==!1&&(f[s]=h(s)),A.useEffect(()=>{if(s!==!1){const p=CU(s),m=tr(a.current),_=()=>{o.current=!0};return m.addEventListener(p,d),m.addEventListener("touchmove",_),()=>{m.removeEventListener(p,d),m.removeEventListener("touchmove",_)}}},[d,s]),r!==!1&&(f[r]=h(r)),A.useEffect(()=>{if(r!==!1){const p=CU(r),m=tr(a.current);return m.addEventListener(p,d),()=>{m.removeEventListener(p,d)}}},[d,r]),Z.jsx(A.Fragment,{children:A.cloneElement(e,f)})}const yfe=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function _fe(t){const e=parseInt(t.getAttribute("tabindex")||"",10);return Number.isNaN(e)?t.contentEditable==="true"||(t.nodeName==="AUDIO"||t.nodeName==="VIDEO"||t.nodeName==="DETAILS")&&t.getAttribute("tabindex")===null?0:t.tabIndex:e}function bfe(t){if(t.tagName!=="INPUT"||t.type!=="radio"||!t.name)return!1;const e=r=>t.ownerDocument.querySelector(`input[type="radio"]${r}`);let n=e(`[name="${t.name}"]:checked`);return n||(n=e(`[name="${t.name}"]`)),n!==t}function xfe(t){return!(t.disabled||t.tagName==="INPUT"&&t.type==="hidden"||bfe(t))}function Efe(t){const e=[],n=[];return Array.from(t.querySelectorAll(yfe)).forEach((r,i)=>{const s=_fe(r);s===-1||!xfe(r)||(s===0?e.push(r):n.push({documentOrder:i,tabIndex:s,node:r}))}),n.sort((r,i)=>r.tabIndex===i.tabIndex?r.documentOrder-i.documentOrder:r.tabIndex-i.tabIndex).map(r=>r.node).concat(e)}function wfe(){return!0}function Tfe(t){const{children:e,disableAutoFocus:n=!1,disableEnforceFocus:r=!1,disableRestoreFocus:i=!1,getTabbable:s=Efe,isEnabled:o=wfe,open:a}=t,l=A.useRef(!1),c=A.useRef(null),u=A.useRef(null),d=A.useRef(null),h=A.useRef(null),f=A.useRef(!1),p=A.useRef(null),m=Fn(e.ref,p),_=A.useRef(null);A.useEffect(()=>{!a||!p.current||(f.current=!n)},[n,a]),A.useEffect(()=>{if(!a||!p.current)return;const b=tr(p.current);return p.current.contains(b.activeElement)||(p.current.hasAttribute("tabIndex")||p.current.setAttribute("tabIndex","-1"),f.current&&p.current.focus()),()=>{i||(d.current&&d.current.focus&&(l.current=!0,d.current.focus()),d.current=null)}},[a]),A.useEffect(()=>{if(!a||!p.current)return;const b=tr(p.current),E=C=>{_.current=C,!(r||!o()||C.key!=="Tab")&&b.activeElement===p.current&&C.shiftKey&&(l.current=!0,u.current&&u.current.focus())},w=()=>{const C=p.current;if(C===null)return;if(!b.hasFocus()||!o()||l.current){l.current=!1;return}if(C.contains(b.activeElement)||r&&b.activeElement!==c.current&&b.activeElement!==u.current)return;if(b.activeElement!==h.current)h.current=null;else if(h.current!==null)return;if(!f.current)return;let P=[];if((b.activeElement===c.current||b.activeElement===u.current)&&(P=s(p.current)),P.length>0){var M,N;const F=!!((M=_.current)!=null&&M.shiftKey&&((N=_.current)==null?void 0:N.key)==="Tab"),I=P[0],k=P[P.length-1];typeof I!="string"&&typeof k!="string"&&(F?k.focus():I.focus())}else C.focus()};b.addEventListener("focusin",w),b.addEventListener("keydown",E,!0);const T=setInterval(()=>{b.activeElement&&b.activeElement.tagName==="BODY"&&w()},50);return()=>{clearInterval(T),b.removeEventListener("focusin",w),b.removeEventListener("keydown",E,!0)}},[n,r,i,o,a,s]);const y=b=>{d.current===null&&(d.current=b.relatedTarget),f.current=!0,h.current=b.target;const E=e.props.onFocus;E&&E(b)},x=b=>{d.current===null&&(d.current=b.relatedTarget),f.current=!0};return Z.jsxs(A.Fragment,{children:[Z.jsx("div",{tabIndex:a?0:-1,onFocus:x,ref:c,"data-testid":"sentinelStart"}),A.cloneElement(e,{ref:m,onFocus:y}),Z.jsx("div",{tabIndex:a?0:-1,onFocus:x,ref:u,"data-testid":"sentinelEnd"})]})}function Sfe(t){return typeof t=="function"?t():t}const a7=A.forwardRef(function(e,n){const{children:r,container:i,disablePortal:s=!1}=e,[o,a]=A.useState(null),l=Fn(A.isValidElement(r)?r.ref:null,n);if(Os(()=>{s||a(Sfe(i)||document.body)},[i,s]),Os(()=>{if(o&&!s)return xw(n,o),()=>{xw(n,null)}},[n,o,s]),s){if(A.isValidElement(r)){const c={ref:l};return A.cloneElement(r,c)}return Z.jsx(A.Fragment,{children:r})}return Z.jsx(A.Fragment,{children:o&&Wc.createPortal(r,o)})});function Cfe(t){const e=tr(t);return e.body===t?$l(t).innerWidth>e.documentElement.clientWidth:t.scrollHeight>t.clientHeight}function Bv(t,e){e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden")}function AU(t){return parseInt($l(t).getComputedStyle(t).paddingRight,10)||0}function Afe(t){const n=["TEMPLATE","SCRIPT","STYLE","LINK","MAP","META","NOSCRIPT","PICTURE","COL","COLGROUP","PARAM","SLOT","SOURCE","TRACK"].indexOf(t.tagName)!==-1,r=t.tagName==="INPUT"&&t.getAttribute("type")==="hidden";return n||r}function RU(t,e,n,r,i){const s=[e,n,...r];[].forEach.call(t.children,o=>{const a=s.indexOf(o)===-1,l=!Afe(o);a&&l&&Bv(o,i)})}function LR(t,e){let n=-1;return t.some((r,i)=>e(r)?(n=i,!0):!1),n}function Rfe(t,e){const n=[],r=t.container;if(!e.disableScrollLock){if(Cfe(r)){const o=$9(tr(r));n.push({value:r.style.paddingRight,property:"padding-right",el:r}),r.style.paddingRight=`${AU(r)+o}px`;const a=tr(r).querySelectorAll(".mui-fixed");[].forEach.call(a,l=>{n.push({value:l.style.paddingRight,property:"padding-right",el:l}),l.style.paddingRight=`${AU(l)+o}px`})}let s;if(r.parentNode instanceof DocumentFragment)s=tr(r).body;else{const o=r.parentElement,a=$l(r);s=(o==null?void 0:o.nodeName)==="HTML"&&a.getComputedStyle(o).overflowY==="scroll"?o:r}n.push({value:s.style.overflow,property:"overflow",el:s},{value:s.style.overflowX,property:"overflow-x",el:s},{value:s.style.overflowY,property:"overflow-y",el:s}),s.style.overflow="hidden"}return()=>{n.forEach(({value:s,el:o,property:a})=>{s?o.style.setProperty(a,s):o.style.removeProperty(a)})}}function Pfe(t){const e=[];return[].forEach.call(t.children,n=>{n.getAttribute("aria-hidden")==="true"&&e.push(n)}),e}class Ife{constructor(){this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}add(e,n){let r=this.modals.indexOf(e);if(r!==-1)return r;r=this.modals.length,this.modals.push(e),e.modalRef&&Bv(e.modalRef,!1);const i=Pfe(n);RU(n,e.mount,e.modalRef,i,!0);const s=LR(this.containers,o=>o.container===n);return s!==-1?(this.containers[s].modals.push(e),r):(this.containers.push({modals:[e],container:n,restore:null,hiddenSiblings:i}),r)}mount(e,n){const r=LR(this.containers,s=>s.modals.indexOf(e)!==-1),i=this.containers[r];i.restore||(i.restore=Rfe(i,n))}remove(e,n=!0){const r=this.modals.indexOf(e);if(r===-1)return r;const i=LR(this.containers,o=>o.modals.indexOf(e)!==-1),s=this.containers[i];if(s.modals.splice(s.modals.indexOf(e),1),this.modals.splice(r,1),s.modals.length===0)s.restore&&s.restore(),e.modalRef&&Bv(e.modalRef,n),RU(s.container,e.mount,e.modalRef,s.hiddenSiblings,!1),this.containers.splice(i,1);else{const o=s.modals[s.modals.length-1];o.modalRef&&Bv(o.modalRef,!1)}return r}isTopModal(e){return this.modals.length>0&&this.modals[this.modals.length-1]===e}}function Mfe(t){return typeof t=="function"?t():t}function Lfe(t){return t?t.props.hasOwnProperty("in"):!1}const Ofe=new Ife;function kfe(t){const{container:e,disableEscapeKeyDown:n=!1,disableScrollLock:r=!1,manager:i=Ofe,closeAfterTransition:s=!1,onTransitionEnter:o,onTransitionExited:a,children:l,onClose:c,open:u,rootRef:d}=t,h=A.useRef({}),f=A.useRef(null),p=A.useRef(null),m=Fn(p,d),[_,y]=A.useState(!u),x=Lfe(l);let b=!0;(t["aria-hidden"]==="false"||t["aria-hidden"]===!1)&&(b=!1);const E=()=>tr(f.current),w=()=>(h.current.modalRef=p.current,h.current.mount=f.current,h.current),T=()=>{i.mount(w(),{disableScrollLock:r}),p.current&&(p.current.scrollTop=0)},C=Vr(()=>{const X=Mfe(e)||E().body;i.add(w(),X),p.current&&T()}),P=A.useCallback(()=>i.isTopModal(w()),[i]),M=Vr(X=>{f.current=X,X&&(u&&P()?T():p.current&&Bv(p.current,b))}),N=A.useCallback(()=>{i.remove(w(),b)},[b,i]);A.useEffect(()=>()=>{N()},[N]),A.useEffect(()=>{u?C():(!x||!s)&&N()},[u,N,x,s,C]);const F=X=>G=>{var j;(j=X.onKeyDown)==null||j.call(X,G),!(G.key!=="Escape"||G.which===229||!P())&&(n||(G.stopPropagation(),c&&c(G,"escapeKeyDown")))},I=X=>G=>{var j;(j=X.onClick)==null||j.call(X,G),G.target===G.currentTarget&&c&&c(G,"backdropClick")};return{getRootProps:(X={})=>{const G=Dv(t);delete G.onTransitionEnter,delete G.onTransitionExited;const j=U({},G,X);return U({role:"presentation"},j,{onKeyDown:F(j),ref:m})},getBackdropProps:(X={})=>{const G=X;return U({"aria-hidden":!0},G,{onClick:I(G),open:u})},getTransitionProps:()=>{const X=()=>{y(!1),o&&o()},G=()=>{y(!0),a&&a(),s&&N()};return{onEnter:bw(X,l==null?void 0:l.props.onEnter),onExited:bw(G,l==null?void 0:l.props.onExited)}},rootRef:m,portalRef:M,isTopModal:P,exited:_,hasTransition:x}}var Ks="top",ha="bottom",fa="right",qs="left",yN="auto",I1=[Ks,ha,fa,qs],Vm="start",Ny="end",Nfe="clippingParents",l7="viewport",y0="popper",Dfe="reference",PU=I1.reduce(function(t,e){return t.concat([e+"-"+Vm,e+"-"+Ny])},[]),c7=[].concat(I1,[yN]).reduce(function(t,e){return t.concat([e,e+"-"+Vm,e+"-"+Ny])},[]),Bfe="beforeRead",Ffe="read",Ufe="afterRead",zfe="beforeMain",$fe="main",jfe="afterMain",Gfe="beforeWrite",Hfe="write",Vfe="afterWrite",Wfe=[Bfe,Ffe,Ufe,zfe,$fe,jfe,Gfe,Hfe,Vfe];function jl(t){return t?(t.nodeName||"").toLowerCase():null}function Po(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function _f(t){var e=Po(t).Element;return t instanceof e||t instanceof Element}function sa(t){var e=Po(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function _N(t){if(typeof ShadowRoot>"u")return!1;var e=Po(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function Xfe(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},s=e.elements[n];!sa(s)||!jl(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(o){var a=i[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function Yfe(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),a=o.reduce(function(l,c){return l[c]="",l},{});!sa(i)||!jl(i)||(Object.assign(i.style,a),Object.keys(s).forEach(function(l){i.removeAttribute(l)}))})}}const Kfe={name:"applyStyles",enabled:!0,phase:"write",fn:Xfe,effect:Yfe,requires:["computeStyles"]};function Fl(t){return t.split("-")[0]}var jh=Math.max,Tw=Math.min,Wm=Math.round;function pM(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function u7(){return!/^((?!chrome|android).)*safari/i.test(pM())}function Xm(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,s=1;e&&sa(t)&&(i=t.offsetWidth>0&&Wm(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&Wm(r.height)/t.offsetHeight||1);var o=_f(t)?Po(t):window,a=o.visualViewport,l=!u7()&&n,c=(r.left+(l&&a?a.offsetLeft:0))/i,u=(r.top+(l&&a?a.offsetTop:0))/s,d=r.width/i,h=r.height/s;return{width:d,height:h,top:u,right:c+d,bottom:u+h,left:c,x:c,y:u}}function bN(t){var e=Xm(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function d7(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&_N(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Uc(t){return Po(t).getComputedStyle(t)}function qfe(t){return["table","td","th"].indexOf(jl(t))>=0}function Dd(t){return((_f(t)?t.ownerDocument:t.document)||window.document).documentElement}function DS(t){return jl(t)==="html"?t:t.assignedSlot||t.parentNode||(_N(t)?t.host:null)||Dd(t)}function IU(t){return!sa(t)||Uc(t).position==="fixed"?null:t.offsetParent}function Zfe(t){var e=/firefox/i.test(pM()),n=/Trident/i.test(pM());if(n&&sa(t)){var r=Uc(t);if(r.position==="fixed")return null}var i=DS(t);for(_N(i)&&(i=i.host);sa(i)&&["html","body"].indexOf(jl(i))<0;){var s=Uc(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function M1(t){for(var e=Po(t),n=IU(t);n&&qfe(n)&&Uc(n).position==="static";)n=IU(n);return n&&(jl(n)==="html"||jl(n)==="body"&&Uc(n).position==="static")?e:n||Zfe(t)||e}function xN(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Fv(t,e,n){return jh(t,Tw(e,n))}function Qfe(t,e,n){var r=Fv(t,e,n);return r>n?n:r}function h7(){return{top:0,right:0,bottom:0,left:0}}function f7(t){return Object.assign({},h7(),t)}function p7(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var Jfe=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,f7(typeof e!="number"?e:p7(e,I1))};function epe(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=Fl(n.placement),l=xN(a),c=[qs,fa].indexOf(a)>=0,u=c?"height":"width";if(!(!s||!o)){var d=Jfe(i.padding,n),h=bN(s),f=l==="y"?Ks:qs,p=l==="y"?ha:fa,m=n.rects.reference[u]+n.rects.reference[l]-o[l]-n.rects.popper[u],_=o[l]-n.rects.reference[l],y=M1(s),x=y?l==="y"?y.clientHeight||0:y.clientWidth||0:0,b=m/2-_/2,E=d[f],w=x-h[u]-d[p],T=x/2-h[u]/2+b,C=Fv(E,T,w),P=l;n.modifiersData[r]=(e={},e[P]=C,e.centerOffset=C-T,e)}}function tpe(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||d7(e.elements.popper,i)&&(e.elements.arrow=i))}const npe={name:"arrow",enabled:!0,phase:"main",fn:epe,effect:tpe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ym(t){return t.split("-")[1]}var rpe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ipe(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:Wm(n*i)/i||0,y:Wm(r*i)/i||0}}function MU(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,h=o.x,f=h===void 0?0:h,p=o.y,m=p===void 0?0:p,_=typeof u=="function"?u({x:f,y:m}):{x:f,y:m};f=_.x,m=_.y;var y=o.hasOwnProperty("x"),x=o.hasOwnProperty("y"),b=qs,E=Ks,w=window;if(c){var T=M1(n),C="clientHeight",P="clientWidth";if(T===Po(n)&&(T=Dd(n),Uc(T).position!=="static"&&a==="absolute"&&(C="scrollHeight",P="scrollWidth")),T=T,i===Ks||(i===qs||i===fa)&&s===Ny){E=ha;var M=d&&T===w&&w.visualViewport?w.visualViewport.height:T[C];m-=M-r.height,m*=l?1:-1}if(i===qs||(i===Ks||i===ha)&&s===Ny){b=fa;var N=d&&T===w&&w.visualViewport?w.visualViewport.width:T[P];f-=N-r.width,f*=l?1:-1}}var F=Object.assign({position:a},c&&rpe),I=u===!0?ipe({x:f,y:m},Po(n)):{x:f,y:m};if(f=I.x,m=I.y,l){var k;return Object.assign({},F,(k={},k[E]=x?"0":"",k[b]=y?"0":"",k.transform=(w.devicePixelRatio||1)<=1?"translate("+f+"px, "+m+"px)":"translate3d("+f+"px, "+m+"px, 0)",k))}return Object.assign({},F,(e={},e[E]=x?m+"px":"",e[b]=y?f+"px":"",e.transform="",e))}function spe(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,c={placement:Fl(e.placement),variation:Ym(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,MU(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,MU(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const ope={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:spe,data:{}};var Ab={passive:!0};function ape(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,a=o===void 0?!0:o,l=Po(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",n.update,Ab)}),a&&l.addEventListener("resize",n.update,Ab),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",n.update,Ab)}),a&&l.removeEventListener("resize",n.update,Ab)}}const lpe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:ape,data:{}};var cpe={left:"right",right:"left",bottom:"top",top:"bottom"};function lE(t){return t.replace(/left|right|bottom|top/g,function(e){return cpe[e]})}var upe={start:"end",end:"start"};function LU(t){return t.replace(/start|end/g,function(e){return upe[e]})}function EN(t){var e=Po(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function wN(t){return Xm(Dd(t)).left+EN(t).scrollLeft}function dpe(t,e){var n=Po(t),r=Dd(t),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,a=0,l=0;if(i){s=i.width,o=i.height;var c=u7();(c||!c&&e==="fixed")&&(a=i.offsetLeft,l=i.offsetTop)}return{width:s,height:o,x:a+wN(t),y:l}}function hpe(t){var e,n=Dd(t),r=EN(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=jh(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=jh(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),a=-r.scrollLeft+wN(t),l=-r.scrollTop;return Uc(i||n).direction==="rtl"&&(a+=jh(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function TN(t){var e=Uc(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function m7(t){return["html","body","#document"].indexOf(jl(t))>=0?t.ownerDocument.body:sa(t)&&TN(t)?t:m7(DS(t))}function Uv(t,e){var n;e===void 0&&(e=[]);var r=m7(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=Po(r),o=i?[s].concat(s.visualViewport||[],TN(r)?r:[]):r,a=e.concat(o);return i?a:a.concat(Uv(DS(o)))}function mM(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function fpe(t,e){var n=Xm(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function OU(t,e,n){return e===l7?mM(dpe(t,n)):_f(e)?fpe(e,n):mM(hpe(Dd(t)))}function ppe(t){var e=Uv(DS(t)),n=["absolute","fixed"].indexOf(Uc(t).position)>=0,r=n&&sa(t)?M1(t):t;return _f(r)?e.filter(function(i){return _f(i)&&d7(i,r)&&jl(i)!=="body"}):[]}function mpe(t,e,n,r){var i=e==="clippingParents"?ppe(t):[].concat(e),s=[].concat(i,[n]),o=s[0],a=s.reduce(function(l,c){var u=OU(t,c,r);return l.top=jh(u.top,l.top),l.right=Tw(u.right,l.right),l.bottom=Tw(u.bottom,l.bottom),l.left=jh(u.left,l.left),l},OU(t,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function g7(t){var e=t.reference,n=t.element,r=t.placement,i=r?Fl(r):null,s=r?Ym(r):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(i){case Ks:l={x:o,y:e.y-n.height};break;case ha:l={x:o,y:e.y+e.height};break;case fa:l={x:e.x+e.width,y:a};break;case qs:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var c=i?xN(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case Vm:l[c]=l[c]-(e[u]/2-n[u]/2);break;case Ny:l[c]=l[c]+(e[u]/2-n[u]/2);break}}return l}function Dy(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,s=n.strategy,o=s===void 0?t.strategy:s,a=n.boundary,l=a===void 0?Nfe:a,c=n.rootBoundary,u=c===void 0?l7:c,d=n.elementContext,h=d===void 0?y0:d,f=n.altBoundary,p=f===void 0?!1:f,m=n.padding,_=m===void 0?0:m,y=f7(typeof _!="number"?_:p7(_,I1)),x=h===y0?Dfe:y0,b=t.rects.popper,E=t.elements[p?x:h],w=mpe(_f(E)?E:E.contextElement||Dd(t.elements.popper),l,u,o),T=Xm(t.elements.reference),C=g7({reference:T,element:b,strategy:"absolute",placement:i}),P=mM(Object.assign({},b,C)),M=h===y0?P:T,N={top:w.top-M.top+y.top,bottom:M.bottom-w.bottom+y.bottom,left:w.left-M.left+y.left,right:M.right-w.right+y.right},F=t.modifiersData.offset;if(h===y0&&F){var I=F[i];Object.keys(N).forEach(function(k){var R=[fa,ha].indexOf(k)>=0?1:-1,z=[Ks,ha].indexOf(k)>=0?"y":"x";N[k]+=I[z]*R})}return N}function gpe(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=l===void 0?c7:l,u=Ym(r),d=u?a?PU:PU.filter(function(p){return Ym(p)===u}):I1,h=d.filter(function(p){return c.indexOf(p)>=0});h.length===0&&(h=d);var f=h.reduce(function(p,m){return p[m]=Dy(t,{placement:m,boundary:i,rootBoundary:s,padding:o})[Fl(m)],p},{});return Object.keys(f).sort(function(p,m){return f[p]-f[m]})}function vpe(t){if(Fl(t)===yN)return[];var e=lE(t);return[LU(t),e,LU(e)]}function ype(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,h=n.altBoundary,f=n.flipVariations,p=f===void 0?!0:f,m=n.allowedAutoPlacements,_=e.options.placement,y=Fl(_),x=y===_,b=l||(x||!p?[lE(_)]:vpe(_)),E=[_].concat(b).reduce(function(se,fe){return se.concat(Fl(fe)===yN?gpe(e,{placement:fe,boundary:u,rootBoundary:d,padding:c,flipVariations:p,allowedAutoPlacements:m}):fe)},[]),w=e.rects.reference,T=e.rects.popper,C=new Map,P=!0,M=E[0],N=0;N<E.length;N++){var F=E[N],I=Fl(F),k=Ym(F)===Vm,R=[Ks,ha].indexOf(I)>=0,z=R?"width":"height",X=Dy(e,{placement:F,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),G=R?k?fa:qs:k?ha:Ks;w[z]>T[z]&&(G=lE(G));var j=lE(G),H=[];if(s&&H.push(X[I]<=0),a&&H.push(X[G]<=0,X[j]<=0),H.every(function(se){return se})){M=F,P=!1;break}C.set(F,H)}if(P)for(var Q=p?3:1,V=function(fe){var ve=E.find(function(Oe){var ae=C.get(Oe);if(ae)return ae.slice(0,fe).every(function(ue){return ue})});if(ve)return M=ve,"break"},ee=Q;ee>0;ee--){var ye=V(ee);if(ye==="break")break}e.placement!==M&&(e.modifiersData[r]._skip=!0,e.placement=M,e.reset=!0)}}const _pe={name:"flip",enabled:!0,phase:"main",fn:ype,requiresIfExists:["offset"],data:{_skip:!1}};function kU(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function NU(t){return[Ks,fa,ha,qs].some(function(e){return t[e]>=0})}function bpe(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=Dy(e,{elementContext:"reference"}),a=Dy(e,{altBoundary:!0}),l=kU(o,r),c=kU(a,i,s),u=NU(l),d=NU(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const xpe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:bpe};function Epe(t,e,n){var r=Fl(t),i=[qs,Ks].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*i,[qs,fa].indexOf(r)>=0?{x:a,y:o}:{x:o,y:a}}function wpe(t){var e=t.state,n=t.options,r=t.name,i=n.offset,s=i===void 0?[0,0]:i,o=c7.reduce(function(u,d){return u[d]=Epe(d,e.rects,s),u},{}),a=o[e.placement],l=a.x,c=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=o}const Tpe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:wpe};function Spe(t){var e=t.state,n=t.name;e.modifiersData[n]=g7({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}const Cpe={name:"popperOffsets",enabled:!0,phase:"read",fn:Spe,data:{}};function Ape(t){return t==="x"?"y":"x"}function Rpe(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,h=n.tether,f=h===void 0?!0:h,p=n.tetherOffset,m=p===void 0?0:p,_=Dy(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),y=Fl(e.placement),x=Ym(e.placement),b=!x,E=xN(y),w=Ape(E),T=e.modifiersData.popperOffsets,C=e.rects.reference,P=e.rects.popper,M=typeof m=="function"?m(Object.assign({},e.rects,{placement:e.placement})):m,N=typeof M=="number"?{mainAxis:M,altAxis:M}:Object.assign({mainAxis:0,altAxis:0},M),F=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,I={x:0,y:0};if(T){if(s){var k,R=E==="y"?Ks:qs,z=E==="y"?ha:fa,X=E==="y"?"height":"width",G=T[E],j=G+_[R],H=G-_[z],Q=f?-P[X]/2:0,V=x===Vm?C[X]:P[X],ee=x===Vm?-P[X]:-C[X],ye=e.elements.arrow,se=f&&ye?bN(ye):{width:0,height:0},fe=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:h7(),ve=fe[R],Oe=fe[z],ae=Fv(0,C[X],se[X]),ue=b?C[X]/2-Q-ae-ve-N.mainAxis:V-ae-ve-N.mainAxis,Ce=b?-C[X]/2+Q+ae+Oe+N.mainAxis:ee+ae+Oe+N.mainAxis,pe=e.elements.arrow&&M1(e.elements.arrow),ke=pe?E==="y"?pe.clientTop||0:pe.clientLeft||0:0,Re=(k=F==null?void 0:F[E])!=null?k:0,B=G+ue-Re-ke,oe=G+Ce-Re,ie=Fv(f?Tw(j,B):j,G,f?jh(H,oe):H);T[E]=ie,I[E]=ie-G}if(a){var q,Y=E==="x"?Ks:qs,ne=E==="x"?ha:fa,me=T[w],he=w==="y"?"height":"width",de=me+_[Y],Ae=me-_[ne],De=[Ks,qs].indexOf(y)!==-1,Be=(q=F==null?void 0:F[w])!=null?q:0,tt=De?de:me-C[he]-P[he]-Be+N.altAxis,St=De?me+C[he]+P[he]-Be-N.altAxis:Ae,be=f&&De?Qfe(tt,me,St):Fv(f?tt:de,me,f?St:Ae);T[w]=be,I[w]=be-me}e.modifiersData[r]=I}}const Ppe={name:"preventOverflow",enabled:!0,phase:"main",fn:Rpe,requiresIfExists:["offset"]};function Ipe(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function Mpe(t){return t===Po(t)||!sa(t)?EN(t):Ipe(t)}function Lpe(t){var e=t.getBoundingClientRect(),n=Wm(e.width)/t.offsetWidth||1,r=Wm(e.height)/t.offsetHeight||1;return n!==1||r!==1}function Ope(t,e,n){n===void 0&&(n=!1);var r=sa(e),i=sa(e)&&Lpe(e),s=Dd(e),o=Xm(t,i,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!n)&&((jl(e)!=="body"||TN(s))&&(a=Mpe(e)),sa(e)?(l=Xm(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=wN(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function kpe(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function i(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&i(l)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||i(s)}),r}function Npe(t){var e=kpe(t);return Wfe.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function Dpe(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function Bpe(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var DU={placement:"bottom",modifiers:[],strategy:"absolute"};function BU(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function Fpe(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,s=i===void 0?DU:i;return function(a,l,c){c===void 0&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},DU,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],h=!1,f={state:u,setOptions:function(y){var x=typeof y=="function"?y(u.options):y;m(),u.options=Object.assign({},s,u.options,x),u.scrollParents={reference:_f(a)?Uv(a):a.contextElement?Uv(a.contextElement):[],popper:Uv(l)};var b=Npe(Bpe([].concat(r,u.options.modifiers)));return u.orderedModifiers=b.filter(function(E){return E.enabled}),p(),f.update()},forceUpdate:function(){if(!h){var y=u.elements,x=y.reference,b=y.popper;if(BU(x,b)){u.rects={reference:Ope(x,M1(b),u.options.strategy==="fixed"),popper:bN(b)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(N){return u.modifiersData[N.name]=Object.assign({},N.data)});for(var E=0;E<u.orderedModifiers.length;E++){if(u.reset===!0){u.reset=!1,E=-1;continue}var w=u.orderedModifiers[E],T=w.fn,C=w.options,P=C===void 0?{}:C,M=w.name;typeof T=="function"&&(u=T({state:u,options:P,name:M,instance:f})||u)}}}},update:Dpe(function(){return new Promise(function(_){f.forceUpdate(),_(u)})}),destroy:function(){m(),h=!0}};if(!BU(a,l))return f;f.setOptions(c).then(function(_){!h&&c.onFirstUpdate&&c.onFirstUpdate(_)});function p(){u.orderedModifiers.forEach(function(_){var y=_.name,x=_.options,b=x===void 0?{}:x,E=_.effect;if(typeof E=="function"){var w=E({state:u,name:y,instance:f,options:b}),T=function(){};d.push(w||T)}})}function m(){d.forEach(function(_){return _()}),d=[]}return f}}var Upe=[lpe,Cpe,ope,Kfe,Tpe,_pe,Ppe,npe,xpe],zpe=Fpe({defaultModifiers:Upe});const v7="Popper";function $pe(t){return o7(v7,t)}mfe(v7,["root"]);const jpe=["anchorEl","children","direction","disablePortal","modifiers","open","placement","popperOptions","popperRef","slotProps","slots","TransitionProps","ownerState"],Gpe=["anchorEl","children","container","direction","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","style","transition","slotProps","slots"];function Hpe(t,e){if(e==="ltr")return t;switch(t){case"bottom-end":return"bottom-start";case"bottom-start":return"bottom-end";case"top-end":return"top-start";case"top-start":return"top-end";default:return t}}function gM(t){return typeof t=="function"?t():t}function Vpe(t){return t.nodeType!==void 0}const Wpe=()=>st({root:["root"]},bhe($pe)),Xpe={},Ype=A.forwardRef(function(e,n){var r;const{anchorEl:i,children:s,direction:o,disablePortal:a,modifiers:l,open:c,placement:u,popperOptions:d,popperRef:h,slotProps:f={},slots:p={},TransitionProps:m}=e,_=$e(e,jpe),y=A.useRef(null),x=Fn(y,n),b=A.useRef(null),E=Fn(b,h),w=A.useRef(E);Os(()=>{w.current=E},[E]),A.useImperativeHandle(h,()=>b.current,[]);const T=Hpe(u,o),[C,P]=A.useState(T),[M,N]=A.useState(gM(i));A.useEffect(()=>{b.current&&b.current.forceUpdate()}),A.useEffect(()=>{i&&N(gM(i))},[i]),Os(()=>{if(!M||!c)return;const z=j=>{P(j.placement)};let X=[{name:"preventOverflow",options:{altBoundary:a}},{name:"flip",options:{altBoundary:a}},{name:"onUpdate",enabled:!0,phase:"afterWrite",fn:({state:j})=>{z(j)}}];l!=null&&(X=X.concat(l)),d&&d.modifiers!=null&&(X=X.concat(d.modifiers));const G=zpe(M,y.current,U({placement:T},d,{modifiers:X}));return w.current(G),()=>{G.destroy(),w.current(null)}},[M,a,l,c,d,T]);const F={placement:C};m!==null&&(F.TransitionProps=m);const I=Wpe(),k=(r=p.root)!=null?r:"div",R=Nr({elementType:k,externalSlotProps:f.root,externalForwardedProps:_,additionalProps:{role:"tooltip",ref:x},ownerState:e,className:I.root});return Z.jsx(k,U({},R,{children:typeof s=="function"?s(F):s}))}),Kpe=A.forwardRef(function(e,n){const{anchorEl:r,children:i,container:s,direction:o="ltr",disablePortal:a=!1,keepMounted:l=!1,modifiers:c,open:u,placement:d="bottom",popperOptions:h=Xpe,popperRef:f,style:p,transition:m=!1,slotProps:_={},slots:y={}}=e,x=$e(e,Gpe),[b,E]=A.useState(!0),w=()=>{E(!1)},T=()=>{E(!0)};if(!l&&!u&&(!m||b))return null;let C;if(s)C=s;else if(r){const N=gM(r);C=N&&Vpe(N)?tr(N).body:tr(null).body}const P=!u&&l&&(!m||b)?"none":void 0,M=m?{in:u,onEnter:w,onExited:T}:void 0;return Z.jsx(a7,{disablePortal:a,container:C,children:Z.jsx(Ype,U({anchorEl:r,direction:o,disablePortal:a,modifiers:c,ref:n,open:m?!b:u,placement:d,popperOptions:h,popperRef:f,slotProps:_,slots:y},x,{style:U({position:"fixed",top:0,left:0,display:P},p),TransitionProps:M,children:i}))})}),qpe=2;function y7(t,e){return t-e}function FU(t,e){var n;const{index:r}=(n=t.reduce((i,s,o)=>{const a=Math.abs(e-s);return i===null||a<i.distance||a===i.distance?{distance:a,index:o}:i},null))!=null?n:{};return r}function Rb(t,e){if(e.current!==void 0&&t.changedTouches){const n=t;for(let r=0;r<n.changedTouches.length;r+=1){const i=n.changedTouches[r];if(i.identifier===e.current)return{x:i.clientX,y:i.clientY}}return!1}return{x:t.clientX,y:t.clientY}}function Sw(t,e,n){return(t-e)*100/(n-e)}function Zpe(t,e,n){return(n-e)*t+e}function Qpe(t){if(Math.abs(t)<1){const n=t.toExponential().split("e-"),r=n[0].split(".")[1];return(r?r.length:0)+parseInt(n[1],10)}const e=t.toString().split(".")[1];return e?e.length:0}function Jpe(t,e,n){const r=Math.round((t-n)/e)*e+n;return Number(r.toFixed(Qpe(e)))}function UU({values:t,newValue:e,index:n}){const r=t.slice();return r[n]=e,r.sort(y7)}function Pb({sliderRef:t,activeIndex:e,setActive:n}){var r,i;const s=tr(t.current);if(!((r=t.current)!=null&&r.contains(s.activeElement))||Number(s==null||(i=s.activeElement)==null?void 0:i.getAttribute("data-index"))!==e){var o;(o=t.current)==null||o.querySelector(`[type="range"][data-index="${e}"]`).focus()}n&&n(e)}function Ib(t,e){return typeof t=="number"&&typeof e=="number"?t===e:typeof t=="object"&&typeof e=="object"?vhe(t,e):!1}const eme={horizontal:{offset:t=>({left:`${t}%`}),leap:t=>({width:`${t}%`})},"horizontal-reverse":{offset:t=>({right:`${t}%`}),leap:t=>({width:`${t}%`})},vertical:{offset:t=>({bottom:`${t}%`}),leap:t=>({height:`${t}%`})}},tme=t=>t;let Mb;function zU(){return Mb===void 0&&(typeof CSS<"u"&&typeof CSS.supports=="function"?Mb=CSS.supports("touch-action","none"):Mb=!0),Mb}function nme(t){const{"aria-labelledby":e,defaultValue:n,disabled:r=!1,disableSwap:i=!1,isRtl:s=!1,marks:o=!1,max:a=100,min:l=0,name:c,onChange:u,onChangeCommitted:d,orientation:h="horizontal",rootRef:f,scale:p=tme,step:m=1,shiftStep:_=10,tabIndex:y,value:x}=t,b=A.useRef(),[E,w]=A.useState(-1),[T,C]=A.useState(-1),[P,M]=A.useState(!1),N=A.useRef(0),[F,I]=xd({controlled:x,default:n??l,name:"Slider"}),k=u&&((be,we,qe)=>{const gt=be.nativeEvent||be,Bt=new gt.constructor(gt.type,gt);Object.defineProperty(Bt,"target",{writable:!0,value:{value:we,name:c}}),u(Bt,we,qe)}),R=Array.isArray(F);let z=R?F.slice().sort(y7):[F];z=z.map(be=>be==null?l:xh(be,l,a));const X=o===!0&&m!==null?[...Array(Math.floor((a-l)/m)+1)].map((be,we)=>({value:l+m*we})):o||[],G=X.map(be=>be.value),{isFocusVisibleRef:j,onBlur:H,onFocus:Q,ref:V}=xS(),[ee,ye]=A.useState(-1),se=A.useRef(),fe=Fn(V,se),ve=Fn(f,fe),Oe=be=>we=>{var qe;const gt=Number(we.currentTarget.getAttribute("data-index"));Q(we),j.current===!0&&ye(gt),C(gt),be==null||(qe=be.onFocus)==null||qe.call(be,we)},ae=be=>we=>{var qe;H(we),j.current===!1&&ye(-1),C(-1),be==null||(qe=be.onBlur)==null||qe.call(be,we)},ue=(be,we)=>{const qe=Number(be.currentTarget.getAttribute("data-index")),gt=z[qe],Bt=G.indexOf(gt);let Ie=we;if(X&&m==null){const It=G[G.length-1];Ie>It?Ie=It:Ie<G[0]?Ie=G[0]:Ie=Ie<gt?G[Bt-1]:G[Bt+1]}if(Ie=xh(Ie,l,a),R){i&&(Ie=xh(Ie,z[qe-1]||-1/0,z[qe+1]||1/0));const It=Ie;Ie=UU({values:z,newValue:Ie,index:qe});let Ve=qe;i||(Ve=Ie.indexOf(It)),Pb({sliderRef:se,activeIndex:Ve})}I(Ie),ye(qe),k&&!Ib(Ie,F)&&k(be,Ie,qe),d&&d(be,Ie)},Ce=be=>we=>{var qe;if(m!==null){const gt=Number(we.currentTarget.getAttribute("data-index")),Bt=z[gt];let Ie=null;(we.key==="ArrowLeft"||we.key==="ArrowDown")&&we.shiftKey||we.key==="PageDown"?Ie=Math.max(Bt-_,l):((we.key==="ArrowRight"||we.key==="ArrowUp")&&we.shiftKey||we.key==="PageUp")&&(Ie=Math.min(Bt+_,a)),Ie!==null&&(ue(we,Ie),we.preventDefault())}be==null||(qe=be.onKeyDown)==null||qe.call(be,we)};Os(()=>{if(r&&se.current.contains(document.activeElement)){var be;(be=document.activeElement)==null||be.blur()}},[r]),r&&E!==-1&&w(-1),r&&ee!==-1&&ye(-1);const pe=be=>we=>{var qe;(qe=be.onChange)==null||qe.call(be,we),ue(we,we.target.valueAsNumber)},ke=A.useRef();let Re=h;s&&h==="horizontal"&&(Re+="-reverse");const B=({finger:be,move:we=!1})=>{const{current:qe}=se,{width:gt,height:Bt,bottom:Ie,left:It}=qe.getBoundingClientRect();let Ve;Re.indexOf("vertical")===0?Ve=(Ie-be.y)/Bt:Ve=(be.x-It)/gt,Re.indexOf("-reverse")!==-1&&(Ve=1-Ve);let Ye;if(Ye=Zpe(Ve,l,a),m)Ye=Jpe(Ye,m,l);else{const kt=FU(G,Ye);Ye=G[kt]}Ye=xh(Ye,l,a);let ft=0;if(R){we?ft=ke.current:ft=FU(z,Ye),i&&(Ye=xh(Ye,z[ft-1]||-1/0,z[ft+1]||1/0));const kt=Ye;Ye=UU({values:z,newValue:Ye,index:ft}),i&&we||(ft=Ye.indexOf(kt),ke.current=ft)}return{newValue:Ye,activeIndex:ft}},oe=Vr(be=>{const we=Rb(be,b);if(!we)return;if(N.current+=1,be.type==="mousemove"&&be.buttons===0){ie(be);return}const{newValue:qe,activeIndex:gt}=B({finger:we,move:!0});Pb({sliderRef:se,activeIndex:gt,setActive:w}),I(qe),!P&&N.current>qpe&&M(!0),k&&!Ib(qe,F)&&k(be,qe,gt)}),ie=Vr(be=>{const we=Rb(be,b);if(M(!1),!we)return;const{newValue:qe}=B({finger:we,move:!0});w(-1),be.type==="touchend"&&C(-1),d&&d(be,qe),b.current=void 0,Y()}),q=Vr(be=>{if(r)return;zU()||be.preventDefault();const we=be.changedTouches[0];we!=null&&(b.current=we.identifier);const qe=Rb(be,b);if(qe!==!1){const{newValue:Bt,activeIndex:Ie}=B({finger:qe});Pb({sliderRef:se,activeIndex:Ie,setActive:w}),I(Bt),k&&!Ib(Bt,F)&&k(be,Bt,Ie)}N.current=0;const gt=tr(se.current);gt.addEventListener("touchmove",oe,{passive:!0}),gt.addEventListener("touchend",ie,{passive:!0})}),Y=A.useCallback(()=>{const be=tr(se.current);be.removeEventListener("mousemove",oe),be.removeEventListener("mouseup",ie),be.removeEventListener("touchmove",oe),be.removeEventListener("touchend",ie)},[ie,oe]);A.useEffect(()=>{const{current:be}=se;return be.addEventListener("touchstart",q,{passive:zU()}),()=>{be.removeEventListener("touchstart",q),Y()}},[Y,q]),A.useEffect(()=>{r&&Y()},[r,Y]);const ne=be=>we=>{var qe;if((qe=be.onMouseDown)==null||qe.call(be,we),r||we.defaultPrevented||we.button!==0)return;we.preventDefault();const gt=Rb(we,b);if(gt!==!1){const{newValue:Ie,activeIndex:It}=B({finger:gt});Pb({sliderRef:se,activeIndex:It,setActive:w}),I(Ie),k&&!Ib(Ie,F)&&k(we,Ie,It)}N.current=0;const Bt=tr(se.current);Bt.addEventListener("mousemove",oe,{passive:!0}),Bt.addEventListener("mouseup",ie)},me=Sw(R?z[0]:l,l,a),he=Sw(z[z.length-1],l,a)-me,de=(be={})=>{const we=Dv(be),qe={onMouseDown:ne(we||{})},gt=U({},we,qe);return U({},be,{ref:ve},gt)},Ae=be=>we=>{var qe;(qe=be.onMouseOver)==null||qe.call(be,we);const gt=Number(we.currentTarget.getAttribute("data-index"));C(gt)},De=be=>we=>{var qe;(qe=be.onMouseLeave)==null||qe.call(be,we),C(-1)};return{active:E,axis:Re,axisProps:eme,dragging:P,focusedThumbIndex:ee,getHiddenInputProps:(be={})=>{var we;const qe=Dv(be),gt={onChange:pe(qe||{}),onFocus:Oe(qe||{}),onBlur:ae(qe||{}),onKeyDown:Ce(qe||{})},Bt=U({},qe,gt);return U({tabIndex:y,"aria-labelledby":e,"aria-orientation":h,"aria-valuemax":p(a),"aria-valuemin":p(l),name:c,type:"range",min:t.min,max:t.max,step:t.step===null&&t.marks?"any":(we=t.step)!=null?we:void 0,disabled:r},be,Bt,{style:U({},Kce,{direction:s?"rtl":"ltr",width:"100%",height:"100%"})})},getRootProps:de,getThumbProps:(be={})=>{const we=Dv(be),qe={onMouseOver:Ae(we||{}),onMouseLeave:De(we||{})};return U({},be,we,qe)},marks:X,open:T,range:R,rootRef:ve,trackLeap:he,trackOffset:me,values:z,getThumbStyle:be=>({pointerEvents:E!==-1&&E!==be?"none":void 0})}}const rme=["onChange","maxRows","minRows","style","value"];function Lb(t){return parseInt(t,10)||0}const ime={shadow:{visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"}};function $U(t){return t==null||Object.keys(t).length===0||t.outerHeightStyle===0&&!t.overflow}const sme=A.forwardRef(function(e,n){const{onChange:r,maxRows:i,minRows:s=1,style:o,value:a}=e,l=$e(e,rme),{current:c}=A.useRef(a!=null),u=A.useRef(null),d=Fn(n,u),h=A.useRef(null),f=A.useRef(0),[p,m]=A.useState({outerHeightStyle:0}),_=A.useCallback(()=>{const E=u.current,T=$l(E).getComputedStyle(E);if(T.width==="0px")return{outerHeightStyle:0};const C=h.current;C.style.width=T.width,C.value=E.value||e.placeholder||"x",C.value.slice(-1)===`
`&&(C.value+=" ");const P=T.boxSizing,M=Lb(T.paddingBottom)+Lb(T.paddingTop),N=Lb(T.borderBottomWidth)+Lb(T.borderTopWidth),F=C.scrollHeight;C.value="x";const I=C.scrollHeight;let k=F;s&&(k=Math.max(Number(s)*I,k)),i&&(k=Math.min(Number(i)*I,k)),k=Math.max(k,I);const R=k+(P==="border-box"?M+N:0),z=Math.abs(k-F)<=1;return{outerHeightStyle:R,overflow:z}},[i,s,e.placeholder]),y=(E,w)=>{const{outerHeightStyle:T,overflow:C}=w;return f.current<20&&(T>0&&Math.abs((E.outerHeightStyle||0)-T)>1||E.overflow!==C)?(f.current+=1,{overflow:C,outerHeightStyle:T}):E},x=A.useCallback(()=>{const E=_();$U(E)||m(w=>y(w,E))},[_]);Os(()=>{const E=()=>{const F=_();$U(F)||Wc.flushSync(()=>{m(I=>y(I,F))})},w=()=>{f.current=0,E()};let T;const C=C1(w),P=u.current,M=$l(P);M.addEventListener("resize",C);let N;return typeof ResizeObserver<"u"&&(N=new ResizeObserver(w),N.observe(P)),()=>{C.clear(),cancelAnimationFrame(T),M.removeEventListener("resize",C),N&&N.disconnect()}},[_]),Os(()=>{x()}),A.useEffect(()=>{f.current=0},[a]);const b=E=>{f.current=0,c||x(),r&&r(E)};return Z.jsxs(A.Fragment,{children:[Z.jsx("textarea",U({value:a,onChange:b,ref:d,rows:s,style:U({height:p.outerHeightStyle,overflow:p.overflow?"hidden":void 0},o)},l)),Z.jsx("textarea",{"aria-hidden":!0,className:e.className,readOnly:!0,ref:h,tabIndex:-1,style:U({},ime.shadow,o,{paddingTop:0,paddingBottom:0})})]})}),ome=["anchorEl","component","components","componentsProps","container","disablePortal","keepMounted","modifiers","open","placement","popperOptions","popperRef","transition","slots","slotProps"],ame=Se(Kpe,{name:"MuiPopper",slot:"Root",overridesResolver:(t,e)=>e.root})({}),lme=A.forwardRef(function(e,n){var r;const i=dN(),s=at({props:e,name:"MuiPopper"}),{anchorEl:o,component:a,components:l,componentsProps:c,container:u,disablePortal:d,keepMounted:h,modifiers:f,open:p,placement:m,popperOptions:_,popperRef:y,transition:x,slots:b,slotProps:E}=s,w=$e(s,ome),T=(r=b==null?void 0:b.root)!=null?r:l==null?void 0:l.Root,C=U({anchorEl:o,container:u,disablePortal:d,keepMounted:h,modifiers:f,open:p,placement:m,popperOptions:_,popperRef:y,transition:x},w);return Z.jsx(ame,U({as:a,direction:i==null?void 0:i.direction,slots:{root:T},slotProps:E??c},C,{ref:n}))}),SN=lme,cme=lt(Z.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function ume(t){return ot("MuiChip",t)}const dme=it("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),En=dme,hme=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],fme=t=>{const{classes:e,disabled:n,size:r,color:i,iconColor:s,onDelete:o,clickable:a,variant:l}=t,c={root:["root",l,n&&"disabled",`size${xe(r)}`,`color${xe(i)}`,a&&"clickable",a&&`clickableColor${xe(i)}`,o&&"deletable",o&&`deletableColor${xe(i)}`,`${l}${xe(i)}`],label:["label",`label${xe(r)}`],avatar:["avatar",`avatar${xe(r)}`,`avatarColor${xe(i)}`],icon:["icon",`icon${xe(r)}`,`iconColor${xe(s)}`],deleteIcon:["deleteIcon",`deleteIcon${xe(r)}`,`deleteIconColor${xe(i)}`,`deleteIcon${xe(l)}Color${xe(i)}`]};return st(c,ume,e)},pme=Se("div",{name:"MuiChip",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t,{color:r,iconColor:i,clickable:s,onDelete:o,size:a,variant:l}=n;return[{[`& .${En.avatar}`]:e.avatar},{[`& .${En.avatar}`]:e[`avatar${xe(a)}`]},{[`& .${En.avatar}`]:e[`avatarColor${xe(r)}`]},{[`& .${En.icon}`]:e.icon},{[`& .${En.icon}`]:e[`icon${xe(a)}`]},{[`& .${En.icon}`]:e[`iconColor${xe(i)}`]},{[`& .${En.deleteIcon}`]:e.deleteIcon},{[`& .${En.deleteIcon}`]:e[`deleteIcon${xe(a)}`]},{[`& .${En.deleteIcon}`]:e[`deleteIconColor${xe(r)}`]},{[`& .${En.deleteIcon}`]:e[`deleteIcon${xe(l)}Color${xe(r)}`]},e.root,e[`size${xe(a)}`],e[`color${xe(r)}`],s&&e.clickable,s&&r!=="default"&&e[`clickableColor${xe(r)})`],o&&e.deletable,o&&r!=="default"&&e[`deletableColor${xe(r)}`],e[l],e[`${l}${xe(r)}`]]}})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?t.palette.grey[700]:t.palette.grey[300];return U({maxWidth:"100%",fontFamily:t.typography.fontFamily,fontSize:t.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(t.vars||t).palette.text.primary,backgroundColor:(t.vars||t).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:t.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${En.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${En.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:t.vars?t.vars.palette.Chip.defaultAvatarColor:n,fontSize:t.typography.pxToRem(12)},[`& .${En.avatarColorPrimary}`]:{color:(t.vars||t).palette.primary.contrastText,backgroundColor:(t.vars||t).palette.primary.dark},[`& .${En.avatarColorSecondary}`]:{color:(t.vars||t).palette.secondary.contrastText,backgroundColor:(t.vars||t).palette.secondary.dark},[`& .${En.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:t.typography.pxToRem(10)},[`& .${En.icon}`]:U({marginLeft:5,marginRight:-6},e.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},e.iconColor===e.color&&U({color:t.vars?t.vars.palette.Chip.defaultIconColor:n},e.color!=="default"&&{color:"inherit"})),[`& .${En.deleteIcon}`]:U({WebkitTapHighlightColor:"transparent",color:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.26)`:rn(t.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / 0.4)`:rn(t.palette.text.primary,.4)}},e.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},e.color!=="default"&&{color:t.vars?`rgba(${t.vars.palette[e.color].contrastTextChannel} / 0.7)`:rn(t.palette[e.color].contrastText,.7),"&:hover, &:active":{color:(t.vars||t).palette[e.color].contrastText}})},e.size==="small"&&{height:24},e.color!=="default"&&{backgroundColor:(t.vars||t).palette[e.color].main,color:(t.vars||t).palette[e.color].contrastText},e.onDelete&&{[`&.${En.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:rn(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},e.onDelete&&e.color!=="default"&&{[`&.${En.focusVisible}`]:{backgroundColor:(t.vars||t).palette[e.color].dark}})},({theme:t,ownerState:e})=>U({},e.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:rn(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)},[`&.${En.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selectedChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:rn(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},"&:active":{boxShadow:(t.vars||t).shadows[1]}},e.clickable&&e.color!=="default"&&{[`&:hover, &.${En.focusVisible}`]:{backgroundColor:(t.vars||t).palette[e.color].dark}}),({theme:t,ownerState:e})=>U({},e.variant==="outlined"&&{backgroundColor:"transparent",border:t.vars?`1px solid ${t.vars.palette.Chip.defaultBorder}`:`1px solid ${t.palette.mode==="light"?t.palette.grey[400]:t.palette.grey[700]}`,[`&.${En.clickable}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${En.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`& .${En.avatar}`]:{marginLeft:4},[`& .${En.avatarSmall}`]:{marginLeft:2},[`& .${En.icon}`]:{marginLeft:4},[`& .${En.iconSmall}`]:{marginLeft:2},[`& .${En.deleteIcon}`]:{marginRight:5},[`& .${En.deleteIconSmall}`]:{marginRight:3}},e.variant==="outlined"&&e.color!=="default"&&{color:(t.vars||t).palette[e.color].main,border:`1px solid ${t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.7)`:rn(t.palette[e.color].main,.7)}`,[`&.${En.clickable}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:rn(t.palette[e.color].main,t.palette.action.hoverOpacity)},[`&.${En.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.focusOpacity})`:rn(t.palette[e.color].main,t.palette.action.focusOpacity)},[`& .${En.deleteIcon}`]:{color:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.7)`:rn(t.palette[e.color].main,.7),"&:hover, &:active":{color:(t.vars||t).palette[e.color].main}}})),mme=Se("span",{name:"MuiChip",slot:"Label",overridesResolver:(t,e)=>{const{ownerState:n}=t,{size:r}=n;return[e.label,e[`label${xe(r)}`]]}})(({ownerState:t})=>U({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},t.variant==="outlined"&&{paddingLeft:11,paddingRight:11},t.size==="small"&&{paddingLeft:8,paddingRight:8},t.size==="small"&&t.variant==="outlined"&&{paddingLeft:7,paddingRight:7}));function jU(t){return t.key==="Backspace"||t.key==="Delete"}const gme=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiChip"}),{avatar:i,className:s,clickable:o,color:a="default",component:l,deleteIcon:c,disabled:u=!1,icon:d,label:h,onClick:f,onDelete:p,onKeyDown:m,onKeyUp:_,size:y="medium",variant:x="filled",tabIndex:b,skipFocusWhenDisabled:E=!1}=r,w=$e(r,hme),T=A.useRef(null),C=Fn(T,n),P=H=>{H.stopPropagation(),p&&p(H)},M=H=>{H.currentTarget===H.target&&jU(H)&&H.preventDefault(),m&&m(H)},N=H=>{H.currentTarget===H.target&&(p&&jU(H)?p(H):H.key==="Escape"&&T.current&&T.current.blur()),_&&_(H)},F=o!==!1&&f?!0:o,I=F||p?da:l||"div",k=U({},r,{component:I,disabled:u,size:y,color:a,iconColor:A.isValidElement(d)&&d.props.color||a,onDelete:!!p,clickable:F,variant:x}),R=fme(k),z=I===da?U({component:l||"div",focusVisibleClassName:R.focusVisible},p&&{disableRipple:!0}):{};let X=null;p&&(X=c&&A.isValidElement(c)?A.cloneElement(c,{className:Ue(c.props.className,R.deleteIcon),onClick:P}):Z.jsx(cme,{className:Ue(R.deleteIcon),onClick:P}));let G=null;i&&A.isValidElement(i)&&(G=A.cloneElement(i,{className:Ue(R.avatar,i.props.className)}));let j=null;return d&&A.isValidElement(d)&&(j=A.cloneElement(d,{className:Ue(R.icon,d.props.className)})),Z.jsxs(pme,U({as:I,className:Ue(R.root,s),disabled:F&&u?!0:void 0,onClick:f,onKeyDown:M,onKeyUp:N,ref:C,tabIndex:E&&u?-1:b,ownerState:k},z,w,{children:[G||j,Z.jsx(mme,{className:Ue(R.label),ownerState:k,children:h}),X]}))}),Ob=gme;function Bd({props:t,states:e,muiFormControl:n}){return e.reduce((r,i)=>(r[i]=t[i],n&&typeof t[i]>"u"&&(r[i]=n[i]),r),{})}const vme=A.createContext(void 0),CN=vme;function Kc(){return A.useContext(CN)}function yme(t){return Z.jsx(que,U({},t,{defaultTheme:OS,themeId:S1}))}function GU(t){return t!=null&&!(Array.isArray(t)&&t.length===0)}function Cw(t,e=!1){return t&&(GU(t.value)&&t.value!==""||e&&GU(t.defaultValue)&&t.defaultValue!=="")}function _me(t){return t.startAdornment}function bme(t){return ot("MuiInputBase",t)}const xme=it("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","readOnly","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),Km=xme,Eme=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","slotProps","slots","startAdornment","type","value"],BS=(t,e)=>{const{ownerState:n}=t;return[e.root,n.formControl&&e.formControl,n.startAdornment&&e.adornedStart,n.endAdornment&&e.adornedEnd,n.error&&e.error,n.size==="small"&&e.sizeSmall,n.multiline&&e.multiline,n.color&&e[`color${xe(n.color)}`],n.fullWidth&&e.fullWidth,n.hiddenLabel&&e.hiddenLabel]},FS=(t,e)=>{const{ownerState:n}=t;return[e.input,n.size==="small"&&e.inputSizeSmall,n.multiline&&e.inputMultiline,n.type==="search"&&e.inputTypeSearch,n.startAdornment&&e.inputAdornedStart,n.endAdornment&&e.inputAdornedEnd,n.hiddenLabel&&e.inputHiddenLabel]},wme=t=>{const{classes:e,color:n,disabled:r,error:i,endAdornment:s,focused:o,formControl:a,fullWidth:l,hiddenLabel:c,multiline:u,readOnly:d,size:h,startAdornment:f,type:p}=t,m={root:["root",`color${xe(n)}`,r&&"disabled",i&&"error",l&&"fullWidth",o&&"focused",a&&"formControl",h&&h!=="medium"&&`size${xe(h)}`,u&&"multiline",f&&"adornedStart",s&&"adornedEnd",c&&"hiddenLabel",d&&"readOnly"],input:["input",r&&"disabled",p==="search"&&"inputTypeSearch",u&&"inputMultiline",h==="small"&&"inputSizeSmall",c&&"inputHiddenLabel",f&&"inputAdornedStart",s&&"inputAdornedEnd",d&&"readOnly"]};return st(m,bme,e)},US=Se("div",{name:"MuiInputBase",slot:"Root",overridesResolver:BS})(({theme:t,ownerState:e})=>U({},t.typography.body1,{color:(t.vars||t).palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center",[`&.${Km.disabled}`]:{color:(t.vars||t).palette.text.disabled,cursor:"default"}},e.multiline&&U({padding:"4px 0 5px"},e.size==="small"&&{paddingTop:1}),e.fullWidth&&{width:"100%"})),zS=Se("input",{name:"MuiInputBase",slot:"Input",overridesResolver:FS})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light",r=U({color:"currentColor"},t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5},{transition:t.transitions.create("opacity",{duration:t.transitions.duration.shorter})}),i={opacity:"0 !important"},s=t.vars?{opacity:t.vars.opacity.inputPlaceholder}:{opacity:n?.42:.5};return U({font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":r,"&::-moz-placeholder":r,"&:-ms-input-placeholder":r,"&::-ms-input-placeholder":r,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"},[`label[data-shrink=false] + .${Km.formControl} &`]:{"&::-webkit-input-placeholder":i,"&::-moz-placeholder":i,"&:-ms-input-placeholder":i,"&::-ms-input-placeholder":i,"&:focus::-webkit-input-placeholder":s,"&:focus::-moz-placeholder":s,"&:focus:-ms-input-placeholder":s,"&:focus::-ms-input-placeholder":s},[`&.${Km.disabled}`]:{opacity:1,WebkitTextFillColor:(t.vars||t).palette.text.disabled},"&:-webkit-autofill":{animationDuration:"5000s",animationName:"mui-auto-fill"}},e.size==="small"&&{paddingTop:1},e.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},e.type==="search"&&{MozAppearance:"textfield"})}),Tme=Z.jsx(yme,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),Sme=A.forwardRef(function(e,n){var r;const i=at({props:e,name:"MuiInputBase"}),{"aria-describedby":s,autoComplete:o,autoFocus:a,className:l,components:c={},componentsProps:u={},defaultValue:d,disabled:h,disableInjectingGlobalStyles:f,endAdornment:p,fullWidth:m=!1,id:_,inputComponent:y="input",inputProps:x={},inputRef:b,maxRows:E,minRows:w,multiline:T=!1,name:C,onBlur:P,onChange:M,onClick:N,onFocus:F,onKeyDown:I,onKeyUp:k,placeholder:R,readOnly:z,renderSuffix:X,rows:G,slotProps:j={},slots:H={},startAdornment:Q,type:V="text",value:ee}=i,ye=$e(i,Eme),se=x.value!=null?x.value:ee,{current:fe}=A.useRef(se!=null),ve=A.useRef(),Oe=A.useCallback(be=>{},[]),ae=Fn(ve,b,x.ref,Oe),[ue,Ce]=A.useState(!1),pe=Kc(),ke=Bd({props:i,muiFormControl:pe,states:["color","disabled","error","hiddenLabel","size","required","filled"]});ke.focused=pe?pe.focused:ue,A.useEffect(()=>{!pe&&h&&ue&&(Ce(!1),P&&P())},[pe,h,ue,P]);const Re=pe&&pe.onFilled,B=pe&&pe.onEmpty,oe=A.useCallback(be=>{Cw(be)?Re&&Re():B&&B()},[Re,B]);Os(()=>{fe&&oe({value:se})},[se,oe,fe]);const ie=be=>{if(ke.disabled){be.stopPropagation();return}F&&F(be),x.onFocus&&x.onFocus(be),pe&&pe.onFocus?pe.onFocus(be):Ce(!0)},q=be=>{P&&P(be),x.onBlur&&x.onBlur(be),pe&&pe.onBlur?pe.onBlur(be):Ce(!1)},Y=(be,...we)=>{if(!fe){const qe=be.target||ve.current;if(qe==null)throw new Error(bd(1));oe({value:qe.value})}x.onChange&&x.onChange(be,...we),M&&M(be,...we)};A.useEffect(()=>{oe(ve.current)},[]);const ne=be=>{ve.current&&be.currentTarget===be.target&&ve.current.focus(),N&&N(be)};let me=y,he=x;T&&me==="input"&&(G?he=U({type:void 0,minRows:G,maxRows:G},he):he=U({type:void 0,maxRows:E,minRows:w},he),me=sme);const de=be=>{oe(be.animationName==="mui-auto-fill-cancel"?ve.current:{value:"x"})};A.useEffect(()=>{pe&&pe.setAdornedStart(!!Q)},[pe,Q]);const Ae=U({},i,{color:ke.color||"primary",disabled:ke.disabled,endAdornment:p,error:ke.error,focused:ke.focused,formControl:pe,fullWidth:m,hiddenLabel:ke.hiddenLabel,multiline:T,size:ke.size,startAdornment:Q,type:V}),De=wme(Ae),Be=H.root||c.Root||US,tt=j.root||u.root||{},St=H.input||c.Input||zS;return he=U({},he,(r=j.input)!=null?r:u.input),Z.jsxs(A.Fragment,{children:[!f&&Tme,Z.jsxs(Be,U({},tt,!ld(Be)&&{ownerState:U({},Ae,tt.ownerState)},{ref:n,onClick:ne},ye,{className:Ue(De.root,tt.className,l,z&&"MuiInputBase-readOnly"),children:[Q,Z.jsx(CN.Provider,{value:null,children:Z.jsx(St,U({ownerState:Ae,"aria-invalid":ke.error,"aria-describedby":s,autoComplete:o,autoFocus:a,defaultValue:d,disabled:ke.disabled,id:_,onAnimationStart:de,name:C,placeholder:R,readOnly:z,required:ke.required,rows:G,value:se,onKeyDown:I,onKeyUp:k,type:V},he,!ld(St)&&{as:me,ownerState:U({},Ae,he.ownerState)},{ref:ae,className:Ue(De.input,he.className,z&&"MuiInputBase-readOnly"),onBlur:q,onChange:Y,onFocus:ie}))}),p,X?X(U({},ke,{startAdornment:Q})):null]}))]})}),AN=Sme;function Cme(t){return ot("MuiInput",t)}const Ame=U({},Km,it("MuiInput",["root","underline","input"])),_0=Ame;function Rme(t){return ot("MuiOutlinedInput",t)}const Pme=U({},Km,it("MuiOutlinedInput",["root","notchedOutline","input"])),hu=Pme;function Ime(t){return ot("MuiFilledInput",t)}const Mme=U({},Km,it("MuiFilledInput",["root","underline","input"])),Jd=Mme,Lme=lt(Z.jsx("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),Ome=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],kme={entering:{opacity:1},entered:{opacity:1}},Nme=A.forwardRef(function(e,n){const r=ms(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:s,appear:o=!0,children:a,easing:l,in:c,onEnter:u,onEntered:d,onEntering:h,onExit:f,onExited:p,onExiting:m,style:_,timeout:y=i,TransitionComponent:x=kS}=e,b=$e(e,Ome),E=A.useRef(null),w=Fn(E,a.ref,n),T=R=>z=>{if(R){const X=E.current;z===void 0?R(X):R(X,z)}},C=T(h),P=T((R,z)=>{vN(R);const X=Ed({style:_,timeout:y,easing:l},{mode:"enter"});R.style.webkitTransition=r.transitions.create("opacity",X),R.style.transition=r.transitions.create("opacity",X),u&&u(R,z)}),M=T(d),N=T(m),F=T(R=>{const z=Ed({style:_,timeout:y,easing:l},{mode:"exit"});R.style.webkitTransition=r.transitions.create("opacity",z),R.style.transition=r.transitions.create("opacity",z),f&&f(R)}),I=T(p),k=R=>{s&&s(E.current,R)};return Z.jsx(x,U({appear:o,in:c,nodeRef:E,onEnter:P,onEntered:M,onEntering:C,onExit:F,onExited:I,onExiting:N,addEndListener:k,timeout:y},b,{children:(R,z)=>A.cloneElement(a,U({style:U({opacity:0,visibility:R==="exited"&&!c?"hidden":void 0},kme[R],_,a.props.style),ref:w},z))}))}),_7=Nme;function Dme(t){return ot("MuiBackdrop",t)}it("MuiBackdrop",["root","invisible"]);const Bme=["children","className","component","components","componentsProps","invisible","open","slotProps","slots","TransitionComponent","transitionDuration"],Fme=t=>{const{classes:e,invisible:n}=t;return st({root:["root",n&&"invisible"]},Dme,e)},Ume=Se("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.invisible&&e.invisible]}})(({ownerState:t})=>U({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},t.invisible&&{backgroundColor:"transparent"})),zme=A.forwardRef(function(e,n){var r,i,s;const o=at({props:e,name:"MuiBackdrop"}),{children:a,className:l,component:c="div",components:u={},componentsProps:d={},invisible:h=!1,open:f,slotProps:p={},slots:m={},TransitionComponent:_=_7,transitionDuration:y}=o,x=$e(o,Bme),b=U({},o,{component:c,invisible:h}),E=Fme(b),w=(r=p.root)!=null?r:d.root;return Z.jsx(_,U({in:f,timeout:y},x,{children:Z.jsx(Ume,U({"aria-hidden":!0},w,{as:(i=(s=m.root)!=null?s:u.Root)!=null?i:c,className:Ue(E.root,l,w==null?void 0:w.className),ownerState:U({},b,w==null?void 0:w.ownerState),classes:E,ref:n,children:a}))}))}),RN=zme;function $me(t){return at}function jme(t){return ot("MuiBadge",t)}const Gme=it("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),fu=Gme,Hme=["anchorOrigin","className","classes","component","components","componentsProps","children","overlap","color","invisible","max","badgeContent","slots","slotProps","showZero","variant"],OR=10,kR=4,Vme=$me(),Wme=t=>{const{color:e,anchorOrigin:n,invisible:r,overlap:i,variant:s,classes:o={}}=t,a={root:["root"],badge:["badge",s,r&&"invisible",`anchorOrigin${xe(n.vertical)}${xe(n.horizontal)}`,`anchorOrigin${xe(n.vertical)}${xe(n.horizontal)}${xe(i)}`,`overlap${xe(i)}`,e!=="default"&&`color${xe(e)}`]};return st(a,jme,o)},Xme=Se("span",{name:"MuiBadge",slot:"Root",overridesResolver:(t,e)=>e.root})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),Yme=Se("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.badge,e[n.variant],e[`anchorOrigin${xe(n.anchorOrigin.vertical)}${xe(n.anchorOrigin.horizontal)}${xe(n.overlap)}`],n.color!=="default"&&e[`color${xe(n.color)}`],n.invisible&&e.invisible]}})(({theme:t})=>{var e;return{display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:t.typography.fontFamily,fontWeight:t.typography.fontWeightMedium,fontSize:t.typography.pxToRem(12),minWidth:OR*2,lineHeight:1,padding:"0 6px",height:OR*2,borderRadius:OR,zIndex:1,transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.enteringScreen}),variants:[...Object.keys(((e=t.vars)!=null?e:t).palette).filter(n=>{var r,i;return((r=t.vars)!=null?r:t).palette[n].main&&((i=t.vars)!=null?i:t).palette[n].contrastText}).map(n=>({props:{color:n},style:{backgroundColor:(t.vars||t).palette[n].main,color:(t.vars||t).palette[n].contrastText}})),{props:{variant:"dot"},style:{borderRadius:kR,height:kR*2,minWidth:kR*2,padding:0}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${fu.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${fu.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${fu.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${fu.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${fu.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="right"&&n.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${fu.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="top"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${fu.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:n})=>n.anchorOrigin.vertical==="bottom"&&n.anchorOrigin.horizontal==="left"&&n.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${fu.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:t.transitions.create("transform",{easing:t.transitions.easing.easeInOut,duration:t.transitions.duration.leavingScreen})}}]}}),Kme=A.forwardRef(function(e,n){var r,i,s,o,a,l;const c=Vme({props:e,name:"MuiBadge"}),{anchorOrigin:u={vertical:"top",horizontal:"right"},className:d,component:h,components:f={},componentsProps:p={},children:m,overlap:_="rectangular",color:y="default",invisible:x=!1,max:b=99,badgeContent:E,slots:w,slotProps:T,showZero:C=!1,variant:P="standard"}=c,M=$e(c,Hme),{badgeContent:N,invisible:F,max:I,displayValue:k}=hfe({max:b,invisible:x,badgeContent:E,showZero:C}),R=G9({anchorOrigin:u,color:y,overlap:_,variant:P,badgeContent:E}),z=F||N==null&&P!=="dot",{color:X=y,overlap:G=_,anchorOrigin:j=u,variant:H=P}=z?R:c,Q=H!=="dot"?k:void 0,V=U({},c,{badgeContent:N,invisible:z,max:I,displayValue:Q,showZero:C,anchorOrigin:j,color:X,overlap:G,variant:H}),ee=Wme(V),ye=(r=(i=w==null?void 0:w.root)!=null?i:f.Root)!=null?r:Xme,se=(s=(o=w==null?void 0:w.badge)!=null?o:f.Badge)!=null?s:Yme,fe=(a=T==null?void 0:T.root)!=null?a:p.root,ve=(l=T==null?void 0:T.badge)!=null?l:p.badge,Oe=Nr({elementType:ye,externalSlotProps:fe,externalForwardedProps:M,additionalProps:{ref:n,as:h},ownerState:V,className:Ue(fe==null?void 0:fe.className,ee.root,d)}),ae=Nr({elementType:se,externalSlotProps:ve,ownerState:V,className:Ue(ee.badge,ve==null?void 0:ve.className)});return Z.jsxs(ye,U({},Oe,{children:[m,Z.jsx(se,U({},ae,{children:Q}))]}))}),qme=Kme,Zme=it("MuiBox",["root"]),Qme=Zme,Jme=t7(),ege=ede({themeId:S1,defaultTheme:Jme,defaultClassName:Qme.root,generateClassName:sN.generate}),$t=ege;function tge(t){return ot("MuiButton",t)}const nge=it("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),kb=nge,rge=A.createContext({}),PN=rge,ige=A.createContext(void 0),b7=ige,sge=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],oge=t=>{const{color:e,disableElevation:n,fullWidth:r,size:i,variant:s,classes:o}=t,a={root:["root",s,`${s}${xe(e)}`,`size${xe(i)}`,`${s}Size${xe(i)}`,e==="inherit"&&"colorInherit",n&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${xe(i)}`],endIcon:["endIcon",`iconSize${xe(i)}`]},l=st(a,tge,o);return U({},o,l)},x7=t=>U({},t.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},t.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},t.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),age=Se(da,{shouldForwardProp:t=>Li(t)||t==="classes",name:"MuiButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`${n.variant}${xe(n.color)}`],e[`size${xe(n.size)}`],e[`${n.variant}Size${xe(n.size)}`],n.color==="inherit"&&e.colorInherit,n.disableElevation&&e.disableElevation,n.fullWidth&&e.fullWidth]}})(({theme:t,ownerState:e})=>{var n,r;const i=t.palette.mode==="light"?t.palette.grey[300]:t.palette.grey[800],s=t.palette.mode==="light"?t.palette.grey.A100:t.palette.grey[700];return U({},t.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create(["background-color","box-shadow","border-color","color"],{duration:t.transitions.duration.short}),"&:hover":U({textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:rn(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="text"&&e.color!=="inherit"&&{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:rn(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="outlined"&&e.color!=="inherit"&&{border:`1px solid ${(t.vars||t).palette[e.color].main}`,backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:rn(t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},e.variant==="contained"&&{backgroundColor:t.vars?t.vars.palette.Button.inheritContainedHoverBg:s,boxShadow:(t.vars||t).shadows[4],"@media (hover: none)":{boxShadow:(t.vars||t).shadows[2],backgroundColor:(t.vars||t).palette.grey[300]}},e.variant==="contained"&&e.color!=="inherit"&&{backgroundColor:(t.vars||t).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[e.color].main}}),"&:active":U({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[8]}),[`&.${kb.focusVisible}`]:U({},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[6]}),[`&.${kb.disabled}`]:U({color:(t.vars||t).palette.action.disabled},e.variant==="outlined"&&{border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},e.variant==="contained"&&{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground})},e.variant==="text"&&{padding:"6px 8px"},e.variant==="text"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main},e.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},e.variant==="outlined"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].main,border:t.vars?`1px solid rgba(${t.vars.palette[e.color].mainChannel} / 0.5)`:`1px solid ${rn(t.palette[e.color].main,.5)}`},e.variant==="contained"&&{color:t.vars?t.vars.palette.text.primary:(n=(r=t.palette).getContrastText)==null?void 0:n.call(r,t.palette.grey[300]),backgroundColor:t.vars?t.vars.palette.Button.inheritContainedBg:i,boxShadow:(t.vars||t).shadows[2]},e.variant==="contained"&&e.color!=="inherit"&&{color:(t.vars||t).palette[e.color].contrastText,backgroundColor:(t.vars||t).palette[e.color].main},e.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},e.size==="small"&&e.variant==="text"&&{padding:"4px 5px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="text"&&{padding:"8px 11px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="outlined"&&{padding:"3px 9px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="outlined"&&{padding:"7px 21px",fontSize:t.typography.pxToRem(15)},e.size==="small"&&e.variant==="contained"&&{padding:"4px 10px",fontSize:t.typography.pxToRem(13)},e.size==="large"&&e.variant==="contained"&&{padding:"8px 22px",fontSize:t.typography.pxToRem(15)},e.fullWidth&&{width:"100%"})},({ownerState:t})=>t.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${kb.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${kb.disabled}`]:{boxShadow:"none"}}),lge=Se("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.startIcon,e[`iconSize${xe(n.size)}`]]}})(({ownerState:t})=>U({display:"inherit",marginRight:8,marginLeft:-4},t.size==="small"&&{marginLeft:-2},x7(t))),cge=Se("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.endIcon,e[`iconSize${xe(n.size)}`]]}})(({ownerState:t})=>U({display:"inherit",marginRight:-4,marginLeft:8},t.size==="small"&&{marginRight:-2},x7(t))),uge=A.forwardRef(function(e,n){const r=A.useContext(PN),i=A.useContext(b7),s=R1(r,e),o=at({props:s,name:"MuiButton"}),{children:a,color:l="primary",component:c="button",className:u,disabled:d=!1,disableElevation:h=!1,disableFocusRipple:f=!1,endIcon:p,focusVisibleClassName:m,fullWidth:_=!1,size:y="medium",startIcon:x,type:b,variant:E="text"}=o,w=$e(o,sge),T=U({},o,{color:l,component:c,disabled:d,disableElevation:h,disableFocusRipple:f,fullWidth:_,size:y,type:b,variant:E}),C=oge(T),P=x&&Z.jsx(lge,{className:C.startIcon,ownerState:T,children:x}),M=p&&Z.jsx(cge,{className:C.endIcon,ownerState:T,children:p}),N=i||"";return Z.jsxs(age,U({ownerState:T,className:Ue(r.className,C.root,u,N),component:c,disabled:d,focusRipple:!f,focusVisibleClassName:Ue(C.focusVisible,m),ref:n,type:b},w,{classes:C,children:[P,a,M]}))}),Ki=uge;function dge(t){return ot("MuiButtonGroup",t)}const Gi=it("MuiButtonGroup",["root","contained","outlined","text","disableElevation","disabled","firstButton","fullWidth","vertical","grouped","groupedHorizontal","groupedVertical","groupedText","groupedTextHorizontal","groupedTextVertical","groupedTextPrimary","groupedTextSecondary","groupedOutlined","groupedOutlinedHorizontal","groupedOutlinedVertical","groupedOutlinedPrimary","groupedOutlinedSecondary","groupedContained","groupedContainedHorizontal","groupedContainedVertical","groupedContainedPrimary","groupedContainedSecondary","lastButton","middleButton"]),hge=["children","className","color","component","disabled","disableElevation","disableFocusRipple","disableRipple","fullWidth","orientation","size","variant"],fge=(t,e)=>{const{ownerState:n}=t;return[{[`& .${Gi.grouped}`]:e.grouped},{[`& .${Gi.grouped}`]:e[`grouped${xe(n.orientation)}`]},{[`& .${Gi.grouped}`]:e[`grouped${xe(n.variant)}`]},{[`& .${Gi.grouped}`]:e[`grouped${xe(n.variant)}${xe(n.orientation)}`]},{[`& .${Gi.grouped}`]:e[`grouped${xe(n.variant)}${xe(n.color)}`]},{[`& .${Gi.firstButton}`]:e.firstButton},{[`& .${Gi.lastButton}`]:e.lastButton},{[`& .${Gi.middleButton}`]:e.middleButton},e.root,e[n.variant],n.disableElevation===!0&&e.disableElevation,n.fullWidth&&e.fullWidth,n.orientation==="vertical"&&e.vertical]},pge=t=>{const{classes:e,color:n,disabled:r,disableElevation:i,fullWidth:s,orientation:o,variant:a}=t,l={root:["root",a,o==="vertical"&&"vertical",s&&"fullWidth",i&&"disableElevation"],grouped:["grouped",`grouped${xe(o)}`,`grouped${xe(a)}`,`grouped${xe(a)}${xe(o)}`,`grouped${xe(a)}${xe(n)}`,r&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return st(l,dge,e)},mge=Se("div",{name:"MuiButtonGroup",slot:"Root",overridesResolver:fge})(({theme:t,ownerState:e})=>U({display:"inline-flex",borderRadius:(t.vars||t).shape.borderRadius},e.variant==="contained"&&{boxShadow:(t.vars||t).shadows[2]},e.disableElevation&&{boxShadow:"none"},e.fullWidth&&{width:"100%"},e.orientation==="vertical"&&{flexDirection:"column"},{[`& .${Gi.grouped}`]:U({minWidth:40,"&:hover":U({},e.variant==="contained"&&{boxShadow:"none"})},e.variant==="contained"&&{boxShadow:"none"}),[`& .${Gi.firstButton},& .${Gi.middleButton}`]:U({},e.orientation==="horizontal"&&{borderTopRightRadius:0,borderBottomRightRadius:0},e.orientation==="vertical"&&{borderBottomRightRadius:0,borderBottomLeftRadius:0},e.variant==="text"&&e.orientation==="horizontal"&&{borderRight:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${Gi.disabled}`]:{borderRight:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="text"&&e.orientation==="vertical"&&{borderBottom:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${Gi.disabled}`]:{borderBottom:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="text"&&e.color!=="inherit"&&{borderColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.5)`:rn(t.palette[e.color].main,.5)},e.variant==="outlined"&&e.orientation==="horizontal"&&{borderRightColor:"transparent"},e.variant==="outlined"&&e.orientation==="vertical"&&{borderBottomColor:"transparent"},e.variant==="contained"&&e.orientation==="horizontal"&&{borderRight:`1px solid ${(t.vars||t).palette.grey[400]}`,[`&.${Gi.disabled}`]:{borderRight:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="contained"&&e.orientation==="vertical"&&{borderBottom:`1px solid ${(t.vars||t).palette.grey[400]}`,[`&.${Gi.disabled}`]:{borderBottom:`1px solid ${(t.vars||t).palette.action.disabled}`}},e.variant==="contained"&&e.color!=="inherit"&&{borderColor:(t.vars||t).palette[e.color].dark},{"&:hover":U({},e.variant==="outlined"&&e.orientation==="horizontal"&&{borderRightColor:"currentColor"},e.variant==="outlined"&&e.orientation==="vertical"&&{borderBottomColor:"currentColor"})}),[`& .${Gi.lastButton},& .${Gi.middleButton}`]:U({},e.orientation==="horizontal"&&{borderTopLeftRadius:0,borderBottomLeftRadius:0},e.orientation==="vertical"&&{borderTopRightRadius:0,borderTopLeftRadius:0},e.variant==="outlined"&&e.orientation==="horizontal"&&{marginLeft:-1},e.variant==="outlined"&&e.orientation==="vertical"&&{marginTop:-1})})),gge=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiButtonGroup"}),{children:i,className:s,color:o="primary",component:a="div",disabled:l=!1,disableElevation:c=!1,disableFocusRipple:u=!1,disableRipple:d=!1,fullWidth:h=!1,orientation:f="horizontal",size:p="medium",variant:m="outlined"}=r,_=$e(r,hge),y=U({},r,{color:o,component:a,disabled:l,disableElevation:c,disableFocusRipple:u,disableRipple:d,fullWidth:h,orientation:f,size:p,variant:m}),x=pge(y),b=A.useMemo(()=>({className:x.grouped,color:o,disabled:l,disableElevation:c,disableFocusRipple:u,disableRipple:d,fullWidth:h,size:p,variant:m}),[o,l,c,u,d,h,p,m,x.grouped]),E=H9(i),w=E.length,T=C=>{const P=C===0,M=C===w-1;return P&&M?"":P?x.firstButton:M?x.lastButton:x.middleButton};return Z.jsx(mge,U({as:a,role:"group",className:Ue(x.root,s),ref:n,ownerState:y},_,{children:Z.jsx(PN.Provider,{value:b,children:E.map((C,P)=>Z.jsx(b7.Provider,{value:T(P),children:C},P))})}))}),vge=gge;function yge(t){return ot("MuiCard",t)}it("MuiCard",["root"]);const _ge=["className","raised"],bge=t=>{const{classes:e}=t;return st({root:["root"]},yge,e)},xge=Se(Nd,{name:"MuiCard",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({overflow:"hidden"})),Ege=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiCard"}),{className:i,raised:s=!1}=r,o=$e(r,_ge),a=U({},r,{raised:s}),l=bge(a);return Z.jsx(xge,U({className:Ue(l.root,i),elevation:s?8:void 0,ref:n,ownerState:a},o))}),E7=Ege;function wge(t){return ot("MuiCardActionArea",t)}const Tge=it("MuiCardActionArea",["root","focusVisible","focusHighlight"]),NR=Tge,Sge=["children","className","focusVisibleClassName"],Cge=t=>{const{classes:e}=t;return st({root:["root"],focusHighlight:["focusHighlight"]},wge,e)},Age=Se(da,{name:"MuiCardActionArea",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>({display:"block",textAlign:"inherit",borderRadius:"inherit",width:"100%",[`&:hover .${NR.focusHighlight}`]:{opacity:(t.vars||t).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},[`&.${NR.focusVisible} .${NR.focusHighlight}`]:{opacity:(t.vars||t).palette.action.focusOpacity}})),Rge=Se("span",{name:"MuiCardActionArea",slot:"FocusHighlight",overridesResolver:(t,e)=>e.focusHighlight})(({theme:t})=>({overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:t.transitions.create("opacity",{duration:t.transitions.duration.short})})),Pge=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiCardActionArea"}),{children:i,className:s,focusVisibleClassName:o}=r,a=$e(r,Sge),l=r,c=Cge(l);return Z.jsxs(Age,U({className:Ue(c.root,s),focusVisibleClassName:Ue(o,c.focusVisible),ref:n,ownerState:l},a,{children:[i,Z.jsx(Rge,{className:c.focusHighlight,ownerState:l})]}))}),Ige=Pge;function Mge(t){return ot("MuiCardActions",t)}it("MuiCardActions",["root","spacing"]);const Lge=["disableSpacing","className"],Oge=t=>{const{classes:e,disableSpacing:n}=t;return st({root:["root",!n&&"spacing"]},Mge,e)},kge=Se("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableSpacing&&e.spacing]}})(({ownerState:t})=>U({display:"flex",alignItems:"center",padding:8},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),Nge=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiCardActions"}),{disableSpacing:i=!1,className:s}=r,o=$e(r,Lge),a=U({},r,{disableSpacing:i}),l=Oge(a);return Z.jsx(kge,U({className:Ue(l.root,s),ownerState:a,ref:n},o))}),Dge=Nge;function Bge(t){return ot("MuiCardContent",t)}it("MuiCardContent",["root"]);const Fge=["className","component"],Uge=t=>{const{classes:e}=t;return st({root:["root"]},Bge,e)},zge=Se("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),$ge=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiCardContent"}),{className:i,component:s="div"}=r,o=$e(r,Fge),a=U({},r,{component:s}),l=Uge(a);return Z.jsx(zge,U({as:s,className:Ue(l.root,i),ownerState:a,ref:n},o))}),w7=$ge;function jge(t){return ot("MuiCardHeader",t)}const Gge=it("MuiCardHeader",["root","avatar","action","content","title","subheader"]),HU=Gge,Hge=["action","avatar","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"],Vge=t=>{const{classes:e}=t;return st({root:["root"],avatar:["avatar"],action:["action"],content:["content"],title:["title"],subheader:["subheader"]},jge,e)},Wge=Se("div",{name:"MuiCardHeader",slot:"Root",overridesResolver:(t,e)=>U({[`& .${HU.title}`]:e.title,[`& .${HU.subheader}`]:e.subheader},e.root)})({display:"flex",alignItems:"center",padding:16}),Xge=Se("div",{name:"MuiCardHeader",slot:"Avatar",overridesResolver:(t,e)=>e.avatar})({display:"flex",flex:"0 0 auto",marginRight:16}),Yge=Se("div",{name:"MuiCardHeader",slot:"Action",overridesResolver:(t,e)=>e.action})({flex:"0 0 auto",alignSelf:"flex-start",marginTop:-4,marginRight:-8,marginBottom:-4}),Kge=Se("div",{name:"MuiCardHeader",slot:"Content",overridesResolver:(t,e)=>e.content})({flex:"1 1 auto"}),qge=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiCardHeader"}),{action:i,avatar:s,className:o,component:a="div",disableTypography:l=!1,subheader:c,subheaderTypographyProps:u,title:d,titleTypographyProps:h}=r,f=$e(r,Hge),p=U({},r,{component:a,disableTypography:l}),m=Vge(p);let _=d;_!=null&&_.type!==en&&!l&&(_=Z.jsx(en,U({variant:s?"body2":"h5",className:m.title,component:"span",display:"block"},h,{children:_})));let y=c;return y!=null&&y.type!==en&&!l&&(y=Z.jsx(en,U({variant:s?"body2":"body1",className:m.subheader,color:"text.secondary",component:"span",display:"block"},u,{children:y}))),Z.jsxs(Wge,U({className:Ue(m.root,o),as:a,ref:n,ownerState:p},f,{children:[s&&Z.jsx(Xge,{className:m.avatar,ownerState:p,children:s}),Z.jsxs(Kge,{className:m.content,ownerState:p,children:[_,y]}),i&&Z.jsx(Yge,{className:m.action,ownerState:p,children:i})]}))}),Zge=qge;function Qge(t){return ot("PrivateSwitchBase",t)}it("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Jge=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],e0e=t=>{const{classes:e,checked:n,disabled:r,edge:i}=t,s={root:["root",n&&"checked",r&&"disabled",i&&`edge${xe(i)}`],input:["input"]};return st(s,Qge,e)},t0e=Se(da)(({ownerState:t})=>U({padding:9,borderRadius:"50%"},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12})),n0e=Se("input",{shouldForwardProp:Li})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),r0e=A.forwardRef(function(e,n){const{autoFocus:r,checked:i,checkedIcon:s,className:o,defaultChecked:a,disabled:l,disableFocusRipple:c=!1,edge:u=!1,icon:d,id:h,inputProps:f,inputRef:p,name:m,onBlur:_,onChange:y,onFocus:x,readOnly:b,required:E=!1,tabIndex:w,type:T,value:C}=e,P=$e(e,Jge),[M,N]=xd({controlled:i,default:!!a,name:"SwitchBase",state:"checked"}),F=Kc(),I=H=>{x&&x(H),F&&F.onFocus&&F.onFocus(H)},k=H=>{_&&_(H),F&&F.onBlur&&F.onBlur(H)},R=H=>{if(H.nativeEvent.defaultPrevented)return;const Q=H.target.checked;N(Q),y&&y(H,Q)};let z=l;F&&typeof z>"u"&&(z=F.disabled);const X=T==="checkbox"||T==="radio",G=U({},e,{checked:M,disabled:z,disableFocusRipple:c,edge:u}),j=e0e(G);return Z.jsxs(t0e,U({component:"span",className:Ue(j.root,o),centerRipple:!0,focusRipple:!c,disabled:z,tabIndex:null,role:void 0,onFocus:I,onBlur:k,ownerState:G,ref:n},P,{children:[Z.jsx(n0e,U({autoFocus:r,checked:i,defaultChecked:a,className:j.input,disabled:z,id:X?h:void 0,name:m,onChange:R,readOnly:b,ref:p,required:E,ownerState:G,tabIndex:w,type:T},T==="checkbox"&&C===void 0?{}:{value:C},f)),M?s:d]}))}),T7=r0e,i0e=lt(Z.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),s0e=lt(Z.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),o0e=lt(Z.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function a0e(t){return ot("MuiCheckbox",t)}const l0e=it("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),DR=l0e,c0e=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],u0e=t=>{const{classes:e,indeterminate:n,color:r,size:i}=t,s={root:["root",n&&"indeterminate",`color${xe(r)}`,`size${xe(i)}`]},o=st(s,a0e,e);return U({},e,o)},d0e=Se(T7,{shouldForwardProp:t=>Li(t)||t==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.indeterminate&&e.indeterminate,e[`size${xe(n.size)}`],n.color!=="default"&&e[`color${xe(n.color)}`]]}})(({theme:t,ownerState:e})=>U({color:(t.vars||t).palette.text.secondary},!e.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${e.color==="default"?t.vars.palette.action.activeChannel:t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:rn(e.color==="default"?t.palette.action.active:t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.color!=="default"&&{[`&.${DR.checked}, &.${DR.indeterminate}`]:{color:(t.vars||t).palette[e.color].main},[`&.${DR.disabled}`]:{color:(t.vars||t).palette.action.disabled}})),h0e=Z.jsx(s0e,{}),f0e=Z.jsx(i0e,{}),p0e=Z.jsx(o0e,{}),m0e=A.forwardRef(function(e,n){var r,i;const s=at({props:e,name:"MuiCheckbox"}),{checkedIcon:o=h0e,color:a="primary",icon:l=f0e,indeterminate:c=!1,indeterminateIcon:u=p0e,inputProps:d,size:h="medium",className:f}=s,p=$e(s,c0e),m=c?u:l,_=c?u:o,y=U({},s,{color:a,indeterminate:c,size:h}),x=u0e(y);return Z.jsx(d0e,U({type:"checkbox",inputProps:U({"data-indeterminate":c},d),icon:A.cloneElement(m,{fontSize:(r=m.props.fontSize)!=null?r:h}),checkedIcon:A.cloneElement(_,{fontSize:(i=_.props.fontSize)!=null?i:h}),ownerState:y,ref:n,className:Ue(x.root,f)},p,{classes:x}))}),Oa=m0e;function g0e(t){return ot("MuiCircularProgress",t)}it("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const v0e=["className","color","disableShrink","size","style","thickness","value","variant"];let $S=t=>t,VU,WU,XU,YU;const pu=44,y0e=Od(VU||(VU=$S`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),_0e=Od(WU||(WU=$S`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),b0e=t=>{const{classes:e,variant:n,color:r,disableShrink:i}=t,s={root:["root",n,`color${xe(r)}`],svg:["svg"],circle:["circle",`circle${xe(n)}`,i&&"circleDisableShrink"]};return st(s,g0e,e)},x0e=Se("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`color${xe(n.color)}`]]}})(({ownerState:t,theme:e})=>U({display:"inline-block"},t.variant==="determinate"&&{transition:e.transitions.create("transform")},t.color!=="inherit"&&{color:(e.vars||e).palette[t.color].main}),({ownerState:t})=>t.variant==="indeterminate"&&If(XU||(XU=$S`
      animation: ${0} 1.4s linear infinite;
    `),y0e)),E0e=Se("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(t,e)=>e.svg})({display:"block"}),w0e=Se("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.circle,e[`circle${xe(n.variant)}`],n.disableShrink&&e.circleDisableShrink]}})(({ownerState:t,theme:e})=>U({stroke:"currentColor"},t.variant==="determinate"&&{transition:e.transitions.create("stroke-dashoffset")},t.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:t})=>t.variant==="indeterminate"&&!t.disableShrink&&If(YU||(YU=$S`
      animation: ${0} 1.4s ease-in-out infinite;
    `),_0e)),T0e=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiCircularProgress"}),{className:i,color:s="primary",disableShrink:o=!1,size:a=40,style:l,thickness:c=3.6,value:u=0,variant:d="indeterminate"}=r,h=$e(r,v0e),f=U({},r,{color:s,disableShrink:o,size:a,thickness:c,value:u,variant:d}),p=b0e(f),m={},_={},y={};if(d==="determinate"){const x=2*Math.PI*((pu-c)/2);m.strokeDasharray=x.toFixed(3),y["aria-valuenow"]=Math.round(u),m.strokeDashoffset=`${((100-u)/100*x).toFixed(3)}px`,_.transform="rotate(-90deg)"}return Z.jsx(x0e,U({className:Ue(p.root,i),style:U({width:a,height:a},_,l),ownerState:f,ref:n,role:"progressbar"},y,h,{children:Z.jsx(E0e,{className:p.svg,ownerState:f,viewBox:`${pu/2} ${pu/2} ${pu} ${pu}`,children:Z.jsx(w0e,{className:p.circle,style:m,ownerState:f,cx:pu,cy:pu,r:(pu-c)/2,fill:"none",strokeWidth:c})})}))}),Mf=T0e;function S0e(t){return ot("MuiModal",t)}it("MuiModal",["root","hidden","backdrop"]);const C0e=["BackdropComponent","BackdropProps","classes","className","closeAfterTransition","children","container","component","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","onBackdropClick","onClose","onTransitionEnter","onTransitionExited","open","slotProps","slots","theme"],A0e=t=>{const{open:e,exited:n,classes:r}=t;return st({root:["root",!e&&n&&"hidden"],backdrop:["backdrop"]},S0e,r)},R0e=Se("div",{name:"MuiModal",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.open&&n.exited&&e.hidden]}})(({theme:t,ownerState:e})=>U({position:"fixed",zIndex:(t.vars||t).zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&e.exited&&{visibility:"hidden"})),P0e=Se(RN,{name:"MuiModal",slot:"Backdrop",overridesResolver:(t,e)=>e.backdrop})({zIndex:-1}),I0e=A.forwardRef(function(e,n){var r,i,s,o,a,l;const c=at({name:"MuiModal",props:e}),{BackdropComponent:u=P0e,BackdropProps:d,className:h,closeAfterTransition:f=!1,children:p,container:m,component:_,components:y={},componentsProps:x={},disableAutoFocus:b=!1,disableEnforceFocus:E=!1,disableEscapeKeyDown:w=!1,disablePortal:T=!1,disableRestoreFocus:C=!1,disableScrollLock:P=!1,hideBackdrop:M=!1,keepMounted:N=!1,onBackdropClick:F,open:I,slotProps:k,slots:R}=c,z=$e(c,C0e),X=U({},c,{closeAfterTransition:f,disableAutoFocus:b,disableEnforceFocus:E,disableEscapeKeyDown:w,disablePortal:T,disableRestoreFocus:C,disableScrollLock:P,hideBackdrop:M,keepMounted:N}),{getRootProps:G,getBackdropProps:j,getTransitionProps:H,portalRef:Q,isTopModal:V,exited:ee,hasTransition:ye}=kfe(U({},X,{rootRef:n})),se=U({},X,{exited:ee}),fe=A0e(se),ve={};if(p.props.tabIndex===void 0&&(ve.tabIndex="-1"),ye){const{onEnter:Re,onExited:B}=H();ve.onEnter=Re,ve.onExited=B}const Oe=(r=(i=R==null?void 0:R.root)!=null?i:y.Root)!=null?r:R0e,ae=(s=(o=R==null?void 0:R.backdrop)!=null?o:y.Backdrop)!=null?s:u,ue=(a=k==null?void 0:k.root)!=null?a:x.root,Ce=(l=k==null?void 0:k.backdrop)!=null?l:x.backdrop,pe=Nr({elementType:Oe,externalSlotProps:ue,externalForwardedProps:z,getSlotProps:G,additionalProps:{ref:n,as:_},ownerState:se,className:Ue(h,ue==null?void 0:ue.className,fe==null?void 0:fe.root,!se.open&&se.exited&&(fe==null?void 0:fe.hidden))}),ke=Nr({elementType:ae,externalSlotProps:Ce,additionalProps:d,getSlotProps:Re=>j(U({},Re,{onClick:B=>{F&&F(B),Re!=null&&Re.onClick&&Re.onClick(B)}})),className:Ue(Ce==null?void 0:Ce.className,d==null?void 0:d.className,fe==null?void 0:fe.backdrop),ownerState:se});return!N&&!I&&(!ye||ee)?null:Z.jsx(a7,{ref:Q,container:m,disablePortal:T,children:Z.jsxs(Oe,U({},pe,{children:[!M&&u?Z.jsx(ae,U({},ke)):null,Z.jsx(Tfe,{disableEnforceFocus:E,disableAutoFocus:b,disableRestoreFocus:C,isEnabled:V,open:I,children:A.cloneElement(p,ve)})]}))})}),S7=I0e;function M0e(t){return ot("MuiDialog",t)}const L0e=it("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),BR=L0e,O0e=A.createContext({}),C7=O0e,k0e=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],N0e=Se(RN,{name:"MuiDialog",slot:"Backdrop",overrides:(t,e)=>e.backdrop})({zIndex:-1}),D0e=t=>{const{classes:e,scroll:n,maxWidth:r,fullWidth:i,fullScreen:s}=t,o={root:["root"],container:["container",`scroll${xe(n)}`],paper:["paper",`paperScroll${xe(n)}`,`paperWidth${xe(String(r))}`,i&&"paperFullWidth",s&&"paperFullScreen"]};return st(o,M0e,e)},B0e=Se(S7,{name:"MuiDialog",slot:"Root",overridesResolver:(t,e)=>e.root})({"@media print":{position:"absolute !important"}}),F0e=Se("div",{name:"MuiDialog",slot:"Container",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.container,e[`scroll${xe(n.scroll)}`]]}})(({ownerState:t})=>U({height:"100%","@media print":{height:"auto"},outline:0},t.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},t.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),U0e=Se(Nd,{name:"MuiDialog",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.paper,e[`scrollPaper${xe(n.scroll)}`],e[`paperWidth${xe(String(n.maxWidth))}`],n.fullWidth&&e.paperFullWidth,n.fullScreen&&e.paperFullScreen]}})(({theme:t,ownerState:e})=>U({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},e.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},e.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!e.maxWidth&&{maxWidth:"calc(100% - 64px)"},e.maxWidth==="xs"&&{maxWidth:t.breakpoints.unit==="px"?Math.max(t.breakpoints.values.xs,444):`max(${t.breakpoints.values.xs}${t.breakpoints.unit}, 444px)`,[`&.${BR.paperScrollBody}`]:{[t.breakpoints.down(Math.max(t.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.maxWidth&&e.maxWidth!=="xs"&&{maxWidth:`${t.breakpoints.values[e.maxWidth]}${t.breakpoints.unit}`,[`&.${BR.paperScrollBody}`]:{[t.breakpoints.down(t.breakpoints.values[e.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},e.fullWidth&&{width:"calc(100% - 64px)"},e.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${BR.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),z0e=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiDialog"}),i=ms(),s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{"aria-describedby":o,"aria-labelledby":a,BackdropComponent:l,BackdropProps:c,children:u,className:d,disableEscapeKeyDown:h=!1,fullScreen:f=!1,fullWidth:p=!1,maxWidth:m="sm",onBackdropClick:_,onClose:y,open:x,PaperComponent:b=Nd,PaperProps:E={},scroll:w="paper",TransitionComponent:T=_7,transitionDuration:C=s,TransitionProps:P}=r,M=$e(r,k0e),N=U({},r,{disableEscapeKeyDown:h,fullScreen:f,fullWidth:p,maxWidth:m,scroll:w}),F=D0e(N),I=A.useRef(),k=G=>{I.current=G.target===G.currentTarget},R=G=>{I.current&&(I.current=null,_&&_(G),y&&y(G,"backdropClick"))},z=kd(a),X=A.useMemo(()=>({titleId:z}),[z]);return Z.jsx(B0e,U({className:Ue(F.root,d),closeAfterTransition:!0,components:{Backdrop:N0e},componentsProps:{backdrop:U({transitionDuration:C,as:l},c)},disableEscapeKeyDown:h,onClose:y,open:x,ref:n,onClick:R,ownerState:N},M,{children:Z.jsx(T,U({appear:!0,in:x,timeout:C,role:"presentation"},P,{children:Z.jsx(F0e,{className:Ue(F.container),onMouseDown:k,ownerState:N,children:Z.jsx(U0e,U({as:b,elevation:24,role:"dialog","aria-describedby":o,"aria-labelledby":z},E,{className:Ue(F.paper,E.className),ownerState:N,children:Z.jsx(C7.Provider,{value:X,children:u})}))})}))}))}),qc=z0e;function $0e(t){return ot("MuiDialogActions",t)}it("MuiDialogActions",["root","spacing"]);const j0e=["className","disableSpacing"],G0e=t=>{const{classes:e,disableSpacing:n}=t;return st({root:["root",!n&&"spacing"]},$0e,e)},H0e=Se("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disableSpacing&&e.spacing]}})(({ownerState:t})=>U({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!t.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),V0e=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiDialogActions"}),{className:i,disableSpacing:s=!1}=r,o=$e(r,j0e),a=U({},r,{disableSpacing:s}),l=G0e(a);return Z.jsx(H0e,U({className:Ue(l.root,i),ownerState:a,ref:n},o))}),Ag=V0e;function W0e(t){return ot("MuiDialogContent",t)}it("MuiDialogContent",["root","dividers"]);function X0e(t){return ot("MuiDialogTitle",t)}const Y0e=it("MuiDialogTitle",["root"]),K0e=Y0e,q0e=["className","dividers"],Z0e=t=>{const{classes:e,dividers:n}=t;return st({root:["root",n&&"dividers"]},W0e,e)},Q0e=Se("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.dividers&&e.dividers]}})(({theme:t,ownerState:e})=>U({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},e.dividers?{padding:"16px 24px",borderTop:`1px solid ${(t.vars||t).palette.divider}`,borderBottom:`1px solid ${(t.vars||t).palette.divider}`}:{[`.${K0e.root} + &`]:{paddingTop:0}})),J0e=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiDialogContent"}),{className:i,dividers:s=!1}=r,o=$e(r,q0e),a=U({},r,{dividers:s}),l=Z0e(a);return Z.jsx(Q0e,U({className:Ue(l.root,i),ownerState:a,ref:n},o))}),Zc=J0e;function eve(t){return ot("MuiDialogContentText",t)}it("MuiDialogContentText",["root"]);const tve=["children","className"],nve=t=>{const{classes:e}=t,r=st({root:["root"]},eve,e);return U({},e,r)},rve=Se(en,{shouldForwardProp:t=>Li(t)||t==="classes",name:"MuiDialogContentText",slot:"Root",overridesResolver:(t,e)=>e.root})({}),ive=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiDialogContentText"}),{className:i}=r,s=$e(r,tve),o=nve(s);return Z.jsx(rve,U({component:"p",variant:"body1",color:"text.secondary",ref:n,ownerState:s,className:Ue(o.root,i)},r,{classes:o}))}),IN=ive,sve=["className","id"],ove=t=>{const{classes:e}=t;return st({root:["root"]},X0e,e)},ave=Se(en,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(t,e)=>e.root})({padding:"16px 24px",flex:"0 0 auto"}),lve=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiDialogTitle"}),{className:i,id:s}=r,o=$e(r,sve),a=r,l=ove(a),{titleId:c=s}=A.useContext(C7);return Z.jsx(ave,U({component:"h2",className:Ue(l.root,i),ownerState:a,ref:n,variant:"h6",id:s??c},o))}),Lf=lve,cve=it("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),KU=cve;function uve(t){return ot("MuiFab",t)}const dve=it("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]),qU=dve,hve=["children","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"],fve=t=>{const{color:e,variant:n,classes:r,size:i}=t,s={root:["root",n,`size${xe(i)}`,e==="inherit"?"colorInherit":e]},o=st(s,uve,r);return U({},r,o)},pve=Se(da,{name:"MuiFab",slot:"Root",shouldForwardProp:t=>Li(t)||t==="classes",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`size${xe(n.size)}`],n.color==="inherit"&&e.colorInherit,e[xe(n.size)],e[n.color]]}})(({theme:t,ownerState:e})=>{var n,r;return U({},t.typography.button,{minHeight:36,transition:t.transitions.create(["background-color","box-shadow","border-color"],{duration:t.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(t.vars||t).zIndex.fab,boxShadow:(t.vars||t).shadows[6],"&:active":{boxShadow:(t.vars||t).shadows[12]},color:t.vars?t.vars.palette.text.primary:(n=(r=t.palette).getContrastText)==null?void 0:n.call(r,t.palette.grey[300]),backgroundColor:(t.vars||t).palette.grey[300],"&:hover":{backgroundColor:(t.vars||t).palette.grey.A100,"@media (hover: none)":{backgroundColor:(t.vars||t).palette.grey[300]},textDecoration:"none"},[`&.${qU.focusVisible}`]:{boxShadow:(t.vars||t).shadows[6]}},e.size==="small"&&{width:40,height:40},e.size==="medium"&&{width:48,height:48},e.variant==="extended"&&{borderRadius:48/2,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48},e.variant==="extended"&&e.size==="small"&&{width:"auto",padding:"0 8px",borderRadius:34/2,minWidth:34,height:34},e.variant==="extended"&&e.size==="medium"&&{width:"auto",padding:"0 16px",borderRadius:40/2,minWidth:40,height:40},e.color==="inherit"&&{color:"inherit"})},({theme:t,ownerState:e})=>U({},e.color!=="inherit"&&e.color!=="default"&&(t.vars||t).palette[e.color]!=null&&{color:(t.vars||t).palette[e.color].contrastText,backgroundColor:(t.vars||t).palette[e.color].main,"&:hover":{backgroundColor:(t.vars||t).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[e.color].main}}}),({theme:t})=>({[`&.${qU.disabled}`]:{color:(t.vars||t).palette.action.disabled,boxShadow:(t.vars||t).shadows[0],backgroundColor:(t.vars||t).palette.action.disabledBackground}})),mve=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiFab"}),{children:i,className:s,color:o="default",component:a="button",disabled:l=!1,disableFocusRipple:c=!1,focusVisibleClassName:u,size:d="large",variant:h="circular"}=r,f=$e(r,hve),p=U({},r,{color:o,component:a,disabled:l,disableFocusRipple:c,size:d,variant:h}),m=fve(p);return Z.jsx(pve,U({className:Ue(m.root,s),component:a,disabled:l,focusRipple:!c,focusVisibleClassName:Ue(m.focusVisible,u),ownerState:p,ref:n},f,{classes:m,children:i}))}),A7=mve,gve=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","slotProps","slots","type"],vve=t=>{const{classes:e,disableUnderline:n}=t,i=st({root:["root",!n&&"underline"],input:["input"]},Ime,e);return U({},e,i)},yve=Se(US,{shouldForwardProp:t=>Li(t)||t==="classes",name:"MuiFilledInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...BS(t,e),!n.disableUnderline&&e.underline]}})(({theme:t,ownerState:e})=>{var n;const r=t.palette.mode==="light",i=r?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",s=r?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)",o=r?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)",a=r?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)";return U({position:"relative",backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s,borderTopLeftRadius:(t.vars||t).shape.borderRadius,borderTopRightRadius:(t.vars||t).shape.borderRadius,transition:t.transitions.create("background-color",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),"&:hover":{backgroundColor:t.vars?t.vars.palette.FilledInput.hoverBg:o,"@media (hover: none)":{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s}},[`&.${Jd.focused}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.bg:s},[`&.${Jd.disabled}`]:{backgroundColor:t.vars?t.vars.palette.FilledInput.disabledBg:a}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(n=(t.vars||t).palette[e.color||"primary"])==null?void 0:n.main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${Jd.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${Jd.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`:i}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${Jd.disabled}, .${Jd.error}):before`]:{borderBottom:`1px solid ${(t.vars||t).palette.text.primary}`},[`&.${Jd.disabled}:before`]:{borderBottomStyle:"dotted"}},e.startAdornment&&{paddingLeft:12},e.endAdornment&&{paddingRight:12},e.multiline&&U({padding:"25px 12px 8px"},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9}))}),_ve=Se(zS,{name:"MuiFilledInput",slot:"Input",overridesResolver:FS})(({theme:t,ownerState:e})=>U({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0},e.hiddenLabel&&e.size==="small"&&{paddingTop:8,paddingBottom:9},e.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0})),R7=A.forwardRef(function(e,n){var r,i,s,o;const a=at({props:e,name:"MuiFilledInput"}),{components:l={},componentsProps:c,fullWidth:u=!1,inputComponent:d="input",multiline:h=!1,slotProps:f,slots:p={},type:m="text"}=a,_=$e(a,gve),y=U({},a,{fullWidth:u,inputComponent:d,multiline:h,type:m}),x=vve(a),b={root:{ownerState:y},input:{ownerState:y}},E=f??c?Ys(b,f??c):b,w=(r=(i=p.root)!=null?i:l.Root)!=null?r:yve,T=(s=(o=p.input)!=null?o:l.Input)!=null?s:_ve;return Z.jsx(AN,U({slots:{root:w,input:T},componentsProps:E,fullWidth:u,inputComponent:d,multiline:h,ref:n,type:m},_,{classes:x}))});R7.muiName="Input";const P7=R7;function bve(t){return ot("MuiFormControl",t)}it("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);const xve=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],Eve=t=>{const{classes:e,margin:n,fullWidth:r}=t,i={root:["root",n!=="none"&&`margin${xe(n)}`,r&&"fullWidth"]};return st(i,bve,e)},wve=Se("div",{name:"MuiFormControl",slot:"Root",overridesResolver:({ownerState:t},e)=>U({},e.root,e[`margin${xe(t.margin)}`],t.fullWidth&&e.fullWidth)})(({ownerState:t})=>U({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},t.margin==="normal"&&{marginTop:16,marginBottom:8},t.margin==="dense"&&{marginTop:8,marginBottom:4},t.fullWidth&&{width:"100%"})),Tve=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiFormControl"}),{children:i,className:s,color:o="primary",component:a="div",disabled:l=!1,error:c=!1,focused:u,fullWidth:d=!1,hiddenLabel:h=!1,margin:f="none",required:p=!1,size:m="medium",variant:_="outlined"}=r,y=$e(r,xve),x=U({},r,{color:o,component:a,disabled:l,error:c,fullWidth:d,hiddenLabel:h,margin:f,required:p,size:m,variant:_}),b=Eve(x),[E,w]=A.useState(()=>{let k=!1;return i&&A.Children.forEach(i,R=>{if(!_m(R,["Input","Select"]))return;const z=_m(R,["Select"])?R.props.input:R;z&&_me(z.props)&&(k=!0)}),k}),[T,C]=A.useState(()=>{let k=!1;return i&&A.Children.forEach(i,R=>{_m(R,["Input","Select"])&&(Cw(R.props,!0)||Cw(R.props.inputProps,!0))&&(k=!0)}),k}),[P,M]=A.useState(!1);l&&P&&M(!1);const N=u!==void 0&&!l?u:P;let F;const I=A.useMemo(()=>({adornedStart:E,setAdornedStart:w,color:o,disabled:l,error:c,filled:T,focused:N,fullWidth:d,hiddenLabel:h,size:m,onBlur:()=>{M(!1)},onEmpty:()=>{C(!1)},onFilled:()=>{C(!0)},onFocus:()=>{M(!0)},registerEffect:F,required:p,variant:_}),[E,o,l,c,T,N,d,h,F,p,m,_]);return Z.jsx(CN.Provider,{value:I,children:Z.jsx(wve,U({as:a,ownerState:x,className:Ue(b.root,s),ref:n},y,{children:i}))})}),L1=Tve,Sve=xde({createStyledComponent:Se("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root}),useThemeProps:t=>at({props:t,name:"MuiStack"})}),I7=Sve;function Cve(t){return ot("MuiFormControlLabel",t)}const Ave=it("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),J0=Ave,Rve=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],Pve=t=>{const{classes:e,disabled:n,labelPlacement:r,error:i,required:s}=t,o={root:["root",n&&"disabled",`labelPlacement${xe(r)}`,i&&"error",s&&"required"],label:["label",n&&"disabled"],asterisk:["asterisk",i&&"error"]};return st(o,Cve,e)},Ive=Se("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${J0.label}`]:e.label},e.root,e[`labelPlacement${xe(n.labelPlacement)}`]]}})(({theme:t,ownerState:e})=>U({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${J0.disabled}`]:{cursor:"default"}},e.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},e.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},e.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${J0.label}`]:{[`&.${J0.disabled}`]:{color:(t.vars||t).palette.text.disabled}}})),Mve=Se("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(t,e)=>e.asterisk})(({theme:t})=>({[`&.${J0.error}`]:{color:(t.vars||t).palette.error.main}})),Lve=A.forwardRef(function(e,n){var r,i;const s=at({props:e,name:"MuiFormControlLabel"}),{className:o,componentsProps:a={},control:l,disabled:c,disableTypography:u,label:d,labelPlacement:h="end",required:f,slotProps:p={}}=s,m=$e(s,Rve),_=Kc(),y=(r=c??l.props.disabled)!=null?r:_==null?void 0:_.disabled,x=f??l.props.required,b={disabled:y,required:x};["checked","name","onChange","value","inputRef"].forEach(M=>{typeof l.props[M]>"u"&&typeof s[M]<"u"&&(b[M]=s[M])});const E=Bd({props:s,muiFormControl:_,states:["error"]}),w=U({},s,{disabled:y,labelPlacement:h,required:x,error:E.error}),T=Pve(w),C=(i=p.typography)!=null?i:a.typography;let P=d;return P!=null&&P.type!==en&&!u&&(P=Z.jsx(en,U({component:"span"},C,{className:Ue(T.label,C==null?void 0:C.className),children:P}))),Z.jsxs(Ive,U({className:Ue(T.root,o),ownerState:w,ref:n},m,{children:[A.cloneElement(l,b),x?Z.jsxs(I7,{display:"block",children:[P,Z.jsxs(Mve,{ownerState:w,"aria-hidden":!0,className:T.asterisk,children:["","*"]})]}):P]}))}),Ove=Lve;function kve(t){return ot("MuiFormGroup",t)}it("MuiFormGroup",["root","row","error"]);const Nve=["className","row"],Dve=t=>{const{classes:e,row:n,error:r}=t;return st({root:["root",n&&"row",r&&"error"]},kve,e)},Bve=Se("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.row&&e.row]}})(({ownerState:t})=>U({display:"flex",flexDirection:"column",flexWrap:"wrap"},t.row&&{flexDirection:"row"})),Fve=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiFormGroup"}),{className:i,row:s=!1}=r,o=$e(r,Nve),a=Kc(),l=Bd({props:r,muiFormControl:a,states:["error"]}),c=U({},r,{row:s,error:l.error}),u=Dve(c);return Z.jsx(Bve,U({className:Ue(u.root,i),ownerState:c,ref:n},o))}),M7=Fve;function Uve(t){return ot("MuiFormHelperText",t)}const zve=it("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),ZU=zve;var QU;const $ve=["children","className","component","disabled","error","filled","focused","margin","required","variant"],jve=t=>{const{classes:e,contained:n,size:r,disabled:i,error:s,filled:o,focused:a,required:l}=t,c={root:["root",i&&"disabled",s&&"error",r&&`size${xe(r)}`,n&&"contained",a&&"focused",o&&"filled",l&&"required"]};return st(c,Uve,e)},Gve=Se("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.size&&e[`size${xe(n.size)}`],n.contained&&e.contained,n.filled&&e.filled]}})(({theme:t,ownerState:e})=>U({color:(t.vars||t).palette.text.secondary},t.typography.caption,{textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0,[`&.${ZU.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${ZU.error}`]:{color:(t.vars||t).palette.error.main}},e.size==="small"&&{marginTop:4},e.contained&&{marginLeft:14,marginRight:14})),Hve=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiFormHelperText"}),{children:i,className:s,component:o="p"}=r,a=$e(r,$ve),l=Kc(),c=Bd({props:r,muiFormControl:l,states:["variant","size","disabled","error","filled","focused","required"]}),u=U({},r,{component:o,contained:c.variant==="filled"||c.variant==="outlined",variant:c.variant,size:c.size,disabled:c.disabled,error:c.error,filled:c.filled,focused:c.focused,required:c.required}),d=jve(u);return Z.jsx(Gve,U({as:o,ownerState:u,className:Ue(d.root,s),ref:n},a,{children:i===" "?QU||(QU=Z.jsx("span",{className:"notranslate",children:""})):i}))}),Vve=Hve;function Wve(t){return ot("MuiFormLabel",t)}const Xve=it("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),zv=Xve,Yve=["children","className","color","component","disabled","error","filled","focused","required"],Kve=t=>{const{classes:e,color:n,focused:r,disabled:i,error:s,filled:o,required:a}=t,l={root:["root",`color${xe(n)}`,i&&"disabled",s&&"error",o&&"filled",r&&"focused",a&&"required"],asterisk:["asterisk",s&&"error"]};return st(l,Wve,e)},qve=Se("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:({ownerState:t},e)=>U({},e.root,t.color==="secondary"&&e.colorSecondary,t.filled&&e.filled)})(({theme:t,ownerState:e})=>U({color:(t.vars||t).palette.text.secondary},t.typography.body1,{lineHeight:"1.4375em",padding:0,position:"relative",[`&.${zv.focused}`]:{color:(t.vars||t).palette[e.color].main},[`&.${zv.disabled}`]:{color:(t.vars||t).palette.text.disabled},[`&.${zv.error}`]:{color:(t.vars||t).palette.error.main}})),Zve=Se("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:(t,e)=>e.asterisk})(({theme:t})=>({[`&.${zv.error}`]:{color:(t.vars||t).palette.error.main}})),Qve=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiFormLabel"}),{children:i,className:s,component:o="label"}=r,a=$e(r,Yve),l=Kc(),c=Bd({props:r,muiFormControl:l,states:["color","required","focused","disabled","error","filled"]}),u=U({},r,{color:c.color||"primary",component:o,disabled:c.disabled,error:c.error,filled:c.filled,focused:c.focused,required:c.required}),d=Kve(u);return Z.jsxs(qve,U({as:o,ownerState:u,className:Ue(d.root,s),ref:n},a,{children:[i,c.required&&Z.jsxs(Zve,{ownerState:u,"aria-hidden":!0,className:d.asterisk,children:["","*"]})]}))}),Jve=Qve,eye=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function vM(t){return`scale(${t}, ${t**2})`}const tye={entering:{opacity:1,transform:vM(1)},entered:{opacity:1,transform:"none"}},FR=typeof navigator<"u"&&/^((?!chrome|android).)*(safari|mobile)/i.test(navigator.userAgent)&&/(os |version\/)15(.|_)4/i.test(navigator.userAgent),L7=A.forwardRef(function(e,n){const{addEndListener:r,appear:i=!0,children:s,easing:o,in:a,onEnter:l,onEntered:c,onEntering:u,onExit:d,onExited:h,onExiting:f,style:p,timeout:m="auto",TransitionComponent:_=kS}=e,y=$e(e,eye),x=Wu(),b=A.useRef(),E=ms(),w=A.useRef(null),T=Fn(w,s.ref,n),C=z=>X=>{if(z){const G=w.current;X===void 0?z(G):z(G,X)}},P=C(u),M=C((z,X)=>{vN(z);const{duration:G,delay:j,easing:H}=Ed({style:p,timeout:m,easing:o},{mode:"enter"});let Q;m==="auto"?(Q=E.transitions.getAutoHeightDuration(z.clientHeight),b.current=Q):Q=G,z.style.transition=[E.transitions.create("opacity",{duration:Q,delay:j}),E.transitions.create("transform",{duration:FR?Q:Q*.666,delay:j,easing:H})].join(","),l&&l(z,X)}),N=C(c),F=C(f),I=C(z=>{const{duration:X,delay:G,easing:j}=Ed({style:p,timeout:m,easing:o},{mode:"exit"});let H;m==="auto"?(H=E.transitions.getAutoHeightDuration(z.clientHeight),b.current=H):H=X,z.style.transition=[E.transitions.create("opacity",{duration:H,delay:G}),E.transitions.create("transform",{duration:FR?H:H*.666,delay:FR?G:G||H*.333,easing:j})].join(","),z.style.opacity=0,z.style.transform=vM(.75),d&&d(z)}),k=C(h),R=z=>{m==="auto"&&x.start(b.current||0,z),r&&r(w.current,z)};return Z.jsx(_,U({appear:i,in:a,nodeRef:w,onEnter:M,onEntered:N,onEntering:P,onExit:I,onExited:k,onExiting:F,addEndListener:R,timeout:m==="auto"?null:m},y,{children:(z,X)=>A.cloneElement(s,U({style:U({opacity:0,transform:vM(.75),visibility:z==="exited"&&!a?"hidden":void 0},tye[z],p,s.props.style),ref:T},X))}))});L7.muiSupportAuto=!0;const Aw=L7;function nye(t,e,n,r,i){const[s,o]=A.useState(()=>i&&n?n(t).matches:r?r(t).matches:e);return Os(()=>{let a=!0;if(!n)return;const l=n(t),c=()=>{a&&o(l.matches)};return c(),l.addListener(c),()=>{a=!1,l.removeListener(c)}},[t,n]),s}const O7=A.useSyncExternalStore;function rye(t,e,n,r,i){const s=A.useCallback(()=>e,[e]),o=A.useMemo(()=>{if(i&&n)return()=>n(t).matches;if(r!==null){const{matches:u}=r(t);return()=>u}return s},[s,t,r,i,n]),[a,l]=A.useMemo(()=>{if(n===null)return[s,()=>()=>{}];const u=n(t);return[()=>u.matches,d=>(u.addListener(d),()=>{u.removeListener(d)})]},[s,n,t]);return O7(l,a,o)}function iye(t,e={}){const n=dN(),r=typeof window<"u"&&typeof window.matchMedia<"u",{defaultMatches:i=!1,matchMedia:s=r?window.matchMedia:null,ssrMatchMedia:o=null,noSsr:a=!1}=Q9({name:"MuiUseMediaQuery",props:e,theme:n});let l=typeof t=="function"?t(n):t;return l=l.replace(/^@media( ?)/m,""),(O7!==void 0?rye:nye)(l,i,s,o,a)}const sye=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","slotProps","slots","type"],oye=t=>{const{classes:e,disableUnderline:n}=t,i=st({root:["root",!n&&"underline"],input:["input"]},Cme,e);return U({},e,i)},aye=Se(US,{shouldForwardProp:t=>Li(t)||t==="classes",name:"MuiInput",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[...BS(t,e),!n.disableUnderline&&e.underline]}})(({theme:t,ownerState:e})=>{let r=t.palette.mode==="light"?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return t.vars&&(r=`rgba(${t.vars.palette.common.onBackgroundChannel} / ${t.vars.opacity.inputUnderline})`),U({position:"relative"},e.formControl&&{"label + &":{marginTop:16}},!e.disableUnderline&&{"&::after":{borderBottom:`2px solid ${(t.vars||t).palette[e.color].main}`,left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut}),pointerEvents:"none"},[`&.${_0.focused}:after`]:{transform:"scaleX(1) translateX(0)"},[`&.${_0.error}`]:{"&::before, &::after":{borderBottomColor:(t.vars||t).palette.error.main}},"&::before":{borderBottom:`1px solid ${r}`,left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:t.transitions.create("border-bottom-color",{duration:t.transitions.duration.shorter}),pointerEvents:"none"},[`&:hover:not(.${_0.disabled}, .${_0.error}):before`]:{borderBottom:`2px solid ${(t.vars||t).palette.text.primary}`,"@media (hover: none)":{borderBottom:`1px solid ${r}`}},[`&.${_0.disabled}:before`]:{borderBottomStyle:"dotted"}})}),lye=Se(zS,{name:"MuiInput",slot:"Input",overridesResolver:FS})({}),k7=A.forwardRef(function(e,n){var r,i,s,o;const a=at({props:e,name:"MuiInput"}),{disableUnderline:l,components:c={},componentsProps:u,fullWidth:d=!1,inputComponent:h="input",multiline:f=!1,slotProps:p,slots:m={},type:_="text"}=a,y=$e(a,sye),x=oye(a),E={root:{ownerState:{disableUnderline:l}}},w=p??u?Ys(p??u,E):E,T=(r=(i=m.root)!=null?i:c.Root)!=null?r:aye,C=(s=(o=m.input)!=null?o:c.Input)!=null?s:lye;return Z.jsx(AN,U({slots:{root:T,input:C},slotProps:w,fullWidth:d,inputComponent:h,multiline:f,ref:n,type:_},y,{classes:x}))});k7.muiName="Input";const N7=k7;function cye(t){return ot("MuiInputLabel",t)}it("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);const uye=["disableAnimation","margin","shrink","variant","className"],dye=t=>{const{classes:e,formControl:n,size:r,shrink:i,disableAnimation:s,variant:o,required:a}=t,l={root:["root",n&&"formControl",!s&&"animated",i&&"shrink",r&&r!=="normal"&&`size${xe(r)}`,o],asterisk:[a&&"asterisk"]},c=st(l,cye,e);return U({},e,c)},hye=Se(Jve,{shouldForwardProp:t=>Li(t)||t==="classes",name:"MuiInputLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${zv.asterisk}`]:e.asterisk},e.root,n.formControl&&e.formControl,n.size==="small"&&e.sizeSmall,n.shrink&&e.shrink,!n.disableAnimation&&e.animated,n.focused&&e.focused,e[n.variant]]}})(({theme:t,ownerState:e})=>U({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},e.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},e.size==="small"&&{transform:"translate(0, 17px) scale(1)"},e.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!e.disableAnimation&&{transition:t.transitions.create(["color","transform","max-width"],{duration:t.transitions.duration.shorter,easing:t.transitions.easing.easeOut})},e.variant==="filled"&&U({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(12px, 13px) scale(1)"},e.shrink&&U({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},e.size==="small"&&{transform:"translate(12px, 4px) scale(0.75)"})),e.variant==="outlined"&&U({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},e.size==="small"&&{transform:"translate(14px, 9px) scale(1)"},e.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 32px)",transform:"translate(14px, -9px) scale(0.75)"}))),fye=A.forwardRef(function(e,n){const r=at({name:"MuiInputLabel",props:e}),{disableAnimation:i=!1,shrink:s,className:o}=r,a=$e(r,uye),l=Kc();let c=s;typeof c>"u"&&l&&(c=l.filled||l.focused||l.adornedStart);const u=Bd({props:r,muiFormControl:l,states:["size","variant","required","focused"]}),d=U({},r,{disableAnimation:i,formControl:l,shrink:c,size:u.size,variant:u.variant,required:u.required,focused:u.focused}),h=dye(d);return Z.jsx(hye,U({"data-shrink":c,ownerState:d,ref:n,className:Ue(h.root,o)},a,{classes:h}))}),D7=fye;function pye(t){return ot("MuiLinearProgress",t)}it("MuiLinearProgress",["root","colorPrimary","colorSecondary","determinate","indeterminate","buffer","query","dashed","dashedColorPrimary","dashedColorSecondary","bar","barColorPrimary","barColorSecondary","bar1Indeterminate","bar1Determinate","bar1Buffer","bar2Indeterminate","bar2Buffer"]);const mye=["className","color","value","valueBuffer","variant"];let Rg=t=>t,JU,ez,tz,nz,rz,iz;const yM=4,gye=Od(JU||(JU=Rg`
  0% {
    left: -35%;
    right: 100%;
  }

  60% {
    left: 100%;
    right: -90%;
  }

  100% {
    left: 100%;
    right: -90%;
  }
`)),vye=Od(ez||(ez=Rg`
  0% {
    left: -200%;
    right: 100%;
  }

  60% {
    left: 107%;
    right: -8%;
  }

  100% {
    left: 107%;
    right: -8%;
  }
`)),yye=Od(tz||(tz=Rg`
  0% {
    opacity: 1;
    background-position: 0 -23px;
  }

  60% {
    opacity: 0;
    background-position: 0 -23px;
  }

  100% {
    opacity: 1;
    background-position: -200px -23px;
  }
`)),_ye=t=>{const{classes:e,variant:n,color:r}=t,i={root:["root",`color${xe(r)}`,n],dashed:["dashed",`dashedColor${xe(r)}`],bar1:["bar",`barColor${xe(r)}`,(n==="indeterminate"||n==="query")&&"bar1Indeterminate",n==="determinate"&&"bar1Determinate",n==="buffer"&&"bar1Buffer"],bar2:["bar",n!=="buffer"&&`barColor${xe(r)}`,n==="buffer"&&`color${xe(r)}`,(n==="indeterminate"||n==="query")&&"bar2Indeterminate",n==="buffer"&&"bar2Buffer"]};return st(i,pye,e)},MN=(t,e)=>e==="inherit"?"currentColor":t.vars?t.vars.palette.LinearProgress[`${e}Bg`]:t.palette.mode==="light"?yf(t.palette[e].main,.62):vf(t.palette[e].main,.5),bye=Se("span",{name:"MuiLinearProgress",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`color${xe(n.color)}`],e[n.variant]]}})(({ownerState:t,theme:e})=>U({position:"relative",overflow:"hidden",display:"block",height:4,zIndex:0,"@media print":{colorAdjust:"exact"},backgroundColor:MN(e,t.color)},t.color==="inherit"&&t.variant!=="buffer"&&{backgroundColor:"none","&::before":{content:'""',position:"absolute",left:0,top:0,right:0,bottom:0,backgroundColor:"currentColor",opacity:.3}},t.variant==="buffer"&&{backgroundColor:"transparent"},t.variant==="query"&&{transform:"rotate(180deg)"})),xye=Se("span",{name:"MuiLinearProgress",slot:"Dashed",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.dashed,e[`dashedColor${xe(n.color)}`]]}})(({ownerState:t,theme:e})=>{const n=MN(e,t.color);return U({position:"absolute",marginTop:0,height:"100%",width:"100%"},t.color==="inherit"&&{opacity:.3},{backgroundImage:`radial-gradient(${n} 0%, ${n} 16%, transparent 42%)`,backgroundSize:"10px 10px",backgroundPosition:"0 -23px"})},If(nz||(nz=Rg`
    animation: ${0} 3s infinite linear;
  `),yye)),Eye=Se("span",{name:"MuiLinearProgress",slot:"Bar1",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.bar,e[`barColor${xe(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&e.bar1Indeterminate,n.variant==="determinate"&&e.bar1Determinate,n.variant==="buffer"&&e.bar1Buffer]}})(({ownerState:t,theme:e})=>U({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left",backgroundColor:t.color==="inherit"?"currentColor":(e.vars||e).palette[t.color].main},t.variant==="determinate"&&{transition:`transform .${yM}s linear`},t.variant==="buffer"&&{zIndex:1,transition:`transform .${yM}s linear`}),({ownerState:t})=>(t.variant==="indeterminate"||t.variant==="query")&&If(rz||(rz=Rg`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite;
    `),gye)),wye=Se("span",{name:"MuiLinearProgress",slot:"Bar2",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.bar,e[`barColor${xe(n.color)}`],(n.variant==="indeterminate"||n.variant==="query")&&e.bar2Indeterminate,n.variant==="buffer"&&e.bar2Buffer]}})(({ownerState:t,theme:e})=>U({width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},t.variant!=="buffer"&&{backgroundColor:t.color==="inherit"?"currentColor":(e.vars||e).palette[t.color].main},t.color==="inherit"&&{opacity:.3},t.variant==="buffer"&&{backgroundColor:MN(e,t.color),transition:`transform .${yM}s linear`}),({ownerState:t})=>(t.variant==="indeterminate"||t.variant==="query")&&If(iz||(iz=Rg`
      width: auto;
      animation: ${0} 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) 1.15s infinite;
    `),vye)),Tye=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiLinearProgress"}),{className:i,color:s="primary",value:o,valueBuffer:a,variant:l="indeterminate"}=r,c=$e(r,mye),u=U({},r,{color:s,variant:l}),d=_ye(u),h=ms(),f={},p={bar1:{},bar2:{}};if((l==="determinate"||l==="buffer")&&o!==void 0){f["aria-valuenow"]=Math.round(o),f["aria-valuemin"]=0,f["aria-valuemax"]=100;let m=o-100;h.direction==="rtl"&&(m=-m),p.bar1.transform=`translateX(${m}%)`}if(l==="buffer"&&a!==void 0){let m=(a||0)-100;h.direction==="rtl"&&(m=-m),p.bar2.transform=`translateX(${m}%)`}return Z.jsxs(bye,U({className:Ue(d.root,i),ownerState:u,role:"progressbar"},f,{ref:n},c,{children:[l==="buffer"?Z.jsx(xye,{className:d.dashed,ownerState:u}):null,Z.jsx(Eye,{className:d.bar1,ownerState:u,style:p.bar1}),l==="determinate"?null:Z.jsx(wye,{className:d.bar2,ownerState:u,style:p.bar2})]}))}),_M=Tye,Sye=A.createContext({}),By=Sye;function Cye(t){return ot("MuiList",t)}it("MuiList",["root","padding","dense","subheader"]);const Aye=["children","className","component","dense","disablePadding","subheader"],Rye=t=>{const{classes:e,disablePadding:n,dense:r,subheader:i}=t;return st({root:["root",!n&&"padding",r&&"dense",i&&"subheader"]},Cye,e)},Pye=Se("ul",{name:"MuiList",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,!n.disablePadding&&e.padding,n.dense&&e.dense,n.subheader&&e.subheader]}})(({ownerState:t})=>U({listStyle:"none",margin:0,padding:0,position:"relative"},!t.disablePadding&&{paddingTop:8,paddingBottom:8},t.subheader&&{paddingTop:0})),Iye=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiList"}),{children:i,className:s,component:o="ul",dense:a=!1,disablePadding:l=!1,subheader:c}=r,u=$e(r,Aye),d=A.useMemo(()=>({dense:a}),[a]),h=U({},r,{component:o,dense:a,disablePadding:l}),f=Rye(h);return Z.jsx(By.Provider,{value:d,children:Z.jsxs(Pye,U({as:o,className:Ue(f.root,s),ref:n,ownerState:h},u,{children:[c,i]}))})}),Mye=Iye;function Lye(t){return ot("MuiListItemIcon",t)}const Oye=it("MuiListItemIcon",["root","alignItemsFlexStart"]),sz=Oye,kye=["className"],Nye=t=>{const{alignItems:e,classes:n}=t;return st({root:["root",e==="flex-start"&&"alignItemsFlexStart"]},Lye,n)},Dye=Se("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.alignItems==="flex-start"&&e.alignItemsFlexStart]}})(({theme:t,ownerState:e})=>U({minWidth:56,color:(t.vars||t).palette.action.active,flexShrink:0,display:"inline-flex"},e.alignItems==="flex-start"&&{marginTop:8})),Bye=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiListItemIcon"}),{className:i}=r,s=$e(r,kye),o=A.useContext(By),a=U({},r,{alignItems:o.alignItems}),l=Nye(a);return Z.jsx(Dye,U({className:Ue(l.root,i),ownerState:a,ref:n},s))}),UR=Bye;function Fye(t){return ot("MuiListItemText",t)}const Uye=it("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),Rw=Uye,zye=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],$ye=t=>{const{classes:e,inset:n,primary:r,secondary:i,dense:s}=t;return st({root:["root",n&&"inset",s&&"dense",r&&i&&"multiline"],primary:["primary"],secondary:["secondary"]},Fye,e)},jye=Se("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${Rw.primary}`]:e.primary},{[`& .${Rw.secondary}`]:e.secondary},e.root,n.inset&&e.inset,n.primary&&n.secondary&&e.multiline,n.dense&&e.dense]}})(({ownerState:t})=>U({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},t.primary&&t.secondary&&{marginTop:6,marginBottom:6},t.inset&&{paddingLeft:56})),Gye=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiListItemText"}),{children:i,className:s,disableTypography:o=!1,inset:a=!1,primary:l,primaryTypographyProps:c,secondary:u,secondaryTypographyProps:d}=r,h=$e(r,zye),{dense:f}=A.useContext(By);let p=l??i,m=u;const _=U({},r,{disableTypography:o,inset:a,primary:!!p,secondary:!!m,dense:f}),y=$ye(_);return p!=null&&p.type!==en&&!o&&(p=Z.jsx(en,U({variant:f?"body2":"body1",className:y.primary,component:c!=null&&c.variant?void 0:"span",display:"block"},c,{children:p}))),m!=null&&m.type!==en&&!o&&(m=Z.jsx(en,U({variant:"body2",className:y.secondary,color:"text.secondary",display:"block"},d,{children:m}))),Z.jsxs(jye,U({className:Ue(y.root,s),ownerState:_,ref:n},h,{children:[p,m]}))}),cE=Gye,Hye=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function zR(t,e,n){return t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:n?null:t.firstChild}function oz(t,e,n){return t===e?n?t.firstChild:t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:n?null:t.lastChild}function B7(t,e){if(e===void 0)return!0;let n=t.innerText;return n===void 0&&(n=t.textContent),n=n.trim().toLowerCase(),n.length===0?!1:e.repeating?n[0]===e.keys[0]:n.indexOf(e.keys.join(""))===0}function b0(t,e,n,r,i,s){let o=!1,a=i(t,e,e?n:!1);for(;a;){if(a===t.firstChild){if(o)return!1;o=!0}const l=r?!1:a.disabled||a.getAttribute("aria-disabled")==="true";if(!a.hasAttribute("tabindex")||!B7(a,s)||l)a=i(t,a,n);else return a.focus(),!0}return!1}const Vye=A.forwardRef(function(e,n){const{actions:r,autoFocus:i=!1,autoFocusItem:s=!1,children:o,className:a,disabledItemsFocusable:l=!1,disableListWrap:c=!1,onKeyDown:u,variant:d="selectedMenu"}=e,h=$e(e,Hye),f=A.useRef(null),p=A.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});Os(()=>{i&&f.current.focus()},[i]),A.useImperativeHandle(r,()=>({adjustStyleForScrollbar:(b,E)=>{const w=!f.current.style.width;if(b.clientHeight<f.current.clientHeight&&w){const T=`${$9(tr(b))}px`;f.current.style[E.direction==="rtl"?"paddingLeft":"paddingRight"]=T,f.current.style.width=`calc(100% + ${T})`}return f.current}}),[]);const m=b=>{const E=f.current,w=b.key,T=tr(E).activeElement;if(w==="ArrowDown")b.preventDefault(),b0(E,T,c,l,zR);else if(w==="ArrowUp")b.preventDefault(),b0(E,T,c,l,oz);else if(w==="Home")b.preventDefault(),b0(E,null,c,l,zR);else if(w==="End")b.preventDefault(),b0(E,null,c,l,oz);else if(w.length===1){const C=p.current,P=w.toLowerCase(),M=performance.now();C.keys.length>0&&(M-C.lastTime>500?(C.keys=[],C.repeating=!0,C.previousKeyMatched=!0):C.repeating&&P!==C.keys[0]&&(C.repeating=!1)),C.lastTime=M,C.keys.push(P);const N=T&&!C.repeating&&B7(T,C);C.previousKeyMatched&&(N||b0(E,T,!1,l,zR,C))?b.preventDefault():C.previousKeyMatched=!1}u&&u(b)},_=Fn(f,n);let y=-1;A.Children.forEach(o,(b,E)=>{if(!A.isValidElement(b)){y===E&&(y+=1,y>=o.length&&(y=-1));return}b.props.disabled||(d==="selectedMenu"&&b.props.selected||y===-1)&&(y=E),y===E&&(b.props.disabled||b.props.muiSkipListHighlight||b.type.muiSkipListHighlight)&&(y+=1,y>=o.length&&(y=-1))});const x=A.Children.map(o,(b,E)=>{if(E===y){const w={};return s&&(w.autoFocus=!0),b.props.tabIndex===void 0&&d==="selectedMenu"&&(w.tabIndex=0),A.cloneElement(b,w)}return b});return Z.jsx(Mye,U({role:"menu",ref:_,className:a,onKeyDown:m,tabIndex:i?0:-1},h,{children:x}))}),F7=Vye;function Wye(t){return ot("MuiPopover",t)}it("MuiPopover",["root","paper"]);const Xye=["onEntering"],Yye=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","slots","slotProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps","disableScrollLock"],Kye=["slotProps"];function az(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.height/2:e==="bottom"&&(n=t.height),n}function lz(t,e){let n=0;return typeof e=="number"?n=e:e==="center"?n=t.width/2:e==="right"&&(n=t.width),n}function cz(t){return[t.horizontal,t.vertical].map(e=>typeof e=="number"?`${e}px`:e).join(" ")}function $R(t){return typeof t=="function"?t():t}const qye=t=>{const{classes:e}=t;return st({root:["root"],paper:["paper"]},Wye,e)},Zye=Se(S7,{name:"MuiPopover",slot:"Root",overridesResolver:(t,e)=>e.root})({}),U7=Se(Nd,{name:"MuiPopover",slot:"Paper",overridesResolver:(t,e)=>e.paper})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),Qye=A.forwardRef(function(e,n){var r,i,s;const o=at({props:e,name:"MuiPopover"}),{action:a,anchorEl:l,anchorOrigin:c={vertical:"top",horizontal:"left"},anchorPosition:u,anchorReference:d="anchorEl",children:h,className:f,container:p,elevation:m=8,marginThreshold:_=16,open:y,PaperProps:x={},slots:b,slotProps:E,transformOrigin:w={vertical:"top",horizontal:"left"},TransitionComponent:T=Aw,transitionDuration:C="auto",TransitionProps:{onEntering:P}={},disableScrollLock:M=!1}=o,N=$e(o.TransitionProps,Xye),F=$e(o,Yye),I=(r=E==null?void 0:E.paper)!=null?r:x,k=A.useRef(),R=Fn(k,I.ref),z=U({},o,{anchorOrigin:c,anchorReference:d,elevation:m,marginThreshold:_,externalPaperSlotProps:I,transformOrigin:w,TransitionComponent:T,transitionDuration:C,TransitionProps:N}),X=qye(z),G=A.useCallback(()=>{if(d==="anchorPosition")return u;const Re=$R(l),oe=(Re&&Re.nodeType===1?Re:tr(k.current).body).getBoundingClientRect();return{top:oe.top+az(oe,c.vertical),left:oe.left+lz(oe,c.horizontal)}},[l,c.horizontal,c.vertical,u,d]),j=A.useCallback(Re=>({vertical:az(Re,w.vertical),horizontal:lz(Re,w.horizontal)}),[w.horizontal,w.vertical]),H=A.useCallback(Re=>{const B={width:Re.offsetWidth,height:Re.offsetHeight},oe=j(B);if(d==="none")return{top:null,left:null,transformOrigin:cz(oe)};const ie=G();let q=ie.top-oe.vertical,Y=ie.left-oe.horizontal;const ne=q+B.height,me=Y+B.width,he=$l($R(l)),de=he.innerHeight-_,Ae=he.innerWidth-_;if(_!==null&&q<_){const De=q-_;q-=De,oe.vertical+=De}else if(_!==null&&ne>de){const De=ne-de;q-=De,oe.vertical+=De}if(_!==null&&Y<_){const De=Y-_;Y-=De,oe.horizontal+=De}else if(me>Ae){const De=me-Ae;Y-=De,oe.horizontal+=De}return{top:`${Math.round(q)}px`,left:`${Math.round(Y)}px`,transformOrigin:cz(oe)}},[l,d,G,j,_]),[Q,V]=A.useState(y),ee=A.useCallback(()=>{const Re=k.current;if(!Re)return;const B=H(Re);B.top!==null&&(Re.style.top=B.top),B.left!==null&&(Re.style.left=B.left),Re.style.transformOrigin=B.transformOrigin,V(!0)},[H]);A.useEffect(()=>(M&&window.addEventListener("scroll",ee),()=>window.removeEventListener("scroll",ee)),[l,M,ee]);const ye=(Re,B)=>{P&&P(Re,B),ee()},se=()=>{V(!1)};A.useEffect(()=>{y&&ee()}),A.useImperativeHandle(a,()=>y?{updatePosition:()=>{ee()}}:null,[y,ee]),A.useEffect(()=>{if(!y)return;const Re=C1(()=>{ee()}),B=$l(l);return B.addEventListener("resize",Re),()=>{Re.clear(),B.removeEventListener("resize",Re)}},[l,y,ee]);let fe=C;C==="auto"&&!T.muiSupportAuto&&(fe=void 0);const ve=p||(l?tr($R(l)).body:void 0),Oe=(i=b==null?void 0:b.root)!=null?i:Zye,ae=(s=b==null?void 0:b.paper)!=null?s:U7,ue=Nr({elementType:ae,externalSlotProps:U({},I,{style:Q?I.style:U({},I.style,{opacity:0})}),additionalProps:{elevation:m,ref:R},ownerState:z,className:Ue(X.paper,I==null?void 0:I.className)}),Ce=Nr({elementType:Oe,externalSlotProps:(E==null?void 0:E.root)||{},externalForwardedProps:F,additionalProps:{ref:n,slotProps:{backdrop:{invisible:!0}},container:ve,open:y},ownerState:z,className:Ue(X.root,f)}),{slotProps:pe}=Ce,ke=$e(Ce,Kye);return Z.jsx(Oe,U({},ke,!ld(Oe)&&{slotProps:pe,disableScrollLock:M},{children:Z.jsx(T,U({appear:!0,in:y,onEntering:ye,onExited:se,timeout:fe},N,{children:Z.jsx(ae,U({},ue,{children:h}))}))}))}),Jye=Qye;function e1e(t){return ot("MuiMenu",t)}it("MuiMenu",["root","paper","list"]);const t1e=["onEntering"],n1e=["autoFocus","children","className","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant","slots","slotProps"],r1e={vertical:"top",horizontal:"right"},i1e={vertical:"top",horizontal:"left"},s1e=t=>{const{classes:e}=t;return st({root:["root"],paper:["paper"],list:["list"]},e1e,e)},o1e=Se(Jye,{shouldForwardProp:t=>Li(t)||t==="classes",name:"MuiMenu",slot:"Root",overridesResolver:(t,e)=>e.root})({}),a1e=Se(U7,{name:"MuiMenu",slot:"Paper",overridesResolver:(t,e)=>e.paper})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),l1e=Se(F7,{name:"MuiMenu",slot:"List",overridesResolver:(t,e)=>e.list})({outline:0}),c1e=A.forwardRef(function(e,n){var r,i;const s=at({props:e,name:"MuiMenu"}),{autoFocus:o=!0,children:a,className:l,disableAutoFocusItem:c=!1,MenuListProps:u={},onClose:d,open:h,PaperProps:f={},PopoverClasses:p,transitionDuration:m="auto",TransitionProps:{onEntering:_}={},variant:y="selectedMenu",slots:x={},slotProps:b={}}=s,E=$e(s.TransitionProps,t1e),w=$e(s,n1e),T=ms(),C=T.direction==="rtl",P=U({},s,{autoFocus:o,disableAutoFocusItem:c,MenuListProps:u,onEntering:_,PaperProps:f,transitionDuration:m,TransitionProps:E,variant:y}),M=s1e(P),N=o&&!c&&h,F=A.useRef(null),I=(H,Q)=>{F.current&&F.current.adjustStyleForScrollbar(H,T),_&&_(H,Q)},k=H=>{H.key==="Tab"&&(H.preventDefault(),d&&d(H,"tabKeyDown"))};let R=-1;A.Children.map(a,(H,Q)=>{A.isValidElement(H)&&(H.props.disabled||(y==="selectedMenu"&&H.props.selected||R===-1)&&(R=Q))});const z=(r=x.paper)!=null?r:a1e,X=(i=b.paper)!=null?i:f,G=Nr({elementType:x.root,externalSlotProps:b.root,ownerState:P,className:[M.root,l]}),j=Nr({elementType:z,externalSlotProps:X,ownerState:P,className:M.paper});return Z.jsx(o1e,U({onClose:d,anchorOrigin:{vertical:"bottom",horizontal:C?"right":"left"},transformOrigin:C?r1e:i1e,slots:{paper:z,root:x.root},slotProps:{root:G,paper:j},open:h,ref:n,transitionDuration:m,TransitionProps:U({onEntering:I},E),ownerState:P},w,{classes:p,children:Z.jsx(l1e,U({onKeyDown:k,actions:F,autoFocus:o&&(R===-1||c),autoFocusItem:N,variant:y},u,{className:Ue(M.list,u.className),children:a}))}))}),u1e=c1e;function d1e(t){return ot("MuiMenuItem",t)}const h1e=it("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),x0=h1e,f1e=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],p1e=(t,e)=>{const{ownerState:n}=t;return[e.root,n.dense&&e.dense,n.divider&&e.divider,!n.disableGutters&&e.gutters]},m1e=t=>{const{disabled:e,dense:n,divider:r,disableGutters:i,selected:s,classes:o}=t,l=st({root:["root",n&&"dense",e&&"disabled",!i&&"gutters",r&&"divider",s&&"selected"]},d1e,o);return U({},o,l)},g1e=Se(da,{shouldForwardProp:t=>Li(t)||t==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:p1e})(({theme:t,ownerState:e})=>U({},t.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!e.disableGutters&&{paddingLeft:16,paddingRight:16},e.divider&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${x0.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:rn(t.palette.primary.main,t.palette.action.selectedOpacity),[`&.${x0.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:rn(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`&.${x0.selected}:hover`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:rn(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:rn(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${x0.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${x0.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},[`& + .${KU.root}`]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},[`& + .${KU.inset}`]:{marginLeft:52},[`& .${Rw.root}`]:{marginTop:0,marginBottom:0},[`& .${Rw.inset}`]:{paddingLeft:36},[`& .${sz.root}`]:{minWidth:36}},!e.dense&&{[t.breakpoints.up("sm")]:{minHeight:"auto"}},e.dense&&U({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2,{[`& .${sz.root} svg`]:{fontSize:"1.25rem"}}))),v1e=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:s="li",dense:o=!1,divider:a=!1,disableGutters:l=!1,focusVisibleClassName:c,role:u="menuitem",tabIndex:d,className:h}=r,f=$e(r,f1e),p=A.useContext(By),m=A.useMemo(()=>({dense:o||p.dense||!1,disableGutters:l}),[p.dense,o,l]),_=A.useRef(null);Os(()=>{i&&_.current&&_.current.focus()},[i]);const y=U({},r,{dense:m.dense,divider:a,disableGutters:l}),x=m1e(r),b=Fn(_,n);let E;return r.disabled||(E=d!==void 0?d:-1),Z.jsx(By.Provider,{value:m,children:Z.jsx(g1e,U({ref:b,role:u,tabIndex:E,component:s,focusVisibleClassName:Ue(x.focusVisible,c),className:Ue(x.root,h)},f,{ownerState:y,classes:x}))})}),$v=v1e;function y1e(t){return ot("MuiNativeSelect",t)}const _1e=it("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]),LN=_1e,b1e=["className","disabled","error","IconComponent","inputRef","variant"],x1e=t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:s,error:o}=t,a={select:["select",n,r&&"disabled",i&&"multiple",o&&"error"],icon:["icon",`icon${xe(n)}`,s&&"iconOpen",r&&"disabled"]};return st(a,y1e,e)},z7=({ownerState:t,theme:e})=>U({MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":U({},e.vars?{backgroundColor:`rgba(${e.vars.palette.common.onBackgroundChannel} / 0.05)`}:{backgroundColor:e.palette.mode==="light"?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)"},{borderRadius:0}),"&::-ms-expand":{display:"none"},[`&.${LN.disabled}`]:{cursor:"default"},"&[multiple]":{height:"auto"},"&:not([multiple]) option, &:not([multiple]) optgroup":{backgroundColor:(e.vars||e).palette.background.paper},"&&&":{paddingRight:24,minWidth:16}},t.variant==="filled"&&{"&&&":{paddingRight:32}},t.variant==="outlined"&&{borderRadius:(e.vars||e).shape.borderRadius,"&:focus":{borderRadius:(e.vars||e).shape.borderRadius},"&&&":{paddingRight:32}}),E1e=Se("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:Li,overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.select,e[n.variant],n.error&&e.error,{[`&.${LN.multiple}`]:e.multiple}]}})(z7),$7=({ownerState:t,theme:e})=>U({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:(e.vars||e).palette.action.active,[`&.${LN.disabled}`]:{color:(e.vars||e).palette.action.disabled}},t.open&&{transform:"rotate(180deg)"},t.variant==="filled"&&{right:7},t.variant==="outlined"&&{right:7}),w1e=Se("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${xe(n.variant)}`],n.open&&e.iconOpen]}})($7),T1e=A.forwardRef(function(e,n){const{className:r,disabled:i,error:s,IconComponent:o,inputRef:a,variant:l="standard"}=e,c=$e(e,b1e),u=U({},e,{disabled:i,variant:l,error:s}),d=x1e(u);return Z.jsxs(A.Fragment,{children:[Z.jsx(E1e,U({ownerState:u,className:Ue(d.select,r),disabled:i,ref:a||n},c)),e.multiple?null:Z.jsx(w1e,{as:o,ownerState:u,className:d.icon})]})}),S1e=T1e;var uz;const C1e=["children","classes","className","label","notched"],A1e=Se("fieldset",{shouldForwardProp:Li})({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),R1e=Se("legend",{shouldForwardProp:Li})(({ownerState:t,theme:e})=>U({float:"unset",width:"auto",overflow:"hidden"},!t.withLabel&&{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},t.withLabel&&U({display:"block",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block",opacity:0,visibility:"visible"}},t.notched&&{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})})));function P1e(t){const{className:e,label:n,notched:r}=t,i=$e(t,C1e),s=n!=null&&n!=="",o=U({},t,{notched:r,withLabel:s});return Z.jsx(A1e,U({"aria-hidden":!0,className:e,ownerState:o},i,{children:Z.jsx(R1e,{ownerState:o,children:s?Z.jsx("span",{children:n}):uz||(uz=Z.jsx("span",{className:"notranslate",children:""}))})}))}const I1e=["components","fullWidth","inputComponent","label","multiline","notched","slots","type"],M1e=t=>{const{classes:e}=t,r=st({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Rme,e);return U({},e,r)},L1e=Se(US,{shouldForwardProp:t=>Li(t)||t==="classes",name:"MuiOutlinedInput",slot:"Root",overridesResolver:BS})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return U({position:"relative",borderRadius:(t.vars||t).shape.borderRadius,[`&:hover .${hu.notchedOutline}`]:{borderColor:(t.vars||t).palette.text.primary},"@media (hover: none)":{[`&:hover .${hu.notchedOutline}`]:{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:n}},[`&.${hu.focused} .${hu.notchedOutline}`]:{borderColor:(t.vars||t).palette[e.color].main,borderWidth:2},[`&.${hu.error} .${hu.notchedOutline}`]:{borderColor:(t.vars||t).palette.error.main},[`&.${hu.disabled} .${hu.notchedOutline}`]:{borderColor:(t.vars||t).palette.action.disabled}},e.startAdornment&&{paddingLeft:14},e.endAdornment&&{paddingRight:14},e.multiline&&U({padding:"16.5px 14px"},e.size==="small"&&{padding:"8.5px 14px"}))}),O1e=Se(P1e,{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:(t,e)=>e.notchedOutline})(({theme:t})=>{const e=t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return{borderColor:t.vars?`rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:e}}),k1e=Se(zS,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:FS})(({theme:t,ownerState:e})=>U({padding:"16.5px 14px"},!t.vars&&{"&:-webkit-autofill":{WebkitBoxShadow:t.palette.mode==="light"?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:t.palette.mode==="light"?null:"#fff",caretColor:t.palette.mode==="light"?null:"#fff",borderRadius:"inherit"}},t.vars&&{"&:-webkit-autofill":{borderRadius:"inherit"},[t.getColorSchemeSelector("dark")]:{"&:-webkit-autofill":{WebkitBoxShadow:"0 0 0 100px #266798 inset",WebkitTextFillColor:"#fff",caretColor:"#fff"}}},e.size==="small"&&{padding:"8.5px 14px"},e.multiline&&{padding:0},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0})),j7=A.forwardRef(function(e,n){var r,i,s,o,a;const l=at({props:e,name:"MuiOutlinedInput"}),{components:c={},fullWidth:u=!1,inputComponent:d="input",label:h,multiline:f=!1,notched:p,slots:m={},type:_="text"}=l,y=$e(l,I1e),x=M1e(l),b=Kc(),E=Bd({props:l,muiFormControl:b,states:["color","disabled","error","focused","hiddenLabel","size","required"]}),w=U({},l,{color:E.color||"primary",disabled:E.disabled,error:E.error,focused:E.focused,formControl:b,fullWidth:u,hiddenLabel:E.hiddenLabel,multiline:f,size:E.size,type:_}),T=(r=(i=m.root)!=null?i:c.Root)!=null?r:L1e,C=(s=(o=m.input)!=null?o:c.Input)!=null?s:k1e;return Z.jsx(AN,U({slots:{root:T,input:C},renderSuffix:P=>Z.jsx(O1e,{ownerState:w,className:x.notchedOutline,label:h!=null&&h!==""&&E.required?a||(a=Z.jsxs(A.Fragment,{children:[h,"","*"]})):h,notched:typeof p<"u"?p:!!(P.startAdornment||P.filled||P.focused)}),fullWidth:u,inputComponent:d,multiline:f,ref:n,type:_},y,{classes:U({},x,{notchedOutline:null})}))});j7.muiName="Input";const G7=j7,N1e=lt(Z.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),D1e=lt(Z.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),B1e=Se("span",{shouldForwardProp:Li})({position:"relative",display:"flex"}),F1e=Se(N1e)({transform:"scale(1)"}),U1e=Se(D1e)(({theme:t,ownerState:e})=>U({left:0,position:"absolute",transform:"scale(0)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeIn,duration:t.transitions.duration.shortest})},e.checked&&{transform:"scale(1)",transition:t.transitions.create("transform",{easing:t.transitions.easing.easeOut,duration:t.transitions.duration.shortest})}));function H7(t){const{checked:e=!1,classes:n={},fontSize:r}=t,i=U({},t,{checked:e});return Z.jsxs(B1e,{className:n.root,ownerState:i,children:[Z.jsx(F1e,{fontSize:r,className:n.background,ownerState:i}),Z.jsx(U1e,{fontSize:r,className:n.dot,ownerState:i})]})}const z1e=A.createContext(void 0),V7=z1e;function $1e(){return A.useContext(V7)}function j1e(t){return ot("MuiRadio",t)}const dz=it("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),G1e=["checked","checkedIcon","color","icon","name","onChange","size","className"],H1e=t=>{const{classes:e,color:n,size:r}=t,i={root:["root",`color${xe(n)}`,r!=="medium"&&`size${xe(r)}`]};return U({},e,st(i,j1e,e))},V1e=Se(T7,{shouldForwardProp:t=>Li(t)||t==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.size!=="medium"&&e[`size${xe(n.size)}`],e[`color${xe(n.color)}`]]}})(({theme:t,ownerState:e})=>U({color:(t.vars||t).palette.text.secondary},!e.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${e.color==="default"?t.vars.palette.action.activeChannel:t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:rn(e.color==="default"?t.palette.action.active:t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.color!=="default"&&{[`&.${dz.checked}`]:{color:(t.vars||t).palette[e.color].main}},{[`&.${dz.disabled}`]:{color:(t.vars||t).palette.action.disabled}}));function W1e(t,e){return typeof e=="object"&&e!==null?t===e:String(t)===String(e)}const hz=Z.jsx(H7,{checked:!0}),fz=Z.jsx(H7,{}),X1e=A.forwardRef(function(e,n){var r,i;const s=at({props:e,name:"MuiRadio"}),{checked:o,checkedIcon:a=hz,color:l="primary",icon:c=fz,name:u,onChange:d,size:h="medium",className:f}=s,p=$e(s,G1e),m=U({},s,{color:l,size:h}),_=H1e(m),y=$1e();let x=o;const b=bw(d,y&&y.onChange);let E=u;return y&&(typeof x>"u"&&(x=W1e(y.value,s.value)),typeof E>"u"&&(E=y.name)),Z.jsx(V1e,U({type:"radio",icon:A.cloneElement(c,{fontSize:(r=fz.props.fontSize)!=null?r:h}),checkedIcon:A.cloneElement(a,{fontSize:(i=hz.props.fontSize)!=null?i:h}),ownerState:m,classes:_,name:E,checked:x,onChange:b,ref:n,className:Ue(_.root,f)},p))}),Y1e=X1e,K1e=["actions","children","defaultValue","name","onChange","value"],q1e=A.forwardRef(function(e,n){const{actions:r,children:i,defaultValue:s,name:o,onChange:a,value:l}=e,c=$e(e,K1e),u=A.useRef(null),[d,h]=xd({controlled:l,default:s,name:"RadioGroup"});A.useImperativeHandle(r,()=>({focus:()=>{let _=u.current.querySelector("input:not(:disabled):checked");_||(_=u.current.querySelector("input:not(:disabled)")),_&&_.focus()}}),[]);const f=Fn(n,u),p=kd(o),m=A.useMemo(()=>({name:p,onChange(_){h(_.target.value),a&&a(_,_.target.value)},value:d}),[p,a,h,d]);return Z.jsx(V7.Provider,{value:m,children:Z.jsx(M7,U({role:"radiogroup",ref:f},c,{children:i}))})}),Z1e=q1e;function Q1e(t){return ot("MuiSelect",t)}const E0=it("MuiSelect",["root","select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput","error"]);var pz;const J1e=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","error","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],e_e=Se("div",{name:"MuiSelect",slot:"Select",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`&.${E0.select}`]:e.select},{[`&.${E0.select}`]:e[n.variant]},{[`&.${E0.error}`]:e.error},{[`&.${E0.multiple}`]:e.multiple}]}})(z7,{[`&.${E0.select}`]:{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"}}),t_e=Se("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.icon,n.variant&&e[`icon${xe(n.variant)}`],n.open&&e.iconOpen]}})($7),n_e=Se("input",{shouldForwardProp:t=>pN(t)&&t!=="classes",name:"MuiSelect",slot:"NativeInput",overridesResolver:(t,e)=>e.nativeInput})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function mz(t,e){return typeof e=="object"&&e!==null?t===e:String(t)===String(e)}function r_e(t){return t==null||typeof t=="string"&&!t.trim()}const i_e=t=>{const{classes:e,variant:n,disabled:r,multiple:i,open:s,error:o}=t,a={select:["select",n,r&&"disabled",i&&"multiple",o&&"error"],icon:["icon",`icon${xe(n)}`,s&&"iconOpen",r&&"disabled"],nativeInput:["nativeInput"]};return st(a,Q1e,e)},s_e=A.forwardRef(function(e,n){var r;const{"aria-describedby":i,"aria-label":s,autoFocus:o,autoWidth:a,children:l,className:c,defaultOpen:u,defaultValue:d,disabled:h,displayEmpty:f,error:p=!1,IconComponent:m,inputRef:_,labelId:y,MenuProps:x={},multiple:b,name:E,onBlur:w,onChange:T,onClose:C,onFocus:P,onOpen:M,open:N,readOnly:F,renderValue:I,SelectDisplayProps:k={},tabIndex:R,value:z,variant:X="standard"}=e,G=$e(e,J1e),[j,H]=xd({controlled:z,default:d,name:"Select"}),[Q,V]=xd({controlled:N,default:u,name:"Select"}),ee=A.useRef(null),ye=A.useRef(null),[se,fe]=A.useState(null),{current:ve}=A.useRef(N!=null),[Oe,ae]=A.useState(),ue=Fn(n,_),Ce=A.useCallback(Ie=>{ye.current=Ie,Ie&&fe(Ie)},[]),pe=se==null?void 0:se.parentNode;A.useImperativeHandle(ue,()=>({focus:()=>{ye.current.focus()},node:ee.current,value:j}),[j]),A.useEffect(()=>{u&&Q&&se&&!ve&&(ae(a?null:pe.clientWidth),ye.current.focus())},[se,a]),A.useEffect(()=>{o&&ye.current.focus()},[o]),A.useEffect(()=>{if(!y)return;const Ie=tr(ye.current).getElementById(y);if(Ie){const It=()=>{getSelection().isCollapsed&&ye.current.focus()};return Ie.addEventListener("click",It),()=>{Ie.removeEventListener("click",It)}}},[y]);const ke=(Ie,It)=>{Ie?M&&M(It):C&&C(It),ve||(ae(a?null:pe.clientWidth),V(Ie))},Re=Ie=>{Ie.button===0&&(Ie.preventDefault(),ye.current.focus(),ke(!0,Ie))},B=Ie=>{ke(!1,Ie)},oe=A.Children.toArray(l),ie=Ie=>{const It=oe.find(Ve=>Ve.props.value===Ie.target.value);It!==void 0&&(H(It.props.value),T&&T(Ie,It))},q=Ie=>It=>{let Ve;if(It.currentTarget.hasAttribute("tabindex")){if(b){Ve=Array.isArray(j)?j.slice():[];const Ye=j.indexOf(Ie.props.value);Ye===-1?Ve.push(Ie.props.value):Ve.splice(Ye,1)}else Ve=Ie.props.value;if(Ie.props.onClick&&Ie.props.onClick(It),j!==Ve&&(H(Ve),T)){const Ye=It.nativeEvent||It,ft=new Ye.constructor(Ye.type,Ye);Object.defineProperty(ft,"target",{writable:!0,value:{value:Ve,name:E}}),T(ft,Ie)}b||ke(!1,It)}},Y=Ie=>{F||[" ","ArrowUp","ArrowDown","Enter"].indexOf(Ie.key)!==-1&&(Ie.preventDefault(),ke(!0,Ie))},ne=se!==null&&Q,me=Ie=>{!ne&&w&&(Object.defineProperty(Ie,"target",{writable:!0,value:{value:j,name:E}}),w(Ie))};delete G["aria-invalid"];let he,de;const Ae=[];let De=!1;(Cw({value:j})||f)&&(I?he=I(j):De=!0);const Be=oe.map(Ie=>{if(!A.isValidElement(Ie))return null;let It;if(b){if(!Array.isArray(j))throw new Error(bd(2));It=j.some(Ve=>mz(Ve,Ie.props.value)),It&&De&&Ae.push(Ie.props.children)}else It=mz(j,Ie.props.value),It&&De&&(de=Ie.props.children);return A.cloneElement(Ie,{"aria-selected":It?"true":"false",onClick:q(Ie),onKeyUp:Ve=>{Ve.key===" "&&Ve.preventDefault(),Ie.props.onKeyUp&&Ie.props.onKeyUp(Ve)},role:"option",selected:It,value:void 0,"data-value":Ie.props.value})});De&&(b?Ae.length===0?he=null:he=Ae.reduce((Ie,It,Ve)=>(Ie.push(It),Ve<Ae.length-1&&Ie.push(", "),Ie),[]):he=de);let tt=Oe;!a&&ve&&se&&(tt=pe.clientWidth);let St;typeof R<"u"?St=R:St=h?null:0;const be=k.id||(E?`mui-component-select-${E}`:void 0),we=U({},e,{variant:X,value:j,open:ne,error:p}),qe=i_e(we),gt=U({},x.PaperProps,(r=x.slotProps)==null?void 0:r.paper),Bt=kd();return Z.jsxs(A.Fragment,{children:[Z.jsx(e_e,U({ref:Ce,tabIndex:St,role:"combobox","aria-controls":Bt,"aria-disabled":h?"true":void 0,"aria-expanded":ne?"true":"false","aria-haspopup":"listbox","aria-label":s,"aria-labelledby":[y,be].filter(Boolean).join(" ")||void 0,"aria-describedby":i,onKeyDown:Y,onMouseDown:h||F?null:Re,onBlur:me,onFocus:P},k,{ownerState:we,className:Ue(k.className,qe.select,c),id:be,children:r_e(he)?pz||(pz=Z.jsx("span",{className:"notranslate",children:""})):he})),Z.jsx(n_e,U({"aria-invalid":p,value:Array.isArray(j)?j.join(","):j,name:E,ref:ee,"aria-hidden":!0,onChange:ie,tabIndex:-1,disabled:h,className:qe.nativeInput,autoFocus:o,ownerState:we},G)),Z.jsx(t_e,{as:m,className:qe.icon,ownerState:we}),Z.jsx(u1e,U({id:`menu-${E||""}`,anchorEl:pe,open:ne,onClose:B,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},x,{MenuListProps:U({"aria-labelledby":y,role:"listbox","aria-multiselectable":b?"true":void 0,disableListWrap:!0,id:Bt},x.MenuListProps),slotProps:U({},x.slotProps,{paper:U({},gt,{style:U({minWidth:tt},gt!=null?gt.style:null)})}),children:Be}))]})}),o_e=s_e,a_e=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],l_e=["root"],c_e=t=>{const{classes:e}=t;return e},ON={name:"MuiSelect",overridesResolver:(t,e)=>e.root,shouldForwardProp:t=>Li(t)&&t!=="variant",slot:"Root"},u_e=Se(N7,ON)(""),d_e=Se(G7,ON)(""),h_e=Se(P7,ON)(""),W7=A.forwardRef(function(e,n){const r=at({name:"MuiSelect",props:e}),{autoWidth:i=!1,children:s,classes:o={},className:a,defaultOpen:l=!1,displayEmpty:c=!1,IconComponent:u=Lme,id:d,input:h,inputProps:f,label:p,labelId:m,MenuProps:_,multiple:y=!1,native:x=!1,onClose:b,onOpen:E,open:w,renderValue:T,SelectDisplayProps:C,variant:P="outlined"}=r,M=$e(r,a_e),N=x?S1e:o_e,F=Kc(),I=Bd({props:r,muiFormControl:F,states:["variant","error"]}),k=I.variant||P,R=U({},r,{variant:k,classes:o}),z=c_e(R),X=$e(z,l_e),G=h||{standard:Z.jsx(u_e,{ownerState:R}),outlined:Z.jsx(d_e,{label:p,ownerState:R}),filled:Z.jsx(h_e,{ownerState:R})}[k],j=Fn(n,G.ref);return Z.jsx(A.Fragment,{children:A.cloneElement(G,U({inputComponent:N,inputProps:U({children:s,error:I.error,IconComponent:u,variant:k,type:void 0,multiple:y},x?{id:d}:{autoWidth:i,defaultOpen:l,displayEmpty:c,labelId:m,MenuProps:_,onClose:b,onOpen:E,open:w,renderValue:T,SelectDisplayProps:U({id:d},C)},f,{classes:f?Ys(X,f.classes):X},h?h.props.inputProps:{})},(y&&x||c)&&k==="outlined"?{notched:!0}:{},{ref:j,className:Ue(G.props.className,a,z.root)},!h&&{variant:k},M))})});W7.muiName="Select";const kN=W7,f_e=t=>!t||!ld(t);function p_e(t){return ot("MuiSlider",t)}const Ba=it("MuiSlider",["root","active","colorPrimary","colorSecondary","colorError","colorInfo","colorSuccess","colorWarning","disabled","dragging","focusVisible","mark","markActive","marked","markLabel","markLabelActive","rail","sizeSmall","thumb","thumbColorPrimary","thumbColorSecondary","thumbColorError","thumbColorSuccess","thumbColorInfo","thumbColorWarning","track","trackInverted","trackFalse","thumbSizeSmall","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel","vertical"]),m_e=t=>{const{open:e}=t;return{offset:Ue(e&&Ba.valueLabelOpen),circle:Ba.valueLabelCircle,label:Ba.valueLabelLabel}};function g_e(t){const{children:e,className:n,value:r}=t,i=m_e(t);return e?A.cloneElement(e,{className:Ue(e.props.className)},Z.jsxs(A.Fragment,{children:[e.props.children,Z.jsx("span",{className:Ue(i.offset,n),"aria-hidden":!0,children:Z.jsx("span",{className:i.circle,children:Z.jsx("span",{className:i.label,children:r})})})]})):null}const v_e=["aria-label","aria-valuetext","aria-labelledby","component","components","componentsProps","color","classes","className","disableSwap","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","orientation","shiftStep","size","step","scale","slotProps","slots","tabIndex","track","value","valueLabelDisplay","valueLabelFormat"];function gz(t){return t}const y_e=Se("span",{name:"MuiSlider",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`color${xe(n.color)}`],n.size!=="medium"&&e[`size${xe(n.size)}`],n.marked&&e.marked,n.orientation==="vertical"&&e.vertical,n.track==="inverted"&&e.trackInverted,n.track===!1&&e.trackFalse]}})(({theme:t,ownerState:e})=>U({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",color:(t.vars||t).palette[e.color].main,WebkitTapHighlightColor:"transparent"},e.orientation==="horizontal"&&U({height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}},e.size==="small"&&{height:2},e.marked&&{marginBottom:20}),e.orientation==="vertical"&&U({height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}},e.size==="small"&&{width:2},e.marked&&{marginRight:44}),{"@media print":{colorAdjust:"exact"},[`&.${Ba.disabled}`]:{pointerEvents:"none",cursor:"default",color:(t.vars||t).palette.grey[400]},[`&.${Ba.dragging}`]:{[`& .${Ba.thumb}, & .${Ba.track}`]:{transition:"none"}}})),__e=Se("span",{name:"MuiSlider",slot:"Rail",overridesResolver:(t,e)=>e.rail})(({ownerState:t})=>U({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38},t.orientation==="horizontal"&&{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"},t.orientation==="vertical"&&{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"},t.track==="inverted"&&{opacity:1})),b_e=Se("span",{name:"MuiSlider",slot:"Track",overridesResolver:(t,e)=>e.track})(({theme:t,ownerState:e})=>{const n=t.palette.mode==="light"?yf(t.palette[e.color].main,.62):vf(t.palette[e.color].main,.5);return U({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:t.transitions.create(["left","width","bottom","height"],{duration:t.transitions.duration.shortest})},e.size==="small"&&{border:"none"},e.orientation==="horizontal"&&{height:"inherit",top:"50%",transform:"translateY(-50%)"},e.orientation==="vertical"&&{width:"inherit",left:"50%",transform:"translateX(-50%)"},e.track===!1&&{display:"none"},e.track==="inverted"&&{backgroundColor:t.vars?t.vars.palette.Slider[`${e.color}Track`]:n,borderColor:t.vars?t.vars.palette.Slider[`${e.color}Track`]:n})}),x_e=Se("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.thumb,e[`thumbColor${xe(n.color)}`],n.size!=="medium"&&e[`thumbSize${xe(n.size)}`]]}})(({theme:t,ownerState:e})=>U({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:t.transitions.create(["box-shadow","left","bottom"],{duration:t.transitions.duration.shortest})},e.size==="small"&&{width:12,height:12},e.orientation==="horizontal"&&{top:"50%",transform:"translate(-50%, -50%)"},e.orientation==="vertical"&&{left:"50%",transform:"translate(-50%, 50%)"},{"&::before":U({position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:(t.vars||t).shadows[2]},e.size==="small"&&{boxShadow:"none"}),"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},[`&:hover, &.${Ba.focusVisible}`]:{boxShadow:`0px 0px 0px 8px ${t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.16)`:rn(t.palette[e.color].main,.16)}`,"@media (hover: none)":{boxShadow:"none"}},[`&.${Ba.active}`]:{boxShadow:`0px 0px 0px 14px ${t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.16)`:rn(t.palette[e.color].main,.16)}`},[`&.${Ba.disabled}`]:{"&:hover":{boxShadow:"none"}}})),E_e=Se(g_e,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:(t,e)=>e.valueLabel})(({theme:t,ownerState:e})=>U({[`&.${Ba.valueLabelOpen}`]:{transform:`${e.orientation==="vertical"?"translateY(-50%)":"translateY(-100%)"} scale(1)`},zIndex:1,whiteSpace:"nowrap"},t.typography.body2,{fontWeight:500,transition:t.transitions.create(["transform"],{duration:t.transitions.duration.shortest}),transform:`${e.orientation==="vertical"?"translateY(-50%)":"translateY(-100%)"} scale(0)`,position:"absolute",backgroundColor:(t.vars||t).palette.grey[600],borderRadius:2,color:(t.vars||t).palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem"},e.orientation==="horizontal"&&{top:"-10px",transformOrigin:"bottom center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit",bottom:0,left:"50%"}},e.orientation==="vertical"&&{right:e.size==="small"?"20px":"30px",top:"50%",transformOrigin:"right center","&::before":{position:"absolute",content:'""',width:8,height:8,transform:"translate(-50%, -50%) rotate(45deg)",backgroundColor:"inherit",right:-8,top:"50%"}},e.size==="small"&&{fontSize:t.typography.pxToRem(12),padding:"0.25rem 0.5rem"})),w_e=Se("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:t=>pN(t)&&t!=="markActive",overridesResolver:(t,e)=>{const{markActive:n}=t;return[e.mark,n&&e.markActive]}})(({theme:t,ownerState:e,markActive:n})=>U({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor"},e.orientation==="horizontal"&&{top:"50%",transform:"translate(-1px, -50%)"},e.orientation==="vertical"&&{left:"50%",transform:"translate(-50%, 1px)"},n&&{backgroundColor:(t.vars||t).palette.background.paper,opacity:.8})),T_e=Se("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:t=>pN(t)&&t!=="markLabelActive",overridesResolver:(t,e)=>e.markLabel})(({theme:t,ownerState:e,markLabelActive:n})=>U({},t.typography.body2,{color:(t.vars||t).palette.text.secondary,position:"absolute",whiteSpace:"nowrap"},e.orientation==="horizontal"&&{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}},e.orientation==="vertical"&&{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}},n&&{color:(t.vars||t).palette.text.primary})),S_e=t=>{const{disabled:e,dragging:n,marked:r,orientation:i,track:s,classes:o,color:a,size:l}=t,c={root:["root",e&&"disabled",n&&"dragging",r&&"marked",i==="vertical"&&"vertical",s==="inverted"&&"trackInverted",s===!1&&"trackFalse",a&&`color${xe(a)}`,l&&`size${xe(l)}`],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",e&&"disabled",l&&`thumbSize${xe(l)}`,a&&`thumbColor${xe(a)}`],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return st(c,p_e,o)},C_e=({children:t})=>t,A_e=A.forwardRef(function(e,n){var r,i,s,o,a,l,c,u,d,h,f,p,m,_,y,x,b,E,w,T,C,P,M,N;const F=at({props:e,name:"MuiSlider"}),k=ms().direction==="rtl",{"aria-label":R,"aria-valuetext":z,"aria-labelledby":X,component:G="span",components:j={},componentsProps:H={},color:Q="primary",classes:V,className:ee,disableSwap:ye=!1,disabled:se=!1,getAriaLabel:fe,getAriaValueText:ve,marks:Oe=!1,max:ae=100,min:ue=0,orientation:Ce="horizontal",shiftStep:pe=10,size:ke="medium",step:Re=1,scale:B=gz,slotProps:oe,slots:ie,track:q="normal",valueLabelDisplay:Y="off",valueLabelFormat:ne=gz}=F,me=$e(F,v_e),he=U({},F,{isRtl:k,max:ae,min:ue,classes:V,disabled:se,disableSwap:ye,orientation:Ce,marks:Oe,color:Q,size:ke,step:Re,shiftStep:pe,scale:B,track:q,valueLabelDisplay:Y,valueLabelFormat:ne}),{axisProps:de,getRootProps:Ae,getHiddenInputProps:De,getThumbProps:Be,open:tt,active:St,axis:be,focusedThumbIndex:we,range:qe,dragging:gt,marks:Bt,values:Ie,trackOffset:It,trackLeap:Ve,getThumbStyle:Ye}=nme(U({},he,{rootRef:n}));he.marked=Bt.length>0&&Bt.some(un=>un.label),he.dragging=gt,he.focusedThumbIndex=we;const ft=S_e(he),kt=(r=(i=ie==null?void 0:ie.root)!=null?i:j.Root)!=null?r:y_e,vn=(s=(o=ie==null?void 0:ie.rail)!=null?o:j.Rail)!=null?s:__e,zn=(a=(l=ie==null?void 0:ie.track)!=null?l:j.Track)!=null?a:b_e,Kn=(c=(u=ie==null?void 0:ie.thumb)!=null?u:j.Thumb)!=null?c:x_e,ur=(d=(h=ie==null?void 0:ie.valueLabel)!=null?h:j.ValueLabel)!=null?d:E_e,le=(f=(p=ie==null?void 0:ie.mark)!=null?p:j.Mark)!=null?f:w_e,_e=(m=(_=ie==null?void 0:ie.markLabel)!=null?_:j.MarkLabel)!=null?m:T_e,Me=(y=(x=ie==null?void 0:ie.input)!=null?x:j.Input)!=null?y:"input",et=(b=oe==null?void 0:oe.root)!=null?b:H.root,ct=(E=oe==null?void 0:oe.rail)!=null?E:H.rail,jt=(w=oe==null?void 0:oe.track)!=null?w:H.track,Pt=(T=oe==null?void 0:oe.thumb)!=null?T:H.thumb,Ct=(C=oe==null?void 0:oe.valueLabel)!=null?C:H.valueLabel,vt=(P=oe==null?void 0:oe.mark)!=null?P:H.mark,Jt=(M=oe==null?void 0:oe.markLabel)!=null?M:H.markLabel,Sn=(N=oe==null?void 0:oe.input)!=null?N:H.input,Nt=Nr({elementType:kt,getSlotProps:Ae,externalSlotProps:et,externalForwardedProps:me,additionalProps:U({},f_e(kt)&&{as:G}),ownerState:U({},he,et==null?void 0:et.ownerState),className:[ft.root,ee]}),Kt=Nr({elementType:vn,externalSlotProps:ct,ownerState:he,className:ft.rail}),Nn=Nr({elementType:zn,externalSlotProps:jt,additionalProps:{style:U({},de[be].offset(It),de[be].leap(Ve))},ownerState:U({},he,jt==null?void 0:jt.ownerState),className:ft.track}),qn=Nr({elementType:Kn,getSlotProps:Be,externalSlotProps:Pt,ownerState:U({},he,Pt==null?void 0:Pt.ownerState),className:ft.thumb}),Mn=Nr({elementType:ur,externalSlotProps:Ct,ownerState:U({},he,Ct==null?void 0:Ct.ownerState),className:ft.valueLabel}),ti=Nr({elementType:le,externalSlotProps:vt,ownerState:he,className:ft.mark}),gs=Nr({elementType:_e,externalSlotProps:Jt,ownerState:he,className:ft.markLabel}),Zi=Nr({elementType:Me,getSlotProps:De,externalSlotProps:Sn,ownerState:he});return Z.jsxs(kt,U({},Nt,{children:[Z.jsx(vn,U({},Kt)),Z.jsx(zn,U({},Nn)),Bt.filter(un=>un.value>=ue&&un.value<=ae).map((un,yn)=>{const ni=Sw(un.value,ue,ae),gi=de[be].offset(ni);let _r;return q===!1?_r=Ie.indexOf(un.value)!==-1:_r=q==="normal"&&(qe?un.value>=Ie[0]&&un.value<=Ie[Ie.length-1]:un.value<=Ie[0])||q==="inverted"&&(qe?un.value<=Ie[0]||un.value>=Ie[Ie.length-1]:un.value>=Ie[0]),Z.jsxs(A.Fragment,{children:[Z.jsx(le,U({"data-index":yn},ti,!ld(le)&&{markActive:_r},{style:U({},gi,ti.style),className:Ue(ti.className,_r&&ft.markActive)})),un.label!=null?Z.jsx(_e,U({"aria-hidden":!0,"data-index":yn},gs,!ld(_e)&&{markLabelActive:_r},{style:U({},gi,gs.style),className:Ue(ft.markLabel,gs.className,_r&&ft.markLabelActive),children:un.label})):null]},yn)}),Ie.map((un,yn)=>{const ni=Sw(un,ue,ae),gi=de[be].offset(ni),_r=Y==="off"?C_e:ur;return Z.jsx(_r,U({},!ld(_r)&&{valueLabelFormat:ne,valueLabelDisplay:Y,value:typeof ne=="function"?ne(B(un),yn):ne,index:yn,open:tt===yn||St===yn||Y==="on",disabled:se},Mn,{children:Z.jsx(Kn,U({"data-index":yn},qn,{className:Ue(ft.thumb,qn.className,St===yn&&ft.active,we===yn&&ft.focusVisible),style:U({},gi,Ye(yn),qn.style),children:Z.jsx(Me,U({"data-index":yn,"aria-label":fe?fe(yn):R,"aria-valuenow":B(un),"aria-labelledby":X,"aria-valuetext":ve?ve(B(un),yn):z,value:Ie[yn]},Zi))}))}),yn)})]}))}),O1=A_e,R_e=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],P_e={entering:{transform:"none"},entered:{transform:"none"}},I_e=A.forwardRef(function(e,n){const r=ms(),i={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:s,appear:o=!0,children:a,easing:l,in:c,onEnter:u,onEntered:d,onEntering:h,onExit:f,onExited:p,onExiting:m,style:_,timeout:y=i,TransitionComponent:x=kS}=e,b=$e(e,R_e),E=A.useRef(null),w=Fn(E,a.ref,n),T=R=>z=>{if(R){const X=E.current;z===void 0?R(X):R(X,z)}},C=T(h),P=T((R,z)=>{vN(R);const X=Ed({style:_,timeout:y,easing:l},{mode:"enter"});R.style.webkitTransition=r.transitions.create("transform",X),R.style.transition=r.transitions.create("transform",X),u&&u(R,z)}),M=T(d),N=T(m),F=T(R=>{const z=Ed({style:_,timeout:y,easing:l},{mode:"exit"});R.style.webkitTransition=r.transitions.create("transform",z),R.style.transition=r.transitions.create("transform",z),f&&f(R)}),I=T(p),k=R=>{s&&s(E.current,R)};return Z.jsx(x,U({appear:o,in:c,nodeRef:E,onEnter:P,onEntered:M,onEntering:C,onExit:F,onExited:I,onExiting:N,addEndListener:k,timeout:y},b,{children:(R,z)=>A.cloneElement(a,U({style:U({transform:"scale(0)",visibility:R==="exited"&&!c?"hidden":void 0},P_e[R],_,a.props.style),ref:w},z))}))}),M_e=I_e;function L_e(t){return ot("MuiSpeedDial",t)}const O_e=it("MuiSpeedDial",["root","fab","directionUp","directionDown","directionLeft","directionRight","actions","actionsClosed"]),Nb=O_e,k_e=["ref"],N_e=["ariaLabel","FabProps","children","className","direction","hidden","icon","onBlur","onClose","onFocus","onKeyDown","onMouseEnter","onMouseLeave","onOpen","open","openIcon","TransitionComponent","transitionDuration","TransitionProps"],D_e=["ref"],B_e=t=>{const{classes:e,open:n,direction:r}=t,i={root:["root",`direction${xe(r)}`],fab:["fab"],actions:["actions",!n&&"actionsClosed"]};return st(i,L_e,e)};function w0(t){if(t==="up"||t==="down")return"vertical";if(t==="right"||t==="left")return"horizontal"}const mu=32,Db=16,F_e=Se("div",{name:"MuiSpeedDial",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`direction${xe(n.direction)}`]]}})(({theme:t,ownerState:e})=>U({zIndex:(t.vars||t).zIndex.speedDial,display:"flex",alignItems:"center",pointerEvents:"none"},e.direction==="up"&&{flexDirection:"column-reverse",[`& .${Nb.actions}`]:{flexDirection:"column-reverse",marginBottom:-mu,paddingBottom:Db+mu}},e.direction==="down"&&{flexDirection:"column",[`& .${Nb.actions}`]:{flexDirection:"column",marginTop:-mu,paddingTop:Db+mu}},e.direction==="left"&&{flexDirection:"row-reverse",[`& .${Nb.actions}`]:{flexDirection:"row-reverse",marginRight:-mu,paddingRight:Db+mu}},e.direction==="right"&&{flexDirection:"row",[`& .${Nb.actions}`]:{flexDirection:"row",marginLeft:-mu,paddingLeft:Db+mu}})),U_e=Se(A7,{name:"MuiSpeedDial",slot:"Fab",overridesResolver:(t,e)=>e.fab})(()=>({pointerEvents:"auto"})),z_e=Se("div",{name:"MuiSpeedDial",slot:"Actions",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.actions,!n.open&&e.actionsClosed]}})(({ownerState:t})=>U({display:"flex",pointerEvents:"auto"},!t.open&&{transition:"top 0s linear 0.2s",pointerEvents:"none"})),$_e=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiSpeedDial"}),i=ms(),s={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{ariaLabel:o,FabProps:{ref:a}={},children:l,className:c,direction:u="up",hidden:d=!1,icon:h,onBlur:f,onClose:p,onFocus:m,onKeyDown:_,onMouseEnter:y,onMouseLeave:x,onOpen:b,open:E,TransitionComponent:w=M_e,transitionDuration:T=s,TransitionProps:C}=r,P=$e(r.FabProps,k_e),M=$e(r,N_e),[N,F]=xd({controlled:E,default:!1,name:"SpeedDial",state:"open"}),I=U({},r,{open:N,direction:u}),k=B_e(I),R=Wu(),z=A.useRef(0),X=A.useRef(),G=A.useRef([]);G.current=[G.current[0]];const j=A.useCallback(ae=>{G.current[0]=ae},[]),H=Fn(a,j),Q=(ae,ue)=>Ce=>{G.current[ae+1]=Ce,ue&&ue(Ce)},V=ae=>{_&&_(ae);const ue=ae.key.replace("Arrow","").toLowerCase(),{current:Ce=ue}=X;if(ae.key==="Escape"){F(!1),G.current[0].focus(),p&&p(ae,"escapeKeyDown");return}if(w0(ue)===w0(Ce)&&w0(ue)!==void 0){ae.preventDefault();const pe=ue===Ce?1:-1,ke=xh(z.current+pe,0,G.current.length-1);G.current[ke].focus(),z.current=ke,X.current=Ce}};A.useEffect(()=>{N||(z.current=0,X.current=void 0)},[N]);const ee=ae=>{ae.type==="mouseleave"&&x&&x(ae),ae.type==="blur"&&f&&f(ae),R.clear(),ae.type==="blur"?R.start(0,()=>{F(!1),p&&p(ae,"blur")}):(F(!1),p&&p(ae,"mouseLeave"))},ye=ae=>{P.onClick&&P.onClick(ae),R.clear(),N?(F(!1),p&&p(ae,"toggle")):(F(!0),b&&b(ae,"toggle"))},se=ae=>{ae.type==="mouseenter"&&y&&y(ae),ae.type==="focus"&&m&&m(ae),R.clear(),N||R.start(0,()=>{F(!0),b&&b(ae,{focus:"focus",mouseenter:"mouseEnter"}[ae.type])})},fe=o.replace(/^[^a-z]+|[^\w:.-]+/gi,""),ve=A.Children.toArray(l).filter(ae=>A.isValidElement(ae)),Oe=ve.map((ae,ue)=>{const Ce=ae.props,{FabProps:{ref:pe}={},tooltipPlacement:ke}=Ce,Re=$e(Ce.FabProps,D_e),B=ke||(w0(u)==="vertical"?"left":"top");return A.cloneElement(ae,{FabProps:U({},Re,{ref:Q(ue,pe)}),delay:30*(N?ue:ve.length-ue),open:N,tooltipPlacement:B,id:`${fe}-action-${ue}`})});return Z.jsxs(F_e,U({className:Ue(k.root,c),ref:n,role:"presentation",onKeyDown:V,onBlur:ee,onFocus:se,onMouseEnter:se,onMouseLeave:ee,ownerState:I},M,{children:[Z.jsx(w,U({in:!d,timeout:T,unmountOnExit:!0},C,{children:Z.jsx(U_e,U({color:"primary","aria-label":o,"aria-haspopup":"true","aria-expanded":N,"aria-controls":`${fe}-actions`},P,{onClick:ye,className:Ue(k.fab,P.className),ref:H,ownerState:I,children:A.isValidElement(h)&&_m(h,["SpeedDialIcon"])?A.cloneElement(h,{open:N}):h}))})),Z.jsx(z_e,{id:`${fe}-actions`,role:"menu","aria-orientation":w0(u),className:Ue(k.actions,!N&&k.actionsClosed),ownerState:I,children:Oe})]}))}),X7=$_e;function j_e(t){return ot("MuiTooltip",t)}const G_e=it("MuiTooltip",["popper","popperInteractive","popperArrow","popperClose","tooltip","tooltipArrow","touch","tooltipPlacementLeft","tooltipPlacementRight","tooltipPlacementTop","tooltipPlacementBottom","arrow"]),Xu=G_e,H_e=["arrow","children","classes","components","componentsProps","describeChild","disableFocusListener","disableHoverListener","disableInteractive","disableTouchListener","enterDelay","enterNextDelay","enterTouchDelay","followCursor","id","leaveDelay","leaveTouchDelay","onClose","onOpen","open","placement","PopperComponent","PopperProps","slotProps","slots","title","TransitionComponent","TransitionProps"];function V_e(t){return Math.round(t*1e5)/1e5}const W_e=t=>{const{classes:e,disableInteractive:n,arrow:r,touch:i,placement:s}=t,o={popper:["popper",!n&&"popperInteractive",r&&"popperArrow"],tooltip:["tooltip",r&&"tooltipArrow",i&&"touch",`tooltipPlacement${xe(s.split("-")[0])}`],arrow:["arrow"]};return st(o,j_e,e)},X_e=Se(SN,{name:"MuiTooltip",slot:"Popper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.popper,!n.disableInteractive&&e.popperInteractive,n.arrow&&e.popperArrow,!n.open&&e.popperClose]}})(({theme:t,ownerState:e,open:n})=>U({zIndex:(t.vars||t).zIndex.tooltip,pointerEvents:"none"},!e.disableInteractive&&{pointerEvents:"auto"},!n&&{pointerEvents:"none"},e.arrow&&{[`&[data-popper-placement*="bottom"] .${Xu.arrow}`]:{top:0,marginTop:"-0.71em","&::before":{transformOrigin:"0 100%"}},[`&[data-popper-placement*="top"] .${Xu.arrow}`]:{bottom:0,marginBottom:"-0.71em","&::before":{transformOrigin:"100% 0"}},[`&[data-popper-placement*="right"] .${Xu.arrow}`]:U({},e.isRtl?{right:0,marginRight:"-0.71em"}:{left:0,marginLeft:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"100% 100%"}}),[`&[data-popper-placement*="left"] .${Xu.arrow}`]:U({},e.isRtl?{left:0,marginLeft:"-0.71em"}:{right:0,marginRight:"-0.71em"},{height:"1em",width:"0.71em","&::before":{transformOrigin:"0 0"}})})),Y_e=Se("div",{name:"MuiTooltip",slot:"Tooltip",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.tooltip,n.touch&&e.touch,n.arrow&&e.tooltipArrow,e[`tooltipPlacement${xe(n.placement.split("-")[0])}`]]}})(({theme:t,ownerState:e})=>U({backgroundColor:t.vars?t.vars.palette.Tooltip.bg:rn(t.palette.grey[700],.92),borderRadius:(t.vars||t).shape.borderRadius,color:(t.vars||t).palette.common.white,fontFamily:t.typography.fontFamily,padding:"4px 8px",fontSize:t.typography.pxToRem(11),maxWidth:300,margin:2,wordWrap:"break-word",fontWeight:t.typography.fontWeightMedium},e.arrow&&{position:"relative",margin:0},e.touch&&{padding:"8px 16px",fontSize:t.typography.pxToRem(14),lineHeight:`${V_e(16/14)}em`,fontWeight:t.typography.fontWeightRegular},{[`.${Xu.popper}[data-popper-placement*="left"] &`]:U({transformOrigin:"right center"},e.isRtl?U({marginLeft:"14px"},e.touch&&{marginLeft:"24px"}):U({marginRight:"14px"},e.touch&&{marginRight:"24px"})),[`.${Xu.popper}[data-popper-placement*="right"] &`]:U({transformOrigin:"left center"},e.isRtl?U({marginRight:"14px"},e.touch&&{marginRight:"24px"}):U({marginLeft:"14px"},e.touch&&{marginLeft:"24px"})),[`.${Xu.popper}[data-popper-placement*="top"] &`]:U({transformOrigin:"center bottom",marginBottom:"14px"},e.touch&&{marginBottom:"24px"}),[`.${Xu.popper}[data-popper-placement*="bottom"] &`]:U({transformOrigin:"center top",marginTop:"14px"},e.touch&&{marginTop:"24px"})})),K_e=Se("span",{name:"MuiTooltip",slot:"Arrow",overridesResolver:(t,e)=>e.arrow})(({theme:t})=>({overflow:"hidden",position:"absolute",width:"1em",height:"0.71em",boxSizing:"border-box",color:t.vars?t.vars.palette.Tooltip.bg:rn(t.palette.grey[700],.9),"&::before":{content:'""',margin:"auto",display:"block",width:"100%",height:"100%",backgroundColor:"currentColor",transform:"rotate(45deg)"}}));let Bb=!1;const vz=new A1;let T0={x:0,y:0};function Fb(t,e){return n=>{e&&e(n),t(n)}}const q_e=A.forwardRef(function(e,n){var r,i,s,o,a,l,c,u,d,h,f,p,m,_,y,x,b,E,w;const T=at({props:e,name:"MuiTooltip"}),{arrow:C=!1,children:P,components:M={},componentsProps:N={},describeChild:F=!1,disableFocusListener:I=!1,disableHoverListener:k=!1,disableInteractive:R=!1,disableTouchListener:z=!1,enterDelay:X=100,enterNextDelay:G=0,enterTouchDelay:j=700,followCursor:H=!1,id:Q,leaveDelay:V=0,leaveTouchDelay:ee=1500,onClose:ye,onOpen:se,open:fe,placement:ve="bottom",PopperComponent:Oe,PopperProps:ae={},slotProps:ue={},slots:Ce={},title:pe,TransitionComponent:ke=Aw,TransitionProps:Re}=T,B=$e(T,H_e),oe=A.isValidElement(P)?P:Z.jsx("span",{children:P}),ie=ms(),q=ie.direction==="rtl",[Y,ne]=A.useState(),[me,he]=A.useState(null),de=A.useRef(!1),Ae=R||H,De=Wu(),Be=Wu(),tt=Wu(),St=Wu(),[be,we]=xd({controlled:fe,default:!1,name:"Tooltip",state:"open"});let qe=be;const gt=kd(Q),Bt=A.useRef(),Ie=Vr(()=>{Bt.current!==void 0&&(document.body.style.WebkitUserSelect=Bt.current,Bt.current=void 0),St.clear()});A.useEffect(()=>Ie,[Ie]);const It=Xt=>{vz.clear(),Bb=!0,we(!0),se&&!qe&&se(Xt)},Ve=Vr(Xt=>{vz.start(800+V,()=>{Bb=!1}),we(!1),ye&&qe&&ye(Xt),De.start(ie.transitions.duration.shortest,()=>{de.current=!1})}),Ye=Xt=>{de.current&&Xt.type!=="touchstart"||(Y&&Y.removeAttribute("title"),Be.clear(),tt.clear(),X||Bb&&G?Be.start(Bb?G:X,()=>{It(Xt)}):It(Xt))},ft=Xt=>{Be.clear(),tt.start(V,()=>{Ve(Xt)})},{isFocusVisibleRef:kt,onBlur:vn,onFocus:zn,ref:Kn}=xS(),[,ur]=A.useState(!1),le=Xt=>{vn(Xt),kt.current===!1&&(ur(!1),ft(Xt))},_e=Xt=>{Y||ne(Xt.currentTarget),zn(Xt),kt.current===!0&&(ur(!0),Ye(Xt))},Me=Xt=>{de.current=!0;const Zt=oe.props;Zt.onTouchStart&&Zt.onTouchStart(Xt)},et=Ye,ct=ft,jt=Xt=>{Me(Xt),tt.clear(),De.clear(),Ie(),Bt.current=document.body.style.WebkitUserSelect,document.body.style.WebkitUserSelect="none",St.start(j,()=>{document.body.style.WebkitUserSelect=Bt.current,Ye(Xt)})},Pt=Xt=>{oe.props.onTouchEnd&&oe.props.onTouchEnd(Xt),Ie(),tt.start(ee,()=>{Ve(Xt)})};A.useEffect(()=>{if(!qe)return;function Xt(Zt){(Zt.key==="Escape"||Zt.key==="Esc")&&Ve(Zt)}return document.addEventListener("keydown",Xt),()=>{document.removeEventListener("keydown",Xt)}},[Ve,qe]);const Ct=Fn(oe.ref,Kn,ne,n);!pe&&pe!==0&&(qe=!1);const vt=A.useRef(),Jt=Xt=>{const Zt=oe.props;Zt.onMouseMove&&Zt.onMouseMove(Xt),T0={x:Xt.clientX,y:Xt.clientY},vt.current&&vt.current.update()},Sn={},Nt=typeof pe=="string";F?(Sn.title=!qe&&Nt&&!k?pe:null,Sn["aria-describedby"]=qe?gt:null):(Sn["aria-label"]=Nt?pe:null,Sn["aria-labelledby"]=qe&&!Nt?gt:null);const Kt=U({},Sn,B,oe.props,{className:Ue(B.className,oe.props.className),onTouchStart:Me,ref:Ct},H?{onMouseMove:Jt}:{}),Nn={};z||(Kt.onTouchStart=jt,Kt.onTouchEnd=Pt),k||(Kt.onMouseOver=Fb(et,Kt.onMouseOver),Kt.onMouseLeave=Fb(ct,Kt.onMouseLeave),Ae||(Nn.onMouseOver=et,Nn.onMouseLeave=ct)),I||(Kt.onFocus=Fb(_e,Kt.onFocus),Kt.onBlur=Fb(le,Kt.onBlur),Ae||(Nn.onFocus=_e,Nn.onBlur=le));const qn=A.useMemo(()=>{var Xt;let Zt=[{name:"arrow",enabled:!!me,options:{element:me,padding:4}}];return(Xt=ae.popperOptions)!=null&&Xt.modifiers&&(Zt=Zt.concat(ae.popperOptions.modifiers)),U({},ae.popperOptions,{modifiers:Zt})},[me,ae]),Mn=U({},T,{isRtl:q,arrow:C,disableInteractive:Ae,placement:ve,PopperComponentProp:Oe,touch:de.current}),ti=W_e(Mn),gs=(r=(i=Ce.popper)!=null?i:M.Popper)!=null?r:X_e,Zi=(s=(o=(a=Ce.transition)!=null?a:M.Transition)!=null?o:ke)!=null?s:Aw,un=(l=(c=Ce.tooltip)!=null?c:M.Tooltip)!=null?l:Y_e,yn=(u=(d=Ce.arrow)!=null?d:M.Arrow)!=null?u:K_e,ni=Q0(gs,U({},ae,(h=ue.popper)!=null?h:N.popper,{className:Ue(ti.popper,ae==null?void 0:ae.className,(f=(p=ue.popper)!=null?p:N.popper)==null?void 0:f.className)}),Mn),gi=Q0(Zi,U({},Re,(m=ue.transition)!=null?m:N.transition),Mn),_r=Q0(un,U({},(_=ue.tooltip)!=null?_:N.tooltip,{className:Ue(ti.tooltip,(y=(x=ue.tooltip)!=null?x:N.tooltip)==null?void 0:y.className)}),Mn),vs=Q0(yn,U({},(b=ue.arrow)!=null?b:N.arrow,{className:Ue(ti.arrow,(E=(w=ue.arrow)!=null?w:N.arrow)==null?void 0:E.className)}),Mn);return Z.jsxs(A.Fragment,{children:[A.cloneElement(oe,Kt),Z.jsx(gs,U({as:Oe??SN,placement:ve,anchorEl:H?{getBoundingClientRect:()=>({top:T0.y,left:T0.x,right:T0.x,bottom:T0.y,width:0,height:0})}:Y,popperRef:vt,open:Y?qe:!1,id:gt,transition:!0},Nn,ni,{popperOptions:qn,children:({TransitionProps:Xt})=>Z.jsx(Zi,U({timeout:ie.transitions.duration.shorter},Xt,gi,{children:Z.jsxs(un,U({},_r,{children:[pe,C?Z.jsx(yn,U({},vs,{ref:he})):null]}))}))}))]})}),Wi=q_e;function Z_e(t){return ot("MuiSpeedDialAction",t)}const Q_e=it("MuiSpeedDialAction",["fab","fabClosed","staticTooltip","staticTooltipClosed","staticTooltipLabel","tooltipPlacementLeft","tooltipPlacementRight"]),J_e=Q_e,ebe=["className","delay","FabProps","icon","id","open","TooltipClasses","tooltipOpen","tooltipPlacement","tooltipTitle"],tbe=t=>{const{open:e,tooltipPlacement:n,classes:r}=t,i={fab:["fab",!e&&"fabClosed"],staticTooltip:["staticTooltip",`tooltipPlacement${xe(n)}`,!e&&"staticTooltipClosed"],staticTooltipLabel:["staticTooltipLabel"]};return st(i,Z_e,r)},nbe=Se(A7,{name:"MuiSpeedDialAction",slot:"Fab",skipVariantsResolver:!1,overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.fab,!n.open&&e.fabClosed]}})(({theme:t,ownerState:e})=>U({margin:8,color:(t.vars||t).palette.text.secondary,backgroundColor:(t.vars||t).palette.background.paper,"&:hover":{backgroundColor:t.vars?t.vars.palette.SpeedDialAction.fabHoverBg:fde(t.palette.background.paper,.15)},transition:`${t.transitions.create("transform",{duration:t.transitions.duration.shorter})}, opacity 0.8s`,opacity:1},!e.open&&{opacity:0,transform:"scale(0)"})),rbe=Se("span",{name:"MuiSpeedDialAction",slot:"StaticTooltip",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.staticTooltip,!n.open&&e.staticTooltipClosed,e[`tooltipPlacement${xe(n.tooltipPlacement)}`]]}})(({theme:t,ownerState:e})=>({position:"relative",display:"flex",alignItems:"center",[`& .${J_e.staticTooltipLabel}`]:U({transition:t.transitions.create(["transform","opacity"],{duration:t.transitions.duration.shorter}),opacity:1},!e.open&&{opacity:0,transform:"scale(0.5)"},e.tooltipPlacement==="left"&&{transformOrigin:"100% 50%",right:"100%",marginRight:8},e.tooltipPlacement==="right"&&{transformOrigin:"0% 50%",left:"100%",marginLeft:8})})),ibe=Se("span",{name:"MuiSpeedDialAction",slot:"StaticTooltipLabel",overridesResolver:(t,e)=>e.staticTooltipLabel})(({theme:t})=>U({position:"absolute"},t.typography.body1,{backgroundColor:(t.vars||t).palette.background.paper,borderRadius:(t.vars||t).shape.borderRadius,boxShadow:(t.vars||t).shadows[1],color:(t.vars||t).palette.text.secondary,padding:"4px 16px",wordBreak:"keep-all"})),sbe=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiSpeedDialAction"}),{className:i,delay:s=0,FabProps:o={},icon:a,id:l,open:c,TooltipClasses:u,tooltipOpen:d=!1,tooltipPlacement:h="left",tooltipTitle:f}=r,p=$e(r,ebe),m=U({},r,{tooltipPlacement:h}),_=tbe(m),[y,x]=A.useState(d),b=()=>{x(!1)},E=()=>{x(!0)},w={transitionDelay:`${s}ms`},T=Z.jsx(nbe,U({size:"small",className:Ue(_.fab,i),tabIndex:-1,role:"menuitem",ownerState:m},o,{style:U({},w,o.style),children:a}));return d?Z.jsxs(rbe,U({id:l,ref:n,className:_.staticTooltip,ownerState:m},p,{children:[Z.jsx(ibe,{style:w,id:`${l}-label`,className:_.staticTooltipLabel,ownerState:m,children:f}),A.cloneElement(T,{"aria-labelledby":`${l}-label`})]})):(!c&&y&&x(!1),Z.jsx(Wi,U({id:l,ref:n,title:f,placement:h,onClose:b,onOpen:E,open:c&&y,classes:u},p,{children:T})))}),Y7=sbe,obe=lt(Z.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");function abe(t){return ot("MuiSpeedDialIcon",t)}const lbe=it("MuiSpeedDialIcon",["root","icon","iconOpen","iconWithOpenIconOpen","openIcon","openIconOpen"]),eh=lbe,cbe=["className","icon","open","openIcon"],ube=t=>{const{classes:e,open:n,openIcon:r}=t;return st({root:["root"],icon:["icon",n&&"iconOpen",r&&n&&"iconWithOpenIconOpen"],openIcon:["openIcon",n&&"openIconOpen"]},abe,e)},dbe=Se("span",{name:"MuiSpeedDialIcon",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${eh.icon}`]:e.icon},{[`& .${eh.icon}`]:n.open&&e.iconOpen},{[`& .${eh.icon}`]:n.open&&n.openIcon&&e.iconWithOpenIconOpen},{[`& .${eh.openIcon}`]:e.openIcon},{[`& .${eh.openIcon}`]:n.open&&e.openIconOpen},e.root]}})(({theme:t,ownerState:e})=>({height:24,[`& .${eh.icon}`]:U({transition:t.transitions.create(["transform","opacity"],{duration:t.transitions.duration.short})},e.open&&U({transform:"rotate(45deg)"},e.openIcon&&{opacity:0})),[`& .${eh.openIcon}`]:U({position:"absolute",transition:t.transitions.create(["transform","opacity"],{duration:t.transitions.duration.short}),opacity:0,transform:"rotate(-45deg)"},e.open&&{transform:"rotate(0deg)",opacity:1})})),K7=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiSpeedDialIcon"}),{className:i,icon:s,openIcon:o}=r,a=$e(r,cbe),l=r,c=ube(l);function u(d,h){return A.isValidElement(d)?A.cloneElement(d,{className:h}):d}return Z.jsxs(dbe,U({className:Ue(c.root,i),ref:n,ownerState:l},a,{children:[o?u(o,c.openIcon):null,s?u(s,c.icon):Z.jsx(obe,{className:c.icon})]}))});K7.muiName="SpeedDialIcon";const q7=K7,hbe=A.createContext({}),k1=hbe,fbe=A.createContext({}),jS=fbe;function pbe(t){return ot("MuiStep",t)}it("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const mbe=["active","children","className","component","completed","disabled","expanded","index","last"],gbe=t=>{const{classes:e,orientation:n,alternativeLabel:r,completed:i}=t;return st({root:["root",n,r&&"alternativeLabel",i&&"completed"]},pbe,e)},vbe=Se("div",{name:"MuiStep",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.orientation],n.alternativeLabel&&e.alternativeLabel,n.completed&&e.completed]}})(({ownerState:t})=>U({},t.orientation==="horizontal"&&{paddingLeft:8,paddingRight:8},t.alternativeLabel&&{flex:1,position:"relative"})),ybe=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiStep"}),{active:i,children:s,className:o,component:a="div",completed:l,disabled:c,expanded:u=!1,index:d,last:h}=r,f=$e(r,mbe),{activeStep:p,connector:m,alternativeLabel:_,orientation:y,nonLinear:x}=A.useContext(k1);let[b=!1,E=!1,w=!1]=[i,l,c];p===d?b=i!==void 0?i:!0:!x&&p>d?E=l!==void 0?l:!0:!x&&p<d&&(w=c!==void 0?c:!0);const T=A.useMemo(()=>({index:d,last:h,expanded:u,icon:d+1,active:b,completed:E,disabled:w}),[d,h,u,b,E,w]),C=U({},r,{active:b,orientation:y,alternativeLabel:_,completed:E,disabled:w,expanded:u,component:a}),P=gbe(C),M=Z.jsxs(vbe,U({as:a,className:Ue(P.root,o),ref:n,ownerState:C},f,{children:[m&&_&&d!==0?m:null,s]}));return Z.jsx(jS.Provider,{value:T,children:m&&!_&&d!==0?Z.jsxs(A.Fragment,{children:[m,M]}):M})}),_be=ybe,bbe=lt(Z.jsx("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),xbe=lt(Z.jsx("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning");function Ebe(t){return ot("MuiStepIcon",t)}const wbe=it("MuiStepIcon",["root","active","completed","error","text"]),jR=wbe;var yz;const Tbe=["active","className","completed","error","icon"],Sbe=t=>{const{classes:e,active:n,completed:r,error:i}=t;return st({root:["root",n&&"active",r&&"completed",i&&"error"],text:["text"]},Ebe,e)},GR=Se(Hm,{name:"MuiStepIcon",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>({display:"block",transition:t.transitions.create("color",{duration:t.transitions.duration.shortest}),color:(t.vars||t).palette.text.disabled,[`&.${jR.completed}`]:{color:(t.vars||t).palette.primary.main},[`&.${jR.active}`]:{color:(t.vars||t).palette.primary.main},[`&.${jR.error}`]:{color:(t.vars||t).palette.error.main}})),Cbe=Se("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:(t,e)=>e.text})(({theme:t})=>({fill:(t.vars||t).palette.primary.contrastText,fontSize:t.typography.caption.fontSize,fontFamily:t.typography.fontFamily})),Abe=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiStepIcon"}),{active:i=!1,className:s,completed:o=!1,error:a=!1,icon:l}=r,c=$e(r,Tbe),u=U({},r,{active:i,completed:o,error:a}),d=Sbe(u);if(typeof l=="number"||typeof l=="string"){const h=Ue(s,d.root);return a?Z.jsx(GR,U({as:xbe,className:h,ref:n,ownerState:u},c)):o?Z.jsx(GR,U({as:bbe,className:h,ref:n,ownerState:u},c)):Z.jsxs(GR,U({className:h,ref:n,ownerState:u},c,{children:[yz||(yz=Z.jsx("circle",{cx:"12",cy:"12",r:"12"})),Z.jsx(Cbe,{className:d.text,x:"12",y:"12",textAnchor:"middle",dominantBaseline:"central",ownerState:u,children:l})]}))}return l}),Rbe=Abe;function Pbe(t){return ot("MuiStepLabel",t)}const Ibe=it("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]),Yu=Ibe,Mbe=["children","className","componentsProps","error","icon","optional","slotProps","StepIconComponent","StepIconProps"],Lbe=t=>{const{classes:e,orientation:n,active:r,completed:i,error:s,disabled:o,alternativeLabel:a}=t;return st({root:["root",n,s&&"error",o&&"disabled",a&&"alternativeLabel"],label:["label",r&&"active",i&&"completed",s&&"error",o&&"disabled",a&&"alternativeLabel"],iconContainer:["iconContainer",r&&"active",i&&"completed",s&&"error",o&&"disabled",a&&"alternativeLabel"],labelContainer:["labelContainer",a&&"alternativeLabel"]},Pbe,e)},Obe=Se("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.orientation]]}})(({ownerState:t})=>U({display:"flex",alignItems:"center",[`&.${Yu.alternativeLabel}`]:{flexDirection:"column"},[`&.${Yu.disabled}`]:{cursor:"default"}},t.orientation==="vertical"&&{textAlign:"left",padding:"8px 0"})),kbe=Se("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:(t,e)=>e.label})(({theme:t})=>U({},t.typography.body2,{display:"block",transition:t.transitions.create("color",{duration:t.transitions.duration.shortest}),[`&.${Yu.active}`]:{color:(t.vars||t).palette.text.primary,fontWeight:500},[`&.${Yu.completed}`]:{color:(t.vars||t).palette.text.primary,fontWeight:500},[`&.${Yu.alternativeLabel}`]:{marginTop:16},[`&.${Yu.error}`]:{color:(t.vars||t).palette.error.main}})),Nbe=Se("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:(t,e)=>e.iconContainer})(()=>({flexShrink:0,display:"flex",paddingRight:8,[`&.${Yu.alternativeLabel}`]:{paddingRight:0}})),Dbe=Se("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:(t,e)=>e.labelContainer})(({theme:t})=>({width:"100%",color:(t.vars||t).palette.text.secondary,[`&.${Yu.alternativeLabel}`]:{textAlign:"center"}})),Z7=A.forwardRef(function(e,n){var r;const i=at({props:e,name:"MuiStepLabel"}),{children:s,className:o,componentsProps:a={},error:l=!1,icon:c,optional:u,slotProps:d={},StepIconComponent:h,StepIconProps:f}=i,p=$e(i,Mbe),{alternativeLabel:m,orientation:_}=A.useContext(k1),{active:y,disabled:x,completed:b,icon:E}=A.useContext(jS),w=c||E;let T=h;w&&!T&&(T=Rbe);const C=U({},i,{active:y,alternativeLabel:m,completed:b,disabled:x,error:l,orientation:_}),P=Lbe(C),M=(r=d.label)!=null?r:a.label;return Z.jsxs(Obe,U({className:Ue(P.root,o),ref:n,ownerState:C},p,{children:[w||T?Z.jsx(Nbe,{className:P.iconContainer,ownerState:C,children:Z.jsx(T,U({completed:b,active:y,error:l,icon:w},f))}):null,Z.jsxs(Dbe,{className:P.labelContainer,ownerState:C,children:[s?Z.jsx(kbe,U({ownerState:C},M,{className:Ue(P.label,M==null?void 0:M.className),children:s})):null,u]})]}))});Z7.muiName="StepLabel";const Bbe=Z7;function Fbe(t){return ot("MuiStepButton",t)}const Ube=it("MuiStepButton",["root","horizontal","vertical","touchRipple"]),_z=Ube,zbe=["children","className","icon","optional"],$be=t=>{const{classes:e,orientation:n}=t;return st({root:["root",n],touchRipple:["touchRipple"]},Fbe,e)},jbe=Se(da,{name:"MuiStepButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${_z.touchRipple}`]:e.touchRipple},e.root,e[n.orientation]]}})(({ownerState:t})=>U({width:"100%",padding:"24px 16px",margin:"-24px -16px",boxSizing:"content-box"},t.orientation==="vertical"&&{justifyContent:"flex-start",padding:"8px",margin:"-8px"},{[`& .${_z.touchRipple}`]:{color:"rgba(0, 0, 0, 0.3)"}})),Gbe=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiStepButton"}),{children:i,className:s,icon:o,optional:a}=r,l=$e(r,zbe),{disabled:c,active:u}=A.useContext(jS),{orientation:d}=A.useContext(k1),h=U({},r,{orientation:d}),f=$be(h),p={icon:o,optional:a},m=_m(i,["StepLabel"])?A.cloneElement(i,p):Z.jsx(Bbe,U({},p,{children:i}));return Z.jsx(jbe,U({focusRipple:!0,disabled:c,TouchRippleProps:{className:f.touchRipple},className:Ue(f.root,s),ref:n,ownerState:h,"aria-current":u?"step":void 0},l,{children:m}))}),Hbe=Gbe;function Vbe(t){return ot("MuiStepConnector",t)}it("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);const Wbe=["className"],Xbe=t=>{const{classes:e,orientation:n,alternativeLabel:r,active:i,completed:s,disabled:o}=t,a={root:["root",n,r&&"alternativeLabel",i&&"active",s&&"completed",o&&"disabled"],line:["line",`line${xe(n)}`]};return st(a,Vbe,e)},Ybe=Se("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.orientation],n.alternativeLabel&&e.alternativeLabel,n.completed&&e.completed]}})(({ownerState:t})=>U({flex:"1 1 auto"},t.orientation==="vertical"&&{marginLeft:12},t.alternativeLabel&&{position:"absolute",top:12,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"})),Kbe=Se("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.line,e[`line${xe(n.orientation)}`]]}})(({ownerState:t,theme:e})=>{const n=e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[600];return U({display:"block",borderColor:e.vars?e.vars.palette.StepConnector.border:n},t.orientation==="horizontal"&&{borderTopStyle:"solid",borderTopWidth:1},t.orientation==="vertical"&&{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24})}),qbe=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiStepConnector"}),{className:i}=r,s=$e(r,Wbe),{alternativeLabel:o,orientation:a="horizontal"}=A.useContext(k1),{active:l,disabled:c,completed:u}=A.useContext(jS),d=U({},r,{alternativeLabel:o,orientation:a,active:l,completed:u,disabled:c}),h=Xbe(d);return Z.jsx(Ybe,U({className:Ue(h.root,i),ref:n,ownerState:d},s,{children:Z.jsx(Kbe,{className:h.line,ownerState:d})}))}),Zbe=qbe;function Qbe(t){return ot("MuiStepper",t)}it("MuiStepper",["root","horizontal","vertical","alternativeLabel"]);const Jbe=["activeStep","alternativeLabel","children","className","component","connector","nonLinear","orientation"],exe=t=>{const{orientation:e,alternativeLabel:n,classes:r}=t;return st({root:["root",e,n&&"alternativeLabel"]},Qbe,r)},txe=Se("div",{name:"MuiStepper",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.orientation],n.alternativeLabel&&e.alternativeLabel]}})(({ownerState:t})=>U({display:"flex"},t.orientation==="horizontal"&&{flexDirection:"row",alignItems:"center"},t.orientation==="vertical"&&{flexDirection:"column"},t.alternativeLabel&&{alignItems:"flex-start"})),nxe=Z.jsx(Zbe,{}),rxe=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiStepper"}),{activeStep:i=0,alternativeLabel:s=!1,children:o,className:a,component:l="div",connector:c=nxe,nonLinear:u=!1,orientation:d="horizontal"}=r,h=$e(r,Jbe),f=U({},r,{alternativeLabel:s,orientation:d,component:l}),p=exe(f),m=A.Children.toArray(o).filter(Boolean),_=m.map((x,b)=>A.cloneElement(x,U({index:b,last:b+1===m.length},x.props))),y=A.useMemo(()=>({activeStep:i,alternativeLabel:s,connector:c,nonLinear:u,orientation:d}),[i,s,c,u,d]);return Z.jsx(k1.Provider,{value:y,children:Z.jsx(txe,U({as:l,ownerState:f,className:Ue(p.root,a),ref:n},h,{children:_}))})}),ixe=rxe;function sxe(t){return ot("MuiTab",t)}const oxe=it("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),th=oxe,axe=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],lxe=t=>{const{classes:e,textColor:n,fullWidth:r,wrapped:i,icon:s,label:o,selected:a,disabled:l}=t,c={root:["root",s&&o&&"labelIcon",`textColor${xe(n)}`,r&&"fullWidth",i&&"wrapped",a&&"selected",l&&"disabled"],iconWrapper:["iconWrapper"]};return st(c,sxe,e)},cxe=Se(da,{name:"MuiTab",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.label&&n.icon&&e.labelIcon,e[`textColor${xe(n.textColor)}`],n.fullWidth&&e.fullWidth,n.wrapped&&e.wrapped]}})(({theme:t,ownerState:e})=>U({},t.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},e.label&&{flexDirection:e.iconPosition==="top"||e.iconPosition==="bottom"?"column":"row"},{lineHeight:1.25},e.icon&&e.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${th.iconWrapper}`]:U({},e.iconPosition==="top"&&{marginBottom:6},e.iconPosition==="bottom"&&{marginTop:6},e.iconPosition==="start"&&{marginRight:t.spacing(1)},e.iconPosition==="end"&&{marginLeft:t.spacing(1)})},e.textColor==="inherit"&&{color:"inherit",opacity:.6,[`&.${th.selected}`]:{opacity:1},[`&.${th.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},e.textColor==="primary"&&{color:(t.vars||t).palette.text.secondary,[`&.${th.selected}`]:{color:(t.vars||t).palette.primary.main},[`&.${th.disabled}`]:{color:(t.vars||t).palette.text.disabled}},e.textColor==="secondary"&&{color:(t.vars||t).palette.text.secondary,[`&.${th.selected}`]:{color:(t.vars||t).palette.secondary.main},[`&.${th.disabled}`]:{color:(t.vars||t).palette.text.disabled}},e.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},e.wrapped&&{fontSize:t.typography.pxToRem(12)})),uxe=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiTab"}),{className:i,disabled:s=!1,disableFocusRipple:o=!1,fullWidth:a,icon:l,iconPosition:c="top",indicator:u,label:d,onChange:h,onClick:f,onFocus:p,selected:m,selectionFollowsFocus:_,textColor:y="inherit",value:x,wrapped:b=!1}=r,E=$e(r,axe),w=U({},r,{disabled:s,disableFocusRipple:o,selected:m,icon:!!l,iconPosition:c,label:!!d,fullWidth:a,textColor:y,wrapped:b}),T=lxe(w),C=l&&d&&A.isValidElement(l)?A.cloneElement(l,{className:Ue(T.iconWrapper,l.props.className)}):l,P=N=>{!m&&h&&h(N,x),f&&f(N)},M=N=>{_&&!m&&h&&h(N,x),p&&p(N)};return Z.jsxs(cxe,U({focusRipple:!o,className:Ue(T.root,i),ref:n,role:"tab","aria-selected":m,disabled:s,onClick:P,onFocus:M,ownerState:w,tabIndex:m?0:-1},E,{children:[c==="top"||c==="start"?Z.jsxs(A.Fragment,{children:[C,d]}):Z.jsxs(A.Fragment,{children:[d,C]}),u]}))}),bz=uxe,dxe=A.createContext(),Q7=dxe;function hxe(t){return ot("MuiTable",t)}it("MuiTable",["root","stickyHeader"]);const fxe=["className","component","padding","size","stickyHeader"],pxe=t=>{const{classes:e,stickyHeader:n}=t;return st({root:["root",n&&"stickyHeader"]},hxe,e)},mxe=Se("table",{name:"MuiTable",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.stickyHeader&&e.stickyHeader]}})(({theme:t,ownerState:e})=>U({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":U({},t.typography.body2,{padding:t.spacing(2),color:(t.vars||t).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},e.stickyHeader&&{borderCollapse:"separate"})),xz="table",gxe=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiTable"}),{className:i,component:s=xz,padding:o="normal",size:a="medium",stickyHeader:l=!1}=r,c=$e(r,fxe),u=U({},r,{component:s,padding:o,size:a,stickyHeader:l}),d=pxe(u),h=A.useMemo(()=>({padding:o,size:a,stickyHeader:l}),[o,a,l]);return Z.jsx(Q7.Provider,{value:h,children:Z.jsx(mxe,U({as:s,role:s===xz?null:"table",ref:n,className:Ue(d.root,i),ownerState:u},c))})}),NN=gxe,vxe=A.createContext(),GS=vxe;function yxe(t){return ot("MuiTableBody",t)}it("MuiTableBody",["root"]);const _xe=["className","component"],bxe=t=>{const{classes:e}=t;return st({root:["root"]},yxe,e)},xxe=Se("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"table-row-group"}),Exe={variant:"body"},Ez="tbody",wxe=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiTableBody"}),{className:i,component:s=Ez}=r,o=$e(r,_xe),a=U({},r,{component:s}),l=bxe(a);return Z.jsx(GS.Provider,{value:Exe,children:Z.jsx(xxe,U({className:Ue(l.root,i),as:s,ref:n,role:s===Ez?null:"rowgroup",ownerState:a},o))})}),DN=wxe;function Txe(t){return ot("MuiTableCell",t)}const Sxe=it("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),Cxe=Sxe,Axe=["align","className","component","padding","scope","size","sortDirection","variant"],Rxe=t=>{const{classes:e,variant:n,align:r,padding:i,size:s,stickyHeader:o}=t,a={root:["root",n,o&&"stickyHeader",r!=="inherit"&&`align${xe(r)}`,i!=="normal"&&`padding${xe(i)}`,`size${xe(s)}`]};return st(a,Txe,e)},Pxe=Se("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.variant],e[`size${xe(n.size)}`],n.padding!=="normal"&&e[`padding${xe(n.padding)}`],n.align!=="inherit"&&e[`align${xe(n.align)}`],n.stickyHeader&&e.stickyHeader]}})(({theme:t,ownerState:e})=>U({},t.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:t.vars?`1px solid ${t.vars.palette.TableCell.border}`:`1px solid
    ${t.palette.mode==="light"?yf(rn(t.palette.divider,1),.88):vf(rn(t.palette.divider,1),.68)}`,textAlign:"left",padding:16},e.variant==="head"&&{color:(t.vars||t).palette.text.primary,lineHeight:t.typography.pxToRem(24),fontWeight:t.typography.fontWeightMedium},e.variant==="body"&&{color:(t.vars||t).palette.text.primary},e.variant==="footer"&&{color:(t.vars||t).palette.text.secondary,lineHeight:t.typography.pxToRem(21),fontSize:t.typography.pxToRem(12)},e.size==="small"&&{padding:"6px 16px",[`&.${Cxe.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},e.padding==="checkbox"&&{width:48,padding:"0 0 0 4px"},e.padding==="none"&&{padding:0},e.align==="left"&&{textAlign:"left"},e.align==="center"&&{textAlign:"center"},e.align==="right"&&{textAlign:"right",flexDirection:"row-reverse"},e.align==="justify"&&{textAlign:"justify"},e.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(t.vars||t).palette.background.default})),Ixe=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiTableCell"}),{align:i="inherit",className:s,component:o,padding:a,scope:l,size:c,sortDirection:u,variant:d}=r,h=$e(r,Axe),f=A.useContext(Q7),p=A.useContext(GS),m=p&&p.variant==="head";let _;o?_=o:_=m?"th":"td";let y=l;_==="td"?y=void 0:!y&&m&&(y="col");const x=d||p&&p.variant,b=U({},r,{align:i,component:_,padding:a||(f&&f.padding?f.padding:"normal"),size:c||(f&&f.size?f.size:"medium"),sortDirection:u,stickyHeader:x==="head"&&f&&f.stickyHeader,variant:x}),E=Rxe(b);let w=null;return u&&(w=u==="asc"?"ascending":"descending"),Z.jsx(Pxe,U({as:_,ref:n,className:Ue(E.root,s),"aria-sort":w,scope:y,ownerState:b},h))}),Jn=Ixe;function Mxe(t){return ot("MuiTableContainer",t)}it("MuiTableContainer",["root"]);const Lxe=["className","component"],Oxe=t=>{const{classes:e}=t;return st({root:["root"]},Mxe,e)},kxe=Se("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(t,e)=>e.root})({width:"100%",overflowX:"auto"}),Nxe=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiTableContainer"}),{className:i,component:s="div"}=r,o=$e(r,Lxe),a=U({},r,{component:s}),l=Oxe(a);return Z.jsx(kxe,U({ref:n,as:s,className:Ue(l.root,i),ownerState:a},o))}),J7=Nxe;function Dxe(t){return ot("MuiTableHead",t)}it("MuiTableHead",["root"]);const Bxe=["className","component"],Fxe=t=>{const{classes:e}=t;return st({root:["root"]},Dxe,e)},Uxe=Se("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(t,e)=>e.root})({display:"table-header-group"}),zxe={variant:"head"},wz="thead",$xe=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiTableHead"}),{className:i,component:s=wz}=r,o=$e(r,Bxe),a=U({},r,{component:s}),l=Fxe(a);return Z.jsx(GS.Provider,{value:zxe,children:Z.jsx(Uxe,U({as:s,className:Ue(l.root,i),ref:n,role:s===wz?null:"rowgroup",ownerState:a},o))})}),BN=$xe,jxe=lt(Z.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),Gxe=lt(Z.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight");function Hxe(t){return ot("MuiTableRow",t)}const Vxe=it("MuiTableRow",["root","selected","hover","head","footer"]),Tz=Vxe,Wxe=["className","component","hover","selected"],Xxe=t=>{const{classes:e,selected:n,hover:r,head:i,footer:s}=t;return st({root:["root",n&&"selected",r&&"hover",i&&"head",s&&"footer"]},Hxe,e)},Yxe=Se("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.head&&e.head,n.footer&&e.footer]}})(({theme:t})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${Tz.hover}:hover`]:{backgroundColor:(t.vars||t).palette.action.hover},[`&.${Tz.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:rn(t.palette.primary.main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:rn(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity)}}})),Sz="tr",Kxe=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiTableRow"}),{className:i,component:s=Sz,hover:o=!1,selected:a=!1}=r,l=$e(r,Wxe),c=A.useContext(GS),u=U({},r,{component:s,hover:o,selected:a,head:c&&c.variant==="head",footer:c&&c.variant==="footer"}),d=Xxe(u);return Z.jsx(Yxe,U({as:s,ref:n,className:Ue(d.root,i),role:s===Sz?null:"row",ownerState:u},l))}),qm=Kxe;function qxe(t){return(1+Math.sin(Math.PI*t-Math.PI/2))/2}function Zxe(t,e,n,r={},i=()=>{}){const{ease:s=qxe,duration:o=300}=r;let a=null;const l=e[t];let c=!1;const u=()=>{c=!0},d=h=>{if(c){i(new Error("Animation cancelled"));return}a===null&&(a=h);const f=Math.min(1,(h-a)/o);if(e[t]=s(f)*(n-l)+l,f>=1){requestAnimationFrame(()=>{i(null)});return}requestAnimationFrame(d)};return l===n?(i(new Error("Element already at target position")),u):(requestAnimationFrame(d),u)}const Qxe=["onChange"],Jxe={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function eEe(t){const{onChange:e}=t,n=$e(t,Qxe),r=A.useRef(),i=A.useRef(null),s=()=>{r.current=i.current.offsetHeight-i.current.clientHeight};return Os(()=>{const o=C1(()=>{const l=r.current;s(),l!==r.current&&e(r.current)}),a=$l(i.current);return a.addEventListener("resize",o),()=>{o.clear(),a.removeEventListener("resize",o)}},[e]),A.useEffect(()=>{s(),e(r.current)},[e]),Z.jsx("div",U({style:Jxe,ref:i},n))}function tEe(t){return ot("MuiTabScrollButton",t)}const nEe=it("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),rEe=nEe,iEe=["className","slots","slotProps","direction","orientation","disabled"],sEe=t=>{const{classes:e,orientation:n,disabled:r}=t;return st({root:["root",n,r&&"disabled"]},tEe,e)},oEe=Se(da,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,n.orientation&&e[n.orientation]]}})(({ownerState:t})=>U({width:40,flexShrink:0,opacity:.8,[`&.${rEe.disabled}`]:{opacity:0}},t.orientation==="vertical"&&{width:"100%",height:40,"& svg":{transform:`rotate(${t.isRtl?-90:90}deg)`}})),aEe=A.forwardRef(function(e,n){var r,i;const s=at({props:e,name:"MuiTabScrollButton"}),{className:o,slots:a={},slotProps:l={},direction:c}=s,u=$e(s,iEe),h=ms().direction==="rtl",f=U({isRtl:h},s),p=sEe(f),m=(r=a.StartScrollButtonIcon)!=null?r:jxe,_=(i=a.EndScrollButtonIcon)!=null?i:Gxe,y=Nr({elementType:m,externalSlotProps:l.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:f}),x=Nr({elementType:_,externalSlotProps:l.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:f});return Z.jsx(oEe,U({component:"div",className:Ue(p.root,o),ref:n,role:null,ownerState:f,tabIndex:null},u,{children:c==="left"?Z.jsx(m,U({},y)):Z.jsx(_,U({},x))}))}),lEe=aEe;function cEe(t){return ot("MuiTabs",t)}const uEe=it("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),HR=uEe,dEe=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","slots","slotProps","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],Cz=(t,e)=>t===e?t.firstChild:e&&e.nextElementSibling?e.nextElementSibling:t.firstChild,Az=(t,e)=>t===e?t.lastChild:e&&e.previousElementSibling?e.previousElementSibling:t.lastChild,Ub=(t,e,n)=>{let r=!1,i=n(t,e);for(;i;){if(i===t.firstChild){if(r)return;r=!0}const s=i.disabled||i.getAttribute("aria-disabled")==="true";if(!i.hasAttribute("tabindex")||s)i=n(t,i);else{i.focus();return}}},hEe=t=>{const{vertical:e,fixed:n,hideScrollbar:r,scrollableX:i,scrollableY:s,centered:o,scrollButtonsHideMobile:a,classes:l}=t;return st({root:["root",e&&"vertical"],scroller:["scroller",n&&"fixed",r&&"hideScrollbar",i&&"scrollableX",s&&"scrollableY"],flexContainer:["flexContainer",e&&"flexContainerVertical",o&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",a&&"scrollButtonsHideMobile"],scrollableX:[i&&"scrollableX"],hideScrollbar:[r&&"hideScrollbar"]},cEe,l)},fEe=Se("div",{name:"MuiTabs",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${HR.scrollButtons}`]:e.scrollButtons},{[`& .${HR.scrollButtons}`]:n.scrollButtonsHideMobile&&e.scrollButtonsHideMobile},e.root,n.vertical&&e.vertical]}})(({ownerState:t,theme:e})=>U({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},t.vertical&&{flexDirection:"column"},t.scrollButtonsHideMobile&&{[`& .${HR.scrollButtons}`]:{[e.breakpoints.down("sm")]:{display:"none"}}})),pEe=Se("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.scroller,n.fixed&&e.fixed,n.hideScrollbar&&e.hideScrollbar,n.scrollableX&&e.scrollableX,n.scrollableY&&e.scrollableY]}})(({ownerState:t})=>U({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},t.fixed&&{overflowX:"hidden",width:"100%"},t.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},t.scrollableX&&{overflowX:"auto",overflowY:"hidden"},t.scrollableY&&{overflowY:"auto",overflowX:"hidden"})),mEe=Se("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.flexContainer,n.vertical&&e.flexContainerVertical,n.centered&&e.centered]}})(({ownerState:t})=>U({display:"flex"},t.vertical&&{flexDirection:"column"},t.centered&&{justifyContent:"center"})),gEe=Se("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(t,e)=>e.indicator})(({ownerState:t,theme:e})=>U({position:"absolute",height:2,bottom:0,width:"100%",transition:e.transitions.create()},t.indicatorColor==="primary"&&{backgroundColor:(e.vars||e).palette.primary.main},t.indicatorColor==="secondary"&&{backgroundColor:(e.vars||e).palette.secondary.main},t.vertical&&{height:"100%",width:2,right:0})),vEe=Se(eEe)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),Rz={},yEe=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiTabs"}),i=ms(),s=i.direction==="rtl",{"aria-label":o,"aria-labelledby":a,action:l,centered:c=!1,children:u,className:d,component:h="div",allowScrollButtonsMobile:f=!1,indicatorColor:p="primary",onChange:m,orientation:_="horizontal",ScrollButtonComponent:y=lEe,scrollButtons:x="auto",selectionFollowsFocus:b,slots:E={},slotProps:w={},TabIndicatorProps:T={},TabScrollButtonProps:C={},textColor:P="primary",value:M,variant:N="standard",visibleScrollbar:F=!1}=r,I=$e(r,dEe),k=N==="scrollable",R=_==="vertical",z=R?"scrollTop":"scrollLeft",X=R?"top":"left",G=R?"bottom":"right",j=R?"clientHeight":"clientWidth",H=R?"height":"width",Q=U({},r,{component:h,allowScrollButtonsMobile:f,indicatorColor:p,orientation:_,vertical:R,scrollButtons:x,textColor:P,variant:N,visibleScrollbar:F,fixed:!k,hideScrollbar:k&&!F,scrollableX:k&&!R,scrollableY:k&&R,centered:c&&!k,scrollButtonsHideMobile:!f}),V=hEe(Q),ee=Nr({elementType:E.StartScrollButtonIcon,externalSlotProps:w.startScrollButtonIcon,ownerState:Q}),ye=Nr({elementType:E.EndScrollButtonIcon,externalSlotProps:w.endScrollButtonIcon,ownerState:Q}),[se,fe]=A.useState(!1),[ve,Oe]=A.useState(Rz),[ae,ue]=A.useState(!1),[Ce,pe]=A.useState(!1),[ke,Re]=A.useState(!1),[B,oe]=A.useState({overflow:"hidden",scrollbarWidth:0}),ie=new Map,q=A.useRef(null),Y=A.useRef(null),ne=()=>{const Ve=q.current;let Ye;if(Ve){const kt=Ve.getBoundingClientRect();Ye={clientWidth:Ve.clientWidth,scrollLeft:Ve.scrollLeft,scrollTop:Ve.scrollTop,scrollLeftNormalized:Xce(Ve,i.direction),scrollWidth:Ve.scrollWidth,top:kt.top,bottom:kt.bottom,left:kt.left,right:kt.right}}let ft;if(Ve&&M!==!1){const kt=Y.current.children;if(kt.length>0){const vn=kt[ie.get(M)];ft=vn?vn.getBoundingClientRect():null}}return{tabsMeta:Ye,tabMeta:ft}},me=Vr(()=>{const{tabsMeta:Ve,tabMeta:Ye}=ne();let ft=0,kt;if(R)kt="top",Ye&&Ve&&(ft=Ye.top-Ve.top+Ve.scrollTop);else if(kt=s?"right":"left",Ye&&Ve){const zn=s?Ve.scrollLeftNormalized+Ve.clientWidth-Ve.scrollWidth:Ve.scrollLeft;ft=(s?-1:1)*(Ye[kt]-Ve[kt]+zn)}const vn={[kt]:ft,[H]:Ye?Ye[H]:0};if(isNaN(ve[kt])||isNaN(ve[H]))Oe(vn);else{const zn=Math.abs(ve[kt]-vn[kt]),Kn=Math.abs(ve[H]-vn[H]);(zn>=1||Kn>=1)&&Oe(vn)}}),he=(Ve,{animation:Ye=!0}={})=>{Ye?Zxe(z,q.current,Ve,{duration:i.transitions.duration.standard}):q.current[z]=Ve},de=Ve=>{let Ye=q.current[z];R?Ye+=Ve:(Ye+=Ve*(s?-1:1),Ye*=s&&j9()==="reverse"?-1:1),he(Ye)},Ae=()=>{const Ve=q.current[j];let Ye=0;const ft=Array.from(Y.current.children);for(let kt=0;kt<ft.length;kt+=1){const vn=ft[kt];if(Ye+vn[j]>Ve){kt===0&&(Ye=Ve);break}Ye+=vn[j]}return Ye},De=()=>{de(-1*Ae())},Be=()=>{de(Ae())},tt=A.useCallback(Ve=>{oe({overflow:null,scrollbarWidth:Ve})},[]),St=()=>{const Ve={};Ve.scrollbarSizeListener=k?Z.jsx(vEe,{onChange:tt,className:Ue(V.scrollableX,V.hideScrollbar)}):null;const ft=k&&(x==="auto"&&(ae||Ce)||x===!0);return Ve.scrollButtonStart=ft?Z.jsx(y,U({slots:{StartScrollButtonIcon:E.StartScrollButtonIcon},slotProps:{startScrollButtonIcon:ee},orientation:_,direction:s?"right":"left",onClick:De,disabled:!ae},C,{className:Ue(V.scrollButtons,C.className)})):null,Ve.scrollButtonEnd=ft?Z.jsx(y,U({slots:{EndScrollButtonIcon:E.EndScrollButtonIcon},slotProps:{endScrollButtonIcon:ye},orientation:_,direction:s?"left":"right",onClick:Be,disabled:!Ce},C,{className:Ue(V.scrollButtons,C.className)})):null,Ve},be=Vr(Ve=>{const{tabsMeta:Ye,tabMeta:ft}=ne();if(!(!ft||!Ye)){if(ft[X]<Ye[X]){const kt=Ye[z]+(ft[X]-Ye[X]);he(kt,{animation:Ve})}else if(ft[G]>Ye[G]){const kt=Ye[z]+(ft[G]-Ye[G]);he(kt,{animation:Ve})}}}),we=Vr(()=>{k&&x!==!1&&Re(!ke)});A.useEffect(()=>{const Ve=C1(()=>{q.current&&me()});let Ye;const ft=zn=>{zn.forEach(Kn=>{Kn.removedNodes.forEach(ur=>{var le;(le=Ye)==null||le.unobserve(ur)}),Kn.addedNodes.forEach(ur=>{var le;(le=Ye)==null||le.observe(ur)})}),Ve(),we()},kt=$l(q.current);kt.addEventListener("resize",Ve);let vn;return typeof ResizeObserver<"u"&&(Ye=new ResizeObserver(Ve),Array.from(Y.current.children).forEach(zn=>{Ye.observe(zn)})),typeof MutationObserver<"u"&&(vn=new MutationObserver(ft),vn.observe(Y.current,{childList:!0})),()=>{var zn,Kn;Ve.clear(),kt.removeEventListener("resize",Ve),(zn=vn)==null||zn.disconnect(),(Kn=Ye)==null||Kn.disconnect()}},[me,we]),A.useEffect(()=>{const Ve=Array.from(Y.current.children),Ye=Ve.length;if(typeof IntersectionObserver<"u"&&Ye>0&&k&&x!==!1){const ft=Ve[0],kt=Ve[Ye-1],vn={root:q.current,threshold:.99},zn=_e=>{ue(!_e[0].isIntersecting)},Kn=new IntersectionObserver(zn,vn);Kn.observe(ft);const ur=_e=>{pe(!_e[0].isIntersecting)},le=new IntersectionObserver(ur,vn);return le.observe(kt),()=>{Kn.disconnect(),le.disconnect()}}},[k,x,ke,u==null?void 0:u.length]),A.useEffect(()=>{fe(!0)},[]),A.useEffect(()=>{me()}),A.useEffect(()=>{be(Rz!==ve)},[be,ve]),A.useImperativeHandle(l,()=>({updateIndicator:me,updateScrollButtons:we}),[me,we]);const qe=Z.jsx(gEe,U({},T,{className:Ue(V.indicator,T.className),ownerState:Q,style:U({},ve,T.style)}));let gt=0;const Bt=A.Children.map(u,Ve=>{if(!A.isValidElement(Ve))return null;const Ye=Ve.props.value===void 0?gt:Ve.props.value;ie.set(Ye,gt);const ft=Ye===M;return gt+=1,A.cloneElement(Ve,U({fullWidth:N==="fullWidth",indicator:ft&&!se&&qe,selected:ft,selectionFollowsFocus:b,onChange:m,textColor:P,value:Ye},gt===1&&M===!1&&!Ve.props.tabIndex?{tabIndex:0}:{}))}),Ie=Ve=>{const Ye=Y.current,ft=tr(Ye).activeElement;if(ft.getAttribute("role")!=="tab")return;let vn=_==="horizontal"?"ArrowLeft":"ArrowUp",zn=_==="horizontal"?"ArrowRight":"ArrowDown";switch(_==="horizontal"&&s&&(vn="ArrowRight",zn="ArrowLeft"),Ve.key){case vn:Ve.preventDefault(),Ub(Ye,ft,Az);break;case zn:Ve.preventDefault(),Ub(Ye,ft,Cz);break;case"Home":Ve.preventDefault(),Ub(Ye,null,Cz);break;case"End":Ve.preventDefault(),Ub(Ye,null,Az);break}},It=St();return Z.jsxs(fEe,U({className:Ue(V.root,d),ownerState:Q,ref:n,as:h},I,{children:[It.scrollButtonStart,It.scrollbarSizeListener,Z.jsxs(pEe,{className:V.scroller,ownerState:Q,style:{overflow:B.overflow,[R?`margin${s?"Left":"Right"}`:"marginBottom"]:F?void 0:-B.scrollbarWidth},ref:q,children:[Z.jsx(mEe,{"aria-label":o,"aria-labelledby":a,"aria-orientation":_==="vertical"?"vertical":null,className:V.flexContainer,ownerState:Q,onKeyDown:Ie,ref:Y,role:"tablist",children:Bt}),se&&qe]}),It.scrollButtonEnd]}))}),_Ee=yEe;function bEe(t){return ot("MuiTextField",t)}it("MuiTextField",["root"]);const xEe=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],EEe={standard:N7,filled:P7,outlined:G7},wEe=t=>{const{classes:e}=t;return st({root:["root"]},bEe,e)},TEe=Se(L1,{name:"MuiTextField",slot:"Root",overridesResolver:(t,e)=>e.root})({}),SEe=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiTextField"}),{autoComplete:i,autoFocus:s=!1,children:o,className:a,color:l="primary",defaultValue:c,disabled:u=!1,error:d=!1,FormHelperTextProps:h,fullWidth:f=!1,helperText:p,id:m,InputLabelProps:_,inputProps:y,InputProps:x,inputRef:b,label:E,maxRows:w,minRows:T,multiline:C=!1,name:P,onBlur:M,onChange:N,onFocus:F,placeholder:I,required:k=!1,rows:R,select:z=!1,SelectProps:X,type:G,value:j,variant:H="outlined"}=r,Q=$e(r,xEe),V=U({},r,{autoFocus:s,color:l,disabled:u,error:d,fullWidth:f,multiline:C,required:k,select:z,variant:H}),ee=wEe(V),ye={};H==="outlined"&&(_&&typeof _.shrink<"u"&&(ye.notched=_.shrink),ye.label=E),z&&((!X||!X.native)&&(ye.id=void 0),ye["aria-describedby"]=void 0);const se=kd(m),fe=p&&se?`${se}-helper-text`:void 0,ve=E&&se?`${se}-label`:void 0,Oe=EEe[H],ae=Z.jsx(Oe,U({"aria-describedby":fe,autoComplete:i,autoFocus:s,defaultValue:c,fullWidth:f,multiline:C,name:P,rows:R,maxRows:w,minRows:T,type:G,value:j,id:se,inputRef:b,onBlur:M,onChange:N,onFocus:F,placeholder:I,inputProps:y},ye,x));return Z.jsxs(TEe,U({className:Ue(ee.root,a),disabled:u,error:d,fullWidth:f,ref:n,required:k,color:l,variant:H,ownerState:V},Q,{children:[E!=null&&E!==""&&Z.jsx(D7,U({htmlFor:se,id:ve},_,{children:E})),z?Z.jsx(kN,U({"aria-describedby":fe,id:se,labelId:ve,value:j,input:ae},X,{children:o})):ae,p&&Z.jsx(Vve,U({id:fe},h,{children:p}))]}))}),Gh=SEe;function CEe(t){return ot("MuiToggleButton",t)}const AEe=it("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]),tm=AEe,REe=A.createContext({}),eX=REe,PEe=A.createContext(void 0),tX=PEe;function IEe(t,e){return e===void 0||t===void 0?!1:Array.isArray(e)?e.indexOf(t)>=0:t===e}const MEe=["value"],LEe=["children","className","color","disabled","disableFocusRipple","fullWidth","onChange","onClick","selected","size","value"],OEe=t=>{const{classes:e,fullWidth:n,selected:r,disabled:i,size:s,color:o}=t,a={root:["root",r&&"selected",i&&"disabled",n&&"fullWidth",`size${xe(s)}`,o]};return st(a,CEe,e)},kEe=Se(da,{name:"MuiToggleButton",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`size${xe(n.size)}`]]}})(({theme:t,ownerState:e})=>{let n=e.color==="standard"?t.palette.text.primary:t.palette[e.color].main,r;return t.vars&&(n=e.color==="standard"?t.vars.palette.text.primary:t.vars.palette[e.color].main,r=e.color==="standard"?t.vars.palette.text.primaryChannel:t.vars.palette[e.color].mainChannel),U({},t.typography.button,{borderRadius:(t.vars||t).shape.borderRadius,padding:11,border:`1px solid ${(t.vars||t).palette.divider}`,color:(t.vars||t).palette.action.active},e.fullWidth&&{width:"100%"},{[`&.${tm.disabled}`]:{color:(t.vars||t).palette.action.disabled,border:`1px solid ${(t.vars||t).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:t.vars?`rgba(${t.vars.palette.text.primaryChannel} / ${t.vars.palette.action.hoverOpacity})`:rn(t.palette.text.primary,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${tm.selected}`]:{color:n,backgroundColor:t.vars?`rgba(${r} / ${t.vars.palette.action.selectedOpacity})`:rn(n,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${r} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:rn(n,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${r} / ${t.vars.palette.action.selectedOpacity})`:rn(n,t.palette.action.selectedOpacity)}}}},e.size==="small"&&{padding:7,fontSize:t.typography.pxToRem(13)},e.size==="large"&&{padding:15,fontSize:t.typography.pxToRem(15)})}),NEe=A.forwardRef(function(e,n){const r=A.useContext(eX),{value:i}=r,s=$e(r,MEe),o=A.useContext(tX),a=R1(U({},s,{selected:IEe(e.value,i)}),e),l=at({props:a,name:"MuiToggleButton"}),{children:c,className:u,color:d="standard",disabled:h=!1,disableFocusRipple:f=!1,fullWidth:p=!1,onChange:m,onClick:_,selected:y,size:x="medium",value:b}=l,E=$e(l,LEe),w=U({},l,{color:d,disabled:h,disableFocusRipple:f,fullWidth:p,size:x}),T=OEe(w),C=M=>{_&&(_(M,b),M.defaultPrevented)||m&&m(M,b)},P=o||"";return Z.jsx(kEe,U({className:Ue(s.className,T.root,u,P),disabled:h,focusRipple:!f,ref:n,onClick:C,onChange:m,value:b,ownerState:w,"aria-pressed":y},E,{children:c}))}),DEe=NEe;function BEe(t){return ot("MuiToggleButtonGroup",t)}const FEe=it("MuiToggleButtonGroup",["root","selected","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth","firstButton","lastButton","middleButton"]),mr=FEe,UEe=["children","className","color","disabled","exclusive","fullWidth","onChange","orientation","size","value"],zEe=t=>{const{classes:e,orientation:n,fullWidth:r,disabled:i}=t,s={root:["root",n==="vertical"&&"vertical",r&&"fullWidth"],grouped:["grouped",`grouped${xe(n)}`,i&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return st(s,BEe,e)},$Ee=Se("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[{[`& .${mr.grouped}`]:e.grouped},{[`& .${mr.grouped}`]:e[`grouped${xe(n.orientation)}`]},{[`& .${mr.firstButton}`]:e.firstButton},{[`& .${mr.lastButton}`]:e.lastButton},{[`& .${mr.middleButton}`]:e.middleButton},e.root,n.orientation==="vertical"&&e.vertical,n.fullWidth&&e.fullWidth]}})(({ownerState:t,theme:e})=>U({display:"inline-flex",borderRadius:(e.vars||e).shape.borderRadius},t.orientation==="vertical"&&{flexDirection:"column"},t.fullWidth&&{width:"100%"},{[`& .${mr.grouped}`]:U({},t.orientation==="horizontal"?{[`&.${mr.selected} + .${mr.grouped}.${mr.selected}`]:{borderLeft:0,marginLeft:0}}:{[`&.${mr.selected} + .${mr.grouped}.${mr.selected}`]:{borderTop:0,marginTop:0}})},t.orientation==="horizontal"?{[`& .${mr.firstButton},& .${mr.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${mr.lastButton},& .${mr.middleButton}`]:{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0}}:{[`& .${mr.firstButton},& .${mr.middleButton}`]:{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`& .${mr.lastButton},& .${mr.middleButton}`]:{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0}},t.orientation==="horizontal"?{[`& .${mr.lastButton}.${tm.disabled},& .${mr.middleButton}.${tm.disabled}`]:{borderLeft:"1px solid transparent"}}:{[`& .${mr.lastButton}.${tm.disabled},& .${mr.middleButton}.${tm.disabled}`]:{borderTop:"1px solid transparent"}})),jEe=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiToggleButtonGroup"}),{children:i,className:s,color:o="standard",disabled:a=!1,exclusive:l=!1,fullWidth:c=!1,onChange:u,orientation:d="horizontal",size:h="medium",value:f}=r,p=$e(r,UEe),m=U({},r,{disabled:a,fullWidth:c,orientation:d,size:h}),_=zEe(m),y=A.useCallback((C,P)=>{if(!u)return;const M=f&&f.indexOf(P);let N;f&&M>=0?(N=f.slice(),N.splice(M,1)):N=f?f.concat(P):[P],u(C,N)},[u,f]),x=A.useCallback((C,P)=>{u&&u(C,f===P?null:P)},[u,f]),b=A.useMemo(()=>({className:_.grouped,onChange:l?x:y,value:f,size:h,fullWidth:c,color:o,disabled:a}),[_.grouped,l,x,y,f,h,c,o,a]),E=H9(i),w=E.length,T=C=>{const P=C===0,M=C===w-1;return P&&M?"":P?_.firstButton:M?_.lastButton:_.middleButton};return Z.jsx($Ee,U({role:"group",className:Ue(_.root,s),ref:n,ownerState:m},p,{children:Z.jsx(eX.Provider,{value:b,children:E.map((C,P)=>Z.jsx(tX.Provider,{value:T(P),children:C},P))})}))}),GEe=jEe;var nX={exports:{}},N1={},bM={exports:{}};(function(t,e){(function(n,r){r(e)})(Pi,function(n){function r(ae){return function(Ce,pe,ke,Re,B,oe,ie){return ae(Ce,pe,ie)}}function i(ae){return function(Ce,pe,ke,Re){if(!Ce||!pe||typeof Ce!="object"||typeof pe!="object")return ae(Ce,pe,ke,Re);var B=Re.get(Ce),oe=Re.get(pe);if(B&&oe)return B===pe&&oe===Ce;Re.set(Ce,pe),Re.set(pe,Ce);var ie=ae(Ce,pe,ke,Re);return Re.delete(Ce),Re.delete(pe),ie}}function s(ae,ue){var Ce={};for(var pe in ae)Ce[pe]=ae[pe];for(var pe in ue)Ce[pe]=ue[pe];return Ce}function o(ae){return ae.constructor===Object||ae.constructor==null}function a(ae){return typeof ae.then=="function"}function l(ae,ue){return ae===ue||ae!==ae&&ue!==ue}var c="[object Arguments]",u="[object Boolean]",d="[object Date]",h="[object RegExp]",f="[object Map]",p="[object Number]",m="[object Object]",_="[object Set]",y="[object String]",x=Object.prototype.toString;function b(ae){var ue=ae.areArraysEqual,Ce=ae.areDatesEqual,pe=ae.areMapsEqual,ke=ae.areObjectsEqual,Re=ae.areRegExpsEqual,B=ae.areSetsEqual,oe=ae.createIsNestedEqual,ie=oe(q);function q(Y,ne,me){if(Y===ne)return!0;if(!Y||!ne||typeof Y!="object"||typeof ne!="object")return Y!==Y&&ne!==ne;if(o(Y)&&o(ne))return ke(Y,ne,ie,me);var he=Array.isArray(Y),de=Array.isArray(ne);if(he||de)return he===de&&ue(Y,ne,ie,me);var Ae=x.call(Y);return Ae!==x.call(ne)?!1:Ae===d?Ce(Y,ne,ie,me):Ae===h?Re(Y,ne,ie,me):Ae===f?pe(Y,ne,ie,me):Ae===_?B(Y,ne,ie,me):Ae===m||Ae===c?a(Y)||a(ne)?!1:ke(Y,ne,ie,me):Ae===u||Ae===p||Ae===y?l(Y.valueOf(),ne.valueOf()):!1}return q}function E(ae,ue,Ce,pe){var ke=ae.length;if(ue.length!==ke)return!1;for(;ke-- >0;)if(!Ce(ae[ke],ue[ke],ke,ke,ae,ue,pe))return!1;return!0}var w=i(E);function T(ae,ue){return l(ae.valueOf(),ue.valueOf())}function C(ae,ue,Ce,pe){var ke=ae.size===ue.size;if(!ke)return!1;if(!ae.size)return!0;var Re={},B=0;return ae.forEach(function(oe,ie){if(ke){var q=!1,Y=0;ue.forEach(function(ne,me){!q&&!Re[Y]&&(q=Ce(ie,me,B,Y,ae,ue,pe)&&Ce(oe,ne,ie,me,ae,ue,pe))&&(Re[Y]=!0),Y++}),B++,ke=q}}),ke}var P=i(C),M="_owner",N=Object.prototype.hasOwnProperty;function F(ae,ue,Ce,pe){var ke=Object.keys(ae),Re=ke.length;if(Object.keys(ue).length!==Re)return!1;for(var B;Re-- >0;){if(B=ke[Re],B===M){var oe=!!ae.$$typeof,ie=!!ue.$$typeof;if((oe||ie)&&oe!==ie)return!1}if(!N.call(ue,B)||!Ce(ae[B],ue[B],B,B,ae,ue,pe))return!1}return!0}var I=i(F);function k(ae,ue){return ae.source===ue.source&&ae.flags===ue.flags}function R(ae,ue,Ce,pe){var ke=ae.size===ue.size;if(!ke)return!1;if(!ae.size)return!0;var Re={};return ae.forEach(function(B,oe){if(ke){var ie=!1,q=0;ue.forEach(function(Y,ne){!ie&&!Re[q]&&(ie=Ce(B,Y,oe,ne,ae,ue,pe))&&(Re[q]=!0),q++}),ke=ie}}),ke}var z=i(R),X=Object.freeze({areArraysEqual:E,areDatesEqual:T,areMapsEqual:C,areObjectsEqual:F,areRegExpsEqual:k,areSetsEqual:R,createIsNestedEqual:r}),G=Object.freeze({areArraysEqual:w,areDatesEqual:T,areMapsEqual:P,areObjectsEqual:I,areRegExpsEqual:k,areSetsEqual:z,createIsNestedEqual:r}),j=b(X);function H(ae,ue){return j(ae,ue,void 0)}var Q=b(s(X,{createIsNestedEqual:function(){return l}}));function V(ae,ue){return Q(ae,ue,void 0)}var ee=b(G);function ye(ae,ue){return ee(ae,ue,new WeakMap)}var se=b(s(G,{createIsNestedEqual:function(){return l}}));function fe(ae,ue){return se(ae,ue,new WeakMap)}function ve(ae){return b(s(X,ae(X)))}function Oe(ae){var ue=b(s(G,ae(G)));return function(Ce,pe,ke){return ke===void 0&&(ke=new WeakMap),ue(Ce,pe,ke)}}n.circularDeepEqual=ye,n.circularShallowEqual=fe,n.createCustomCircularEqual=Oe,n.createCustomEqual=ve,n.deepEqual=H,n.sameValueZeroEqual=l,n.shallowEqual=V,Object.defineProperty(n,"__esModule",{value:!0})})})(bM,bM.exports);var FN=bM.exports,xM={exports:{}};function rX(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=rX(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Pz(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=rX(t))&&(r&&(r+=" "),r+=e);return r}xM.exports=Pz,xM.exports.clsx=Pz;var UN=xM.exports,cn={},HEe=function(e,n,r){return e===n?!0:e.className===n.className&&r(e.style,n.style)&&e.width===n.width&&e.autoSize===n.autoSize&&e.cols===n.cols&&e.draggableCancel===n.draggableCancel&&e.draggableHandle===n.draggableHandle&&r(e.verticalCompact,n.verticalCompact)&&r(e.compactType,n.compactType)&&r(e.layout,n.layout)&&r(e.margin,n.margin)&&r(e.containerPadding,n.containerPadding)&&e.rowHeight===n.rowHeight&&e.maxRows===n.maxRows&&e.isBounded===n.isBounded&&e.isDraggable===n.isDraggable&&e.isResizable===n.isResizable&&e.allowOverlap===n.allowOverlap&&e.preventCollision===n.preventCollision&&e.useCSSTransforms===n.useCSSTransforms&&e.transformScale===n.transformScale&&e.isDroppable===n.isDroppable&&r(e.resizeHandles,n.resizeHandles)&&r(e.resizeHandle,n.resizeHandle)&&e.onLayoutChange===n.onLayoutChange&&e.onDragStart===n.onDragStart&&e.onDrag===n.onDrag&&e.onDragStop===n.onDragStop&&e.onResizeStart===n.onResizeStart&&e.onResize===n.onResize&&e.onResizeStop===n.onResizeStop&&e.onDrop===n.onDrop&&r(e.droppingItem,n.droppingItem)&&r(e.innerRef,n.innerRef)};Object.defineProperty(cn,"__esModule",{value:!0});cn.bottom=zN;cn.childrenEqual=XEe;cn.cloneLayout=iX;cn.cloneLayoutItem=Hh;cn.collides=HS;cn.compact=oX;cn.compactItem=aX;cn.compactType=awe;cn.correctBounds=lX;cn.fastPositionEqual=YEe;cn.fastRGLPropsEqual=void 0;cn.getAllCollisions=cX;cn.getFirstCollision=Ih;cn.getLayoutItem=$N;cn.getStatics=jN;cn.modifyLayout=sX;cn.moveElement=tv;cn.moveElementAwayFromCollision=wM;cn.noop=void 0;cn.perc=qEe;cn.resizeItemInDirection=nwe;cn.setTopLeft=iwe;cn.setTransform=rwe;cn.sortLayoutItems=YN;cn.sortLayoutItemsByColRow=pX;cn.sortLayoutItemsByRowCol=fX;cn.synchronizeLayoutWithChildren=swe;cn.validateLayout=owe;cn.withLayoutItem=WEe;var Iz=FN,ev=VEe(A);function VEe(t){return t&&t.__esModule?t:{default:t}}function zN(t){let e=0,n;for(let r=0,i=t.length;r<i;r++)n=t[r].y+t[r].h,n>e&&(e=n);return e}function iX(t){const e=Array(t.length);for(let n=0,r=t.length;n<r;n++)e[n]=Hh(t[n]);return e}function sX(t,e){const n=Array(t.length);for(let r=0,i=t.length;r<i;r++)e.i===t[r].i?n[r]=e:n[r]=t[r];return n}function WEe(t,e,n){let r=$N(t,e);return r?(r=n(Hh(r)),t=sX(t,r),[t,r]):[t,null]}function Hh(t){return{w:t.w,h:t.h,x:t.x,y:t.y,i:t.i,minW:t.minW,maxW:t.maxW,minH:t.minH,maxH:t.maxH,moved:!!t.moved,static:!!t.static,isDraggable:t.isDraggable,isResizable:t.isResizable,resizeHandles:t.resizeHandles,isBounded:t.isBounded}}function XEe(t,e){return(0,Iz.deepEqual)(ev.default.Children.map(t,n=>n==null?void 0:n.key),ev.default.Children.map(e,n=>n==null?void 0:n.key))&&(0,Iz.deepEqual)(ev.default.Children.map(t,n=>n==null?void 0:n.props["data-grid"]),ev.default.Children.map(e,n=>n==null?void 0:n.props["data-grid"]))}cn.fastRGLPropsEqual=HEe;function YEe(t,e){return t.left===e.left&&t.top===e.top&&t.width===e.width&&t.height===e.height}function HS(t,e){return!(t.i===e.i||t.x+t.w<=e.x||t.x>=e.x+e.w||t.y+t.h<=e.y||t.y>=e.y+e.h)}function oX(t,e,n,r){const i=jN(t),s=YN(t,e),o=Array(t.length);for(let a=0,l=s.length;a<l;a++){let c=Hh(s[a]);c.static||(c=aX(i,c,e,n,s,r),i.push(c)),o[t.indexOf(s[a])]=c,c.moved=!1}return o}const KEe={x:"w",y:"h"};function EM(t,e,n,r){const i=KEe[r];e[r]+=1;const s=t.map(o=>o.i).indexOf(e.i);for(let o=s+1;o<t.length;o++){const a=t[o];if(!a.static){if(a.y>e.y+e.h)break;HS(e,a)&&EM(t,a,n+e[i],r)}}e[r]=n}function aX(t,e,n,r,i,s){const o=n==="vertical",a=n==="horizontal";if(o)for(e.y=Math.min(zN(t),e.y);e.y>0&&!Ih(t,e);)e.y--;else if(a)for(;e.x>0&&!Ih(t,e);)e.x--;let l;for(;(l=Ih(t,e))&&!(n===null&&s);)if(a?EM(i,e,l.x+l.w,"x"):EM(i,e,l.y+l.h,"y"),a&&e.x+e.w>r)for(e.x=r-e.w,e.y++;e.x>0&&!Ih(t,e);)e.x--;return e.y=Math.max(e.y,0),e.x=Math.max(e.x,0),e}function lX(t,e){const n=jN(t);for(let r=0,i=t.length;r<i;r++){const s=t[r];if(s.x+s.w>e.cols&&(s.x=e.cols-s.w),s.x<0&&(s.x=0,s.w=e.cols),!s.static)n.push(s);else for(;Ih(n,s);)s.y++}return t}function $N(t,e){for(let n=0,r=t.length;n<r;n++)if(t[n].i===e)return t[n]}function Ih(t,e){for(let n=0,r=t.length;n<r;n++)if(HS(t[n],e))return t[n]}function cX(t,e){return t.filter(n=>HS(n,e))}function jN(t){return t.filter(e=>e.static)}function tv(t,e,n,r,i,s,o,a,l){if(e.static&&e.isDraggable!==!0||e.y===r&&e.x===n)return t;`${e.i}${String(n)}${String(r)}${e.x}${e.y}`;const c=e.x,u=e.y;typeof n=="number"&&(e.x=n),typeof r=="number"&&(e.y=r),e.moved=!0;let d=YN(t,o);(o==="vertical"&&typeof r=="number"?u>=r:o==="horizontal"&&typeof n=="number"?c>=n:!1)&&(d=d.reverse());const f=cX(d,e),p=f.length>0;if(p&&l)return iX(t);if(p&&s)return`${e.i}`,e.x=c,e.y=u,e.moved=!1,t;for(let m=0,_=f.length;m<_;m++){const y=f[m];`${e.i}${e.x}${e.y}${y.i}${y.x}${y.y}`,!y.moved&&(y.static?t=wM(t,y,e,i,o):t=wM(t,e,y,i,o))}return t}function wM(t,e,n,r,i,s){const o=i==="horizontal",a=i==="vertical",l=e.static;if(r){r=!1;const d={x:o?Math.max(e.x-n.w,0):n.x,y:a?Math.max(e.y-n.h,0):n.y,w:n.w,h:n.h,i:"-1"},h=Ih(t,d),f=h&&h.y+h.h>e.y,p=h&&e.x+e.w>h.x;if(h){if(f&&a)return tv(t,n,void 0,e.y+1,r,l,i);if(f&&i==null)return e.y=n.y,n.y=n.y+n.h,t;if(p&&o)return tv(t,e,n.x,void 0,r,l,i)}else return`${n.i}${d.x}${d.y}`,tv(t,n,o?d.x:void 0,a?d.y:void 0,r,l,i)}const c=o?n.x+1:void 0,u=a?n.y+1:void 0;return c==null&&u==null?t:tv(t,n,o?n.x+1:void 0,a?n.y+1:void 0,r,l,i)}function qEe(t){return t*100+"%"}const uX=(t,e,n,r)=>t+n>r?e:n,dX=(t,e,n)=>t<0?e:n,hX=t=>Math.max(0,t),GN=t=>Math.max(0,t),HN=(t,e,n)=>{let{left:r,height:i,width:s}=e;const o=t.top-(i-t.height);return{left:r,width:s,height:dX(o,t.height,i),top:GN(o)}},VN=(t,e,n)=>{let{top:r,left:i,height:s,width:o}=e;return{top:r,height:s,width:uX(t.left,t.width,o,n),left:hX(i)}},WN=(t,e,n)=>{let{top:r,height:i,width:s}=e;const o=t.left-(s-t.width);return{height:i,width:o<0?t.width:uX(t.left,t.width,s,n),top:GN(r),left:hX(o)}},XN=(t,e,n)=>{let{top:r,left:i,height:s,width:o}=e;return{width:o,left:i,height:dX(r,t.height,s),top:GN(r)}},ZEe=function(){return HN(arguments.length<=0?void 0:arguments[0],VN(...arguments))},QEe=function(){return HN(arguments.length<=0?void 0:arguments[0],WN(...arguments))},JEe=function(){return XN(arguments.length<=0?void 0:arguments[0],VN(...arguments))},ewe=function(){return XN(arguments.length<=0?void 0:arguments[0],WN(...arguments))},twe={n:HN,ne:ZEe,e:VN,se:JEe,s:XN,sw:ewe,w:WN,nw:QEe};function nwe(t,e,n,r){const i=twe[t];return i?i(e,{...e,...n},r):n}function rwe(t){let{top:e,left:n,width:r,height:i}=t;const s=`translate(${n}px,${e}px)`;return{transform:s,WebkitTransform:s,MozTransform:s,msTransform:s,OTransform:s,width:`${r}px`,height:`${i}px`,position:"absolute"}}function iwe(t){let{top:e,left:n,width:r,height:i}=t;return{top:`${e}px`,left:`${n}px`,width:`${r}px`,height:`${i}px`,position:"absolute"}}function YN(t,e){return e==="horizontal"?pX(t):e==="vertical"?fX(t):t}function fX(t){return t.slice(0).sort(function(e,n){return e.y>n.y||e.y===n.y&&e.x>n.x?1:e.y===n.y&&e.x===n.x?0:-1})}function pX(t){return t.slice(0).sort(function(e,n){return e.x>n.x||e.x===n.x&&e.y>n.y?1:-1})}function swe(t,e,n,r,i){t=t||[];const s=[];ev.default.Children.forEach(e,a=>{if((a==null?void 0:a.key)==null)return;const l=$N(t,String(a.key)),c=a.props["data-grid"];l&&c==null?s.push(Hh(l)):c?s.push(Hh({...c,i:a.key})):s.push(Hh({w:1,h:1,x:0,y:zN(s),i:String(a.key)}))});const o=lX(s,{cols:n});return i?o:oX(o,r,n)}function owe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Layout";const n=["x","y","w","h"];if(!Array.isArray(t))throw new Error(e+" must be an array!");for(let r=0,i=t.length;r<i;r++){const s=t[r];for(let o=0;o<n.length;o++)if(typeof s[n[o]]!="number")throw new Error("ReactGridLayout: "+e+"["+r+"]."+n[o]+" must be a number!")}}function awe(t){const{verticalCompact:e,compactType:n}=t||{};return e===!1?null:n}const lwe=()=>{};cn.noop=lwe;var Ql={};Object.defineProperty(Ql,"__esModule",{value:!0});Ql.calcGridColWidth=VS;Ql.calcGridItemPosition=cwe;Ql.calcGridItemWHPx=TM;Ql.calcWH=dwe;Ql.calcXY=uwe;Ql.clamp=Mh;function VS(t){const{margin:e,containerPadding:n,containerWidth:r,cols:i}=t;return(r-e[0]*(i-1)-n[0]*2)/i}function TM(t,e,n){return Number.isFinite(t)?Math.round(e*t+Math.max(0,t-1)*n):t}function cwe(t,e,n,r,i,s){const{margin:o,containerPadding:a,rowHeight:l}=t,c=VS(t),u={};return s&&s.resizing?(u.width=Math.round(s.resizing.width),u.height=Math.round(s.resizing.height)):(u.width=TM(r,c,o[0]),u.height=TM(i,l,o[1])),s&&s.dragging?(u.top=Math.round(s.dragging.top),u.left=Math.round(s.dragging.left)):s&&s.resizing&&typeof s.resizing.top=="number"&&typeof s.resizing.left=="number"?(u.top=Math.round(s.resizing.top),u.left=Math.round(s.resizing.left)):(u.top=Math.round((l+o[1])*n+a[1]),u.left=Math.round((c+o[0])*e+a[0])),u}function uwe(t,e,n,r,i){const{margin:s,cols:o,rowHeight:a,maxRows:l}=t,c=VS(t);let u=Math.round((n-s[0])/(c+s[0])),d=Math.round((e-s[1])/(a+s[1]));return u=Mh(u,0,o-r),d=Mh(d,0,l-i),{x:u,y:d}}function dwe(t,e,n,r,i,s){const{margin:o,maxRows:a,cols:l,rowHeight:c}=t,u=VS(t);let d=Math.round((e+o[0])/(u+o[0])),h=Math.round((n+o[1])/(c+o[1])),f=Mh(d,0,l-r),p=Mh(h,0,a-i);return["sw","w","nw"].indexOf(s)!==-1&&(f=Mh(d,0,l)),["nw","n","ne"].indexOf(s)!==-1&&(p=Mh(h,0,a)),{w:f,h:p}}function Mh(t,e,n){return Math.max(Math.min(t,n),e)}var WS={},XS={exports:{}},mX={};function gX(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=gX(t[e]))&&(r&&(r+=" "),r+=n);else for(e in t)t[e]&&(r&&(r+=" "),r+=e);return r}function Mz(){for(var t,e,n=0,r="";n<arguments.length;)(t=arguments[n++])&&(e=gX(t))&&(r&&(r+=" "),r+=e);return r}const hwe=Object.freeze(Object.defineProperty({__proto__:null,clsx:Mz,default:Mz},Symbol.toStringTag,{value:"Module"})),fwe=In(hwe);var Fr={},Jl={};Object.defineProperty(Jl,"__esModule",{value:!0});Jl.dontSetMe=ywe;Jl.findInArray=pwe;Jl.int=vwe;Jl.isFunction=mwe;Jl.isNum=gwe;function pwe(t,e){for(let n=0,r=t.length;n<r;n++)if(e.apply(e,[t[n],n,t]))return t[n]}function mwe(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Function]"}function gwe(t){return typeof t=="number"&&!isNaN(t)}function vwe(t){return parseInt(t,10)}function ywe(t,e,n){if(t[e])return new Error("Invalid prop ".concat(e," passed to ").concat(n," - do not set this, set it on the child."))}var Of={};Object.defineProperty(Of,"__esModule",{value:!0});Of.browserPrefixToKey=yX;Of.browserPrefixToStyle=_we;Of.default=void 0;Of.getPrefix=vX;const VR=["Moz","Webkit","O","ms"];function vX(){var t;let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"transform";if(typeof window>"u")return"";const n=(t=window.document)===null||t===void 0||(t=t.documentElement)===null||t===void 0?void 0:t.style;if(!n||e in n)return"";for(let r=0;r<VR.length;r++)if(yX(e,VR[r])in n)return VR[r];return""}function yX(t,e){return e?"".concat(e).concat(bwe(t)):t}function _we(t,e){return e?"-".concat(e.toLowerCase(),"-").concat(t):t}function bwe(t){let e="",n=!0;for(let r=0;r<t.length;r++)n?(e+=t[r].toUpperCase(),n=!1):t[r]==="-"?n=!0:e+=t[r];return e}Of.default=vX();Object.defineProperty(Fr,"__esModule",{value:!0});Fr.addClassName=xX;Fr.addEvent=wwe;Fr.addUserSelectStyles=kwe;Fr.createCSSTransform=Iwe;Fr.createSVGTransform=Mwe;Fr.getTouch=Lwe;Fr.getTouchIdentifier=Owe;Fr.getTranslation=KN;Fr.innerHeight=Awe;Fr.innerWidth=Rwe;Fr.matchesSelector=bX;Fr.matchesSelectorAndParentsTo=Ewe;Fr.offsetXYFromParent=Pwe;Fr.outerHeight=Swe;Fr.outerWidth=Cwe;Fr.removeClassName=EX;Fr.removeEvent=Twe;Fr.removeUserSelectStyles=Nwe;var xo=Jl,Lz=xwe(Of);function _X(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(_X=function(r){return r?n:e})(t)}function xwe(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=_X(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}let zb="";function bX(t,e){return zb||(zb=(0,xo.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],function(n){return(0,xo.isFunction)(t[n])})),(0,xo.isFunction)(t[zb])?t[zb](e):!1}function Ewe(t,e,n){let r=t;do{if(bX(r,e))return!0;if(r===n)return!1;r=r.parentNode}while(r);return!1}function wwe(t,e,n,r){if(!t)return;const i={capture:!0,...r};t.addEventListener?t.addEventListener(e,n,i):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}function Twe(t,e,n,r){if(!t)return;const i={capture:!0,...r};t.removeEventListener?t.removeEventListener(e,n,i):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=null}function Swe(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,xo.int)(n.borderTopWidth),e+=(0,xo.int)(n.borderBottomWidth),e}function Cwe(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e+=(0,xo.int)(n.borderLeftWidth),e+=(0,xo.int)(n.borderRightWidth),e}function Awe(t){let e=t.clientHeight;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,xo.int)(n.paddingTop),e-=(0,xo.int)(n.paddingBottom),e}function Rwe(t){let e=t.clientWidth;const n=t.ownerDocument.defaultView.getComputedStyle(t);return e-=(0,xo.int)(n.paddingLeft),e-=(0,xo.int)(n.paddingRight),e}function Pwe(t,e,n){const i=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect(),s=(t.clientX+e.scrollLeft-i.left)/n,o=(t.clientY+e.scrollTop-i.top)/n;return{x:s,y:o}}function Iwe(t,e){const n=KN(t,e,"px");return{[(0,Lz.browserPrefixToKey)("transform",Lz.default)]:n}}function Mwe(t,e){return KN(t,e,"")}function KN(t,e,n){let{x:r,y:i}=t,s="translate(".concat(r).concat(n,",").concat(i).concat(n,")");if(e){const o="".concat(typeof e.x=="string"?e.x:e.x+n),a="".concat(typeof e.y=="string"?e.y:e.y+n);s="translate(".concat(o,", ").concat(a,")")+s}return s}function Lwe(t,e){return t.targetTouches&&(0,xo.findInArray)(t.targetTouches,n=>e===n.identifier)||t.changedTouches&&(0,xo.findInArray)(t.changedTouches,n=>e===n.identifier)}function Owe(t){if(t.targetTouches&&t.targetTouches[0])return t.targetTouches[0].identifier;if(t.changedTouches&&t.changedTouches[0])return t.changedTouches[0].identifier}function kwe(t){if(!t)return;let e=t.getElementById("react-draggable-style-el");e||(e=t.createElement("style"),e.type="text/css",e.id="react-draggable-style-el",e.innerHTML=`.react-draggable-transparent-selection *::-moz-selection {all: inherit;}
`,e.innerHTML+=`.react-draggable-transparent-selection *::selection {all: inherit;}
`,t.getElementsByTagName("head")[0].appendChild(e)),t.body&&xX(t.body,"react-draggable-transparent-selection")}function Nwe(t){if(t)try{if(t.body&&EX(t.body,"react-draggable-transparent-selection"),t.selection)t.selection.empty();else{const e=(t.defaultView||window).getSelection();e&&e.type!=="Caret"&&e.removeAllRanges()}}catch{}}function xX(t,e){t.classList?t.classList.add(e):t.className.match(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)")))||(t.className+=" ".concat(e))}function EX(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(?:^|\\s)".concat(e,"(?!\\S)"),"g"),"")}var ec={};Object.defineProperty(ec,"__esModule",{value:!0});ec.canDragX=Fwe;ec.canDragY=Uwe;ec.createCoreData=$we;ec.createDraggableData=jwe;ec.getBoundPosition=Dwe;ec.getControlPosition=zwe;ec.snapToGrid=Bwe;var ao=Jl,nm=Fr;function Dwe(t,e,n){if(!t.props.bounds)return[e,n];let{bounds:r}=t.props;r=typeof r=="string"?r:Gwe(r);const i=qN(t);if(typeof r=="string"){const{ownerDocument:s}=i,o=s.defaultView;let a;if(r==="parent"?a=i.parentNode:a=s.querySelector(r),!(a instanceof o.HTMLElement))throw new Error('Bounds selector "'+r+'" could not find an element.');const l=a,c=o.getComputedStyle(i),u=o.getComputedStyle(l);r={left:-i.offsetLeft+(0,ao.int)(u.paddingLeft)+(0,ao.int)(c.marginLeft),top:-i.offsetTop+(0,ao.int)(u.paddingTop)+(0,ao.int)(c.marginTop),right:(0,nm.innerWidth)(l)-(0,nm.outerWidth)(i)-i.offsetLeft+(0,ao.int)(u.paddingRight)-(0,ao.int)(c.marginRight),bottom:(0,nm.innerHeight)(l)-(0,nm.outerHeight)(i)-i.offsetTop+(0,ao.int)(u.paddingBottom)-(0,ao.int)(c.marginBottom)}}return(0,ao.isNum)(r.right)&&(e=Math.min(e,r.right)),(0,ao.isNum)(r.bottom)&&(n=Math.min(n,r.bottom)),(0,ao.isNum)(r.left)&&(e=Math.max(e,r.left)),(0,ao.isNum)(r.top)&&(n=Math.max(n,r.top)),[e,n]}function Bwe(t,e,n){const r=Math.round(e/t[0])*t[0],i=Math.round(n/t[1])*t[1];return[r,i]}function Fwe(t){return t.props.axis==="both"||t.props.axis==="x"}function Uwe(t){return t.props.axis==="both"||t.props.axis==="y"}function zwe(t,e,n){const r=typeof e=="number"?(0,nm.getTouch)(t,e):null;if(typeof e=="number"&&!r)return null;const i=qN(n),s=n.props.offsetParent||i.offsetParent||i.ownerDocument.body;return(0,nm.offsetXYFromParent)(r||t,s,n.props.scale)}function $we(t,e,n){const r=!(0,ao.isNum)(t.lastX),i=qN(t);return r?{node:i,deltaX:0,deltaY:0,lastX:e,lastY:n,x:e,y:n}:{node:i,deltaX:e-t.lastX,deltaY:n-t.lastY,lastX:t.lastX,lastY:t.lastY,x:e,y:n}}function jwe(t,e){const n=t.props.scale;return{node:e.node,x:t.state.x+e.deltaX/n,y:t.state.y+e.deltaY/n,deltaX:e.deltaX/n,deltaY:e.deltaY/n,lastX:t.state.x,lastY:t.state.y}}function Gwe(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}function qN(t){const e=t.findDOMNode();if(!e)throw new Error("<DraggableCore>: Unmounted during event!");return e}var YS={},KS={};Object.defineProperty(KS,"__esModule",{value:!0});KS.default=Hwe;function Hwe(){}Object.defineProperty(YS,"__esModule",{value:!0});YS.default=void 0;var WR=Wwe(A),zs=ZN(Xc),Vwe=ZN(Wc),rs=Fr,gu=ec,XR=Jl,S0=ZN(KS);function ZN(t){return t&&t.__esModule?t:{default:t}}function wX(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(wX=function(r){return r?n:e})(t)}function Wwe(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=wX(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function Es(t,e,n){return e=Xwe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xwe(t){var e=Ywe(t,"string");return typeof e=="symbol"?e:String(e)}function Ywe(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const Aa={touch:{start:"touchstart",move:"touchmove",stop:"touchend"},mouse:{start:"mousedown",move:"mousemove",stop:"mouseup"}};let vu=Aa.mouse,qS=class extends WR.Component{constructor(){super(...arguments),Es(this,"dragging",!1),Es(this,"lastX",NaN),Es(this,"lastY",NaN),Es(this,"touchIdentifier",null),Es(this,"mounted",!1),Es(this,"handleDragStart",e=>{if(this.props.onMouseDown(e),!this.props.allowAnyClick&&typeof e.button=="number"&&e.button!==0)return!1;const n=this.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:r}=n;if(this.props.disabled||!(e.target instanceof r.defaultView.Node)||this.props.handle&&!(0,rs.matchesSelectorAndParentsTo)(e.target,this.props.handle,n)||this.props.cancel&&(0,rs.matchesSelectorAndParentsTo)(e.target,this.props.cancel,n))return;e.type==="touchstart"&&e.preventDefault();const i=(0,rs.getTouchIdentifier)(e);this.touchIdentifier=i;const s=(0,gu.getControlPosition)(e,i,this);if(s==null)return;const{x:o,y:a}=s,l=(0,gu.createCoreData)(this,o,a);(0,S0.default)("DraggableCore: handleDragStart: %j",l),(0,S0.default)("calling",this.props.onStart),!(this.props.onStart(e,l)===!1||this.mounted===!1)&&(this.props.enableUserSelectHack&&(0,rs.addUserSelectStyles)(r),this.dragging=!0,this.lastX=o,this.lastY=a,(0,rs.addEvent)(r,vu.move,this.handleDrag),(0,rs.addEvent)(r,vu.stop,this.handleDragStop))}),Es(this,"handleDrag",e=>{const n=(0,gu.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:i}=n;if(Array.isArray(this.props.grid)){let a=r-this.lastX,l=i-this.lastY;if([a,l]=(0,gu.snapToGrid)(this.props.grid,a,l),!a&&!l)return;r=this.lastX+a,i=this.lastY+l}const s=(0,gu.createCoreData)(this,r,i);if((0,S0.default)("DraggableCore: handleDrag: %j",s),this.props.onDrag(e,s)===!1||this.mounted===!1){try{this.handleDragStop(new MouseEvent("mouseup"))}catch{const l=document.createEvent("MouseEvents");l.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(l)}return}this.lastX=r,this.lastY=i}),Es(this,"handleDragStop",e=>{if(!this.dragging)return;const n=(0,gu.getControlPosition)(e,this.touchIdentifier,this);if(n==null)return;let{x:r,y:i}=n;if(Array.isArray(this.props.grid)){let l=r-this.lastX||0,c=i-this.lastY||0;[l,c]=(0,gu.snapToGrid)(this.props.grid,l,c),r=this.lastX+l,i=this.lastY+c}const s=(0,gu.createCoreData)(this,r,i);if(this.props.onStop(e,s)===!1||this.mounted===!1)return!1;const a=this.findDOMNode();a&&this.props.enableUserSelectHack&&(0,rs.removeUserSelectStyles)(a.ownerDocument),(0,S0.default)("DraggableCore: handleDragStop: %j",s),this.dragging=!1,this.lastX=NaN,this.lastY=NaN,a&&((0,S0.default)("DraggableCore: Removing handlers"),(0,rs.removeEvent)(a.ownerDocument,vu.move,this.handleDrag),(0,rs.removeEvent)(a.ownerDocument,vu.stop,this.handleDragStop))}),Es(this,"onMouseDown",e=>(vu=Aa.mouse,this.handleDragStart(e))),Es(this,"onMouseUp",e=>(vu=Aa.mouse,this.handleDragStop(e))),Es(this,"onTouchStart",e=>(vu=Aa.touch,this.handleDragStart(e))),Es(this,"onTouchEnd",e=>(vu=Aa.touch,this.handleDragStop(e)))}componentDidMount(){this.mounted=!0;const e=this.findDOMNode();e&&(0,rs.addEvent)(e,Aa.touch.start,this.onTouchStart,{passive:!1})}componentWillUnmount(){this.mounted=!1;const e=this.findDOMNode();if(e){const{ownerDocument:n}=e;(0,rs.removeEvent)(n,Aa.mouse.move,this.handleDrag),(0,rs.removeEvent)(n,Aa.touch.move,this.handleDrag),(0,rs.removeEvent)(n,Aa.mouse.stop,this.handleDragStop),(0,rs.removeEvent)(n,Aa.touch.stop,this.handleDragStop),(0,rs.removeEvent)(e,Aa.touch.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,rs.removeUserSelectStyles)(n)}}findDOMNode(){var e,n;return(e=this.props)!==null&&e!==void 0&&e.nodeRef?(n=this.props)===null||n===void 0||(n=n.nodeRef)===null||n===void 0?void 0:n.current:Vwe.default.findDOMNode(this)}render(){return WR.cloneElement(WR.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};YS.default=qS;Es(qS,"displayName","DraggableCore");Es(qS,"propTypes",{allowAnyClick:zs.default.bool,children:zs.default.node.isRequired,disabled:zs.default.bool,enableUserSelectHack:zs.default.bool,offsetParent:function(t,e){if(t[e]&&t[e].nodeType!==1)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:zs.default.arrayOf(zs.default.number),handle:zs.default.string,cancel:zs.default.string,nodeRef:zs.default.object,onStart:zs.default.func,onDrag:zs.default.func,onStop:zs.default.func,onMouseDown:zs.default.func,scale:zs.default.number,className:XR.dontSetMe,style:XR.dontSetMe,transform:XR.dontSetMe});Es(qS,"defaultProps",{allowAnyClick:!1,disabled:!1,enableUserSelectHack:!0,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1});(function(t){Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return l.default}}),t.default=void 0;var e=h(A),n=u(Xc),r=u(Wc),i=u(fwe),s=Fr,o=ec,a=Jl,l=u(YS),c=u(KS);function u(x){return x&&x.__esModule?x:{default:x}}function d(x){if(typeof WeakMap!="function")return null;var b=new WeakMap,E=new WeakMap;return(d=function(w){return w?E:b})(x)}function h(x,b){if(!b&&x&&x.__esModule)return x;if(x===null||typeof x!="object"&&typeof x!="function")return{default:x};var E=d(b);if(E&&E.has(x))return E.get(x);var w={},T=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var C in x)if(C!=="default"&&Object.prototype.hasOwnProperty.call(x,C)){var P=T?Object.getOwnPropertyDescriptor(x,C):null;P&&(P.get||P.set)?Object.defineProperty(w,C,P):w[C]=x[C]}return w.default=x,E&&E.set(x,w),w}function f(){return f=Object.assign?Object.assign.bind():function(x){for(var b=1;b<arguments.length;b++){var E=arguments[b];for(var w in E)Object.prototype.hasOwnProperty.call(E,w)&&(x[w]=E[w])}return x},f.apply(this,arguments)}function p(x,b,E){return b=m(b),b in x?Object.defineProperty(x,b,{value:E,enumerable:!0,configurable:!0,writable:!0}):x[b]=E,x}function m(x){var b=_(x,"string");return typeof b=="symbol"?b:String(b)}function _(x,b){if(typeof x!="object"||x===null)return x;var E=x[Symbol.toPrimitive];if(E!==void 0){var w=E.call(x,b||"default");if(typeof w!="object")return w;throw new TypeError("@@toPrimitive must return a primitive value.")}return(b==="string"?String:Number)(x)}class y extends e.Component{static getDerivedStateFromProps(b,E){let{position:w}=b,{prevPropsPosition:T}=E;return w&&(!T||w.x!==T.x||w.y!==T.y)?((0,c.default)("Draggable: getDerivedStateFromProps %j",{position:w,prevPropsPosition:T}),{x:w.x,y:w.y,prevPropsPosition:{...w}}):null}constructor(b){super(b),p(this,"onDragStart",(E,w)=>{if((0,c.default)("Draggable: onDragStart: %j",w),this.props.onStart(E,(0,o.createDraggableData)(this,w))===!1)return!1;this.setState({dragging:!0,dragged:!0})}),p(this,"onDrag",(E,w)=>{if(!this.state.dragging)return!1;(0,c.default)("Draggable: onDrag: %j",w);const T=(0,o.createDraggableData)(this,w),C={x:T.x,y:T.y,slackX:0,slackY:0};if(this.props.bounds){const{x:M,y:N}=C;C.x+=this.state.slackX,C.y+=this.state.slackY;const[F,I]=(0,o.getBoundPosition)(this,C.x,C.y);C.x=F,C.y=I,C.slackX=this.state.slackX+(M-C.x),C.slackY=this.state.slackY+(N-C.y),T.x=C.x,T.y=C.y,T.deltaX=C.x-this.state.x,T.deltaY=C.y-this.state.y}if(this.props.onDrag(E,T)===!1)return!1;this.setState(C)}),p(this,"onDragStop",(E,w)=>{if(!this.state.dragging||this.props.onStop(E,(0,o.createDraggableData)(this,w))===!1)return!1;(0,c.default)("Draggable: onDragStop: %j",w);const C={dragging:!1,slackX:0,slackY:0};if(!!this.props.position){const{x:M,y:N}=this.props.position;C.x=M,C.y=N}this.setState(C)}),this.state={dragging:!1,dragged:!1,x:b.position?b.position.x:b.defaultPosition.x,y:b.position?b.position.y:b.defaultPosition.y,prevPropsPosition:{...b.position},slackX:0,slackY:0,isElementSVG:!1},b.position&&!(b.onDrag||b.onStop)&&console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element.")}componentDidMount(){typeof window.SVGElement<"u"&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}componentWillUnmount(){this.setState({dragging:!1})}findDOMNode(){var b,E;return(b=(E=this.props)===null||E===void 0||(E=E.nodeRef)===null||E===void 0?void 0:E.current)!==null&&b!==void 0?b:r.default.findDOMNode(this)}render(){const{axis:b,bounds:E,children:w,defaultPosition:T,defaultClassName:C,defaultClassNameDragging:P,defaultClassNameDragged:M,position:N,positionOffset:F,scale:I,...k}=this.props;let R={},z=null;const G=!!!N||this.state.dragging,j=N||T,H={x:(0,o.canDragX)(this)&&G?this.state.x:j.x,y:(0,o.canDragY)(this)&&G?this.state.y:j.y};this.state.isElementSVG?z=(0,s.createSVGTransform)(H,F):R=(0,s.createCSSTransform)(H,F);const Q=(0,i.default)(w.props.className||"",C,{[P]:this.state.dragging,[M]:this.state.dragged});return e.createElement(l.default,f({},k,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),e.cloneElement(e.Children.only(w),{className:Q,style:{...w.props.style,...R},transform:z}))}}t.default=y,p(y,"displayName","Draggable"),p(y,"propTypes",{...l.default.propTypes,axis:n.default.oneOf(["both","x","y","none"]),bounds:n.default.oneOfType([n.default.shape({left:n.default.number,right:n.default.number,top:n.default.number,bottom:n.default.number}),n.default.string,n.default.oneOf([!1])]),defaultClassName:n.default.string,defaultClassNameDragging:n.default.string,defaultClassNameDragged:n.default.string,defaultPosition:n.default.shape({x:n.default.number,y:n.default.number}),positionOffset:n.default.shape({x:n.default.oneOfType([n.default.number,n.default.string]),y:n.default.oneOfType([n.default.number,n.default.string])}),position:n.default.shape({x:n.default.number,y:n.default.number}),className:a.dontSetMe,style:a.dontSetMe,transform:a.dontSetMe}),p(y,"defaultProps",{...l.default.defaultProps,axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},scale:1})})(mX);const{default:TX,DraggableCore:Kwe}=mX;XS.exports=TX;XS.exports.default=TX;XS.exports.DraggableCore=Kwe;var SX=XS.exports,ZS={exports:{}},D1={},QN={};QN.__esModule=!0;QN.cloneElement=tTe;var qwe=Zwe(A);function Zwe(t){return t&&t.__esModule?t:{default:t}}function Oz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function kz(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Oz(Object(n),!0).forEach(function(r){Qwe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Oz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Qwe(t,e,n){return e=Jwe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jwe(t){var e=eTe(t,"string");return typeof e=="symbol"?e:String(e)}function eTe(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function tTe(t,e){return e.style&&t.props.style&&(e.style=kz(kz({},t.props.style),e.style)),e.className&&t.props.className&&(e.className=t.props.className+" "+e.className),qwe.default.cloneElement(t,e)}var B1={};B1.__esModule=!0;B1.resizableProps=void 0;var nn=nTe(Xc);function nTe(t){return t&&t.__esModule?t:{default:t}}var rTe={axis:nn.default.oneOf(["both","x","y","none"]),className:nn.default.string,children:nn.default.element.isRequired,draggableOpts:nn.default.shape({allowAnyClick:nn.default.bool,cancel:nn.default.string,children:nn.default.node,disabled:nn.default.bool,enableUserSelectHack:nn.default.bool,offsetParent:nn.default.node,grid:nn.default.arrayOf(nn.default.number),handle:nn.default.string,nodeRef:nn.default.object,onStart:nn.default.func,onDrag:nn.default.func,onStop:nn.default.func,onMouseDown:nn.default.func,scale:nn.default.number}),height:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(i.axis==="both"||i.axis==="y"){var s;return(s=nn.default.number).isRequired.apply(s,n)}return nn.default.number.apply(nn.default,n)},handle:nn.default.oneOfType([nn.default.node,nn.default.func]),handleSize:nn.default.arrayOf(nn.default.number),lockAspectRatio:nn.default.bool,maxConstraints:nn.default.arrayOf(nn.default.number),minConstraints:nn.default.arrayOf(nn.default.number),onResizeStop:nn.default.func,onResizeStart:nn.default.func,onResize:nn.default.func,resizeHandles:nn.default.arrayOf(nn.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),transformScale:nn.default.number,width:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n[0];if(i.axis==="both"||i.axis==="x"){var s;return(s=nn.default.number).isRequired.apply(s,n)}return nn.default.number.apply(nn.default,n)}};B1.resizableProps=rTe;D1.__esModule=!0;D1.default=void 0;var C0=lTe(A),iTe=SX,sTe=QN,oTe=B1,aTe=["children","className","draggableOpts","width","height","handle","handleSize","lockAspectRatio","axis","minConstraints","maxConstraints","onResize","onResizeStop","onResizeStart","resizeHandles","transformScale"];function CX(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(CX=function(i){return i?n:e})(t)}function lTe(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=CX(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function SM(){return SM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},SM.apply(this,arguments)}function cTe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function Nz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function YR(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Nz(Object(n),!0).forEach(function(r){uTe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Nz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function uTe(t,e,n){return e=dTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dTe(t){var e=hTe(t,"string");return typeof e=="symbol"?e:String(e)}function hTe(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fTe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,CM(t,e)}function CM(t,e){return CM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},CM(t,e)}var JN=function(t){fTe(e,t);function e(){for(var r,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s))||this,r.handleRefs={},r.lastHandleRect=null,r.slack=null,r}var n=e.prototype;return n.componentWillUnmount=function(){this.resetData()},n.resetData=function(){this.lastHandleRect=this.slack=null},n.runConstraints=function(i,s){var o=this.props,a=o.minConstraints,l=o.maxConstraints,c=o.lockAspectRatio;if(!a&&!l&&!c)return[i,s];if(c){var u=this.props.width/this.props.height,d=i-this.props.width,h=s-this.props.height;Math.abs(d)>Math.abs(h*u)?s=i/u:i=s*u}var f=i,p=s,m=this.slack||[0,0],_=m[0],y=m[1];return i+=_,s+=y,a&&(i=Math.max(a[0],i),s=Math.max(a[1],s)),l&&(i=Math.min(l[0],i),s=Math.min(l[1],s)),this.slack=[_+(f-i),y+(p-s)],[i,s]},n.resizeHandler=function(i,s){var o=this;return function(a,l){var c=l.node,u=l.deltaX,d=l.deltaY;i==="onResizeStart"&&o.resetData();var h=(o.props.axis==="both"||o.props.axis==="x")&&s!=="n"&&s!=="s",f=(o.props.axis==="both"||o.props.axis==="y")&&s!=="e"&&s!=="w";if(!(!h&&!f)){var p=s[0],m=s[s.length-1],_=c.getBoundingClientRect();if(o.lastHandleRect!=null){if(m==="w"){var y=_.left-o.lastHandleRect.left;u+=y}if(p==="n"){var x=_.top-o.lastHandleRect.top;d+=x}}o.lastHandleRect=_,m==="w"&&(u=-u),p==="n"&&(d=-d);var b=o.props.width+(h?u/o.props.transformScale:0),E=o.props.height+(f?d/o.props.transformScale:0),w=o.runConstraints(b,E);b=w[0],E=w[1];var T=b!==o.props.width||E!==o.props.height,C=typeof o.props[i]=="function"?o.props[i]:null,P=i==="onResize"&&!T;C&&!P&&(a.persist==null||a.persist(),C(a,{node:c,size:{width:b,height:E},handle:s})),i==="onResizeStop"&&o.resetData()}}},n.renderResizeHandle=function(i,s){var o=this.props.handle;if(!o)return C0.createElement("span",{className:"react-resizable-handle react-resizable-handle-"+i,ref:s});if(typeof o=="function")return o(i,s);var a=typeof o.type=="string",l=YR({ref:s},a?{}:{handleAxis:i});return C0.cloneElement(o,l)},n.render=function(){var i=this,s=this.props,o=s.children,a=s.className,l=s.draggableOpts;s.width,s.height,s.handle,s.handleSize,s.lockAspectRatio,s.axis,s.minConstraints,s.maxConstraints,s.onResize,s.onResizeStop,s.onResizeStart;var c=s.resizeHandles;s.transformScale;var u=cTe(s,aTe);return(0,sTe.cloneElement)(o,YR(YR({},u),{},{className:(a?a+" ":"")+"react-resizable",children:[].concat(o.props.children,c.map(function(d){var h,f=(h=i.handleRefs[d])!=null?h:i.handleRefs[d]=C0.createRef();return C0.createElement(iTe.DraggableCore,SM({},l,{nodeRef:f,key:"resizableHandle-"+d,onStop:i.resizeHandler("onResizeStop",d),onStart:i.resizeHandler("onResizeStart",d),onDrag:i.resizeHandler("onResize",d)}),i.renderResizeHandle(d,f))}))}))},e}(C0.Component);D1.default=JN;JN.propTypes=oTe.resizableProps;JN.defaultProps={axis:"both",handleSize:[20,20],lockAspectRatio:!1,minConstraints:[20,20],maxConstraints:[1/0,1/0],resizeHandles:["se"],transformScale:1};var QS={};QS.__esModule=!0;QS.default=void 0;var KR=yTe(A),pTe=AX(Xc),mTe=AX(D1),gTe=B1,vTe=["handle","handleSize","onResize","onResizeStart","onResizeStop","draggableOpts","minConstraints","maxConstraints","lockAspectRatio","axis","width","height","resizeHandles","style","transformScale"];function AX(t){return t&&t.__esModule?t:{default:t}}function RX(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(RX=function(i){return i?n:e})(t)}function yTe(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=RX(e);if(n&&n.has(t))return n.get(t);var r={},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function AM(){return AM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},AM.apply(this,arguments)}function Dz(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Pw(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Dz(Object(n),!0).forEach(function(r){_Te(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Dz(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _Te(t,e,n){return e=bTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bTe(t){var e=xTe(t,"string");return typeof e=="symbol"?e:String(e)}function xTe(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ETe(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function wTe(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,RM(t,e)}function RM(t,e){return RM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},RM(t,e)}var PX=function(t){wTe(e,t);function e(){for(var r,i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r=t.call.apply(t,[this].concat(s))||this,r.state={width:r.props.width,height:r.props.height,propsWidth:r.props.width,propsHeight:r.props.height},r.onResize=function(a,l){var c=l.size;r.props.onResize?(a.persist==null||a.persist(),r.setState(c,function(){return r.props.onResize&&r.props.onResize(a,l)})):r.setState(c)},r}e.getDerivedStateFromProps=function(i,s){return s.propsWidth!==i.width||s.propsHeight!==i.height?{width:i.width,height:i.height,propsWidth:i.width,propsHeight:i.height}:null};var n=e.prototype;return n.render=function(){var i=this.props,s=i.handle,o=i.handleSize;i.onResize;var a=i.onResizeStart,l=i.onResizeStop,c=i.draggableOpts,u=i.minConstraints,d=i.maxConstraints,h=i.lockAspectRatio,f=i.axis;i.width,i.height;var p=i.resizeHandles,m=i.style,_=i.transformScale,y=ETe(i,vTe);return KR.createElement(mTe.default,{axis:f,draggableOpts:c,handle:s,handleSize:o,height:this.state.height,lockAspectRatio:h,maxConstraints:d,minConstraints:u,onResizeStart:a,onResize:this.onResize,onResizeStop:l,resizeHandles:p,transformScale:_,width:this.state.width},KR.createElement("div",AM({},y,{style:Pw(Pw({},m),{},{width:this.state.width+"px",height:this.state.height+"px"})})))},e}(KR.Component);QS.default=PX;PX.propTypes=Pw(Pw({},gTe.resizableProps),{},{children:pTe.default.element});ZS.exports=function(){throw new Error("Don't instantiate Resizable directly! Use require('react-resizable').Resizable")};ZS.exports.Resizable=D1.default;ZS.exports.ResizableBox=QS.default;var TTe=ZS.exports,Mc={};Object.defineProperty(Mc,"__esModule",{value:!0});Mc.resizeHandleType=Mc.resizeHandleAxesType=Mc.default=void 0;var on=IX(Xc),STe=IX(A);function IX(t){return t&&t.__esModule?t:{default:t}}const CTe=Mc.resizeHandleAxesType=on.default.arrayOf(on.default.oneOf(["s","w","e","n","sw","nw","se","ne"])),ATe=Mc.resizeHandleType=on.default.oneOfType([on.default.node,on.default.func]);Mc.default={className:on.default.string,style:on.default.object,width:on.default.number,autoSize:on.default.bool,cols:on.default.number,draggableCancel:on.default.string,draggableHandle:on.default.string,verticalCompact:function(t){t.verticalCompact},compactType:on.default.oneOf(["vertical","horizontal"]),layout:function(t){var e=t.layout;e!==void 0&&cn.validateLayout(e,"layout")},margin:on.default.arrayOf(on.default.number),containerPadding:on.default.arrayOf(on.default.number),rowHeight:on.default.number,maxRows:on.default.number,isBounded:on.default.bool,isDraggable:on.default.bool,isResizable:on.default.bool,allowOverlap:on.default.bool,preventCollision:on.default.bool,useCSSTransforms:on.default.bool,transformScale:on.default.number,isDroppable:on.default.bool,resizeHandles:CTe,resizeHandle:ATe,onLayoutChange:on.default.func,onDragStart:on.default.func,onDrag:on.default.func,onDragStop:on.default.func,onResizeStart:on.default.func,onResize:on.default.func,onResizeStop:on.default.func,onDrop:on.default.func,droppingItem:on.default.shape({i:on.default.string.isRequired,w:on.default.number.isRequired,h:on.default.number.isRequired}),children:function(t,e){const n=t[e],r={};STe.default.Children.forEach(n,function(i){if((i==null?void 0:i.key)!=null){if(r[i.key])throw new Error('Duplicate child key "'+i.key+'" found! This will cause problems in ReactGridLayout.');r[i.key]=!0}})},innerRef:on.default.any};Object.defineProperty(WS,"__esModule",{value:!0});WS.default=void 0;var pp=e3(A),Cn=e3(Xc),RTe=SX,PTe=TTe,mp=cn,Fi=Ql,Bz=Mc,ITe=e3(UN);function e3(t){return t&&t.__esModule?t:{default:t}}function Tl(t,e,n){return e=MTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MTe(t){var e=LTe(t,"string");return typeof e=="symbol"?e:String(e)}function LTe(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class t3 extends pp.default.Component{constructor(){super(...arguments),Tl(this,"state",{resizing:null,dragging:null,className:""}),Tl(this,"elementRef",pp.default.createRef()),Tl(this,"onDragStart",(e,n)=>{let{node:r}=n;const{onDragStart:i,transformScale:s}=this.props;if(!i)return;const o={top:0,left:0},{offsetParent:a}=r;if(!a)return;const l=a.getBoundingClientRect(),c=r.getBoundingClientRect(),u=c.left/s,d=l.left/s,h=c.top/s,f=l.top/s;o.left=u-d+a.scrollLeft,o.top=h-f+a.scrollTop,this.setState({dragging:o});const{x:p,y:m}=(0,Fi.calcXY)(this.getPositionParams(),o.top,o.left,this.props.w,this.props.h);return i.call(this,this.props.i,p,m,{e,node:r,newPosition:o})}),Tl(this,"onDrag",(e,n)=>{let{node:r,deltaX:i,deltaY:s}=n;const{onDrag:o}=this.props;if(!o)return;if(!this.state.dragging)throw new Error("onDrag called before onDragStart.");let a=this.state.dragging.top+s,l=this.state.dragging.left+i;const{isBounded:c,i:u,w:d,h,containerWidth:f}=this.props,p=this.getPositionParams();if(c){const{offsetParent:b}=r;if(b){const{margin:E,rowHeight:w,containerPadding:T}=this.props,C=b.clientHeight-(0,Fi.calcGridItemWHPx)(h,w,E[1]);a=(0,Fi.clamp)(a-T[1],0,C);const P=(0,Fi.calcGridColWidth)(p),M=f-(0,Fi.calcGridItemWHPx)(d,P,E[0]);l=(0,Fi.clamp)(l-T[0],0,M)}}const m={top:a,left:l};this.setState({dragging:m});const{containerPadding:_}=this.props,{x:y,y:x}=(0,Fi.calcXY)(p,a-_[1],l-_[0],d,h);return o.call(this,u,y,x,{e,node:r,newPosition:m})}),Tl(this,"onDragStop",(e,n)=>{let{node:r}=n;const{onDragStop:i}=this.props;if(!i)return;if(!this.state.dragging)throw new Error("onDragEnd called before onDragStart.");const{w:s,h:o,i:a,containerPadding:l}=this.props,{left:c,top:u}=this.state.dragging,d={top:u,left:c};this.setState({dragging:null});const{x:h,y:f}=(0,Fi.calcXY)(this.getPositionParams(),u-l[1],c-l[0],s,o);return i.call(this,a,h,f,{e,node:r,newPosition:d})}),Tl(this,"onResizeStop",(e,n,r)=>this.onResizeHandler(e,n,r,"onResizeStop")),Tl(this,"onResizeStart",(e,n,r)=>this.onResizeHandler(e,n,r,"onResizeStart")),Tl(this,"onResize",(e,n,r)=>this.onResizeHandler(e,n,r,"onResize"))}shouldComponentUpdate(e,n){if(this.props.children!==e.children||this.props.droppingPosition!==e.droppingPosition)return!0;const r=(0,Fi.calcGridItemPosition)(this.getPositionParams(this.props),this.props.x,this.props.y,this.props.w,this.props.h,this.state),i=(0,Fi.calcGridItemPosition)(this.getPositionParams(e),e.x,e.y,e.w,e.h,n);return!(0,mp.fastPositionEqual)(r,i)||this.props.useCSSTransforms!==e.useCSSTransforms}componentDidMount(){this.moveDroppingItem({})}componentDidUpdate(e){this.moveDroppingItem(e)}moveDroppingItem(e){const{droppingPosition:n}=this.props;if(!n)return;const r=this.elementRef.current;if(!r)return;const i=e.droppingPosition||{left:0,top:0},{dragging:s}=this.state,o=s&&n.left!==i.left||n.top!==i.top;if(!s)this.onDragStart(n.e,{node:r,deltaX:n.left,deltaY:n.top});else if(o){const a=n.left-s.left,l=n.top-s.top;this.onDrag(n.e,{node:r,deltaX:a,deltaY:l})}}getPositionParams(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props;return{cols:e.cols,containerPadding:e.containerPadding,containerWidth:e.containerWidth,margin:e.margin,maxRows:e.maxRows,rowHeight:e.rowHeight}}createStyle(e){const{usePercentages:n,containerWidth:r,useCSSTransforms:i}=this.props;let s;return i?s=(0,mp.setTransform)(e):(s=(0,mp.setTopLeft)(e),n&&(s.left=(0,mp.perc)(e.left/r),s.width=(0,mp.perc)(e.width/r))),s}mixinDraggable(e,n){return pp.default.createElement(RTe.DraggableCore,{disabled:!n,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop,handle:this.props.handle,cancel:".react-resizable-handle"+(this.props.cancel?","+this.props.cancel:""),scale:this.props.transformScale,nodeRef:this.elementRef},e)}curryResizeHandler(e,n){return(r,i)=>n(r,i,e)}mixinResizable(e,n,r){const{cols:i,minW:s,minH:o,maxW:a,maxH:l,transformScale:c,resizeHandles:u,resizeHandle:d}=this.props,h=this.getPositionParams(),f=(0,Fi.calcGridItemPosition)(h,0,0,i,0).width,p=(0,Fi.calcGridItemPosition)(h,0,0,s,o),m=(0,Fi.calcGridItemPosition)(h,0,0,a,l),_=[p.width,p.height],y=[Math.min(m.width,f),Math.min(m.height,1/0)];return pp.default.createElement(PTe.Resizable,{draggableOpts:{disabled:!r},className:r?void 0:"react-resizable-hide",width:n.width,height:n.height,minConstraints:_,maxConstraints:y,onResizeStop:this.curryResizeHandler(n,this.onResizeStop),onResizeStart:this.curryResizeHandler(n,this.onResizeStart),onResize:this.curryResizeHandler(n,this.onResize),transformScale:c,resizeHandles:u,handle:d},e)}onResizeHandler(e,n,r,i){let{node:s,size:o,handle:a}=n;const l=this.props[i];if(!l)return;const{x:c,y:u,i:d,maxH:h,minH:f,containerWidth:p}=this.props,{minW:m,maxW:_}=this.props;let y=o;s&&(y=(0,mp.resizeItemInDirection)(a,r,o,p),this.setState({resizing:i==="onResizeStop"?null:y}));let{w:x,h:b}=(0,Fi.calcWH)(this.getPositionParams(),y.width,y.height,c,u,a);x=(0,Fi.clamp)(x,Math.max(m,1),_),b=(0,Fi.clamp)(b,f,h),l.call(this,d,x,b,{e,node:s,size:y,handle:a})}render(){const{x:e,y:n,w:r,h:i,isDraggable:s,isResizable:o,droppingPosition:a,useCSSTransforms:l}=this.props,c=(0,Fi.calcGridItemPosition)(this.getPositionParams(),e,n,r,i,this.state),u=pp.default.Children.only(this.props.children);let d=pp.default.cloneElement(u,{ref:this.elementRef,className:(0,ITe.default)("react-grid-item",u.props.className,this.props.className,{static:this.props.static,resizing:!!this.state.resizing,"react-draggable":s,"react-draggable-dragging":!!this.state.dragging,dropping:!!a,cssTransforms:l}),style:{...this.props.style,...u.props.style,...this.createStyle(c)}});return d=this.mixinResizable(d,c,o),d=this.mixinDraggable(d,s),d}}WS.default=t3;Tl(t3,"propTypes",{children:Cn.default.element,cols:Cn.default.number.isRequired,containerWidth:Cn.default.number.isRequired,rowHeight:Cn.default.number.isRequired,margin:Cn.default.array.isRequired,maxRows:Cn.default.number.isRequired,containerPadding:Cn.default.array.isRequired,x:Cn.default.number.isRequired,y:Cn.default.number.isRequired,w:Cn.default.number.isRequired,h:Cn.default.number.isRequired,minW:function(t,e){const n=t[e];if(typeof n!="number")return new Error("minWidth not Number");if(n>t.w||n>t.maxW)return new Error("minWidth larger than item width/maxWidth")},maxW:function(t,e){const n=t[e];if(typeof n!="number")return new Error("maxWidth not Number");if(n<t.w||n<t.minW)return new Error("maxWidth smaller than item width/minWidth")},minH:function(t,e){const n=t[e];if(typeof n!="number")return new Error("minHeight not Number");if(n>t.h||n>t.maxH)return new Error("minHeight larger than item height/maxHeight")},maxH:function(t,e){const n=t[e];if(typeof n!="number")return new Error("maxHeight not Number");if(n<t.h||n<t.minH)return new Error("maxHeight smaller than item height/minHeight")},i:Cn.default.string.isRequired,resizeHandles:Bz.resizeHandleAxesType,resizeHandle:Bz.resizeHandleType,onDragStop:Cn.default.func,onDragStart:Cn.default.func,onDrag:Cn.default.func,onResizeStop:Cn.default.func,onResizeStart:Cn.default.func,onResize:Cn.default.func,isDraggable:Cn.default.bool.isRequired,isResizable:Cn.default.bool.isRequired,isBounded:Cn.default.bool.isRequired,static:Cn.default.bool,useCSSTransforms:Cn.default.bool.isRequired,transformScale:Cn.default.number,className:Cn.default.string,handle:Cn.default.string,cancel:Cn.default.string,droppingPosition:Cn.default.shape({e:Cn.default.object.isRequired,left:Cn.default.number.isRequired,top:Cn.default.number.isRequired})});Tl(t3,"defaultProps",{className:"",cancel:"",handle:"",minH:1,minW:1,maxH:1/0,maxW:1/0,transformScale:1});Object.defineProperty(N1,"__esModule",{value:!0});N1.default=void 0;var nh=DTe(A),qR=FN,OTe=n3(UN),qt=cn,kTe=Ql,Fz=n3(WS),NTe=n3(Mc);function n3(t){return t&&t.__esModule?t:{default:t}}function MX(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(MX=function(r){return r?n:e})(t)}function DTe(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=MX(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function os(t,e,n){return e=BTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function BTe(t){var e=FTe(t,"string");return typeof e=="symbol"?e:String(e)}function FTe(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const Uz="react-grid-layout";let LX=!1;try{LX=/firefox/i.test(navigator.userAgent)}catch{}class JS extends nh.Component{constructor(){super(...arguments),os(this,"state",{activeDrag:null,layout:(0,qt.synchronizeLayoutWithChildren)(this.props.layout,this.props.children,this.props.cols,(0,qt.compactType)(this.props),this.props.allowOverlap),mounted:!1,oldDragItem:null,oldLayout:null,oldResizeItem:null,resizing:!1,droppingDOMNode:null,children:[]}),os(this,"dragEnterCounter",0),os(this,"onDragStart",(e,n,r,i)=>{let{e:s,node:o}=i;const{layout:a}=this.state,l=(0,qt.getLayoutItem)(a,e);if(!l)return;const c={w:l.w,h:l.h,x:l.x,y:l.y,placeholder:!0,i:e};return this.setState({oldDragItem:(0,qt.cloneLayoutItem)(l),oldLayout:a,activeDrag:c}),this.props.onDragStart(a,l,l,null,s,o)}),os(this,"onDrag",(e,n,r,i)=>{let{e:s,node:o}=i;const{oldDragItem:a}=this.state;let{layout:l}=this.state;const{cols:c,allowOverlap:u,preventCollision:d}=this.props,h=(0,qt.getLayoutItem)(l,e);if(!h)return;const f={w:h.w,h:h.h,x:h.x,y:h.y,placeholder:!0,i:e};l=(0,qt.moveElement)(l,h,n,r,!0,d,(0,qt.compactType)(this.props),c,u),this.props.onDrag(l,a,h,f,s,o),this.setState({layout:u?l:(0,qt.compact)(l,(0,qt.compactType)(this.props),c),activeDrag:f})}),os(this,"onDragStop",(e,n,r,i)=>{let{e:s,node:o}=i;if(!this.state.activeDrag)return;const{oldDragItem:a}=this.state;let{layout:l}=this.state;const{cols:c,preventCollision:u,allowOverlap:d}=this.props,h=(0,qt.getLayoutItem)(l,e);if(!h)return;l=(0,qt.moveElement)(l,h,n,r,!0,u,(0,qt.compactType)(this.props),c,d);const p=d?l:(0,qt.compact)(l,(0,qt.compactType)(this.props),c);this.props.onDragStop(p,a,h,null,s,o);const{oldLayout:m}=this.state;this.setState({activeDrag:null,layout:p,oldDragItem:null,oldLayout:null}),this.onLayoutMaybeChanged(p,m)}),os(this,"onResizeStart",(e,n,r,i)=>{let{e:s,node:o}=i;const{layout:a}=this.state,l=(0,qt.getLayoutItem)(a,e);l&&(this.setState({oldResizeItem:(0,qt.cloneLayoutItem)(l),oldLayout:this.state.layout,resizing:!0}),this.props.onResizeStart(a,l,l,null,s,o))}),os(this,"onResize",(e,n,r,i)=>{let{e:s,node:o,size:a,handle:l}=i;const{oldResizeItem:c}=this.state,{layout:u}=this.state,{cols:d,preventCollision:h,allowOverlap:f}=this.props;let p=!1,m,_,y;const[x,b]=(0,qt.withLayoutItem)(u,e,w=>{let T;return _=w.x,y=w.y,["sw","w","nw","n","ne"].indexOf(l)!==-1&&(["sw","nw","w"].indexOf(l)!==-1&&(_=w.x+(w.w-n),n=w.x!==_&&_<0?w.w:n,_=_<0?0:_),["ne","n","nw"].indexOf(l)!==-1&&(y=w.y+(w.h-r),r=w.y!==y&&y<0?w.h:r,y=y<0?0:y),p=!0),h&&!f&&(T=(0,qt.getAllCollisions)(u,{...w,w:n,h:r,x:_,y}).filter(P=>P.i!==w.i).length>0,T&&(y=w.y,r=w.h,_=w.x,n=w.w,p=!1)),w.w=n,w.h=r,w});if(!b)return;m=x,p&&(m=(0,qt.moveElement)(x,b,_,y,!0,this.props.preventCollision,(0,qt.compactType)(this.props),d,f));const E={w:b.w,h:b.h,x:b.x,y:b.y,static:!0,i:e};this.props.onResize(m,c,b,E,s,o),this.setState({layout:f?m:(0,qt.compact)(m,(0,qt.compactType)(this.props),d),activeDrag:E})}),os(this,"onResizeStop",(e,n,r,i)=>{let{e:s,node:o}=i;const{layout:a,oldResizeItem:l}=this.state,{cols:c,allowOverlap:u}=this.props,d=(0,qt.getLayoutItem)(a,e),h=u?a:(0,qt.compact)(a,(0,qt.compactType)(this.props),c);this.props.onResizeStop(h,l,d,null,s,o);const{oldLayout:f}=this.state;this.setState({activeDrag:null,layout:h,oldResizeItem:null,oldLayout:null,resizing:!1}),this.onLayoutMaybeChanged(h,f)}),os(this,"onDragOver",e=>{var x;if(e.preventDefault(),e.stopPropagation(),LX&&!((x=e.nativeEvent.target)!=null&&x.classList.contains(Uz)))return!1;const{droppingItem:n,onDropDragOver:r,margin:i,cols:s,rowHeight:o,maxRows:a,width:l,containerPadding:c,transformScale:u}=this.props,d=r==null?void 0:r(e);if(d===!1)return this.state.droppingDOMNode&&this.removeDroppingPlaceholder(),!1;const h={...n,...d},{layout:f}=this.state,p=e.currentTarget.getBoundingClientRect(),m=e.clientX-p.left,_=e.clientY-p.top,y={left:m/u,top:_/u,e};if(this.state.droppingDOMNode){if(this.state.droppingPosition){const{left:b,top:E}=this.state.droppingPosition;(b!=m||E!=_)&&this.setState({droppingPosition:y})}}else{const b={cols:s,margin:i,maxRows:a,rowHeight:o,containerWidth:l,containerPadding:c||i},E=(0,kTe.calcXY)(b,_,m,h.w,h.h);this.setState({droppingDOMNode:nh.createElement("div",{key:h.i}),droppingPosition:y,layout:[...f,{...h,x:E.x,y:E.y,static:!1,isDraggable:!0}]})}}),os(this,"removeDroppingPlaceholder",()=>{const{droppingItem:e,cols:n}=this.props,{layout:r}=this.state,i=(0,qt.compact)(r.filter(s=>s.i!==e.i),(0,qt.compactType)(this.props),n,this.props.allowOverlap);this.setState({layout:i,droppingDOMNode:null,activeDrag:null,droppingPosition:void 0})}),os(this,"onDragLeave",e=>{e.preventDefault(),e.stopPropagation(),this.dragEnterCounter--,this.dragEnterCounter===0&&this.removeDroppingPlaceholder()}),os(this,"onDragEnter",e=>{e.preventDefault(),e.stopPropagation(),this.dragEnterCounter++}),os(this,"onDrop",e=>{e.preventDefault(),e.stopPropagation();const{droppingItem:n}=this.props,{layout:r}=this.state,i=r.find(s=>s.i===n.i);this.dragEnterCounter=0,this.removeDroppingPlaceholder(),this.props.onDrop(r,i,e)})}componentDidMount(){this.setState({mounted:!0}),this.onLayoutMaybeChanged(this.state.layout,this.props.layout)}static getDerivedStateFromProps(e,n){let r;return n.activeDrag?null:(!(0,qR.deepEqual)(e.layout,n.propsLayout)||e.compactType!==n.compactType?r=e.layout:(0,qt.childrenEqual)(e.children,n.children)||(r=n.layout),r?{layout:(0,qt.synchronizeLayoutWithChildren)(r,e.children,e.cols,(0,qt.compactType)(e),e.allowOverlap),compactType:e.compactType,children:e.children,propsLayout:e.layout}:null)}shouldComponentUpdate(e,n){return this.props.children!==e.children||!(0,qt.fastRGLPropsEqual)(this.props,e,qR.deepEqual)||this.state.activeDrag!==n.activeDrag||this.state.mounted!==n.mounted||this.state.droppingPosition!==n.droppingPosition}componentDidUpdate(e,n){if(!this.state.activeDrag){const r=this.state.layout,i=n.layout;this.onLayoutMaybeChanged(r,i)}}containerHeight(){if(!this.props.autoSize)return;const e=(0,qt.bottom)(this.state.layout),n=this.props.containerPadding?this.props.containerPadding[1]:this.props.margin[1];return e*this.props.rowHeight+(e-1)*this.props.margin[1]+n*2+"px"}onLayoutMaybeChanged(e,n){n||(n=this.state.layout),(0,qR.deepEqual)(n,e)||this.props.onLayoutChange(e)}placeholder(){const{activeDrag:e}=this.state;if(!e)return null;const{width:n,cols:r,margin:i,containerPadding:s,rowHeight:o,maxRows:a,useCSSTransforms:l,transformScale:c}=this.props;return nh.createElement(Fz.default,{w:e.w,h:e.h,x:e.x,y:e.y,i:e.i,className:`react-grid-placeholder ${this.state.resizing?"placeholder-resizing":""}`,containerWidth:n,cols:r,margin:i,containerPadding:s||i,maxRows:a,rowHeight:o,isDraggable:!1,isResizable:!1,isBounded:!1,useCSSTransforms:l,transformScale:c},nh.createElement("div",null))}processGridItem(e,n){if(!e||!e.key)return;const r=(0,qt.getLayoutItem)(this.state.layout,String(e.key));if(!r)return null;const{width:i,cols:s,margin:o,containerPadding:a,rowHeight:l,maxRows:c,isDraggable:u,isResizable:d,isBounded:h,useCSSTransforms:f,transformScale:p,draggableCancel:m,draggableHandle:_,resizeHandles:y,resizeHandle:x}=this.props,{mounted:b,droppingPosition:E}=this.state,w=typeof r.isDraggable=="boolean"?r.isDraggable:!r.static&&u,T=typeof r.isResizable=="boolean"?r.isResizable:!r.static&&d,C=r.resizeHandles||y,P=w&&h&&r.isBounded!==!1;return nh.createElement(Fz.default,{containerWidth:i,cols:s,margin:o,containerPadding:a||o,maxRows:c,rowHeight:l,cancel:m,handle:_,onDragStop:this.onDragStop,onDragStart:this.onDragStart,onDrag:this.onDrag,onResizeStart:this.onResizeStart,onResize:this.onResize,onResizeStop:this.onResizeStop,isDraggable:w,isResizable:T,isBounded:P,useCSSTransforms:f&&b,usePercentages:!b,transformScale:p,w:r.w,h:r.h,x:r.x,y:r.y,i:r.i,minH:r.minH,minW:r.minW,maxH:r.maxH,maxW:r.maxW,static:r.static,droppingPosition:n?E:void 0,resizeHandles:C,resizeHandle:x},e)}render(){const{className:e,style:n,isDroppable:r,innerRef:i}=this.props,s=(0,OTe.default)(Uz,e),o={height:this.containerHeight(),...n};return nh.createElement("div",{ref:i,className:s,style:o,onDrop:r?this.onDrop:qt.noop,onDragLeave:r?this.onDragLeave:qt.noop,onDragEnter:r?this.onDragEnter:qt.noop,onDragOver:r?this.onDragOver:qt.noop},nh.Children.map(this.props.children,a=>this.processGridItem(a)),r&&this.state.droppingDOMNode&&this.processGridItem(this.state.droppingDOMNode,!0),this.placeholder())}}N1.default=JS;os(JS,"displayName","ReactGridLayout");os(JS,"propTypes",NTe.default);os(JS,"defaultProps",{autoSize:!0,cols:12,className:"",style:{},draggableHandle:"",draggableCancel:"",containerPadding:null,rowHeight:150,maxRows:1/0,layout:[],margin:[10,10],isBounded:!1,isDraggable:!0,isResizable:!0,allowOverlap:!1,isDroppable:!1,useCSSTransforms:!0,transformScale:1,verticalCompact:!0,compactType:"vertical",preventCollision:!1,droppingItem:{i:"__dropping-elem__",h:1,w:1},resizeHandles:["se"],onLayoutChange:qt.noop,onDragStart:qt.noop,onDrag:qt.noop,onDragStop:qt.noop,onResizeStart:qt.noop,onResize:qt.noop,onResizeStop:qt.noop,onDrop:qt.noop,onDropDragOver:qt.noop});var eC={},kf={};Object.defineProperty(kf,"__esModule",{value:!0});kf.findOrGenerateResponsiveLayout=$Te;kf.getBreakpointFromWidth=UTe;kf.getColsFromBreakpoint=zTe;kf.sortBreakpoints=r3;var $b=cn;function UTe(t,e){const n=r3(t);let r=n[0];for(let i=1,s=n.length;i<s;i++){const o=n[i];e>t[o]&&(r=o)}return r}function zTe(t,e){if(!e[t])throw new Error("ResponsiveReactGridLayout: `cols` entry for breakpoint "+t+" is missing!");return e[t]}function $Te(t,e,n,r,i,s){if(t[n])return(0,$b.cloneLayout)(t[n]);let o=t[r];const a=r3(e),l=a.slice(a.indexOf(n));for(let c=0,u=l.length;c<u;c++){const d=l[c];if(t[d]){o=t[d];break}}return o=(0,$b.cloneLayout)(o||[]),(0,$b.compact)((0,$b.correctBounds)(o,{cols:i}),s,i)}function r3(t){return Object.keys(t).sort(function(n,r){return t[n]-t[r]})}Object.defineProperty(eC,"__esModule",{value:!0});eC.default=void 0;var zz=GTe(A),$s=OX(Xc),ZR=FN,xm=cn,rh=kf,jTe=OX(N1);function OX(t){return t&&t.__esModule?t:{default:t}}function kX(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(kX=function(r){return r?n:e})(t)}function GTe(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=kX(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function PM(){return PM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},PM.apply(this,arguments)}function Iw(t,e,n){return e=HTe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function HTe(t){var e=VTe(t,"string");return typeof e=="symbol"?e:String(e)}function VTe(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const $z=t=>Object.prototype.toString.call(t);function jb(t,e){return t==null?null:Array.isArray(t)?t:t[e]}class i3 extends zz.Component{constructor(){super(...arguments),Iw(this,"state",this.generateInitialState()),Iw(this,"onLayoutChange",e=>{this.props.onLayoutChange(e,{...this.props.layouts,[this.state.breakpoint]:e})})}generateInitialState(){const{width:e,breakpoints:n,layouts:r,cols:i}=this.props,s=(0,rh.getBreakpointFromWidth)(n,e),o=(0,rh.getColsFromBreakpoint)(s,i),a=this.props.verticalCompact===!1?null:this.props.compactType;return{layout:(0,rh.findOrGenerateResponsiveLayout)(r,n,s,s,o,a),breakpoint:s,cols:o}}static getDerivedStateFromProps(e,n){if(!(0,ZR.deepEqual)(e.layouts,n.layouts)){const{breakpoint:r,cols:i}=n;return{layout:(0,rh.findOrGenerateResponsiveLayout)(e.layouts,e.breakpoints,r,r,i,e.compactType),layouts:e.layouts}}return null}componentDidUpdate(e){(this.props.width!=e.width||this.props.breakpoint!==e.breakpoint||!(0,ZR.deepEqual)(this.props.breakpoints,e.breakpoints)||!(0,ZR.deepEqual)(this.props.cols,e.cols))&&this.onWidthChange(e)}onWidthChange(e){const{breakpoints:n,cols:r,layouts:i,compactType:s}=this.props,o=this.props.breakpoint||(0,rh.getBreakpointFromWidth)(this.props.breakpoints,this.props.width),a=this.state.breakpoint,l=(0,rh.getColsFromBreakpoint)(o,r),c={...i};if(a!==o||e.breakpoints!==n||e.cols!==r){a in c||(c[a]=(0,xm.cloneLayout)(this.state.layout));let h=(0,rh.findOrGenerateResponsiveLayout)(c,n,o,a,l,s);h=(0,xm.synchronizeLayoutWithChildren)(h,this.props.children,l,s,this.props.allowOverlap),c[o]=h,this.props.onLayoutChange(h,c),this.props.onBreakpointChange(o,l),this.setState({breakpoint:o,layout:h,cols:l})}const u=jb(this.props.margin,o),d=jb(this.props.containerPadding,o);this.props.onWidthChange(this.props.width,u,l,d)}render(){const{breakpoint:e,breakpoints:n,cols:r,layouts:i,margin:s,containerPadding:o,onBreakpointChange:a,onLayoutChange:l,onWidthChange:c,...u}=this.props;return zz.createElement(jTe.default,PM({},u,{margin:jb(s,this.state.breakpoint),containerPadding:jb(o,this.state.breakpoint),onLayoutChange:this.onLayoutChange,layout:this.state.layout,cols:this.state.cols}))}}eC.default=i3;Iw(i3,"propTypes",{breakpoint:$s.default.string,breakpoints:$s.default.object,allowOverlap:$s.default.bool,cols:$s.default.object,margin:$s.default.oneOfType([$s.default.array,$s.default.object]),containerPadding:$s.default.oneOfType([$s.default.array,$s.default.object]),layouts(t,e){if($z(t[e])!=="[object Object]")throw new Error("Layout property must be an object. Received: "+$z(t[e]));Object.keys(t[e]).forEach(n=>{if(!(n in t.breakpoints))throw new Error("Each key in layouts must align with a key in breakpoints.");(0,xm.validateLayout)(t.layouts[n],"layouts."+n)})},width:$s.default.number.isRequired,onBreakpointChange:$s.default.func,onLayoutChange:$s.default.func,onWidthChange:$s.default.func});Iw(i3,"defaultProps",{breakpoints:{lg:1200,md:996,sm:768,xs:480,xxs:0},cols:{lg:12,md:10,sm:6,xs:4,xxs:2},containerPadding:{lg:null,md:null,sm:null,xs:null,xxs:null},layouts:{},margin:[10,10],allowOverlap:!1,onBreakpointChange:xm.noop,onLayoutChange:xm.noop,onWidthChange:xm.noop});var s3={},NX=function(){if(typeof Map<"u")return Map;function t(e,n){var r=-1;return e.some(function(i,s){return i[0]===n?(r=s,!0):!1}),r}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(n){var r=t(this.__entries__,n),i=this.__entries__[r];return i&&i[1]},e.prototype.set=function(n,r){var i=t(this.__entries__,n);~i?this.__entries__[i][1]=r:this.__entries__.push([n,r])},e.prototype.delete=function(n){var r=this.__entries__,i=t(r,n);~i&&r.splice(i,1)},e.prototype.has=function(n){return!!~t(this.__entries__,n)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(n,r){r===void 0&&(r=null);for(var i=0,s=this.__entries__;i<s.length;i++){var o=s[i];n.call(r,o[1],o[0])}},e}()}(),IM=typeof window<"u"&&typeof document<"u"&&window.document===document,Mw=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),WTe=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(Mw):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),XTe=2;function YTe(t,e){var n=!1,r=!1,i=0;function s(){n&&(n=!1,t()),r&&a()}function o(){WTe(s)}function a(){var l=Date.now();if(n){if(l-i<XTe)return;r=!0}else n=!0,r=!1,setTimeout(o,e);i=l}return a}var KTe=20,qTe=["top","right","bottom","left","width","height","size","weight"],ZTe=typeof MutationObserver<"u",QTe=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=YTe(this.refresh.bind(this),KTe)}return t.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},t.prototype.removeObserver=function(e){var n=this.observers_,r=n.indexOf(e);~r&&n.splice(r,1),!n.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},t.prototype.updateObservers_=function(){var e=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return e.forEach(function(n){return n.broadcastActive()}),e.length>0},t.prototype.connect_=function(){!IM||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),ZTe?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){!IM||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(e){var n=e.propertyName,r=n===void 0?"":n,i=qTe.some(function(s){return!!~r.indexOf(s)});i&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),DX=function(t,e){for(var n=0,r=Object.keys(e);n<r.length;n++){var i=r[n];Object.defineProperty(t,i,{value:e[i],enumerable:!1,writable:!1,configurable:!0})}return t},Zm=function(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||Mw},BX=tC(0,0,0,0);function Lw(t){return parseFloat(t)||0}function jz(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(r,i){var s=t["border-"+i+"-width"];return r+Lw(s)},0)}function JTe(t){for(var e=["top","right","bottom","left"],n={},r=0,i=e;r<i.length;r++){var s=i[r],o=t["padding-"+s];n[s]=Lw(o)}return n}function eSe(t){var e=t.getBBox();return tC(0,0,e.width,e.height)}function tSe(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return BX;var r=Zm(t).getComputedStyle(t),i=JTe(r),s=i.left+i.right,o=i.top+i.bottom,a=Lw(r.width),l=Lw(r.height);if(r.boxSizing==="border-box"&&(Math.round(a+s)!==e&&(a-=jz(r,"left","right")+s),Math.round(l+o)!==n&&(l-=jz(r,"top","bottom")+o)),!rSe(t)){var c=Math.round(a+s)-e,u=Math.round(l+o)-n;Math.abs(c)!==1&&(a-=c),Math.abs(u)!==1&&(l-=u)}return tC(i.left,i.top,a,l)}var nSe=function(){return typeof SVGGraphicsElement<"u"?function(t){return t instanceof Zm(t).SVGGraphicsElement}:function(t){return t instanceof Zm(t).SVGElement&&typeof t.getBBox=="function"}}();function rSe(t){return t===Zm(t).document.documentElement}function iSe(t){return IM?nSe(t)?eSe(t):tSe(t):BX}function sSe(t){var e=t.x,n=t.y,r=t.width,i=t.height,s=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,o=Object.create(s.prototype);return DX(o,{x:e,y:n,width:r,height:i,top:n,right:e+r,bottom:i+n,left:e}),o}function tC(t,e,n,r){return{x:t,y:e,width:n,height:r}}var oSe=function(){function t(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=tC(0,0,0,0),this.target=e}return t.prototype.isActive=function(){var e=iSe(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},t}(),aSe=function(){function t(e,n){var r=sSe(n);DX(this,{target:e,contentRect:r})}return t}(),lSe=function(){function t(e,n,r){if(this.activeObservations_=[],this.observations_=new NX,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=n,this.callbackCtx_=r}return t.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof Zm(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)||(n.set(e,new oSe(e)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof Zm(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(e)&&(n.delete(e),n.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&e.activeObservations_.push(n)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,n=this.activeObservations_.map(function(r){return new aSe(r.target,r.broadcastRect())});this.callback_.call(e,n,e),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),FX=typeof WeakMap<"u"?new WeakMap:new NX,UX=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=QTe.getInstance(),r=new lSe(e,n,this);FX.set(this,r)}return t}();["observe","unobserve","disconnect"].forEach(function(t){UX.prototype[t]=function(){var e;return(e=FX.get(this))[t].apply(e,arguments)}});var cSe=function(){return typeof Mw.ResizeObserver<"u"?Mw.ResizeObserver:UX}();const uSe=Object.freeze(Object.defineProperty({__proto__:null,default:cSe},Symbol.toStringTag,{value:"Module"})),dSe=In(uSe);Object.defineProperty(s3,"__esModule",{value:!0});s3.default=_Se;var Gb=mSe(A),hSe=o3(Xc),fSe=o3(dSe),pSe=o3(UN);function o3(t){return t&&t.__esModule?t:{default:t}}function zX(t){if(typeof WeakMap!="function")return null;var e=new WeakMap,n=new WeakMap;return(zX=function(r){return r?n:e})(t)}function mSe(t,e){if(!e&&t&&t.__esModule)return t;if(t===null||typeof t!="object"&&typeof t!="function")return{default:t};var n=zX(e);if(n&&n.has(t))return n.get(t);var r={__proto__:null},i=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in t)if(s!=="default"&&Object.prototype.hasOwnProperty.call(t,s)){var o=i?Object.getOwnPropertyDescriptor(t,s):null;o&&(o.get||o.set)?Object.defineProperty(r,s,o):r[s]=t[s]}return r.default=t,n&&n.set(t,r),r}function MM(){return MM=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},MM.apply(this,arguments)}function gp(t,e,n){return e=gSe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function gSe(t){var e=vSe(t,"string");return typeof e=="symbol"?e:String(e)}function vSe(t,e){if(typeof t!="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}const ySe="react-grid-layout";function _Se(t){var e;return e=class extends Gb.Component{constructor(){super(...arguments),gp(this,"state",{width:1280}),gp(this,"elementRef",Gb.createRef()),gp(this,"mounted",!1),gp(this,"resizeObserver",void 0)}componentDidMount(){this.mounted=!0,this.resizeObserver=new fSe.default(i=>{if(this.elementRef.current instanceof HTMLElement){const o=i[0].contentRect.width;this.setState({width:o})}});const r=this.elementRef.current;r instanceof HTMLElement&&this.resizeObserver.observe(r)}componentWillUnmount(){this.mounted=!1;const r=this.elementRef.current;r instanceof HTMLElement&&this.resizeObserver.unobserve(r),this.resizeObserver.disconnect()}render(){const{measureBeforeMount:r,...i}=this.props;return r&&!this.mounted?Gb.createElement("div",{className:(0,pSe.default)(this.props.className,ySe),style:this.props.style,ref:this.elementRef}):Gb.createElement(t,MM({innerRef:this.elementRef},i,this.state))}},gp(e,"defaultProps",{measureBeforeMount:!1}),gp(e,"propTypes",{measureBeforeMount:hSe.default.bool}),e}(function(t){t.exports=N1.default,t.exports.utils=cn,t.exports.calculateUtils=Ql,t.exports.Responsive=eC.default,t.exports.Responsive.utils=kf,t.exports.WidthProvider=s3.default})(nX);var bSe=nX.exports;function Gz(){const{innerWidth:t,innerHeight:e}=window;return{width:t,height:e}}function a3(){const[t,e]=A.useState(Gz());return A.useEffect(()=>{function n(){e(Gz())}return window.addEventListener("load",n),window.addEventListener("resize",n),()=>{window.removeEventListener("load",n),window.removeEventListener("resize",n)}},[]),t}const $X=Tt($t)`
  width: 100%;
  display: flex;
  flex-direction: row;
  align-items: center;
  overflow: hidden;
  white-space: nowrap;
`,xSe=Tt.div`
  width: 6px;
  height: 32px;
  background-color: rgba(0, 0, 0, 0.1);
  border-radius: 4px;
  margin-right: 2px;
`,ESe=A.forwardRef((t,e)=>{const[n,r]=A.useState(null),i=A.useCallback(a=>{r(a),t.onMouseDown&&t.onMouseDown(a)},[]),s=A.useCallback(a=>{n&&n.clientX===a.clientX&&n.clientY===a.clientY&&!t.disabled?t.onClick():t.onMouseUp&&t.onMouseUp(a),r(null)},[n]),o=A.useCallback(a=>{t.onTouchEnd&&t.onTouchEnd(a)},[]);return D($t,{id:t.id,style:{...t.style,width:40,left:-8,overflow:"hidden"},onMouseDown:i,onTouchEnd:o,onMouseUp:s,ref:e,children:Pe($X,{children:[D(xSe,{className:"draggable",style:{userSelect:"none",paddingTop:5,width:"8px",height:"32px",cursor:"move"},children:D(en,{style:{color:"blue"}})}),t.disabled?D(fi,{style:{userSelect:"none",width:"32px",height:"32px",border:"1px solid #00000020"},disabled:!0,children:D($t,{style:{marginTop:"4px"},children:t.children})}):D(Wi,{title:t.tooltip,placement:"right",children:D(fi,{style:{userSelect:"none",width:"32px",height:"32px",border:"1px solid #00000020"},children:D($t,{style:{marginTop:"4px"},children:t.children})})})]})},t.key)}),wSe=lt([Z.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),Z.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime"),TSe=lt(Z.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add"),SSe=lt(Z.jsx("path",{d:"M20 18v-3h-2v3h-3v2h3v3h2v-3h3v-2zM18 4h2v9h-2zM4 4h2v16H4zm7 0h2v4h-2zm0 6h2v4h-2zm0 6h2v4h-2z"}),"AddRoad"),CSe=lt([Z.jsx("path",{d:"M19.5 12c.93 0 1.78.28 2.5.76V8c0-1.1-.9-2-2-2h-6.29l-1.06-1.06 1.41-1.41-.71-.71-3.53 3.53.71.71 1.41-1.41L13 6.71V9c0 1.1-.9 2-2 2h-.54c.95 1.06 1.54 2.46 1.54 4 0 .34-.04.67-.09 1h3.14c.25-2.25 2.14-4 4.45-4"},"0"),Z.jsx("path",{d:"M19.5 13c-1.93 0-3.5 1.57-3.5 3.5s1.57 3.5 3.5 3.5 3.5-1.57 3.5-3.5-1.57-3.5-3.5-3.5m0 5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5M4 9h5c0-1.1-.9-2-2-2H4c-.55 0-1 .45-1 1s.45 1 1 1m5.83 4.82-.18-.47.93-.35c-.46-1.06-1.28-1.91-2.31-2.43l-.4.89-.46-.21.4-.9C7.26 10.13 6.64 10 6 10c-.53 0-1.04.11-1.52.26l.34.91-.47.18-.35-.93c-1.06.46-1.91 1.28-2.43 2.31l.89.4-.21.46-.9-.4C1.13 13.74 1 14.36 1 15c0 .53.11 1.04.26 1.52l.91-.34.18.47-.93.35c.46 1.06 1.28 1.91 2.31 2.43l.4-.89.46.21-.4.9c.55.22 1.17.35 1.81.35.53 0 1.04-.11 1.52-.26l-.34-.91.47-.18.35.93c1.06-.46 1.91-1.28 2.43-2.31l-.89-.4.21-.46.9.4c.22-.55.35-1.17.35-1.81 0-.53-.11-1.04-.26-1.52zm-2.68 3.95c-1.53.63-3.29-.09-3.92-1.62-.63-1.53.09-3.29 1.62-3.92 1.53-.63 3.29.09 3.92 1.62.64 1.53-.09 3.29-1.62 3.92"},"1")],"Agriculture"),ASe=lt(Z.jsx("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.42 0 2.13.54 2.39 1.4.12.4.45.7.87.7h.3c.66 0 1.13-.65.9-1.27-.42-1.18-1.4-2.16-2.96-2.54V4.5c0-.83-.67-1.5-1.5-1.5S10 3.67 10 4.5v.66c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-1.65 0-2.5-.59-2.83-1.43-.15-.39-.49-.67-.9-.67h-.28c-.67 0-1.14.68-.89 1.3.57 1.39 1.9 2.21 3.4 2.53v.67c0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5v-.65c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4"}),"AttachMoneyRounded"),jX=lt(Z.jsx("path",{d:"M4 9h4v11H4zm12 4h4v7h-4zm-6-9h4v16h-4z"}),"BarChart"),RSe=lt(Z.jsx("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check"),wd=lt(Z.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),PSe=lt(Z.jsx("path",{d:"M22 3.41 16.71 8.7 20 12h-8V4l3.29 3.29L20.59 2zM3.41 22l5.29-5.29L12 20v-8H4l3.29 3.29L2 20.59z"}),"CloseFullscreen"),GX=lt(Z.jsx("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2m0 16H8V7h11z"}),"ContentCopy"),HX=lt(Z.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),l3=lt(Z.jsx("path",{d:"M12 7V3H2v18h20V7zM6 19H4v-2h2zm0-4H4v-2h2zm0-4H4V9h2zm0-4H4V5h2zm4 12H8v-2h2zm0-4H8v-2h2zm0-4H8V9h2zm0-4H8V5h2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8zm-2-8h-2v2h2zm0 4h-2v2h2z"}),"Domain"),ISe=lt(Z.jsx("path",{d:"M12 7V3H2v18h14v-2h-4v-2h2v-2h-2v-2h2v-2h-2V9h8v6h2V7zM6 19H4v-2h2zm0-4H4v-2h2zm0-4H4V9h2zm0-4H4V5h2zm4 12H8v-2h2zm0-4H8v-2h2zm0-4H8V9h2zm0-4H8V5h2zm14 12v2h-2v2h-2v-2h-2v-2h2v-2h2v2zm-6-8h-2v2h2zm0 4h-2v2h2z"}),"DomainAdd"),MSe=lt(Z.jsx("path",{d:"M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4z"}),"Done"),Ow=lt(Z.jsx("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"}),"Download"),LSe=lt(Z.jsx("path",{d:"M20.13 5.41 18.72 4l-9.19 9.19-4.25-4.24-1.41 1.41 5.66 5.66zM5 18h14v2H5z"}),"DownloadDone"),nC=lt(Z.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit"),VX=lt(Z.jsx("path",{d:"M22 10v12H2V10l7-3v2l5-2v3zm-4.8-1.5L18 2h3l.8 6.5zM11 18h2v-4h-2zm-4 0h2v-4H7zm10-4h-2v4h2z"}),"Factory"),OSe=lt(Z.jsx("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"}),"Favorite"),kSe=lt(Z.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7zM5 18v2h14v-2z"}),"FileDownload"),WX=lt(Z.jsx("path",{d:"M9 16h6v-6h4l-7-7-7 7h4zm-4 2h14v2H5z"}),"FileUpload"),NSe=lt(Z.jsx("path",{d:"M17 4h3c1.1 0 2 .9 2 2v2h-2V6h-3zM4 8V6h3V4H4c-1.1 0-2 .9-2 2v2zm16 8v2h-3v2h3c1.1 0 2-.9 2-2v-2zM7 18H4v-2H2v2c0 1.1.9 2 2 2h3zM18 8H6v8h12z"}),"FitScreen"),bf=lt(Z.jsx("path",{d:"M14.4 6 14 4H5v17h2v-7h5.6l.4 2h7V6z"}),"Flag"),XX=lt(Z.jsx("path",{d:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m0 12H4V8h16z"}),"FolderOpen"),YX=lt(Z.jsx("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M8 20H4v-4h4zm0-6H4v-4h4zm0-6H4V4h4zm6 12h-4v-4h4zm0-6h-4v-4h4zm0-6h-4V4h4zm6 12h-4v-4h4zm0-6h-4v-4h4zm0-6h-4V4h4z"}),"GridOn"),KX=lt(Z.jsx("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"}),"History"),DSe=lt(Z.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home"),qX=lt(Z.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info"),Hz=lt(Z.jsx("path",{d:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3z"}),"Launch"),ZX=lt(Z.jsx("path",{d:"m11.99 18.54-7.37-5.73L3 14.07l9 7 9-7-1.63-1.27zM12 16l7.36-5.73L21 9l-9-7-9 7 1.63 1.27z"}),"Layers"),QX=lt(Z.jsx("path",{d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m13.5-9 1.96 2.5H17V9.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5"}),"LocalShipping"),xf=lt(Z.jsx("path",{d:"M15 11V5l-3-3-3 3v2H3v14h18V11zm-8 8H5v-2h2zm0-4H5v-2h2zm0-4H5V9h2zm6 8h-2v-2h2zm0-4h-2v-2h2zm0-4h-2V9h2zm0-4h-2V5h2zm6 12h-2v-2h2zm0-4h-2v-2h2z"}),"LocationCity"),Fy=lt(Z.jsx("path",{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5M15 19l-6-2.11V5l6 2.11z"}),"Map"),Vz=lt(Z.jsx("path",{d:"M21 11V3h-8l3.29 3.29-10 10L3 13v8h8l-3.29-3.29 10-10z"}),"OpenInFull"),JX=lt(Z.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"PanoramaFishEye"),BSe=lt(Z.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-1 14H9V8h2zm4 0h-2V8h2z"}),"PauseCircle"),FSe=lt(Z.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2M9.5 16.5v-9l7 4.5z"}),"PlayCircle"),USe=lt(Z.jsx("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2m-8 6H8v1h3c.55 0 1 .45 1 1v3c0 .55-.45 1-1 1h-1v1H8v-1H6v-2h4v-1H7c-.55 0-1-.45-1-1V9c0-.55.45-1 1-1h1V7h2v1h2zm4 6.25-2-2h4zM14 10l2-2 2 2z"}),"PriceChange"),eY=lt(Z.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-1 17.93c-3.95-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39"}),"Public"),zSe=lt([Z.jsx("path",{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4z"},"0"),Z.jsx("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-5.99 13c-.59 0-1.05-.47-1.05-1.05 0-.59.47-1.04 1.05-1.04.59 0 1.04.45 1.04 1.04-.01.58-.45 1.05-1.04 1.05m2.5-6.17c-.63.93-1.23 1.21-1.56 1.81-.13.24-.18.4-.18 1.18h-1.52c0-.41-.06-1.08.26-1.65.41-.73 1.18-1.16 1.63-1.8.48-.68.21-1.94-1.14-1.94-.88 0-1.32.67-1.5 1.23l-1.37-.57C11.51 5.96 12.52 5 13.99 5c1.23 0 2.08.56 2.51 1.26.37.61.58 1.73.01 2.57"},"1")],"Quiz"),$Se=lt(Z.jsx("path",{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7z"}),"Redo"),jSe=lt(Z.jsx("path",{d:"M19 13H5v-2h14z"}),"Remove"),GSe=lt(Z.jsx("path",{d:"M18 4h2v9h-2zM4 4h2v16H4zm7 0h2v4h-2zm0 6h2v4h-2zm0 6h2v4h-2zm11.5.41L21.09 15 19 17.09 16.91 15l-1.41 1.41 2.09 2.09-2.09 2.09L16.91 22 19 19.91 21.09 22l1.41-1.41-2.09-2.09z"}),"RemoveRoad"),tY=lt(Z.jsx("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"ReportProblem"),HSe=lt(Z.jsx("path",{d:"m19.41 7.41-4.83-4.83c-.37-.37-.88-.58-1.41-.58H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8.83c0-.53-.21-1.04-.59-1.42M14 13c.55 0 1 .45 1 1v3c0 .55-.45 1-1 1h-1c0 .55-.45 1-1 1s-1-.45-1-1h-1c-.55 0-1-.45-1-1s.45-1 1-1h3v-1h-3c-.55 0-1-.45-1-1v-3c0-.55.45-1 1-1h1c0-.55.45-1 1-1s1 .45 1 1h1c.55 0 1 .45 1 1s-.45 1-1 1h-3v1zm0-5c-.55 0-1-.45-1-1V3.5L17.5 8z"}),"RequestQuoteRounded"),VSe=lt(Z.jsx("path",{d:"M12 5V2L8 6l4 4V7c3.31 0 6 2.69 6 6 0 2.97-2.17 5.43-5 5.91v2.02c3.95-.49 7-3.85 7-7.93 0-4.42-3.58-8-8-8m-6 8c0-1.65.67-3.15 1.76-4.24L6.34 7.34C4.9 8.79 4 10.79 4 13c0 4.08 3.05 7.44 7 7.93v-2.02c-2.83-.48-5-2.94-5-5.91"}),"RestartAlt"),Qm=lt(Z.jsx("path",{d:"M19 15.18V7c0-2.21-1.79-4-4-4s-4 1.79-4 4v10c0 1.1-.9 2-2 2s-2-.9-2-2V8.82C8.16 8.4 9 7.3 9 6c0-1.66-1.34-3-3-3S3 4.34 3 6c0 1.3.84 2.4 2 2.82V17c0 2.21 1.79 4 4 4s4-1.79 4-4V7c0-1.1.9-2 2-2s2 .9 2 2v8.18c-1.16.41-2 1.51-2 2.82 0 1.66 1.34 3 3 3s3-1.34 3-3c0-1.3-.84-2.4-2-2.82"}),"Route"),c3=lt(Z.jsx("path",{d:"M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92"}),"Share"),nY=lt(Z.jsx("path",{d:"M9 1h6v2H9zm10.03 6.39 1.42-1.42c-.43-.51-.9-.99-1.41-1.41l-1.42 1.42C16.07 4.74 14.12 4 12 4c-4.97 0-9 4.03-9 9s4.02 9 9 9 9-4.03 9-9c0-2.12-.74-4.07-1.97-5.61M13 14h-2V8h2z"}),"Timer"),WSe=lt(Z.jsx("path",{d:"m22 12-4-4v3H3v2h15v3z"}),"TrendingFlat"),rY=lt(Z.jsx("path",{d:"M3 17v2h6v-2zM3 5v2h10V5zm10 16v-2h8v-2h-8v-2h-2v6zM7 9v2H3v2h4v2h2V9zm14 4v-2H11v2zm-6-4h2V7h4V5h-4V3h-2z"}),"Tune"),XSe=lt(Z.jsx("path",{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8"}),"Undo"),iY=lt(Z.jsx("path",{d:"M7 21H3V8l13-5v7H7zm12-11c-1.1 0-2 .9-2 2H9v9h5v-5h2v5h5v-9c0-1.1-.9-2-2-2"}),"Villa"),sY=lt(Z.jsx("path",{d:"M19 10c-1.1 0-2 .9-2 2h-1V3L3 8v13h18v-9c0-1.1-.9-2-2-2M5 9.37l9-3.46V12H9v7H5zM19 19h-3v-3h-2v3h-3v-5h8z"}),"VillaOutlined"),oY=lt([Z.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"},"0"),Z.jsx("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2z"},"1")],"ZoomIn"),YSe=lt(Z.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14M7 9h5v1H7z"}),"ZoomOut"),KSe=Tt(E7)`
  background-color: rgba(255, 255, 255, 0.95);
`,QR=Tt(fi)`
  padding: 2px;
  height: 18px;
  margin: 7px 4px 3px 0;
  border-radius: 16px;
  border: 1px solid rgba(0, 0, 0, 0.2);

  .MuiSvgIcon-root {
    width: 12px;
    height: 12px;
  }
`,qSe=Tt($t)`
  margin-top: 4px;
`,ZSe=A.forwardRef(({id:t,key:e,shown:n,title:r,icon:i,rowHeight:s,subheader:o,children:a,style:l,onMouseDown:c,onMouseUp:u,onTouchEnd:d,setToFront:h,onClose:f,maximized:p,onMaximize:m,onDemaximize:_,titleBarMode:y},x)=>{const b=()=>{f&&f()},E=()=>{m&&m()},w=()=>{_&&_()},C=26*(y==="win"?2:0);return n?Pe(KSe,{id:t,ref:x,style:{...l},onMouseDown:P=>{const M=document.getElementById(t).getBoundingClientRect();C<M.right-P.clientX&&P.clientY-M.top<26&&(h(),c&&c(P))},onMouseUp:u,onTouchEnd:d,children:[D(Zge,{title:Pe($t,{style:{userSelect:"none",position:"absolute",top:0,left:0,width:"100%",height:s+"px",display:"flex",flexDirection:"row",marginLeft:"8px"},children:[y==="mac"&&Pe(ui,{children:[D(QR,{size:"small",onClick:()=>{console.log("close")},children:D(wd,{})}),D(QR,{size:"small",onClick:()=>{console.log("remove")},children:D(jSe,{})}),D(QR,{size:"small",onClick:()=>{console.log("open in full")},children:D(Vz,{})})]}),Pe($X,{className:"draggable",children:[D(qSe,{children:i}),D(en,{style:{marginLeft:"4px",marginTop:"4px"},children:r})]}),y==="win"&&Pe(ui,{children:[p?D(fi,{size:"small",style:{margin:0,padding:0},"aria-label":"demaximize",title:"demaximize",onClick:w,children:D(PSe,{style:{width:"18px",height:"18px"}})}):D(fi,{size:"small",style:{margin:0,padding:0},"aria-label":"maximize",title:"maximize",onClick:E,children:D(Vz,{style:{width:"18px",height:"18px"}})}),D(fi,{size:"small","aria-label":"close",style:{marginRight:"6px"},onClick:b,title:"close",children:D(wd,{})})]})]}),style:{cursor:"move",height:"18px",backgroundColor:"rgba(255,255,255,0.90)",padding:"6px",borderBottom:"1px solid rgba(0,0,0,0.1)"},titleTypographyProps:{fontSize:"16px"}}),D($t,{style:{overflow:"auto",height:"90%"},children:a}),D(Dge,{})]},e):null}),uE=32,JR=32,QSe=Tt(w7)`
  padding: 8px;
  margin: 0;
  overflow: hidden;
`,JSe=Tt(bSe.Responsive)`
  .react-grid-item.react-grid-placeholder {
    background: grey !important;
  }
`,eCe=t=>{const e=mi(),{width:n,height:r}=a3(),[i,s]=A.useState([]),[o,a]=A.useState({}),[l,c]=A.useState(null),u=A.useCallback((w,T,C)=>{const P=T.findIndex(F=>F.i===w);if(P<0)return T;const M=T[P],N=new Array(T.length);for(let F=0;F<P;F++)N[F]=T[F];for(let F=P;F<T.length-1;F++)N[F]=T[F+1];return N[T.length-1]={...M,...C},N},[]),d=A.useCallback(w=>({...w,x:0,y:0,w:uE,h:Math.floor((r-10)/JR-3)}),[r]),h=A.useCallback((w,T)=>w.map((C,P)=>{var M;return(M=T[C.i])!=null&&M.maximized?d(C):C}),[d]),f=A.useCallback(w=>{const T=o[w].bindToButtonId;T&&a(C=>({...C,[w]:{...C[w],shown:!0},[T]:{...C[T],enabled:!1}}))},[o]),p=A.useCallback(w=>{const T=o[w].bindToButtonId;T&&a(C=>({...C,[w]:{...C[w],shown:!1},[T]:{...C[T],enabled:!0}}))},[o]),m=A.useCallback(w=>{s(u(w,i))},[u,i]),_=A.useCallback(w=>{s(u(w,i,{maximized:!0}))},[u,i]),y=A.useCallback(w=>{s(u(w,i,{maximized:!1}))},[u,i]),x=A.useCallback((w,T,C,P,M,N)=>{const F=u(C.i,w);s(F)},[u]),b=A.useCallback((w,T,C,P,M,N)=>{const F=u(C.i,w);s(F)},[u]),E=A.useCallback(w=>{w.length!==0&&(console.log("onLayoutChange",{layoutStates:i,layoutStateMap:o}),Hi.saveComponentState(t.uuid,i.map((T,C)=>({...o[T.i],...T}))))},[o,i,t.uuid]);return A.useEffect(()=>{const w=(T,C,P)=>{var M,N;if(!C)return null;switch(C.type){case"FloatingButton":{const F=C;return D(ESe,{id:T,tooltip:C.tooltip,onClick:()=>{F.bindToPanelId?(f(F.bindToPanelId),m(F.bindToPanelId)):F.onClick?F.onClick():F.navigateTo&&e(F.navigateTo)},disabled:!((M=o[T])!=null&&M.enabled),children:C.icon},T)}case"FloatingPanel":return D(ZSe,{id:T,shown:i.some(F=>{var I;return(I=o[T])==null?void 0:I.shown}),title:C.title,icon:C.icon,setToFront:()=>m(T),rowHeight:C.rowHeight,titleBarMode:C.titleBarMode,onClose:()=>{p(C.id)},onMaximize:()=>{_(T)},onDemaximize:()=>{y(T)},maximized:(N=o[T])==null?void 0:N.maximized,children:D(QSe,{children:P})},T);case"BackgroundPanel":default:return D("div",{id:T},T)}};i.length>0&&c(woe(i.map(T=>[T.i,w(T.i,t.resources[T.i],t.gridItemChildrenMap[T.i])])))},[o,i,e,y,m,p,_,f,t.gridItemChildrenMap,t.resources]),A.useEffect(()=>{(async()=>{let T=(await(await Hi.openProject(t.uuid)).layoutState.toArray()).sort((P,M)=>P.zIndex&&M.zIndex?P.zIndex-M.zIndex:0);T.length===0&&(T=t.initialLayouts.map((P,M)=>{if(P.x&&P.x<0&&(P.x=uE+P.x),P.y&&P.y<0){const N=Math.floor((r-100)/JR);P.y=N+P.y}return{...P,...T,zIndex:M}})),s(T);const C=T.reduce((P,M)=>(P[M.i]=M,P),{});a(C)})()},[n,r,t.initialLayouts,t.resources,t.uuid]),D($t,{style:{margin:0,padding:0,border:"none",overflow:"hidden"},children:n===0||i.length===0||l===null?D($t,{sx:{display:"flex",width:"100vw",height:"100vh",justifyContent:"center",alignItems:"center",backgroundColor:"#ccc"},children:D(Mf,{variant:"indeterminate",size:100})}):Pe(JSe,{style:{backgroundColor:t.backgroundColor,margin:0,padding:0},compactType:"vertical",autoSize:!0,allowOverlap:!0,isResizable:!1,isBounded:!1,width:n,draggableHandle:".draggable",breakpoints:{lg:1140},cols:{lg:uE},rowHeight:JR,margin:[4,4],containerPadding:[8,2],layouts:{lg:h(i,o)},onLayoutChange:E,onDragStop:b,onResizeStop:x,children:[D($t,{sx:{position:"absolute",top:"-2px",left:"-8px"},children:t.children},"BackgroundPanel"),i.filter(w=>w.i!=="BackgroundPanel").map((w,T)=>l[w.i])]})})},cr={BackgroundPanel:"BackgroundPanel",FloatingButton:"FloatingButton",FloatingPanel:"FloatingPanel"};function tCe(t){return{layout:{i:"HomeButton",x:0,y:0,w:1,h:1,resizeHandles:[],isDraggable:!0,isResizable:!1,shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,maximized:!1},resource:{id:"HomeButton",type:cr.FloatingButton,tooltip:"Home",icon:D(DSe,{}),navigateTo:"/",onClick:t==null?void 0:t.onClick}}}function Wz(t){return{layout:{i:"ZoomInButton",x:0,y:(t==null?void 0:t.y)??0,w:1,h:1,resizeHandles:[],isDraggable:!0,isResizable:!1,shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,maximized:!1},resource:{id:"ZoomInButton",type:cr.FloatingButton,tooltip:"zoom in",icon:D(oY,{}),onClick:t==null?void 0:t.onClick}}}function Xz(t){return{layout:{i:"ZoomOutButton",x:0,y:(t==null?void 0:t.y)??0,w:1,h:1,resizeHandles:[],isDraggable:!0,isResizable:!1,shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,maximized:!1},resource:{id:"ZoomOutButton",type:cr.FloatingButton,tooltip:"zoom out",icon:D(YSe,{}),onClick:t==null?void 0:t.onClick}}}function Yz(t){return{layout:{i:"FitScreenButton",x:(t==null?void 0:t.x)??0,y:(t==null?void 0:t.y)??0,w:(t==null?void 0:t.w)??1,h:(t==null?void 0:t.w)??1,resizeHandles:[],isDraggable:!0,isResizable:!1,shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,maximized:!1},resource:{id:"FitScreenButton",type:cr.FloatingButton,tooltip:"fit to screen",icon:D(NSe,{}),onClick:t==null?void 0:t.onClick}}}function nCe(t){return{layout:{i:"InputOutputButton",x:0,y:(t==null?void 0:t.y)??1,w:1,h:1,resizeHandles:[],isDraggable:!0,isResizable:!1,shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,maximized:!1},resource:{id:"InputOutputButton",type:cr.FloatingButton,bindToPanelId:"InputOutputPanel",tooltip:"Open Input/Output Panel",icon:D(XX,{}),onClick:t==null?void 0:t.onClick}}}function rCe(t){return{layout:{i:"InputOutputPanel",x:(t==null?void 0:t.x)??0,y:(t==null?void 0:t.y)??0,w:(t==null?void 0:t.w)??8,h:(t==null?void 0:t.h)??3,minW:5,minH:2,resizeHandles:Qc,isDraggable:!0,isResizable:!0,shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,maximized:!1},resource:{id:"InputOutputPanel",type:cr.FloatingPanel,title:"Input/Output",icon:D(XX,{}),titleBarMode:"win",rowHeight:tc,bindToButtonId:"InputOutputButton"}}}function iCe(t){return{layout:{i:"ChartPanel",x:(t==null?void 0:t.x)??22,y:(t==null?void 0:t.y)??0,w:(t==null?void 0:t.w)??10,h:(t==null?void 0:t.h)??10,isDraggable:!0,isResizable:!0,resizeHandles:Qc,enabled:(t==null?void 0:t.enabled)??!0,shown:(t==null?void 0:t.shown)??!0,maximized:!1},resource:{id:"ChartPanel",type:cr.FloatingPanel,title:"Chart",icon:D(jX,{}),titleBarMode:"win",rowHeight:tc,bindToButtonId:"ChartButton"}}}function Kz(t){return t.parameterSet.units==="degrees"}const sCe=({sessionState:t,setSessionState:e,uiState:n,setUIState:r,matrices:i,updateAndSetMatrices:s})=>{var N,F;const[o,a]=A.useState(null),l=A.useCallback((I,k)=>{requestAnimationFrame(()=>{const{locations:R,edges:z,locationSerialNumber:X}=Hae(I,t);e(G=>{G.locations=R,G.edges=z,G.parameterSet.numLocations=I,G.locationSerialNumber=X},k||!1,"removeBulkLocations"),s(R,z),r(G=>{G.selectedIndices=[]})})},[t==null?void 0:t.locations,t==null?void 0:t.edges,(N=t==null?void 0:t.parameterSet)==null?void 0:N.transportationCost]),c=A.useCallback(()=>{u(t,n)},[n==null?void 0:n.selectedIndices,t==null?void 0:t.locations,t==null?void 0:t.edges,t==null?void 0:t.locationSerialNumber]),u=A.useCallback((I,k)=>{requestAnimationFrame(()=>{const{locations:R,edges:z,locationSerialNumber:X,addedIndices:G}=t9(I,k.selectedIndices);e(j=>{j.locations=R,j.edges=z,j.parameterSet.numLocations=j.parameterSet.numLocations+1,j.locationSerialNumber=X},!0,"addLocation"),s(R,z),r(j=>{j.focusedIndices=[...k.selectedIndices],j.selectedIndices=[...G]})})},[s,r]),d=A.useCallback((I,k)=>{requestAnimationFrame(()=>{e(R=>{const{locations:z,edges:X,locationSerialNumber:G,addedIndices:j}=$k(t,n.selectedIndices,I);R.locations=z,R.edges=X,R.parameterSet.numLocations=I,R.locationSerialNumber=G,s(z,X),r(H=>{H.selectedIndices=[],H.focusedIndices=j})},k||!1,"addBulkLocations")})},[n,t,r,e]),h=A.useCallback((I,k,R)=>{if(!R)return[];const z=new Set(I.map(X=>{var G;return(G=t.locations[X])==null?void 0:G.id}));return k.filter(X=>!z.has(X.source)&&!z.has(X.target))},[t]),f=A.useCallback((I,k,R,z)=>{if(!z)return[];const X=new Set;function G(j,H){return j<H?`${j},${H}`:`${H},${j}`}for(let j=0;I!==k&&j<z.length;j++){const H=z[I][k];if(H===-1)break;X.add(G(t.locations[I].id,t.locations[H].id)),I=H}return R.filter((j,H)=>!X.has(G(j.source,j.target)))},[t]),p=A.useCallback(()=>{requestAnimationFrame(()=>{e(I=>{const k=[];for(let R=0;R<n.selectedIndices.length;R++)for(let z=R+1;z<n.selectedIndices.length;z++){const X=n.selectedIndices[R],G=t.locations[X],j=n.selectedIndices[z],H=t.locations[j];if(Bc(i.adjacencyMatrix[X][j])){const Q=hf(G.point,H.point,Kz(t)),V={source:G.id,target:H.id,distance:Q};k.push(V)}}I.edges=[...I.edges,...k],s(t.locations,t.edges)},!0,"addEdge")})},[n==null?void 0:n.selectedIndices,t==null?void 0:t.locations,t==null?void 0:t.edges,(F=t==null?void 0:t.parameterSet)==null?void 0:F.transportationCost,e,i==null?void 0:i.adjacencyMatrix,r]),m=A.useCallback(()=>{if(n.selectedIndices.length===2){const I=f(n.selectedIndices[0],n.selectedIndices[1],t.edges,i.predecessorMatrix);e(k=>{k.edges=I},!0,"removePath")}else{const I=h(n.selectedIndices,t.edges,i.predecessorMatrix);e(k=>{k.edges=I||[]},!0,"removeEdge")}},[n==null?void 0:n.selectedIndices,t==null?void 0:t.edges,i==null?void 0:i.predecessorMatrix]),_=A.useCallback(()=>{requestAnimationFrame(()=>{const I=h(n.selectedIndices,t.edges,i.predecessorMatrix)||[],k=(t.locations.length+n.selectedIndices.length)/t.locations.length,R=t.locations.filter((z,X)=>!n.selectedIndices.includes(X)).map(z=>({...z,manufactureShare:z.manufactureShare*k,agricultureShare:z.agricultureShare*k}));e(z=>{z.locations=R,z.edges=I,z.parameterSet.numLocations=R.length},!0,"removeLocation"),s(R,I),r(z=>{z.selectedIndices=[]})})},[]),y=A.useCallback((I,k,R)=>{a({x:I,y:k}),r(z=>{z.draggingIndex=R})},[a,r]),x=A.useCallback((I,k,R)=>{o===null||Math.abs(o.x-I)<=1&&Math.abs(o.y-k)<=1||requestAnimationFrame(()=>{r(z=>{z.draggingIndex=null,z.focusedIndices=[]}),a(null),e(z=>{},!0,"dragEnd"),s(t.locations,t.edges)})},[t,e,r,a,s]),b=A.useCallback((I,k,R)=>{(I!==0||k!==0)&&o!==null&&requestAnimationFrame(()=>{const X=n.selectedIndices.includes(R)?n.selectedIndices:[...n.selectedIndices,R];e(G=>{X.forEach(j=>{const H=G.locations[j].id,Q=G.locations[j];Q.point[0]+=I,Q.point[1]+=k,i.adjacencyMatrix&&G.edges.filter(V=>V.source===H||V.target===H).forEach(V=>{const ee=V.source===H?V.target:V.source,ye=MI(t.locations,ee);V.distance=hf(Q.point,t.locations[ye].point,Kz(t))})})},!1,"drag")})},[n==null?void 0:n.selectedIndices,i==null?void 0:i.adjacencyMatrix,t,o]),E=A.useCallback(I=>{const k=I.filter(R=>R!==-1);r(R=>{R.focusedIndices=k})},[]),w=A.useCallback(I=>{r(k=>{k.focusedIndices=[]})},[]),T=A.useCallback((I,k)=>{r(R=>{const z=xoe(I,k).sort();R.selectedIndices=z,R.draggingIndex=null})},[r]),C=A.useCallback((I,k)=>{r(R=>{const z=I.filter(X=>!k.includes(X));R.selectedIndices=z,R.draggingIndex=null})},[r]),P=A.useCallback((I,k,R)=>{R>=0&&(o===null||o.x===I&&o.y===k)&&(n.selectedIndices.includes(R)?C(n.selectedIndices,[R]):T(n.selectedIndices,[R]))},[o,T,C,n==null?void 0:n.selectedIndices]),M=A.useCallback(()=>{C(n.selectedIndices,n.selectedIndices)},[n==null?void 0:n.selectedIndices]);return{onAddLocation:c,onAddBulkLocations:d,onRemoveLocation:_,onRemoveBulkLocations:l,onAddEdge:p,onRemoveEdge:m,onDragStart:y,onDrag:b,onDragEnd:x,onFocus:E,onUnfocus:w,onSelect:T,onUnselect:C,onPointerUp:P,onClearSelection:M}},oCe=({setUIState:t})=>{const e=A.useCallback(r=>{t(i=>{i.chartType=r})},[t]);return{setSessionChartScale:A.useCallback(r=>{t(i=>{i.chartScale=r})},[t]),setSessionChartType:e}};function aY(t){if(!t||t.length===0)return{top:Number.NEGATIVE_INFINITY,left:Number.NEGATIVE_INFINITY,bottom:Number.POSITIVE_INFINITY,right:Number.POSITIVE_INFINITY};let e=t[0].point[0],n=t[0].point[0],r=t[0].point[1],i=t[0].point[1];for(let s=1;s<t.length;s++)e=Math.min(e,t[s].point[0]),n=Math.max(n,t[s].point[0]),r=Math.min(r,t[s].point[1]),i=Math.max(i,t[s].point[1]);return{top:r,left:e,bottom:i,right:n}}const lY=t=>{const e=(t.left+t.right)/2,n=(t.top+t.bottom)/2,r=t.width/(t.right-t.left)*t.paddingMarginRatio,i=t.height/(t.bottom-t.top)*t.paddingMarginRatio;return[Math.min(r,i),n,e]},cY=16448250,aCe=400,uY=.4,lCe=({width:t,height:e,locations:n,uiState:r,setUIState:i})=>{const s=A.useCallback((a,l)=>{if((l==null?void 0:l.length)>1){const c=aY(l);return lY({left:c.left,top:c.top,right:c.right,bottom:c.bottom,width:t,height:e,paddingMarginRatio:a.viewportCenter&&a.viewportCenter[0]<1.7?uY:.5})}return a.viewportCenter},[e,t]);return{onFit:A.useCallback(()=>s(r,n),[s,r,n])}};function cCe(t){return{layout:{i:"ChartButton",x:(t==null?void 0:t.x)??0,y:(t==null?void 0:t.y)??6,w:(t==null?void 0:t.w)??1,h:(t==null?void 0:t.h)??1,isDraggable:!0,isResizable:!1,resizeHandles:[],enabled:(t==null?void 0:t.enabled)??!0,shown:(t==null?void 0:t.shown)??!0,maximized:!1},resource:{id:"ChartButton",type:cr.FloatingButton,bindToPanelId:"ChartPanel",tooltip:"Open Chart Panel",icon:D(jX,{}),onClick:t==null?void 0:t.onClick}}}function uCe(){return window.matchMedia("(hover: hover)").matches}const dCe=Tt(fi)`
  position: absolute;
  width: 40px;
  height: 40px;
  margin: 0;
  padding: 0;
  right: 10px;
  border-radius: 20px;
  border: 1px solid gray;
`,hCe=Tt(dCe)`
  top: 40px;
`,fCe=Tt(O1)`
  width: 120px;
  padding: 18px;
  margin-right: 5px;
  margin-left: 20px;
`,pCe=Tt.div`
  position: absolute;
  width: 210px;
  height: 50px;
  top: 40px;
  right: 55px;
  background-color: white;
  border-radius: 20px;
  border: 1px solid gray;
  box-shadow: 0 0 1px gray;
`,mCe=t=>{const[e,n]=A.useState(!1);return t.shown?Pe(ui,{children:[D(hCe,{color:"primary",title:"Change scale of display chart",onClick:()=>n(!e),children:D(oY,{})}),D(RN,{open:e,onClick:()=>{setTimeout(()=>{n(!1)},aCe)},sx:{backgroundColor:"#00000030",zIndex:r=>r.zIndex.drawer+1},children:D(pCe,{children:D(fCe,{"aria-label":"Change scale of display chart",value:t.scale,min:1,max:21,step:null,marks:[{value:1,label:"1"},{value:2,label:""},{value:3,label:"3"},{value:5,label:"5"},{value:8,label:"8"},{value:13,label:"13"},{value:21,label:"21"}],onChange:(r,i)=>t.onChangeScale(i)})})})]}):null},gCe=Tt.div`
  width: 100%;
  height: 100%;
  border-radius: 8px;
`,vCe=Tt($t)`
  width: 100%;
  height: 100%;
  min-width: 0;
  min-height: 0;
  overflow: hidden;
  justify-content: center;
  align-items: center;
  align-content: center;
  border-radius: 8px;
  background-color: #f5f5f5;
`,yCe=Tt($t)`
  position: absolute;
  bottom: 5px;
  width: 100%;
  display: flex;
  justify-content: center;
`,_Ce={[Da.ManufactureShare]:D(VX,{}),[Da.AgricultureShare]:D(CSe,{}),[Da.PriceIndex]:D(USe,{}),[Da.NominalWage]:D(HSe,{}),[Da.RealWage]:D(ASe,{})},bCe=Object.values(Gse).map(t=>({label:t,icon:_Ce[t],value:t})),xCe=Tt($t)`
  display: flex;
  align-items: center;
  margin: 0;
`,ECe=Tt($t)`
  justify-content: center;
  margin-right: 8px;
  vertical-align: middle;
`;function wCe(t){return Pe(L1,{size:"small",children:[D(D7,{id:"select-label",children:"Chart"}),D(kN,{labelId:"select-label",id:"chart-title-select",value:t.chartType,label:"title",onChange:e=>t.onChangeChartType(e.target.value),children:bCe.map(e=>D($v,{value:e.value,children:Pe(xCe,{children:[D(ECe,{children:e.icon}),D(cE,{children:e.label})]})},e.value))})]})}const TCe=Gn.memo(t=>{const[e,n]=A.useState(!1);return Pe(gCe,{onMouseEnter:()=>n(!0),onMouseLeave:()=>n(!1),children:[D(mCe,{shown:e||!uCe(),scale:t.scale,onChangeScale:t.onChangeScale}),D(vCe,{children:t.children}),D(yCe,{children:D(wCe,{chartType:t.chartType,onChangeChartType:t.onChangeChartType})})]})}),SCe={"Share of Manufacturing":{min:0,max:1,oy:0,ticks:[{min:0,max:1,step:.1,lineDash:[5,0]},{min:0,max:.2,step:.05,lineDash:[5,5]},{min:0,max:.1,step:.01,lineDash:[3,3]}],bar:t=>t.manufactureShare,toFixed:2},"Share of Agriculture":{min:0,max:1,oy:0,ticks:[{min:0,max:1,step:.1,lineDash:[5,0]},{min:0,max:.25,step:.05,lineDash:[5,5]},{min:0,max:.1,step:.02,lineDash:[5,3]}],bar:t=>t.agricultureShare,toFixed:2},"Price Index":{min:0,max:4,oy:0,ticks:[{min:0,max:4,step:.2,lineDash:[5,0]},{min:0,max:.2,step:.05,lineDash:[5,5]}],line:t=>t.priceIndex,toFixed:2},"Nominal Wage":{min:.8,max:1.2,oy:1,ticks:[{min:.8,max:1.2,step:.05,lineDash:[5,0]},{min:.95,max:1.05,step:.005,lineDash:[5,5]}],line:t=>t.nominalWage,toFixed:3},"Real Wage":{min:.8,max:1.2,oy:1,ticks:[{min:.8,max:1.2,step:.05,lineDash:[5,0]},{min:.9,max:1.1,step:.01,lineDash:[5,5]},{min:.95,max:1.05,step:.005,lineDash:[3,3]}],line:t=>t.realWage,toFixed:3}},Hb=32,si=48,Vb=32,Ui=95,qz="#f5f5f5",CCe=(t,e,n,r,i,s,o)=>{if(t.textAlign="left",r<=20)for(let l=0;l<r;l+=1){const c=n+(l+.5)*e-(l<10?4:8);s.includes(l)&&o.includes(l)?t.fillStyle="red":t.fillStyle="#888",t.fillText(l.toString(),c,i)}else for(let l=10;l<r;l+=10){const c=n/2+l*e;s.includes(l)&&o.includes(l)?t.fillStyle="red":t.fillStyle="#888",t.fillText(l.toString(),c,i)}},ACe=Gn.memo(({width:t,height:e,chartTypeKey:n,scale:r,locations:i,focusedIndices:s,selectedIndices:o,onFocus:a,onUnfocus:l,onSelect:c,onUnselect:u})=>{const d=A.useRef(null),[h,f]=A.useState(null),p=b=>{if(!i||i.length===0)return null;const E=(t-si-Vb)/i.length;if(b){if(b.x<si)return null;for(let w=0;w<i.length;w++)if(b.x<si+(w+1)*E)return w}return null},m=(b,E)=>{E.clearRect(0,0,b.width,b.height),E.fillStyle=qz,E.fillRect(si,0,b.width-si-Vb,b.height-Ui);const w=SCe[n];if(!w)throw new Error("ERROR ChartTypeKey="+n);if(!i||i.length===0)return;const T=(b.width-si-Vb)/i.length;E.textAlign="right";const C=b.width-si-Vb,P=b.height-Hb-Ui,M=z=>N(z,w.max,w.min,P,w.oy,r),N=(z,X,G,j,H=0,Q=1)=>{const V=(z-H)/(X-G);return j*Q*V+H*j/2};(()=>{for(let z=0;z<w.ticks.length;z++){const{min:X,max:G,step:j,lineDash:H}=w.ticks[z];E.lineWidth=1,E.setLineDash(H),E.strokeStyle="#ddd";let Q=0;for(let V=X;V<=G;V+=j){const ee=b.height-Ui-M(V);0<=ee&&ee<=b.height-Ui&&(E.beginPath(),E.moveTo(si,ee),E.lineTo(si+C,ee),E.stroke(),Q++)}if(Q>3)break}E.setLineDash([])})(),i.forEach((z,X)=>{function G(){s.includes(X)&&(E.fillStyle="rgb(255,255,0,0.3)",E.fillRect(si+X*T,0,Math.max(T-1,1),b.height-Ui))}function j(V,ee){const ye=s.includes(X),se=o.includes(X);(ye||se)&&(E.lineWidth=2,E.strokeStyle=se?"#f83":"#ff0",0<=V&&V<=b.height-Ui?E.strokeRect(si+X*T+2,b.height-Ui-V+2,Math.max(T-1,1)-4,V-4):b.height-Ui<V&&E.strokeRect(si+X*T,0,Math.max(T-1,1),b.height-Ui),E.strokeStyle=ee)}function H(V){0<=V&&V<=b.height-Ui?E.fillRect(si+X*T,b.height-Ui-V,Math.max(T-1,1),V):b.height-Ui<V&&E.fillRect(si+X*T,0,Math.max(T-1,1),b.height-Ui)}function Q(){const V=o.includes(X),ee=w.bar?w.bar(z):null;if(ee!==null){const ye=ee<0?"#88e":V?"#ff8":"rgb(25,118,210)";E.strokeStyle=E.fillStyle=ye;const se=M(ee);H(se),j(se,ye)}}G(),Q()});function I(){E.beginPath(),i.forEach((z,X)=>{const G=w.line?w.line(z):null;if(G!==null){const j=b.height-Ui-M(G);E.strokeStyle="#88e",E.lineWidth=2,X===0?E.moveTo(si+(X+.5)*T,j):E.lineTo(si+(X+.5)*T,j);const H=s.includes(X),Q=o.includes(X);(H||Q)&&(E.save(),E.fillStyle=H&&Q?"red":"blue",E.fillRect(si+(X+.5)*T-3,j-3,6,6),E.restore())}}),E.stroke()}I();const k=()=>{for(let z=0;z<w.ticks.length;z++){const{min:X,max:G,step:j}=w.ticks[z];let H=0;for(let Q=X;Q<=G;Q+=j){const V=b.height-Ui-M(Q);if(Hb<=V&&V<=b.height-Hb+Ui){E.fillStyle="#888";const ee=Q.toFixed(w.toFixed);E.fillText(ee,si-6,V),H++}}if(H>3)break}};E.fillStyle=qz,E.fillRect(0,0,b.width,Hb),k(),CCe(E,T,si,i.length,b.height-Ui+13,s,o);function R(z){z!==null&&s.includes(z)&&h!==null&&(E.fillStyle="rgb(10,10,10,0.3)",E.fillRect(Math.min(t-230,h.x),h.y+12,230,20),E.fillStyle="rgb(255,255,255,1)",E.textAlign="left",E.fillText(i[z].label,Math.min(t-230+16,h.x+8),h.y+26))}R(p(h))},_=A.useCallback(b=>{const E=d.current,w=p({x:b.offsetX,y:b.offsetY});w===null?l(s):s.includes(w)?E.style.cursor="pointer":(E.style.cursor="pointer",l(s),a([w])),f({x:b.offsetX,y:b.offsetY})},[d.current,s]),y=A.useCallback(b=>{d.current,p({x:b.offsetX,y:b.offsetY}),s.length>0&&l(s)},[d.current,s]),x=A.useCallback(b=>{d.current;const E=p({x:b.offsetX,y:b.offsetY});E!==null&&(o.includes(E)?u(o,[E]):c(o,[E]))},[d.current,o]);return A.useEffect(()=>{const b=d.current;b.onmousemove=_,b.onmouseleave=y,b.onmousedown=x},[d.current,_,y,x]),A.useEffect(()=>{const E=d.current.getContext("2d");if(!E)throw new Error("Canvas2D is not supported");m(d.current,E)},[r,t,e,n,s,o,i]),D("canvas",{ref:d,width:t,height:e})}),Zz=({sessionState:t,uiState:e,setSessionChartType:n,setSessionChartScale:r,onSelect:i,onUnselect:s,onFocus:o,onUnfocus:a})=>D(TCe,{onChangeChartType:n,onChangeScale:r,scale:e==null?void 0:e.chartScale,chartType:e==null?void 0:e.chartType,children:D(ACe,{width:300,height:300,chartTypeKey:e==null?void 0:e.chartType,scale:e==null?void 0:e.chartScale,locations:t==null?void 0:t.locations,focusedIndices:e==null?void 0:e.focusedIndices,selectedIndices:e==null?void 0:e.selectedIndices,onFocus:o,onUnfocus:a,onSelect:i,onUnselect:s})}),RCe=()=>Pe($t,{style:{display:"flex",gap:"10px"},children:[D(Ki,{variant:"contained",startIcon:D(WX,{}),title:"Import a simulation from a file",children:"Import"}),D(Ki,{variant:"contained",startIcon:D(kSe,{}),title:"Export a simulation from a file",children:"Export"})]}),rC=Tt(fi)`
  background-color: rgba(255, 255, 255, 0.5);
  width: 40px;
  height: 40px;
  margin: 0;
  padding: 0;
  border-radius: 20px;
  border: 1px solid gray;
  z-index: 101;
`,PCe=Tt(rC)``,ICe=Tt(rC)``,MCe=Tt(rC)``,LCe=Tt(rC)``,OCe=t=>{var e,n,r,i;return Pe($t,{style:{display:"flex",gap:"10px"},children:[D(PCe,{id:"addNodeButton",disabled:!((e=t.state)!=null&&e.addLocation),color:"primary",title:"Add a location",onClick:t.onAddLocation,children:D(ISe,{})}),D(ICe,{id:"removeNodeButton",disabled:!((n=t.state)!=null&&n.removeLocation),color:"primary",title:"Remove selected location(s)",onClick:t.onRemoveLocation,children:Pe(Hm,{children:[D("path",{d:"M18 11h-2v2h2z"}),D("path",{d:"M12 7V3H2v18h14v-2h-4v-2h2v-2h-2v-2h2v-2h-2V9h8v6h2V7zM6 19H4v-2h2zm0-4H4v-2h2zm0-4H4V9h2zm0-4H4V5h2zm4 12H8v-2h2zm0-4H8v-2h2zm0-4H8V9h2zm0-4H8V5h2z"}),D("path",{d:"m21.398 15.596-1.662 1.664-1.63-1.631-1.413 1.41 1.631 1.63-1.795 1.798 1.41 1.41 1.795-1.795 1.83 1.828 1.41-1.412-1.828-1.828 1.665-1.664-1.413-1.41z"})]})}),D(MCe,{id:"addEdgeButton",disabled:!((r=t.state)!=null&&r.addEdge),color:"primary",title:"Add edge(s) between selected locations",onClick:t.onAddEdge,children:D(SSe,{})}),D(LCe,{id:"removeEdgeButton",disabled:!((i=t.state)!=null&&i.removeEdge),color:"primary",title:"Remove edge(s) between selected locations",onClick:t.onRemoveEdge,children:D(GSe,{})})]})};function kCe(t){return{layout:{i:"BackgroundPanel",x:(t==null?void 0:t.x)??0,y:(t==null?void 0:t.y)??0,w:(t==null?void 0:t.w)??1,h:(t==null?void 0:t.h)??1,resizeHandles:[],static:!0,enabled:!0,shown:(t==null?void 0:t.shown)??!0,maximized:(t==null?void 0:t.maximized)??!1},resource:{id:"BackgroundPanel",type:cr.BackgroundPanel}}}const NCe=({type:t,sessionState:e,setSessionState:n,onAddBulkLocations:r,onRemoveBulkLocations:i})=>{const s=A.useCallback(u=>{n(d=>(d.parameterSet=jm[t].find(h=>h.caseId===u)||d.parameterSet,d),!0,"changeCase")},[n]),o=A.useCallback((u,d)=>{n(h=>{h.parameterSet.manufactureShare=u},d||!1,"updateCountry")},[e==null?void 0:e.locations,e==null?void 0:e.edges,e==null?void 0:e.parameterSet,n]),a=A.useCallback((u,d)=>{n(h=>{h.parameterSet.transportationCost=u},d||!1,"updateCountry")},[e==null?void 0:e.locations,e==null?void 0:e.edges,e==null?void 0:e.parameterSet,n]),l=A.useCallback((u,d)=>{n(h=>{h.parameterSet.elasticitySubstitution=u},d||!1,"updateCountry")},[e==null?void 0:e.locations,e==null?void 0:e.edges,e==null?void 0:e.parameterSet,n]),c=A.useCallback((u,d)=>{u<e.locations.length?i(u,d):e.locations.length<u&&(console.log("onAddBulkLocations",u),r(u,d))},[]);return{onParameterSetChange:s,setManufactureShare:o,setTransportationCost:a,setElasticitySubstitution:l,setNumLocations:c}};class DCe{constructor(){this.controller=null}async runAsyncFunction(e){this.controller&&this.controller.abort(),this.controller=new AbortController,this.controller.signal,e()}async cancelAll(){this.controller&&this.controller.abort()}}const BCe=()=>D($t,{style:{display:"flex",gap:"10px"}}),FCe=["element"];function UCe(t,e){for(let n=0;n<t.length;n+=1)if(e(t[n]))return n;return-1}function zCe(t,e){let n=0,r=t.length-1;for(;n<=r;){const i=Math.floor((n+r)/2);if(t[i].element===e)return i;t[i].element.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_PRECEDING?r=i-1:n=i+1}return n}const dY=A.createContext({});function $Ce(t){const e=A.useRef(null);return A.useEffect(()=>{e.current=t},[t]),e.current}const Qz=()=>{};function jCe(t){const[,e]=A.useState(),{registerDescendant:n=Qz,unregisterDescendant:r=Qz,descendants:i=[],parentId:s=null}=A.useContext(dY),o=UCe(i,c=>c.element===t.element),a=$Ce(i),l=i.some((c,u)=>a&&a[u]&&a[u].element!==c.element);return Os(()=>{if(t.element)return n(U({},t,{index:o})),()=>{r(t.element)};e({})},[n,r,o,l,t]),{parentId:s,index:o}}function hY(t){const{children:e,id:n}=t,[r,i]=A.useState([]),s=A.useCallback(l=>{let{element:c}=l,u=$e(l,FCe);i(d=>{if(d.length===0)return[U({},u,{element:c,index:0})];const h=zCe(d,c);let f;if(d[h]&&d[h].element===c)f=d;else{const p=U({},u,{element:c,index:h});f=d.slice(),f.splice(h,0,p)}return f.forEach((p,m)=>{p.index=m}),f})},[]),o=A.useCallback(l=>{i(c=>c.filter(u=>l!==u.element))},[]),a=A.useMemo(()=>({descendants:r,registerDescendant:s,unregisterDescendant:o,parentId:n}),[r,s,o,n]);return Z.jsx(dY.Provider,{value:a,children:e})}const fY={instance:null,multiSelect:!1,disabledItemsFocusable:!1,treeId:void 0,icons:{defaultCollapseIcon:null,defaultExpandIcon:null,defaultParentIcon:null,defaultEndIcon:null}},pY=A.createContext(fY),mY=()=>A.useContext(pY);function GCe(t){const{instance:e,multiSelect:n}=mY(),r=e?e.isNodeExpandable(t):!1,i=e?e.isNodeExpanded(t):!1,s=e?e.isNodeFocused(t):!1,o=e?e.isNodeSelected(t):!1,a=e?e.isNodeDisabled(t):!1;return{disabled:a,expanded:i,selected:o,focused:s,handleExpansion:d=>{if(e&&!a){s||e.focusNode(d,t);const h=n&&(d.shiftKey||d.ctrlKey||d.metaKey);r&&!(h&&e.isNodeExpanded(t))&&e.toggleNodeExpansion(d,t)}},handleSelection:d=>{e&&!a&&(s||e.focusNode(d,t),n&&(d.shiftKey||d.ctrlKey||d.metaKey)?d.shiftKey?e.selectRange(d,{end:t}):e.selectNode(d,t,!0):e.selectNode(d,t))},preventSelection:d=>{(d.shiftKey||d.ctrlKey||d.metaKey||a)&&d.preventDefault()}}}const HCe=["classes","className","displayIcon","expansionIcon","icon","label","nodeId","onClick","onMouseDown"],gY=A.forwardRef(function(e,n){const{classes:r,className:i,displayIcon:s,expansionIcon:o,icon:a,label:l,nodeId:c,onClick:u,onMouseDown:d}=e,h=$e(e,HCe),{disabled:f,expanded:p,selected:m,focused:_,handleExpansion:y,handleSelection:x,preventSelection:b}=GCe(c),E=a||o||s,w=C=>{b(C),d&&d(C)},T=C=>{y(C),x(C),u&&u(C)};return Z.jsxs("div",U({},h,{className:Ue(i,r.root,p&&r.expanded,m&&r.selected,_&&r.focused,f&&r.disabled),onClick:T,onMouseDown:w,ref:n,children:[Z.jsx("div",{className:r.iconContainer,children:E}),Z.jsx("div",{className:r.label,children:l})]}))});function VCe(t){return ot("MuiTreeItem",t)}const Xo=it("MuiTreeItem",["root","group","content","expanded","selected","focused","disabled","iconContainer","label"]),WCe=["children","className","collapseIcon","ContentComponent","ContentProps","endIcon","expandIcon","disabled","icon","id","label","nodeId","onClick","onMouseDown","TransitionComponent","TransitionProps"],XCe=t=>{const{classes:e}=t;return st({root:["root"],content:["content"],expanded:["expanded"],selected:["selected"],focused:["focused"],disabled:["disabled"],iconContainer:["iconContainer"],label:["label"],group:["group"]},VCe,e)},YCe=Se("li",{name:"MuiTreeItem",slot:"Root",overridesResolver:(t,e)=>e.root})({listStyle:"none",margin:0,padding:0,outline:0}),KCe=Se(gY,{name:"MuiTreeItem",slot:"Content",overridesResolver:(t,e)=>[e.content,e.iconContainer&&{[`& .${Xo.iconContainer}`]:e.iconContainer},e.label&&{[`& .${Xo.label}`]:e.label}]})(({theme:t})=>({padding:"0 8px",width:"100%",boxSizing:"border-box",display:"flex",alignItems:"center",cursor:"pointer",WebkitTapHighlightColor:"transparent","&:hover":{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Xo.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity,backgroundColor:"transparent"},[`&.${Xo.focused}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${Xo.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:rn(t.palette.primary.main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:rn(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:rn(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${Xo.focused}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:rn(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`& .${Xo.iconContainer}`]:{marginRight:4,width:15,display:"flex",flexShrink:0,justifyContent:"center","& svg":{fontSize:18}},[`& .${Xo.label}`]:U({paddingLeft:4,width:"100%",boxSizing:"border-box",minWidth:0,position:"relative"},t.typography.body1)})),qCe=Se(i7,{name:"MuiTreeItem",slot:"Group",overridesResolver:(t,e)=>e.group})({margin:0,padding:0,marginLeft:17}),ZCe=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiTreeItem"}),{children:i,className:s,collapseIcon:o,ContentComponent:a=gY,ContentProps:l,endIcon:c,expandIcon:u,disabled:d,icon:h,id:f,label:p,nodeId:m,onClick:_,onMouseDown:y,TransitionComponent:x=i7,TransitionProps:b}=r,E=$e(r,WCe),{icons:w,multiSelect:T,disabledItemsFocusable:C,treeId:P,instance:M}=mY();let N;f!=null?N=f:P&&m&&(N=`${P}-${m}`);const[F,I]=A.useState(null),k=A.useRef(null),R=Fn(I,n),z=A.useMemo(()=>({element:F,id:m}),[m,F]),{index:X,parentId:G}=jCe(z),j=!!(Array.isArray(i)?i.length:i),H=M?M.isNodeExpanded(m):!1,Q=M?M.isNodeFocused(m):!1,V=M?M.isNodeSelected(m):!1,ee=M?M.isNodeDisabled(m):!1,ye=U({},r,{expanded:H,focused:Q,selected:V,disabled:ee}),se=XCe(ye);let fe,ve;j&&(H?ve=o||w.defaultCollapseIcon:ve=u||w.defaultExpandIcon),j?fe=w.defaultParentIcon:fe=c||w.defaultEndIcon,A.useEffect(()=>{if(M&&X!==-1)return M.updateNode({id:m,idAttribute:N,index:X,parentId:G,expandable:j,disabled:d}),()=>M.removeNode(m)},[M,G,X,m,j,d,N]),A.useEffect(()=>{if(M&&p){var ue,Ce;return M.mapFirstChar(m,((ue=(Ce=k.current)==null?void 0:Ce.textContent)!=null?ue:"").substring(0,1).toLowerCase())}},[M,m,p]);let Oe;T?Oe=V:V&&(Oe=!0);function ae(ue){if(ue.target===ue.currentTarget){let pe;typeof ue.target.getRootNode=="function"?pe=ue.target.getRootNode():pe=tr(ue.target),pe.getElementById(P).focus({preventScroll:!0})}const Ce=!C&&ee;M&&!Q&&ue.currentTarget===ue.target&&!Ce&&M.focusNode(ue,m)}return Z.jsxs(YCe,U({className:Ue(se.root,s),role:"treeitem","aria-expanded":j?H:void 0,"aria-selected":Oe,"aria-disabled":ee||void 0,id:N,tabIndex:-1},E,{ownerState:ye,onFocus:ae,ref:R,children:[Z.jsx(KCe,U({as:a,ref:k,classes:{root:se.content,expanded:se.expanded,selected:se.selected,focused:se.focused,disabled:se.disabled,iconContainer:se.iconContainer,label:se.label},label:p,nodeId:m,onClick:_,onMouseDown:y,icon:h,expansionIcon:ve,displayIcon:fe,ownerState:ye},l)),i&&Z.jsx(hY,{id:m,children:Z.jsx(qCe,U({as:x,unmountOnExit:!0,className:se.group,in:H,component:"ul",role:"group"},b,{children:i}))})]}))});function QCe(t){return ot("MuiTreeView",t)}it("MuiTreeView",["root"]);const JCe=(t,e)=>{const n=A.useRef({}),[r,i]=A.useState(()=>{const o={};return t.forEach(a=>{a.models&&Object.entries(a.models).forEach(([l,c])=>{n.current[l]={controlledProp:c.controlledProp,defaultProp:c.defaultProp,isControlled:e[c.controlledProp]!==void 0},o[l]=e[c.defaultProp]})}),o});return Object.fromEntries(Object.entries(n.current).map(([o,a])=>{const l=a.isControlled?e[a.controlledProp]:r[o];return[o,{value:l,setValue:c=>{a.isControlled||i(u=>U({},u,{[o]:c}))}}]}))};let eAe=class{constructor(){this.maxListeners=20,this.warnOnce=!1,this.events={}}on(e,n,r={}){let i=this.events[e];i||(i={highPriority:new Map,regular:new Map},this.events[e]=i),r.isFirst?i.highPriority.set(n,!0):i.regular.set(n,!0)}removeListener(e,n){this.events[e]&&(this.events[e].regular.delete(n),this.events[e].highPriority.delete(n))}removeAllListeners(){this.events={}}emit(e,...n){const r=this.events[e];if(!r)return;const i=Array.from(r.highPriority.keys()),s=Array.from(r.regular.keys());for(let o=i.length-1;o>=0;o-=1){const a=i[o];r.highPriority.has(a)&&a.apply(this,n)}for(let o=0;o<s.length;o+=1){const a=s[o];r.regular.has(a)&&a.apply(this,n)}}once(e,n){const r=this;this.on(e,function i(...s){r.removeListener(e,i),n.apply(r,s)})}};const eP=(t,e)=>{const n=t.getNode(e),r=t.getNavigableChildrenIds(n.parentId),i=r.indexOf(e);if(i===0)return n.parentId;let s=r[i-1];for(;t.isNodeExpanded(s)&&t.getNavigableChildrenIds(s).length>0;)s=t.getNavigableChildrenIds(s).pop();return s},nv=(t,e)=>{if(t.isNodeExpanded(e)&&t.getNavigableChildrenIds(e).length>0)return t.getNavigableChildrenIds(e)[0];let n=t.getNode(e);for(;n!=null;){const r=t.getNavigableChildrenIds(n.parentId),i=r[r.indexOf(n.id)+1];if(i)return i;n=t.getNode(n.parentId)}return null},LM=t=>{let e=t.getNavigableChildrenIds(null).pop();for(;t.isNodeExpanded(e);)e=t.getNavigableChildrenIds(e).pop();return e},OM=t=>t.getNavigableChildrenIds(null)[0],Pg=(t,e)=>{Object.assign(t,e)},tAe=t=>t.isPropagationStopped!==void 0,nAe=({instance:t})=>{const[e]=A.useState(()=>new eAe),n=A.useCallback((...i)=>{const[s,o,a={}]=i;a.defaultMuiPrevented=!1,!(tAe(a)&&a.isPropagationStopped())&&e.emit(s,o,a)},[e]),r=A.useCallback((i,s)=>(e.on(i,s),()=>{e.removeListener(i,s)}),[e]);Pg(t,{$$publishEvent:n,$$subscribeEvent:r})},rAe=[nAe],iAe=t=>{const e=[...rAe,...t.plugins],n=e.reduce((p,m)=>m.getDefaultizedParams?m.getDefaultizedParams(p):p,t),r=JCe(e,n),s=A.useRef({}).current,o=A.useRef(null),a=Fn(o,t.rootRef),[l,c]=A.useState(()=>{const p={};return e.forEach(m=>{m.getInitialState&&Object.assign(p,m.getInitialState(n))}),p}),u=[];let d=fY;const h=p=>{const m=p({instance:s,params:n,state:l,setState:c,rootRef:o,models:r})||{};m.getRootProps&&u.push(m.getRootProps),m.contextValue&&(d=m.contextValue)};return e.forEach(h),{getRootProps:(p={})=>{const m=U({role:"tree",tabIndex:0},p,{ref:a});return u.forEach(_=>{Object.assign(m,_(p))}),m},rootRef:a,contextValue:d}};function sAe(t){const{value:e,children:n}=t;return Z.jsx(pY.Provider,{value:e,children:Z.jsx(hY,{children:n})})}const oAe=(t,e,n)=>{t.$$publishEvent(e,n)},aAe=({instance:t,params:e})=>{const n=A.useRef({}),r=A.useCallback(c=>n.current[c],[]),i=A.useCallback(c=>{n.current[c.id]=c},[]),s=A.useCallback(c=>{const u=U({},n.current);delete u[c],n.current=u,oAe(t,"removeNode",{id:c})},[t]),o=A.useCallback(c=>{if(c==null)return!1;let u=t.getNode(c);if(!u)return!1;if(u.disabled)return!0;for(;u.parentId!=null;)if(u=t.getNode(u.parentId),u.disabled)return!0;return!1},[t]),a=Vr(c=>Object.values(n.current).filter(u=>u.parentId===c).sort((u,d)=>u.index-d.index).map(u=>u.id));Pg(t,{getNode:r,updateNode:i,removeNode:s,getChildrenIds:a,getNavigableChildrenIds:c=>{let u=t.getChildrenIds(c);return e.disabledItemsFocusable||(u=u.filter(d=>!t.isNodeDisabled(d))),u},isNodeDisabled:o})},u3=({instance:t,params:e,models:n})=>{const r=A.useCallback(a=>Array.isArray(n.expanded.value)?n.expanded.value.indexOf(a)!==-1:!1,[n.expanded.value]),i=A.useCallback(a=>{var l;return!!((l=t.getNode(a))!=null&&l.expandable)},[t]),s=Vr((a,l)=>{if(l==null)return;let c;n.expanded.value.indexOf(l)!==-1?c=n.expanded.value.filter(u=>u!==l):c=[l].concat(n.expanded.value),e.onNodeToggle&&e.onNodeToggle(a,c),n.expanded.setValue(c)});Pg(t,{isNodeExpanded:r,isNodeExpandable:i,toggleNodeExpansion:s,expandAllSiblings:(a,l)=>{const c=t.getNode(l),d=t.getChildrenIds(c.parentId).filter(f=>t.isNodeExpandable(f)&&!t.isNodeExpanded(f)),h=n.expanded.value.concat(d);d.length>0&&(n.expanded.setValue(h),e.onNodeToggle&&e.onNodeToggle(a,h))}})};u3.models={expanded:{controlledProp:"expanded",defaultProp:"defaultExpanded"}};const lAe=[];u3.getDefaultizedParams=t=>{var e;return U({},t,{defaultExpanded:(e=t.defaultExpanded)!=null?e:lAe})};const cAe=(t,e,n)=>{if(e===n)return[e,n];const r=t.getNode(e),i=t.getNode(n);if(r.parentId===i.id||i.parentId===r.id)return i.parentId===r.id?[r.id,i.id]:[i.id,r.id];const s=[r.id],o=[i.id];let a=r.parentId,l=i.parentId,c=o.indexOf(a)!==-1,u=s.indexOf(l)!==-1,d=!0,h=!0;for(;!u&&!c;)d&&(s.push(a),c=o.indexOf(a)!==-1,d=a!==null,!c&&d&&(a=t.getNode(a).parentId)),h&&!c&&(o.push(l),u=s.indexOf(l)!==-1,h=l!==null,!u&&h&&(l=t.getNode(l).parentId));const f=c?a:l,p=t.getChildrenIds(f),m=s[s.indexOf(f)-1],_=o[o.indexOf(f)-1];return p.indexOf(m)<p.indexOf(_)?[e,n]:[n,e]},d3=({instance:t,params:e,models:n})=>{const r=A.useRef(null),i=A.useRef(!1),s=A.useRef([]),o=p=>Array.isArray(n.selected.value)?n.selected.value.indexOf(p)!==-1:n.selected.value===p,a=(p,m,_=!1)=>{if(!e.disableSelection){if(_){if(Array.isArray(n.selected.value)){let y;n.selected.value.indexOf(m)!==-1?y=n.selected.value.filter(x=>x!==m):y=[m].concat(n.selected.value),e.onNodeSelect&&e.onNodeSelect(p,y),n.selected.setValue(y)}}else{const y=e.multiSelect?[m]:m;e.onNodeSelect&&e.onNodeSelect(p,y),n.selected.setValue(y)}r.current=m,i.current=!1,s.current=[]}},l=(p,m)=>{const[_,y]=cAe(t,p,m),x=[_];let b=_;for(;b!==y;)b=nv(t,b),x.push(b);return x},c=(p,m)=>{let _=n.selected.value.slice();const{start:y,next:x,current:b}=m;!x||!b||(s.current.indexOf(b)===-1&&(s.current=[]),i.current?s.current.indexOf(x)!==-1?(_=_.filter(E=>E===y||E!==b),s.current=s.current.filter(E=>E===y||E!==b)):(_.push(x),s.current.push(x)):(_.push(x),s.current.push(b,x)),e.onNodeSelect&&e.onNodeSelect(p,_),n.selected.setValue(_))},u=(p,m)=>{let _=n.selected.value.slice();const{start:y,end:x}=m;i.current&&(_=_.filter(w=>s.current.indexOf(w)===-1));let b=l(y,x);b=b.filter(w=>!t.isNodeDisabled(w)),s.current=b;let E=_.concat(b);E=E.filter((w,T)=>E.indexOf(w)===T),e.onNodeSelect&&e.onNodeSelect(p,E),n.selected.setValue(E)};return Pg(t,{isNodeSelected:o,selectNode:a,selectRange:(p,m,_=!1)=>{if(e.disableSelection)return;const{start:y=r.current,end:x,current:b}=m;_?c(p,{start:y,next:x,current:b}):y!=null&&x!=null&&u(p,{start:y,end:x}),i.current=!0},rangeSelectToLast:(p,m)=>{r.current||(r.current=m);const _=i.current?r.current:m;t.selectRange(p,{start:_,end:LM(t)})},rangeSelectToFirst:(p,m)=>{r.current||(r.current=m);const _=i.current?r.current:m;t.selectRange(p,{start:_,end:OM(t)})}}),{getRootProps:()=>({"aria-multiselectable":e.multiSelect})}};d3.models={selected:{controlledProp:"selected",defaultProp:"defaultSelected"}};const uAe=[];d3.getDefaultizedParams=t=>{var e,n,r;return U({},t,{disableSelection:(e=t.disableSelection)!=null?e:!1,multiSelect:(n=t.multiSelect)!=null?n:!1,defaultSelected:(r=t.defaultSelected)!=null?r:t.multiSelect?uAe:null})};const Jz=1e3;class dAe{constructor(e=Jz){this.timeouts=new Map,this.cleanupTimeout=Jz,this.cleanupTimeout=e}register(e,n,r){this.timeouts||(this.timeouts=new Map);const i=setTimeout(()=>{typeof n=="function"&&n(),this.timeouts.delete(r.cleanupToken)},this.cleanupTimeout);this.timeouts.set(r.cleanupToken,i)}unregister(e){const n=this.timeouts.get(e.cleanupToken);n&&(this.timeouts.delete(e.cleanupToken),clearTimeout(n))}reset(){this.timeouts&&(this.timeouts.forEach((e,n)=>{this.unregister({cleanupToken:n})}),this.timeouts=void 0)}}class hAe{constructor(){this.registry=new FinalizationRegistry(e=>{typeof e=="function"&&e()})}register(e,n,r){this.registry.register(e,n,r)}unregister(e){this.registry.unregister(e)}reset(){}}class fAe{}function pAe(t){let e=0;return function(r,i,s){t.registry===null&&(t.registry=typeof FinalizationRegistry<"u"?new hAe:new dAe);const[o]=A.useState(new fAe),a=A.useRef(null),l=A.useRef();l.current=s;const c=A.useRef(null);if(!a.current&&l.current){const u=(d,h)=>{if(!h.defaultMuiPrevented){var f;(f=l.current)==null||f.call(l,d,h)}};a.current=r.$$subscribeEvent(i,u),e+=1,c.current={cleanupToken:e},t.registry.register(o,()=>{var d;(d=a.current)==null||d.call(a),a.current=null,c.current=null},c.current)}else!l.current&&a.current&&(a.current(),a.current=null,c.current&&(t.registry.unregister(c.current),c.current=null));A.useEffect(()=>{if(!a.current&&l.current){const u=(d,h)=>{if(!h.defaultMuiPrevented){var f;(f=l.current)==null||f.call(l,d,h)}};a.current=r.$$subscribeEvent(i,u)}return c.current&&t.registry&&(t.registry.unregister(c.current),c.current=null),()=>{var u;(u=a.current)==null||u.call(a),a.current=null}},[r,i])}}const mAe={registry:null},gAe=pAe(mAe),h3=({instance:t,params:e,state:n,setState:r,models:i,rootRef:s})=>{const o=Vr(f=>{const p=typeof f=="function"?f(n.focusedNodeId):f;r(m=>U({},m,{focusedNodeId:p}))}),a=A.useCallback(f=>n.focusedNodeId===f,[n.focusedNodeId]),l=Vr((f,p)=>{p&&(o(p),e.onNodeFocus&&e.onNodeFocus(f,p))});Pg(t,{isNodeFocused:a,focusNode:l}),gAe(t,"removeNode",({id:f})=>{o(p=>p===f&&s.current===tr(s.current).activeElement?t.getChildrenIds(null)[0]:p)});const c=f=>p=>{var m;if((m=f.onFocus)==null||m.call(f,p),p.target===p.currentTarget){const _=x=>{const b=t.getNode(x);return b&&(b.parentId==null||t.isNodeExpanded(b.parentId))};let y;Array.isArray(i.selected.value)?y=i.selected.value.find(_):i.selected.value!=null&&_(i.selected.value)&&(y=i.selected.value),y==null&&(y=t.getNavigableChildrenIds(null)[0]),t.focusNode(p,y)}},u=f=>p=>{var m;(m=f.onBlur)==null||m.call(f,p),o(null)},d=t.getNode(n.focusedNodeId),h=d?d.idAttribute:null;return{getRootProps:f=>({onFocus:c(f),onBlur:u(f),"aria-activedescendant":h??void 0})}};h3.getInitialState=()=>({focusedNodeId:null});h3.getDefaultizedParams=t=>{var e;return U({},t,{disabledItemsFocusable:(e=t.disabledItemsFocusable)!=null?e:!1})};function vAe(t){return t&&t.length===1&&t.match(/\S/)}function e8(t,e,n){for(let r=e;r<t.length;r+=1)if(n===t[r])return r;return-1}const yAe=({instance:t,params:e,state:n})=>{const i=ms().direction==="rtl",s=A.useRef({}),o=Vr((f,p)=>(s.current[f]=p,()=>{const m=U({},s.current);delete m[f],s.current=m}));Pg(t,{mapFirstChar:o});const a=f=>(n.focusedNodeId!=null&&t.isNodeExpandable(n.focusedNodeId)&&(t.isNodeExpanded(n.focusedNodeId)?t.focusNode(f,nv(t,n.focusedNodeId)):t.isNodeDisabled(n.focusedNodeId)||t.toggleNodeExpansion(f,n.focusedNodeId)),!0),l=f=>{if(n.focusedNodeId==null)return!1;if(t.isNodeExpanded(n.focusedNodeId)&&!t.isNodeDisabled(n.focusedNodeId))return t.toggleNodeExpansion(f,n.focusedNodeId),!0;const p=t.getNode(n.focusedNodeId).parentId;return p?(t.focusNode(f,p),!0):!1},c=(f,p,m)=>{let _,y;const x=m.toLowerCase(),b=[],E=[];Object.keys(s.current).forEach(w=>{const T=t.getNode(w),C=T.parentId?t.isNodeExpanded(T.parentId):!0,P=e.disabledItemsFocusable?!1:t.isNodeDisabled(w);C&&!P&&(b.push(w),E.push(s.current[w]))}),_=b.indexOf(p)+1,_>=b.length&&(_=0),y=e8(E,_,x),y===-1&&(y=e8(E,0,x)),y>-1&&t.focusNode(f,b[y])},u=(f,p)=>{t.isNodeDisabled(nv(t,p))||t.selectRange(f,{end:nv(t,p),current:p},!0)},d=(f,p)=>{t.isNodeDisabled(eP(t,p))||t.selectRange(f,{end:eP(t,p),current:p},!0)},h=f=>p=>{var m;(m=f.onKeyDown)==null||m.call(f,p);let _=!1;const y=p.key;if(p.altKey||p.currentTarget!==p.target||n.focusedNodeId==null)return;const x=p.ctrlKey||p.metaKey;switch(y){case" ":!e.disableSelection&&!t.isNodeDisabled(n.focusedNodeId)&&(_=!0,e.multiSelect&&p.shiftKey?t.selectRange(p,{end:n.focusedNodeId}):e.multiSelect?t.selectNode(p,n.focusedNodeId,!0):t.selectNode(p,n.focusedNodeId)),p.stopPropagation();break;case"Enter":t.isNodeDisabled(n.focusedNodeId)||(t.isNodeExpandable(n.focusedNodeId)?(t.toggleNodeExpansion(p,n.focusedNodeId),_=!0):e.disableSelection||(_=!0,e.multiSelect?t.selectNode(p,n.focusedNodeId,!0):t.selectNode(p,n.focusedNodeId))),p.stopPropagation();break;case"ArrowDown":e.multiSelect&&p.shiftKey&&!e.disableSelection&&u(p,n.focusedNodeId),t.focusNode(p,nv(t,n.focusedNodeId)),_=!0;break;case"ArrowUp":e.multiSelect&&p.shiftKey&&!e.disableSelection&&d(p,n.focusedNodeId),t.focusNode(p,eP(t,n.focusedNodeId)),_=!0;break;case"ArrowRight":i?_=l(p):_=a(p);break;case"ArrowLeft":i?_=a(p):_=l(p);break;case"Home":e.multiSelect&&x&&p.shiftKey&&!e.disableSelection&&!t.isNodeDisabled(n.focusedNodeId)&&t.rangeSelectToFirst(p,n.focusedNodeId),t.focusNode(p,OM(t)),_=!0;break;case"End":e.multiSelect&&x&&p.shiftKey&&!e.disableSelection&&!t.isNodeDisabled(n.focusedNodeId)&&t.rangeSelectToLast(p,n.focusedNodeId),t.focusNode(p,LM(t)),_=!0;break;default:y==="*"?(t.expandAllSiblings(p,n.focusedNodeId),_=!0):e.multiSelect&&x&&y.toLowerCase()==="a"&&!e.disableSelection?(t.selectRange(p,{start:OM(t),end:LM(t)}),_=!0):!x&&!p.shiftKey&&vAe(y)&&(c(p,n.focusedNodeId,y),_=!0)}_&&(p.preventDefault(),p.stopPropagation())};return{getRootProps:f=>({onKeyDown:h(f)})}},_Ae=({instance:t,params:e})=>{const n=kd(e.id);return{getRootProps:()=>({id:n}),contextValue:{treeId:n,instance:t,multiSelect:e.multiSelect,disabledItemsFocusable:e.disabledItemsFocusable,icons:{defaultCollapseIcon:e.defaultCollapseIcon,defaultEndIcon:e.defaultEndIcon,defaultExpandIcon:e.defaultExpandIcon,defaultParentIcon:e.defaultParentIcon}}}},bAe=[aAe,u3,d3,h3,yAe,_Ae],xAe=["disabledItemsFocusable","expanded","defaultExpanded","onNodeToggle","onNodeFocus","disableSelection","defaultSelected","selected","multiSelect","onNodeSelect","id","defaultCollapseIcon","defaultEndIcon","defaultExpandIcon","defaultParentIcon","children"],EAe=t=>{const{classes:e}=t;return st({root:["root"]},QCe,e)},t8=Se("ul",{name:"MuiTreeView",slot:"Root",overridesResolver:(t,e)=>e.root})({padding:0,margin:0,listStyle:"none",outline:0}),wAe=A.forwardRef(function(e,n){const r=at({props:e,name:"MuiTreeView"}),i=r,s=r,{disabledItemsFocusable:o,expanded:a,defaultExpanded:l,onNodeToggle:c,onNodeFocus:u,disableSelection:d,defaultSelected:h,selected:f,multiSelect:p,onNodeSelect:m,id:_,defaultCollapseIcon:y,defaultEndIcon:x,defaultExpandIcon:b,defaultParentIcon:E,children:w}=s,T=$e(s,xAe),{getRootProps:C,contextValue:P}=iAe({disabledItemsFocusable:o,expanded:a,defaultExpanded:l,onNodeToggle:c,onNodeFocus:u,disableSelection:d,defaultSelected:h,selected:f,multiSelect:p,onNodeSelect:m,id:_,defaultCollapseIcon:y,defaultEndIcon:x,defaultExpandIcon:b,defaultParentIcon:E,plugins:bAe,rootRef:n}),M=EAe(r),N=Nr({elementType:t8,externalSlotProps:{},externalForwardedProps:T,className:M.root,getSlotProps:C,ownerState:i});return Z.jsx(sAe,{value:P,children:Z.jsx(t8,U({},N,{children:w}))})});var f3={},vY={exports:{}};(function(t){function e(n){return n&&n.__esModule?n:{default:n}}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})(vY);var p3=vY.exports,tP={};const TAe=In(Zde);var n8;function m3(){return n8||(n8=1,function(t){"use client";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return e.createSvgIcon}});var e=TAe}(tP)),tP}var SAe=p3;Object.defineProperty(f3,"__esModule",{value:!0});var yY=f3.default=void 0,CAe=SAe(m3()),AAe=Z;yY=f3.default=(0,CAe.default)((0,AAe.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");var g3={},RAe=p3;Object.defineProperty(g3,"__esModule",{value:!0});var _Y=g3.default=void 0,PAe=RAe(m3()),IAe=Z;_Y=g3.default=(0,PAe.default)((0,IAe.jsx)("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight");const MAe=Se(ZCe)(({theme:t})=>({color:t.palette.text.secondary,[`& .${Xo.content}`]:{color:t.palette.text.secondary,borderTopRightRadius:t.spacing(2),borderBottomRightRadius:t.spacing(2),paddingRight:t.spacing(1),fontWeight:t.typography.fontWeightMedium,"&.Mui-expanded":{fontWeight:t.typography.fontWeightRegular},"&:hover":{backgroundColor:t.palette.action.hover},"&.Mui-focused, &.Mui-selected, &.Mui-selected.Mui-focused":{backgroundColor:`var(--tree-view-bg-color, ${t.palette.action.selected})`,color:"var(--tree-view-color)"},[`& .${Xo.label}`]:{fontWeight:"inherit",color:"inherit"}},[`& .${Xo.group}`]:{marginLeft:0,[`& .${Xo.content}`]:{paddingLeft:t.spacing(1)}}})),yu=t=>{const e=ms(),{bgColor:n,color:r,level:i,labelIcon:s,labelInfo:o,labelText:a,value:l,colorForDarkMode:c,bgColorForDarkMode:u,control:d,...h}=t,f={"--tree-view-color":e.palette.mode!=="dark"?r:c,"--tree-view-bg-color":e.palette.mode!=="dark"?n:u},p=A.useCallback(m=>{m.stopPropagation()},[]);return D(MAe,{label:Pe($t,{sx:{display:"flex",alignItems:"center",p:.1,marginLeft:(t.level-1)*2,pr:0},children:[d&&D(Ove,{value:l,control:d,label:Pe($t,{style:{display:"flex",flexDirection:"row"},children:[D($t,{component:s,color:"inherit",sx:{mr:.1}}),D(en,{variant:"body2",sx:{fontWeight:"inherit",flexGrow:1},children:a}),D(en,{variant:"caption",color:"inherit",children:o})]})}),!d&&Pe($t,{style:{display:"flex",flexDirection:"row"},children:[D($t,{component:s,color:"inherit",sx:{mr:.1}}),D(en,{variant:"body2",sx:{fontWeight:"inherit"},children:a}),D(en,{variant:"caption",color:"inherit",children:o})]})]}),style:f,...h,onClick:p})};var Ut=(t=>(t.gadmGeoJSON="gadmGeoJsonFiles",t.genericGeoJson="genericGeoJsonFiles",t.idegsmCities="idegsmCities",t.idegsmRoutes="idegsmRoutes",t.mapTiles="MapTiles",t))(Ut||{});class Pn extends Yt{constructor(){super(tN),this.version(3).stores({resources:"++id, &uuid, type, name"}),this.resources=this.table(an.resources)}static getSingleton(){return Pn.singleton||(Pn.singleton=new Pn),Pn.singleton}static async getResources(){return Pn.getSingleton().resources.toArray()}static async getResourcesByType(e){return Pn.getSingleton().resources.where("type").equals(e).toArray()}static async getResource(e){return Pn.getSingleton().resources.where("uuid").equals(e).last()}static createGADMGeoJsonResourceEntity(e){return this.createResource(e.uuid,Ut.gadmGeoJSON,e)}static async createResource(e,n,r){const i=Pn.getSingleton(),s=Date.now();i.resources.add({uuid:e??Rf(),type:n,...r,createdAt:s,updatedAt:s})}static async updateResource(e,n,r){const i=Pn.getSingleton(),s=await i.resources.where("uuid").equals(e).last();s&&i.resources.update(s,{...r,type:n,updatedAt:Date.now()})}static async deleteResource(e){const n=await Pn.getSingleton().resources.where("uuid").equals(e).last();n&&Pn.getSingleton().resources.delete(n.id)}}const iC=(t,e,n)=>{A.useEffect(()=>{(async()=>{const r=await t,i=()=>n(r);r.on("changes",i)})()},[])},LAe=({uuid:t})=>{const[e,n]=A.useState([]),[r,i]=A.useState([]),[s,o]=A.useState([]),[a,l]=A.useState([]),[c,u]=A.useState(!1),[d,h]=A.useState(""),[f,p]=A.useState(!1),[m,_]=A.useState([]),y=A.useCallback(()=>{Hi.openProject(t).then(T=>T.getLayerPanelState().then(C=>{C&&(u(C.mapTileEnabled),p(C.gadmGeoJsonEnabled))}))},[t]),x=A.useCallback(async()=>{Pn.getResourcesByType(Ut.mapTiles).then(T=>{n(T)}),Pn.getResourcesByType(Ut.gadmGeoJSON).then(T=>{i(T)}),Pn.getResourcesByType(Ut.idegsmCities).then(T=>{o(T)}),Pn.getResourcesByType(Ut.idegsmRoutes).then(T=>{l(T)})},[]),b=A.useCallback(()=>{Hi.openProject(t).then(T=>T.getLayerPanelState().then(C=>{C&&(h(C.mapTileUuid),_(C.gadmGeoJsonUuid))}))},[t]);iC(Hi.openProject(t),Hi.layerPanelState,()=>{x(),b()}),A.useEffect(()=>{x(),y(),b()},[y,x,b]);const E=(T,C)=>{if(T.stopPropagation(),C===Ut.mapTiles){const P=!c;u(P),Hi.openProject(t).then(M=>{M.updateLayerPanelState({mapTileEnabled:P})})}else if(C===Ut.gadmGeoJSON){const P=!f;p(P),Hi.openProject(t).then(M=>{M.updateLayerPanelState({gadmGeoJsonEnabled:P})})}},w=(T,C,P)=>{switch(C){case Ut.mapTiles:h(P),Hi.openProject(T).then(M=>{M.updateLayerPanelState({mapTileUuid:P})});break;case Ut.gadmGeoJSON:(()=>{const M=m.includes(P)?m.filter(N=>P!==N):[...m,P];_(M),Hi.openProject(T).then(N=>N.updateLayerPanelState({gadmGeoJsonUuid:M}))})();break}};return Pe(wAe,{style:{overflow:"scroll"},multiSelect:!0,defaultCollapseIcon:D(yY,{}),defaultExpandIcon:D(_Y,{}),defaultExpanded:[Ut.mapTiles,Ut.gadmGeoJSON,Ut.idegsmCities,Ut.idegsmRoutes],children:[D(yu,{nodeId:Ut.mapTiles,level:1,labelText:"MapTiler",labelIcon:Fy,control:D(Oa,{checked:c,onClick:T=>E(T,Ut.mapTiles)}),children:D(Z1e,{value:d,name:"mapTileOptionGroup",children:e.map(T=>D(yu,{disabled:!c,nodeId:T.uuid,level:2,labelText:T.name,labelIcon:Fy,control:D(Y1e,{checked:d===T.uuid,onClick:C=>{w(t,Ut.mapTiles,T.uuid)}}),value:T.uuid},T.uuid))})}),D(yu,{nodeId:Ut.gadmGeoJSON,level:1,labelText:"GADM GeoJSON",labelIcon:bf,control:D(Oa,{checked:f,onClick:T=>E(T,Ut.gadmGeoJSON)}),children:r.map(T=>D(yu,{nodeId:T.uuid,level:2,labelText:T.name,labelIcon:bf,control:D(Oa,{disabled:!f,name:T.uuid,checked:m.includes(T.uuid),value:T.uuid,onClick:C=>{w(t,Ut.gadmGeoJSON,T.uuid)}})},T.uuid))}),D(yu,{nodeId:Ut.idegsmCities,level:1,labelText:"Cities",labelIcon:xf,control:D(Oa,{}),children:s.map(T=>D(yu,{nodeId:T.uuid,level:2,labelText:T.name,labelIcon:xf,control:D(Oa,{onChange:C=>{console.log("[idegsm city] uuid",t)}})},T.uuid))}),D(yu,{nodeId:Ut.idegsmRoutes,level:1,labelText:"Routes",labelIcon:Qm,control:D(Oa,{}),children:a.map(T=>D(yu,{nodeId:T.uuid,level:2,labelText:T.name,labelIcon:Qm,control:D(Oa,{onChange:C=>{console.log("[idegsm route] uuid",t)}})},T.uuid))})]})},OAe=Tt.div`
  display: flex;
  gap: 10px;
  align-content: center;
  align-items: center;
`,kAe=Tt.div`
  display: flex;
  gap: 4px;
  margin-top: -5px;
  vertical-align: top;
`,NAe=Tt.div`
  padding-top: 4px;
  margin-left: 10px;
  text-align: center;
  width: 100px;
`,DAe=Tt(O1)`
  margin-top: 2px;
`;function Wb(t){return Pe(OAe,{children:[D(Wi,{title:t.title,children:Pe(NAe,{children:[t.icon,Pe(kAe,{children:[Pe(en,{children:[t.label," ="]}),D(en,{children:t.value})]})]})}),D(DAe,{"aria-label":t.label,value:t.value,getAriaValueText:e=>`${e}`,step:t.step,marks:t.marks,min:t.min,max:t.max,valueLabelDisplay:"auto",onChange:t.onChange,onChangeCommitted:t.onChangeCommitted})]})}const BAe=Tt.div`
  margin-left: 0;
  margin-right: 10px;
`,FAe=A.forwardRef((t,e)=>{const{set:n,current:r}=sS($h);A.useImperativeHandle(e,()=>({resetToDefault(){const f=jm[t.type].find(p=>r.parameterSet.caseId===p.caseId);n(p=>{p.parameterSet.numLocations=f.numLocations,p.parameterSet.manufactureShare=f.manufactureShare,p.parameterSet.transportationCost=f.transportationCost,p.parameterSet.elasticitySubstitution=f.elasticitySubstitution},!0,"resetToDefault")}}));const i=jm[t.type],s=A.useCallback((f,p)=>{t.setNumLocations(p,!1)},[n]),o=A.useCallback((f,p)=>{t.setNumLocations(p,!0)},[n]),a=A.useCallback((f,p)=>{n(m=>{m.parameterSet.manufactureShare=p},!1,"set parameter")},[n]),l=A.useCallback((f,p)=>{n(m=>{m.parameterSet.manufactureShare=p},!0,"set parameter")},[n]),c=A.useCallback((f,p)=>{n(m=>{m.parameterSet.transportationCost=p},!1,"set parameter")},[n]),u=A.useCallback((f,p)=>{n(m=>{m.parameterSet.transportationCost=p},!0,"set parameter")},[n]),d=A.useCallback((f,p)=>{n(m=>{m.parameterSet.elasticitySubstitution=p},!1,"set parameter")},[n]),h=A.useCallback((f,p)=>{n(m=>{m.parameterSet.elasticitySubstitution=p},!0,"set parameter")},[n]);return Pe(BAe,{children:[D(GEe,{exclusive:!0,value:r.parameterSet.caseId,onChange:(f,p)=>{p!==null&&t.onParameterSetChange(p,!0)},sx:{display:"flex",justifyContent:"center",marginTop:"4px",marginBottom:"8px"},children:i.map((f,p)=>D(DEe,{size:"small",title:f.title+": "+f.description,value:f.caseId,children:f.title},p))}),D(Wb,{title:"K: The number of locations connected by transportation network.",icon:D(l3,{}),label:"K",step:1,marks:[{value:1,label:"1"},{value:20,label:"20"},{value:40,label:"40"},{value:60,label:"60"},{value:80,label:"80"},{value:100,label:"100"}],value:r.parameterSet.numLocations||0,onChange:s,onChangeCommitted:o,min:1,max:100}),D(Wb,{title:": The share of manufacturing goods in expenditure.",icon:D(VX,{}),label:"",step:.01,marks:[{value:0,label:"0"},{value:.2,label:"0.2"},{value:.4,label:"0.4"},{value:.6,label:"0.6"},{value:.8,label:"0.8"},{value:1,label:"1.0"}],value:r.parameterSet.manufactureShare||0,onChange:a,onChangeCommitted:l,min:0,max:1}),D(Wb,{title:": The level of transportation cost among locations. A value of 1 represents no transportation cost, while a value of 10 represents significant transportation cost.",icon:D(QX,{}),label:"",step:.1,marks:[{value:1,label:"1"},{value:4,label:"4"},{value:7,label:"7"},{value:10,label:"10"}],value:r.parameterSet.transportationCost||0,onChange:c,onChangeCommitted:u,min:1,max:10}),D(Wb,{title:": The elasticity of substitution among manufactured goods. A value of 1 represents a strong love of variety, while a value of 20 represents a limited love of variety.",icon:D(OSe,{}),label:"",step:.1,marks:[{value:1,label:"1"},{value:5,label:"5"},{value:10,label:"10"},{value:15,label:"15"},{value:20,label:"20"}],value:r.parameterSet.elasticitySubstitution||0,onChange:d,onChangeCommitted:h,min:1,max:20})]})});function r8({type:t,onParameterSetChange:e,setNumLocations:n}){return D(FAe,{type:t,onParameterSetChange:e,setNumLocations:n})}const UAe=Tt.div`
  color: black;
  width: 33%;
`,zAe=Tt.h3`
  display: flex;
  gap: 10px;
  align-items: center;
  margin-top: 0;
  margin-bottom: 10px;
`,$Ae=Tt.div`
  display: block;
  position: relative;
  width: 100%;
  height: 100%;
  position: relative;
  overflow: auto;
`,jAe=Tt.table`
  border-collapse: collapse;
  border: 0 solid black;
  text-align: center;
  box-shadow: 1px 1px 1px 3px #ccc inset;
  max-height: 40vh;

  th,
  td {
    border: 0 solid white;
    cursor: pointer;
  }

  th {
    background-color: #e0e0e0;

    position: sticky;
    left: 0;
    top: 0; /* Don't forget this, required for the stickiness */
    box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.4);
  }

  th.selected,
  td.selected {
    border: 0 solid #e0e0e0 !important;
  }

  .selected.focused {
    color: red;
  }

  th.focused,
  td.focused {
    color: rgba(100, 100, 0, 1);
  }

  tr:first-of-type > th.selected,
  tr > th:first-of-type.selected {
    border: 0 solid yellow !important;
    background-color: #dd1 !important;
  }

  tr:first-of-type > th.focused,
  tr > th:first-of-type.focused {
    background-color: rgb(255, 255, 0, 1) !important;
  }

  tr:first-of-type > th.focused.selected,
  tr > th:first-of-type.focused.selected {
    background-color: #ff0 !important;
  }
`,GAe=Tt($t)`
  flex: 1;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
`;function HAe(t,e,n,r,i){return Bc(e)?i?r?{style:{backgroundColor:"#eee",color:"#ff3333"},valueString:""}:{style:{backgroundColor:"#ccc",color:"#ff3333"},valueString:""}:{style:{backgroundColor:"#bbb",color:"#ccc"},valueString:""}:e===0?i?{style:{backgroundColor:"#ddd",color:"#833"},valueString:pb(e)}:{style:{backgroundColor:"#888",color:"#ccc"},valueString:pb(e)}:i?{style:{backgroundColor:`rgba(${t.r},${t.g},${t.b},${e/n})`,color:"#f33"},valueString:pb(e)}:{style:{backgroundColor:`rgba(${t.r*.9},${t.g*.9},${t.b*.9},${e/n})`,color:"#ccc"},valueString:pb(e)}}const nP=(t,e,n,r,i)=>{r-1===e||n-1===e||i(t,n,r)},Xb=(t,e,n,r,i)=>{r-1===e||n-1===e||i(t,n,r)},i8=(t,e,n,r,i)=>{r-1===e||n-1===e||i(t,n,r)},rP=t=>{const e=t.data&&t.data.reduce((r,i)=>Math.max(r,...i.filter(s=>!Bc(s))),0)||0;function n(r){return[r.some(i=>t.focusedIndices.includes(i))?"focused":"",r.some(i=>t.selectedIndices.includes(i))?"selected":""].filter(i=>i!=="").join(" ")}return Pe(UAe,{children:[Pe(zAe,{children:[t.icon,t.title]}),t.data===null?D(GAe,{children:D(Mf,{})}):D($Ae,{children:D($t,{className:"fog-added",children:Pe(jAe,{id:t.matrixId,className:t.focused?"focused":"",ref:t.tableRef,children:[D("thead",{children:Pe("tr",{children:[D("th",{}),t.data.filter((r,i)=>i<=t.maxRowColLength).map((r,i)=>t.locations[i]&&D("th",{title:t.locations[i].label,onMouseEnter:()=>nP(t.matrixId,t.maxRowColLength,0,i+1,t.onMouseEnter),onMouseLeave:()=>Xb(t.matrixId,t.maxRowColLength,0,i+1,t.onMouseLeave),onMouseDown:()=>i8(t.matrixId,t.maxRowColLength,0,i+1,t.onMouseDown),className:n([i]),children:i===t.maxRowColLength?"...":i},i))]})}),D("tbody",{children:t.data.filter((r,i)=>i<=t.maxRowColLength).map((r,i)=>t.locations[i]&&Pe("tr",{title:t.locations[i].label,children:[D("th",{onMouseEnter:()=>nP(t.matrixId,t.maxRowColLength,i+1,0,t.onMouseEnter),onMouseLeave:()=>Xb(t.matrixId,t.maxRowColLength,i+1,0,t.onMouseLeave),onMouseDown:()=>Xb(t.matrixId,t.maxRowColLength,i+1,0,t.onMouseDown),className:n([i]),children:i===t.maxRowColLength?"...":i}),r.filter((s,o)=>o<=t.maxRowColLength).map((s,o)=>{const{style:a,valueString:l}=i==t.maxRowColLength||o==t.maxRowColLength?{style:{},valueString:"..."}:HAe(t.rgb,s,e,[o,i].some(c=>t.focusedIndices.includes(c)),[o,i].some(c=>t.selectedIndices.includes(c)));return D("td",{title:`(${o}, ${i}) = ${l}`,onMouseEnter:()=>nP(t.matrixId,t.maxRowColLength,i+1,o+1,t.onMouseEnter),onMouseLeave:()=>Xb(t.matrixId,t.maxRowColLength,i+1,o+1,t.onMouseLeave),onMouseDown:()=>i8(t.matrixId,t.maxRowColLength,i+1,o+1,t.onMouseDown),className:i<t.maxRowColLength?n([i,o]):"",style:a,children:l},o+1)})]},i))})]})})})]})},VAe=Tt.div`
  div.focused > div > table > tbody > tr > td:not(.focused) {
    background-color: #e0e0e0 !important;
    color: #333;
  }
`,WAe=Tt($t)`
  font-size: 75%;
  display: flex;
  gap: 20px;
`,XAe=A.forwardRef((t,e)=>{var b;const[n,r]=A.useState(null),[i,s]=A.useState([]),o=[A.useRef(null),A.useRef(null),A.useRef(null)],a=(E,w,T)=>{E&&E.rows&&T.forEach(C=>{var P,M,N;C<=w&&((P=E.rows[0].cells[C+1])==null||P.classList.add("selected"),(N=(M=E.rows[C+1])==null?void 0:M.cells[0])==null||N.classList.add("selected"))})},l=(E,w,T)=>{E&&E.rows&&T.forEach(C=>{var P,M,N;C<=w&&((P=E.rows[0].cells[C+1])==null||P.classList.remove("selected"),(N=(M=E.rows[C+1])==null?void 0:M.cells[0])==null||N.classList.remove("selected"))})},c=E=>{m(null,E)},u=E=>{_(null,E)},d=E=>{f(E)},h=E=>{p(E)};A.useImperativeHandle(e,()=>({onFocus:c,onUnfocus:u,onSelect:d,onUnselect:h}));const f=E=>{o.forEach(w=>{a(w.current,t.maxRowColLength,E)})},p=E=>{o.forEach(w=>{l(w.current,t.maxRowColLength,E)})},m=(E,w)=>{r(E),E&&t.onFocus(w.map(T=>T-1))},_=(E,w)=>{r(null),E&&t.onUnfocus(w.map(T=>T-1))},y=(E,w)=>{const T=i,C=w.map(R=>R-1).filter(R=>R>=0),P=new Set(C),M=T.filter(R=>P.has(R)),N=new Set(M),F=T.filter(R=>!N.has(R)),I=C.filter(R=>!N.has(R)),k=F.concat(I);M.length>0&&p(M.map(R=>R)),I.length>0&&f(I.map(R=>R)),s(k)},x=(E,w)=>{o.forEach(C=>{y(C.current,w)});const T=w.map(C=>C-1).filter(C=>0<=C);E&&t.onSelected(i,T)};return D(VAe,{children:Pe(WAe,{className:((b=t.focusedIndices)==null?void 0:b.length)>0?"focused":"",children:[D(rP,{matrixId:"adjacencyMatrix",locations:t.locations,focused:n==="adjacencyMatrix",tableRef:o[0],icon:D(WSe,{}),title:"Adjacency distances",maxRowColLength:t.maxRowColLength,data:t.adjacencyMatrix,rgb:t.rgb,onMouseEnter:(E,w,T)=>m(E,[w,T]),onMouseLeave:(E,w,T)=>_(E,[w,T]),onMouseDown:(E,w,T)=>x(E,[w,T]),focusedIndices:t.focusedIndices,selectedIndices:t.selectedIndices}),D(rP,{matrixId:"distanceMatrix",locations:t.locations,focused:n==="distanceMatrix",tableRef:o[1],icon:D(Qm,{}),title:"Path distances",maxRowColLength:t.maxRowColLength,data:t.distanceMatrix,rgb:t.rgb,onMouseEnter:(E,w,T)=>m(E,[w,T]),onMouseLeave:(E,w,T)=>_(E,[w,T]),onMouseDown:(E,w,T)=>x(E,[w,T]),focusedIndices:t.focusedIndices,selectedIndices:t.selectedIndices}),D(rP,{matrixId:"transportationCostMatrix",locations:t.locations,focused:n==="transportationCostMatrix",tableRef:o[2],icon:D(QX,{}),title:"Transportation costs",maxRowColLength:t.maxRowColLength,data:t.transportationCostMatrix,rgb:t.rgb,onMouseEnter:(E,w,T)=>m(E,[w,T]),onMouseLeave:(E,w,T)=>_(E,[w,T]),onMouseDown:(E,w,T)=>x(E,[w,T]),focusedIndices:t.focusedIndices,selectedIndices:t.selectedIndices})]})})}),s8=({sessionState:t,matrices:e,uiState:n,preferences:r,onSelect:i,onFocus:s,onUnfocus:o})=>D(XAe,{locations:t==null?void 0:t.locations,maxRowColLength:r==null?void 0:r.maxRowColLength,adjacencyMatrix:e==null?void 0:e.adjacencyMatrix,distanceMatrix:e==null?void 0:e.distanceMatrix,transportationCostMatrix:e==null?void 0:e.transportationCostMatrix,rgb:{r:23,g:111,b:203},selectedIndices:n==null?void 0:n.selectedIndices,focusedIndices:n==null?void 0:n.focusedIndices,onSelected:i,onFocus:s,onUnfocus:o}),YAe=Tt.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  vertical-align: middle;
  align-content: center;
  align-items: center;
  margin-left: 0;
  margin-right: 8px;
  gap: 8px;
`,KAe=Tt(vge)``,iP=Tt(Ki)`
  border-radius: 24px;
  padding-left: 20px;
  padding-right: 20px;
`,qAe=Tt.div`
  display: flex;
  gap: 5px;
`,ZAe=Tt.div`
  display: flex;
  align-items: flex-end;
  margin-left: 8px;
  margin-right: 8px;
  font-size: 1em;
  white-space: nowrap;
  gap: 8px;

  input {
    text-align: right;
  }
`,QAe=Tt(O1)``,JAe=Tt.div`
  display: flex;
  width: 95%;
  gap: 15px;
  align-content: center;
  align-items: center;
`,o8=t=>({animation:`blinking ${1.5-t}s ease-in-out infinite alternate; @keyframes blinking { 0% { background-color: rgb(230,138,35);} 100% { background-color: rgb(180,88,25); }}`,color:"#444"});function eRe(t){return Pe(YAe,{children:[Pe(qAe,{children:[Pe(KAe,{variant:"outlined","aria-label":"outlined primary button group",children:[D(iP,{variant:"contained",color:"primary",onClick:t.start,disabled:t.isStarted,startIcon:D(FSe,{}),children:"Start"}),D(iP,{variant:"contained",color:"primary",onClick:t.stop,disabled:!t.isStarted,sx:{...t.isStarted?o8(t.intervalScale):{}},startIcon:D(BSe,{}),children:"Stop"})]}),D(iP,{onClick:t.reset,variant:"contained",color:"primary",sx:{...t.isStarted?o8(t.intervalScale):{}},startIcon:D(VSe,{}),children:"Reset"})]}),Pe(JAe,{children:[D(Wi,{title:"Elapsed time",children:Pe(ZAe,{children:[D(wSe,{}),D("input",{type:"text",value:t.counter,size:6,disabled:!0})]})}),D(Wi,{title:"Simulation Speed",children:D(QAe,{"aria-label":"Simulation speed",value:t.intervalScale,step:.01,marks:[{value:0,label:""},{value:.2,label:"20%"},{value:.4,label:"40%"},{value:.6,label:"60%"},{value:.8,label:"80%"},{value:1,label:""}],onChange:(e,n)=>{t.changeIntervalScale(n)},min:0,max:1,valueLabelDisplay:"auto",sx:{"& .MuiSlider-markLabel":{fontSize:"70%"}}})})]})]})}const tRe={interval:0,isStarted:!1,counter:0},bY=Ld(tRe),nRe=t=>{const[e,n]=UW(bY),r=A.useRef(Number.POSITIVE_INFINITY),i=A.useRef(null),s=c=>{n(u=>(u.interval=c,u))},o=()=>{n(c=>(c.isStarted=!0,c)),t.onStarted()},a=()=>{n(c=>(c.isStarted=!1,c))},l=()=>{n(c=>(c.counter=0,c)),t.onReset()};return A.useEffect(()=>(!e.isStarted&&i.current&&(clearInterval(i.current),i.current=null),e.isStarted&&r.current!==e.interval&&(r.current=e.interval,i.current=setInterval(()=>{t.tick(),n(c=>(c.counter++,c))},e.interval)),()=>{i.current&&(clearInterval(i.current),r.current=Number.POSITIVE_INFINITY)}),[e.counter,e.isStarted,e.interval]),{changeInterval:s,start:o,stop:a,reset:l}};function rRe(t){const[e,n]=A.useState(t.initialIntervalScale),r=_5(t.minInterval,t.maxInterval,e),{changeInterval:i,start:s,stop:o,reset:a}=nRe({tick:t.tick,onStarted:t.onStarted,onReset:t.onReset,onStopped:t.onStopped});return{changeIntervalScale:c=>{n(c);const u=_5(t.minInterval,t.maxInterval,c);i(u)},start:s,stop:o,reset:a,interval:r,intervalScale:e}}const iRe=({simulation:t})=>{const{counter:e,isStarted:n}=Fm(bY);return D(eRe,{isStarted:n,counter:e,intervalScale:t.intervalScale,start:t.start,stop:t.stop,reset:t.reset,changeIntervalScale:t.changeIntervalScale})};function sRe(t){return{layout:{i:"EditButton",x:(t==null?void 0:t.x)??0,y:(t==null?void 0:t.y)??2,w:(t==null?void 0:t.w)??1,h:(t==null?void 0:t.h)??1,resizeHandles:[],isDraggable:!0,isResizable:!1,shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,maximized:!1},resource:{id:"EditButton",type:cr.FloatingButton,bindToPanelId:"EditPanel",tooltip:"Open Edit Panel",icon:D(nC,{}),onClick:t==null?void 0:t.onClick}}}function oRe(t){return{layout:{i:"ParametersButton",x:0,y:(t==null?void 0:t.y)??3,w:1,h:1,isDraggable:!0,isResizable:!1,resizeHandles:[],shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,maximized:!1},resource:{id:"ParametersButton",type:cr.FloatingButton,bindToPanelId:"ParametersPanel",tooltip:"Open Parameters Panel",icon:D(rY,{}),onClick:t==null?void 0:t.onClick}}}function aRe(t){return{layout:{i:"ParametersPanel",x:1,y:(t==null?void 0:t.y)??3,w:9,h:9,minW:9,minH:9,isDraggable:!0,isResizable:!0,resizeHandles:Qc,shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,maximized:!1},resource:{id:"ParametersPanel",type:cr.FloatingPanel,title:"Parameters",icon:D(rY,{}),titleBarMode:"win",rowHeight:tc,bindToButtonId:"ParametersButton"}}}function lRe(t){return{layout:{i:"TimerControlButton",x:(t==null?void 0:t.x)??0,y:(t==null?void 0:t.y)??4,w:(t==null?void 0:t.w)??1,h:(t==null?void 0:t.h)??1,isDraggable:!0,isResizable:!1,resizeHandles:[],shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,maximized:!1},resource:{id:"TimerControlButton",type:cr.FloatingButton,bindToPanelId:"TimerControlPanel",tooltip:"Open TimerControl Panel",icon:D(nY,{})}}}function cRe(t){return{layout:{i:"TimerControlPanel",x:(t==null?void 0:t.x)??1,y:(t==null?void 0:t.y)??9,w:(t==null?void 0:t.w)??8,h:(t==null?void 0:t.h)??4,minW:8,minH:4,isDraggable:!0,isResizable:!0,resizeHandles:Qc,shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,maximized:!1},resource:{id:"TimerControlPanel",type:cr.FloatingPanel,title:"Timer Control",icon:D(nY,{}),titleBarMode:"win",rowHeight:tc,bindToButtonId:"TimerControlButton"}}}function uRe(t){return{layout:{i:"MatricesButton",x:0,y:(t==null?void 0:t.y)??5,w:1,h:1,isDraggable:!0,isResizable:!1,resizeHandles:[],shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,maximized:!1},resource:{id:"MatricesButton",type:cr.FloatingButton,bindToPanelId:"MatricesPanel",tooltip:"Open Matrices Panel",icon:D(YX,{}),onClick:t==null?void 0:t.onClick}}}function dRe(t){return{layout:{i:"MatricesPanel",x:(t==null?void 0:t.x)??10,y:(t==null?void 0:t.y)??5,w:(t==null?void 0:t.w)??23,h:(t==null?void 0:t.h)??9,isDraggable:!0,isResizable:!0,resizeHandles:Qc,shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,maximized:!1},resource:{id:"MatricesPanel",type:cr.FloatingPanel,title:"Matrices",icon:D(YX,{}),titleBarMode:"win",rowHeight:tc,bindToButtonId:"MatricesButton"}}}function hRe(t){return{layout:{i:"LayersButton",x:0,y:(t==null?void 0:t.y)??7,w:1,h:1,isDraggable:!0,isResizable:!1,resizeHandles:[],shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,maximized:!1},resource:{id:"LayersButton",type:cr.FloatingButton,bindToPanelId:"LayersPanel",tooltip:"Open Layers Panel",icon:D(ZX,{}),onClick:t==null?void 0:t.onClick}}}function fRe(t){return{layout:{i:"LayersPanel",x:(t==null?void 0:t.x)??22,y:(t==null?void 0:t.y)??7,w:(t==null?void 0:t.w)??10,h:(t==null?void 0:t.h)??8,isDraggable:!0,isResizable:!0,resizeHandles:Qc,shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,maximized:!1},resource:{id:"LayersPanel",type:cr.FloatingPanel,title:"Layers",icon:D(ZX,{}),titleBarMode:"win",rowHeight:tc,bindToButtonId:"LayersButton"}}}function pRe(t){return{layout:{i:"InfoButton",x:0,y:9,w:1,h:1,resizeHandles:[],isDraggable:!0,isResizable:!1,shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,maximized:!1},resource:{id:"InfoButton",type:cr.FloatingButton,tooltip:"Info",icon:D(qX,{}),bindToPanelId:"InfoPanel",onClick:t==null?void 0:t.onClick}}}function mRe(t){return{layout:{i:"InfoPanel",x:10,y:(t==null?void 0:t.y)??0,w:5,h:3,minW:5,minH:3,resizeHandles:Qc,isDraggable:!0,isResizable:!0,shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,maximized:!1},resource:{id:"InfoPanel",type:cr.FloatingPanel,title:"Information",icon:D(qX,{}),titleBarMode:"win",rowHeight:tc,bindToButtonId:"InfoButton"}}}function gRe(t){return{layout:{i:"UndoButton",x:0,y:(t==null?void 0:t.y)??0,w:1,h:1,resizeHandles:[],isDraggable:!0,isResizable:!1,shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,maximized:!1},resource:{id:"UndoButton",type:cr.FloatingButton,tooltip:"undo",icon:D(XSe,{})}}}function vRe(t){return{layout:{i:"RedoButton",x:0,y:(t==null?void 0:t.y)??0,w:1,h:1,resizeHandles:[],isDraggable:!0,isResizable:!1,shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,maximized:!1},resource:{id:"RedoButton",type:cr.FloatingButton,tooltip:"redo",icon:D($Se,{}),onClick:t==null?void 0:t.onClick}}}function yRe(t){return{layout:{i:"EditPanel",x:(t==null?void 0:t.x)??1,y:(t==null?void 0:t.y)??0,w:(t==null?void 0:t.w)??9,h:(t==null?void 0:t.h)??3,resizeHandles:Qc,isDraggable:!0,isResizable:!0,shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,maximized:!1},resource:{id:"EditPanel",type:cr.FloatingPanel,title:"Edit Panel",icon:D(nC,{}),titleBarMode:"win",rowHeight:tc,bindToButtonId:"EditButton"}}}function _Re(t){return{layout:{i:"TimeMachineButton",x:(t==null?void 0:t.x)??0,y:(t==null?void 0:t.y)??8,w:(t==null?void 0:t.w)??1,h:(t==null?void 0:t.h)??1,isDraggable:!0,isResizable:!1,resizeHandles:[],shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,maximized:!1},resource:{id:"TimeMachineButton",type:cr.FloatingButton,bindToPanelId:"TimeMachinePanel",tooltip:"Open TimeMachine Panel",icon:D(KX,{})}}}function bRe(t){return{layout:{i:"TimeMachinePanel",x:(t==null?void 0:t.x)??1,y:(t==null?void 0:t.y)??20,w:(t==null?void 0:t.w)??12,h:(t==null?void 0:t.h)??3,minW:12,minH:3,isDraggable:!0,isResizable:!0,resizeHandles:Qc,shown:(t==null?void 0:t.shown)??!0,enabled:(t==null?void 0:t.enabled)??!0,maximized:!1},resource:{id:"TimeMachinePanel",type:cr.FloatingPanel,title:"Time Machine",icon:D(KX,{}),titleBarMode:"win",rowHeight:tc,bindToButtonId:"TimeMachineButton"}}}const xRe=Tt($t)`
  margin-top: 30px;
  margin-right: 20px;
  margin-left: 20px;
`,ERe=[{value:0,label:"0"},{value:20,label:"20"},{value:40,label:"40"},{value:60,label:"40"}],wRe=()=>D(xRe,{children:D(O1,{defaultValue:0,step:1,marks:ERe,min:0,max:60,valueLabelDisplay:"on"})});class Mr extends Yt{constructor(){super(nN),this.version(3).stores({projects:"++id, &uuid, type, name"}),this.projects=this.table(an.projects)}static getSingleton(){return Mr.singleton||(Mr.singleton=new Mr),Mr.singleton}static updateViewportCenter(e,n){Mr.getSingleton().projects.where("uuid").equals(e).modify({viewportCenter:n})}static async getProjects(){return Mr.getSingleton().projects.where("type").anyOf([Lt.Racetrack,Lt.Graph,Lt.RealWorld]).toArray()}static async getProjectsByType(e){return Mr.getSingleton().projects.where("type").equals(e).toArray()}static async getProject(e){return Mr.getSingleton().projects.where("uuid").equals(e).last()}static async createProject(e,n,r){const i=Date.now(),s=e??Rf();Mr.getSingleton().projects.add({uuid:s,type:n,...r,createdAt:i,updatedAt:i}),await Hi.openProject(s)}static async updateProject(e,n,r){const i=await Mr.getSingleton().projects.where("uuid").equals(e).last();i&&Mr.getSingleton().projects.update(i,{...r,type:n,updatedAt:Date.now()})}static async deleteProject(e){const n=await Mr.getSingleton().projects.where("uuid").equals(e).last();n&&Mr.getSingleton().projects.delete(n.id)}}const tc=32,Qc=["se","sw","nw"],TRe=t=>t&&t>0?Math.floor(t/tc)-3:0,SRe=(t,e)=>t.x?t.x>=0?t.x:uE+t.x:0,CRe=(t,e)=>{if(t.y){if(t.y>=0)return t.y;if(e.clientHeight&&e.clientHeight>0)return TRe(e.clientHeight)+t.y}return 0},a8=new DCe,ARe=t=>{const e=mi(),{width:n,height:r}=a3(),{backgroundColor:i,type:s,uuid:o,uiState:a,setUIState:l,matrices:c,preferences:u,updateAndSetMatrices:d}=t,{set:h,current:f,undo:p,redo:m,history:_,future:y}=sS($h),{setSessionChartScale:x,setSessionChartType:b}=oCe({setUIState:l}),[E,w]=A.useState([]),[T,C]=A.useState({}),[P,M]=A.useState({}),N=({zoom:q,y:Y,x:ne})=>{},F=({zoom:q,y:Y,x:ne})=>{l(me=>{me.viewportCenter=[q,Y,ne],Ce(me.viewportCenter)})},{onFit:I}=lCe({width:n,height:r,locations:f==null?void 0:f.locations,uiState:a,setUIState:l}),k=A.useCallback(q=>{l(Y=>{Y.viewportCenter=q,Ce(Y.viewportCenter)})},[l]),{onAddBulkLocations:R,onRemoveBulkLocations:z,onDragStart:X,onDrag:G,onDragEnd:j,onFocus:H,onUnfocus:Q,onSelect:V,onUnselect:ee,onPointerUp:ye,onClearSelection:se}=sCe({sessionState:f,setSessionState:h,uiState:a,setUIState:l,matrices:c,updateAndSetMatrices:d}),{onParameterSetChange:fe,setManufactureShare:ve,setTransportationCost:Oe,setElasticitySubstitution:ae,setNumLocations:ue}=NCe({type:s,sessionState:f,setSessionState:h,onAddBulkLocations:R,onRemoveBulkLocations:z}),Ce=A.useCallback(q=>{const Y=q.map(me=>parseFloat(me.toFixed(4))),ne=`/${s}/${o}/${Y[0]}/${Y[1]}/${Y[2]}/`;a8.runAsyncFunction(()=>{e(ne,{replace:!0})})},[e,s,o]),pe=A.useCallback(q=>{l(Y=>(Y.viewportCenter[0]+=q,Ce(Y.viewportCenter),Y))},[l]),ke=A.useCallback(()=>pe(.25),[pe]),Re=A.useCallback(()=>pe(-.25),[pe]),B=A.useCallback(()=>{const q=I();l(Y=>(Y.viewportCenter=q,Ce(q),Y))},[I,Ce,l]),oe={BackgroundPanel:{},HomeButton:{},ChartButton:{enabled:!1},ChartPanel:{},InputOutputButton:{enabled:!1},InputOutputPanel:{shown:!1},EditButton:{enabled:!1},EditPanel:{shown:!1},ParametersButton:{enabled:!1},ParametersPanel:{x:1,y:0,w:8,h:4,shown:!0},TimerControlButton:{enabled:!1},TimerControlPanel:{y:9},MatricesButton:{enabled:!1},MatricesPanel:{clientHeight:r,y:-9},LayersButton:{enabled:!1},LayersPanel:{shown:!1},TimeMachineButton:{enabled:!1},TimeMachinePanel:{shown:!0,x:-1,y:-4,clientHeight:r,w:27,h:3},InfoButton:{shown:!1},InfoPanel:{shown:!1},UndoButton:{clientHeight:r,y:-6,onClick:p,enabled:_.length>0},RedoButton:{clientHeight:r,y:-5,onClick:m,enabled:y.length>0},ZoomInButton:{clientHeight:r,y:-3,onClick:ke},ZoomOutButton:{clientHeight:r,y:-2,onClick:Re},FitScreenButton:{clientHeight:r,y:-1,onClick:B}},ie={[Lt.Racetrack]:{...oe},[Lt.Graph]:{...oe,ParametersPanel:{x:1,y:0,w:8,h:4,shown:!0},InputOutputPanel:{x:1,y:13,shown:!0},EditPanel:{x:10,y:0,shown:!0}},[Lt.RealWorld]:{...oe,ParametersPanel:{x:1,y:0,w:8,h:4,shown:!0},InputOutputPanel:{x:1,y:13,shown:!0},EditPanel:{x:10,y:0,shown:!0},LayersPanel:{x:-1,y:10,shown:!0},MatricesButton:{enabled:!0},MatricesPanel:{clientHeight:r,y:-9,shown:!1}}};if(A.useEffect(()=>()=>{a8.cancelAll(),Mr.updateViewportCenter(o,a.viewportCenter)},[a.viewportCenter,o]),A.useEffect(()=>{const q=[],Y={};[kCe,tCe,nCe,rCe,cCe,iCe,sRe,yRe,oRe,aRe,lRe,cRe,_Re,bRe,uRe,dRe,hRe,fRe,pRe,mRe,gRe,vRe,Wz,Xz,Yz].forEach((ne,me)=>{const he=ie[s][ne.name]&&ne(ie[s][ne.name]);he&&(he.resource&&(Y[he.resource.id]={...he.resource}),he.layout&&(he.layout.x=SRe(he.layout,ie[s][ne.name]),he.layout.y=CRe(he.layout,ie[s][ne.name]),q.push({...he.layout})))}),w(q),C(Y),M(ne=>({ChartPanel:D(Zz,{sessionState:f,uiState:a,setSessionChartType:b,setSessionChartScale:x,onSelect:V,onUnselect:ee,onFocus:H,onUnfocus:Q}),ParametersPanel:D(r8,{type:t.type,parameterSet:f.parameterSet,sessionStateAtom:$h,onParameterSetChange:fe,setNumLocations:ue}),InputOutputPanel:D(RCe,{}),EditPanel:D(OCe,{state:{addLocation:!1,removeLocation:!1,addEdge:!1,removeEdge:!1,autoGraphLayout:!1,undo:!1,redo:!1},onAddLocation:function(){throw new Error("Function not implemented.")},onRemoveLocation:function(){throw new Error("Function not implemented.")},onAddEdge:function(){throw new Error("Function not implemented.")},onRemoveEdge:function(){throw new Error("Function not implemented.")}}),InfoPanel:D(BCe,{}),LayersPanel:D(LAe,{uuid:o}),MatricesPanel:D(s8,{sessionState:f,matrices:c,uiState:a,preferences:u,onSelect:V,onFocus:H,onUnfocus:Q})}))},[]),A.useEffect(()=>{C(q=>(q.ZoomInButton=Wz({...q.ZoomInButton,clientHeight:r,onClick:ke}).resource,q))},[ke]),A.useEffect(()=>{C(q=>(q.ZoomOutButton=Xz({...q.ZoomOutButton,clientHeight:r,onClick:Re}).resource,q))},[Re]),A.useEffect(()=>{C(q=>(q.FitScreenButton=Yz({...q.FitScreenButton,clientHeight:r,onClick:B}).resource,q))},[B]),A.useEffect(()=>{M(q=>({...q,ParametersPanel:D(r8,{type:t.type,sessionStateAtom:$h,parameterSet:f.parameterSet,onParameterSetChange:fe,setNumLocations:ue,setManufactureShare:ve,setTransportationCost:Oe,setElasticitySubstitution:ae})}))},[f.parameterSet]),A.useEffect(()=>{M(q=>({...q,ChartPanel:D(Zz,{sessionState:f,uiState:a,setSessionChartType:b,setSessionChartScale:x,onSelect:V,onUnselect:ee,onFocus:H,onUnfocus:Q})}))},[f.locations,a]),A.useEffect(()=>{M(q=>({...q,MatricesPanel:D(s8,{sessionState:f,matrices:c,uiState:a,preferences:u,onSelect:V,onFocus:H,onUnfocus:Q})}))},[c]),A.useEffect(()=>{M(q=>{const Y={...q};return Y.TimerControlPanel=D(iRe,{simulation:t.simulation}),Y})},[t.simulation]),A.useEffect(()=>{M(q=>({...q,TimeMachinePanel:D(wRe,{})}))},[a]),!(E.length===0||Object.keys(T).length===0||Object.keys(P).length===0))return D(eCe,{uuid:o,initialLayouts:E,resources:T,gridItemChildrenMap:P,backgroundColor:i,children:t.backgroundPanel({width:n,height:r,sessionState:f,uiState:a,matrices:c,onDragStart:X,onDragEnd:j,onDrag:G,onFocus:H,onUnfocus:Q,onPointerUp:ye,onClearSelection:se,onMoved:N,onMovedEnd:F,overrideViewportCenter:k})})},RRe=({startSimulation:t,stopSimulation:e,resetSimulation:n,tickSimulation:r})=>rRe({onStarted:()=>{requestAnimationFrame(()=>{t()})},onReset:()=>{requestAnimationFrame(()=>{n()})},onStopped:()=>{e()},tick:()=>{requestAnimationFrame(()=>{r()})},minInterval:5,maxInterval:2e3,initialIntervalScale:.5});function PRe(){const[t,e]=A.useState({open:!1,vertical:"top",horizontal:"center",message:""}),n=A.useCallback(i=>{e({...t,open:!0,message:i})},[t,e]),r=A.useCallback(()=>{e({...t,open:!1})},[t,e]);return{openSnackBar:n,closeSnackBar:r}}const IRe=function(t,e){return t.length===e.length&&t.every(function(n,r){return n===e[r]})},MRe=function(t){var e=[];return t.ctrlKey&&e.push("ctrlKey"),t.shiftKey&&e.push("shiftKey"),t.altKey&&e.push("altKey"),t.metaKey&&e.push("metaKey"),e};var LRe=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))};const l8=function(t){var e=t.toLowerCase();return e.length===1?[e]:e.includes("+")?e.replace(/\s+/g,"").split(/\b\+/g):LRe([],e.match(/[^\s"']+|"([^"]*)"|'([^']*)'/g)||[],!0).map(function(n){return n.replace(/("|').*?("|')/," ")})},ORe=function(t,e){return t.length===e.length&&t.every(function(n){return e.includes(n)})};var kRe={control:"ctrlKey",shift:"shiftKey",alt:"altKey",meta:"metaKey"};const NRe=function(t){return t.map(function(e){return kRe[e]})},kM=function(t){return t.altKey||t.ctrlKey||t.shiftKey||t.metaKey},DRe=function(t){return t[t.length-1]},BRe=function(t){return t.slice(0,-1)};var FRe=["INPUT","TEXTAREA"];const URe=function(t,e,n){if(!t.key&&!kM(t))return!0;var r=t.target||{};return r.isContentEditable&&!e?!0:FRe.includes(r.nodeName)&&!(n!=null&&n.includes(r.nodeName))};(function(){if(!(typeof self>"u"||!self.document)){var t=KeyboardEvent.prototype,e=Object.getOwnPropertyDescriptor(t,"key");if(e){var n={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};Object.defineProperty(t,"key",{get:function(){var r=e.get.call(this);return n.hasOwnProperty(r)?n[r]:r}})}}})();var zRe=1e3,$Re="*",Yb=function(t,e,n){var r=A.useMemo(function(){return Array.isArray(t)?t.map(l8):[l8(t)]},[t]);A.useEffect(function(){var i={},s={},o=n||{},a=o.enabled,l=o.enableOnContentEditable,c=o.ignoredElementWhitelist,u=o.eventListenerOptions,d=function(_){clearTimeout(s[_])},h=function(_){d(_),i[_]=[]},f=function(_,y,x){d(x),i[x]=i[x]||[],s[x]=window.setTimeout(function(){h(x)},zRe);var b=i[x];b.push(_.key.toLowerCase()),IRe(b,y)&&(h(x),e(_))},p=function(_,y){var x=DRe(y),b=NRe(BRe(y)),E=MRe(_),w=ORe(b,E);w&&_.key.toLowerCase()===x&&e(_)},m=function(_){URe(_,l,c)||r.forEach(function(y,x){if(y.length===1&&y[0]===$Re){e(_);return}if(kM(_)){p(_,y);return}if(y.length>1&&!kM(_)){f(_,y,x);return}_.key.toLowerCase()===y[0]&&e(_)})};return a!==!1&&window.addEventListener("keydown",m,u),function(){window.removeEventListener("keydown",m,u)}},[r,e,n==null?void 0:n.enabled,n==null?void 0:n.enableOnContentEditable,n==null?void 0:n.ignoredElementWhitelist,n==null?void 0:n.eventListenerOptions])};const jRe=({sessionStateAtom:t,openSnackBar:e,closeSnackBar:n,uiState:r,setUIState:i})=>{const{undo:s,redo:o,current:a,history:l,future:c,staging:u}=sS(t),d=A.useCallback(()=>{requestAnimationFrame(()=>{i(f=>{f.focusedIndices=[],f.selectedIndices=[]}),s()})},[s,i]),h=A.useCallback(()=>{requestAnimationFrame(()=>{i(f=>{f.focusedIndices=[],f.selectedIndices=[]}),o()})},[o,i]);Yb(["Meta+z","Control+z"],()=>{if(l.length===0){e("No more undo!");return}d()}),Yb(["Shift+Meta+z","Shift+Control+z"],()=>{if(c.length===0){e("No more redo!");return}h()}),Yb(["h"],()=>{console.log({numLocations:a.locations.length,locations:a.locations,selectedIndices:r.selectedIndices}),console.log({sessionState:a,history:l,staging:u,future:c})}),Yb(["e"],()=>{console.log(JSON.stringify(a.edges,null," "))})},xY="SpatiaLec";BW();const v3=t=>{var P,M,N,F;const{type:e,uuid:n,backgroundPanel:r,backgroundColor:i,viewportCenter:s}=t,{set:o,current:a}=sS($h),[l,c]=UW(zle),{openSnackBar:u,closeSnackBar:d}=PRe();jRe({uiState:l,setUIState:c,openSnackBar:u,closeSnackBar:d,sessionStateAtom:$h});const h=Fm(Hle),[f,p]=of(Ule);A.useEffect(()=>{c(I=>(I.viewportCenter=s,I))},[c,s]);const m=()=>{const I=jm[e].find(k=>a.parameterSet.caseId===k.caseId);I&&o(k=>{k.parameterSet.numLocations=I.numLocations,k.parameterSet.manufactureShare=I.manufactureShare,k.parameterSet.transportationCost=I.transportationCost,k.parameterSet.elasticitySubstitution=I.elasticitySubstitution})};function _(){o(I=>{},!0,"simulationStart")}function y(){o(I=>{},!0,"simulationStop")}function x(){o(I=>{I.locations.forEach(k=>uoe(k,I.locations.length)),m()},!0,"resetSimulation")}function b(){o(I=>{Xle(I,f.transportationCostMatrix)},!1,"tick")}const E=RRe({startSimulation:_,stopSimulation:y,resetSimulation:x,tickSimulation:b}),w=oce((P=a==null?void 0:a.locations)==null?void 0:P.length,(M=a==null?void 0:a.edges)==null?void 0:M.length),T=(I,k,R)=>{if(!w)throw new Error;return w.updateAdjacencyMatrix(I,k,R)},C=(I,k)=>{T(I,k,a.parameterSet.transportationCost).then(R=>{p({adjacencyMatrix:R.adjacencyMatrix,distanceMatrix:R.distanceMatrix,predecessorMatrix:R.predecessorMatrix,transportationCostMatrix:R.transportationCostMatrix})})};return A.useEffect(()=>{C(a==null?void 0:a.locations,a==null?void 0:a.edges)},[a==null?void 0:a.locations,a==null?void 0:a.edges,(N=a==null?void 0:a.parameterSet)==null?void 0:N.transportationCost]),A.useEffect(()=>{var I,k;(I=a==null?void 0:a.parameterSet)!=null&&I.title?document.title=`${zl} - ${(k=a==null?void 0:a.parameterSet)==null?void 0:k.title}`:document.title=`${zl} - ${xY}`},[(F=a==null?void 0:a.parameterSet)==null?void 0:F.title]),D(ARe,{backgroundColor:i,type:e,uuid:n,simulation:E,matrices:f,setMatrices:p,uiState:l,setUIState:c,preferences:h,updateMatrices:T,updateAndSetMatrices:C,backgroundPanel:r})};var EY={exports:{}},Fd=(t=>(t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2",t))(Fd||{}),y3=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS",t))(y3||{}),kw=(t=>(t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL",t))(kw||{}),Ft=(t=>(t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR",t))(Ft||{}),na=(t=>(t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t))(na||{}),Ze=(t=>(t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t))(Ze||{}),Vh=(t=>(t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t))(Vh||{}),At=(t=>(t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT",t))(At||{}),dt=(t=>(t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT",t))(dt||{}),Ml=(t=>(t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR",t))(Ml||{}),Ul=(t=>(t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t))(Ul||{}),Qa=(t=>(t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL",t))(Qa||{}),Is=(t=>(t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",t))(Is||{}),Na=(t=>(t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT",t))(Na||{}),sC=(t=>(t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL",t))(sC||{}),vo=(t=>(t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp",t))(vo||{}),Yr=(t=>(t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR",t))(Yr||{}),wY=(t=>(t[t.RED=1]="RED",t[t.GREEN=2]="GREEN",t[t.BLUE=4]="BLUE",t[t.ALPHA=8]="ALPHA",t))(wY||{}),Gr=(t=>(t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH",t))(Gr||{}),Xa=(t=>(t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t))(Xa||{});const TY={createCanvas:(t,e)=>{const n=document.createElement("canvas");return n.width=t,n.height=e,n},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>new DOMParser().parseFromString(t,"text/xml")},ht={ADAPTER:TY,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var sP=/iPhone/i,c8=/iPod/i,u8=/iPad/i,d8=/\biOS-universal(?:.+)Mac\b/i,oP=/\bAndroid(?:.+)Mobile\b/i,h8=/Android/i,vp=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Kb=/Silk/i,lc=/Windows Phone/i,f8=/\bWindows(?:.+)ARM\b/i,p8=/BlackBerry/i,m8=/BB10/i,g8=/Opera Mini/i,v8=/\b(CriOS|Chrome)(?:.+)Mobile/i,y8=/Mobile(?:.+)Firefox\b/i,_8=function(t){return typeof t<"u"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream>"u"};function GRe(t){return function(e){return e.test(t)}}function b8(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var n=e.userAgent,r=n.split("[FBAN");typeof r[1]<"u"&&(n=r[0]),r=n.split("Twitter"),typeof r[1]<"u"&&(n=r[0]);var i=GRe(n),s={apple:{phone:i(sP)&&!i(lc),ipod:i(c8),tablet:!i(sP)&&(i(u8)||_8(e))&&!i(lc),universal:i(d8),device:(i(sP)||i(c8)||i(u8)||i(d8)||_8(e))&&!i(lc)},amazon:{phone:i(vp),tablet:!i(vp)&&i(Kb),device:i(vp)||i(Kb)},android:{phone:!i(lc)&&i(vp)||!i(lc)&&i(oP),tablet:!i(lc)&&!i(vp)&&!i(oP)&&(i(Kb)||i(h8)),device:!i(lc)&&(i(vp)||i(Kb)||i(oP)||i(h8))||i(/\bokhttp\b/i)},windows:{phone:i(lc),tablet:i(f8),device:i(lc)||i(f8)},other:{blackberry:i(p8),blackberry10:i(m8),opera:i(g8),firefox:i(y8),chrome:i(v8),device:i(p8)||i(m8)||i(g8)||i(y8)||i(v8)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const HRe=b8.default??b8,Fa=HRe(globalThis.navigator);ht.RETINA_PREFIX=/@([0-9\.]+)x/;ht.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var SY={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,d,h){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new i(u,d||l,h),p=n?n+c:c;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],f]:l._events[p].push(f):(l._events[p]=f,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new r:delete l._events[c]}function a(){this._events=new r,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,d;if(this._eventsCount===0)return c;for(d in u=this._events)e.call(u,d)&&c.push(n?d.slice(1):d);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=n?n+c:c,d=this._events[u];if(!d)return[];if(d.fn)return[d.fn];for(var h=0,f=d.length,p=new Array(f);h<f;h++)p[h]=d[h].fn;return p},a.prototype.listenerCount=function(c){var u=n?n+c:c,d=this._events[u];return d?d.fn?1:d.length:0},a.prototype.emit=function(c,u,d,h,f,p){var m=n?n+c:c;if(!this._events[m])return!1;var _=this._events[m],y=arguments.length,x,b;if(_.fn){switch(_.once&&this.removeListener(c,_.fn,void 0,!0),y){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,u),!0;case 3:return _.fn.call(_.context,u,d),!0;case 4:return _.fn.call(_.context,u,d,h),!0;case 5:return _.fn.call(_.context,u,d,h,f),!0;case 6:return _.fn.call(_.context,u,d,h,f,p),!0}for(b=1,x=new Array(y-1);b<y;b++)x[b-1]=arguments[b];_.fn.apply(_.context,x)}else{var E=_.length,w;for(b=0;b<E;b++)switch(_[b].once&&this.removeListener(c,_[b].fn,void 0,!0),y){case 1:_[b].fn.call(_[b].context);break;case 2:_[b].fn.call(_[b].context,u);break;case 3:_[b].fn.call(_[b].context,u,d);break;case 4:_[b].fn.call(_[b].context,u,d,h);break;default:if(!x)for(w=1,x=new Array(y-1);w<y;w++)x[w-1]=arguments[w];_[b].fn.apply(_[b].context,x)}}return!0},a.prototype.on=function(c,u,d){return s(this,c,u,d,!1)},a.prototype.once=function(c,u,d){return s(this,c,u,d,!0)},a.prototype.removeListener=function(c,u,d,h){var f=n?n+c:c;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!h||p.once)&&(!d||p.context===d)&&o(this,f);else{for(var m=0,_=[],y=p.length;m<y;m++)(p[m].fn!==u||h&&!p[m].once||d&&p[m].context!==d)&&_.push(p[m]);_.length?this._events[f]=_.length===1?_[0]:_:o(this,f)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&o(this,u)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(SY);var VRe=SY.exports;const Ig=Ad(VRe);var Nw={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */Nw.exports;(function(t,e){(function(n){var r=e&&!e.nodeType&&e,i=t&&!t.nodeType&&t,s=typeof Pi=="object"&&Pi;(s.global===s||s.window===s||s.self===s)&&(n=s);var o,a=2147483647,l=36,c=1,u=26,d=38,h=700,f=72,p=128,m="-",_=/^xn--/,y=/[^\x20-\x7E]/,x=/[\x2E\u3002\uFF0E\uFF61]/g,b={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},E=l-c,w=Math.floor,T=String.fromCharCode,C;function P(Q){throw new RangeError(b[Q])}function M(Q,V){for(var ee=Q.length,ye=[];ee--;)ye[ee]=V(Q[ee]);return ye}function N(Q,V){var ee=Q.split("@"),ye="";ee.length>1&&(ye=ee[0]+"@",Q=ee[1]),Q=Q.replace(x,".");var se=Q.split("."),fe=M(se,V).join(".");return ye+fe}function F(Q){for(var V=[],ee=0,ye=Q.length,se,fe;ee<ye;)se=Q.charCodeAt(ee++),se>=55296&&se<=56319&&ee<ye?(fe=Q.charCodeAt(ee++),(fe&64512)==56320?V.push(((se&1023)<<10)+(fe&1023)+65536):(V.push(se),ee--)):V.push(se);return V}function I(Q){return M(Q,function(V){var ee="";return V>65535&&(V-=65536,ee+=T(V>>>10&1023|55296),V=56320|V&1023),ee+=T(V),ee}).join("")}function k(Q){return Q-48<10?Q-22:Q-65<26?Q-65:Q-97<26?Q-97:l}function R(Q,V){return Q+22+75*(Q<26)-((V!=0)<<5)}function z(Q,V,ee){var ye=0;for(Q=ee?w(Q/h):Q>>1,Q+=w(Q/V);Q>E*u>>1;ye+=l)Q=w(Q/E);return w(ye+(E+1)*Q/(Q+d))}function X(Q){var V=[],ee=Q.length,ye,se=0,fe=p,ve=f,Oe,ae,ue,Ce,pe,ke,Re,B,oe;for(Oe=Q.lastIndexOf(m),Oe<0&&(Oe=0),ae=0;ae<Oe;++ae)Q.charCodeAt(ae)>=128&&P("not-basic"),V.push(Q.charCodeAt(ae));for(ue=Oe>0?Oe+1:0;ue<ee;){for(Ce=se,pe=1,ke=l;ue>=ee&&P("invalid-input"),Re=k(Q.charCodeAt(ue++)),(Re>=l||Re>w((a-se)/pe))&&P("overflow"),se+=Re*pe,B=ke<=ve?c:ke>=ve+u?u:ke-ve,!(Re<B);ke+=l)oe=l-B,pe>w(a/oe)&&P("overflow"),pe*=oe;ye=V.length+1,ve=z(se-Ce,ye,Ce==0),w(se/ye)>a-fe&&P("overflow"),fe+=w(se/ye),se%=ye,V.splice(se++,0,fe)}return I(V)}function G(Q){var V,ee,ye,se,fe,ve,Oe,ae,ue,Ce,pe,ke=[],Re,B,oe,ie;for(Q=F(Q),Re=Q.length,V=p,ee=0,fe=f,ve=0;ve<Re;++ve)pe=Q[ve],pe<128&&ke.push(T(pe));for(ye=se=ke.length,se&&ke.push(m);ye<Re;){for(Oe=a,ve=0;ve<Re;++ve)pe=Q[ve],pe>=V&&pe<Oe&&(Oe=pe);for(B=ye+1,Oe-V>w((a-ee)/B)&&P("overflow"),ee+=(Oe-V)*B,V=Oe,ve=0;ve<Re;++ve)if(pe=Q[ve],pe<V&&++ee>a&&P("overflow"),pe==V){for(ae=ee,ue=l;Ce=ue<=fe?c:ue>=fe+u?u:ue-fe,!(ae<Ce);ue+=l)ie=ae-Ce,oe=l-Ce,ke.push(T(R(Ce+ie%oe,0))),ae=w(ie/oe);ke.push(T(R(ae,0))),fe=z(ee,B,ye==se),ee=0,++ye}++ee,++V}return ke.join("")}function j(Q){return N(Q,function(V){return _.test(V)?X(V.slice(4).toLowerCase()):V})}function H(Q){return N(Q,function(V){return y.test(V)?"xn--"+G(V):V})}if(o={version:"1.4.1",ucs2:{decode:F,encode:I},decode:X,encode:G,toASCII:H,toUnicode:j},r&&i)if(t.exports==r)i.exports=o;else for(C in o)o.hasOwnProperty(C)&&(r[C]=o[C]);else n.punycode=o})(Pi)})(Nw,Nw.exports);var WRe=Nw.exports,_3=typeof Map=="function"&&Map.prototype,aP=Object.getOwnPropertyDescriptor&&_3?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,Dw=_3&&aP&&typeof aP.get=="function"?aP.get:null,x8=_3&&Map.prototype.forEach,b3=typeof Set=="function"&&Set.prototype,lP=Object.getOwnPropertyDescriptor&&b3?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Bw=b3&&lP&&typeof lP.get=="function"?lP.get:null,E8=b3&&Set.prototype.forEach,XRe=typeof WeakMap=="function"&&WeakMap.prototype,jv=XRe?WeakMap.prototype.has:null,YRe=typeof WeakSet=="function"&&WeakSet.prototype,Gv=YRe?WeakSet.prototype.has:null,KRe=typeof WeakRef=="function"&&WeakRef.prototype,w8=KRe?WeakRef.prototype.deref:null,qRe=Boolean.prototype.valueOf,ZRe=Object.prototype.toString,QRe=Function.prototype.toString,JRe=String.prototype.match,x3=String.prototype.slice,Ku=String.prototype.replace,ePe=String.prototype.toUpperCase,T8=String.prototype.toLowerCase,CY=RegExp.prototype.test,S8=Array.prototype.concat,Rl=Array.prototype.join,tPe=Array.prototype.slice,C8=Math.floor,NM=typeof BigInt=="function"?BigInt.prototype.valueOf:null,cP=Object.getOwnPropertySymbols,DM=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Jm=typeof Symbol=="function"&&typeof Symbol.iterator=="object",ps=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Jm||!0)?Symbol.toStringTag:null,AY=Object.prototype.propertyIsEnumerable,A8=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function R8(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||CY.call(/e/,e))return e;var n=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var r=t<0?-C8(-t):C8(t);if(r!==t){var i=String(r),s=x3.call(e,i.length+1);return Ku.call(i,n,"$&_")+"."+Ku.call(Ku.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Ku.call(e,n,"$&_")}var BM=$W,P8=BM.custom,I8=PY(P8)?P8:null,nPe=function t(e,n,r,i){var s=n||{};if(Lu(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Lu(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=Lu(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Lu(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Lu(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return MY(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return a?R8(e,l):l}if(typeof e=="bigint"){var c=String(e)+"n";return a?R8(e,c):c}var u=typeof s.depth>"u"?5:s.depth;if(typeof r>"u"&&(r=0),r>=u&&u>0&&typeof e=="object")return FM(e)?"[Array]":"[Object]";var d=bPe(s,r);if(typeof i>"u")i=[];else if(IY(i,e)>=0)return"[Circular]";function h(k,R,z){if(R&&(i=tPe.call(i),i.push(R)),z){var X={depth:s.depth};return Lu(s,"quoteStyle")&&(X.quoteStyle=s.quoteStyle),t(k,X,r+1,i)}return t(k,s,r+1,i)}if(typeof e=="function"&&!M8(e)){var f=dPe(e),p=qb(e,h);return"[Function"+(f?": "+f:" (anonymous)")+"]"+(p.length>0?" { "+Rl.call(p,", ")+" }":"")}if(PY(e)){var m=Jm?Ku.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):DM.call(e);return typeof e=="object"&&!Jm?A0(m):m}if(vPe(e)){for(var _="<"+T8.call(String(e.nodeName)),y=e.attributes||[],x=0;x<y.length;x++)_+=" "+y[x].name+"="+RY(rPe(y[x].value),"double",s);return _+=">",e.childNodes&&e.childNodes.length&&(_+="..."),_+="</"+T8.call(String(e.nodeName))+">",_}if(FM(e)){if(e.length===0)return"[]";var b=qb(e,h);return d&&!_Pe(b)?"["+UM(b,d)+"]":"[ "+Rl.call(b,", ")+" ]"}if(sPe(e)){var E=qb(e,h);return!("cause"in Error.prototype)&&"cause"in e&&!AY.call(e,"cause")?"{ ["+String(e)+"] "+Rl.call(S8.call("[cause]: "+h(e.cause),E),", ")+" }":E.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+Rl.call(E,", ")+" }"}if(typeof e=="object"&&o){if(I8&&typeof e[I8]=="function"&&BM)return BM(e,{depth:u-r});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(hPe(e)){var w=[];return x8&&x8.call(e,function(k,R){w.push(h(R,e,!0)+" => "+h(k,e))}),L8("Map",Dw.call(e),w,d)}if(mPe(e)){var T=[];return E8&&E8.call(e,function(k){T.push(h(k,e))}),L8("Set",Bw.call(e),T,d)}if(fPe(e))return uP("WeakMap");if(gPe(e))return uP("WeakSet");if(pPe(e))return uP("WeakRef");if(aPe(e))return A0(h(Number(e)));if(cPe(e))return A0(h(NM.call(e)));if(lPe(e))return A0(qRe.call(e));if(oPe(e))return A0(h(String(e)));if(typeof window<"u"&&e===window)return"{ [object Window] }";if(e===Pi)return"{ [object globalThis] }";if(!iPe(e)&&!M8(e)){var C=qb(e,h),P=A8?A8(e)===Object.prototype:e instanceof Object||e.constructor===Object,M=e instanceof Object?"":"null prototype",N=!P&&ps&&Object(e)===e&&ps in e?x3.call(Ud(e),8,-1):M?"Object":"",F=P||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",I=F+(N||M?"["+Rl.call(S8.call([],N||[],M||[]),": ")+"] ":"");return C.length===0?I+"{}":d?I+"{"+UM(C,d)+"}":I+"{ "+Rl.call(C,", ")+" }"}return String(e)};function RY(t,e,n){var r=(n.quoteStyle||e)==="double"?'"':"'";return r+t+r}function rPe(t){return Ku.call(String(t),/"/g,"&quot;")}function FM(t){return Ud(t)==="[object Array]"&&(!ps||!(typeof t=="object"&&ps in t))}function iPe(t){return Ud(t)==="[object Date]"&&(!ps||!(typeof t=="object"&&ps in t))}function M8(t){return Ud(t)==="[object RegExp]"&&(!ps||!(typeof t=="object"&&ps in t))}function sPe(t){return Ud(t)==="[object Error]"&&(!ps||!(typeof t=="object"&&ps in t))}function oPe(t){return Ud(t)==="[object String]"&&(!ps||!(typeof t=="object"&&ps in t))}function aPe(t){return Ud(t)==="[object Number]"&&(!ps||!(typeof t=="object"&&ps in t))}function lPe(t){return Ud(t)==="[object Boolean]"&&(!ps||!(typeof t=="object"&&ps in t))}function PY(t){if(Jm)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!DM)return!1;try{return DM.call(t),!0}catch{}return!1}function cPe(t){if(!t||typeof t!="object"||!NM)return!1;try{return NM.call(t),!0}catch{}return!1}var uPe=Object.prototype.hasOwnProperty||function(t){return t in this};function Lu(t,e){return uPe.call(t,e)}function Ud(t){return ZRe.call(t)}function dPe(t){if(t.name)return t.name;var e=JRe.call(QRe.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function IY(t,e){if(t.indexOf)return t.indexOf(e);for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1}function hPe(t){if(!Dw||!t||typeof t!="object")return!1;try{Dw.call(t);try{Bw.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function fPe(t){if(!jv||!t||typeof t!="object")return!1;try{jv.call(t,jv);try{Gv.call(t,Gv)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function pPe(t){if(!w8||!t||typeof t!="object")return!1;try{return w8.call(t),!0}catch{}return!1}function mPe(t){if(!Bw||!t||typeof t!="object")return!1;try{Bw.call(t);try{Dw.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function gPe(t){if(!Gv||!t||typeof t!="object")return!1;try{Gv.call(t,Gv);try{jv.call(t,jv)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function vPe(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function MY(t,e){if(t.length>e.maxStringLength){var n=t.length-e.maxStringLength,r="... "+n+" more character"+(n>1?"s":"");return MY(x3.call(t,0,e.maxStringLength),e)+r}var i=Ku.call(Ku.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,yPe);return RY(i,"single",e)}function yPe(t){var e=t.charCodeAt(0),n={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return n?"\\"+n:"\\x"+(e<16?"0":"")+ePe.call(e.toString(16))}function A0(t){return"Object("+t+")"}function uP(t){return t+" { ? }"}function L8(t,e,n,r){var i=r?UM(n,r):Rl.call(n,", ");return t+" ("+e+") {"+i+"}"}function _Pe(t){for(var e=0;e<t.length;e++)if(IY(t[e],`
`)>=0)return!1;return!0}function bPe(t,e){var n;if(t.indent==="	")n="	";else if(typeof t.indent=="number"&&t.indent>0)n=Rl.call(Array(t.indent+1)," ");else return null;return{base:n,prev:Rl.call(Array(e+1),n)}}function UM(t,e){if(t.length===0)return"";var n=`
`+e.prev+e.base;return n+Rl.call(t,","+n)+`
`+e.prev}function qb(t,e){var n=FM(t),r=[];if(n){r.length=t.length;for(var i=0;i<t.length;i++)r[i]=Lu(t,i)?e(t[i],t):""}var s=typeof cP=="function"?cP(t):[],o;if(Jm){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var l in t)Lu(t,l)&&(n&&String(Number(l))===l&&l<t.length||Jm&&o["$"+l]instanceof Symbol||(CY.call(/[^\w$]/,l)?r.push(e(l,t)+": "+e(t[l],t)):r.push(l+": "+e(t[l],t))));if(typeof cP=="function")for(var c=0;c<s.length;c++)AY.call(t,s[c])&&r.push("["+e(s[c])+"]: "+e(t[s[c]],t));return r}var LY=Tg,Mg=Fae,xPe=nPe,EPe=b1,Zb=LY("%WeakMap%",!0),Qb=LY("%Map%",!0),wPe=Mg("WeakMap.prototype.get",!0),TPe=Mg("WeakMap.prototype.set",!0),SPe=Mg("WeakMap.prototype.has",!0),CPe=Mg("Map.prototype.get",!0),APe=Mg("Map.prototype.set",!0),RPe=Mg("Map.prototype.has",!0),E3=function(t,e){for(var n=t,r;(r=n.next)!==null;n=r)if(r.key===e)return n.next=r.next,r.next=t.next,t.next=r,r},PPe=function(t,e){var n=E3(t,e);return n&&n.value},IPe=function(t,e,n){var r=E3(t,e);r?r.value=n:t.next={key:e,next:t.next,value:n}},MPe=function(t,e){return!!E3(t,e)},LPe=function(){var e,n,r,i={assert:function(s){if(!i.has(s))throw new EPe("Side channel does not contain "+xPe(s))},get:function(s){if(Zb&&s&&(typeof s=="object"||typeof s=="function")){if(e)return wPe(e,s)}else if(Qb){if(n)return CPe(n,s)}else if(r)return PPe(r,s)},has:function(s){if(Zb&&s&&(typeof s=="object"||typeof s=="function")){if(e)return SPe(e,s)}else if(Qb){if(n)return RPe(n,s)}else if(r)return MPe(r,s);return!1},set:function(s,o){Zb&&s&&(typeof s=="object"||typeof s=="function")?(e||(e=new Zb),TPe(e,s,o)):Qb?(n||(n=new Qb),APe(n,s,o)):(r||(r={key:{},next:null}),IPe(r,s,o))}};return i},OPe=String.prototype.replace,kPe=/%20/g,dP={RFC1738:"RFC1738",RFC3986:"RFC3986"},w3={default:dP.RFC3986,formatters:{RFC1738:function(t){return OPe.call(t,kPe,"+")},RFC3986:function(t){return String(t)}},RFC1738:dP.RFC1738,RFC3986:dP.RFC3986},NPe=w3,hP=Object.prototype.hasOwnProperty,Eh=Array.isArray,pl=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),DPe=function(e){for(;e.length>1;){var n=e.pop(),r=n.obj[n.prop];if(Eh(r)){for(var i=[],s=0;s<r.length;++s)typeof r[s]<"u"&&i.push(r[s]);n.obj[n.prop]=i}}},OY=function(e,n){for(var r=n&&n.plainObjects?Object.create(null):{},i=0;i<e.length;++i)typeof e[i]<"u"&&(r[i]=e[i]);return r},BPe=function t(e,n,r){if(!n)return e;if(typeof n!="object"){if(Eh(e))e.push(n);else if(e&&typeof e=="object")(r&&(r.plainObjects||r.allowPrototypes)||!hP.call(Object.prototype,n))&&(e[n]=!0);else return[e,n];return e}if(!e||typeof e!="object")return[e].concat(n);var i=e;return Eh(e)&&!Eh(n)&&(i=OY(e,r)),Eh(e)&&Eh(n)?(n.forEach(function(s,o){if(hP.call(e,o)){var a=e[o];a&&typeof a=="object"&&s&&typeof s=="object"?e[o]=t(a,s,r):e.push(s)}else e[o]=s}),e):Object.keys(n).reduce(function(s,o){var a=n[o];return hP.call(s,o)?s[o]=t(s[o],a,r):s[o]=a,s},i)},FPe=function(e,n){return Object.keys(n).reduce(function(r,i){return r[i]=n[i],r},e)},UPe=function(t,e,n){var r=t.replace(/\+/g," ");if(n==="iso-8859-1")return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch{return r}},zPe=function(e,n,r,i,s){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),r==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(u){return"%26%23"+parseInt(u.slice(2),16)+"%3B"});for(var a="",l=0;l<o.length;++l){var c=o.charCodeAt(l);if(c===45||c===46||c===95||c===126||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122||s===NPe.RFC1738&&(c===40||c===41)){a+=o.charAt(l);continue}if(c<128){a=a+pl[c];continue}if(c<2048){a=a+(pl[192|c>>6]+pl[128|c&63]);continue}if(c<55296||c>=57344){a=a+(pl[224|c>>12]+pl[128|c>>6&63]+pl[128|c&63]);continue}l+=1,c=65536+((c&1023)<<10|o.charCodeAt(l)&1023),a+=pl[240|c>>18]+pl[128|c>>12&63]+pl[128|c>>6&63]+pl[128|c&63]}return a},$Pe=function(e){for(var n=[{obj:{o:e},prop:"o"}],r=[],i=0;i<n.length;++i)for(var s=n[i],o=s.obj[s.prop],a=Object.keys(o),l=0;l<a.length;++l){var c=a[l],u=o[c];typeof u=="object"&&u!==null&&r.indexOf(u)===-1&&(n.push({obj:o,prop:c}),r.push(u))}return DPe(n),e},jPe=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},GPe=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},HPe=function(e,n){return[].concat(e,n)},VPe=function(e,n){if(Eh(e)){for(var r=[],i=0;i<e.length;i+=1)r.push(n(e[i]));return r}return n(e)},kY={arrayToObject:OY,assign:FPe,combine:HPe,compact:$Pe,decode:UPe,encode:zPe,isBuffer:GPe,isRegExp:jPe,maybeMap:VPe,merge:BPe},NY=LPe,dE=kY,Hv=w3,WPe=Object.prototype.hasOwnProperty,O8={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,n){return e+"["+n+"]"},repeat:function(e){return e}},yc=Array.isArray,XPe=Array.prototype.push,DY=function(t,e){XPe.apply(t,yc(e)?e:[e])},YPe=Date.prototype.toISOString,k8=Hv.default,as={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:dE.encode,encodeValuesOnly:!1,format:k8,formatter:Hv.formatters[k8],indices:!1,serializeDate:function(e){return YPe.call(e)},skipNulls:!1,strictNullHandling:!1},KPe=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},fP={},qPe=function t(e,n,r,i,s,o,a,l,c,u,d,h,f,p,m,_){for(var y=e,x=_,b=0,E=!1;(x=x.get(fP))!==void 0&&!E;){var w=x.get(e);if(b+=1,typeof w<"u"){if(w===b)throw new RangeError("Cyclic object value");E=!0}typeof x.get(fP)>"u"&&(b=0)}if(typeof l=="function"?y=l(n,y):y instanceof Date?y=d(y):r==="comma"&&yc(y)&&(y=dE.maybeMap(y,function(X){return X instanceof Date?d(X):X})),y===null){if(s)return a&&!p?a(n,as.encoder,m,"key",h):n;y=""}if(KPe(y)||dE.isBuffer(y)){if(a){var T=p?n:a(n,as.encoder,m,"key",h);return[f(T)+"="+f(a(y,as.encoder,m,"value",h))]}return[f(n)+"="+f(String(y))]}var C=[];if(typeof y>"u")return C;var P;if(r==="comma"&&yc(y))p&&a&&(y=dE.maybeMap(y,a)),P=[{value:y.length>0?y.join(",")||null:void 0}];else if(yc(l))P=l;else{var M=Object.keys(y);P=c?M.sort(c):M}for(var N=i&&yc(y)&&y.length===1?n+"[]":n,F=0;F<P.length;++F){var I=P[F],k=typeof I=="object"&&typeof I.value<"u"?I.value:y[I];if(!(o&&k===null)){var R=yc(y)?typeof r=="function"?r(N,I):N:N+(u?"."+I:"["+I+"]");_.set(e,b);var z=NY();z.set(fP,_),DY(C,t(k,R,r,i,s,o,r==="comma"&&p&&yc(y)?null:a,l,c,u,d,h,f,p,m,z))}}return C},ZPe=function(e){if(!e)return as;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var n=e.charset||as.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=Hv.default;if(typeof e.format<"u"){if(!WPe.call(Hv.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var i=Hv.formatters[r],s=as.filter;return(typeof e.filter=="function"||yc(e.filter))&&(s=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:as.addQueryPrefix,allowDots:typeof e.allowDots>"u"?as.allowDots:!!e.allowDots,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:as.charsetSentinel,delimiter:typeof e.delimiter>"u"?as.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:as.encode,encoder:typeof e.encoder=="function"?e.encoder:as.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:as.encodeValuesOnly,filter:s,format:r,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:as.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:as.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:as.strictNullHandling}},QPe=function(t,e){var n=t,r=ZPe(e),i,s;typeof r.filter=="function"?(s=r.filter,n=s("",n)):yc(r.filter)&&(s=r.filter,i=s);var o=[];if(typeof n!="object"||n===null)return"";var a;e&&e.arrayFormat in O8?a=e.arrayFormat:e&&"indices"in e?a=e.indices?"indices":"repeat":a="indices";var l=O8[a];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var c=l==="comma"&&e&&e.commaRoundTrip;i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);for(var u=NY(),d=0;d<i.length;++d){var h=i[d];r.skipNulls&&n[h]===null||DY(o,qPe(n[h],h,l,c,r.strictNullHandling,r.skipNulls,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset,u))}var f=o.join(r.delimiter),p=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),f.length>0?p+f:""},eg=kY,zM=Object.prototype.hasOwnProperty,JPe=Array.isArray,Ei={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:eg.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},e2e=function(t){return t.replace(/&#(\d+);/g,function(e,n){return String.fromCharCode(parseInt(n,10))})},BY=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},t2e="utf8=%26%2310003%3B",n2e="utf8=%E2%9C%93",r2e=function(e,n){var r={__proto__:null},i=n.ignoreQueryPrefix?e.replace(/^\?/,""):e,s=n.parameterLimit===1/0?void 0:n.parameterLimit,o=i.split(n.delimiter,s),a=-1,l,c=n.charset;if(n.charsetSentinel)for(l=0;l<o.length;++l)o[l].indexOf("utf8=")===0&&(o[l]===n2e?c="utf-8":o[l]===t2e&&(c="iso-8859-1"),a=l,l=o.length);for(l=0;l<o.length;++l)if(l!==a){var u=o[l],d=u.indexOf("]="),h=d===-1?u.indexOf("="):d+1,f,p;h===-1?(f=n.decoder(u,Ei.decoder,c,"key"),p=n.strictNullHandling?null:""):(f=n.decoder(u.slice(0,h),Ei.decoder,c,"key"),p=eg.maybeMap(BY(u.slice(h+1),n),function(m){return n.decoder(m,Ei.decoder,c,"value")})),p&&n.interpretNumericEntities&&c==="iso-8859-1"&&(p=e2e(p)),u.indexOf("[]=")>-1&&(p=JPe(p)?[p]:p),zM.call(r,f)?r[f]=eg.combine(r[f],p):r[f]=p}return r},i2e=function(t,e,n,r){for(var i=r?e:BY(e,n),s=t.length-1;s>=0;--s){var o,a=t[s];if(a==="[]"&&n.parseArrays)o=[].concat(i);else{o=n.plainObjects?Object.create(null):{};var l=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,c=parseInt(l,10);!n.parseArrays&&l===""?o={0:i}:!isNaN(c)&&a!==l&&String(c)===l&&c>=0&&n.parseArrays&&c<=n.arrayLimit?(o=[],o[c]=i):l!=="__proto__"&&(o[l]=i)}i=o}return i},s2e=function(e,n,r,i){if(e){var s=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,l=r.depth>0&&o.exec(s),c=l?s.slice(0,l.index):s,u=[];if(c){if(!r.plainObjects&&zM.call(Object.prototype,c)&&!r.allowPrototypes)return;u.push(c)}for(var d=0;r.depth>0&&(l=a.exec(s))!==null&&d<r.depth;){if(d+=1,!r.plainObjects&&zM.call(Object.prototype,l[1].slice(1,-1))&&!r.allowPrototypes)return;u.push(l[1])}return l&&u.push("["+s.slice(l.index)+"]"),i2e(u,n,r,i)}},o2e=function(e){if(!e)return Ei;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=typeof e.charset>"u"?Ei.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?Ei.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:Ei.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:Ei.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:Ei.arrayLimit,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Ei.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:Ei.comma,decoder:typeof e.decoder=="function"?e.decoder:Ei.decoder,delimiter:typeof e.delimiter=="string"||eg.isRegExp(e.delimiter)?e.delimiter:Ei.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:Ei.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:Ei.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:Ei.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:Ei.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Ei.strictNullHandling}},a2e=function(t,e){var n=o2e(e);if(t===""||t===null||typeof t>"u")return n.plainObjects?Object.create(null):{};for(var r=typeof t=="string"?r2e(t,n):t,i=n.plainObjects?Object.create(null):{},s=Object.keys(r),o=0;o<s.length;++o){var a=s[o],l=s2e(a,r[a],n,typeof t=="string");i=eg.merge(i,l,n)}return n.allowSparse===!0?i:eg.compact(i)},l2e=QPe,c2e=a2e,u2e=w3,d2e={formats:u2e,parse:c2e,stringify:l2e},h2e=WRe;function Ya(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var f2e=/^([a-z0-9.+-]+:)/i,p2e=/:[0-9]*$/,m2e=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,g2e=["<",">",'"',"`"," ","\r",`
`,"	"],v2e=["{","}","|","\\","^","`"].concat(g2e),$M=["'"].concat(v2e),N8=["%","/","?",";","#"].concat($M),D8=["/","?","#"],y2e=255,B8=/^[+a-z0-9A-Z_-]{0,63}$/,_2e=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,b2e={javascript:!0,"javascript:":!0},jM={javascript:!0,"javascript:":!0},Em={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},GM=d2e;function oC(t,e,n){if(t&&typeof t=="object"&&t instanceof Ya)return t;var r=new Ya;return r.parse(t,e,n),r}Ya.prototype.parse=function(t,e,n){if(typeof t!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var r=t.indexOf("?"),i=r!==-1&&r<t.indexOf("#")?"?":"#",s=t.split(i),o=/\\/g;s[0]=s[0].replace(o,"/"),t=s.join(i);var a=t;if(a=a.trim(),!n&&t.split("#").length===1){var l=m2e.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],e?this.query=GM.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var c=f2e.exec(a);if(c){c=c[0];var u=c.toLowerCase();this.protocol=u,a=a.substr(c.length)}if(n||c||a.match(/^\/\/[^@/]+@[^@/]+/)){var d=a.substr(0,2)==="//";d&&!(c&&jM[c])&&(a=a.substr(2),this.slashes=!0)}if(!jM[c]&&(d||c&&!Em[c])){for(var h=-1,f=0;f<D8.length;f++){var p=a.indexOf(D8[f]);p!==-1&&(h===-1||p<h)&&(h=p)}var m,_;h===-1?_=a.lastIndexOf("@"):_=a.lastIndexOf("@",h),_!==-1&&(m=a.slice(0,_),a=a.slice(_+1),this.auth=decodeURIComponent(m)),h=-1;for(var f=0;f<N8.length;f++){var p=a.indexOf(N8[f]);p!==-1&&(h===-1||p<h)&&(h=p)}h===-1&&(h=a.length),this.host=a.slice(0,h),a=a.slice(h),this.parseHost(),this.hostname=this.hostname||"";var y=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!y)for(var x=this.hostname.split(/\./),f=0,b=x.length;f<b;f++){var E=x[f];if(E&&!E.match(B8)){for(var w="",T=0,C=E.length;T<C;T++)E.charCodeAt(T)>127?w+="x":w+=E[T];if(!w.match(B8)){var P=x.slice(0,f),M=x.slice(f+1),N=E.match(_2e);N&&(P.push(N[1]),M.unshift(N[2])),M.length&&(a="/"+M.join(".")+a),this.hostname=P.join(".");break}}}this.hostname.length>y2e?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=h2e.toASCII(this.hostname));var F=this.port?":"+this.port:"",I=this.hostname||"";this.host=I+F,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!b2e[u])for(var f=0,b=$M.length;f<b;f++){var k=$M[f];if(a.indexOf(k)!==-1){var R=encodeURIComponent(k);R===k&&(R=escape(k)),a=a.split(k).join(R)}}var z=a.indexOf("#");z!==-1&&(this.hash=a.substr(z),a=a.slice(0,z));var X=a.indexOf("?");if(X!==-1?(this.search=a.substr(X),this.query=a.substr(X+1),e&&(this.query=GM.parse(this.query)),a=a.slice(0,X)):e&&(this.search="",this.query={}),a&&(this.pathname=a),Em[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var F=this.pathname||"",G=this.search||"";this.path=F+G}return this.href=this.format(),this};function x2e(t){return typeof t=="string"&&(t=oC(t)),t instanceof Ya?t.format():Ya.prototype.format.call(t)}Ya.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",r=this.hash||"",i=!1,s="";this.host?i=t+this.host:this.hostname&&(i=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(s=GM.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var o=this.search||s&&"?"+s||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||Em[e])&&i!==!1?(i="//"+(i||""),n&&n.charAt(0)!=="/"&&(n="/"+n)):i||(i=""),r&&r.charAt(0)!=="#"&&(r="#"+r),o&&o.charAt(0)!=="?"&&(o="?"+o),n=n.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),e+i+n+o+r};function E2e(t,e){return oC(t,!1,!0).resolve(e)}Ya.prototype.resolve=function(t){return this.resolveObject(oC(t,!1,!0)).format()};Ya.prototype.resolveObject=function(t){if(typeof t=="string"){var e=new Ya;e.parse(t,!1,!0),t=e}for(var n=new Ya,r=Object.keys(this),i=0;i<r.length;i++){var s=r[i];n[s]=this[s]}if(n.hash=t.hash,t.href==="")return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(n[l]=t[l])}return Em[n.protocol]&&n.hostname&&!n.pathname&&(n.pathname="/",n.path=n.pathname),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!Em[t.protocol]){for(var c=Object.keys(t),u=0;u<c.length;u++){var d=c[u];n[d]=t[d]}return n.href=n.format(),n}if(n.protocol=t.protocol,!t.host&&!jM[t.protocol]){for(var b=(t.pathname||"").split("/");b.length&&!(t.host=b.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),b[0]!==""&&b.unshift(""),b.length<2&&b.unshift(""),n.pathname=b.join("/")}else n.pathname=t.pathname;if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var h=n.pathname||"",f=n.search||"";n.path=h+f}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var p=n.pathname&&n.pathname.charAt(0)==="/",m=t.host||t.pathname&&t.pathname.charAt(0)==="/",_=m||p||n.host&&t.pathname,y=_,x=n.pathname&&n.pathname.split("/")||[],b=t.pathname&&t.pathname.split("/")||[],E=n.protocol&&!Em[n.protocol];if(E&&(n.hostname="",n.port=null,n.host&&(x[0]===""?x[0]=n.host:x.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(b[0]===""?b[0]=t.host:b.unshift(t.host)),t.host=null),_=_&&(b[0]===""||x[0]==="")),m)n.host=t.host||t.host===""?t.host:n.host,n.hostname=t.hostname||t.hostname===""?t.hostname:n.hostname,n.search=t.search,n.query=t.query,x=b;else if(b.length)x||(x=[]),x.pop(),x=x.concat(b),n.search=t.search,n.query=t.query;else if(t.search!=null){if(E){n.host=x.shift(),n.hostname=n.host;var w=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;w&&(n.auth=w.shift(),n.hostname=w.shift(),n.host=n.hostname)}return n.search=t.search,n.query=t.query,(n.pathname!==null||n.search!==null)&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!x.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var T=x.slice(-1)[0],C=(n.host||t.host||x.length>1)&&(T==="."||T==="..")||T==="",P=0,M=x.length;M>=0;M--)T=x[M],T==="."?x.splice(M,1):T===".."?(x.splice(M,1),P++):P&&(x.splice(M,1),P--);if(!_&&!y)for(;P--;P)x.unshift("..");_&&x[0]!==""&&(!x[0]||x[0].charAt(0)!=="/")&&x.unshift(""),C&&x.join("/").substr(-1)!=="/"&&x.push("");var N=x[0]===""||x[0]&&x[0].charAt(0)==="/";if(E){n.hostname=N?"":x.length?x.shift():"",n.host=n.hostname;var w=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;w&&(n.auth=w.shift(),n.hostname=w.shift(),n.host=n.hostname)}return _=_||n.host&&x.length,_&&!N&&x.unshift(""),x.length>0?n.pathname=x.join("/"):(n.pathname=null,n.path=null),(n.pathname!==null||n.search!==null)&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n};Ya.prototype.parseHost=function(){var t=this.host,e=p2e.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var w2e=oC,T2e=E2e,S2e=x2e;const F8={};function Ht(t,e,n=3){if(F8[e])return;let r=new Error().stack;typeof r>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`):(r=r.split(`
`).splice(n).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${t}`),console.warn(r),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`),console.warn(r))),F8[e]=!0}const C2e={get parse(){return Ht("7.3.0","utils.url.parse is deprecated, use native URL API instead."),w2e},get format(){return Ht("7.3.0","utils.url.format is deprecated, use native URL API instead."),S2e},get resolve(){return Ht("7.3.0","utils.url.resolve is deprecated, use native URL API instead."),T2e}};function Sa(t){if(typeof t!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function R0(t){return t.split("?")[0].split("#")[0]}function A2e(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function R2e(t,e,n){return t.replace(new RegExp(A2e(e),"g"),n)}function P2e(t,e){let n="",r=0,i=-1,s=0,o=-1;for(let a=0;a<=t.length;++a){if(a<t.length)o=t.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(n.length<2||r!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){const l=n.lastIndexOf("/");if(l!==n.length-1){l===-1?(n="",r=0):(n=n.slice(0,l),r=n.length-1-n.lastIndexOf("/")),i=a,s=0;continue}}else if(n.length===2||n.length===1){n="",r=0,i=a,s=0;continue}}e&&(n.length>0?n+="/..":n="..",r=2)}else n.length>0?n+=`/${t.slice(i+1,a)}`:n=t.slice(i+1,a),r=a-i-1;i=a,s=0}else o===46&&s!==-1?++s:s=-1}return n}const ei={toPosix(t){return R2e(t,"\\","/")},isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},isBlobUrl(t){return t.startsWith("blob:")},hasProtocol(t){return/^[^/:]+:/.test(this.toPosix(t))},getProtocol(t){Sa(t),t=this.toPosix(t);const e=/^file:\/\/\//.exec(t);if(e)return e[0];const n=/^[^/:]+:\/{0,2}/.exec(t);return n?n[0]:""},toAbsolute(t,e,n){if(Sa(t),this.isDataUrl(t)||this.isBlobUrl(t))return t;const r=R0(this.toPosix(e??ht.ADAPTER.getBaseUrl())),i=R0(this.toPosix(n??this.rootname(r)));return t=this.toPosix(t),t.startsWith("/")?ei.join(i,t.slice(1)):this.isAbsolute(t)?t:this.join(r,t)},normalize(t){if(Sa(t),t.length===0)return".";if(this.isDataUrl(t)||this.isBlobUrl(t))return t;t=this.toPosix(t);let e="";const n=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));const r=t.endsWith("/");return t=P2e(t,!1),t.length>0&&r&&(t+="/"),n?`/${t}`:e+t},isAbsolute(t){return Sa(t),t=this.toPosix(t),this.hasProtocol(t)?!0:t.startsWith("/")},join(...t){if(t.length===0)return".";let e;for(let n=0;n<t.length;++n){const r=t[n];if(Sa(r),r.length>0)if(e===void 0)e=r;else{const i=t[n-1]??"";this.joinExtensions.includes(this.extname(i).toLowerCase())?e+=`/../${r}`:e+=`/${r}`}}return e===void 0?".":this.normalize(e)},dirname(t){if(Sa(t),t.length===0)return".";t=this.toPosix(t);let e=t.charCodeAt(0);const n=e===47;let r=-1,i=!0;const s=this.getProtocol(t),o=t;t=t.slice(s.length);for(let a=t.length-1;a>=1;--a)if(e=t.charCodeAt(a),e===47){if(!i){r=a;break}}else i=!1;return r===-1?n?"/":this.isUrl(o)?s+t:s:n&&r===1?"//":s+t.slice(0,r)},rootname(t){Sa(t),t=this.toPosix(t);let e="";if(t.startsWith("/")?e="/":e=this.getProtocol(t),this.isUrl(t)){const n=t.indexOf("/",e.length);n!==-1?e=t.slice(0,n):e=t,e.endsWith("/")||(e+="/")}return e},basename(t,e){Sa(t),e&&Sa(e),t=R0(this.toPosix(t));let n=0,r=-1,i=!0,s;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let o=e.length-1,a=-1;for(s=t.length-1;s>=0;--s){const l=t.charCodeAt(s);if(l===47){if(!i){n=s+1;break}}else a===-1&&(i=!1,a=s+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(r=s):(o=-1,r=a))}return n===r?r=a:r===-1&&(r=t.length),t.slice(n,r)}for(s=t.length-1;s>=0;--s)if(t.charCodeAt(s)===47){if(!i){n=s+1;break}}else r===-1&&(i=!1,r=s+1);return r===-1?"":t.slice(n,r)},extname(t){Sa(t),t=R0(this.toPosix(t));let e=-1,n=0,r=-1,i=!0,s=0;for(let o=t.length-1;o>=0;--o){const a=t.charCodeAt(o);if(a===47){if(!i){n=o+1;break}continue}r===-1&&(i=!1,r=o+1),a===46?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||r===-1||s===0||s===1&&e===r-1&&e===n+1?"":t.slice(e,r)},parse(t){Sa(t);const e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;t=R0(this.toPosix(t));let n=t.charCodeAt(0);const r=this.isAbsolute(t);let i;e.root=this.rootname(t),r||this.hasProtocol(t)?i=1:i=0;let s=-1,o=0,a=-1,l=!0,c=t.length-1,u=0;for(;c>=i;--c){if(n=t.charCodeAt(c),n===47){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),n===46?s===-1?s=c:u!==1&&(u=1):s!==-1&&(u=-1)}return s===-1||a===-1||u===0||u===1&&s===a-1&&s===o+1?a!==-1&&(o===0&&r?e.base=e.name=t.slice(1,a):e.base=e.name=t.slice(o,a)):(o===0&&r?(e.name=t.slice(1,s),e.base=t.slice(1,a)):(e.name=t.slice(o,s),e.base=t.slice(o,a)),e.ext=t.slice(s,a)),e.dir=this.dirname(t),e},sep:"/",delimiter:":",joinExtensions:[".html"]};let pP;async function FY(){return pP??(pP=(async()=>{var s;const t=document.createElement("canvas").getContext("webgl");if(!t)return Is.UNPACK;const e=await new Promise(o=>{const a=document.createElement("video");a.onloadeddata=()=>o(a),a.onerror=()=>o(null),a.autoplay=!1,a.crossOrigin="anonymous",a.preload="auto",a.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",a.load()});if(!e)return Is.UNPACK;const n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n);const r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e);const i=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,i),t.deleteFramebuffer(r),t.deleteTexture(n),(s=t.getExtension("WEBGL_lose_context"))==null||s.loseContext(),i[0]<=i[3]?Is.PMA:Is.UNPACK})()),pP}function I2e(){Ht("7.0.0","skipHello is deprecated, please use settings.RENDER_OPTIONS.hello")}function M2e(){Ht("7.0.0",`sayHello is deprecated, please use Renderer's "hello" option`)}let mP;function UY(){return typeof mP>"u"&&(mP=function(){var e;const t={stencil:!0,failIfMajorPerformanceCaveat:ht.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!ht.ADAPTER.getWebGLRenderingContext())return!1;const n=ht.ADAPTER.createCanvas();let r=n.getContext("webgl",t)||n.getContext("experimental-webgl",t);const i=!!((e=r==null?void 0:r.getContextAttributes())!=null&&e.stencil);if(r){const s=r.getExtension("WEBGL_lose_context");s&&s.loseContext()}return r=null,i}catch{return!1}}()),mP}var L2e={grad:.9,turn:360,rad:360/(2*Math.PI)},cc=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},Ci=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},ra=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=1),t>n?n:t>e?t:e},zY=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},U8=function(t){return{r:ra(t.r,0,255),g:ra(t.g,0,255),b:ra(t.b,0,255),a:ra(t.a)}},gP=function(t){return{r:Ci(t.r),g:Ci(t.g),b:Ci(t.b),a:Ci(t.a,3)}},O2e=/^#([0-9a-f]{3,8})$/i,Jb=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},$Y=function(t){var e=t.r,n=t.g,r=t.b,i=t.a,s=Math.max(e,n,r),o=s-Math.min(e,n,r),a=o?s===e?(n-r)/o:s===n?2+(r-e)/o:4+(e-n)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},jY=function(t){var e=t.h,n=t.s,r=t.v,i=t.a;e=e/360*6,n/=100,r/=100;var s=Math.floor(e),o=r*(1-n),a=r*(1-(e-s)*n),l=r*(1-(1-e+s)*n),c=s%6;return{r:255*[r,a,o,o,l,r][c],g:255*[l,r,r,a,o,o][c],b:255*[o,o,l,r,r,a][c],a:i}},z8=function(t){return{h:zY(t.h),s:ra(t.s,0,100),l:ra(t.l,0,100),a:ra(t.a)}},$8=function(t){return{h:Ci(t.h),s:Ci(t.s),l:Ci(t.l),a:Ci(t.a,3)}},j8=function(t){return jY((n=(e=t).s,{h:e.h,s:(n*=((r=e.l)<50?r:100-r)/100)>0?2*n/(r+n)*100:0,v:r+n,a:e.a}));var e,n,r},Vv=function(t){return{h:(e=$Y(t)).h,s:(i=(200-(n=e.s))*(r=e.v)/100)>0&&i<200?n*r/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,n,r,i},k2e=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,N2e=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,D2e=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,B2e=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,HM={string:[[function(t){var e=O2e.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?Ci(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?Ci(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=D2e.exec(t)||B2e.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:U8({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=k2e.exec(t)||N2e.exec(t);if(!e)return null;var n,r,i=z8({h:(n=e[1],r=e[2],r===void 0&&(r="deg"),Number(n)*(L2e[r]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return j8(i)},"hsl"]],object:[[function(t){var e=t.r,n=t.g,r=t.b,i=t.a,s=i===void 0?1:i;return cc(e)&&cc(n)&&cc(r)?U8({r:Number(e),g:Number(n),b:Number(r),a:Number(s)}):null},"rgb"],[function(t){var e=t.h,n=t.s,r=t.l,i=t.a,s=i===void 0?1:i;if(!cc(e)||!cc(n)||!cc(r))return null;var o=z8({h:Number(e),s:Number(n),l:Number(r),a:Number(s)});return j8(o)},"hsl"],[function(t){var e=t.h,n=t.s,r=t.v,i=t.a,s=i===void 0?1:i;if(!cc(e)||!cc(n)||!cc(r))return null;var o=function(a){return{h:zY(a.h),s:ra(a.s,0,100),v:ra(a.v,0,100),a:ra(a.a)}}({h:Number(e),s:Number(n),v:Number(r),a:Number(s)});return jY(o)},"hsv"]]},G8=function(t,e){for(var n=0;n<e.length;n++){var r=e[n][0](t);if(r)return[r,e[n][1]]}return[null,void 0]},F2e=function(t){return typeof t=="string"?G8(t.trim(),HM.string):typeof t=="object"&&t!==null?G8(t,HM.object):[null,void 0]},vP=function(t,e){var n=Vv(t);return{h:n.h,s:ra(n.s+100*e,0,100),l:n.l,a:n.a}},yP=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},H8=function(t,e){var n=Vv(t);return{h:n.h,s:n.s,l:ra(n.l+100*e,0,100),a:n.a}},VM=function(){function t(e){this.parsed=F2e(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return Ci(yP(this.rgba),2)},t.prototype.isDark=function(){return yP(this.rgba)<.5},t.prototype.isLight=function(){return yP(this.rgba)>=.5},t.prototype.toHex=function(){return e=gP(this.rgba),n=e.r,r=e.g,i=e.b,o=(s=e.a)<1?Jb(Ci(255*s)):"","#"+Jb(n)+Jb(r)+Jb(i)+o;var e,n,r,i,s,o},t.prototype.toRgb=function(){return gP(this.rgba)},t.prototype.toRgbString=function(){return e=gP(this.rgba),n=e.r,r=e.g,i=e.b,(s=e.a)<1?"rgba("+n+", "+r+", "+i+", "+s+")":"rgb("+n+", "+r+", "+i+")";var e,n,r,i,s},t.prototype.toHsl=function(){return $8(Vv(this.rgba))},t.prototype.toHslString=function(){return e=$8(Vv(this.rgba)),n=e.h,r=e.s,i=e.l,(s=e.a)<1?"hsla("+n+", "+r+"%, "+i+"%, "+s+")":"hsl("+n+", "+r+"%, "+i+"%)";var e,n,r,i,s},t.prototype.toHsv=function(){return e=$Y(this.rgba),{h:Ci(e.h),s:Ci(e.s),v:Ci(e.v),a:Ci(e.a,3)};var e},t.prototype.invert=function(){return _l({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),_l(vP(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),_l(vP(this.rgba,-e))},t.prototype.grayscale=function(){return _l(vP(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),_l(H8(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),_l(H8(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?_l({r:(n=this.rgba).r,g:n.g,b:n.b,a:e}):Ci(this.rgba.a,3);var n},t.prototype.hue=function(e){var n=Vv(this.rgba);return typeof e=="number"?_l({h:e,s:n.s,l:n.l,a:n.a}):Ci(n.h)},t.prototype.isEqual=function(e){return this.toHex()===_l(e).toHex()},t}(),_l=function(t){return t instanceof VM?t:new VM(t)},V8=[],U2e=function(t){t.forEach(function(e){V8.indexOf(e)<0&&(e(VM,HM),V8.push(e))})};function z2e(t,e){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var i in n)r[n[i]]=i;var s={};t.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,c=r[this.toHex()];if(c)return c;if(o!=null&&o.closest){var u=this.toRgb(),d=1/0,h="black";if(!s.length)for(var f in n)s[f]=new t(n[f]).toRgb();for(var p in n){var m=(a=u,l=s[p],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));m<d&&(d=m,h=p)}return h}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":n[a];return l?new t(l).toRgb():null},"name"])}U2e([z2e]);const Lp=class hE{constructor(e=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(e){return this.value=e,this}set value(e){if(e instanceof hE)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(e===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}get value(){return this._value}cloneSource(e){return typeof e=="string"||typeof e=="number"||e instanceof Number||e===null?e:Array.isArray(e)||ArrayBuffer.isView(e)?e.slice(0):typeof e=="object"&&e!==null?{...e}:e}isSourceEqual(e,n){const r=typeof e;if(r!==typeof n)return!1;if(r==="number"||r==="string"||e instanceof Number)return e===n;if(Array.isArray(e)&&Array.isArray(n)||ArrayBuffer.isView(e)&&ArrayBuffer.isView(n))return e.length!==n.length?!1:e.every((i,s)=>i===n[s]);if(e!==null&&n!==null){const i=Object.keys(e),s=Object.keys(n);return i.length!==s.length?!1:i.every(o=>e[o]===n[o])}return e===n}toRgba(){const[e,n,r,i]=this._components;return{r:e,g:n,b:r,a:i}}toRgb(){const[e,n,r]=this._components;return{r:e,g:n,b:r}}toRgbaString(){const[e,n,r]=this.toUint8RgbArray();return`rgba(${e},${n},${r},${this.alpha})`}toUint8RgbArray(e){const[n,r,i]=this._components;return e=e??[],e[0]=Math.round(n*255),e[1]=Math.round(r*255),e[2]=Math.round(i*255),e}toRgbArray(e){e=e??[];const[n,r,i]=this._components;return e[0]=n,e[1]=r,e[2]=i,e}toNumber(){return this._int}toLittleEndianNumber(){const e=this._int;return(e>>16)+(e&65280)+((e&255)<<16)}multiply(e){const[n,r,i,s]=hE.temp.setValue(e)._components;return this._components[0]*=n,this._components[1]*=r,this._components[2]*=i,this._components[3]*=s,this.refreshInt(),this._value=null,this}premultiply(e,n=!0){return n&&(this._components[0]*=e,this._components[1]*=e,this._components[2]*=e),this._components[3]=e,this.refreshInt(),this._value=null,this}toPremultiplied(e,n=!0){if(e===1)return(255<<24)+this._int;if(e===0)return n?0:this._int;let r=this._int>>16&255,i=this._int>>8&255,s=this._int&255;return n&&(r=r*e+.5|0,i=i*e+.5|0,s=s*e+.5|0),(e*255<<24)+(r<<16)+(i<<8)+s}toHex(){const e=this._int.toString(16);return`#${"000000".substring(0,6-e.length)+e}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(e){return this._components[3]=this._clamp(e),this}round(e){const[n,r,i]=this._components;return this._components[0]=Math.round(n*e)/e,this._components[1]=Math.round(r*e)/e,this._components[2]=Math.round(i*e)/e,this.refreshInt(),this._value=null,this}toArray(e){e=e??[];const[n,r,i,s]=this._components;return e[0]=n,e[1]=r,e[2]=i,e[3]=s,e}normalize(e){let n,r,i,s;if((typeof e=="number"||e instanceof Number)&&e>=0&&e<=16777215){const o=e;n=(o>>16&255)/255,r=(o>>8&255)/255,i=(o&255)/255,s=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[n,r,i,s=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[n,r,i,s=255]=e,n/=255,r/=255,i/=255,s/=255;else if(typeof e=="string"||typeof e=="object"){if(typeof e=="string"){const a=hE.HEX_PATTERN.exec(e);a&&(e=`#${a[2]}`)}const o=_l(e);o.isValid()&&({r:n,g:r,b:i,a:s}=o.rgba,n/=255,r/=255,i/=255)}if(n!==void 0)this._components[0]=n,this._components[1]=r,this._components[2]=i,this._components[3]=s,this.refreshInt();else throw new Error(`Unable to convert color ${e}`)}refreshInt(){this._clamp(this._components);const[e,n,r]=this._components;this._int=(e*255<<16)+(n*255<<8)+(r*255|0)}_clamp(e,n=0,r=1){return typeof e=="number"?Math.min(Math.max(e,n),r):(e.forEach((i,s)=>{e[s]=Math.min(Math.max(i,n),r)}),e)}};Lp.shared=new Lp,Lp.temp=new Lp,Lp.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Tn=Lp;function $2e(t,e=[]){return Ht("7.2.0","utils.hex2rgb is deprecated, use Color#toRgbArray instead"),Tn.shared.setValue(t).toRgbArray(e)}function GY(t){return Ht("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),Tn.shared.setValue(t).toHex()}function j2e(t){return Ht("7.2.0","utils.string2hex is deprecated, use Color#toNumber instead"),Tn.shared.setValue(t).toNumber()}function HY(t){return Ht("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),Tn.shared.setValue(t).toNumber()}function G2e(){const t=[],e=[];for(let r=0;r<32;r++)t[r]=r,e[r]=r;t[Ft.NORMAL_NPM]=Ft.NORMAL,t[Ft.ADD_NPM]=Ft.ADD,t[Ft.SCREEN_NPM]=Ft.SCREEN,e[Ft.NORMAL]=Ft.NORMAL_NPM,e[Ft.ADD]=Ft.ADD_NPM,e[Ft.SCREEN]=Ft.SCREEN_NPM;const n=[];return n.push(e),n.push(t),n}const T3=G2e();function S3(t,e){return T3[e?1:0][t]}function H2e(t,e,n,r=!0){return Ht("7.2.0","utils.premultiplyRgba has moved to Color.premultiply"),Tn.shared.setValue(t).premultiply(e,r).toArray(n??new Float32Array(4))}function V2e(t,e){return Ht("7.2.0","utils.premultiplyTint has moved to Color.toPremultiplied"),Tn.shared.setValue(t).toPremultiplied(e)}function W2e(t,e,n,r=!0){return Ht("7.2.0","utils.premultiplyTintToRgba has moved to Color.premultiply"),Tn.shared.setValue(t).premultiply(e,r).toArray(n??new Float32Array(4))}const VY=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i;function WY(t,e=null){const n=t*6;if(e=e||new Uint16Array(n),e.length!==n)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${n}`);for(let r=0,i=0;r<n;r+=6,i+=4)e[r+0]=i+0,e[r+1]=i+1,e[r+2]=i+2,e[r+3]=i+0,e[r+4]=i+2,e[r+5]=i+3;return e}function aC(t){if(t.BYTES_PER_ELEMENT===4)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(t.BYTES_PER_ELEMENT===2){if(t instanceof Uint16Array)return"Uint16Array"}else if(t.BYTES_PER_ELEMENT===1&&t instanceof Uint8Array)return"Uint8Array";return null}const X2e={Float32Array,Uint32Array,Int32Array,Uint8Array};function Y2e(t,e){let n=0,r=0;const i={};for(let l=0;l<t.length;l++)r+=e[l],n+=t[l].length;const s=new ArrayBuffer(n*4);let o=null,a=0;for(let l=0;l<t.length;l++){const c=e[l],u=t[l],d=aC(u);i[d]||(i[d]=new X2e[d](s)),o=i[d];for(let h=0;h<u.length;h++){const f=(h/c|0)*r+a,p=h%c;o[f+p]=u[h]}a+=c}return new Float32Array(s)}function Uy(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function WM(t){return!(t&t-1)&&!!t}function XM(t){let e=(t>65535?1:0)<<4;t>>>=e;let n=(t>255?1:0)<<3;return t>>>=n,e|=n,n=(t>15?1:0)<<2,t>>>=n,e|=n,n=(t>3?1:0)<<1,t>>>=n,e|=n,e|t>>1}function Wh(t,e,n){const r=t.length;let i;if(e>=r||n===0)return;n=e+n>r?r-e:n;const s=r-n;for(i=e;i<s;++i)t[i]=t[i+n];t.length=s}function Cc(t){return t===0?0:t<0?-1:1}let K2e=0;function Td(){return++K2e}const YM=class{constructor(t,e,n,r){this.left=t,this.top=e,this.right=n,this.bottom=r}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};YM.EMPTY=new YM(0,0,0,0);let KM=YM;const qM={},Ts=Object.create(null),ho=Object.create(null);function q2e(){let t;for(t in Ts)Ts[t].destroy();for(t in ho)ho[t].destroy()}function Z2e(){let t;for(t in Ts)delete Ts[t];for(t in ho)delete ho[t]}class XY{constructor(e,n,r){this._canvas=ht.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=r||ht.RESOLUTION,this.resize(e,n)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,n){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(n*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function W8(t,e,n){for(let r=0,i=4*n*e;r<e;++r,i+=4)if(t[i+3]!==0)return!1;return!0}function X8(t,e,n,r,i){const s=4*e;for(let o=r,a=r*s+4*n;o<=i;++o,a+=s)if(t[a+3]!==0)return!1;return!0}function YY(t){const{width:e,height:n}=t,r=t.getContext("2d",{willReadFrequently:!0});if(r===null)throw new TypeError("Failed to get canvas 2D context");const i=r.getImageData(0,0,e,n).data;let s=0,o=0,a=e-1,l=n-1;for(;o<n&&W8(i,e,o);)++o;if(o===n)return KM.EMPTY;for(;W8(i,e,l);)--l;for(;X8(i,e,s,o,l);)++s;for(;X8(i,e,a,o,l);)--a;return++a,++l,new KM(s,o,a,l)}function KY(t){const e=YY(t),{width:n,height:r}=e;let i=null;if(!e.isEmpty()){const s=t.getContext("2d");if(s===null)throw new TypeError("Failed to get canvas 2D context");i=s.getImageData(e.left,e.top,n,r)}return{width:n,height:r,data:i}}function Q2e(t){const e=VY.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}}function qY(t,e=globalThis.location){if(t.startsWith("data:"))return"";e=e||globalThis.location;const n=new URL(t,document.baseURI);return n.hostname!==e.hostname||n.port!==e.port||n.protocol!==e.protocol?"anonymous":""}function Gl(t,e=1){var r;const n=(r=ht.RETINA_PREFIX)==null?void 0:r.exec(t);return n?parseFloat(n[1]):e}const J2e=Object.freeze(Object.defineProperty({__proto__:null,BaseTextureCache:ho,BoundingBox:KM,CanvasRenderTarget:XY,DATA_URI:VY,EventEmitter:Ig,ProgramCache:qM,TextureCache:Ts,clearTextureCache:Z2e,correctBlendMode:S3,createIndicesForQuads:WY,decomposeDataUri:Q2e,deprecation:Ht,destroyTextureCache:q2e,detectVideoAlphaMode:FY,determineCrossOrigin:qY,earcut:Fk,getBufferType:aC,getCanvasBoundingBox:YY,getResolutionOfUrl:Gl,hex2rgb:$2e,hex2string:GY,interleaveTypedArrays:Y2e,isMobile:Fa,isPow2:WM,isWebGLSupported:UY,log2:XM,nextPow2:Uy,path:ei,premultiplyBlendMode:T3,premultiplyRgba:H2e,premultiplyTint:V2e,premultiplyTintToRgba:W2e,removeItems:Wh,rgb2hex:HY,sayHello:M2e,sign:Cc,skipHello:I2e,string2hex:j2e,trimCanvas:KY,uid:Td,url:C2e},Symbol.toStringTag,{value:"Module"}));var rt=(t=>(t.Renderer="renderer",t.Application="application",t.RendererSystem="renderer-webgl-system",t.RendererPlugin="renderer-webgl-plugin",t.CanvasRendererSystem="renderer-canvas-system",t.CanvasRendererPlugin="renderer-canvas-plugin",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t))(rt||{});const ZM=t=>{if(typeof t=="function"||typeof t=="object"&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={...typeof t.extension!="object"?{type:t.extension}:t.extension,ref:t}}if(typeof t=="object")t={...t};else throw new Error("Invalid extension type");return typeof t.type=="string"&&(t.type=[t.type]),t},Y8=(t,e)=>ZM(t).priority??e,bt={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map(ZM).forEach(e=>{e.type.forEach(n=>{var r,i;return(i=(r=this._removeHandlers)[n])==null?void 0:i.call(r,e)})}),this},add(...t){return t.map(ZM).forEach(e=>{e.type.forEach(n=>{var s,o;const r=this._addHandlers,i=this._queue;r[n]?(s=r[n])==null||s.call(r,e):(i[n]=i[n]||[],(o=i[n])==null||o.push(e))})}),this},handle(t,e,n){var o;const r=this._addHandlers,i=this._removeHandlers;if(r[t]||i[t])throw new Error(`Extension type ${t} already has a handler`);r[t]=e,i[t]=n;const s=this._queue;return s[t]&&((o=s[t])==null||o.forEach(a=>e(a)),delete s[t]),this},handleByMap(t,e){return this.handle(t,n=>{n.name&&(e[n.name]=n.ref)},n=>{n.name&&delete e[n.name]})},handleByList(t,e,n=-1){return this.handle(t,r=>{e.includes(r.ref)||(e.push(r.ref),e.sort((i,s)=>Y8(s,n)-Y8(i,n)))},r=>{const i=e.indexOf(r.ref);i!==-1&&e.splice(i,1)})}};class Fw{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const eIe=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function tIe(t){let e="";for(let n=0;n<t;++n)n>0&&(e+=`
else `),n<t-1&&(e+=`if(test == ${n}.0){}`);return e}function ZY(t,e){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const n=e.createShader(e.FRAGMENT_SHADER);for(;;){const r=eIe.replace(/%forloop%/gi,tIe(t));if(e.shaderSource(n,r),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))t=t/2|0;else break}return t}const _P=0,bP=1,xP=2,EP=3,wP=4,TP=5;class el{constructor(){this.data=0,this.blendMode=Ft.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<_P)}set blend(e){!!(this.data&1<<_P)!==e&&(this.data^=1<<_P)}get offsets(){return!!(this.data&1<<bP)}set offsets(e){!!(this.data&1<<bP)!==e&&(this.data^=1<<bP)}get culling(){return!!(this.data&1<<xP)}set culling(e){!!(this.data&1<<xP)!==e&&(this.data^=1<<xP)}get depthTest(){return!!(this.data&1<<EP)}set depthTest(e){!!(this.data&1<<EP)!==e&&(this.data^=1<<EP)}get depthMask(){return!!(this.data&1<<TP)}set depthMask(e){!!(this.data&1<<TP)!==e&&(this.data^=1<<TP)}get clockwiseFrontFace(){return!!(this.data&1<<wP)}set clockwiseFrontFace(e){!!(this.data&1<<wP)!==e&&(this.data^=1<<wP)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==Ft.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}static for2d(){const e=new el;return e.depthTest=!1,e.blend=!0,e}}el.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const Uw=[];function C3(t,e){if(!t)return null;let n="";if(typeof t=="string"){const r=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);r&&(n=r[1].toLowerCase())}for(let r=Uw.length-1;r>=0;--r){const i=Uw[r];if(i.test&&i.test(t,n))return new i(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class Eo{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,n,r,i,s,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:c,items:u}=this;this._aliasCount++;for(let d=0,h=u.length;d<h;d++)u[d][c](e,n,r,i,s,o,a,l);return u===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const n=this.items.indexOf(e);return n!==-1&&(this.ensureNonAliasedItems(),this.items.splice(n,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items.length=0,this._name=""}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Eo.prototype,{dispatch:{value:Eo.prototype.emit},run:{value:Eo.prototype.emit}});let tg=class{constructor(e=0,n=0){this._width=e,this._height=n,this.destroyed=!1,this.internal=!1,this.onResize=new Eo("setRealSize"),this.onUpdate=new Eo("update"),this.onError=new Eo("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,n){(e!==this._width||n!==this._height)&&(this._width=e,this._height=n,this.onResize.emit(e,n))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,n,r){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,n){return!1}};class F1 extends tg{constructor(e,n){const{width:r,height:i}=n||{};if(!r||!i)throw new Error("BufferResource width or height invalid");super(r,i),this.data=e,this.unpackAlignment=n.unpackAlignment??4}upload(e,n,r){const i=e.gl;i.pixelStorei(i.UNPACK_ALIGNMENT,this.unpackAlignment),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===Is.UNPACK);const s=n.realWidth,o=n.realHeight;return r.width===s&&r.height===o?i.texSubImage2D(n.target,0,0,0,s,o,n.format,r.type,this.data):(r.width=s,r.height=o,i.texImage2D(n.target,0,r.internalFormat,s,o,0,n.format,r.type,this.data)),!0}dispose(){this.data=null}static test(e){return e===null||e instanceof Int8Array||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array}}const nIe={scaleMode:Ml.NEAREST,alphaMode:Is.NPM},QM=class Op extends Ig{constructor(e=null,n=null){super(),n=Object.assign({},Op.defaultOptions,n);const{alphaMode:r,mipmap:i,anisotropicLevel:s,scaleMode:o,width:a,height:l,wrapMode:c,format:u,type:d,target:h,resolution:f,resourceOptions:p}=n;e&&!(e instanceof tg)&&(e=C3(e,p),e.internal=!0),this.resolution=f||ht.RESOLUTION,this.width=Math.round((a||0)*this.resolution)/this.resolution,this.height=Math.round((l||0)*this.resolution)/this.resolution,this._mipmap=i,this.anisotropicLevel=s,this._wrapMode=c,this._scaleMode=o,this.format=u,this.type=d,this.target=h,this.alphaMode=r,this.uid=Td(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=a>0&&l>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,n){let r;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,r=!0),n!==void 0&&n!==this.mipmap&&(this.mipmap=n,r=!0),r&&this.dirtyStyleId++,this}setSize(e,n,r){return r=r||this.resolution,this.setRealSize(e*r,n*r,r)}setRealSize(e,n,r){return this.resolution=r||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(n)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=WM(this.realWidth)&&WM(this.realHeight)}setResolution(e){const n=this.resolution;return n===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*n)/e,this.height=Math.round(this.height*n)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete ho[this.cacheId],delete Ts[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),Op.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,n,r=ht.STRICT_TEXTURE_CACHE){const i=typeof e=="string";let s=null;if(i)s=e;else{if(!e._pixiId){const a=(n==null?void 0:n.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${Td()}`}s=e._pixiId}let o=ho[s];if(i&&r&&!o)throw new Error(`The cacheId "${s}" does not exist in BaseTextureCache.`);return o||(o=new Op(e,n),o.cacheId=s,Op.addToCache(o,s)),o}static fromBuffer(e,n,r,i){e=e||new Float32Array(n*r*4);const s=new F1(e,{width:n,height:r,...i==null?void 0:i.resourceOptions});let o,a;return e instanceof Float32Array?(o=Ze.RGBA,a=At.FLOAT):e instanceof Int32Array?(o=Ze.RGBA_INTEGER,a=At.INT):e instanceof Uint32Array?(o=Ze.RGBA_INTEGER,a=At.UNSIGNED_INT):e instanceof Int16Array?(o=Ze.RGBA_INTEGER,a=At.SHORT):e instanceof Uint16Array?(o=Ze.RGBA_INTEGER,a=At.UNSIGNED_SHORT):e instanceof Int8Array?(o=Ze.RGBA,a=At.BYTE):(o=Ze.RGBA,a=At.UNSIGNED_BYTE),s.internal=!0,new Op(s,Object.assign({},nIe,{type:a,format:o},i))}static addToCache(e,n){n&&(e.textureCacheIds.includes(n)||e.textureCacheIds.push(n),ho[n]&&ho[n]!==e&&console.warn(`BaseTexture added to the cache with an id [${n}] that already had an entry`),ho[n]=e)}static removeFromCache(e){if(typeof e=="string"){const n=ho[e];if(n){const r=n.textureCacheIds.indexOf(e);return r>-1&&n.textureCacheIds.splice(r,1),delete ho[e],n}}else if(e!=null&&e.textureCacheIds){for(let n=0;n<e.textureCacheIds.length;++n)delete ho[e.textureCacheIds[n]];return e.textureCacheIds.length=0,e}return null}};QM.defaultOptions={mipmap:Qa.POW2,anisotropicLevel:0,scaleMode:Ml.LINEAR,wrapMode:Ul.CLAMP,alphaMode:Is.UNPACK,target:Vh.TEXTURE_2D,format:Ze.RGBA,type:At.UNSIGNED_BYTE},QM._globalBatch=0;let Qt=QM;class zw{constructor(){this.texArray=null,this.blend=0,this.type=na.TRIANGLES,this.start=0,this.size=0,this.data=null}}let rIe=0,Kr=class QY{constructor(e,n=!0,r=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=r,this.static=n,this.id=rIe++,this.disposeRunner=new Eo("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?Xa.ELEMENT_ARRAY_BUFFER:Xa.ARRAY_BUFFER}get index(){return this.type===Xa.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new QY(e)}},JM=class JY{constructor(e,n=0,r=!1,i=At.FLOAT,s,o,a,l=1){this.buffer=e,this.size=n,this.normalized=r,this.type=i,this.stride=s,this.start=o,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(e,n,r,i,s){return new JY(e,n,r,i,s)}};const iIe={Float32Array,Uint32Array,Int32Array,Uint8Array};function sIe(t,e){let n=0,r=0;const i={};for(let l=0;l<t.length;l++)r+=e[l],n+=t[l].length;const s=new ArrayBuffer(n*4);let o=null,a=0;for(let l=0;l<t.length;l++){const c=e[l],u=t[l],d=aC(u);i[d]||(i[d]=new iIe[d](s)),o=i[d];for(let h=0;h<u.length;h++){const f=(h/c|0)*r+a,p=h%c;o[f+p]=u[h]}a+=c}return new Float32Array(s)}const K8={5126:4,5123:2,5121:1};let oIe=0;const aIe={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};let Lg=class eL{constructor(e=[],n={}){this.buffers=e,this.indexBuffer=null,this.attributes=n,this.glVertexArrayObjects={},this.id=oIe++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Eo("disposeGeometry"),this.refCount=0}addAttribute(e,n,r=0,i=!1,s,o,a,l=!1){if(!n)throw new Error("You must pass a buffer when creating an attribute");n instanceof Kr||(n instanceof Array&&(n=new Float32Array(n)),n=new Kr(n));const c=e.split("|");if(c.length>1){for(let d=0;d<c.length;d++)this.addAttribute(c[d],n,r,i,s);return this}let u=this.buffers.indexOf(n);return u===-1&&(this.buffers.push(n),u=this.buffers.length-1),this.attributes[e]=new JM(u,r,i,s,o,a,l),this.instanced=this.instanced||l,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof Kr||(e instanceof Array&&(e=new Uint16Array(e)),e=new Kr(e)),e.type=Xa.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const e=[],n=[],r=new Kr;let i;for(i in this.attributes){const s=this.attributes[i],o=this.buffers[s.buffer];e.push(o.data),n.push(s.size*K8[s.type]/4),s.buffer=0}for(r.data=sIe(e,n),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[r],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const n=this.attributes[e];return this.buffers[n.buffer].data.length/(n.stride/4||n.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new eL;for(let n=0;n<this.buffers.length;n++)e.buffers[n]=new Kr(this.buffers[n].data.slice(0));for(const n in this.attributes){const r=this.attributes[n];e.attributes[n]=new JM(r.buffer,r.size,r.normalized,r.type,r.stride,r.start,r.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=Xa.ELEMENT_ARRAY_BUFFER),e}static merge(e){const n=new eL,r=[],i=[],s=[];let o;for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)i[l]=i[l]||0,i[l]+=o.buffers[l].data.length,s[l]=0}for(let a=0;a<o.buffers.length;a++)r[a]=new aIe[aC(o.buffers[a].data)](i[a]),n.buffers[a]=new Kr(r[a]);for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)r[l].set(o.buffers[l].data,s[l]),s[l]+=o.buffers[l].data.length}if(n.attributes=o.attributes,o.indexBuffer){n.indexBuffer=n.buffers[o.buffers.indexOf(o.indexBuffer)],n.indexBuffer.type=Xa.ELEMENT_ARRAY_BUFFER;let a=0,l=0,c=0,u=0;for(let d=0;d<o.buffers.length;d++)if(o.buffers[d]!==o.indexBuffer){u=d;break}for(const d in o.attributes){const h=o.attributes[d];(h.buffer|0)===u&&(l+=h.size*K8[h.type]/4)}for(let d=0;d<e.length;d++){const h=e[d].indexBuffer.data;for(let f=0;f<h.length;f++)n.indexBuffer.data[f+c]+=a;a+=e[d].buffers[u].data.length/l,c+=h.length}}return n}};class A3 extends Lg{constructor(e=!1){super(),this._buffer=new Kr(null,e,!1),this._indexBuffer=new Kr(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,At.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,At.FLOAT).addAttribute("aColor",this._buffer,4,!0,At.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,At.FLOAT).addIndex(this._indexBuffer)}}const zy=Math.PI*2,eK=180/Math.PI,tK=Math.PI/180;var Ri=(t=>(t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC",t))(Ri||{});class Ot{constructor(e=0,n=0){this.x=0,this.y=0,this.x=e,this.y=n}clone(){return new Ot(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,n=e){return this.x=e,this.y=n,this}}Ot.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const ex=[new Ot,new Ot,new Ot,new Ot];class Wt{constructor(e=0,n=0,r=0,i=0){this.x=Number(e),this.y=Number(n),this.width=Number(r),this.height=Number(i),this.type=Ri.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Wt(0,0,0,0)}clone(){return new Wt(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,n){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&n>=this.y&&n<this.y+this.height}intersects(e,n){if(!n){const P=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=P)return!1;const M=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>M}const r=this.left,i=this.right,s=this.top,o=this.bottom;if(i<=r||o<=s)return!1;const a=ex[0].set(e.left,e.top),l=ex[1].set(e.left,e.bottom),c=ex[2].set(e.right,e.top),u=ex[3].set(e.right,e.bottom);if(c.x<=a.x||l.y<=a.y)return!1;const d=Math.sign(n.a*n.d-n.b*n.c);if(d===0||(n.apply(a,a),n.apply(l,l),n.apply(c,c),n.apply(u,u),Math.max(a.x,l.x,c.x,u.x)<=r||Math.min(a.x,l.x,c.x,u.x)>=i||Math.max(a.y,l.y,c.y,u.y)<=s||Math.min(a.y,l.y,c.y,u.y)>=o))return!1;const h=d*(l.y-a.y),f=d*(a.x-l.x),p=h*r+f*s,m=h*i+f*s,_=h*r+f*o,y=h*i+f*o;if(Math.max(p,m,_,y)<=h*a.x+f*a.y||Math.min(p,m,_,y)>=h*u.x+f*u.y)return!1;const x=d*(a.y-c.y),b=d*(c.x-a.x),E=x*r+b*s,w=x*i+b*s,T=x*r+b*o,C=x*i+b*o;return!(Math.max(E,w,T,C)<=x*a.x+b*a.y||Math.min(E,w,T,C)>=x*u.x+b*u.y)}pad(e=0,n=e){return this.x-=e,this.y-=n,this.width+=e*2,this.height+=n*2,this}fit(e){const n=Math.max(this.x,e.x),r=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=n,this.width=Math.max(r-n,0),this.y=i,this.height=Math.max(s-i,0),this}ceil(e=1,n=.001){const r=Math.ceil((this.x+this.width-n)*e)/e,i=Math.ceil((this.y+this.height-n)*e)/e;return this.x=Math.floor((this.x+n)*e)/e,this.y=Math.floor((this.y+n)*e)/e,this.width=r-this.x,this.height=i-this.y,this}enlarge(e){const n=Math.min(this.x,e.x),r=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=n,this.width=r-n,this.y=i,this.height=s-i,this}}Wt.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class U1{constructor(e=0,n=0,r=0){this.x=e,this.y=n,this.radius=r,this.type=Ri.CIRC}clone(){return new U1(this.x,this.y,this.radius)}contains(e,n){if(this.radius<=0)return!1;const r=this.radius*this.radius;let i=this.x-e,s=this.y-n;return i*=i,s*=s,i+s<=r}getBounds(){return new Wt(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}U1.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class z1{constructor(e=0,n=0,r=0,i=0){this.x=e,this.y=n,this.width=r,this.height=i,this.type=Ri.ELIP}clone(){return new z1(this.x,this.y,this.width,this.height)}contains(e,n){if(this.width<=0||this.height<=0)return!1;let r=(e-this.x)/this.width,i=(n-this.y)/this.height;return r*=r,i*=i,r+i<=1}getBounds(){return new Wt(this.x-this.width,this.y-this.height,this.width,this.height)}}z1.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class ud{constructor(...e){let n=Array.isArray(e[0])?e[0]:e;if(typeof n[0]!="number"){const r=[];for(let i=0,s=n.length;i<s;i++)r.push(n[i].x,n[i].y);n=r}this.points=n,this.type=Ri.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),n=new ud(e);return n.closeStroke=this.closeStroke,n}contains(e,n){let r=!1;const i=this.points.length/2;for(let s=0,o=i-1;s<i;o=s++){const a=this.points[s*2],l=this.points[s*2+1],c=this.points[o*2],u=this.points[o*2+1];l>n!=u>n&&e<(c-a)*((n-l)/(u-l))+a&&(r=!r)}return r}}ud.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`};class $1{constructor(e=0,n=0,r=0,i=0,s=20){this.x=e,this.y=n,this.width=r,this.height=i,this.radius=s,this.type=Ri.RREC}clone(){return new $1(this.x,this.y,this.width,this.height,this.radius)}contains(e,n){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&n>=this.y&&n<=this.y+this.height){const r=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(n>=this.y+r&&n<=this.y+this.height-r||e>=this.x+r&&e<=this.x+this.width-r)return!0;let i=e-(this.x+r),s=n-(this.y+r);const o=r*r;if(i*i+s*s<=o||(i=e-(this.x+this.width-r),i*i+s*s<=o)||(s=n-(this.y+this.height-r),i*i+s*s<=o)||(i=e-(this.x+r),i*i+s*s<=o))return!0}return!1}}$1.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};let Br=class fE{constructor(e=1,n=0,r=0,i=1,s=0,o=0){this.array=null,this.a=e,this.b=n,this.c=r,this.d=i,this.tx=s,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,n,r,i,s,o){return this.a=e,this.b=n,this.c=r,this.d=i,this.tx=s,this.ty=o,this}toArray(e,n){this.array||(this.array=new Float32Array(9));const r=n||this.array;return e?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty,r[8]=1):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0,r[8]=1),r}apply(e,n){n=n||new Ot;const r=e.x,i=e.y;return n.x=this.a*r+this.c*i+this.tx,n.y=this.b*r+this.d*i+this.ty,n}applyInverse(e,n){n=n||new Ot;const r=1/(this.a*this.d+this.c*-this.b),i=e.x,s=e.y;return n.x=this.d*r*i+-this.c*r*s+(this.ty*this.c-this.tx*this.d)*r,n.y=this.a*r*s+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,n}translate(e,n){return this.tx+=e,this.ty+=n,this}scale(e,n){return this.a*=e,this.d*=n,this.c*=e,this.b*=n,this.tx*=e,this.ty*=n,this}rotate(e){const n=Math.cos(e),r=Math.sin(e),i=this.a,s=this.c,o=this.tx;return this.a=i*n-this.b*r,this.b=i*r+this.b*n,this.c=s*n-this.d*r,this.d=s*r+this.d*n,this.tx=o*n-this.ty*r,this.ty=o*r+this.ty*n,this}append(e){const n=this.a,r=this.b,i=this.c,s=this.d;return this.a=e.a*n+e.b*i,this.b=e.a*r+e.b*s,this.c=e.c*n+e.d*i,this.d=e.c*r+e.d*s,this.tx=e.tx*n+e.ty*i+this.tx,this.ty=e.tx*r+e.ty*s+this.ty,this}setTransform(e,n,r,i,s,o,a,l,c){return this.a=Math.cos(a+c)*s,this.b=Math.sin(a+c)*s,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=e-(r*this.a+i*this.c),this.ty=n-(r*this.b+i*this.d),this}prepend(e){const n=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const r=this.a,i=this.c;this.a=r*e.a+this.b*e.c,this.b=r*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=n*e.a+this.ty*e.c+e.tx,this.ty=n*e.b+this.ty*e.d+e.ty,this}decompose(e){const n=this.a,r=this.b,i=this.c,s=this.d,o=e.pivot,a=-Math.atan2(-i,s),l=Math.atan2(r,n),c=Math.abs(a+l);return c<1e-5||Math.abs(zy-c)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=l),e.scale.x=Math.sqrt(n*n+r*r),e.scale.y=Math.sqrt(i*i+s*s),e.position.x=this.tx+(o.x*n+o.y*i),e.position.y=this.ty+(o.x*r+o.y*s),e}invert(){const e=this.a,n=this.b,r=this.c,i=this.d,s=this.tx,o=e*i-n*r;return this.a=i/o,this.b=-n/o,this.c=-r/o,this.d=e/o,this.tx=(r*this.ty-i*s)/o,this.ty=-(e*this.ty-n*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new fE;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}static get IDENTITY(){return new fE}static get TEMP_MATRIX(){return new fE}};Br.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const gh=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],vh=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],yh=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],_h=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],tL=[],nK=[],tx=Math.sign;function lIe(){for(let t=0;t<16;t++){const e=[];tL.push(e);for(let n=0;n<16;n++){const r=tx(gh[t]*gh[n]+yh[t]*vh[n]),i=tx(vh[t]*gh[n]+_h[t]*vh[n]),s=tx(gh[t]*yh[n]+yh[t]*_h[n]),o=tx(vh[t]*yh[n]+_h[t]*_h[n]);for(let a=0;a<16;a++)if(gh[a]===r&&vh[a]===i&&yh[a]===s&&_h[a]===o){e.push(a);break}}}for(let t=0;t<16;t++){const e=new Br;e.set(gh[t],vh[t],yh[t],_h[t],0,0),nK.push(e)}}lIe();const gr={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>gh[t],uY:t=>vh[t],vX:t=>yh[t],vY:t=>_h[t],inv:t=>t&8?t&15:-t&7,add:(t,e)=>tL[t][e],sub:(t,e)=>tL[t][gr.inv(e)],rotate180:t=>t^4,isVertical:t=>(t&3)===2,byDirection:(t,e)=>Math.abs(t)*2<=Math.abs(e)?e>=0?gr.S:gr.N:Math.abs(e)*2<=Math.abs(t)?t>0?gr.E:gr.W:e>0?t>0?gr.SE:gr.SW:t>0?gr.NE:gr.NW,matrixAppendRotationInv:(t,e,n=0,r=0)=>{const i=nK[gr.inv(e)];i.tx=n,i.ty=r,t.append(i)}};class Ua{constructor(e,n,r=0,i=0){this._x=r,this._y=i,this.cb=e,this.scope=n}clone(e=this.cb,n=this.scope){return new Ua(e,n,this._x,this._y)}set(e=0,n=e){return(this._x!==e||this._y!==n)&&(this._x=e,this._y=n,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}Ua.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const nL=class{constructor(){this.worldTransform=new Br,this.localTransform=new Br,this.position=new Ua(this.onChange,this,0,0),this.scale=new Ua(this.onChange,this,1,1),this.pivot=new Ua(this.onChange,this,0,0),this.skew=new Ua(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(t){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){const n=t.worldTransform,r=this.worldTransform;r.a=e.a*n.a+e.b*n.c,r.b=e.a*n.b+e.b*n.d,r.c=e.c*n.a+e.d*n.c,r.d=e.c*n.b+e.d*n.d,r.tx=e.tx*n.a+e.ty*n.c+n.tx,r.ty=e.tx*n.b+e.ty*n.d+n.ty,this._parentID=t._worldID,this._worldID++}}setFromMatrix(t){t.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}};nL.IDENTITY=new nL;let j1=nL;j1.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var cIe=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,uIe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function q8(t,e,n){const r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),r}function SP(t){const e=new Array(t);for(let n=0;n<e.length;n++)e[n]=!1;return e}function rK(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return SP(2*e);case"bvec3":return SP(3*e);case"bvec4":return SP(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const Xh=[{test:t=>t.type==="float"&&t.size===1&&!t.isArray,code:t=>`
            if(uv["${t}"] !== ud["${t}"].value)
            {
                ud["${t}"].value = uv["${t}"]
                gl.uniform1f(ud["${t}"].location, uv["${t}"])
            }
            `},{test:(t,e)=>(t.type==="sampler2D"||t.type==="samplerCube"||t.type==="sampler2DArray")&&t.size===1&&!t.isArray&&(e==null||e.castToBaseTexture!==void 0),code:t=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${t}"], t);

            if(ud["${t}"].value !== t)
            {
                ud["${t}"].value = t;
                gl.uniform1i(ud["${t}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(t,e)=>t.type==="mat3"&&t.size===1&&!t.isArray&&e.a!==void 0,code:t=>`
            gl.uniformMatrix3fv(ud["${t}"].location, false, uv["${t}"].toArray(true));
            `,codeUbo:t=>`
                var ${t}_matrix = uv.${t}.toArray(true);

                data[offset] = ${t}_matrix[0];
                data[offset+1] = ${t}_matrix[1];
                data[offset+2] = ${t}_matrix[2];
        
                data[offset + 4] = ${t}_matrix[3];
                data[offset + 5] = ${t}_matrix[4];
                data[offset + 6] = ${t}_matrix[5];
        
                data[offset + 8] = ${t}_matrix[6];
                data[offset + 9] = ${t}_matrix[7];
                data[offset + 10] = ${t}_matrix[8];
            `},{test:(t,e)=>t.type==="vec2"&&t.size===1&&!t.isArray&&e.x!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${t}"].location, v.x, v.y);
                }`,codeUbo:t=>`
                v = uv.${t};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:t=>t.type==="vec2"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${t}"].location, v[0], v[1]);
                }
            `},{test:(t,e)=>t.type==="vec4"&&t.size===1&&!t.isArray&&e.width!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${t}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(t,e)=>t.type==="vec4"&&t.size===1&&!t.isArray&&e.red!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${t}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(t,e)=>t.type==="vec3"&&t.size===1&&!t.isArray&&e.red!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${t}"].location, v.red, v.green, v.blue)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:t=>t.type==="vec4"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${t}"].location, v[0], v[1], v[2], v[3])
                }`}],dIe={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},hIe={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function fIe(t,e){var r;const n=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const i in t.uniforms){const s=e[i];if(!s){((r=t.uniforms[i])==null?void 0:r.group)===!0&&(t.uniforms[i].ubo?n.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${i}, '${i}');
                    `):n.push(`
                        renderer.shader.syncUniformGroup(uv.${i}, syncData);
                    `));continue}const o=t.uniforms[i];let a=!1;for(let l=0;l<Xh.length;l++)if(Xh[l].test(s,o)){n.push(Xh[l].code(i,o)),a=!0;break}if(!a){const l=(s.size===1&&!s.isArray?dIe:hIe)[s.type].replace("location",`ud["${i}"].location`);n.push(`
            cu = ud["${i}"];
            cv = cu.value;
            v = uv["${i}"];
            ${l};`)}}return new Function("ud","uv","renderer","syncData",n.join(`
`))}const iK={};let yp=iK;function sK(){if(yp===iK||yp!=null&&yp.isContextLost()){const t=ht.ADAPTER.createCanvas();let e;ht.PREFER_ENV>=Fd.WEBGL2&&(e=t.getContext("webgl2",{})),e||(e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),yp=e}return yp}let nx;function pIe(){if(!nx){nx=vo.MEDIUM;const t=sK();if(t&&t.getShaderPrecisionFormat){const e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);e&&(nx=e.precision?vo.HIGH:vo.MEDIUM)}}return nx}function Z8(t,e){const n=t.getShaderSource(e).split(`
`).map((c,u)=>`${u}: ${c}`),r=t.getShaderInfoLog(e),i=r.split(`
`),s={},o=i.map(c=>parseFloat(c.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(c=>c&&!s[c]?(s[c]=!0,!0):!1),a=[""];o.forEach(c=>{n[c-1]=`%c${n[c-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=n.join(`
`);a[0]=l,console.error(r),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function mIe(t,e,n,r){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||Z8(t,n),t.getShaderParameter(r,t.COMPILE_STATUS)||Z8(t,r),console.error("PixiJS Error: Could not initialize shader."),t.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}const gIe={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function oK(t){return gIe[t]}let rx=null;const Q8={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function aK(t,e){if(!rx){const n=Object.keys(Q8);rx={};for(let r=0;r<n.length;++r){const i=n[r];rx[t[i]]=Q8[i]}}return rx[e]}function J8(t,e,n){if(t.substring(0,9)!=="precision"){let r=e;return e===vo.HIGH&&n!==vo.HIGH&&(r=vo.MEDIUM),`precision ${r} float;
${t}`}else if(n!==vo.HIGH&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}let P0;function lK(){if(typeof P0=="boolean")return P0;try{P0=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{P0=!1}return P0}let vIe=0;const ix={},rL=class kp{constructor(e,n,r="pixi-shader",i={}){this.extra={},this.id=vIe++,this.vertexSrc=e||kp.defaultVertexSrc,this.fragmentSrc=n||kp.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=i,this.vertexSrc.substring(0,8)!=="#version"&&(r=r.replace(/\s+/g,"-"),ix[r]?(ix[r]++,r+=`-${ix[r]}`):ix[r]=1,this.vertexSrc=`#define SHADER_NAME ${r}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${r}
${this.fragmentSrc}`,this.vertexSrc=J8(this.vertexSrc,kp.defaultVertexPrecision,vo.HIGH),this.fragmentSrc=J8(this.fragmentSrc,kp.defaultFragmentPrecision,pIe())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return uIe}static get defaultFragmentSrc(){return cIe}static from(e,n,r){const i=e+n;let s=qM[i];return s||(qM[i]=s=new kp(e,n,r)),s}};rL.defaultVertexPrecision=vo.HIGH,rL.defaultFragmentPrecision=Fa.apple.device?vo.HIGH:vo.MEDIUM;let Ll=rL,yIe=0;class oa{constructor(e,n,r){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=yIe++,this.static=!!n,this.ubo=!!r,e instanceof Kr?(this.buffer=e,this.buffer.type=Xa.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new Kr(new Float32Array(1)),this.buffer.type=Xa.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,n,r){if(!this.ubo)this.uniforms[e]=new oa(n,r);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,n,r){return new oa(e,n,r)}static uboFrom(e,n){return new oa(e,n??!0,!0)}}let Lc=class cK{constructor(e,n){this.uniformBindCount=0,this.program=e,n?n instanceof oa?this.uniformGroup=n:this.uniformGroup=new oa(n):this.uniformGroup=new oa({}),this.disposeRunner=new Eo("disposeShader")}checkUniformExists(e,n){if(n.uniforms[e])return!0;for(const r in n.uniforms){const i=n.uniforms[r];if(i.group===!0&&this.checkUniformExists(e,i))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,n,r){const i=Ll.from(e,n);return new cK(i,r)}};class uK{constructor(e,n){if(this.vertexSrc=e,this.fragTemplate=n,this.programCache={},this.defaultGroupCache={},!n.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!n.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const r=new Int32Array(e);for(let s=0;s<e;s++)r[s]=s;this.defaultGroupCache[e]=oa.from({uSamplers:r},!0);let i=this.fragTemplate;i=i.replace(/%count%/gi,`${e}`),i=i.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Ll(this.vertexSrc,i)}const n={tint:new Float32Array([1,1,1,1]),translationMatrix:new Br,default:this.defaultGroupCache[e]};return new Lc(this.programCache[e],n)}generateSampleSrc(e){let n="";n+=`
`,n+=`
`;for(let r=0;r<e;r++)r>0&&(n+=`
else `),r<e-1&&(n+=`if(vTextureId < ${r}.5)`),n+=`
{`,n+=`
	color = texture2D(uSamplers[${r}], vTextureCoord);`,n+=`
}`;return n+=`
`,n+=`
`,n}}class $w{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}function _Ie(){return!Fa.apple.device}function bIe(t){let e=!0;const n=ht.ADAPTER.getNavigator();if(Fa.tablet||Fa.phone){if(Fa.apple.device){const r=n.userAgent.match(/OS (\d+)_(\d+)?/);r&&parseInt(r[1],10)<11&&(e=!1)}if(Fa.android.device){const r=n.userAgent.match(/Android\s([0-9.]*)/);r&&parseInt(r[1],10)<7&&(e=!1)}}return e?t:4}class G1{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}var xIe=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,EIe=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const rv=class Ra extends G1{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=A3,this.vertexSize=6,this.state=el.for2d(),this.size=Ra.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??bIe(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??_Ie(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return Ht("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return EIe}static get defaultFragmentTemplate(){return xIe}setShaderGenerator({vertex:e=Ra.defaultVertexSrc,fragment:n=Ra.defaultFragmentTemplate}={}){this.shaderGenerator=new uK(e,n)}contextChange(){const e=this.renderer.gl;ht.PREFER_ENV===Fd.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),Ra.defaultMaxTextures),this.maxTextures=ZY(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let n=0;n<this._packedGeometryPoolSize;n++)this._packedGeometries[n]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:n}=Ra,r=this.size/4,i=Math.floor(r/this.maxTextures)+1;for(;e.length<r;)e.push(new zw);for(;n.length<i;)n.push(new $w);for(let s=0;s<this.maxTextures;s++)this._tempBoundTextures[s]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:n}=this,r=Ra._textureArrayPool,i=this.renderer.batch,s=this._tempBoundTextures,o=this.renderer.textureGC.count;let a=++Qt._globalBatch,l=0,c=r[0],u=0;i.copyBoundTextures(s,n);for(let d=0;d<this._bufferSize;++d){const h=e[d];e[d]=null,h._batchEnabled!==a&&(c.count>=n&&(i.boundArray(c,s,a,n),this.buildDrawCalls(c,u,d),u=d,c=r[++l],++a),h._batchEnabled=a,h.touched=o,c.elements[c.count++]=h)}c.count>0&&(i.boundArray(c,s,a,n),this.buildDrawCalls(c,u,this._bufferSize),++l,++a);for(let d=0;d<s.length;d++)s[d]=null;Qt._globalBatch=a}buildDrawCalls(e,n,r){const{_bufferedElements:i,_attributeBuffer:s,_indexBuffer:o,vertexSize:a}=this,l=Ra._drawCallPool;let c=this._dcIndex,u=this._aIndex,d=this._iIndex,h=l[c];h.start=this._iIndex,h.texArray=e;for(let f=n;f<r;++f){const p=i[f],m=p._texture.baseTexture,_=T3[m.alphaMode?1:0][p.blendMode];i[f]=null,n<f&&h.blend!==_&&(h.size=d-h.start,n=f,h=l[++c],h.texArray=e,h.start=d),this.packInterleavedGeometry(p,s,o,u,d),u+=p.vertexData.length/2*a,d+=p.indices.length,h.blend=_}n<r&&(h.size=d-h.start,++c),this._dcIndex=c,this._aIndex=u,this._iIndex=d}bindAndClearTexArray(e){const n=this.renderer.texture;for(let r=0;r<e.count;r++)n.bind(e.elements[r],e.ids[r]),e.elements[r]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:n,_indexBuffer:r}=this;Ra.canUploadSameBuffer?(e[this._flushId]._buffer.update(n.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(n.rawBinaryData),e[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:n,state:r}=this.renderer,i=Ra._drawCallPool;let s=null;for(let o=0;o<e;o++){const{texArray:a,type:l,size:c,start:u,blend:d}=i[o];s!==a&&(s=a,this.bindAndClearTexArray(a)),this.state.blendMode=d,r.set(this.state),n.drawElements(l,c,n.UNSIGNED_SHORT,u*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Ra.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const n=Uy(Math.ceil(e/8)),r=XM(n),i=n*8;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);let s=this._aBuffers[i];return s||(this._aBuffers[i]=s=new Fw(i*this.vertexSize*4)),s}getIndexBuffer(e){const n=Uy(Math.ceil(e/12)),r=XM(n),i=n*12;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);let s=this._iBuffers[r];return s||(this._iBuffers[r]=s=new Uint16Array(i)),s}packInterleavedGeometry(e,n,r,i,s){const{uint32View:o,float32View:a}=n,l=i/this.vertexSize,c=e.uvs,u=e.indices,d=e.vertexData,h=e._texture.baseTexture._batchLocation,f=Math.min(e.worldAlpha,1),p=Tn.shared.setValue(e._tintRGB).toPremultiplied(f,e._texture.baseTexture.alphaMode>0);for(let m=0;m<d.length;m+=2)a[i++]=d[m],a[i++]=d[m+1],a[i++]=c[m],a[i++]=c[m+1],o[i++]=p,a[i++]=h;for(let m=0;m<u.length;m++)r[s++]=l+u[m]}};rv.defaultBatchSize=4096,rv.extension={name:"batch",type:rt.RendererPlugin},rv._drawCallPool=[],rv._textureArrayPool=[];let Ou=rv;bt.add(Ou);var wIe=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,TIe=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const iL=class iv extends Lc{constructor(e,n,r){const i=Ll.from(e||iv.defaultVertexSrc,n||iv.defaultFragmentSrc);super(i,r),this.padding=0,this.resolution=iv.defaultResolution,this.multisample=iv.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new el}apply(e,n,r,i,s){e.applyFilter(this,n,r,i)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return TIe}static get defaultFragmentSrc(){return wIe}};iL.defaultResolution=1,iL.defaultMultisample=Gr.NONE;let hs=iL;class $y{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Tn(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:n,background:r,backgroundAlpha:i}=e,s=r??n;s!==void 0&&(this.color=s),this.alpha=i}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}$y.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},$y.extension={type:[rt.RendererSystem,rt.CanvasRendererSystem],name:"background"};bt.add($y);class R3{constructor(e){this.renderer=e,this.emptyRenderer=new G1(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,n){const{boundTextures:r}=this.renderer.texture;for(let i=n-1;i>=0;--i)e[i]=r[i]||null,e[i]&&(e[i]._batchLocation=i)}boundArray(e,n,r,i){const{elements:s,ids:o,count:a}=e;let l=0;for(let c=0;c<a;c++){const u=s[c],d=u._batchLocation;if(d>=0&&d<i&&n[d]===u){o[c]=d;continue}for(;l<i;){const h=n[l];if(h&&h._batchEnabled===r&&h._batchLocation===l){l++;continue}o[c]=l,u._batchLocation=l,n[l]=u;break}}}destroy(){this.renderer=null}}R3.extension={type:rt.RendererSystem,name:"batch"};bt.add(R3);let e6=0;class jy{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=e6++}init(e){if(e.context)this.initFromContext(e.context);else{const n=this.renderer.background.alpha<1,r=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:n,premultipliedAlpha:r,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=e6++,this.renderer.runners.contextChange.emit(e);const n=this.renderer.view;n.addEventListener!==void 0&&(n.addEventListener("webglcontextlost",this.handleContextLost,!1),n.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const n=this.createContext(this.renderer.view,e);this.initFromContext(n)}createContext(e,n){let r;if(ht.PREFER_ENV>=Fd.WEBGL2&&(r=e.getContext("webgl2",n)),r)this.webGLVersion=2;else if(this.webGLVersion=1,r=e.getContext("webgl",n)||e.getContext("experimental-webgl",n),!r)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=r,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,n={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc"),bptc:e.getExtension("EXT_texture_compression_bptc")};this.webGLVersion===1?Object.assign(this.extensions,n,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,n,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const n=e.getContextAttributes(),r="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;r&&(this.webGLVersion=2),n&&!n.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const i=r||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}jy.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},jy.extension={type:rt.RendererSystem,name:"context"};bt.add(jy);let jw=class{constructor(e,n){if(this.width=Math.round(e),this.height=Math.round(n),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Eo("disposeFramebuffer"),this.multisample=Gr.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,n){return this.colorTextures[e]=n||new Qt(null,{scaleMode:Ml.NEAREST,resolution:1,mipmap:Qa.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new Qt(null,{scaleMode:Ml.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Qa.OFF,format:Ze.DEPTH_COMPONENT,type:At.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,n){if(e=Math.round(e),n=Math.round(n),!e||!n)throw new Error("Framebuffer width and height must not be zero");if(!(e===this.width&&n===this.height)){this.width=e,this.height=n,this.dirtyId++,this.dirtySize++;for(let r=0;r<this.colorTextures.length;r++){const i=this.colorTextures[r],s=i.resolution;i.setSize(e/s,n/s)}if(this.depthTexture){const r=this.depthTexture.resolution;this.depthTexture.setSize(e/r,n/r)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}};class P3 extends Qt{constructor(e={}){if(typeof e=="number"){const n=arguments[0],r=arguments[1],i=arguments[2],s=arguments[3];e={width:n,height:r,scaleMode:i,resolution:s}}e.width=e.width??100,e.height=e.height??100,e.multisample??(e.multisample=Gr.NONE),super(null,e),this.mipmap=Qa.OFF,this.valid=!0,this._clear=new Tn([0,0,0,0]),this.framebuffer=new jw(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,n){this.framebuffer.resize(e*this.resolution,n*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Hl extends tg{constructor(e){const n=e,r=n.naturalWidth||n.videoWidth||n.displayWidth||n.width,i=n.naturalHeight||n.videoHeight||n.displayHeight||n.height;super(r,i),this.source=e,this.noSubImage=!1}static crossOrigin(e,n,r){r===void 0&&!n.startsWith("data:")?e.crossOrigin=qY(n):r!==!1&&(e.crossOrigin=typeof r=="string"?r:"anonymous")}upload(e,n,r,i){const s=e.gl,o=n.realWidth,a=n.realHeight;if(i=i||this.source,typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement){if(!i.complete||i.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement&&i.readyState<=1)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===Is.UNPACK),!this.noSubImage&&n.target===s.TEXTURE_2D&&r.width===o&&r.height===a?s.texSubImage2D(s.TEXTURE_2D,0,0,0,n.format,r.type,i):(r.width=o,r.height=a,s.texImage2D(n.target,0,r.internalFormat,n.format,r.type,i)),!0}update(){if(this.destroyed)return;const e=this.source,n=e.naturalWidth||e.videoWidth||e.width,r=e.naturalHeight||e.videoHeight||e.height;this.resize(n,r),super.update()}dispose(){this.source=null}}class I3 extends Hl{constructor(e,n){if(n=n||{},typeof e=="string"){const r=new Image;Hl.crossOrigin(r,e,n.crossorigin),r.src=e,e=r}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(n.createBitmap??ht.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof n.alphaMode=="number"?n.alphaMode:null,this.bitmap=null,this._load=null,n.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((n,r)=>{const i=this.source;this.url=i.src;const s=()=>{this.destroyed||(i.onload=null,i.onerror=null,this.update(),this._load=null,this.createBitmap?n(this.process()):n(this))};i.complete&&i.src?s():(i.onload=s,i.onerror=o=>{r(o),this.onError.emit(o)})}),this._load)}process(){const e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const n=globalThis.createImageBitmap,r=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:r?"cors":"no-cors"}).then(i=>i.blob()).then(i=>n(i,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Is.UNPACK?"premultiply":"none"})).then(i=>this.destroyed?Promise.reject():(this.bitmap=i,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,n,r){if(typeof this.alphaMode=="number"&&(n.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,n,r);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,n,r,this.bitmap),!this.preserveBitmap){let i=!0;const s=n._glTextures;for(const o in s){const a=s[o];if(a!==r&&a.dirtyId!==n.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}}class lC{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,n,r){const i=n.width,s=n.height;if(r){const o=e.width/2/i,a=e.height/2/s,l=e.x/i+o,c=e.y/s+a;r=gr.add(r,gr.NW),this.x0=l+o*gr.uX(r),this.y0=c+a*gr.uY(r),r=gr.add(r,2),this.x1=l+o*gr.uX(r),this.y1=c+a*gr.uY(r),r=gr.add(r,2),this.x2=l+o*gr.uX(r),this.y2=c+a*gr.uY(r),r=gr.add(r,2),this.x3=l+o*gr.uX(r),this.y3=c+a*gr.uY(r)}else this.x0=e.x/i,this.y0=e.y/s,this.x1=(e.x+e.width)/i,this.y1=e.y/s,this.x2=(e.x+e.width)/i,this.y2=(e.y+e.height)/s,this.x3=e.x/i,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}lC.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const t6=new lC;function sx(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}let zt=class Qn extends Ig{constructor(e,n,r,i,s,o,a){if(super(),this.noFrame=!1,n||(this.noFrame=!0,n=new Wt(0,0,1,1)),e instanceof Qn&&(e=e.baseTexture),this.baseTexture=e,this._frame=n,this.trim=i,this.valid=!1,this.destroyed=!1,this._uvs=t6,this.uvMatrix=null,this.orig=r||n,this._rotate=Number(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new Ot(o.x,o.y):new Ot(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=n:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:n}=this.baseTexture;n!=null&&n.url&&Ts[n.url]&&Qn.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Qn.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var i;const e=this._frame.clone(),n=this._frame===this.orig?e:this.orig.clone(),r=new Qn(this.baseTexture,!this.noFrame&&e,n,(i=this.trim)==null?void 0:i.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(r._frame=e),r}updateUvs(){this._uvs===t6&&(this._uvs=new lC),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,n={},r=ht.STRICT_TEXTURE_CACHE){const i=typeof e=="string";let s=null;if(i)s=e;else if(e instanceof Qt){if(!e.cacheId){const a=(n==null?void 0:n.pixiIdPrefix)||"pixiid";e.cacheId=`${a}-${Td()}`,Qt.addToCache(e,e.cacheId)}s=e.cacheId}else{if(!e._pixiId){const a=(n==null?void 0:n.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${Td()}`}s=e._pixiId}let o=Ts[s];if(i&&r&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return!o&&!(e instanceof Qt)?(n.resolution||(n.resolution=Gl(e)),o=new Qn(new Qt(e,n)),o.baseTexture.cacheId=s,Qt.addToCache(o.baseTexture,s),Qn.addToCache(o,s)):!o&&e instanceof Qt&&(o=new Qn(e),Qn.addToCache(o,s)),o}static fromURL(e,n){const r=Object.assign({autoLoad:!1},n==null?void 0:n.resourceOptions),i=Qn.from(e,Object.assign({resourceOptions:r},n),!1),s=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):s.load().then(()=>Promise.resolve(i))}static fromBuffer(e,n,r,i){return new Qn(Qt.fromBuffer(e,n,r,i))}static fromLoader(e,n,r,i){const s=new Qt(e,Object.assign({scaleMode:Qt.defaultOptions.scaleMode,resolution:Gl(n)},i)),{resource:o}=s;o instanceof I3&&(o.url=n);const a=new Qn(s);return r||(r=n),Qt.addToCache(a.baseTexture,r),Qn.addToCache(a,r),r!==n&&(Qt.addToCache(a.baseTexture,n),Qn.addToCache(a,n)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(e,n){n&&(e.textureCacheIds.includes(n)||e.textureCacheIds.push(n),Ts[n]&&Ts[n]!==e&&console.warn(`Texture added to the cache with an id [${n}] that already had an entry`),Ts[n]=e)}static removeFromCache(e){if(typeof e=="string"){const n=Ts[e];if(n){const r=n.textureCacheIds.indexOf(e);return r>-1&&n.textureCacheIds.splice(r,1),delete Ts[e],n}}else if(e!=null&&e.textureCacheIds){for(let n=0;n<e.textureCacheIds.length;++n)Ts[e.textureCacheIds[n]]===e&&delete Ts[e.textureCacheIds[n]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:n,y:r,width:i,height:s}=e,o=n+i>this.baseTexture.width,a=r+s>this.baseTexture.height;if(o||a){const l=o&&a?"and":"or",c=`X: ${n} + ${i} = ${n+i} > ${this.baseTexture.width}`,u=`Y: ${r} + ${s} = ${r+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${c} ${l} ${u}`)}this.valid=i&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return Qn._EMPTY||(Qn._EMPTY=new Qn(new Qt),sx(Qn._EMPTY),sx(Qn._EMPTY.baseTexture)),Qn._EMPTY}static get WHITE(){if(!Qn._WHITE){const e=ht.ADAPTER.createCanvas(16,16),n=e.getContext("2d");e.width=16,e.height=16,n.fillStyle="white",n.fillRect(0,0,16,16),Qn._WHITE=new Qn(Qt.from(e)),sx(Qn._WHITE),sx(Qn._WHITE.baseTexture)}return Qn._WHITE}};class zd extends zt{constructor(e,n){super(e,n),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,n,r=!0){const i=this.baseTexture.resolution,s=Math.round(e*i)/i,o=Math.round(n*i)/i;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,r&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(e){const{baseTexture:n}=this;n.resolution!==e&&(n.setResolution(e),this.resize(n.width,n.height,!1))}static create(e){return new zd(new P3(e))}}class M3{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,n,r=Gr.NONE){const i=new P3(Object.assign({width:e,height:n,resolution:1,multisample:r},this.textureOptions));return new zd(i)}getOptimalTexture(e,n,r=1,i=Gr.NONE){let s;e=Math.max(Math.ceil(e*r-1e-6),1),n=Math.max(Math.ceil(n*r-1e-6),1),!this.enableFullScreen||e!==this._pixelsWidth||n!==this._pixelsHeight?(e=Uy(e),n=Uy(n),s=((e&65535)<<16|n&65535)>>>0,i>1&&(s+=i*4294967296)):s=i>1?-i:-1,this.texturePool[s]||(this.texturePool[s]=[]);let o=this.texturePool[s].pop();return o||(o=this.createTexture(e,n,i)),o.filterPoolKey=s,o.setResolution(r),o}getFilterTexture(e,n,r){const i=this.getOptimalTexture(e.width,e.height,n||e.resolution,r||Gr.NONE);return i.filterFrame=e.filterFrame,i}returnTexture(e){const n=e.filterPoolKey;e.filterFrame=null,this.texturePool[n].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=e!==!1,e)for(const n in this.texturePool){const r=this.texturePool[n];if(r)for(let i=0;i<r.length;i++)r[i].destroy(!0)}this.texturePool={}}setScreenSize(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(const n in this.texturePool){if(!(Number(n)<0))continue;const r=this.texturePool[n];if(r)for(let i=0;i<r.length;i++)r[i].destroy(!0);this.texturePool[n]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}M3.SCREEN_KEY=-1;class dK extends Lg{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class L3 extends Lg{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Kr(this.vertices),this.uvBuffer=new Kr(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,n){let r=0,i=0;return this.uvs[0]=r,this.uvs[1]=i,this.uvs[2]=r+n.width/e.width,this.uvs[3]=i,this.uvs[4]=r+n.width/e.width,this.uvs[5]=i+n.height/e.height,this.uvs[6]=r,this.uvs[7]=i+n.height/e.height,r=n.x,i=n.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+n.width,this.vertices[3]=i,this.vertices[4]=r+n.width,this.vertices[5]=i+n.height,this.vertices[6]=r,this.vertices[7]=i+n.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class hK{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Gr.NONE,this.sourceFrame=new Wt,this.destinationFrame=new Wt,this.bindingSourceFrame=new Wt,this.bindingDestinationFrame=new Wt,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const ox=[new Ot,new Ot,new Ot,new Ot],CP=new Br;class O3{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new M3,this.statePool=[],this.quad=new dK,this.quadUv=new L3,this.tempRect=new Wt,this.activeState={},this.globalUniforms=new oa({outputFrame:new Wt,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,n){const r=this.renderer,i=this.defaultFilterStack,s=this.statePool.pop()||new hK,o=r.renderTexture;let a,l;if(o.current){const _=o.current;a=_.resolution,l=_.multisample}else a=r.resolution,l=r.multisample;let c=n[0].resolution||a,u=n[0].multisample??l,d=n[0].padding,h=n[0].autoFit,f=n[0].legacy??!0;for(let _=1;_<n.length;_++){const y=n[_];c=Math.min(c,y.resolution||a),u=Math.min(u,y.multisample??l),d=this.useMaxPadding?Math.max(d,y.padding):d+y.padding,h=h&&y.autoFit,f=f||(y.legacy??!0)}i.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),i.push(s),s.resolution=c,s.multisample=u,s.legacy=f,s.target=e,s.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),s.sourceFrame.pad(d);const p=this.tempRect.copyFrom(o.sourceFrame);r.projection.transform&&this.transformAABB(CP.copyFrom(r.projection.transform).invert(),p),h?(s.sourceFrame.fit(p),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(p)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:r.resolution,o.sourceFrame,o.destinationFrame,r.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,c,u),s.filters=n,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const m=this.tempRect;m.x=0,m.y=0,m.width=s.sourceFrame.width,m.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=r.projection.transform,r.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,m),r.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,n=e.pop(),r=n.filters;this.activeState=n;const i=this.globalUniforms.uniforms;i.outputFrame=n.sourceFrame,i.resolution=n.resolution;const s=i.inputSize,o=i.inputPixel,a=i.inputClamp;if(s[0]=n.destinationFrame.width,s[1]=n.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*n.resolution),o[1]=Math.round(s[1]*n.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=n.sourceFrame.width*s[2]-.5*o[2],a[3]=n.sourceFrame.height*s[3]-.5*o[3],n.legacy){const c=i.filterArea;c[0]=n.destinationFrame.width,c[1]=n.destinationFrame.height,c[2]=n.sourceFrame.x,c[3]=n.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();const l=e[e.length-1];if(this.renderer.framebuffer.blit(),r.length===1)r[0].apply(this,n.renderTexture,l.renderTexture,Na.BLEND,n),this.returnFilterTexture(n.renderTexture);else{let c=n.renderTexture,u=this.getOptimalFilterTexture(c.width,c.height,n.resolution);u.filterFrame=c.filterFrame;let d=0;for(d=0;d<r.length-1;++d){d===1&&n.multisample>1&&(u=this.getOptimalFilterTexture(c.width,c.height,n.resolution),u.filterFrame=c.filterFrame),r[d].apply(this,c,u,Na.CLEAR,n);const h=c;c=u,u=h}r[d].apply(this,c,l.renderTexture,Na.BLEND,n),d>1&&n.multisample>1&&this.returnFilterTexture(n.renderTexture),this.returnFilterTexture(c),this.returnFilterTexture(u)}n.clear(),this.statePool.push(n)}bindAndClear(e,n=Na.CLEAR){const{renderTexture:r,state:i}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e==null?void 0:e.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,r.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?r.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const s=i.stateId&1||this.forceClear;(n===Na.CLEAR||n===Na.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,n,r,i){const s=this.renderer;s.state.set(e.state),this.bindAndClear(r,i),e.uniforms.uSampler=n,e.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(n._frame,n.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(na.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(na.TRIANGLE_STRIP))}calculateSpriteMatrix(e,n){const{sourceFrame:r,destinationFrame:i}=this.activeState,{orig:s}=n._texture,o=e.set(i.width,0,0,i.height,r.x,r.y),a=n.worldTransform.copyTo(Br.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(n.anchor.x,n.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,n,r=1,i=Gr.NONE){return this.texturePool.getOptimalTexture(e,n,r,i)}getFilterTexture(e,n,r){if(typeof e=="number"){const s=e;e=n,n=s}e=e||this.activeState.renderTexture;const i=this.texturePool.getOptimalTexture(e.width,e.height,n||e.resolution,r||Gr.NONE);return i.filterFrame=e.filterFrame,i}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,n){const r=ox[0],i=ox[1],s=ox[2],o=ox[3];r.set(n.left,n.top),i.set(n.left,n.bottom),s.set(n.right,n.top),o.set(n.right,n.bottom),e.apply(r,r),e.apply(i,i),e.apply(s,s),e.apply(o,o);const a=Math.min(r.x,i.x,s.x,o.x),l=Math.min(r.y,i.y,s.y,o.y),c=Math.max(r.x,i.x,s.x,o.x),u=Math.max(r.y,i.y,s.y,o.y);n.x=a,n.y=l,n.width=c-a,n.height=u-l}roundFrame(e,n,r,i,s){if(!(e.width<=0||e.height<=0||r.width<=0||r.height<=0)){if(s){const{a:o,b:a,c:l,d:c}=s;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(c)>1e-4))return}s=s?CP.copyFrom(s):CP.identity(),s.translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.transformAABB(s,e),e.ceil(n),this.transformAABB(s.invert(),e)}}}O3.extension={type:rt.RendererSystem,name:"filter"};bt.add(O3);class fK{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Gr.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const SIe=new Wt;class k3{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new jw(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Wt,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let n=this.renderer.context.extensions.drawBuffers,r=this.renderer.context.extensions.depthTexture;ht.PREFER_ENV===Fd.WEBGL_LEGACY&&(n=null,r=null),n?e.drawBuffers=i=>n.drawBuffersWEBGL(i):(this.hasMRT=!1,e.drawBuffers=()=>{}),r||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,n,r=0){const{gl:i}=this;if(e){const s=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,i.bindFramebuffer(i.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==r&&(e.dirtyId++,e.dirtyFormat++,s.mipLevel=r),s.dirtyId!==e.dirtyId&&(s.dirtyId=e.dirtyId,s.dirtyFormat!==e.dirtyFormat?(s.dirtyFormat=e.dirtyFormat,s.dirtySize=e.dirtySize,this.updateFramebuffer(e,r)):s.dirtySize!==e.dirtySize&&(s.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let o=0;o<e.colorTextures.length;o++){const a=e.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),n){const o=n.width>>r,a=n.height>>r,l=o/n.width;this.setViewport(n.x*l,n.y*l,o,a)}else{const o=e.width>>r,a=e.height>>r;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),n?this.setViewport(n.x,n.y,n.width,n.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,n,r,i){const s=this.viewport;e=Math.round(e),n=Math.round(n),r=Math.round(r),i=Math.round(i),(s.width!==r||s.height!==i||s.x!==e||s.y!==n)&&(s.x=e,s.y=n,s.width=r,s.height=i,this.gl.viewport(e,n,r,i))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,n,r,i,s=kw.COLOR|kw.DEPTH){const{gl:o}=this;o.clearColor(e,n,r,i),o.clear(s)}initFramebuffer(e){const{gl:n}=this,r=new fK(n.createFramebuffer());return r.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=r,this.managedFramebuffers.push(e),e.disposeRunner.add(this),r}resizeFramebuffer(e){const{gl:n}=this,r=e.glFramebuffers[this.CONTEXT_UID];if(r.stencil){n.bindRenderbuffer(n.RENDERBUFFER,r.stencil);let o;this.renderer.context.webGLVersion===1?o=n.DEPTH_STENCIL:e.depth&&e.stencil?o=n.DEPTH24_STENCIL8:e.depth?o=n.DEPTH_COMPONENT24:o=n.STENCIL_INDEX8,r.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,o,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,o,e.width,e.height)}const i=e.colorTextures;let s=i.length;n.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){const a=i[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),o===0&&r.msaaBuffer&&(n.bindRenderbuffer(n.RENDERBUFFER,r.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,n){const{gl:r}=this,i=e.glFramebuffers[this.CONTEXT_UID],s=e.colorTextures;let o=s.length;r.drawBuffers||(o=Math.min(o,1)),i.multisample>1&&this.canMultisampleFramebuffer(e)?i.msaaBuffer=i.msaaBuffer||r.createRenderbuffer():i.msaaBuffer&&(r.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const c=s[l],u=c.parentTextureArray||c;this.renderer.texture.bind(u,0),l===0&&i.msaaBuffer?(r.bindRenderbuffer(r.RENDERBUFFER,i.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,u._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.RENDERBUFFER,i.msaaBuffer)):(r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+l,c.target,u._glTextures[this.CONTEXT_UID].texture,n),a.push(r.COLOR_ATTACHMENT0+l))}if(a.length>1&&r.drawBuffers(a),e.depthTexture&&this.writeDepthTexture){const l=e.depthTexture;this.renderer.texture.bind(l,0),r.framebufferTexture2D(r.FRAMEBUFFER,r.DEPTH_ATTACHMENT,r.TEXTURE_2D,l._glTextures[this.CONTEXT_UID].texture,n)}if((e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)){i.stencil=i.stencil||r.createRenderbuffer();let l,c;this.renderer.context.webGLVersion===1?(l=r.DEPTH_STENCIL_ATTACHMENT,c=r.DEPTH_STENCIL):e.depth&&e.stencil?(l=r.DEPTH_STENCIL_ATTACHMENT,c=r.DEPTH24_STENCIL8):e.depth?(l=r.DEPTH_ATTACHMENT,c=r.DEPTH_COMPONENT24):(l=r.STENCIL_ATTACHMENT,c=r.STENCIL_INDEX8),r.bindRenderbuffer(r.RENDERBUFFER,i.stencil),i.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,i.multisample,c,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,c,e.width,e.height),r.framebufferRenderbuffer(r.FRAMEBUFFER,l,r.RENDERBUFFER,i.stencil)}else i.stencil&&(r.deleteRenderbuffer(i.stencil),i.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:n}=this;let r=Gr.NONE;if(e<=1||n===null)return r;for(let i=0;i<n.length;i++)if(n[i]<=e){r=n[i];break}return r===1&&(r=Gr.NONE),r}blit(e,n,r){const{current:i,renderer:s,gl:o,CONTEXT_UID:a}=this;if(s.context.webGLVersion!==2||!i)return;const l=i.glFramebuffers[a];if(!l)return;if(!e){if(!l.msaaBuffer)return;const u=i.colorTextures[0];if(!u)return;l.blitFramebuffer||(l.blitFramebuffer=new jw(i.width,i.height),l.blitFramebuffer.addColorTexture(0,u)),e=l.blitFramebuffer,e.colorTextures[0]!==u&&(e.colorTextures[0]=u,e.dirtyId++,e.dirtyFormat++),(e.width!==i.width||e.height!==i.height)&&(e.width=i.width,e.height=i.height,e.dirtyId++,e.dirtySize++)}n||(n=SIe,n.width=i.width,n.height=i.height),r||(r=n);const c=n.width===r.width&&n.height===r.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(n.left,n.top,n.right,n.bottom,r.left,r.top,r.right,r.bottom,o.COLOR_BUFFER_BIT,c?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,n){const r=e.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(!r)return;delete e.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(e);s>=0&&this.managedFramebuffers.splice(s,1),e.disposeRunner.remove(this),n||(i.deleteFramebuffer(r.framebuffer),r.msaaBuffer&&i.deleteRenderbuffer(r.msaaBuffer),r.stencil&&i.deleteRenderbuffer(r.stencil)),r.blitFramebuffer&&this.disposeFramebuffer(r.blitFramebuffer,n)}disposeAll(e){const n=this.managedFramebuffers;this.managedFramebuffers=[];for(let r=0;r<n.length;r++)this.disposeFramebuffer(n[r],e)}forceStencil(){const e=this.current;if(!e)return;const n=e.glFramebuffers[this.CONTEXT_UID];if(!n||n.stencil&&e.stencil)return;e.stencil=!0;const r=e.width,i=e.height,s=this.gl,o=n.stencil=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o);let a,l;this.renderer.context.webGLVersion===1?(a=s.DEPTH_STENCIL_ATTACHMENT,l=s.DEPTH_STENCIL):e.depth?(a=s.DEPTH_STENCIL_ATTACHMENT,l=s.DEPTH24_STENCIL8):(a=s.STENCIL_ATTACHMENT,l=s.STENCIL_INDEX8),n.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,n.multisample,l,r,i):s.renderbufferStorage(s.RENDERBUFFER,l,r,i),s.framebufferRenderbuffer(s.FRAMEBUFFER,a,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Wt}destroy(){this.renderer=null}}k3.extension={type:rt.RendererSystem,name:"framebuffer"};bt.add(k3);const AP={5126:4,5123:2,5121:1};class N3{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,n=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,n.webGLVersion!==2){let r=this.renderer.context.extensions.vertexArrayObject;ht.PREFER_ENV===Fd.WEBGL_LEGACY&&(r=null),r?(e.createVertexArray=()=>r.createVertexArrayOES(),e.bindVertexArray=i=>r.bindVertexArrayOES(i),e.deleteVertexArray=i=>r.deleteVertexArrayOES(i)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(n.webGLVersion!==2){const r=e.getExtension("ANGLE_instanced_arrays");r?(e.vertexAttribDivisor=(i,s)=>r.vertexAttribDivisorANGLE(i,s),e.drawElementsInstanced=(i,s,o,a,l)=>r.drawElementsInstancedANGLE(i,s,o,a,l),e.drawArraysInstanced=(i,s,o,a)=>r.drawArraysInstancedANGLE(i,s,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=n.webGLVersion===2||!!n.extensions.uint32ElementIndex}bind(e,n){n=n||this.renderer.shader.shader;const{gl:r}=this;let i=e.glVertexArrayObjects[this.CONTEXT_UID],s=!1;i||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=i={},s=!0);const o=i[n.program.id]||this.initGeometryVao(e,n,s);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?r.bindVertexArray(o):this.activateVao(e,n.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,n=this.renderer.buffer;for(let r=0;r<e.buffers.length;r++){const i=e.buffers[r];n.update(i)}}checkCompatibility(e,n){const r=e.attributes,i=n.attributeData;for(const s in i)if(!r[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(e,n){const r=e.attributes,i=n.attributeData,s=["g",e.id];for(const o in r)i[o]&&s.push(o,i[o].location);return s.join("-")}initGeometryVao(e,n,r=!0){const i=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=n.program;a.glPrograms[s]||this.renderer.shader.generateProgram(n),this.checkCompatibility(e,a);const l=this.getSignature(e,a),c=e.glVertexArrayObjects[this.CONTEXT_UID];let u=c[l];if(u)return c[a.id]=u,u;const d=e.buffers,h=e.attributes,f={},p={};for(const m in d)f[m]=0,p[m]=0;for(const m in h)!h[m].size&&a.attributeData[m]?h[m].size=a.attributeData[m].size:h[m].size||console.warn(`PIXI Geometry attribute '${m}' size cannot be determined (likely the bound shader does not have the attribute)`),f[h[m].buffer]+=h[m].size*AP[h[m].type];for(const m in h){const _=h[m],y=_.size;_.stride===void 0&&(f[_.buffer]===y*AP[_.type]?_.stride=0:_.stride=f[_.buffer]),_.start===void 0&&(_.start=p[_.buffer],p[_.buffer]+=y*AP[_.type])}u=i.createVertexArray(),i.bindVertexArray(u);for(let m=0;m<d.length;m++){const _=d[m];o.bind(_),r&&_._glBuffers[s].refCount++}return this.activateVao(e,a),c[a.id]=u,c[l]=u,i.bindVertexArray(null),o.unbind(Xa.ARRAY_BUFFER),u}disposeGeometry(e,n){var a;if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const r=e.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,s=e.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(e.disposeRunner.remove(this),!!r){if(o)for(let l=0;l<s.length;l++){const c=s[l]._glBuffers[this.CONTEXT_UID];c&&(c.refCount--,c.refCount===0&&!n&&o.dispose(s[l],n))}if(!n){for(const l in r)if(l[0]==="g"){const c=r[l];this._activeVao===c&&this.unbind(),i.deleteVertexArray(c)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const n=Object.keys(this.managedGeometries);for(let r=0;r<n.length;r++)this.disposeGeometry(this.managedGeometries[n[r]],e)}activateVao(e,n){const r=this.gl,i=this.CONTEXT_UID,s=this.renderer.buffer,o=e.buffers,a=e.attributes;e.indexBuffer&&s.bind(e.indexBuffer);let l=null;for(const c in a){const u=a[c],d=o[u.buffer],h=d._glBuffers[i];if(n.attributeData[c]){l!==h&&(s.bind(d),l=h);const f=n.attributeData[c].location;if(r.enableVertexAttribArray(f),r.vertexAttribPointer(f,u.size,u.type||r.FLOAT,u.normalized,u.stride,u.start),u.instance)if(this.hasInstance)r.vertexAttribDivisor(f,u.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,n,r,i){const{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(e,n||o.indexBuffer.data.length,l,(r||0)*a,i||1):s.drawElements(e,n||o.indexBuffer.data.length,l,(r||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(e,r,n||o.getSize(),i||1):s.drawArrays(e,r,n||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}N3.extension={type:rt.RendererSystem,name:"geometry"};bt.add(N3);const n6=new Br;class cC{constructor(e,n){this._texture=e,this.mapCoord=new Br,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof n>"u"?.5:n,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,n){n===void 0&&(n=e);const r=this.mapCoord;for(let i=0;i<e.length;i+=2){const s=e[i],o=e[i+1];n[i]=s*r.a+o*r.c+r.tx,n[i+1]=s*r.b+o*r.d+r.ty}return n}update(e){const n=this._texture;if(!n||!n.valid||!e&&this._textureID===n._updateID)return!1;this._textureID=n._updateID,this._updateID++;const r=n._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);const i=n.orig,s=n.trim;s&&(n6.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(n6));const o=n.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,c=this.clampOffset;return a[0]=(n._frame.x+l+c)/o.width,a[1]=(n._frame.y+l+c)/o.height,a[2]=(n._frame.x+n._frame.width-l+c)/o.width,a[3]=(n._frame.y+n._frame.height-l+c)/o.height,this.uClampOffset[0]=c/o.realWidth,this.uClampOffset[1]=c/o.realHeight,this.isSimple=n._frame.width===o.width&&n._frame.height===o.height&&n.rotate===0,!0}}var CIe=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,AIe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class pK extends hs{constructor(e,n,r){let i=null;typeof e!="string"&&n===void 0&&r===void 0&&(i=e,e=void 0,n=void 0,r=void 0),super(e||AIe,n||CIe,r),this.maskSprite=i,this.maskMatrix=new Br}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,n,r,i){const s=this._maskSprite,o=s._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new cC(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,n,r,i))}}class mK{constructor(e=null){this.type=Yr.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=hs.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=Yr.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class D3{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,n){let r=n;if(!r.isMaskData){const s=this.maskDataPool.pop()||new mK;s.pooled=!0,s.maskObject=n,r=s}const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(r.copyCountersOrReset(i),r._colorMask=i?i._colorMask:15,r.autoDetect&&this.detect(r),r._target=e,r.type!==Yr.SPRITE&&this.maskStack.push(r),r.enabled)switch(r.type){case Yr.SCISSOR:this.renderer.scissor.push(r);break;case Yr.STENCIL:this.renderer.stencil.push(r);break;case Yr.SPRITE:r.copyCountersOrReset(null),this.pushSpriteMask(r);break;case Yr.COLOR:this.pushColorMask(r);break}r.type===Yr.SPRITE&&this.maskStack.push(r)}pop(e){const n=this.maskStack.pop();if(!(!n||n._target!==e)){if(n.enabled)switch(n.type){case Yr.SCISSOR:this.renderer.scissor.pop(n);break;case Yr.STENCIL:this.renderer.stencil.pop(n.maskObject);break;case Yr.SPRITE:this.popSpriteMask(n);break;case Yr.COLOR:this.popColorMask(n);break}if(n.reset(),n.pooled&&this.maskDataPool.push(n),this.maskStack.length!==0){const r=this.maskStack[this.maskStack.length-1];r.type===Yr.SPRITE&&r._filters&&(r._filters[0].maskSprite=r.maskObject)}}}detect(e){const n=e.maskObject;n?n.isSprite?e.type=Yr.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=Yr.SCISSOR:e.type=Yr.STENCIL:e.type=Yr.COLOR}pushSpriteMask(e){const{maskObject:n}=e,r=e._target;let i=e._filters;i||(i=this.alphaMaskPool[this.alphaMaskIndex],i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new pK])),i[0].resolution=e.resolution,i[0].multisample=e.multisample,i[0].maskSprite=n;const s=r.filterArea;r.filterArea=n.getBounds(!0),this.renderer.filter.push(r,i),r.filterArea=s,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const n=e._colorMask,r=e._colorMask=n&e.colorMask;r!==n&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)}popColorMask(e){const n=e._colorMask,r=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;r!==n&&this.renderer.gl.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)}destroy(){this.renderer=null}}D3.extension={type:rt.RendererSystem,name:"mask"};bt.add(D3);class gK{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:n}=this.renderer,r=this.getStackLength();this.maskStack=e;const i=this.getStackLength();i!==r&&(i===0?n.disable(this.glConst):(n.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const r6=new Br,i6=[],vK=class pE extends gK{constructor(e){super(e),this.glConst=ht.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const n=e._scissorRect,{maskObject:r}=e,{renderer:i}=this,s=i.renderTexture,o=r.getBounds(!0,i6.pop()??new Wt);this.roundFrameToPixels(o,s.current?s.current.resolution:i.resolution,s.sourceFrame,s.destinationFrame,i.projection.transform),n&&o.fit(n),e._scissorRectLocal=o}static isMatrixRotated(e){if(!e)return!1;const{a:n,b:r,c:i,d:s}=e;return(Math.abs(r)>1e-4||Math.abs(i)>1e-4)&&(Math.abs(n)>1e-4||Math.abs(s)>1e-4)}testScissor(e){const{maskObject:n}=e;if(!n.isFastRect||!n.isFastRect()||pE.isMatrixRotated(n.worldTransform)||pE.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const r=e._scissorRectLocal;return r.width>0&&r.height>0}roundFrameToPixels(e,n,r,i,s){pE.isMatrixRotated(s)||(s=s?r6.copyFrom(s):r6.identity(),s.translate(-r.x,-r.y).scale(i.width/r.width,i.height/r.height).translate(i.x,i.y),this.renderer.filter.transformAABB(s,e),e.fit(i),e.x=Math.round(e.x*n),e.y=Math.round(e.y*n),e.width=Math.round(e.width*n),e.height=Math.round(e.height*n))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:n}=this.renderer;e._scissorRect||n.enable(n.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:n}=this.renderer;e&&i6.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():n.disable(n.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let n;this.renderer.renderTexture.current?n=e.y:n=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,n,e.width,e.height)}};vK.extension={type:rt.RendererSystem,name:"scissor"};let yK=vK;bt.add(yK);class B3 extends gK{constructor(e){super(e),this.glConst=ht.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const n=e.maskObject,{gl:r}=this.renderer,i=e._stencilCounter;i===0&&(this.renderer.framebuffer.forceStencil(),r.clearStencil(0),r.clear(r.STENCIL_BUFFER_BIT),r.enable(r.STENCIL_TEST)),e._stencilCounter++;const s=e._colorMask;s!==0&&(e._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilFunc(r.EQUAL,i,4294967295),r.stencilOp(r.KEEP,r.KEEP,r.INCR),n.renderable=!0,n.render(this.renderer),this.renderer.batch.flush(),n.renderable=!1,s!==0&&(e._colorMask=s,r.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}pop(e){const n=this.renderer.gl;if(this.getStackLength()===0)n.disable(n.STENCIL_TEST);else{const r=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,i=r?r._colorMask:15;i!==0&&(r._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilOp(n.KEEP,n.KEEP,n.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,i!==0&&(r._colorMask=i,n.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}B3.extension={type:rt.RendererSystem,name:"stencil"};bt.add(B3);class F3{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return Ht("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract}},prepare:{enumerable:!1,get(){return Ht("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare}},interaction:{enumerable:!1,get(){return Ht("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events}}})}init(){const e=this.rendererPlugins;for(const n in e)this.plugins[n]=new e[n](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}F3.extension={type:[rt.RendererSystem,rt.CanvasRendererSystem],name:"_plugin"};bt.add(F3);class U3{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Br,this.transform=null}update(e,n,r,i){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=n||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,r,i),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(e,n,r,i){const s=this.projectionMatrix,o=i?-1:1;s.identity(),s.a=1/n.width*2,s.d=o*(1/n.height*2),s.tx=-1-n.x*s.a,s.ty=-o-n.y*s.d}setTransform(e){}destroy(){this.renderer=null}}U3.extension={type:rt.RendererSystem,name:"projection"};bt.add(U3);const RIe=new j1,s6=new Wt;class z3{constructor(e){this.renderer=e,this._tempMatrix=new Br}generateTexture(e,n){const{region:r,...i}=n||{},s=(r==null?void 0:r.copyTo(s6))||e.getLocalBounds(s6,!0),o=i.resolution||this.renderer.resolution;s.width=Math.max(s.width,1/o),s.height=Math.max(s.height,1/o),i.width=s.width,i.height=s.height,i.resolution=o,i.multisample??(i.multisample=this.renderer.multisample);const a=zd.create(i);this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const l=e.transform;return e.transform=RIe,this.renderer.render(e,{renderTexture:a,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=l,a}destroy(){}}z3.extension={type:[rt.RendererSystem,rt.CanvasRendererSystem],name:"textureGenerator"};bt.add(z3);const ih=new Wt,I0=new Wt;class $3{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Wt,this.destinationFrame=new Wt,this.viewportFrame=new Wt}contextChange(){var n;const e=(n=this.renderer)==null?void 0:n.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,n,r){const i=this.renderer;this.current=e;let s,o,a;e?(s=e.baseTexture,a=s.resolution,n||(ih.width=e.frame.width,ih.height=e.frame.height,n=ih),r||(I0.x=e.frame.x,I0.y=e.frame.y,I0.width=n.width,I0.height=n.height,r=I0),o=s.framebuffer):(a=i.resolution,n||(ih.width=i._view.screen.width,ih.height=i._view.screen.height,n=ih),r||(r=ih,r.width=n.width,r.height=n.height));const l=this.viewportFrame;l.x=r.x*a,l.y=r.y*a,l.width=r.width*a,l.height=r.height*a,e||(l.y=i.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(r,n,a,!o),e?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(n),this.destinationFrame.copyFrom(r)}clear(e,n){const r=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,i=Tn.shared.setValue(e||r);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&i.premultiply(i.alpha);const s=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=s.width!==o.width||s.height!==o.height;if(a){let{x:l,y:c,width:u,height:d}=this.viewportFrame;l=Math.round(l),c=Math.round(c),u=Math.round(u),d=Math.round(d),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,c,u,d)}this.renderer.framebuffer.clear(i.red,i.green,i.blue,i.alpha,n),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}$3.extension={type:rt.RendererSystem,name:"renderTexture"};bt.add($3);class PIe{}class _K{constructor(e,n){this.program=e,this.uniformData=n,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function IIe(t,e){const n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const s=e.getActiveAttrib(t,i);if(s.name.startsWith("gl_"))continue;const o=aK(e,s.type),a={type:o,name:s.name,size:oK(o),location:e.getAttribLocation(t,s.name)};n[s.name]=a}return n}function MIe(t,e){const n={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<r;i++){const s=e.getActiveUniform(t,i),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),l=aK(e,s.type);n[o]={name:o,index:i,type:l,size:s.size,isArray:a,value:rK(l,s.size)}}return n}function bK(t,e){var a;const n=q8(t,t.VERTEX_SHADER,e.vertexSrc),r=q8(t,t.FRAGMENT_SHADER,e.fragmentSrc),i=t.createProgram();t.attachShader(i,n),t.attachShader(i,r);const s=(a=e.extra)==null?void 0:a.transformFeedbackVaryings;if(s&&(typeof t.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):t.transformFeedbackVaryings(i,s.names,s.bufferMode==="separate"?t.SEPARATE_ATTRIBS:t.INTERLEAVED_ATTRIBS)),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||mIe(t,i,n,r),e.attributeData=IIe(i,t),e.uniformData=MIe(i,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const l=Object.keys(e.attributeData);l.sort((c,u)=>c>u?1:-1);for(let c=0;c<l.length;c++)e.attributeData[l[c]].location=c,t.bindAttribLocation(i,c,l[c]);t.linkProgram(i)}t.deleteShader(n),t.deleteShader(r);const o={};for(const l in e.uniformData){const c=e.uniformData[l];o[l]={location:t.getUniformLocation(i,l),value:rK(c.type,c.size)}}return new _K(i,o)}function LIe(t,e,n,r,i){n.buffer.update(i)}const OIe={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},xK={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function EK(t){const e=t.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let n=0,r=0,i=0;for(let s=0;s<e.length;s++){const o=e[s];if(n=xK[o.data.type],o.data.size>1&&(n=Math.max(n,16)*o.data.size),o.dataLen=n,r%n!==0&&r<16){const a=r%n%16;r+=a,i+=a}r+n>16?(i=Math.ceil(i/16)*16,o.offset=i,i+=n,r=n):(o.offset=i,r+=n,i+=n)}return i=Math.ceil(i/16)*16,{uboElements:e,size:i}}function wK(t,e){const n=[];for(const r in t)e[r]&&n.push(e[r]);return n.sort((r,i)=>r.index-i.index),n}function TK(t,e){if(!t.autoManage)return{size:0,syncFunc:LIe};const n=wK(t.uniforms,e),{uboElements:r,size:i}=EK(n),s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<r.length;o++){const a=r[o],l=t.uniforms[a.data.name],c=a.data.name;let u=!1;for(let d=0;d<Xh.length;d++){const h=Xh[d];if(h.codeUbo&&h.test(a.data,l)){s.push(`offset = ${a.offset/4};`,Xh[d].codeUbo(a.data.name,l)),u=!0;break}}if(!u)if(a.data.size>1){const d=oK(a.data.type),h=Math.max(xK[a.data.type]/16,1),f=d/h,p=(4-f%4)%4;s.push(`
                cv = ud.${c}.value;
                v = uv.${c};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*h}; i++)
                {
                    for(var j = 0; j < ${f}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${p};
                }

                `)}else{const d=OIe[a.data.type];s.push(`
                cv = ud.${c}.value;
                v = uv.${c};
                offset = ${a.offset/4};
                ${d};
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}let kIe=0;const ax={textureCount:0,uboCount:0};class j3{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=kIe++}systemCheck(){if(!lK())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,n){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const r=e.program,i=r.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==r&&(this.program=r,this.gl.useProgram(i.program)),n||(ax.textureCount=0,ax.uboCount=0,this.syncUniformGroup(e.uniformGroup,ax)),i}setUniforms(e){const n=this.shader.program,r=n.glPrograms[this.renderer.CONTEXT_UID];n.syncUniforms(r.uniformData,e,this.renderer)}syncUniformGroup(e,n){const r=this.getGlProgram();(!e.static||e.dirtyId!==r.uniformDirtyGroups[e.id])&&(r.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,r,n))}syncUniforms(e,n,r){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(n.uniformData,e.uniforms,this.renderer,r)}createSyncGroups(e){const n=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[n]||(this.cache[n]=fIe(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[n],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,n){const r=this.getGlProgram();if(!e.static||e.dirtyId!==0||!r.uniformGroups[e.id]){e.dirtyId=0;const i=r.uniformGroups[e.id]||this.createSyncBufferGroup(e,r,n);e.buffer.update(),i(r.uniformData,e.uniforms,this.renderer,ax,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,r.uniformBufferBindings[n])}createSyncBufferGroup(e,n,r){const{gl:i}=this.renderer;this.renderer.buffer.bind(e.buffer);const s=this.gl.getUniformBlockIndex(n.program,r);n.uniformBufferBindings[r]=this.shader.uniformBindCount,i.uniformBlockBinding(n.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(e,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=TK(e,this.shader.program.uniformData)),e.autoManage){const l=new Float32Array(a.size/4);e.buffer.update(l)}return n.uniformGroups[e.id]=a.syncFunc,n.uniformGroups[e.id]}getSignature(e,n,r){const i=e.uniforms,s=[`${r}-`];for(const o in i)s.push(o),n[o]&&s.push(n[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const n=this.gl,r=e.program,i=bK(n,r);return r.glPrograms[this.renderer.CONTEXT_UID]=i,i}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}j3.extension={type:rt.RendererSystem,name:"shader"};bt.add(j3);class Gy{constructor(e){this.renderer=e}run(e){const{renderer:n}=this;n.runners.init.emit(n.options),e.hello&&console.log(`PixiJS 7.4.0 - ${n.rendererLogId} - https://pixijs.com`),n.resize(n.screen.width,n.screen.height)}destroy(){}}Gy.defaultOptions={hello:!1},Gy.extension={type:[rt.RendererSystem,rt.CanvasRendererSystem],name:"startup"};bt.add(Gy);function NIe(t,e=[]){return e[Ft.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ft.ADD]=[t.ONE,t.ONE],e[Ft.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ft.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ft.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ft.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ft.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ft.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ft.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ft.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ft.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ft.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ft.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ft.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ft.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ft.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ft.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ft.NONE]=[0,0],e[Ft.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ft.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[Ft.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[Ft.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[Ft.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[Ft.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[Ft.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[Ft.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[Ft.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[Ft.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[Ft.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[Ft.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}const DIe=0,BIe=1,FIe=2,UIe=3,zIe=4,$Ie=5,SK=class sL{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=Ft.NONE,this._blendEq=!1,this.map=[],this.map[DIe]=this.setBlend,this.map[BIe]=this.setOffset,this.map[FIe]=this.setCullFace,this.map[UIe]=this.setDepthTest,this.map[zIe]=this.setFrontFace,this.map[$Ie]=this.setDepthMask,this.checks=[],this.defaultState=new el,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=NIe(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let n=this.stateId^e.data,r=0;for(;n;)n&1&&this.map[r].call(this,!!(e.data&1<<r)),n=n>>1,r++;this.stateId=e.data}for(let n=0;n<this.checks.length;n++)this.checks[n](this,e)}forceState(e){e=e||this.defaultState;for(let n=0;n<this.map.length;n++)this.map[n].call(this,!!(e.data&1<<n));for(let n=0;n<this.checks.length;n++)this.checks[n](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(sL.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(sL.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const n=this.blendModes[e],r=this.gl;n.length===2?r.blendFunc(n[0],n[1]):r.blendFuncSeparate(n[0],n[1],n[2],n[3]),n.length===6?(this._blendEq=!0,r.blendEquationSeparate(n[4],n[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}setPolygonOffset(e,n){this.gl.polygonOffset(e,n)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,n){const r=this.checks.indexOf(e);n&&r===-1?this.checks.push(e):!n&&r!==-1&&this.checks.splice(r,1)}static checkBlendMode(e,n){e.setBlendMode(n.blendMode)}static checkPolygonOffset(e,n){e.setPolygonOffset(1,n.polygonOffset)}destroy(){this.gl=null}};SK.extension={type:rt.RendererSystem,name:"state"};let CK=SK;bt.add(CK);class AK extends Ig{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const n=(e.priority??[]).filter(i=>e.systems[i]),r=[...n,...Object.keys(e.systems).filter(i=>!n.includes(i))];for(const i of r)this.addSystem(e.systems[i],i)}addRunners(...e){e.forEach(n=>{this.runners[n]=new Eo(n)})}addSystem(e,n){const r=new e(this);if(this[n])throw new Error(`Whoops! The name "${n}" is already in use`);this[n]=r,this._systemsHash[n]=r;for(const i in this.runners)this.runners[i].add(r);return this}emitWithCustomOptions(e,n){const r=Object.keys(this._systemsHash);e.items.forEach(i=>{const s=r.find(o=>this._systemsHash[o]===i);i[e.name](n[s])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const sv=class mE{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=mE.defaultMaxIdle,this.checkCountMax=mE.defaultCheckCountMax,this.mode=mE.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==sC.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,n=e.managedTextures;let r=!1;for(let i=0;i<n.length;i++){const s=n[i];s.resource&&this.count-s.touched>this.maxIdle&&(e.destroyTexture(s,!0),n[i]=null,r=!0)}if(r){let i=0;for(let s=0;s<n.length;s++)n[s]!==null&&(n[i++]=n[s]);n.length=i}}unload(e){const n=this.renderer.texture,r=e._texture;r&&!r.framebuffer&&n.destroyTexture(r);for(let i=e.children.length-1;i>=0;i--)this.unload(e.children[i])}destroy(){this.renderer=null}};sv.defaultMode=sC.AUTO,sv.defaultMaxIdle=60*60,sv.defaultCheckCountMax=60*10,sv.extension={type:rt.RendererSystem,name:"textureGC"};let ku=sv;bt.add(ku);class gE{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=At.UNSIGNED_BYTE,this.internalFormat=Ze.RGBA,this.samplerType=0}}function jIe(t){let e;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?e={[t.RGB]:dt.FLOAT,[t.RGBA]:dt.FLOAT,[t.ALPHA]:dt.FLOAT,[t.LUMINANCE]:dt.FLOAT,[t.LUMINANCE_ALPHA]:dt.FLOAT,[t.R8]:dt.FLOAT,[t.R8_SNORM]:dt.FLOAT,[t.RG8]:dt.FLOAT,[t.RG8_SNORM]:dt.FLOAT,[t.RGB8]:dt.FLOAT,[t.RGB8_SNORM]:dt.FLOAT,[t.RGB565]:dt.FLOAT,[t.RGBA4]:dt.FLOAT,[t.RGB5_A1]:dt.FLOAT,[t.RGBA8]:dt.FLOAT,[t.RGBA8_SNORM]:dt.FLOAT,[t.RGB10_A2]:dt.FLOAT,[t.RGB10_A2UI]:dt.FLOAT,[t.SRGB8]:dt.FLOAT,[t.SRGB8_ALPHA8]:dt.FLOAT,[t.R16F]:dt.FLOAT,[t.RG16F]:dt.FLOAT,[t.RGB16F]:dt.FLOAT,[t.RGBA16F]:dt.FLOAT,[t.R32F]:dt.FLOAT,[t.RG32F]:dt.FLOAT,[t.RGB32F]:dt.FLOAT,[t.RGBA32F]:dt.FLOAT,[t.R11F_G11F_B10F]:dt.FLOAT,[t.RGB9_E5]:dt.FLOAT,[t.R8I]:dt.INT,[t.R8UI]:dt.UINT,[t.R16I]:dt.INT,[t.R16UI]:dt.UINT,[t.R32I]:dt.INT,[t.R32UI]:dt.UINT,[t.RG8I]:dt.INT,[t.RG8UI]:dt.UINT,[t.RG16I]:dt.INT,[t.RG16UI]:dt.UINT,[t.RG32I]:dt.INT,[t.RG32UI]:dt.UINT,[t.RGB8I]:dt.INT,[t.RGB8UI]:dt.UINT,[t.RGB16I]:dt.INT,[t.RGB16UI]:dt.UINT,[t.RGB32I]:dt.INT,[t.RGB32UI]:dt.UINT,[t.RGBA8I]:dt.INT,[t.RGBA8UI]:dt.UINT,[t.RGBA16I]:dt.INT,[t.RGBA16UI]:dt.UINT,[t.RGBA32I]:dt.INT,[t.RGBA32UI]:dt.UINT,[t.DEPTH_COMPONENT16]:dt.FLOAT,[t.DEPTH_COMPONENT24]:dt.FLOAT,[t.DEPTH_COMPONENT32F]:dt.FLOAT,[t.DEPTH_STENCIL]:dt.FLOAT,[t.DEPTH24_STENCIL8]:dt.FLOAT,[t.DEPTH32F_STENCIL8]:dt.FLOAT}:e={[t.RGB]:dt.FLOAT,[t.RGBA]:dt.FLOAT,[t.ALPHA]:dt.FLOAT,[t.LUMINANCE]:dt.FLOAT,[t.LUMINANCE_ALPHA]:dt.FLOAT,[t.DEPTH_STENCIL]:dt.FLOAT},e}function GIe(t){let e;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?e={[At.UNSIGNED_BYTE]:{[Ze.RGBA]:t.RGBA8,[Ze.RGB]:t.RGB8,[Ze.RG]:t.RG8,[Ze.RED]:t.R8,[Ze.RGBA_INTEGER]:t.RGBA8UI,[Ze.RGB_INTEGER]:t.RGB8UI,[Ze.RG_INTEGER]:t.RG8UI,[Ze.RED_INTEGER]:t.R8UI,[Ze.ALPHA]:t.ALPHA,[Ze.LUMINANCE]:t.LUMINANCE,[Ze.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[At.BYTE]:{[Ze.RGBA]:t.RGBA8_SNORM,[Ze.RGB]:t.RGB8_SNORM,[Ze.RG]:t.RG8_SNORM,[Ze.RED]:t.R8_SNORM,[Ze.RGBA_INTEGER]:t.RGBA8I,[Ze.RGB_INTEGER]:t.RGB8I,[Ze.RG_INTEGER]:t.RG8I,[Ze.RED_INTEGER]:t.R8I},[At.UNSIGNED_SHORT]:{[Ze.RGBA_INTEGER]:t.RGBA16UI,[Ze.RGB_INTEGER]:t.RGB16UI,[Ze.RG_INTEGER]:t.RG16UI,[Ze.RED_INTEGER]:t.R16UI,[Ze.DEPTH_COMPONENT]:t.DEPTH_COMPONENT16},[At.SHORT]:{[Ze.RGBA_INTEGER]:t.RGBA16I,[Ze.RGB_INTEGER]:t.RGB16I,[Ze.RG_INTEGER]:t.RG16I,[Ze.RED_INTEGER]:t.R16I},[At.UNSIGNED_INT]:{[Ze.RGBA_INTEGER]:t.RGBA32UI,[Ze.RGB_INTEGER]:t.RGB32UI,[Ze.RG_INTEGER]:t.RG32UI,[Ze.RED_INTEGER]:t.R32UI,[Ze.DEPTH_COMPONENT]:t.DEPTH_COMPONENT24},[At.INT]:{[Ze.RGBA_INTEGER]:t.RGBA32I,[Ze.RGB_INTEGER]:t.RGB32I,[Ze.RG_INTEGER]:t.RG32I,[Ze.RED_INTEGER]:t.R32I},[At.FLOAT]:{[Ze.RGBA]:t.RGBA32F,[Ze.RGB]:t.RGB32F,[Ze.RG]:t.RG32F,[Ze.RED]:t.R32F,[Ze.DEPTH_COMPONENT]:t.DEPTH_COMPONENT32F},[At.HALF_FLOAT]:{[Ze.RGBA]:t.RGBA16F,[Ze.RGB]:t.RGB16F,[Ze.RG]:t.RG16F,[Ze.RED]:t.R16F},[At.UNSIGNED_SHORT_5_6_5]:{[Ze.RGB]:t.RGB565},[At.UNSIGNED_SHORT_4_4_4_4]:{[Ze.RGBA]:t.RGBA4},[At.UNSIGNED_SHORT_5_5_5_1]:{[Ze.RGBA]:t.RGB5_A1},[At.UNSIGNED_INT_2_10_10_10_REV]:{[Ze.RGBA]:t.RGB10_A2,[Ze.RGBA_INTEGER]:t.RGB10_A2UI},[At.UNSIGNED_INT_10F_11F_11F_REV]:{[Ze.RGB]:t.R11F_G11F_B10F},[At.UNSIGNED_INT_5_9_9_9_REV]:{[Ze.RGB]:t.RGB9_E5},[At.UNSIGNED_INT_24_8]:{[Ze.DEPTH_STENCIL]:t.DEPTH24_STENCIL8},[At.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[Ze.DEPTH_STENCIL]:t.DEPTH32F_STENCIL8}}:e={[At.UNSIGNED_BYTE]:{[Ze.RGBA]:t.RGBA,[Ze.RGB]:t.RGB,[Ze.ALPHA]:t.ALPHA,[Ze.LUMINANCE]:t.LUMINANCE,[Ze.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[At.UNSIGNED_SHORT_5_6_5]:{[Ze.RGB]:t.RGB},[At.UNSIGNED_SHORT_4_4_4_4]:{[Ze.RGBA]:t.RGBA},[At.UNSIGNED_SHORT_5_5_5_1]:{[Ze.RGBA]:t.RGBA}},e}class G3{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new Qt,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=GIe(e),this.samplerTypes=jIe(e);const n=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=n;for(let i=0;i<n;i++)this.boundTextures[i]=null;this.emptyTextures={};const r=new gE(e.createTexture());e.bindTexture(e.TEXTURE_2D,r.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=r,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new gE(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let i=0;i<6;i++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let i=0;i<this.boundTextures.length;i++)this.bind(null,i)}bind(e,n=0){const{gl:r}=this;if(e=e==null?void 0:e.castToBaseTexture(),(e==null?void 0:e.valid)&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const i=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[n]!==e&&(this.currentLocation!==n&&(this.currentLocation=n,r.activeTexture(r.TEXTURE0+n)),r.bindTexture(e.target,i.texture)),i.dirtyId!==e.dirtyId?(this.currentLocation!==n&&(this.currentLocation=n,r.activeTexture(r.TEXTURE0+n)),this.updateTexture(e)):i.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[n]=e}else this.currentLocation!==n&&(this.currentLocation=n,r.activeTexture(r.TEXTURE0+n)),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[r.TEXTURE_2D].texture),this.boundTextures[n]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:n,boundTextures:r}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let i=0;i<r.length;i++)r[i]===this.unknownTexture&&this.bind(null,i)}for(let i=0;i<r.length;i++)r[i]===e&&(this.currentLocation!==i&&(n.activeTexture(n.TEXTURE0+i),this.currentLocation=i),n.bindTexture(e.target,this.emptyTextures[e.target].texture),r[i]=null)}ensureSamplerType(e){const{boundTextures:n,hasIntegerTextures:r,CONTEXT_UID:i}=this;if(r)for(let s=e-1;s>=0;--s){const o=n[s];o&&o._glTextures[i].samplerType!==dt.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(e){const n=new gE(this.gl.createTexture());return n.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=n,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),n}initTextureType(e,n){var r;n.internalFormat=((r=this.internalFormats[e.type])==null?void 0:r[e.format])??e.format,n.samplerType=this.samplerTypes[n.internalFormat]??dt.FLOAT,this.webGLVersion===2&&e.type===At.HALF_FLOAT?n.type=this.gl.HALF_FLOAT:n.type=e.type}updateTexture(e){var i;const n=e._glTextures[this.CONTEXT_UID];if(!n)return;const r=this.renderer;if(this.initTextureType(e,n),(i=e.resource)==null?void 0:i.upload(r,e,n))n.samplerType!==dt.FLOAT&&(this.hasIntegerTextures=!0);else{const s=e.realWidth,o=e.realHeight,a=r.gl;(n.width!==s||n.height!==o||n.dirtyId<0)&&(n.width=s,n.height=o,a.texImage2D(e.target,0,n.internalFormat,s,o,0,e.format,n.type,null))}e.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(e),n.dirtyId=e.dirtyId}destroyTexture(e,n){const{gl:r}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),r.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!n)){const i=this.managedTextures.indexOf(e);i!==-1&&Wh(this.managedTextures,i,1)}}updateTextureStyle(e){var r;const n=e._glTextures[this.CONTEXT_UID];n&&((e.mipmap===Qa.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?n.mipmap=!1:n.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?n.wrapMode=Ul.CLAMP:n.wrapMode=e.wrapMode,(r=e.resource)!=null&&r.style(this.renderer,e,n)||this.setStyle(e,n),n.dirtyStyleId=e.dirtyStyleId)}setStyle(e,n){const r=this.gl;if(n.mipmap&&e.mipmap!==Qa.ON_MANUAL&&r.generateMipmap(e.target),r.texParameteri(e.target,r.TEXTURE_WRAP_S,n.wrapMode),r.texParameteri(e.target,r.TEXTURE_WRAP_T,n.wrapMode),n.mipmap){r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===Ml.LINEAR?r.LINEAR_MIPMAP_LINEAR:r.NEAREST_MIPMAP_NEAREST);const i=this.renderer.context.extensions.anisotropicFiltering;if(i&&e.anisotropicLevel>0&&e.scaleMode===Ml.LINEAR){const s=Math.min(e.anisotropicLevel,r.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));r.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else r.texParameteri(e.target,r.TEXTURE_MIN_FILTER,e.scaleMode===Ml.LINEAR?r.LINEAR:r.NEAREST);r.texParameteri(e.target,r.TEXTURE_MAG_FILTER,e.scaleMode===Ml.LINEAR?r.LINEAR:r.NEAREST)}destroy(){this.renderer=null}}G3.extension={type:rt.RendererSystem,name:"texture"};bt.add(G3);class H3{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:n,CONTEXT_UID:r}=this,i=e._glTransformFeedbacks[r]||this.createGLTransformFeedback(e);n.bindTransformFeedback(n.TRANSFORM_FEEDBACK,i)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,n){const{gl:r,renderer:i}=this;n&&i.shader.bind(n),r.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:n,renderer:r,CONTEXT_UID:i}=this,s=n.createTransformFeedback();e._glTransformFeedbacks[i]=s,n.bindTransformFeedback(n.TRANSFORM_FEEDBACK,s);for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];a&&(r.buffer.update(a),a._glBuffers[i].refCount++,n.bindBufferBase(n.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[i].buffer||null))}return n.bindTransformFeedback(n.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),s}disposeTransformFeedback(e,n){const r=e._glTransformFeedbacks[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!n&&s.dispose(a,n))}r&&(n||i.deleteTransformFeedback(r),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}H3.extension={type:rt.RendererSystem,name:"transformFeedback"};bt.add(H3);class Hy{constructor(e){this.renderer=e}init(e){this.screen=new Wt(0,0,e.width,e.height),this.element=e.view||ht.ADAPTER.createCanvas(),this.resolution=e.resolution||ht.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,n){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(n*this.resolution);const r=this.element.width/this.resolution,i=this.element.height/this.resolution;this.screen.width=r,this.screen.height=i,this.autoDensity&&(this.element.style.width=`${r}px`,this.element.style.height=`${i}px`),this.renderer.emit("resize",r,i),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){var n;e&&((n=this.element.parentNode)==null||n.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}Hy.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},Hy.extension={type:[rt.RendererSystem,rt.CanvasRendererSystem],name:"_view"};bt.add(Hy);ht.PREFER_ENV=Fd.WEBGL2;ht.STRICT_TEXTURE_CACHE=!1;ht.RENDER_OPTIONS={...jy.defaultOptions,...$y.defaultOptions,...Hy.defaultOptions,...Gy.defaultOptions};Object.defineProperties(ht,{WRAP_MODE:{get(){return Qt.defaultOptions.wrapMode},set(t){Ht("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),Qt.defaultOptions.wrapMode=t}},SCALE_MODE:{get(){return Qt.defaultOptions.scaleMode},set(t){Ht("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),Qt.defaultOptions.scaleMode=t}},MIPMAP_TEXTURES:{get(){return Qt.defaultOptions.mipmap},set(t){Ht("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),Qt.defaultOptions.mipmap=t}},ANISOTROPIC_LEVEL:{get(){return Qt.defaultOptions.anisotropicLevel},set(t){Ht("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),Qt.defaultOptions.anisotropicLevel=t}},FILTER_RESOLUTION:{get(){return Ht("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),hs.defaultResolution},set(t){hs.defaultResolution=t}},FILTER_MULTISAMPLE:{get(){return Ht("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),hs.defaultMultisample},set(t){hs.defaultMultisample=t}},SPRITE_MAX_TEXTURES:{get(){return Ou.defaultMaxTextures},set(t){Ht("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Ou.defaultMaxTextures=t}},SPRITE_BATCH_SIZE:{get(){return Ou.defaultBatchSize},set(t){Ht("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Ou.defaultBatchSize=t}},CAN_UPLOAD_SAME_BUFFER:{get(){return Ou.canUploadSameBuffer},set(t){Ht("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Ou.canUploadSameBuffer=t}},GC_MODE:{get(){return ku.defaultMode},set(t){Ht("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),ku.defaultMode=t}},GC_MAX_IDLE:{get(){return ku.defaultMaxIdle},set(t){Ht("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),ku.defaultMaxIdle=t}},GC_MAX_CHECK_COUNT:{get(){return ku.defaultCheckCountMax},set(t){Ht("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),ku.defaultCheckCountMax=t}},PRECISION_VERTEX:{get(){return Ll.defaultVertexPrecision},set(t){Ht("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Ll.defaultVertexPrecision=t}},PRECISION_FRAGMENT:{get(){return Ll.defaultFragmentPrecision},set(t){Ht("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Ll.defaultFragmentPrecision=t}}});var zc=(t=>(t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(zc||{});class RP{constructor(e,n=null,r=0,i=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=n,this.priority=r,this.once=i}match(e,n=null){return this.fn===e&&this.context===n}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const n=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),n}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const n=this.next;return this.next=e?null:n,this.previous=null,n}}const RK=class lo{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new RP(null,null,1/0),this.deltaMS=1/lo.targetFPMS,this.elapsedMS=1/lo.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,n,r=zc.NORMAL){return this._addListener(new RP(e,n,r))}addOnce(e,n,r=zc.NORMAL){return this._addListener(new RP(e,n,r,!0))}_addListener(e){let n=this._head.next,r=this._head;if(!n)e.connect(r);else{for(;n;){if(e.priority>n.priority){e.connect(r);break}r=n,n=n.next}e.previous||e.connect(r)}return this._startIfPossible(),this}remove(e,n){let r=this._head.next;for(;r;)r.match(e,n)?r=r.destroy():r=r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,n=this._head;for(;n=n.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let n;if(e>this.lastTime){if(n=this.elapsedMS=e-this.lastTime,n>this._maxElapsedMS&&(n=this._maxElapsedMS),n*=this.speed,this._minElapsedMS){const s=e-this._lastFrame|0;if(s<this._minElapsedMS)return;this._lastFrame=e-s%this._minElapsedMS}this.deltaMS=n,this.deltaTime=this.deltaMS*lo.targetFPMS;const r=this._head;let i=r.next;for(;i;)i=i.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const n=Math.min(this.maxFPS,e),r=Math.min(Math.max(0,n)/1e3,lo.targetFPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const n=Math.max(this.minFPS,e);this._minElapsedMS=1/(n/1e3)}}static get shared(){if(!lo._shared){const e=lo._shared=new lo;e.autoStart=!0,e._protected=!0}return lo._shared}static get system(){if(!lo._system){const e=lo._system=new lo;e.autoStart=!0,e._protected=!0}return lo._system}};RK.targetFPMS=.06;let Qr=RK;Object.defineProperties(ht,{TARGET_FPMS:{get(){return Qr.targetFPMS},set(t){Ht("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Qr.targetFPMS=t}}});class V3{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(n){this._ticker&&this._ticker.remove(this.render,this),this._ticker=n,n&&n.add(this.render,this,zc.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Qr.shared:new Qr,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}V3.extension=rt.Application;bt.add(V3);const PK=[];bt.handleByList(rt.Renderer,PK);function IK(t){for(const e of PK)if(e.test(t))return new e(t);throw new Error("Unable to auto-detect a suitable renderer.")}var HIe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,VIe=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const MK=HIe,W3=VIe;class X3{constructor(e){this.renderer=e}contextChange(e){let n;if(this.renderer.context.webGLVersion===1){const r=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),n=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,r)}else{const r=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),n=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,r)}n>=Gr.HIGH?this.multisample=Gr.HIGH:n>=Gr.MEDIUM?this.multisample=Gr.MEDIUM:n>=Gr.LOW?this.multisample=Gr.LOW:this.multisample=Gr.NONE}destroy(){}}X3.extension={type:rt.RendererSystem,name:"_multisample"};bt.add(X3);class WIe{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class Y3{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:n,CONTEXT_UID:r}=this,i=e._glBuffers[r]||this.createGLBuffer(e);n.bindBuffer(e.type,i.buffer)}unbind(e){const{gl:n}=this;n.bindBuffer(e,null)}bindBufferBase(e,n){const{gl:r,CONTEXT_UID:i}=this;if(this.boundBufferBases[n]!==e){const s=e._glBuffers[i]||this.createGLBuffer(e);this.boundBufferBases[n]=e,r.bindBufferBase(r.UNIFORM_BUFFER,n,s.buffer)}}bindBufferRange(e,n,r){const{gl:i,CONTEXT_UID:s}=this;r=r||0;const o=e._glBuffers[s]||this.createGLBuffer(e);i.bindBufferRange(i.UNIFORM_BUFFER,n||0,o.buffer,r*256,256)}update(e){const{gl:n,CONTEXT_UID:r}=this,i=e._glBuffers[r]||this.createGLBuffer(e);if(e._updateID!==i.updateID)if(i.updateID=e._updateID,n.bindBuffer(e.type,i.buffer),i.byteLength>=e.data.byteLength)n.bufferSubData(e.type,0,e.data);else{const s=e.static?n.STATIC_DRAW:n.DYNAMIC_DRAW;i.byteLength=e.data.byteLength,n.bufferData(e.type,e.data,s)}}dispose(e,n){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const r=e._glBuffers[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this),r&&(n||i.deleteBuffer(r.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const n=Object.keys(this.managedBuffers);for(let r=0;r<n.length;r++)this.dispose(this.managedBuffers[n[r]],e)}createGLBuffer(e){const{CONTEXT_UID:n,gl:r}=this;return e._glBuffers[n]=new WIe(r.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[n]}}Y3.extension={type:rt.RendererSystem,name:"buffer"};bt.add(Y3);class K3{constructor(e){this.renderer=e}render(e,n){const r=this.renderer;let i,s,o,a;if(n&&(i=n.renderTexture,s=n.clear,o=n.transform,a=n.skipUpdateTransform),this.renderingToScreen=!i,r.runners.prerender.emit(),r.emit("prerender"),r.projection.transform=o,!r.context.isLost){if(i||(this.lastObjectRendered=e),!a){const l=e.enableTempParent();e.updateTransform(),e.disableTempParent(l)}r.renderTexture.bind(i),r.batch.currentRenderer.start(),(s??r.background.clearBeforeRender)&&r.renderTexture.clear(),e.render(r),r.batch.currentRenderer.flush(),i&&(n.blit&&r.framebuffer.blit(),i.baseTexture.update()),r.runners.postrender.emit(),r.projection.transform=null,r.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}K3.extension={type:rt.RendererSystem,name:"objectRenderer"};bt.add(K3);const vE=class oL extends AK{constructor(e){super(),this.type=y3.WEBGL,e=Object.assign({},ht.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new oa({projectionMatrix:new Br},!0);const n={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:oL.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(n),"useContextAlpha"in e&&(Ht("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha),this._plugin.rendererPlugins=oL.__plugins,this.options=e,this.startup.run(this.options)}static test(e){return e!=null&&e.forceCanvas?!1:UY()}render(e,n){this.objectRenderer.render(e,n)}resize(e,n){this._view.resizeView(e,n)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return Ht("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return Ht("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return Ht("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return Ht("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){Ht("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return Ht("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(e){Ht("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return Ht("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,n){return this.textureGenerator.generateTexture(e,n)}};vE.extension={type:rt.Renderer,priority:1},vE.__plugins={},vE.__systems={};let uC=vE;bt.handleByMap(rt.RendererPlugin,uC.__plugins);bt.handleByMap(rt.RendererSystem,uC.__systems);bt.add(uC);class q3 extends tg{constructor(e,n){const{width:r,height:i}=n||{};super(r,i),this.items=[],this.itemDirtyIds=[];for(let s=0;s<e;s++){const o=new Qt;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,n){for(let r=0;r<this.length;r++)e[r]&&(e[r].castToBaseTexture?this.addBaseTextureAt(e[r].castToBaseTexture(),r):e[r]instanceof tg?this.addResourceAt(e[r],r):this.addResourceAt(C3(e[r],n),r))}dispose(){for(let e=0,n=this.length;e<n;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,n){if(!this.items[n])throw new Error(`Index ${n} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[n].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let n=0;n<this.length;n++)this.items[n].parentTextureArray=e,this.items[n].on("update",e.update,e)}unbind(e){super.unbind(e);for(let n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",e.update,e)}load(){if(this._load)return this._load;const e=this.items.map(n=>n.resource).filter(n=>n).map(n=>n.load());return this._load=Promise.all(e).then(()=>{const{realWidth:n,realHeight:r}=this.items[0];return this.resize(n,r),this.update(),Promise.resolve(this)}),this._load}}class LK extends q3{constructor(e,n){const{width:r,height:i}=n||{};let s,o;Array.isArray(e)?(s=e,o=e.length):o=e,super(o,{width:r,height:i}),s&&this.initFromArray(s,n)}addBaseTextureAt(e,n){if(e.resource)this.addResourceAt(e.resource,n);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=Vh.TEXTURE_2D_ARRAY}upload(e,n,r){const{length:i,itemDirtyIds:s,items:o}=this,{gl:a}=e;r.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,r.internalFormat,this._width,this._height,i,0,n.format,r.type,null);for(let l=0;l<i;l++){const c=o[l];s[l]<c.dirtyId&&(s[l]=c.dirtyId,c.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,c.resource.width,c.resource.height,1,n.format,r.type,c.resource.source))}return!0}}class OK extends Hl{constructor(e){super(e)}static test(e){const{OffscreenCanvas:n}=globalThis;return n&&e instanceof n?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}const kK=class ov extends q3{constructor(e,n){const{width:r,height:i,autoLoad:s,linkBaseTexture:o}=n||{};if(e&&e.length!==ov.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:r,height:i});for(let a=0;a<ov.SIDES;a++)this.items[a].target=Vh.TEXTURE_CUBE_MAP_POSITIVE_X+a;this.linkBaseTexture=o!==!1,e&&this.initFromArray(e,n),s!==!1&&this.load()}bind(e){super.bind(e),e.target=Vh.TEXTURE_CUBE_MAP}addBaseTextureAt(e,n,r){if(r===void 0&&(r=this.linkBaseTexture),!this.items[n])throw new Error(`Index ${n} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,n);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=Vh.TEXTURE_CUBE_MAP_POSITIVE_X+n,e.parentTextureArray=this.baseTexture,this.items[n]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[n]=e,this}upload(e,n,r){const i=this.itemDirtyIds;for(let s=0;s<ov.SIDES;s++){const o=this.items[s];(i[s]<o.dirtyId||r.dirtyId<n.dirtyId)&&(o.valid&&o.resource?(o.resource.upload(e,o,r),i[s]=o.dirtyId):i[s]<-1&&(e.gl.texImage2D(o.target,0,r.internalFormat,n.realWidth,n.realHeight,0,n.format,r.type,null),i[s]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===ov.SIDES}};kK.SIDES=6;let NK=kK;class Lh extends Hl{constructor(e,n){n=n||{};let r,i,s;typeof e=="string"?(r=Lh.EMPTY,i=e,s=!0):(r=e,i=null,s=!1),super(r),this.url=i,this.crossOrigin=n.crossOrigin??!0,this.alphaMode=typeof n.alphaMode=="number"?n.alphaMode:null,this.ownsImageBitmap=n.ownsImageBitmap??s,this._load=null,n.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(e,n)=>{if(this.url===null){e(this);return}try{const r=await ht.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const i=await r.blob();if(this.destroyed)return;const s=await createImageBitmap(i,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===Is.UNPACK?"premultiply":"none"});if(this.destroyed){s.close();return}this.source=s,this.update(),e(this)}catch(r){if(this.destroyed)return;n(r),this.onError.emit(r)}}),this._load)}upload(e,n,r){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(n.alphaMode=this.alphaMode),super.upload(e,n,r)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){return Lh._EMPTY=Lh._EMPTY??ht.ADAPTER.createCanvas(0,0),Lh._EMPTY}}const aL=class yE extends Hl{constructor(e,n){n=n||{},super(ht.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=n.scale||1,this._overrideWidth=n.width,this._overrideHeight=n.height,this._resolve=null,this._crossorigin=n.crossorigin,this._load=null,n.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.update(),e(this)},yE.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;Hl.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=n=>{this._resolve&&(e.onerror=null,this.onError.emit(n))},e.onload=()=>{if(!this._resolve)return;const n=e.width,r=e.height;if(!n||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let i=n*this.scale,s=r*this.scale;(this._overrideWidth||this._overrideHeight)&&(i=this._overrideWidth||this._overrideHeight/r*n,s=this._overrideHeight||this._overrideWidth/n*r),i=Math.round(i),s=Math.round(s);const o=this.source;o.width=i,o.height=s,o._pixiId=`canvas_${Td()}`,o.getContext("2d").drawImage(e,0,0,n,r,0,0,i,s),this._resolve(),this._resolve=null}}static getSize(e){const n=yE.SVG_SIZE.exec(e),r={};return n&&(r[n[1]]=Math.round(parseFloat(n[3])),r[n[5]]=Math.round(parseFloat(n[7]))),r}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,n){return n==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&yE.SVG_XML.test(e)}};aL.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,aL.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let Gw=aL;class XIe extends Hl{constructor(e){super(e)}static test(e){return!!globalThis.VideoFrame&&e instanceof globalThis.VideoFrame}}const lL=class cL extends Hl{constructor(e,n){if(n=n||{},!(e instanceof HTMLVideoElement)){const r=document.createElement("video");n.autoLoad!==!1&&r.setAttribute("preload","auto"),n.playsinline!==!1&&(r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline","")),n.muted===!0&&(r.setAttribute("muted",""),r.muted=!0),n.loop===!0&&r.setAttribute("loop",""),n.autoPlay!==!1&&r.setAttribute("autoplay",""),typeof e=="string"&&(e=[e]);const i=e[0].src||e[0];Hl.crossOrigin(r,i,n.crossorigin);for(let s=0;s<e.length;++s){const o=document.createElement("source");let{src:a,mime:l}=e[s];if(a=a||e[s],a.startsWith("data:"))l=a.slice(5,a.indexOf(";"));else if(!a.startsWith("blob:")){const c=a.split("?").shift().toLowerCase(),u=c.slice(c.lastIndexOf(".")+1);l=l||cL.MIME_TYPES[u]||`video/${u}`}o.src=a,l&&(o.type=l),r.appendChild(o)}e=r}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=n.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=n.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),n.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){if(this._updateFPS){const n=Qr.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-n)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart),e.addEventListener("pause",this._onPlayStop),e.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise((n,r)=>{this.valid?n(this):(this._resolve=n,this._reject=r,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e),this._reject&&(this._reject(e),this._reject=null,this._resolve=null)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const n=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!n&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._configureAutoUpdate();const e=this.source;e&&(e.removeEventListener("play",this._onPlayStart),e.removeEventListener("pause",this._onPlayStop),e.removeEventListener("seeked",this._onSeeked),e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay),e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(Qr.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Qr.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Qr.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(e,n){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||cL.TYPES.includes(n)}};lL.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],lL.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let Z3=lL;Uw.push(Lh,I3,OK,Z3,XIe,Gw,F1,NK,LK);let YIe=class{constructor(){this._glTransformFeedbacks={},this.buffers=[],this.disposeRunner=new Eo("disposeTransformFeedback")}bindBuffer(e,n){this.buffers[e]=n}destroy(){this.disposeRunner.emit(this,!1)}};const KIe="7.4.0",qIe=Object.freeze(Object.defineProperty({__proto__:null,ALPHA_MODES:Is,AbstractMultiResource:q3,ArrayResource:LK,Attribute:JM,BLEND_MODES:Ft,BUFFER_BITS:kw,BUFFER_TYPE:Xa,BackgroundSystem:$y,BaseImageResource:Hl,BaseRenderTexture:P3,BaseTexture:Qt,BatchDrawCall:zw,BatchGeometry:A3,BatchRenderer:Ou,BatchShaderGenerator:uK,BatchSystem:R3,BatchTextureArray:$w,BrowserAdapter:TY,Buffer:Kr,BufferResource:F1,BufferSystem:Y3,CLEAR_MODES:Na,COLOR_MASK_BITS:wY,CanvasResource:OK,Circle:U1,Color:Tn,ContextSystem:jy,CubeResource:NK,DEG_TO_RAD:tK,DRAW_MODES:na,ENV:Fd,Ellipse:z1,ExtensionType:rt,FORMATS:Ze,Filter:hs,FilterState:hK,FilterSystem:O3,Framebuffer:jw,FramebufferSystem:k3,GC_MODES:sC,GLFramebuffer:fK,GLProgram:_K,GLTexture:gE,GenerateTextureSystem:z3,Geometry:Lg,GeometrySystem:N3,IGLUniformData:PIe,INSTALLED:Uw,ImageBitmapResource:Lh,ImageResource:I3,MASK_TYPES:Yr,MIPMAP_MODES:Qa,MSAA_QUALITY:Gr,MaskData:mK,MaskSystem:D3,Matrix:Br,MultisampleSystem:X3,ObjectRenderer:G1,ObjectRendererSystem:K3,ObservablePoint:Ua,PI_2:zy,PRECISION:vo,PluginSystem:F3,Point:Ot,Polygon:ud,Program:Ll,ProjectionSystem:U3,Quad:dK,QuadUv:L3,RAD_TO_DEG:eK,RENDERER_TYPE:y3,Rectangle:Wt,RenderTexture:zd,RenderTexturePool:M3,RenderTextureSystem:$3,Renderer:uC,Resource:tg,RoundedRectangle:$1,Runner:Eo,SAMPLER_TYPES:dt,SCALE_MODES:Ml,SHAPES:Ri,SVGResource:Gw,ScissorSystem:yK,Shader:Lc,ShaderSystem:j3,SpriteMaskFilter:pK,StartupSystem:Gy,State:el,StateSystem:CK,StencilSystem:B3,SystemManager:AK,TARGETS:Vh,TYPES:At,Texture:zt,TextureGCSystem:ku,TextureMatrix:cC,TextureSystem:G3,TextureUvs:lC,Ticker:Qr,TickerPlugin:V3,Transform:j1,TransformFeedback:YIe,TransformFeedbackSystem:H3,UPDATE_PRIORITY:zc,UniformGroup:oa,VERSION:KIe,VideoResource:Z3,ViewSystem:Hy,ViewableBuffer:Fw,WRAP_MODES:Ul,autoDetectRenderer:IK,autoDetectResource:C3,checkMaxIfStatementsInShader:ZY,createUBOElements:EK,defaultFilterVertex:W3,defaultVertex:MK,extensions:bt,generateProgram:bK,generateUniformBufferSync:TK,getTestContext:sK,getUBOData:wK,groupD8:gr,isMobile:Fa,settings:ht,uniformParsers:Xh,unsafeEvalSupported:lK,utils:J2e},Symbol.toStringTag,{value:"Module"}));class Vy{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?Wt.EMPTY:(e=e||new Wt(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,n){const{a:r,b:i,c:s,d:o,tx:a,ty:l}=e,c=r*n.x+s*n.y+a,u=i*n.x+o*n.y+l;this.minX=Math.min(this.minX,c),this.maxX=Math.max(this.maxX,c),this.minY=Math.min(this.minY,u),this.maxY=Math.max(this.maxY,u)}addQuad(e){let n=this.minX,r=this.minY,i=this.maxX,s=this.maxY,o=e[0],a=e[1];n=o<n?o:n,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,o=e[2],a=e[3],n=o<n?o:n,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,o=e[4],a=e[5],n=o<n?o:n,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,o=e[6],a=e[7],n=o<n?o:n,r=a<r?a:r,i=o>i?o:i,s=a>s?a:s,this.minX=n,this.minY=r,this.maxX=i,this.maxY=s}addFrame(e,n,r,i,s){this.addFrameMatrix(e.worldTransform,n,r,i,s)}addFrameMatrix(e,n,r,i,s){const o=e.a,a=e.b,l=e.c,c=e.d,u=e.tx,d=e.ty;let h=this.minX,f=this.minY,p=this.maxX,m=this.maxY,_=o*n+l*r+u,y=a*n+c*r+d;h=_<h?_:h,f=y<f?y:f,p=_>p?_:p,m=y>m?y:m,_=o*i+l*r+u,y=a*i+c*r+d,h=_<h?_:h,f=y<f?y:f,p=_>p?_:p,m=y>m?y:m,_=o*n+l*s+u,y=a*n+c*s+d,h=_<h?_:h,f=y<f?y:f,p=_>p?_:p,m=y>m?y:m,_=o*i+l*s+u,y=a*i+c*s+d,h=_<h?_:h,f=y<f?y:f,p=_>p?_:p,m=y>m?y:m,this.minX=h,this.minY=f,this.maxX=p,this.maxY=m}addVertexData(e,n,r){let i=this.minX,s=this.minY,o=this.maxX,a=this.maxY;for(let l=n;l<r;l+=2){const c=e[l],u=e[l+1];i=c<i?c:i,s=u<s?u:s,o=c>o?c:o,a=u>a?u:a}this.minX=i,this.minY=s,this.maxX=o,this.maxY=a}addVertices(e,n,r,i){this.addVerticesMatrix(e.worldTransform,n,r,i)}addVerticesMatrix(e,n,r,i,s=0,o=s){const a=e.a,l=e.b,c=e.c,u=e.d,d=e.tx,h=e.ty;let f=this.minX,p=this.minY,m=this.maxX,_=this.maxY;for(let y=r;y<i;y+=2){const x=n[y],b=n[y+1],E=a*x+c*b+d,w=u*b+l*x+h;f=Math.min(f,E-s),m=Math.max(m,E+s),p=Math.min(p,w-o),_=Math.max(_,w+o)}this.minX=f,this.minY=p,this.maxX=m,this.maxY=_}addBounds(e){const n=this.minX,r=this.minY,i=this.maxX,s=this.maxY;this.minX=e.minX<n?e.minX:n,this.minY=e.minY<r?e.minY:r,this.maxX=e.maxX>i?e.maxX:i,this.maxY=e.maxY>s?e.maxY:s}addBoundsMask(e,n){const r=e.minX>n.minX?e.minX:n.minX,i=e.minY>n.minY?e.minY:n.minY,s=e.maxX<n.maxX?e.maxX:n.maxX,o=e.maxY<n.maxY?e.maxY:n.maxY;if(r<=s&&i<=o){const a=this.minX,l=this.minY,c=this.maxX,u=this.maxY;this.minX=r<a?r:a,this.minY=i<l?i:l,this.maxX=s>c?s:c,this.maxY=o>u?o:u}}addBoundsMatrix(e,n){this.addFrameMatrix(n,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,n){const r=e.minX>n.x?e.minX:n.x,i=e.minY>n.y?e.minY:n.y,s=e.maxX<n.x+n.width?e.maxX:n.x+n.width,o=e.maxY<n.y+n.height?e.maxY:n.y+n.height;if(r<=s&&i<=o){const a=this.minX,l=this.minY,c=this.maxX,u=this.maxY;this.minX=r<a?r:a,this.minY=i<l?i:l,this.maxX=s>c?s:c,this.maxY=o>u?o:u}}pad(e=0,n=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=n,this.maxY+=n)}addFramePad(e,n,r,i,s,o){e-=s,n-=o,r+=s,i+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>r?this.maxX:r,this.minY=this.minY<n?this.minY:n,this.maxY=this.maxY>i?this.maxY:i}}class lr extends Ig{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new j1,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Vy,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const n=Object.keys(e);for(let r=0;r<n.length;++r){const i=n[r];Object.defineProperty(lr.prototype,i,Object.getOwnPropertyDescriptor(e,i))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,n){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),n||(this._boundsRect||(this._boundsRect=new Wt),n=this._boundsRect),this._bounds.getRectangle(n)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new Wt),e=this._localBoundsRect),this._localBounds||(this._localBounds=new Vy);const n=this.transform,r=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(r==null?void 0:r.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const i=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,e);return this.parent=r,this.transform=n,this._bounds=i,this._bounds.updateID+=this._boundsID-s,o}toGlobal(e,n,r=!1){return r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,n)}toLocal(e,n,r,i){return n&&(e=n.toGlobal(e,r,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,r)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){var e;(e=this.parent)==null||e.removeChild(this)}setTransform(e=0,n=0,r=1,i=1,s=0,o=0,a=0,l=0,c=0){return this.position.x=e,this.position.y=n,this.scale.x=r||1,this.scale.y=i||1,this.rotation=s,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=c,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new DK),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*eK}set angle(e){this.transform.rotation=e*tK}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex!==e&&(this._zIndex=e,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(n._maskRefCount--,n._maskRefCount===0&&(n.renderable=!0,n.isMask=!1))}if(this._mask=e,this._mask){const n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(n._maskRefCount===0&&(n.renderable=!1,n.isMask=!0),n._maskRefCount++)}}}}class DK extends lr{constructor(){super(...arguments),this.sortDirty=null}}lr.prototype.displayObjectUpdateTransform=lr.prototype.updateTransform;const ZIe=new Br;function QIe(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}const BK=class uL extends lr{constructor(){super(),this.children=[],this.sortableChildren=uL.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let n=0;n<e.length;n++)this.addChild(e[n]);else{const n=e[0];n.parent&&n.parent.removeChild(n),n.parent=this,this.sortDirty=!0,n.transform._parentID=-1,this.children.push(n),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",n,this,this.children.length-1),n.emit("added",this)}return e[0]}addChildAt(e,n){if(n<0||n>this.children.length)throw new Error(`${e}addChildAt: The index ${n} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(n,0,e),this._boundsID++,this.onChildrenChange(n),e.emit("added",this),this.emit("childAdded",e,this,n),e}swapChildren(e,n){if(e===n)return;const r=this.getChildIndex(e),i=this.getChildIndex(n);this.children[r]=n,this.children[i]=e,this.onChildrenChange(r<i?r:i)}getChildIndex(e){const n=this.children.indexOf(e);if(n===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return n}setChildIndex(e,n){if(n<0||n>=this.children.length)throw new Error(`The index ${n} supplied is out of bounds ${this.children.length}`);const r=this.getChildIndex(e);Wh(this.children,r,1),this.children.splice(n,0,e),this.onChildrenChange(n)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let n=0;n<e.length;n++)this.removeChild(e[n]);else{const n=e[0],r=this.children.indexOf(n);if(r===-1)return null;n.parent=null,n.transform._parentID=-1,Wh(this.children,r,1),this._boundsID++,this.onChildrenChange(r),n.emit("removed",this),this.emit("childRemoved",n,this,r)}return e[0]}removeChildAt(e){const n=this.getChildAt(e);return n.parent=null,n.transform._parentID=-1,Wh(this.children,e,1),this._boundsID++,this.onChildrenChange(e),n.emit("removed",this),this.emit("childRemoved",n,this,e),n}removeChildren(e=0,n=this.children.length){const r=e,i=n,s=i-r;let o;if(s>0&&s<=i){o=this.children.splice(r,s);for(let a=0;a<o.length;++a)o[a].parent=null,o[a].transform&&(o[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let a=0;a<o.length;++a)o[a].emit("removed",this),this.emit("childRemoved",o[a],this,a);return o}else if(s===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let n=0,r=this.children.length;n<r;++n){const i=this.children[n];i._lastSortedIndex=n,!e&&i.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(QIe),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,n=this.children.length;e<n;++e){const r=this.children[e];r.visible&&r.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const n=this.children[e];if(!(!n.visible||!n.renderable))if(n.calculateBounds(),n._mask){const r=n._mask.isMaskData?n._mask.maskObject:n._mask;r?(r.calculateBounds(),this._bounds.addBoundsMask(n._bounds,r._bounds)):this._bounds.addBounds(n._bounds)}else n.filterArea?this._bounds.addBoundsArea(n._bounds,n.filterArea):this._bounds.addBounds(n._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,n=!1){const r=super.getLocalBounds(e);if(!n)for(let i=0,s=this.children.length;i<s;++i){const o=this.children[i];o.visible&&o.updateTransform()}return r}_calculateBounds(){}_renderWithCulling(e){const n=e.renderTexture.sourceFrame;if(!(n.width>0&&n.height>0))return;let r,i;this.cullArea?(r=this.cullArea,i=this.worldTransform):this._render!==uL.prototype._render&&(r=this.getBounds(!0));const s=e.projection.transform;if(s&&(i?(i=ZIe.copyFrom(i),i.prepend(s)):i=s),r&&n.intersects(r,i))this._render(e);else if(this.cullArea)return;for(let o=0,a=this.children.length;o<a;++o){const l=this.children[o],c=l.cullable;l.cullable=c||!this.cullArea,l.render(e),l.cullable=c}}render(e){var n;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(n=this.filters)!=null&&n.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let r=0,i=this.children.length;r<i;++r)this.children[r].render(e)}}renderAdvanced(e){var s,o,a;const n=this.filters,r=this._mask;if(n){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let l=0;l<n.length;l++)n[l].enabled&&this._enabledFilters.push(n[l])}const i=n&&((s=this._enabledFilters)==null?void 0:s.length)||r&&(!r.isMaskData||r.enabled&&(r.autoDetect||r.type!==Yr.NONE));if(i&&e.batch.flush(),n&&((o=this._enabledFilters)!=null&&o.length)&&e.filter.push(this,this._enabledFilters),r&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let l=0,c=this.children.length;l<c;++l)this.children[l].render(e)}i&&e.batch.flush(),r&&e.mask.pop(this),n&&((a=this._enabledFilters)!=null&&a.length)&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const n=typeof e=="boolean"?e:e==null?void 0:e.children,r=this.removeChildren(0,this.children.length);if(n)for(let i=0;i<r.length;++i)r[i].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const n=this.getLocalBounds().width;n!==0?this.scale.x=e/n:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const n=this.getLocalBounds().height;n!==0?this.scale.y=e/n:this.scale.y=1,this._height=e}};BK.defaultSortableChildren=!1;let qi=BK;qi.prototype.containerUpdateTransform=qi.prototype.updateTransform;Object.defineProperties(ht,{SORTABLE_CHILDREN:{get(){return qi.defaultSortableChildren},set(t){Ht("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),qi.defaultSortableChildren=t}}});const JIe=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Vy,Container:qi,DisplayObject:lr,TemporaryDisplayObject:DK},Symbol.toStringTag,{value:"Module"}));var H1=(t=>(t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",t))(H1||{});const M0=new Ot,eMe=new Uint16Array([0,1,2,0,2,3]);class tl extends qi{constructor(e){super(),this._anchor=new Ua(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new Tn(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=Ft.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||zt.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=eMe,this.pluginName="batch",this.isSprite=!0,this._roundPixels=ht.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Cc(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Cc(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const n=this.transform.worldTransform,r=n.a,i=n.b,s=n.c,o=n.d,a=n.tx,l=n.ty,c=this.vertexData,u=e.trim,d=e.orig,h=this._anchor;let f=0,p=0,m=0,_=0;if(u?(p=u.x-h._x*d.width,f=p+u.width,_=u.y-h._y*d.height,m=_+u.height):(p=-h._x*d.width,f=p+d.width,_=-h._y*d.height,m=_+d.height),c[0]=r*p+s*_+a,c[1]=o*_+i*p+l,c[2]=r*f+s*_+a,c[3]=o*_+i*f+l,c[4]=r*f+s*m+a,c[5]=o*m+i*f+l,c[6]=r*p+s*m+a,c[7]=o*m+i*p+l,this._roundPixels){const y=ht.RESOLUTION;for(let x=0;x<c.length;++x)c[x]=Math.round(c[x]*y)/y}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,n=this.vertexTrimmedData,r=e.orig,i=this._anchor,s=this.transform.worldTransform,o=s.a,a=s.b,l=s.c,c=s.d,u=s.tx,d=s.ty,h=-i._x*r.width,f=h+r.width,p=-i._y*r.height,m=p+r.height;if(n[0]=o*h+l*p+u,n[1]=c*p+a*h+d,n[2]=o*f+l*p+u,n[3]=c*p+a*f+d,n[4]=o*f+l*m+u,n[5]=c*m+a*f+d,n[6]=o*h+l*m+u,n[7]=c*m+a*h+d,this._roundPixels){const _=ht.RESOLUTION;for(let y=0;y<n.length;++y)n[y]=Math.round(n[y]*_)/_}}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,n=this._texture.orig;!e||e.width===n.width&&e.height===n.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return this.children.length===0?(this._localBounds||(this._localBounds=new Vy),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Wt),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,M0);const n=this._texture.orig.width,r=this._texture.orig.height,i=-n*this.anchor.x;let s=0;return M0.x>=i&&M0.x<i+n&&(s=-r*this.anchor.y,M0.y>=s&&M0.y<s+r)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof e=="boolean"?e:e==null?void 0:e.texture){const n=typeof e=="boolean"?e:e==null?void 0:e.baseTexture;this._texture.destroy(!!n)}this._texture=null}static from(e,n){const r=e instanceof zt?e:zt.from(e,n);return new tl(r)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const n=Cc(this.scale.x)||1;this.scale.x=n*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const n=Cc(this.scale.y)||1;this.scale.y=n*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||zt.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const tMe=Object.freeze(Object.defineProperty({__proto__:null,Sprite:tl},Symbol.toStringTag,{value:"Module"})),lx={willReadFrequently:!0},bl=class wt{static get experimentalLetterSpacingSupported(){let e=wt._experimentalLetterSpacingSupported;if(e!==void 0){const n=ht.ADAPTER.getCanvasRenderingContext2D().prototype;e=wt._experimentalLetterSpacingSupported="letterSpacing"in n||"textLetterSpacing"in n}return e}constructor(e,n,r,i,s,o,a,l,c){this.text=e,this.style=n,this.width=r,this.height=i,this.lines=s,this.lineWidths=o,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=c}static measureText(e,n,r,i=wt._canvas){r=r??n.wordWrap;const s=n.toFontString(),o=wt.measureFont(s);o.fontSize===0&&(o.fontSize=n.fontSize,o.ascent=n.fontSize);const a=i.getContext("2d",lx);a.font=s;const l=(r?wt.wordWrap(e,n,i):e).split(/(?:\r\n|\r|\n)/),c=new Array(l.length);let u=0;for(let p=0;p<l.length;p++){const m=wt._measureText(l[p],n.letterSpacing,a);c[p]=m,u=Math.max(u,m)}let d=u+n.strokeThickness;n.dropShadow&&(d+=n.dropShadowDistance);const h=n.lineHeight||o.fontSize+n.strokeThickness;let f=Math.max(h,o.fontSize+n.strokeThickness*2)+n.leading+(l.length-1)*(h+n.leading);return n.dropShadow&&(f+=n.dropShadowDistance),new wt(e,n,d,f,l,c,h+n.leading,u,o)}static _measureText(e,n,r){let i=!1;wt.experimentalLetterSpacingSupported&&(wt.experimentalLetterSpacing?(r.letterSpacing=`${n}px`,r.textLetterSpacing=`${n}px`,i=!0):(r.letterSpacing="0px",r.textLetterSpacing="0px"));let s=r.measureText(e).width;return s>0&&(i?s-=n:s+=(wt.graphemeSegmenter(e).length-1)*n),s}static wordWrap(e,n,r=wt._canvas){const i=r.getContext("2d",lx);let s=0,o="",a="";const l=Object.create(null),{letterSpacing:c,whiteSpace:u}=n,d=wt.collapseSpaces(u),h=wt.collapseNewlines(u);let f=!d;const p=n.wordWrapWidth+c,m=wt.tokenize(e);for(let _=0;_<m.length;_++){let y=m[_];if(wt.isNewline(y)){if(!h){a+=wt.addLine(o),f=!d,o="",s=0;continue}y=" "}if(d){const b=wt.isBreakingSpace(y),E=wt.isBreakingSpace(o[o.length-1]);if(b&&E)continue}const x=wt.getFromCache(y,c,l,i);if(x>p)if(o!==""&&(a+=wt.addLine(o),o="",s=0),wt.canBreakWords(y,n.breakWords)){const b=wt.wordWrapSplit(y);for(let E=0;E<b.length;E++){let w=b[E],T=w,C=1;for(;b[E+C];){const M=b[E+C];if(!wt.canBreakChars(T,M,y,E,n.breakWords))w+=M;else break;T=M,C++}E+=C-1;const P=wt.getFromCache(w,c,l,i);P+s>p&&(a+=wt.addLine(o),f=!1,o="",s=0),o+=w,s+=P}}else{o.length>0&&(a+=wt.addLine(o),o="",s=0);const b=_===m.length-1;a+=wt.addLine(y,!b),f=!1,o="",s=0}else x+s>p&&(f=!1,a+=wt.addLine(o),o="",s=0),(o.length>0||!wt.isBreakingSpace(y)||f)&&(o+=y,s+=x)}return a+=wt.addLine(o,!1),a}static addLine(e,n=!0){return e=wt.trimRight(e),e=n?`${e}
`:e,e}static getFromCache(e,n,r,i){let s=r[e];return typeof s!="number"&&(s=wt._measureText(e,n,i)+n,r[e]=s),s}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let n=e.length-1;n>=0;n--){const r=e[n];if(!wt.isBreakingSpace(r))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:wt._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,n){return typeof e!="string"?!1:wt._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const n=[];let r="";if(typeof e!="string")return n;for(let i=0;i<e.length;i++){const s=e[i],o=e[i+1];if(wt.isBreakingSpace(s,o)||wt.isNewline(s)){r!==""&&(n.push(r),r=""),n.push(s);continue}r+=s}return r!==""&&n.push(r),n}static canBreakWords(e,n){return n}static canBreakChars(e,n,r,i,s){return!0}static wordWrapSplit(e){return wt.graphemeSegmenter(e)}static measureFont(e){if(wt._fonts[e])return wt._fonts[e];const n={ascent:0,descent:0,fontSize:0},r=wt._canvas,i=wt._context;i.font=e;const s=wt.METRICS_STRING+wt.BASELINE_SYMBOL,o=Math.ceil(i.measureText(s).width);let a=Math.ceil(i.measureText(wt.BASELINE_SYMBOL).width);const l=Math.ceil(wt.HEIGHT_MULTIPLIER*a);if(a=a*wt.BASELINE_MULTIPLIER|0,o===0||l===0)return wt._fonts[e]=n,n;r.width=o,r.height=l,i.fillStyle="#f00",i.fillRect(0,0,o,l),i.font=e,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(s,0,a);const c=i.getImageData(0,0,o,l).data,u=c.length,d=o*4;let h=0,f=0,p=!1;for(h=0;h<a;++h){for(let m=0;m<d;m+=4)if(c[f+m]!==255){p=!0;break}if(!p)f+=d;else break}for(n.ascent=a-h,f=u-d,p=!1,h=l;h>a;--h){for(let m=0;m<d;m+=4)if(c[f+m]!==255){p=!0;break}if(!p)f-=d;else break}return n.descent=h-a,n.fontSize=n.ascent+n.descent,wt._fonts[e]=n,n}static clearMetrics(e=""){e?delete wt._fonts[e]:wt._fonts={}}static get _canvas(){var e;if(!wt.__canvas){let n;try{const r=new OffscreenCanvas(0,0);if((e=r.getContext("2d",lx))!=null&&e.measureText)return wt.__canvas=r,r;n=ht.ADAPTER.createCanvas()}catch{n=ht.ADAPTER.createCanvas()}n.width=n.height=10,wt.__canvas=n}return wt.__canvas}static get _context(){return wt.__context||(wt.__context=wt._canvas.getContext("2d",lx)),wt.__context}};bl.METRICS_STRING="|q",bl.BASELINE_SYMBOL="M",bl.BASELINE_MULTIPLIER=1.4,bl.HEIGHT_MULTIPLIER=2,bl.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const t=new Intl.Segmenter;return e=>[...t.segment(e)].map(n=>n.segment)}return t=>[...t]})(),bl.experimentalLetterSpacing=!1,bl._fonts={},bl._newlines=[10,13],bl._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let _c=bl;const nMe=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],FK=class av{constructor(e){this.styleID=0,this.reset(),IP(this,e,e)}clone(){const e={};return IP(e,this,av.defaultStyle),new av(e)}reset(){IP(this,av.defaultStyle,av.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const n=PP(e);this._dropShadowColor!==n&&(this._dropShadowColor=n,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const n=PP(e);this._fill!==n&&(this._fill=n,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){rMe(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const n=PP(e);this._stroke!==n&&(this._stroke=n,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let n=this.fontFamily;Array.isArray(this.fontFamily)||(n=this.fontFamily.split(","));for(let r=n.length-1;r>=0;r--){let i=n[r].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&!nMe.includes(i)&&(i=`"${i}"`),n[r]=i}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${n.join(",")}`}};FK.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:H1.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let Io=FK;function PP(t){const e=Tn.shared,n=r=>{const i=e.setValue(r);return i.alpha===1?i.toHex():i.toRgbaString()};return Array.isArray(t)?t.map(n):n(t)}function rMe(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}function IP(t,e,n){for(const r in n)Array.isArray(e[r])?t[r]=e[r].slice():t[r]=e[r]}const iMe={texture:!0,children:!1,baseTexture:!0},UK=class dL extends tl{constructor(e,n,r){let i=!1;r||(r=ht.ADAPTER.createCanvas(),i=!0),r.width=3,r.height=3;const s=zt.from(r);s.orig=new Wt,s.trim=new Wt,super(s),this._ownCanvas=i,this.canvas=r,this.context=r.getContext("2d",{willReadFrequently:!0}),this._resolution=dL.defaultResolution??ht.RESOLUTION,this._autoResolution=dL.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=n,this.localStyleID=-1}static get experimentalLetterSpacing(){return _c.experimentalLetterSpacing}static set experimentalLetterSpacing(e){Ht("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),_c.experimentalLetterSpacing=e}updateText(e){const n=this._style;if(this.localStyleID!==n.styleID&&(this.dirty=!0,this.localStyleID=n.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const r=this.context,i=_c.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),s=i.width,o=i.height,a=i.lines,l=i.lineHeight,c=i.lineWidths,u=i.maxLineWidth,d=i.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,s)+n.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,o)+n.padding*2)*this._resolution),r.scale(this._resolution,this._resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.lineWidth=n.strokeThickness,r.textBaseline=n.textBaseline,r.lineJoin=n.lineJoin,r.miterLimit=n.miterLimit;let h,f;const p=n.dropShadow?2:1;for(let m=0;m<p;++m){const _=n.dropShadow&&m===0,y=_?Math.ceil(Math.max(1,o)+n.padding*2):0,x=y*this._resolution;if(_){r.fillStyle="black",r.strokeStyle="black";const E=n.dropShadowColor,w=n.dropShadowBlur*this._resolution,T=n.dropShadowDistance*this._resolution;r.shadowColor=Tn.shared.setValue(E).setAlpha(n.dropShadowAlpha).toRgbaString(),r.shadowBlur=w,r.shadowOffsetX=Math.cos(n.dropShadowAngle)*T,r.shadowOffsetY=Math.sin(n.dropShadowAngle)*T+x}else r.fillStyle=this._generateFillStyle(n,a,i),r.strokeStyle=n.stroke,r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;let b=(l-d.fontSize)/2;l-d.fontSize<0&&(b=0);for(let E=0;E<a.length;E++)h=n.strokeThickness/2,f=n.strokeThickness/2+E*l+d.ascent+b,n.align==="right"?h+=u-c[E]:n.align==="center"&&(h+=(u-c[E])/2),n.stroke&&n.strokeThickness&&this.drawLetterSpacing(a[E],h+n.padding,f+n.padding-y,!0),n.fill&&this.drawLetterSpacing(a[E],h+n.padding,f+n.padding-y)}this.updateTexture()}drawLetterSpacing(e,n,r,i=!1){const s=this._style.letterSpacing;let o=!1;if(_c.experimentalLetterSpacingSupported&&(_c.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),s===0||o){i?this.context.strokeText(e,n,r):this.context.fillText(e,n,r);return}let a=n;const l=_c.graphemeSegmenter(e);let c=this.context.measureText(e).width,u=0;for(let d=0;d<l.length;++d){const h=l[d];i?this.context.strokeText(h,a,r):this.context.fillText(h,a,r);let f="";for(let p=d+1;p<l.length;++p)f+=l[p];u=this.context.measureText(f).width,a+=c-u+s,c=u}}updateTexture(){const e=this.canvas;if(this._style.trim){const o=KY(e);o.data&&(e.width=o.width,e.height=o.height,this.context.putImageData(o.data,0,0))}const n=this._texture,r=this._style,i=r.trim?0:r.padding,s=n.baseTexture;n.trim.width=n._frame.width=e.width/this._resolution,n.trim.height=n._frame.height=e.height/this._resolution,n.trim.x=-i,n.trim.y=-i,n.orig.width=n._frame.width-i*2,n.orig.height=n._frame.height-i*2,this._onTextureUpdate(),s.setRealSize(e.width,e.height,this._resolution),n.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,n){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,n)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,n,r){const i=e.fill;if(Array.isArray(i)){if(i.length===1)return i[0]}else return i;let s;const o=e.dropShadow?e.dropShadowDistance:0,a=e.padding||0,l=this.canvas.width/this._resolution-o-a*2,c=this.canvas.height/this._resolution-o-a*2,u=i.slice(),d=e.fillGradientStops.slice();if(!d.length){const h=u.length+1;for(let f=1;f<h;++f)d.push(f/h)}if(u.unshift(i[0]),d.unshift(0),u.push(i[i.length-1]),d.push(1),e.fillGradientType===H1.LINEAR_VERTICAL){s=this.context.createLinearGradient(l/2,a,l/2,c+a);const h=r.fontProperties.fontSize+e.strokeThickness;for(let f=0;f<n.length;f++){const p=r.lineHeight*(f-1)+h,m=r.lineHeight*f;let _=m;f>0&&p>m&&(_=(m+p)/2);const y=m+h,x=r.lineHeight*(f+1);let b=y;f+1<n.length&&x<y&&(b=(y+x)/2);const E=(b-_)/c;for(let w=0;w<u.length;w++){let T=0;typeof d[w]=="number"?T=d[w]:T=w/u.length;let C=Math.min(1,Math.max(0,_/c+T*E));C=Number(C.toFixed(5)),s.addColorStop(C,u[w])}}}else{s=this.context.createLinearGradient(a,c/2,l+a,c/2);const h=u.length+1;let f=1;for(let p=0;p<u.length;p++){let m;typeof d[p]=="number"?m=d[p]:m=f/h,s.addColorStop(m,u[p]),f++}}return s}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},iMe,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const n=Cc(this.scale.x)||1;this.scale.x=n*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const n=Cc(this.scale.y)||1;this.scale.y=n*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof Io?this._style=e:this._style=new Io(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};UK.defaultAutoResolution=!0;let dC=UK;const sMe=Object.freeze(Object.defineProperty({__proto__:null,TEXT_GRADIENT:H1,Text:dC,TextMetrics:_c,TextStyle:Io},Symbol.toStringTag,{value:"Module"}));class Wy{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class Wv{static test(e){return typeof e=="string"&&e.startsWith("info face=")}static parse(e){const n=e.match(/^[a-z]+\s+.+$/gm),r={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in n){const o=n[s].match(/^[a-z]+/gm)[0],a=n[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(const c in a){const u=a[c].split("="),d=u[0],h=u[1].replace(/"/gm,""),f=parseFloat(h),p=isNaN(f)?h:f;l[d]=p}r[o].push(l)}const i=new Wy;return r.info.forEach(s=>i.info.push({face:s.face,size:parseInt(s.size,10)})),r.common.forEach(s=>i.common.push({lineHeight:parseInt(s.lineHeight,10)})),r.page.forEach(s=>i.page.push({id:parseInt(s.id,10),file:s.file})),r.char.forEach(s=>i.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),r.kerning.forEach(s=>i.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),r.distanceField.forEach(s=>i.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),i}}class Hw{static test(e){const n=e;return typeof e!="string"&&"getElementsByTagName"in e&&n.getElementsByTagName("page").length&&n.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(e){const n=new Wy,r=e.getElementsByTagName("info"),i=e.getElementsByTagName("common"),s=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),l=e.getElementsByTagName("distanceField");for(let c=0;c<r.length;c++)n.info.push({face:r[c].getAttribute("face"),size:parseInt(r[c].getAttribute("size"),10)});for(let c=0;c<i.length;c++)n.common.push({lineHeight:parseInt(i[c].getAttribute("lineHeight"),10)});for(let c=0;c<s.length;c++)n.page.push({id:parseInt(s[c].getAttribute("id"),10)||0,file:s[c].getAttribute("file")});for(let c=0;c<o.length;c++){const u=o[c];n.char.push({id:parseInt(u.getAttribute("id"),10),page:parseInt(u.getAttribute("page"),10)||0,x:parseInt(u.getAttribute("x"),10),y:parseInt(u.getAttribute("y"),10),width:parseInt(u.getAttribute("width"),10),height:parseInt(u.getAttribute("height"),10),xoffset:parseInt(u.getAttribute("xoffset"),10),yoffset:parseInt(u.getAttribute("yoffset"),10),xadvance:parseInt(u.getAttribute("xadvance"),10)})}for(let c=0;c<a.length;c++)n.kerning.push({first:parseInt(a[c].getAttribute("first"),10),second:parseInt(a[c].getAttribute("second"),10),amount:parseInt(a[c].getAttribute("amount"),10)});for(let c=0;c<l.length;c++)n.distanceField.push({fieldType:l[c].getAttribute("fieldType"),distanceRange:parseInt(l[c].getAttribute("distanceRange"),10)});return n}}class Vw{static test(e){return typeof e=="string"&&e.includes("<font>")?Hw.test(ht.ADAPTER.parseXML(e)):!1}static parse(e){return Hw.parse(ht.ADAPTER.parseXML(e))}}const MP=[Wv,Hw,Vw];function zK(t){for(let e=0;e<MP.length;e++)if(MP[e].test(t))return MP[e];return null}function oMe(t,e,n,r,i,s){const o=n.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const l=n.dropShadow?n.dropShadowDistance:0,c=n.padding||0,u=t.width/r-l-c*2,d=t.height/r-l-c*2,h=o.slice(),f=n.fillGradientStops.slice();if(!f.length){const p=h.length+1;for(let m=1;m<p;++m)f.push(m/p)}if(h.unshift(o[0]),f.unshift(0),h.push(o[o.length-1]),f.push(1),n.fillGradientType===H1.LINEAR_VERTICAL){a=e.createLinearGradient(u/2,c,u/2,d+c);let p=0;const m=(s.fontProperties.fontSize+n.strokeThickness)/d;for(let _=0;_<i.length;_++){const y=s.lineHeight*_;for(let x=0;x<h.length;x++){let b=0;typeof f[x]=="number"?b=f[x]:b=x/h.length;const E=y/d+b*m;let w=Math.max(p,E);w=Math.min(w,1),a.addColorStop(w,h[x]),p=w}}}else{a=e.createLinearGradient(c,d/2,u+c,d/2);const p=h.length+1;let m=1;for(let _=0;_<h.length;_++){let y;typeof f[_]=="number"?y=f[_]:y=m/p,a.addColorStop(y,h[_]),m++}}return a}function aMe(t,e,n,r,i,s,o){const a=n.text,l=n.fontProperties;e.translate(r,i),e.scale(s,s);const c=o.strokeThickness/2,u=-(o.strokeThickness/2);if(e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=oMe(t,e,o,s,[a],n),e.strokeStyle=o.stroke,o.dropShadow){const d=o.dropShadowColor,h=o.dropShadowBlur*s,f=o.dropShadowDistance*s;e.shadowColor=Tn.shared.setValue(d).setAlpha(o.dropShadowAlpha).toRgbaString(),e.shadowBlur=h,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*f,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*f}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;o.stroke&&o.strokeThickness&&e.strokeText(a,c,u+n.lineHeight-l.descent),o.fill&&e.fillText(a,c,u+n.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function _E(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}function $K(t){return Array.from?Array.from(t):t.split("")}function lMe(t){typeof t=="string"&&(t=[t]);const e=[];for(let n=0,r=t.length;n<r;n++){const i=t[n];if(Array.isArray(i)){if(i.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${i.length}.`);const s=i[0].charCodeAt(0),o=i[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let a=s,l=o;a<=l;a++)e.push(String.fromCharCode(a))}else e.push(...$K(i))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}const Ru=class xl{constructor(e,n,r){var u;const[i]=e.info,[s]=e.common,[o]=e.page,[a]=e.distanceField,l=Gl(o.file),c={};this._ownsTextures=r,this.font=i.face,this.size=i.size,this.lineHeight=s.lineHeight/l,this.chars={},this.pageTextures=c;for(let d=0;d<e.page.length;d++){const{id:h,file:f}=e.page[d];c[h]=n instanceof Array?n[d]:n[f],a!=null&&a.fieldType&&a.fieldType!=="none"&&(c[h].baseTexture.alphaMode=Is.NO_PREMULTIPLIED_ALPHA,c[h].baseTexture.mipmap=Qa.OFF)}for(let d=0;d<e.char.length;d++){const{id:h,page:f}=e.char[d];let{x:p,y:m,width:_,height:y,xoffset:x,yoffset:b,xadvance:E}=e.char[d];p/=l,m/=l,_/=l,y/=l,x/=l,b/=l,E/=l;const w=new Wt(p+c[f].frame.x/l,m+c[f].frame.y/l,_,y);this.chars[h]={xOffset:x,yOffset:b,xAdvance:E,kerning:{},texture:new zt(c[f].baseTexture,w),page:f}}for(let d=0;d<e.kerning.length;d++){let{first:h,second:f,amount:p}=e.kerning[d];h/=l,f/=l,p/=l,this.chars[f]&&(this.chars[f].kerning[h]=p)}this.distanceFieldRange=a==null?void 0:a.distanceRange,this.distanceFieldType=((u=a==null?void 0:a.fieldType)==null?void 0:u.toLowerCase())??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,n,r){let i;if(e instanceof Wy)i=e;else{const o=zK(e);if(!o)throw new Error("Unrecognized data format for font.");i=o.parse(e)}n instanceof zt&&(n=[n]);const s=new xl(i,n,r);return xl.available[s.font]=s,s}static uninstall(e){const n=xl.available[e];if(!n)throw new Error(`No font found named '${e}'`);n.destroy(),delete xl.available[e]}static from(e,n,r){if(!e)throw new Error("[BitmapFont] Property `name` is required.");const{chars:i,padding:s,resolution:o,textureWidth:a,textureHeight:l,...c}=Object.assign({},xl.defaultOptions,r),u=lMe(i),d=n instanceof Io?n:new Io(n),h=a,f=new Wy;f.info[0]={face:d.fontFamily,size:d.fontSize},f.common[0]={lineHeight:d.fontSize};let p=0,m=0,_,y,x,b=0;const E=[];for(let T=0;T<u.length;T++){_||(_=ht.ADAPTER.createCanvas(),_.width=a,_.height=l,y=_.getContext("2d"),x=new Qt(_,{resolution:o,...c}),E.push(new zt(x)),f.page.push({id:E.length-1,file:""}));const C=u[T],P=_c.measureText(C,d,!1,_),M=P.width,N=Math.ceil(P.height),F=Math.ceil((d.fontStyle==="italic"?2:1)*M);if(m>=l-N*o){if(m===0)throw new Error(`[BitmapFont] textureHeight ${l}px is too small (fontFamily: '${d.fontFamily}', fontSize: ${d.fontSize}px, char: '${C}')`);--T,_=null,y=null,x=null,m=0,p=0,b=0;continue}if(b=Math.max(N+P.fontProperties.descent,b),F*o+p>=h){if(p===0)throw new Error(`[BitmapFont] textureWidth ${a}px is too small (fontFamily: '${d.fontFamily}', fontSize: ${d.fontSize}px, char: '${C}')`);--T,m+=b*o,m=Math.ceil(m),p=0,b=0;continue}aMe(_,y,P,p,m,o,d);const I=_E(P.text);f.char.push({id:I,page:E.length-1,x:p/o,y:m/o,width:F,height:N,xoffset:0,yoffset:0,xadvance:M-(d.dropShadow?d.dropShadowDistance:0)-(d.stroke?d.strokeThickness:0)}),p+=(F+2*s)*o,p=Math.ceil(p)}if(!(r!=null&&r.skipKerning))for(let T=0,C=u.length;T<C;T++){const P=u[T];for(let M=0;M<C;M++){const N=u[M],F=y.measureText(P).width,I=y.measureText(N).width,k=y.measureText(P+N).width-(F+I);k&&f.kerning.push({first:_E(P),second:_E(N),amount:k})}}const w=new xl(f,E,!0);return xl.available[e]!==void 0&&xl.uninstall(e),xl.available[e]=w,w}};Ru.ALPHA=[["a","z"],["A","Z"]," "],Ru.NUMERIC=[["0","9"]],Ru.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],Ru.ASCII=[[" ","~"]],Ru.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:Ru.ALPHANUMERIC},Ru.available={};let pc=Ru;class jK{constructor(e,n){this.uvBuffer=e,this.uvMatrix=n,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const n=this.uvBuffer.data;(!this.data||this.data.length!==n.length)&&(this.data=new Float32Array(n.length)),this.uvMatrix.multiplyUvs(n,this.data),this._updateID++}}const LP=new Ot,o6=new ud,GK=class HK extends qi{constructor(e,n,r,i=na.TRIANGLES){super(),this.geometry=e,this.shader=n,this.state=r||el.for2d(),this.drawMode=i,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=ht.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const n=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===na.TRIANGLES&&n.length<HK.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const n=this.shader;n.alpha=this.worldAlpha,n.update&&n.update(),e.batch.flush(),n.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(n),e.state.set(this.state),e.geometry.bind(this.geometry,n),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const n=this.geometry,r=this.shader;r.uvMatrix&&(r.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=n.indexBuffer.data,this._tintRGB=r._tintRGB,this._texture=r.texture;const i=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[i]),e.plugins[i].render(this)}calculateVertices(){const e=this.geometry.buffers[0],n=e.data,r=e._updateID;if(r===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==n.length&&(this.vertexData=new Float32Array(n.length));const i=this.transform.worldTransform,s=i.a,o=i.b,a=i.c,l=i.d,c=i.tx,u=i.ty,d=this.vertexData;for(let h=0;h<d.length/2;h++){const f=n[h*2],p=n[h*2+1];d[h*2]=s*f+a*p+c,d[h*2+1]=o*f+l*p+u}if(this._roundPixels){const h=ht.RESOLUTION;for(let f=0;f<d.length;++f)d[f]=Math.round(d[f]*h)/h}this.vertexDirty=r}calculateUvs(){const e=this.geometry.buffers[1],n=this.shader;n.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new jK(e,n.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,LP);const n=this.geometry.getBuffer("aVertexPosition").data,r=o6.points,i=this.geometry.getIndex().data,s=i.length,o=this.drawMode===4?3:1;for(let a=0;a+2<s;a+=o){const l=i[a]*2,c=i[a+1]*2,u=i[a+2]*2;if(r[0]=n[l],r[1]=n[l+1],r[2]=n[c],r[3]=n[c+1],r[4]=n[u],r[5]=n[u+1],o6.contains(LP.x,LP.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};GK.BATCHABLE_SIZE=100;let ng=GK;class V1 extends Lg{constructor(e,n,r){super();const i=new Kr(e),s=new Kr(n,!0),o=new Kr(r,!0,!0);this.addAttribute("aVertexPosition",i,2,!1,At.FLOAT).addAttribute("aTextureCoord",s,2,!1,At.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var cMe=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,uMe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class rg extends Lc{constructor(e,n){const r={uSampler:e,alpha:1,uTextureMatrix:Br.IDENTITY,uColor:new Float32Array([1,1,1,1])};n=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},n),n.uniforms&&Object.assign(r,n.uniforms),super(n.program||Ll.from(uMe,cMe),r),this._colorDirty=!1,this.uvMatrix=new cC(e),this.batchable=n.program===void 0,this.pluginName=n.pluginName,this._tintColor=new Tn(n.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=n.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const e=this.texture.baseTexture.alphaMode;Tn.shared.setValue(this._tintColor).premultiply(this._alpha,e).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}const dMe=Object.freeze(Object.defineProperty({__proto__:null,Mesh:ng,MeshBatchUvs:jK,MeshGeometry:V1,MeshMaterial:rg},Symbol.toStringTag,{value:"Module"}));var hMe=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,fMe=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const a6=[],l6=[],c6=[],VK=class WK extends qi{constructor(e,n={}){super();const{align:r,tint:i,maxWidth:s,letterSpacing:o,fontName:a,fontSize:l}=Object.assign({},WK.styleDefaults,n);if(!pc.available[a])throw new Error(`Missing BitmapFont "${a}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=r,this._tintColor=new Tn(i),this._font=void 0,this._fontName=a,this._fontSize=l,this.text=e,this._maxWidth=s,this._maxLineHeight=0,this._letterSpacing=o,this._anchor=new Ua(()=>{this.dirty=!0},this,0,0),this._roundPixels=ht.ROUND_PIXELS,this.dirty=!0,this._resolution=ht.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var F;const e=pc.available[this._fontName],n=this.fontSize,r=n/e.size,i=new Ot,s=[],o=[],a=[],l=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",c=$K(l),u=this._maxWidth*e.size/n,d=e.distanceFieldType==="none"?a6:l6;let h=null,f=0,p=0,m=0,_=-1,y=0,x=0,b=0,E=0;for(let I=0;I<c.length;I++){const k=c[I],R=_E(k);if(/(?:\s)/.test(k)&&(_=I,y=f,E++),k==="\r"||k===`
`){o.push(f),a.push(-1),p=Math.max(p,f),++m,++x,i.x=0,i.y+=e.lineHeight,h=null,E=0;continue}const z=e.chars[R];if(!z)continue;h&&z.kerning[h]&&(i.x+=z.kerning[h]);const X=c6.pop()||{texture:zt.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Ot};X.texture=z.texture,X.line=m,X.charCode=R,X.position.x=Math.round(i.x+z.xOffset+this._letterSpacing/2),X.position.y=Math.round(i.y+z.yOffset),X.prevSpaces=E,s.push(X),f=X.position.x+Math.max(z.xAdvance-z.xOffset,z.texture.orig.width),i.x+=z.xAdvance+this._letterSpacing,b=Math.max(b,z.yOffset+z.texture.height),h=R,_!==-1&&u>0&&i.x>u&&(++x,Wh(s,1+_-x,1+I-_),I=_,_=-1,o.push(y),a.push(s.length>0?s[s.length-1].prevSpaces:0),p=Math.max(p,y),m++,i.x=0,i.y+=e.lineHeight,h=null,E=0)}const w=c[c.length-1];w!=="\r"&&w!==`
`&&(/(?:\s)/.test(w)&&(f=y),o.push(f),p=Math.max(p,f),a.push(-1));const T=[];for(let I=0;I<=m;I++){let k=0;this._align==="right"?k=p-o[I]:this._align==="center"?k=(p-o[I])/2:this._align==="justify"&&(k=a[I]<0?0:(p-o[I])/a[I]),T.push(k)}const C=s.length,P={},M=[],N=this._activePagesMeshData;d.push(...N);for(let I=0;I<C;I++){const k=s[I].texture,R=k.baseTexture.uid;if(!P[R]){let z=d.pop();if(!z){const G=new V1;let j,H;e.distanceFieldType==="none"?(j=new rg(zt.EMPTY),H=Ft.NORMAL):(j=new rg(zt.EMPTY,{program:Ll.from(fMe,hMe),uniforms:{uFWidth:0}}),H=Ft.NORMAL_NPM);const Q=new ng(G,j);Q.blendMode=H,z={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:Q,vertices:null,uvs:null,indices:null}}z.index=0,z.indexCount=0,z.vertexCount=0,z.uvsCount=0,z.total=0;const{_textureCache:X}=this;X[R]=X[R]||new zt(k.baseTexture),z.mesh.texture=X[R],z.mesh.tint=this._tintColor.value,M.push(z),P[R]=z}P[R].total++}for(let I=0;I<N.length;I++)M.includes(N[I])||this.removeChild(N[I].mesh);for(let I=0;I<M.length;I++)M[I].mesh.parent!==this&&this.addChild(M[I].mesh);this._activePagesMeshData=M;for(const I in P){const k=P[I],R=k.total;if(!(((F=k.indices)==null?void 0:F.length)>6*R)||k.vertices.length<ng.BATCHABLE_SIZE*2)k.vertices=new Float32Array(4*2*R),k.uvs=new Float32Array(4*2*R),k.indices=new Uint16Array(6*R);else{const z=k.total,X=k.vertices;for(let G=z*4*2;G<X.length;G++)X[G]=0}k.mesh.size=6*R}for(let I=0;I<C;I++){const k=s[I];let R=k.position.x+T[k.line]*(this._align==="justify"?k.prevSpaces:1);this._roundPixels&&(R=Math.round(R));const z=R*r,X=k.position.y*r,G=k.texture,j=P[G.baseTexture.uid],H=G.frame,Q=G._uvs,V=j.index++;j.indices[V*6+0]=0+V*4,j.indices[V*6+1]=1+V*4,j.indices[V*6+2]=2+V*4,j.indices[V*6+3]=0+V*4,j.indices[V*6+4]=2+V*4,j.indices[V*6+5]=3+V*4,j.vertices[V*8+0]=z,j.vertices[V*8+1]=X,j.vertices[V*8+2]=z+H.width*r,j.vertices[V*8+3]=X,j.vertices[V*8+4]=z+H.width*r,j.vertices[V*8+5]=X+H.height*r,j.vertices[V*8+6]=z,j.vertices[V*8+7]=X+H.height*r,j.uvs[V*8+0]=Q.x0,j.uvs[V*8+1]=Q.y0,j.uvs[V*8+2]=Q.x1,j.uvs[V*8+3]=Q.y1,j.uvs[V*8+4]=Q.x2,j.uvs[V*8+5]=Q.y2,j.uvs[V*8+6]=Q.x3,j.uvs[V*8+7]=Q.y3}this._textWidth=p*r,this._textHeight=(i.y+e.lineHeight)*r;for(const I in P){const k=P[I];if(this.anchor.x!==0||this.anchor.y!==0){let G=0;const j=this._textWidth*this.anchor.x,H=this._textHeight*this.anchor.y;for(let Q=0;Q<k.total;Q++)k.vertices[G++]-=j,k.vertices[G++]-=H,k.vertices[G++]-=j,k.vertices[G++]-=H,k.vertices[G++]-=j,k.vertices[G++]-=H,k.vertices[G++]-=j,k.vertices[G++]-=H}this._maxLineHeight=b*r;const R=k.mesh.geometry.getBuffer("aVertexPosition"),z=k.mesh.geometry.getBuffer("aTextureCoord"),X=k.mesh.geometry.getIndex();R.data=k.vertices,z.data=k.uvs,X.data=k.indices,R.update(),z.update(),X.update()}for(let I=0;I<s.length;I++)c6.push(s[I]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:n,distanceFieldType:r,size:i}=pc.available[this._fontName];if(r!=="none"){const{a:s,b:o,c:a,d:l}=this.worldTransform,c=Math.sqrt(s*s+o*o),u=Math.sqrt(a*a+l*l),d=(Math.abs(c)+Math.abs(u))/2,h=this.fontSize/i,f=e._view.resolution;for(const p of this._activePagesMeshData)p.mesh.shader.uniforms.uFWidth=d*n*h*f}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=pc.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(e){if(this.tint!==e){this._tintColor.setValue(e);for(let n=0;n<this._activePagesMeshData.length;n++)this._activePagesMeshData[n].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!pc.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??pc.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:n}=this,r=pc.available[this._fontName].distanceFieldType==="none"?a6:l6;r.push(...this._activePagesMeshData);for(const i of this._activePagesMeshData)this.removeChild(i.mesh);this._activePagesMeshData=[],r.filter(i=>n[i.mesh.texture.baseTexture.uid]).forEach(i=>{i.mesh.texture=zt.EMPTY});for(const i in n)n[i].destroy(),delete n[i];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(e)}};VK.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};let XK=VK;const u6={loader:rt.LoadParser,resolver:rt.ResolveParser,cache:rt.CacheParser,detection:rt.DetectionParser};bt.handle(rt.Asset,t=>{const e=t.ref;Object.entries(u6).filter(([n])=>!!e[n]).forEach(([n,r])=>bt.add(Object.assign(e[n],{extension:e[n].extension??r})))},t=>{const e=t.ref;Object.keys(u6).filter(n=>!!e[n]).forEach(n=>bt.remove(e[n]))});class pMe{constructor(e,n=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=n}add(e){e.forEach(n=>{this._assetList.push(n)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],n=Math.min(this._assetList.length,this._maxConcurrent);for(let r=0;r<n;r++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function Nf(t,e){if(Array.isArray(e)){for(const n of e)if(t.startsWith(`data:${n}`))return!0;return!1}return t.startsWith(`data:${e}`)}function Jc(t,e){const n=t.split("?")[0],r=ei.extname(n).toLowerCase();return Array.isArray(e)?e.includes(r):r===e}const ea=(t,e,n=!1)=>(Array.isArray(t)||(t=[t]),e?t.map(r=>typeof r=="string"||n?e(r):r):t),Ww=(t,e)=>{const n=e.split("?")[1];return n&&(t+=`?${n}`),t};function YK(t,e,n,r,i){const s=e[n];for(let o=0;o<s.length;o++){const a=s[o];n<e.length-1?YK(t.replace(r[n],a),e,n+1,r,i):i.push(t.replace(r[n],a))}}function KK(t){const e=/\{(.*?)\}/g,n=t.match(e),r=[];if(n){const i=[];n.forEach(s=>{const o=s.substring(1,s.length-1).split(",");i.push(o)}),YK(t,i,0,n,r)}else r.push(t);return r}const Xy=t=>!Array.isArray(t);class mMe{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const n=this._cache.get(e);return n||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),n}set(e,n){const r=ea(e);let i;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.test(n)){i=l.getCacheableAssets(r,n);break}}i||(i={},r.forEach(a=>{i[a]=n}));const s=Object.keys(i),o={cacheKeys:s,keys:r};if(r.forEach(a=>{this._cacheMap.set(a,o)}),s.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==n&&console.warn("[Cache] already has key:",a),this._cache.set(a,i[a])}),n instanceof zt){const a=n;r.forEach(l=>{a.baseTexture!==zt.EMPTY.baseTexture&&Qt.addToCache(a.baseTexture,l),zt.addToCache(a,l)})}}remove(e){if(!this._cacheMap.has(e)){console.warn(`[Assets] Asset id ${e} was not found in the Cache`);return}const n=this._cacheMap.get(e);n.cacheKeys.forEach(r=>{this._cache.delete(r)}),n.keys.forEach(r=>{this._cacheMap.delete(r)})}get parsers(){return this._parsers}}const Uu=new mMe;class gMe{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,n,r)=>(this._parsersValidated=!1,e[n]=r,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,n){const r={promise:null,parser:null};return r.promise=(async()=>{var o,a;let i=null,s=null;if(n.loadParser&&(s=this._parserHash[n.loadParser],s||console.warn(`[Assets] specified load parser "${n.loadParser}" not found while loading ${e}`)),!s){for(let l=0;l<this.parsers.length;l++){const c=this.parsers[l];if(c.load&&((o=c.test)!=null&&o.call(c,e,n,this))){s=c;break}}if(!s)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}i=await s.load(e,n,this),r.parser=s;for(let l=0;l<this.parsers.length;l++){const c=this.parsers[l];c.parse&&c.parse&&await((a=c.testParse)==null?void 0:a.call(c,i,n,this))&&(i=await c.parse(i,n,this)||i,r.parser=c)}return i})(),r}async load(e,n){this._parsersValidated||this._validateParsers();let r=0;const i={},s=Xy(e),o=ea(e,c=>({alias:[c],src:c})),a=o.length,l=o.map(async c=>{const u=ei.toAbsolute(c.src);if(!i[c.src])try{this.promiseCache[u]||(this.promiseCache[u]=this._getLoadPromiseAndParser(u,c)),i[c.src]=await this.promiseCache[u].promise,n&&n(++r/a)}catch(d){throw delete this.promiseCache[u],delete i[c.src],new Error(`[Loader.load] Failed to load ${u}.
${d}`)}});return await Promise.all(l),s?i[o[0].src]:i}async unload(e){const n=ea(e,r=>({alias:[r],src:r})).map(async r=>{var o,a;const i=ei.toAbsolute(r.src),s=this.promiseCache[i];if(s){const l=await s.promise;delete this.promiseCache[i],(a=(o=s.parser)==null?void 0:o.unload)==null||a.call(o,l,r,this)}});await Promise.all(n)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,n)=>(e[n.name]&&console.warn(`[Assets] loadParser name conflict "${n.name}"`),{...e,[n.name]:n}),{})}}var ga=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))(ga||{});const vMe=".json",yMe="application/json",qK={extension:{type:rt.LoadParser,priority:ga.Low},name:"loadJson",test(t){return Nf(t,yMe)||Jc(t,vMe)},async load(t){return await(await ht.ADAPTER.fetch(t)).json()}};bt.add(qK);const _Me=".txt",bMe="text/plain",ZK={name:"loadTxt",extension:{type:rt.LoadParser,priority:ga.Low},test(t){return Nf(t,bMe)||Jc(t,_Me)},async load(t){return await(await ht.ADAPTER.fetch(t)).text()}};bt.add(ZK);const xMe=["normal","bold","100","200","300","400","500","600","700","800","900"],EMe=[".ttf",".otf",".woff",".woff2"],wMe=["font/ttf","font/otf","font/woff","font/woff2"],TMe=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function QK(t){const e=ei.extname(t),n=ei.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1));let r=n.length>0;for(const s of n)if(!s.match(TMe)){r=!1;break}let i=n.join(" ");return r||(i=`"${i.replace(/[\\"]/g,"\\$&")}"`),i}const SMe=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function CMe(t){return SMe.test(t)?t:encodeURI(t)}const JK={extension:{type:rt.LoadParser,priority:ga.Low},name:"loadWebFont",test(t){return Nf(t,wMe)||Jc(t,EMe)},async load(t,e){var r,i,s;const n=ht.ADAPTER.getFontFaceSet();if(n){const o=[],a=((r=e.data)==null?void 0:r.family)??QK(t),l=((s=(i=e.data)==null?void 0:i.weights)==null?void 0:s.filter(u=>xMe.includes(u)))??["normal"],c=e.data??{};for(let u=0;u<l.length;u++){const d=l[u],h=new FontFace(a,`url(${CMe(t)})`,{...c,weight:d});await h.load(),n.add(h),o.push(h)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(t){(Array.isArray(t)?t:[t]).forEach(e=>ht.ADAPTER.getFontFaceSet().delete(e))}};bt.add(JK);const AMe=`(function() {
  "use strict";
  const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";
  async function checkImageBitmap() {
    try {
      if (typeof createImageBitmap != "function")
        return !1;
      const imageBlob = await (await fetch(WHITE_PNG)).blob(), imageBitmap = await createImageBitmap(imageBlob);
      return imageBitmap.width === 1 && imageBitmap.height === 1;
    } catch {
      return !1;
    }
  }
  checkImageBitmap().then((result) => {
    self.postMessage(result);
  });
})();
`;let wm=null,hL=class extends Worker{constructor(){wm||(wm=URL.createObjectURL(new Blob([AMe],{type:"application/javascript"}))),super(wm)}};hL.revokeObjectURL=function(){wm&&(URL.revokeObjectURL(wm),wm=null)};const RMe=`(function() {
  "use strict";
  async function loadImageBitmap(url) {
    const response = await fetch(url);
    if (!response.ok)
      throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \${response.status} \${response.statusText}\`);
    const imageBlob = await response.blob();
    return await createImageBitmap(imageBlob);
  }
  self.onmessage = async (event) => {
    try {
      const imageBitmap = await loadImageBitmap(event.data.data[0]);
      self.postMessage({
        data: imageBitmap,
        uuid: event.data.uuid,
        id: event.data.id
      }, [imageBitmap]);
    } catch (e) {
      self.postMessage({
        error: e,
        uuid: event.data.uuid,
        id: event.data.id
      });
    }
  };
})();
`;let Tm=null;class eq extends Worker{constructor(){Tm||(Tm=URL.createObjectURL(new Blob([RMe],{type:"application/javascript"}))),super(Tm)}}eq.revokeObjectURL=function(){Tm&&(URL.revokeObjectURL(Tm),Tm=null)};let d6=0,OP;class PMe{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const n=new hL;n.addEventListener("message",r=>{n.terminate(),hL.revokeObjectURL(),e(r.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){OP===void 0&&(OP=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<OP&&(this._createdWorkers++,e=new eq,e.addEventListener("message",n=>{this.complete(n.data),this.returnWorker(n.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){e.error!==void 0?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,n){await this._initWorkers();const r=new Promise((i,s)=>{this.queue.push({id:e,arguments:n,resolve:i,reject:s})});return this.next(),r}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const n=this.queue.pop(),r=n.id;this.resolveHash[d6]={resolve:n.resolve,reject:n.reject},e.postMessage({data:n.arguments,uuid:d6++,id:r})}}const h6=new PMe;function Og(t,e,n){t.resource.internal=!0;const r=new zt(t),i=()=>{delete e.promiseCache[n],Uu.has(n)&&Uu.remove(n)};return r.baseTexture.once("destroyed",()=>{n in e.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),i())}),r.once("destroyed",()=>{t.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),i())}),r}const IMe=[".jpeg",".jpg",".png",".webp",".avif"],MMe=["image/jpeg","image/png","image/webp","image/avif"];async function tq(t){const e=await ht.ADAPTER.fetch(t);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${e.status} ${e.statusText}`);const n=await e.blob();return await createImageBitmap(n)}const W1={name:"loadTextures",extension:{type:rt.LoadParser,priority:ga.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(t){return Nf(t,MMe)||Jc(t,IMe)},async load(t,e,n){var a;const r=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let i;r?this.config.preferWorkers&&await h6.isImageBitmapSupported()?i=await h6.loadImageBitmap(t):i=await tq(t):i=await new Promise((l,c)=>{const u=new Image;u.crossOrigin=this.config.crossOrigin,u.src=t,u.complete?l(u):(u.onload=()=>l(u),u.onerror=d=>c(d))});const s={...e.data};s.resolution??(s.resolution=Gl(t)),r&&((a=s.resourceOptions)==null?void 0:a.ownsImageBitmap)===void 0&&(s.resourceOptions={...s.resourceOptions},s.resourceOptions.ownsImageBitmap=!0);const o=new Qt(i,s);return o.resource.src=t,Og(o,n,t)},unload(t){t.destroy(!0)}};bt.add(W1);const LMe=".svg",OMe="image/svg+xml",nq={extension:{type:rt.LoadParser,priority:ga.High},name:"loadSVG",test(t){return Nf(t,OMe)||Jc(t,LMe)},async testParse(t){return Gw.test(t)},async parse(t,e,n){var s;const r=new Gw(t,(s=e==null?void 0:e.data)==null?void 0:s.resourceOptions);await r.load();const i=new Qt(r,{resolution:Gl(t),...e==null?void 0:e.data});return i.resource.src=e.src,Og(i,n,e.src)},async load(t,e){return(await ht.ADAPTER.fetch(t)).text()},unload:W1.unload};bt.add(nq);const kMe=[".mp4",".m4v",".webm",".ogv"],NMe=["video/mp4","video/webm","video/ogg"],rq={name:"loadVideo",extension:{type:rt.LoadParser,priority:ga.High},config:{defaultAutoPlay:!0,defaultUpdateFPS:0,defaultLoop:!1,defaultMuted:!1,defaultPlaysinline:!0},test(t){return Nf(t,NMe)||Jc(t,kMe)},async load(t,e,n){var o;let r;const i=await(await ht.ADAPTER.fetch(t)).blob(),s=URL.createObjectURL(i);try{const a={autoPlay:this.config.defaultAutoPlay,updateFPS:this.config.defaultUpdateFPS,loop:this.config.defaultLoop,muted:this.config.defaultMuted,playsinline:this.config.defaultPlaysinline,...(o=e==null?void 0:e.data)==null?void 0:o.resourceOptions,autoLoad:!0},l=new Z3(s,a);await l.load();const c=new Qt(l,{alphaMode:await FY(),resolution:Gl(t),...e==null?void 0:e.data});c.resource.src=t,r=Og(c,n,t),r.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(s)})}catch(a){throw URL.revokeObjectURL(s),a}return r},unload(t){t.destroy(!0)}};bt.add(rq);class DMe{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,n)=>`${e}${this._bundleIdConnector}${n}`,extractAssetIdFromBundle:(e,n)=>n.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(n=>{this._preferredOrder.push(n),n.priority||(n.priority=Object.keys(n.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const n=e;this._defaultSearchParams=Object.keys(n).map(r=>`${encodeURIComponent(r)}=${encodeURIComponent(n[r])}`).join("&")}}getAlias(e){const{alias:n,name:r,src:i,srcs:s}=e;return ea(n||r||i||s,o=>typeof o=="string"?o:Array.isArray(o)?o.map(a=>(a==null?void 0:a.src)??(a==null?void 0:a.srcs)??a):o!=null&&o.src||o!=null&&o.srcs?o.src??o.srcs:o,!0)}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(n=>{this.addBundle(n.name,n.assets)})}addBundle(e,n){const r=[];Array.isArray(n)?n.forEach(i=>{const s=i.src??i.srcs,o=i.alias??i.name;let a;if(typeof o=="string"){const l=this._createBundleAssetId(e,o);r.push(l),a=[o,l]}else{const l=o.map(c=>this._createBundleAssetId(e,c));r.push(...l),a=[...o,...l]}this.add({...i,alias:a,src:s})}):Object.keys(n).forEach(i=>{const s=[i,this._createBundleAssetId(e,i)];if(typeof n[i]=="string")this.add({alias:s,src:n[i]});else if(Array.isArray(n[i]))this.add({alias:s,src:n[i]});else{const o=n[i],a=o.src??o.srcs;this.add({...o,alias:s,src:Array.isArray(a)?a:[a]})}r.push(...s)}),this._bundles[e]=r}add(e,n,r,i,s){const o=[];typeof e=="string"||Array.isArray(e)&&typeof e[0]=="string"?(Ht("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),o.push({alias:e,src:n,data:r,format:i,loadParser:s})):Array.isArray(e)?o.push(...e):o.push(e);let a;a=l=>{this.hasKey(l)&&console.warn(`[Resolver] already has key: ${l} overwriting`)},ea(o).forEach(l=>{const{src:c,srcs:u}=l;let{data:d,format:h,loadParser:f}=l;const p=ea(c||u).map(y=>typeof y=="string"?KK(y):Array.isArray(y)?y:[y]),m=this.getAlias(l);Array.isArray(m)?m.forEach(a):a(m);const _=[];p.forEach(y=>{y.forEach(x=>{let b={};if(typeof x!="object"){b.src=x;for(let E=0;E<this._parsers.length;E++){const w=this._parsers[E];if(w.test(x)){b=w.parse(x);break}}}else d=x.data??d,h=x.format??h,f=x.loadParser??f,b={...b,...x};if(!m)throw new Error(`[Resolver] alias is undefined for this asset: ${b.src}`);b=this.buildResolvedAsset(b,{aliases:m,data:d,format:h,loadParser:f}),_.push(b)})}),m.forEach(y=>{this._assetMap[y]=_})})}resolveBundle(e){const n=Xy(e);e=ea(e);const r={};return e.forEach(i=>{const s=this._bundles[i];if(s){const o=this.resolve(s),a={};for(const l in o){const c=o[l];a[this._extractAssetIdFromBundle(i,l)]=c}r[i]=a}}),n?r[e[0]]:r}resolveUrl(e){const n=this.resolve(e);if(typeof e!="string"){const r={};for(const i in n)r[i]=n[i].src;return r}return n.src}resolve(e){const n=Xy(e);e=ea(e);const r={};return e.forEach(i=>{if(!this._resolverHash[i])if(this._assetMap[i]){let s=this._assetMap[i];const o=s[0],a=this._getPreferredOrder(s);a==null||a.priority.forEach(l=>{a.params[l].forEach(c=>{const u=s.filter(d=>d[l]?d[l]===c:!1);u.length&&(s=u)})}),this._resolverHash[i]=s[0]??o}else this._resolverHash[i]=this.buildResolvedAsset({alias:[i],src:i},{});r[i]=this._resolverHash[i]}),n?r[e[0]]:r}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let n=0;n<e.length;n++){const r=e[0],i=this._preferredOrder.find(s=>s.params.format.includes(r.format));if(i)return i}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const n=/\?/.test(e)?"&":"?";return`${e}${n}${this._defaultSearchParams}`}buildResolvedAsset(e,n){const{aliases:r,data:i,loadParser:s,format:o}=n;return(this._basePath||this._rootPath)&&(e.src=ei.toAbsolute(e.src,this._basePath,this._rootPath)),e.alias=r??e.alias??[e.src],e.src=this._appendDefaultSearchParams(e.src),e.data={...i||{},...e.data},e.loadParser=s??e.loadParser,e.format=o??ei.extname(e.src).slice(1),e.srcs=e.src,e.name=e.alias,e}}class iq{constructor(){this._detections=[],this._initialized=!1,this.resolver=new DMe,this.loader=new gMe,this.cache=Uu,this._backgroundLoader=new pMe(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var s,o;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let a=e.manifest;typeof a=="string"&&(a=await this.load(a)),this.resolver.addManifest(a)}const n=((s=e.texturePreference)==null?void 0:s.resolution)??1,r=typeof n=="number"?[n]:n,i=await this._detectFormats({preferredFormats:(o=e.texturePreference)==null?void 0:o.format,skipDetections:e.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:i,resolution:r}}),e.preferences&&this.setPreferences(e.preferences)}add(e,n,r,i,s){this.resolver.add(e,n,r,i,s)}async load(e,n){this._initialized||await this.init();const r=Xy(e),i=ea(e).map(a=>{if(typeof a!="string"){const l=this.resolver.getAlias(a);return l.some(c=>!this.resolver.hasKey(c))&&this.add(a),Array.isArray(l)?l[0]:l}return this.resolver.hasKey(a)||this.add({alias:a,src:a}),a}),s=this.resolver.resolve(i),o=await this._mapLoadToResolve(s,n);return r?o[i[0]]:o}addBundle(e,n){this.resolver.addBundle(e,n)}async loadBundle(e,n){this._initialized||await this.init();let r=!1;typeof e=="string"&&(r=!0,e=[e]);const i=this.resolver.resolveBundle(e),s={},o=Object.keys(i);let a=0,l=0;const c=()=>{n==null||n(++a/l)},u=o.map(d=>{const h=i[d];return l+=Object.keys(h).length,this._mapLoadToResolve(h,c).then(f=>{s[d]=f})});return await Promise.all(u),r?s[e[0]]:s}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const n=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(n))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const n=this.resolver.resolveBundle(e);Object.values(n).forEach(r=>{this._backgroundLoader.add(Object.values(r))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return Uu.get(e);const n={};for(let r=0;r<e.length;r++)n[r]=Uu.get(e[r]);return n}async _mapLoadToResolve(e,n){const r=Object.values(e),i=Object.keys(e);this._backgroundLoader.active=!1;const s=await this.loader.load(r,n);this._backgroundLoader.active=!0;const o={};return r.forEach((a,l)=>{const c=s[a.src],u=[a.src];a.alias&&u.push(...a.alias),o[i[l]]=c,Uu.set(u,c)}),o}async unload(e){this._initialized||await this.init();const n=ea(e).map(i=>typeof i!="string"?i.src:i),r=this.resolver.resolve(n);await this._unloadFromResolved(r)}async unloadBundle(e){this._initialized||await this.init(),e=ea(e);const n=this.resolver.resolveBundle(e),r=Object.keys(n).map(i=>this._unloadFromResolved(n[i]));await Promise.all(r)}async _unloadFromResolved(e){const n=Object.values(e);n.forEach(r=>{Uu.remove(r.src)}),await this.loader.unload(n)}async _detectFormats(e){let n=[];e.preferredFormats&&(n=Array.isArray(e.preferredFormats)?e.preferredFormats:[e.preferredFormats]);for(const r of e.detections)e.skipDetections||await r.test()?n=await r.add(n):e.skipDetections||(n=await r.remove(n));return n=n.filter((r,i)=>n.indexOf(r)===i),n}get detections(){return this._detections}get preferWorkers(){return W1.config.preferWorkers}set preferWorkers(e){Ht("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach(n=>{n.config&&Object.keys(n.config).filter(r=>r in e).forEach(r=>{n.config[r]=e[r]})})}}const lv=new iq;bt.handleByList(rt.LoadParser,lv.loader.parsers).handleByList(rt.ResolveParser,lv.resolver.parsers).handleByList(rt.CacheParser,lv.cache.parsers).handleByList(rt.DetectionParser,lv.detections);const sq={extension:rt.CacheParser,test:t=>Array.isArray(t)&&t.every(e=>e instanceof zt),getCacheableAssets:(t,e)=>{const n={};return t.forEach(r=>{e.forEach((i,s)=>{n[r+(s===0?"":s+1)]=i})}),n}};bt.add(sq);async function oq(t){if("Image"in globalThis)return new Promise(e=>{const n=new Image;n.onload=()=>{e(!0)},n.onerror=()=>{e(!1)},n.src=t});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(t)).blob();await createImageBitmap(e)}catch{return!1}return!0}return!1}const aq={extension:{type:rt.DetectionParser,priority:1},test:async()=>oq("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async t=>[...t,"avif"],remove:async t=>t.filter(e=>e!=="avif")};bt.add(aq);const lq={extension:{type:rt.DetectionParser,priority:0},test:async()=>oq("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async t=>[...t,"webp"],remove:async t=>t.filter(e=>e!=="webp")};bt.add(lq);const f6=["png","jpg","jpeg"],cq={extension:{type:rt.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async t=>[...t,...f6],remove:async t=>t.filter(e=>!f6.includes(e))};bt.add(cq);const BMe="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function Q3(t){return BMe?!1:document.createElement("video").canPlayType(t)!==""}const uq={extension:{type:rt.DetectionParser,priority:0},test:async()=>Q3("video/webm"),add:async t=>[...t,"webm"],remove:async t=>t.filter(e=>e!=="webm")};bt.add(uq);const dq={extension:{type:rt.DetectionParser,priority:0},test:async()=>Q3("video/mp4"),add:async t=>[...t,"mp4","m4v"],remove:async t=>t.filter(e=>e!=="mp4"&&e!=="m4v")};bt.add(dq);const hq={extension:{type:rt.DetectionParser,priority:0},test:async()=>Q3("video/ogg"),add:async t=>[...t,"ogv"],remove:async t=>t.filter(e=>e!=="ogv")};bt.add(hq);const fq={extension:rt.ResolveParser,test:W1.test,parse:t=>{var e;return{resolution:parseFloat(((e=ht.RETINA_PREFIX.exec(t))==null?void 0:e[1])??"1"),format:ei.extname(t).slice(1),src:t}}};bt.add(fq);const FMe=Object.freeze(Object.defineProperty({__proto__:null,Assets:lv,AssetsClass:iq,Cache:Uu,LoaderParserPriority:ga,cacheTextureArray:sq,checkDataUrl:Nf,checkExtension:Jc,convertToList:ea,copySearchParams:Ww,createStringVariations:KK,createTexture:Og,detectAvif:aq,detectDefaults:cq,detectMp4:dq,detectOgv:hq,detectWebm:uq,detectWebp:lq,getFontFamilyName:QK,isSingleItem:Xy,loadImageBitmap:tq,loadJson:qK,loadSVG:nq,loadTextures:W1,loadTxt:ZK,loadVideo:rq,loadWebFont:JK,resolveTextureUrl:fq},Symbol.toStringTag,{value:"Module"})),UMe=[".xml",".fnt"],pq={extension:{type:rt.LoadParser,priority:ga.Normal},name:"loadBitmapFont",test(t){return UMe.includes(ei.extname(t).toLowerCase())},async testParse(t){return Wv.test(t)||Vw.test(t)},async parse(t,e,n){const r=Wv.test(t)?Wv.parse(t):Vw.parse(t),{src:i}=e,{page:s}=r,o=[];for(let c=0;c<s.length;++c){const u=s[c].file;let d=ei.join(ei.dirname(i),u);d=Ww(d,i),o.push(d)}const a=await n.load(o),l=o.map(c=>a[c]);return pc.install(r,l,!0)},async load(t,e){return(await ht.ADAPTER.fetch(t)).text()},unload(t){t.destroy()}};bt.add(pq);const zMe=Object.freeze(Object.defineProperty({__proto__:null,BitmapFont:pc,BitmapFontData:Wy,BitmapText:XK,TextFormat:Wv,XMLFormat:Hw,XMLStringFormat:Vw,autoDetectFormat:zK,loadBitmapFont:pq},Symbol.toStringTag,{value:"Module"})),Yy={build(t){const e=t.points;let n,r,i,s,o,a;if(t.type===Ri.CIRC){const p=t.shape;n=p.x,r=p.y,o=a=p.radius,i=s=0}else if(t.type===Ri.ELIP){const p=t.shape;n=p.x,r=p.y,o=p.width,a=p.height,i=s=0}else{const p=t.shape,m=p.width/2,_=p.height/2;n=p.x+m,r=p.y+_,o=a=Math.max(0,Math.min(p.radius,Math.min(m,_))),i=m-o,s=_-a}if(!(o>=0&&a>=0&&i>=0&&s>=0)){e.length=0;return}const l=Math.ceil(2.3*Math.sqrt(o+a)),c=l*8+(i?4:0)+(s?4:0);if(e.length=c,c===0)return;if(l===0){e.length=8,e[0]=e[6]=n+i,e[1]=e[3]=r+s,e[2]=e[4]=n-i,e[5]=e[7]=r-s;return}let u=0,d=l*4+(i?2:0)+2,h=d,f=c;{const p=i+o,m=s,_=n+p,y=n-p,x=r+m;if(e[u++]=_,e[u++]=x,e[--d]=x,e[--d]=y,s){const b=r-m;e[h++]=y,e[h++]=b,e[--f]=b,e[--f]=_}}for(let p=1;p<l;p++){const m=Math.PI/2*(p/l),_=i+Math.cos(m)*o,y=s+Math.sin(m)*a,x=n+_,b=n-_,E=r+y,w=r-y;e[u++]=x,e[u++]=E,e[--d]=E,e[--d]=b,e[h++]=b,e[h++]=w,e[--f]=w,e[--f]=x}{const p=i,m=s+a,_=n+p,y=n-p,x=r+m,b=r-m;e[u++]=_,e[u++]=x,e[--f]=b,e[--f]=_,i&&(e[u++]=y,e[u++]=x,e[--f]=b,e[--f]=y)}},triangulate(t,e){const n=t.points,r=e.points,i=e.indices;if(n.length===0)return;let s=r.length/2;const o=s;let a,l;if(t.type!==Ri.RREC){const u=t.shape;a=u.x,l=u.y}else{const u=t.shape;a=u.x+u.width/2,l=u.y+u.height/2}const c=t.matrix;r.push(t.matrix?c.a*a+c.c*l+c.tx:a,t.matrix?c.b*a+c.d*l+c.ty:l),s++,r.push(n[0],n[1]);for(let u=2;u<n.length;u+=2)r.push(n[u],n[u+1]),i.push(s++,o,s);i.push(o+1,o,s)}};function p6(t,e=!1){const n=t.length;if(n<6)return;let r=0;for(let i=0,s=t[n-2],o=t[n-1];i<n;i+=2){const a=t[i],l=t[i+1];r+=(a-s)*(l+o),s=a,o=l}if(!e&&r>0||e&&r<=0){const i=n/2;for(let s=i+i%2;s<n;s+=2){const o=n-s-2,a=n-s-1,l=s,c=s+1;[t[o],t[l]]=[t[l],t[o]],[t[a],t[c]]=[t[c],t[a]]}}}const J3={build(t){t.points=t.shape.points.slice()},triangulate(t,e){let n=t.points;const r=t.holes,i=e.points,s=e.indices;if(n.length>=6){p6(n,!1);const o=[];for(let c=0;c<r.length;c++){const u=r[c];p6(u.points,!0),o.push(n.length/2),n=n.concat(u.points)}const a=Fk(n,o,2);if(!a)return;const l=i.length/2;for(let c=0;c<a.length;c+=3)s.push(a[c]+l),s.push(a[c+1]+l),s.push(a[c+2]+l);for(let c=0;c<n.length;c++)i.push(n[c])}}},mq={build(t){const e=t.shape,n=e.x,r=e.y,i=e.width,s=e.height,o=t.points;o.length=0,i>=0&&s>=0&&o.push(n,r,n+i,r,n+i,r+s,n,r+s)},triangulate(t,e){const n=t.points,r=e.points;if(n.length===0)return;const i=r.length/2;r.push(n[0],n[1],n[2],n[3],n[6],n[7],n[4],n[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}},gq={build(t){Yy.build(t)},triangulate(t,e){Yy.triangulate(t,e)}};var Ss=(t=>(t.MITER="miter",t.BEVEL="bevel",t.ROUND="round",t))(Ss||{}),za=(t=>(t.BUTT="butt",t.ROUND="round",t.SQUARE="square",t))(za||{});const Sd={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(t,e=20){if(!this.adaptive||!t||isNaN(t))return e;let n=Math.ceil(t/this.maxLength);return n<this.minSegments?n=this.minSegments:n>this.maxSegments&&(n=this.maxSegments),n}},$Me=Sd;class fL{static curveTo(e,n,r,i,s,o){const a=o[o.length-2],l=o[o.length-1]-n,c=a-e,u=i-n,d=r-e,h=Math.abs(l*d-c*u);if(h<1e-8||s===0)return(o[o.length-2]!==e||o[o.length-1]!==n)&&o.push(e,n),null;const f=l*l+c*c,p=u*u+d*d,m=l*u+c*d,_=s*Math.sqrt(f)/h,y=s*Math.sqrt(p)/h,x=_*m/f,b=y*m/p,E=_*d+y*c,w=_*u+y*l,T=c*(y+x),C=l*(y+x),P=d*(_+b),M=u*(_+b),N=Math.atan2(C-w,T-E),F=Math.atan2(M-w,P-E);return{cx:E+e,cy:w+n,radius:s,startAngle:N,endAngle:F,anticlockwise:c*u>d*l}}static arc(e,n,r,i,s,o,a,l,c){const u=a-o,d=Sd._segmentsCount(Math.abs(u)*s,Math.ceil(Math.abs(u)/zy)*40),h=u/(d*2),f=h*2,p=Math.cos(h),m=Math.sin(h),_=d-1,y=_%1/_;for(let x=0;x<=_;++x){const b=x+y*x,E=h+o+f*b,w=Math.cos(E),T=-Math.sin(E);c.push((p*w+m*T)*s+r,(p*-T+m*w)*s+i)}}}class vq{constructor(){this.reset()}begin(e,n,r){this.reset(),this.style=e,this.start=n,this.attribStart=r}end(e,n){this.attribSize=n-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class hC{static curveLength(e,n,r,i,s,o,a,l){let c=0,u=0,d=0,h=0,f=0,p=0,m=0,_=0,y=0,x=0,b=0,E=e,w=n;for(let T=1;T<=10;++T)u=T/10,d=u*u,h=d*u,f=1-u,p=f*f,m=p*f,_=m*e+3*p*u*r+3*f*d*s+h*a,y=m*n+3*p*u*i+3*f*d*o+h*l,x=E-_,b=w-y,E=_,w=y,c+=Math.sqrt(x*x+b*b);return c}static curveTo(e,n,r,i,s,o,a){const l=a[a.length-2],c=a[a.length-1];a.length-=2;const u=Sd._segmentsCount(hC.curveLength(l,c,e,n,r,i,s,o));let d=0,h=0,f=0,p=0,m=0;a.push(l,c);for(let _=1,y=0;_<=u;++_)y=_/u,d=1-y,h=d*d,f=h*d,p=y*y,m=p*y,a.push(f*l+3*h*y*e+3*d*p*r+m*s,f*c+3*h*y*n+3*d*p*i+m*o)}}function m6(t,e,n,r,i,s,o,a){const l=t-n*i,c=e-r*i,u=t+n*s,d=e+r*s;let h,f;o?(h=r,f=-n):(h=-r,f=n);const p=l+h,m=c+f,_=u+h,y=d+f;return a.push(p,m,_,y),2}function sh(t,e,n,r,i,s,o,a){const l=n-t,c=r-e;let u=Math.atan2(l,c),d=Math.atan2(i-t,s-e);a&&u<d?u+=Math.PI*2:!a&&u>d&&(d+=Math.PI*2);let h=u;const f=d-u,p=Math.abs(f),m=Math.sqrt(l*l+c*c),_=(15*p*Math.sqrt(m)/Math.PI>>0)+1,y=f/_;if(h+=y,a){o.push(t,e,n,r);for(let x=1,b=h;x<_;x++,b+=y)o.push(t,e,t+Math.sin(b)*m,e+Math.cos(b)*m);o.push(t,e,i,s)}else{o.push(n,r,t,e);for(let x=1,b=h;x<_;x++,b+=y)o.push(t+Math.sin(b)*m,e+Math.cos(b)*m,t,e);o.push(i,s,t,e)}return _*2}function jMe(t,e){const n=t.shape;let r=t.points||n.points.slice();const i=e.closePointEps;if(r.length===0)return;const s=t.lineStyle,o=new Ot(r[0],r[1]),a=new Ot(r[r.length-2],r[r.length-1]),l=n.type!==Ri.POLY||n.closeStroke,c=Math.abs(o.x-a.x)<i&&Math.abs(o.y-a.y)<i;if(l){r=r.slice(),c&&(r.pop(),r.pop(),a.set(r[r.length-2],r[r.length-1]));const G=(o.x+a.x)*.5,j=(a.y+o.y)*.5;r.unshift(G,j),r.push(G,j)}const u=e.points,d=r.length/2;let h=r.length;const f=u.length/2,p=s.width/2,m=p*p,_=s.miterLimit*s.miterLimit;let y=r[0],x=r[1],b=r[2],E=r[3],w=0,T=0,C=-(x-E),P=y-b,M=0,N=0,F=Math.sqrt(C*C+P*P);C/=F,P/=F,C*=p,P*=p;const I=s.alignment,k=(1-I)*2,R=I*2;l||(s.cap===za.ROUND?h+=sh(y-C*(k-R)*.5,x-P*(k-R)*.5,y-C*k,x-P*k,y+C*R,x+P*R,u,!0)+2:s.cap===za.SQUARE&&(h+=m6(y,x,C,P,k,R,!0,u))),u.push(y-C*k,x-P*k,y+C*R,x+P*R);for(let G=1;G<d-1;++G){y=r[(G-1)*2],x=r[(G-1)*2+1],b=r[G*2],E=r[G*2+1],w=r[(G+1)*2],T=r[(G+1)*2+1],C=-(x-E),P=y-b,F=Math.sqrt(C*C+P*P),C/=F,P/=F,C*=p,P*=p,M=-(E-T),N=b-w,F=Math.sqrt(M*M+N*N),M/=F,N/=F,M*=p,N*=p;const j=b-y,H=x-E,Q=b-w,V=T-E,ee=j*Q+H*V,ye=H*Q-V*j,se=ye<0;if(Math.abs(ye)<.001*Math.abs(ee)){u.push(b-C*k,E-P*k,b+C*R,E+P*R),ee>=0&&(s.join===Ss.ROUND?h+=sh(b,E,b-C*k,E-P*k,b-M*k,E-N*k,u,!1)+4:h+=2,u.push(b-M*R,E-N*R,b+M*k,E+N*k));continue}const fe=(-C+y)*(-P+E)-(-C+b)*(-P+x),ve=(-M+w)*(-N+E)-(-M+b)*(-N+T),Oe=(j*ve-Q*fe)/ye,ae=(V*fe-H*ve)/ye,ue=(Oe-b)*(Oe-b)+(ae-E)*(ae-E),Ce=b+(Oe-b)*k,pe=E+(ae-E)*k,ke=b-(Oe-b)*R,Re=E-(ae-E)*R,B=Math.min(j*j+H*H,Q*Q+V*V),oe=se?k:R,ie=B+oe*oe*m,q=ue<=ie;let Y=s.join;if(Y===Ss.MITER&&ue/m>_&&(Y=Ss.BEVEL),q)switch(Y){case Ss.MITER:{u.push(Ce,pe,ke,Re);break}case Ss.BEVEL:{se?u.push(Ce,pe,b+C*R,E+P*R,Ce,pe,b+M*R,E+N*R):u.push(b-C*k,E-P*k,ke,Re,b-M*k,E-N*k,ke,Re),h+=2;break}case Ss.ROUND:{se?(u.push(Ce,pe,b+C*R,E+P*R),h+=sh(b,E,b+C*R,E+P*R,b+M*R,E+N*R,u,!0)+4,u.push(Ce,pe,b+M*R,E+N*R)):(u.push(b-C*k,E-P*k,ke,Re),h+=sh(b,E,b-C*k,E-P*k,b-M*k,E-N*k,u,!1)+4,u.push(b-M*k,E-N*k,ke,Re));break}}else{switch(u.push(b-C*k,E-P*k,b+C*R,E+P*R),Y){case Ss.MITER:{se?u.push(ke,Re,ke,Re):u.push(Ce,pe,Ce,pe),h+=2;break}case Ss.ROUND:{se?h+=sh(b,E,b+C*R,E+P*R,b+M*R,E+N*R,u,!0)+2:h+=sh(b,E,b-C*k,E-P*k,b-M*k,E-N*k,u,!1)+2;break}}u.push(b-M*k,E-N*k,b+M*R,E+N*R),h+=2}}y=r[(d-2)*2],x=r[(d-2)*2+1],b=r[(d-1)*2],E=r[(d-1)*2+1],C=-(x-E),P=y-b,F=Math.sqrt(C*C+P*P),C/=F,P/=F,C*=p,P*=p,u.push(b-C*k,E-P*k,b+C*R,E+P*R),l||(s.cap===za.ROUND?h+=sh(b-C*(k-R)*.5,E-P*(k-R)*.5,b-C*k,E-P*k,b+C*R,E+P*R,u,!1)+2:s.cap===za.SQUARE&&(h+=m6(b,E,C,P,k,R,!1,u)));const z=e.indices,X=Sd.epsilon*Sd.epsilon;for(let G=f;G<h+f-2;++G)y=u[G*2],x=u[G*2+1],b=u[(G+1)*2],E=u[(G+1)*2+1],w=u[(G+2)*2],T=u[(G+2)*2+1],!(Math.abs(y*(E-T)+b*(T-x)+w*(x-E))<X)&&z.push(G,G+1,G+2)}function GMe(t,e){let n=0;const r=t.shape,i=t.points||r.points,s=r.type!==Ri.POLY||r.closeStroke;if(i.length===0)return;const o=e.points,a=e.indices,l=i.length/2,c=o.length/2;let u=c;for(o.push(i[0],i[1]),n=1;n<l;n++)o.push(i[n*2],i[n*2+1]),a.push(u,u+1),u++;s&&a.push(u,c)}function pL(t,e){t.lineStyle.native?GMe(t,e):jMe(t,e)}class fC{static curveLength(e,n,r,i,s,o){const a=e-2*r+s,l=n-2*i+o,c=2*r-2*e,u=2*i-2*n,d=4*(a*a+l*l),h=4*(a*c+l*u),f=c*c+u*u,p=2*Math.sqrt(d+h+f),m=Math.sqrt(d),_=2*d*m,y=2*Math.sqrt(f),x=h/m;return(_*p+m*h*(p-y)+(4*f*d-h*h)*Math.log((2*m+x+p)/(x+y)))/(4*_)}static curveTo(e,n,r,i,s){const o=s[s.length-2],a=s[s.length-1],l=Sd._segmentsCount(fC.curveLength(o,a,e,n,r,i));let c=0,u=0;for(let d=1;d<=l;++d){const h=d/l;c=o+(e-o)*h,u=a+(n-a)*h,s.push(c+(e+(r-e)*h-c)*h,u+(n+(i-n)*h-u)*h)}}}const bE={[Ri.POLY]:J3,[Ri.CIRC]:Yy,[Ri.ELIP]:Yy,[Ri.RECT]:mq,[Ri.RREC]:gq},mL=[],cv=[];class Ky{constructor(e,n=null,r=null,i=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=r,this.fillStyle=n,this.matrix=i,this.type=e.type}clone(){return new Ky(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const _p=new Ot,yq=class _q extends A3{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Vy,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),cv.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const n=this.batches[e];n.reset(),mL.push(n)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,n=null,r=null,i=null){const s=new Ky(e,n,r,i);return this.graphicsData.push(s),this.dirty++,this}drawHole(e,n=null){if(!this.graphicsData.length)return null;const r=new Ky(e,null,null,n),i=this.graphicsData[this.graphicsData.length-1];return r.lineStyle=i.lineStyle,i.holes.push(r),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const n=this.graphicsData;for(let r=0;r<n.length;++r){const i=n[r];if(i.fillStyle.visible&&i.shape&&(i.matrix?i.matrix.applyInverse(e,_p):_p.copyFrom(e),i.shape.contains(_p.x,_p.y))){let s=!1;if(i.holes){for(let o=0;o<i.holes.length;o++)if(i.holes[o].shape.contains(_p.x,_p.y)){s=!0;break}}if(!s)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,n=this.graphicsData;let r=null,i=null;this.batches.length>0&&(r=this.batches[this.batches.length-1],i=r.style);for(let l=this.shapeIndex;l<n.length;l++){this.shapeIndex++;const c=n[l],u=c.fillStyle,d=c.lineStyle;bE[c.type].build(c),c.matrix&&this.transformPoints(c.points,c.matrix),(u.visible||d.visible)&&this.processHoles(c.holes);for(let h=0;h<2;h++){const f=h===0?u:d;if(!f.visible)continue;const p=f.texture.baseTexture,m=this.indices.length,_=this.points.length/2;p.wrapMode=Ul.REPEAT,h===0?this.processFill(c):this.processLine(c);const y=this.points.length/2-_;y!==0&&(r&&!this._compareStyles(i,f)&&(r.end(m,_),r=null),r||(r=mL.pop()||new vq,r.begin(f,m,_),this.batches.push(r),i=f),this.addUvs(this.points,e,f.texture,_,y,f.matrix))}}const s=this.indices.length,o=this.points.length/2;if(r&&r.end(s,o),this.batches.length===0){this.batchable=!0;return}const a=o>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&a===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=a?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,n){return!(!e||!n||e.texture.baseTexture!==n.texture.baseTexture||e.color+e.alpha!==n.color+n.alpha||!!e.native!=!!n.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,n=this.graphicsData.length;e<n;e++){const r=this.graphicsData[e],i=r.fillStyle,s=r.lineStyle;if(i&&!i.texture.baseTexture.valid||s&&!s.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let n=0,r=e.length;n<r;n++){const i=e[n];for(let s=0;s<i.size;s++){const o=i.start+s;this.indicesUint16[o]=this.indicesUint16[o]-i.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const e=this.batches;for(let n=0;n<e.length;n++)if(e[n].style.native)return!1;return this.points.length<_q.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++Qt._globalBatch;for(let d=0;d<this.drawCalls.length;d++)this.drawCalls[d].texArray.clear(),cv.push(this.drawCalls[d]);this.drawCalls.length=0;const n=this.colors,r=this.textureIds;let i=cv.pop();i||(i=new zw,i.texArray=new $w),i.texArray.count=0,i.start=0,i.size=0,i.type=na.TRIANGLES;let s=0,o=null,a=0,l=!1,c=na.TRIANGLES,u=0;this.drawCalls.push(i);for(let d=0;d<this.batches.length;d++){const h=this.batches[d],f=8,p=h.style,m=p.texture.baseTexture;l!==!!p.native&&(l=!!p.native,c=l?na.LINES:na.TRIANGLES,o=null,s=f,e++),o!==m&&(o=m,m._batchEnabled!==e&&(s===f&&(e++,s=0,i.size>0&&(i=cv.pop(),i||(i=new zw,i.texArray=new $w),this.drawCalls.push(i)),i.start=u,i.size=0,i.texArray.count=0,i.type=c),m.touched=1,m._batchEnabled=e,m._batchLocation=s,m.wrapMode=Ul.REPEAT,i.texArray.elements[i.texArray.count++]=m,s++)),i.size+=h.size,u+=h.size,a=m._batchLocation,this.addColors(n,p.color,p.alpha,h.attribSize,h.attribStart),this.addTextureIds(r,a,h.attribSize,h.attribStart)}Qt._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,n=this.uvs,r=this.colors,i=this.textureIds,s=new ArrayBuffer(e.length*3*4),o=new Float32Array(s),a=new Uint32Array(s);let l=0;for(let c=0;c<e.length/2;c++)o[l++]=e[c*2],o[l++]=e[c*2+1],o[l++]=n[c*2],o[l++]=n[c*2+1],a[l++]=r[c],o[l++]=i[c];this._buffer.update(s),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?J3.triangulate(e,this):bE[e.type].triangulate(e,this)}processLine(e){pL(e,this);for(let n=0;n<e.holes.length;n++)pL(e.holes[n],this)}processHoles(e){for(let n=0;n<e.length;n++){const r=e[n];bE[r.type].build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,n){for(let r=0;r<e.length/2;r++){const i=e[r*2],s=e[r*2+1];e[r*2]=n.a*i+n.c*s+n.tx,e[r*2+1]=n.b*i+n.d*s+n.ty}}addColors(e,n,r,i,s=0){const o=Tn.shared.setValue(n).toLittleEndianNumber(),a=Tn.shared.setValue(o).toPremultiplied(r);e.length=Math.max(e.length,s+i);for(let l=0;l<i;l++)e[s+l]=a}addTextureIds(e,n,r,i=0){e.length=Math.max(e.length,i+r);for(let s=0;s<r;s++)e[i+s]=n}addUvs(e,n,r,i,s,o=null){let a=0;const l=n.length,c=r.frame;for(;a<s;){let d=e[(i+a)*2],h=e[(i+a)*2+1];if(o){const f=o.a*d+o.c*h+o.tx;h=o.b*d+o.d*h+o.ty,d=f}a++,n.push(d/c.width,h/c.height)}const u=r.baseTexture;(c.width<u.width||c.height<u.height)&&this.adjustUvs(n,r,l,s)}adjustUvs(e,n,r,i){const s=n.baseTexture,o=1e-6,a=r+i*2,l=n.frame,c=l.width/s.width,u=l.height/s.height;let d=l.x/l.width,h=l.y/l.height,f=Math.floor(e[r]+o),p=Math.floor(e[r+1]+o);for(let m=r+2;m<a;m+=2)f=Math.min(f,Math.floor(e[m]+o)),p=Math.min(p,Math.floor(e[m+1]+o));d-=f,h-=p;for(let m=r;m<a;m+=2)e[m]=(e[m]+d)*c,e[m+1]=(e[m+1]+h)*u}};yq.BATCHABLE_SIZE=100;let bq=yq;class X1{constructor(){this.color=16777215,this.alpha=1,this.texture=zt.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new X1;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=zt.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class pC extends X1{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=za.BUTT,this.join=Ss.MITER,this.miterLimit=10}clone(){const e=new pC;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=za.BUTT,this.join=Ss.MITER,this.miterLimit=10}}const kP={},gL=class xE extends qi{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new X1,this._lineStyle=new pC,this._matrix=null,this._holeMode=!1,this.state=el.for2d(),this._geometry=e||new bq,this._geometry.refCount++,this._transformID=-1,this._tintColor=new Tn(16777215),this.blendMode=Ft.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new xE(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,n=0,r,i=.5,s=!1){return typeof e=="number"&&(e={width:e,color:n,alpha:r,alignment:i,native:s}),this.lineTextureStyle(e)}lineTextureStyle(e){const n={width:0,texture:zt.WHITE,color:e!=null&&e.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:za.BUTT,join:Ss.MITER,miterLimit:10};e=Object.assign(n,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const r=e.width>0&&e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:r},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,n=this.currentPath.points.length;n>2&&(this.drawShape(this.currentPath),this.currentPath=new ud,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[n-2],e[n-1]))}else this.currentPath=new ud,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,n){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=n,this}lineTo(e,n){this.currentPath||this.moveTo(0,0);const r=this.currentPath.points,i=r[r.length-2],s=r[r.length-1];return(i!==e||s!==n)&&r.push(e,n),this}_initCurve(e=0,n=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,n]):this.moveTo(e,n)}quadraticCurveTo(e,n,r,i){this._initCurve();const s=this.currentPath.points;return s.length===0&&this.moveTo(0,0),fC.curveTo(e,n,r,i,s),this}bezierCurveTo(e,n,r,i,s,o){return this._initCurve(),hC.curveTo(e,n,r,i,s,o,this.currentPath.points),this}arcTo(e,n,r,i,s){this._initCurve(e,n);const o=this.currentPath.points,a=fL.curveTo(e,n,r,i,s,o);if(a){const{cx:l,cy:c,radius:u,startAngle:d,endAngle:h,anticlockwise:f}=a;this.arc(l,c,u,d,h,f)}return this}arc(e,n,r,i,s,o=!1){if(i===s)return this;if(!o&&s<=i?s+=zy:o&&i<=s&&(i+=zy),s-i===0)return this;const a=e+Math.cos(i)*r,l=n+Math.sin(i)*r,c=this._geometry.closePointEps;let u=this.currentPath?this.currentPath.points:null;if(u){const d=Math.abs(u[u.length-2]-a),h=Math.abs(u[u.length-1]-l);d<c&&h<c||u.push(a,l)}else this.moveTo(a,l),u=this.currentPath.points;return fL.arc(a,l,e,n,r,i,s,o,u),this}beginFill(e=0,n){return this.beginTextureFill({texture:zt.WHITE,color:e,alpha:n})}normalizeColor(e){const n=Tn.shared.setValue(e.color??0);e.color=n.toNumber(),e.alpha??(e.alpha=n.alpha)}beginTextureFill(e){const n={texture:zt.WHITE,color:16777215,matrix:null};e=Object.assign(n,e),this.normalizeColor(e),this.currentPath&&this.startPoly();const r=e.alpha>0;return r?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:r},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,n,r,i){return this.drawShape(new Wt(e,n,r,i))}drawRoundedRect(e,n,r,i,s){return this.drawShape(new $1(e,n,r,i,s))}drawCircle(e,n,r){return this.drawShape(new U1(e,n,r))}drawEllipse(e,n,r,i){return this.drawShape(new z1(e,n,r,i))}drawPolygon(...e){let n,r=!0;const i=e[0];i.points?(r=i.closeStroke,n=i.points):Array.isArray(e[0])?n=e[0]:n=e;const s=new ud(n);return s.closeStroke=r,this.drawShape(s),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===Ri.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const n=this._geometry;n.updateBatches(),n.batchable?(this.batchDirty!==n.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,n=this.blendMode,r=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=r,this.vertexData=new Float32Array(e.points);for(let i=0;i<r;i++){const s=e.batches[i],o=s.style.color,a=new Float32Array(this.vertexData.buffer,s.attribStart*4*2,s.attribSize*2),l=new Float32Array(e.uvsFloat32.buffer,s.attribStart*4*2,s.attribSize*2),c=new Uint16Array(e.indicesUint16.buffer,s.start*2,s.size),u={vertexData:a,blendMode:n,indices:c,uvs:l,_batchRGB:Tn.shared.setValue(o).toRgbArray(),_tintRGB:o,_texture:s.style.texture,alpha:s.style.alpha,worldAlpha:1};this.batches[i]=u}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let n=0,r=this.batches.length;n<r;n++){const i=this.batches[n];i.worldAlpha=this.worldAlpha*i.alpha,e.plugins[this.pluginName].render(i)}}}_renderDirect(e){const n=this._resolveDirectShader(e),r=this._geometry,i=this.worldAlpha,s=n.uniforms,o=r.drawCalls;s.translationMatrix=this.transform.worldTransform,Tn.shared.setValue(this._tintColor).premultiply(i).toArray(s.tint),e.shader.bind(n),e.geometry.bind(r,n),e.state.set(this.state);for(let a=0,l=o.length;a<l;a++)this._renderDrawCallDirect(e,r.drawCalls[a])}_renderDrawCallDirect(e,n){const{texArray:r,type:i,size:s,start:o}=n,a=r.count;for(let l=0;l<a;l++)e.texture.bind(r.elements[l],l);e.geometry.draw(i,s,o)}_resolveDirectShader(e){let n=this.shader;const r=this.pluginName;if(!n){if(!kP[r]){const{maxTextures:i}=e.plugins[r],s=new Int32Array(i);for(let l=0;l<i;l++)s[l]=l;const o={tint:new Float32Array([1,1,1,1]),translationMatrix:new Br,default:oa.from({uSamplers:s},!0)},a=e.plugins[r]._shader.program;kP[r]=new Lc(a,o)}n=kP[r]}return n}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:n,minY:r,maxX:i,maxY:s}=e.bounds;this._bounds.addFrame(this.transform,n,r,i,s)}containsPoint(e){return this.worldTransform.applyInverse(e,xE._TEMP_POINT),this._geometry.containsPoint(xE._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let e=0;e<this.batches.length;e++){const n=this.batches[e];n._tintRGB=Tn.shared.setValue(this._tintColor).multiply(n._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const n=this.transform.worldTransform,r=n.a,i=n.b,s=n.c,o=n.d,a=n.tx,l=n.ty,c=this._geometry.points,u=this.vertexData;let d=0;for(let h=0;h<c.length;h+=2){const f=c[h],p=c[h+1];u[d++]=r*f+s*p+a,u[d++]=o*p+i*f+l}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};gL.curves=Sd,gL._TEMP_POINT=new Ot;let Sm=gL;const HMe={buildPoly:J3,buildCircle:Yy,buildRectangle:mq,buildRoundedRectangle:gq,buildLine:pL,ArcUtils:fL,BezierUtils:hC,QuadraticUtils:fC,BatchPart:vq,FILL_COMMANDS:bE,BATCH_POOL:mL,DRAW_CALL_POOL:cv},VMe=Object.freeze(Object.defineProperty({__proto__:null,FillStyle:X1,GRAPHICS_CURVES:$Me,Graphics:Sm,GraphicsData:Ky,GraphicsGeometry:bq,LINE_CAP:za,LINE_JOIN:Ss,LineStyle:pC,curves:Sd,graphicsUtils:HMe},Symbol.toStringTag,{value:"Module"}));class xq extends V1{constructor(e=100,n=100,r=10,i=10){super(),this.segWidth=r,this.segHeight=i,this.width=e,this.height=n,this.build()}build(){const e=this.segWidth*this.segHeight,n=[],r=[],i=[],s=this.segWidth-1,o=this.segHeight-1,a=this.width/s,l=this.height/o;for(let u=0;u<e;u++){const d=u%this.segWidth,h=u/this.segWidth|0;n.push(d*a,h*l),r.push(d/s,h/o)}const c=s*o;for(let u=0;u<c;u++){const d=u%s,h=u/s|0,f=h*this.segWidth+d,p=h*this.segWidth+d+1,m=(h+1)*this.segWidth+d,_=(h+1)*this.segWidth+d+1;i.push(f,p,m,p,_,m)}this.buffers[0].data=new Float32Array(n),this.buffers[1].data=new Float32Array(r),this.indexBuffer.data=new Uint16Array(i),this.buffers[0].update(),this.buffers[1].update(),this.indexBuffer.update()}}class Eq extends V1{constructor(e=200,n,r=0){super(new Float32Array(n.length*4),new Float32Array(n.length*4),new Uint16Array((n.length-1)*6)),this.points=n,this._width=e,this.textureScale=r,this.build()}get width(){return this._width}build(){const e=this.points;if(!e)return;const n=this.getBuffer("aVertexPosition"),r=this.getBuffer("aTextureCoord"),i=this.getIndex();if(e.length<1)return;n.data.length/4!==e.length&&(n.data=new Float32Array(e.length*4),r.data=new Float32Array(e.length*4),i.data=new Uint16Array((e.length-1)*6));const s=r.data,o=i.data;s[0]=0,s[1]=0,s[2]=0,s[3]=1;let a=0,l=e[0];const c=this._width*this.textureScale,u=e.length;for(let h=0;h<u;h++){const f=h*4;if(this.textureScale>0){const p=l.x-e[h].x,m=l.y-e[h].y,_=Math.sqrt(p*p+m*m);l=e[h],a+=_/c}else a=h/(u-1);s[f]=a,s[f+1]=0,s[f+2]=a,s[f+3]=1}let d=0;for(let h=0;h<u-1;h++){const f=h*2;o[d++]=f,o[d++]=f+1,o[d++]=f+2,o[d++]=f+2,o[d++]=f+1,o[d++]=f+3}r.update(),i.update(),this.updateVertices()}updateVertices(){const e=this.points;if(e.length<1)return;let n=e[0],r,i=0,s=0;const o=this.buffers[0].data,a=e.length,l=this.textureScale>0?this.textureScale*this._width/2:this._width/2;for(let c=0;c<a;c++){const u=e[c],d=c*4;c<e.length-1?r=e[c+1]:r=u,s=-(r.x-n.x),i=r.y-n.y;const h=Math.sqrt(i*i+s*s);h<1e-6?(i=0,s=0):(i/=h,s/=h,i*=l,s*=l),o[d]=u.x+i,o[d+1]=u.y+s,o[d+2]=u.x-i,o[d+3]=u.y-s,n=u}this.buffers[0].update()}update(){this.textureScale>0?this.build():this.updateVertices()}}class wq extends ng{constructor(e,n,r){const i=new xq(e.width,e.height,n,r),s=new rg(zt.WHITE);super(i,s),this.texture=e,this.autoResize=!0}textureUpdated(){this._textureID=this.shader.texture._updateID;const e=this.geometry,{width:n,height:r}=this.shader.texture;this.autoResize&&(e.width!==n||e.height!==r)&&(e.width=this.shader.texture.width,e.height=this.shader.texture.height,e.build())}set texture(e){this.shader.texture!==e&&(this.shader.texture=e,this._textureID=-1,e.baseTexture.valid?this.textureUpdated():e.once("update",this.textureUpdated,this))}get texture(){return this.shader.texture}_render(e){this._textureID!==this.shader.texture._updateID&&this.textureUpdated(),super._render(e)}destroy(e){this.shader.texture.off("update",this.textureUpdated,this),super.destroy(e)}}const cx=10;class Tq extends wq{constructor(e,n,r,i,s){var o,a,l,c;super(zt.WHITE,4,4),this._origWidth=e.orig.width,this._origHeight=e.orig.height,this._width=this._origWidth,this._height=this._origHeight,this._leftWidth=n??((o=e.defaultBorders)==null?void 0:o.left)??cx,this._rightWidth=i??((a=e.defaultBorders)==null?void 0:a.right)??cx,this._topHeight=r??((l=e.defaultBorders)==null?void 0:l.top)??cx,this._bottomHeight=s??((c=e.defaultBorders)==null?void 0:c.bottom)??cx,this.texture=e}textureUpdated(){this._textureID=this.shader.texture._updateID,this._refresh()}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}updateHorizontalVertices(){const e=this.vertices,n=this._getMinScale();e[9]=e[11]=e[13]=e[15]=this._topHeight*n,e[17]=e[19]=e[21]=e[23]=this._height-this._bottomHeight*n,e[25]=e[27]=e[29]=e[31]=this._height}updateVerticalVertices(){const e=this.vertices,n=this._getMinScale();e[2]=e[10]=e[18]=e[26]=this._leftWidth*n,e[4]=e[12]=e[20]=e[28]=this._width-this._rightWidth*n,e[6]=e[14]=e[22]=e[30]=this._width}_getMinScale(){const e=this._leftWidth+this._rightWidth,n=this._width>e?1:this._width/e,r=this._topHeight+this._bottomHeight,i=this._height>r?1:this._height/r;return Math.min(n,i)}get width(){return this._width}set width(e){this._width=e,this._refresh()}get height(){return this._height}set height(e){this._height=e,this._refresh()}get leftWidth(){return this._leftWidth}set leftWidth(e){this._leftWidth=e,this._refresh()}get rightWidth(){return this._rightWidth}set rightWidth(e){this._rightWidth=e,this._refresh()}get topHeight(){return this._topHeight}set topHeight(e){this._topHeight=e,this._refresh()}get bottomHeight(){return this._bottomHeight}set bottomHeight(e){this._bottomHeight=e,this._refresh()}_refresh(){const e=this.texture,n=this.geometry.buffers[1].data;this._origWidth=e.orig.width,this._origHeight=e.orig.height;const r=1/this._origWidth,i=1/this._origHeight;n[0]=n[8]=n[16]=n[24]=0,n[1]=n[3]=n[5]=n[7]=0,n[6]=n[14]=n[22]=n[30]=1,n[25]=n[27]=n[29]=n[31]=1,n[2]=n[10]=n[18]=n[26]=r*this._leftWidth,n[4]=n[12]=n[20]=n[28]=1-r*this._rightWidth,n[9]=n[11]=n[13]=n[15]=i*this._topHeight,n[17]=n[19]=n[21]=n[23]=1-i*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.geometry.buffers[0].update(),this.geometry.buffers[1].update()}}class Sq extends ng{constructor(e=zt.EMPTY,n,r,i,s){const o=new V1(n,r,i);o.getBuffer("aVertexPosition").static=!1;const a=new rg(e);super(o,a,null,s),this.autoUpdate=!0}get vertices(){return this.geometry.getBuffer("aVertexPosition").data}set vertices(e){this.geometry.getBuffer("aVertexPosition").data=e}_render(e){this.autoUpdate&&this.geometry.getBuffer("aVertexPosition").update(),super._render(e)}}class Cq extends ng{constructor(e,n,r=0){const i=new Eq(e.height,n,r),s=new rg(e);r>0&&(e.baseTexture.wrapMode=Ul.REPEAT),super(i,s),this.autoUpdate=!0}_render(e){const n=this.geometry;(this.autoUpdate||n._width!==this.shader.texture.height)&&(n._width=this.shader.texture.height,n.update()),super._render(e)}}const WMe=Object.freeze(Object.defineProperty({__proto__:null,NineSlicePlane:Tq,PlaneGeometry:xq,RopeGeometry:Eq,SimpleMesh:Sq,SimplePlane:wq,SimpleRope:Cq},Symbol.toStringTag,{value:"Module"}));class Aq extends qi{constructor(e=1500,n,r=16384,i=!1){super();const s=16384;r>s&&(r=s),this._properties=[!1,!0,!1,!1,!1],this._maxSize=e,this._batchSize=r,this._buffers=null,this._bufferUpdateIDs=[],this._updateID=0,this.interactiveChildren=!1,this.blendMode=Ft.NORMAL,this.autoResize=i,this.roundPixels=!0,this.baseTexture=null,this.setProperties(n),this._tintColor=new Tn(0),this.tintRgb=new Float32Array(3),this.tint=16777215}setProperties(e){e&&(this._properties[0]="vertices"in e||"scale"in e?!!e.vertices||!!e.scale:this._properties[0],this._properties[1]="position"in e?!!e.position:this._properties[1],this._properties[2]="rotation"in e?!!e.rotation:this._properties[2],this._properties[3]="uvs"in e?!!e.uvs:this._properties[3],this._properties[4]="tint"in e||"alpha"in e?!!e.tint||!!e.alpha:this._properties[4])}updateTransform(){this.displayObjectUpdateTransform()}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintColor.toRgbArray(this.tintRgb)}render(e){!this.visible||this.worldAlpha<=0||!this.children.length||!this.renderable||(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.valid||this.baseTexture.once("update",()=>this.onChildrenChange(0))),e.batch.setObjectRenderer(e.plugins.particle),e.plugins.particle.render(this))}onChildrenChange(e){const n=Math.floor(e/this._batchSize);for(;this._bufferUpdateIDs.length<n;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[n]=++this._updateID}dispose(){if(this._buffers){for(let e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._buffers=null}}destroy(e){super.destroy(e),this.dispose(),this._properties=null,this._buffers=null,this._bufferUpdateIDs=null}}class g6{constructor(e,n,r){this.geometry=new Lg,this.indexBuffer=null,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(let i=0;i<e.length;++i){let s=e[i];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||At.FLOAT,offset:s.offset},n[i]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let n=0;this.indexBuffer=new Kr(WY(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=n,n+=a.size,this.dynamicStride+=a.size}const r=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(r),this.dynamicDataUint32=new Uint32Array(r),this.dynamicBuffer=new Kr(this.dynamicData,!1,!1);let i=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=i,i+=a.size,this.staticStride+=a.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new Kr(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];e.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===At.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];e.addAttribute(a.attributeName,this.staticBuffer,0,a.type===At.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(e,n,r){for(let i=0;i<this.dynamicProperties.length;i++){const s=this.dynamicProperties[i];s.uploadFunction(e,n,r,s.type===At.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,n,r){for(let i=0;i<this.staticProperties.length;i++){const s=this.staticProperties[i];s.uploadFunction(e,n,r,s.type===At.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var XMe=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,YMe=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class eD extends G1{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new Br,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:At.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Lc.from(YMe,XMe,{}),this.state=el.for2d()}render(e){const n=e.children,r=e._maxSize,i=e._batchSize,s=this.renderer;let o=n.length;if(o===0)return;o>r&&!e.autoResize&&(o=r);let a=e._buffers;a||(a=e._buffers=this.generateBuffers(e));const l=n[0]._texture.baseTexture,c=l.alphaMode>0;this.state.blendMode=S3(e.blendMode,c),s.state.set(this.state);const u=s.gl,d=e.worldTransform.copyTo(this.tempMatrix);d.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=d.toArray(!0),this.shader.uniforms.uColor=Tn.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,c).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let h=!1;for(let f=0,p=0;f<o;f+=i,p+=1){let m=o-f;m>i&&(m=i),p>=a.length&&a.push(this._generateOneMoreBuffer(e));const _=a[p];_.uploadDynamic(n,f,m);const y=e._bufferUpdateIDs[p]||0;h=h||_._updateID<y,h&&(_._updateID=e._updateID,_.uploadStatic(n,f,m)),s.geometry.bind(_.geometry),u.drawElements(u.TRIANGLES,m*6,u.UNSIGNED_SHORT,0)}}generateBuffers(e){const n=[],r=e._maxSize,i=e._batchSize,s=e._properties;for(let o=0;o<r;o+=i)n.push(new g6(this.properties,s,i));return n}_generateOneMoreBuffer(e){const n=e._batchSize,r=e._properties;return new g6(this.properties,r,n)}uploadVertices(e,n,r,i,s,o){let a=0,l=0,c=0,u=0;for(let d=0;d<r;++d){const h=e[n+d],f=h._texture,p=h.scale.x,m=h.scale.y,_=f.trim,y=f.orig;_?(l=_.x-h.anchor.x*y.width,a=l+_.width,u=_.y-h.anchor.y*y.height,c=u+_.height):(a=y.width*(1-h.anchor.x),l=y.width*-h.anchor.x,c=y.height*(1-h.anchor.y),u=y.height*-h.anchor.y),i[o]=l*p,i[o+1]=u*m,i[o+s]=a*p,i[o+s+1]=u*m,i[o+s*2]=a*p,i[o+s*2+1]=c*m,i[o+s*3]=l*p,i[o+s*3+1]=c*m,o+=s*4}}uploadPosition(e,n,r,i,s,o){for(let a=0;a<r;a++){const l=e[n+a].position;i[o]=l.x,i[o+1]=l.y,i[o+s]=l.x,i[o+s+1]=l.y,i[o+s*2]=l.x,i[o+s*2+1]=l.y,i[o+s*3]=l.x,i[o+s*3+1]=l.y,o+=s*4}}uploadRotation(e,n,r,i,s,o){for(let a=0;a<r;a++){const l=e[n+a].rotation;i[o]=l,i[o+s]=l,i[o+s*2]=l,i[o+s*3]=l,o+=s*4}}uploadUvs(e,n,r,i,s,o){for(let a=0;a<r;++a){const l=e[n+a]._texture._uvs;l?(i[o]=l.x0,i[o+1]=l.y0,i[o+s]=l.x1,i[o+s+1]=l.y1,i[o+s*2]=l.x2,i[o+s*2+1]=l.y2,i[o+s*3]=l.x3,i[o+s*3+1]=l.y3,o+=s*4):(i[o]=0,i[o+1]=0,i[o+s]=0,i[o+s+1]=0,i[o+s*2]=0,i[o+s*2+1]=0,i[o+s*3]=0,i[o+s*3+1]=0,o+=s*4)}}uploadTint(e,n,r,i,s,o){for(let a=0;a<r;++a){const l=e[n+a],c=Tn.shared.setValue(l._tintRGB).toPremultiplied(l.alpha,l.texture.baseTexture.alphaMode>0);i[o]=c,i[o+s]=c,i[o+s*2]=c,i[o+s*3]=c,o+=s*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}eD.extension={name:"particle",type:rt.RendererPlugin};bt.add(eD);const KMe=Object.freeze(Object.defineProperty({__proto__:null,ParticleContainer:Aq,ParticleRenderer:eD},Symbol.toStringTag,{value:"Module"}));class ig extends tl{constructor(e,n=!0){super(e[0]instanceof zt?e[0]:e[0].texture),this._textures=null,this._durations=null,this._autoUpdate=n,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=e}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Qr.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Qr.shared.add(this.update,this,zc.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(e){this.stop(),this.currentFrame=e}gotoAndPlay(e){this.currentFrame=e,this.play()}update(e){if(!this._playing)return;const n=this.animationSpeed*e,r=this.currentFrame;if(this._durations!==null){let i=this._currentTime%1*this._durations[this.currentFrame];for(i+=n/60*1e3;i<0;)this._currentTime--,i+=this._durations[this.currentFrame];const s=Math.sign(this.animationSpeed*e);for(this._currentTime=Math.floor(this._currentTime);i>=this._durations[this.currentFrame];)i-=this._durations[this.currentFrame]*s,this._currentTime+=s;this._currentTime+=i/this._durations[this.currentFrame]}else this._currentTime+=n;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<r||this.animationSpeed<0&&this.currentFrame>r)&&this.onLoop(),this.updateTexture())}updateTexture(){const e=this.currentFrame;this._previousFrame!==e&&(this._previousFrame=e,this._texture=this._textures[e],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(e){this.stop(),super.destroy(e),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(e){const n=[];for(let r=0;r<e.length;++r)n.push(zt.from(e[r]));return new ig(n)}static fromImages(e){const n=[];for(let r=0;r<e.length;++r)n.push(zt.from(e[r]));return new ig(n)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(e){if(e[0]instanceof zt)this._textures=e,this._durations=null;else{this._textures=[],this._durations=[];for(let n=0;n<e.length;n++)this._textures.push(e[n].texture),this._durations.push(e[n].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let e=Math.floor(this._currentTime)%this._textures.length;return e<0&&(e+=this._textures.length),e}set currentFrame(e){if(e<0||e>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${e}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const n=this.currentFrame;this._currentTime=e,n!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(Qr.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Qr.shared.add(this.update,this),this._isConnectedToTicker=!0))}}const qMe=Object.freeze(Object.defineProperty({__proto__:null,AnimatedSprite:ig},Symbol.toStringTag,{value:"Module"})),L0=new Ot;class mC extends tl{constructor(e,n=100,r=100){super(e),this.tileTransform=new j1,this._width=n,this._height=r,this.uvMatrix=this.texture.uvMatrix||new cC(e),this.pluginName="tilingSprite",this.uvRespectAnchor=!1}get clampMargin(){return this.uvMatrix.clampMargin}set clampMargin(e){this.uvMatrix.clampMargin=e,this.uvMatrix.update(!0)}get tileScale(){return this.tileTransform.scale}set tileScale(e){this.tileTransform.scale.copyFrom(e)}get tilePosition(){return this.tileTransform.position}set tilePosition(e){this.tileTransform.position.copyFrom(e)}_onTextureUpdate(){this.uvMatrix&&(this.uvMatrix.texture=this._texture),this._cachedTint=16777215}_render(e){const n=this._texture;!n||!n.valid||(this.tileTransform.updateLocalTransform(),this.uvMatrix.update(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this))}_calculateBounds(){const e=this._width*-this._anchor._x,n=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),i=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,e,n,r,i)}getLocalBounds(e){return this.children.length===0?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new Wt),e=this._localBoundsRect),this._bounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,L0);const n=this._width,r=this._height,i=-n*this.anchor._x;if(L0.x>=i&&L0.x<i+n){const s=-r*this.anchor._y;if(L0.y>=s&&L0.y<s+r)return!0}return!1}destroy(e){super.destroy(e),this.tileTransform=null,this.uvMatrix=null}static from(e,n){const r=e instanceof zt?e:zt.from(e,n);return new mC(r,n.width,n.height)}get width(){return this._width}set width(e){this._width=e}get height(){return this._height}set height(e){this._height=e}}var ZMe=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,QMe=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,JMe=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,v6=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,eLe=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const ux=new Br;class tD extends G1{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new L3,this.state=el.for2d()}contextChange(){const e=this.renderer,n={globals:e.globalUniforms};this.simpleShader=Lc.from(v6,eLe,n),this.shader=e.context.webGLVersion>1?Lc.from(QMe,ZMe,n):Lc.from(v6,JMe,n)}render(e){const n=this.renderer,r=this.quad;let i=r.vertices;i[0]=i[6]=e._width*-e.anchor.x,i[1]=i[3]=e._height*-e.anchor.y,i[2]=i[4]=e._width*(1-e.anchor.x),i[5]=i[7]=e._height*(1-e.anchor.y);const s=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;i=r.uvs,i[0]=i[6]=-s,i[1]=i[3]=-o,i[2]=i[4]=1-s,i[5]=i[7]=1-o,r.invalidate();const a=e._texture,l=a.baseTexture,c=l.alphaMode>0,u=e.tileTransform.localTransform,d=e.uvMatrix;let h=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;h&&(l._glTextures[n.CONTEXT_UID]?h=l.wrapMode!==Ul.CLAMP:l.wrapMode===Ul.CLAMP&&(l.wrapMode=Ul.REPEAT));const f=h?this.simpleShader:this.shader,p=a.width,m=a.height,_=e._width,y=e._height;ux.set(u.a*p/_,u.b*p/y,u.c*m/_,u.d*m/y,u.tx/_,u.ty/y),ux.invert(),h?ux.prepend(d.mapCoord):(f.uniforms.uMapCoord=d.mapCoord.toArray(!0),f.uniforms.uClampFrame=d.uClampFrame,f.uniforms.uClampOffset=d.uClampOffset),f.uniforms.uTransform=ux.toArray(!0),f.uniforms.uColor=Tn.shared.setValue(e.tint).premultiply(e.worldAlpha,c).toArray(f.uniforms.uColor),f.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),f.uniforms.uSampler=a,n.shader.bind(f),n.geometry.bind(r),this.state.blendMode=S3(e.blendMode,c),n.state.set(this.state),n.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}tD.extension={name:"tilingSprite",type:rt.RendererPlugin};bt.add(tD);const tLe=Object.freeze(Object.defineProperty({__proto__:null,TilingSprite:mC,TilingSpriteRenderer:tD},Symbol.toStringTag,{value:"Module"})),Rq=class vL{constructor(e){this.stage=new qi,e=Object.assign({forceCanvas:!1},e),this.renderer=IK(e),vL._plugins.forEach(n=>{n.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){var e;return(e=this.renderer)==null?void 0:e.view}get screen(){var e;return(e=this.renderer)==null?void 0:e.screen}destroy(e,n){const r=vL._plugins.slice(0);r.reverse(),r.forEach(i=>{i.destroy.call(this)}),this.stage.destroy(n),this.stage=null,this.renderer.destroy(e),this.renderer=null}};Rq._plugins=[];let Y1=Rq;bt.handleByList(rt.Application,Y1._plugins);class nD{static init(e){Object.defineProperty(this,"resizeTo",{set(n){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=n,n&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let n,r;if(this._resizeTo===globalThis.window)n=globalThis.innerWidth,r=globalThis.innerHeight;else{const{clientWidth:i,clientHeight:s}=this._resizeTo;n=i,r=s}this.renderer.resize(n,r),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}nD.extension=rt.Application;bt.add(nD);const nLe=Object.freeze(Object.defineProperty({__proto__:null,Application:Y1,ResizePlugin:nD},Symbol.toStringTag,{value:"Module"}));function wo(t){return wo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wo(t)}function Pq(t){var e=function(n,r){if(wo(n)!=="object"||n===null)return n;var i=n[Symbol.toPrimitive];if(i!==void 0){var s=i.call(n,r||"default");if(wo(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}(t,"string");return wo(e)==="symbol"?e:String(e)}function jr(t,e,n){return(e=Pq(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function NP(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function $c(t){return function(e){if(Array.isArray(e))return NP(e)}(t)||function(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}(t)||function(e,n){if(e){if(typeof e=="string")return NP(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?NP(e,n):void 0}}(t)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function Dr(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i]}var rLe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function iLe(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sLe=function(t){return t==null};function uv(t){var e=[];if(t===void 0)return e;if(typeof t=="string")e=t.split(",");else if(typeof t=="number")e=[t];else if(Array.isArray(t))e=$c(t);else{if(t===null||wo(t)!=="object")return e;e=[t&&(t==null?void 0:t.x)||0,t&&(t==null?void 0:t.y)||0]}return e.filter(function(n){return!sLe(n)&&!isNaN(n)}).map(Number)}function y6(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function DP(t){return t instanceof Ot||t instanceof Ua}var Xw=["click","mousedown","mousemove","mouseout","mouseover","mouseup","mouseupoutside","tap","touchstart","touchmove","touchend","touchendoutside","pointercancel","pointerout","pointerover","pointertap","pointerdown","pointerup","pointerupoutside","pointermove","rightclick","rightdown","rightup","rightupoutside","touchcancel","touchendoutside","touchmove","touchstart"];function BP(t,e,n){if(DP(t[e])&&DP(n))t[e].copyFrom(n);else if(DP(t[e])){var r=uv(n);Dr(r!==void 0&&r.length>0&&r.length<3,"The property `%s` is a `PIXI.Point` or `PIXI.ObservablePoint` and must be set to a comma-separated string of either 1 or 2 coordinates, a 1 or 2 element array containing coordinates, or a PIXI Point/ObservablePoint. If only one coordinate is given then X and Y will be set to the provided value. Received: `%s` of type `%s`.",e,JSON.stringify(n),wo(n)),t[e].set(r.shift(),r.shift())}else t[e]=n}var bp,Iq=function(t){var e,n=t;if(!Array.isArray(n)){if(e=t,Object.prototype.toString.call(e)!=="[object Object]")throw new Error("collection needs to be an Array or Object");n=Object.keys(t)}var r={};return n.forEach(function(i){r[i]=!0}),function(i){return r[i]!==void 0}},Mq=function(t){return function(){return!t.apply(void 0,arguments)}},yL="children",oLe=(jr(bp={},yL,!0),jr(bp,"parent",!0),jr(bp,"worldAlpha",!0),jr(bp,"worldTransform",!0),jr(bp,"worldVisible",!0),bp),_L={alpha:1,buttonMode:!1,cacheAsBitmap:!1,cursor:null,filterArea:null,filters:null,hitArea:null,interactive:!1,mask:null,pivot:0,position:0,renderable:!0,rotation:0,scale:1,skew:0,transform:null,visible:!0,x:0,y:0},Vl=function(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=function(a){return requestAnimationFrame(function(){var l,c;a==null||(l=a.__reactpixi)===null||l===void 0||(c=l.root)===null||c===void 0||c.emit("__REACT_PIXI_REQUEST_RENDER__")})},i=function(a,l){if(n.hasOwnProperty(a))return Dr(l.typeofs.some(function(c){return wo(n[a])===c})||l.instanceofs.some(function(c){return n[a]instanceof c}),"".concat(t," ").concat(a," prop is invalid")),n[a]};if(n.texture)return Dr(n.texture instanceof zt,"".concat(t," texture needs to be typeof `Texture`")),n.texture;var s=i("image",{typeofs:["string"],instanceofs:[HTMLImageElement]})||i("video",{typeofs:["string"],instanceofs:[HTMLVideoElement]})||i("source",{typeofs:["string","number"],instanceofs:[HTMLImageElement,HTMLVideoElement,HTMLCanvasElement,zt]});Dr(!!s,"".concat(t," could not get texture from props"));var o=zt.from(s);return o.__reactpixi={root:e},o.once("update",r),o.once("loaded",r),o.valid&&r(o),o},aLe=Mq(Iq([].concat($c(Object.keys(oLe)),$c(Xw))));function Wl(t,e,n){var r=!1;if(Dr(lr.prototype.isPrototypeOf(t),"instance needs to be typeof `DisplayObject`, got `%s`",wo(t)),!n.ignoreEvents)for(var i=typeof t.removeListener=="function",s=typeof t.on=="function",o=0;o<Xw.length;o++){var a=Xw[o];e[a]!==n[a]&&(r=!0,typeof e[a]=="function"&&i&&t.removeListener(a,e[a]),typeof n[a]=="function"&&s&&t.on(a,n[a]))}var l=Object.keys(n||{});if(n.overwriteProps){for(var c=0;c<l.length;c++){var u=l[c];e[u]!==n[u]&&(r=!0,BP(t,u,n[u]))}return r}for(var d=l.filter(aLe),h=0;h<d.length;h++){var f=d[h],p=n[f];n[f]!==e[f]&&(r=!0),p!==void 0?BP(t,f,p):f in _L?(console.warn("setting default value: ".concat(f,", from: ").concat(t[f]," to: ").concat(p," for"),t),r=!0,BP(t,f,_L[f])):console.warn("ignoring prop: ".concat(f,", from ").concat(t[f]," to ").concat(p," for"),t)}return r}var lLe=function(t,e){var n=e.text,r=e.style;return new XK(n,r)},cLe=function(){return new qi};function $d(t,e){if(t==null)return{};var n,r,i=function(o,a){if(o==null)return{};var l,c,u={},d=Object.keys(o);for(c=0;c<d.length;c++)l=d[c],a.indexOf(l)>=0||(u[l]=o[l]);return u}(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}var uLe=["draw","geometry"],dLe=function(t,e){var n=e.geometry;Dr(!n||n instanceof Sm,"Graphics geometry needs to be a `PIXI.Graphics`");var r=n?new Sm(n.geometry):new Sm;return r.applyProps=function(i,s,o){var a=o.draw;o.geometry;var l=Wl(i,s,$d(o,uLe));return s.draw!==a&&typeof a=="function"&&(l=!0,a.call(r,r)),l},r},hLe=["image","texture"],fLe=function(t,e){var n=e.leftWidth,r=n===void 0?10:n,i=e.topHeight,s=i===void 0?10:i,o=e.rightWidth,a=o===void 0?10:o,l=e.bottomHeight,c=l===void 0?10:l,u=Vl("NineSlicePlane",t,e),d=new Tq(u,r,s,a,c);return d.applyProps=function(h,f,p){var m=p.image,_=p.texture,y=Wl(h,f,$d(p,hLe));return(m||_)&&(_!==f.texture&&(y=!0),h.texture=Vl("NineSlicePlane",t,p)),y},d};function _6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_6(Object(n),!0).forEach(function(r){jr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var pLe=function(t,e){var n=e.maxSize,r=n===void 0?1500:n,i=e.batchSize,s=i===void 0?16384:i,o=e.autoResize,a=o!==void 0&&o,l=dx(dx({},{vertices:!1,scale:!0,position:!0,rotation:!0,uvs:!0,tint:!0}),e.properties||{}),c=dx(dx({},{children:!1,texture:!1,baseTexture:!1}),e.destroyOptions||{}),u=new Aq(r,l,s,a);return u.willUnmount=function(d,h,f){d.destroy(c)},u},mLe=["image","texture"],gLe=function(t,e){var n=new tl(Vl("Sprite",t,e));return n.applyProps=function(r,i,s){var o=s.image,a=s.texture,l=Wl(r,i,$d(s,mLe));return(a&&i.texture!==s.texture||o&&i.image!==s.image)&&(i.texture!==s.texture&&(l=!0),r.texture=Vl("Sprite",t,s)),l},n},vLe=["textures","isPlaying","initialFrame","images"],yLe=function(t,e){var n=e.textures,r=e.images,i=e.isPlaying,s=i===void 0||i,o=e.initialFrame,a=function(c){return c.map(function(u){return Dr(u instanceof zt||(u==null?void 0:u.texture),"AnimationSprite texture needs to be an array of `PIXI.Texture` or `{ texture: PIXI.Texture, time:\n                number }`"),u})},l=r?ig.fromImages(r):new ig(a(n));return l[s?"gotoAndPlay":"gotoAndStop"](o||0),l.applyProps=function(c,u,d){var h=d.textures,f=d.isPlaying,p=d.initialFrame,m=d.images,_=Wl(c,u,$d(d,vLe));if(m&&u.images!==m){for(var y=[],x=0;x<m.length;++x)y.push(zt.from(m[x]));c.textures=y,_=!0}if(h&&u.textures!==h&&(c.textures=a(h),_=!0),f!==u.isPlaying||p!==u.initialFrame){var b=typeof p=="number"?p:l.currentFrame||0;l[f?"gotoAndPlay":"gotoAndStop"](b),_=!0}return _},l},_Le=function(t,e){var n=e.text,r=n===void 0?"":n,i=e.style,s=i===void 0?{}:i,o=e.isSprite,a=new dC(r,s);return o?(a.updateText(),new tl(a.texture)):a},bLe=["tileScale","tilePosition","image","texture"],xLe=function(t,e){var n=e.width,r=n===void 0?100:n,i=e.height,s=i===void 0?100:i,o=Vl("TilingSprite",t,e),a=new mC(o,r,s);return a.applyProps=function(l,c,u){var d=u.tileScale,h=u.tilePosition,f=u.image,p=u.texture,m=Wl(l,c,$d(u,bLe));if(h){var _,y=uv(h);(_=l.tilePosition).set.apply(_,$c(y)),m=!y6(uv(c.tilePosition),y)||m}if(d){var x,b=uv(d);(x=l.tileScale).set.apply(x,$c(b)),m=!y6(uv(c.tileScale),b)||m}return(f||p)&&(p!==c.texture&&(m=!0),l.texture=Vl("Sprite",t,u)),m},a},ELe=["image","texture"],wLe=function(t,e){var n=Vl("Mesh",t,e),r=e.vertices,i=e.uvs,s=e.indices,o=e.drawMode,a=o===void 0?na.TRIANGLES:o,l=new Sq(n,r,i,s,a);return l.applyProps=function(c,u,d){var h=d.image,f=d.texture,p=Wl(c,u,$d(d,ELe));return(h||f)&&(f!==u.texture&&(p=!0),c.texture=Vl("Mesh",t,d)),p},l},TLe=["image","texture"],SLe=function(t,e){var n=Vl("SimpleRope",t,e),r=e.points,i=new Cq(n,r);return i.applyProps=function(s,o,a){var l=a.image,c=a.texture,u=$d(a,TLe);Dr(Array.isArray(a.points),"SimpleRope points needs to be %s","Array<PIXI.Point>");var d=Wl(s,o,u);return(l||c)&&(c!==o.texture&&(d=!0),s.texture=Vl("SimpleRope",t,a)),d},i},CLe=Object.freeze({__proto__:null,BitmapText:lLe,Container:cLe,Graphics:dLe,NineSlicePlane:fLe,ParticleContainer:pLe,Sprite:gLe,Text:_Le,TilingSprite:xLe,SimpleMesh:wLe,SimpleRope:SLe,AnimatedSprite:yLe});function b6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function x6(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?b6(Object(n),!0).forEach(function(r){jr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):b6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var Qs={BitmapText:"BitmapText",Container:"Container",Graphics:"Graphics",NineSlicePlane:"NineSlicePlane",ParticleContainer:"ParticleContainer",Sprite:"Sprite",AnimatedSprite:"AnimatedSprite",Text:"Text",TilingSprite:"TilingSprite",SimpleMesh:"SimpleMesh",SimpleRope:"SimpleRope"},ALe=Object.keys(Qs).reduce(function(t,e){return x6(x6({},t),{},jr({},e,CLe[e]))},{}),Lq={};function RLe(t,e){return Dr(!!t,"Expect type to be defined, got `%s`",t),Dr(!Qs[t],"Component `%s` could not be created, already exists in default components.",t),Lq[t]=e,t}var E6,w6,T6,S6,bL={},xL={},PLe={get exports(){return xL},set exports(t){xL=t}},C6={};function ILe(){return w6||(w6=1,PLe.exports=(E6||(E6=1,function(t){function e(j,H){var Q=j.length;j.push(H);e:for(;0<Q;){var V=Q-1>>>1,ee=j[V];if(!(0<i(ee,H)))break e;j[V]=H,j[Q]=ee,Q=V}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var H=j[0],Q=j.pop();if(Q!==H){j[0]=Q;e:for(var V=0,ee=j.length,ye=ee>>>1;V<ye;){var se=2*(V+1)-1,fe=j[se],ve=se+1,Oe=j[ve];if(0>i(fe,Q))ve<ee&&0>i(Oe,fe)?(j[V]=Oe,j[ve]=Q,V=ve):(j[V]=fe,j[se]=Q,V=se);else{if(!(ve<ee&&0>i(Oe,Q)))break e;j[V]=Oe,j[ve]=Q,V=ve}}}return H}function i(j,H){var Q=j.sortIndex-H.sortIndex;return Q!==0?Q:j.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,d=null,h=3,f=!1,p=!1,m=!1,_=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;function b(j){for(var H=n(c);H!==null;){if(H.callback===null)r(c);else{if(!(H.startTime<=j))break;r(c),H.sortIndex=H.expirationTime,e(l,H)}H=n(c)}}function E(j){if(m=!1,b(j),!p)if(n(l)!==null)p=!0,X(w);else{var H=n(c);H!==null&&G(E,H.startTime-j)}}function w(j,H){p=!1,m&&(m=!1,y(M),M=-1),f=!0;var Q=h;try{for(b(H),d=n(l);d!==null&&(!(d.expirationTime>H)||j&&!I());){var V=d.callback;if(typeof V=="function"){d.callback=null,h=d.priorityLevel;var ee=V(d.expirationTime<=H);H=t.unstable_now(),typeof ee=="function"?d.callback=ee:d===n(l)&&r(l),b(H)}else r(l);d=n(l)}if(d!==null)var ye=!0;else{var se=n(c);se!==null&&G(E,se.startTime-H),ye=!1}return ye}finally{d=null,h=Q,f=!1}}typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var T,C=!1,P=null,M=-1,N=5,F=-1;function I(){return!(t.unstable_now()-F<N)}function k(){if(P!==null){var j=t.unstable_now();F=j;var H=!0;try{H=P(!0,j)}finally{H?T():(C=!1,P=null)}}else C=!1}if(typeof x=="function")T=function(){x(k)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,z=R.port2;R.port1.onmessage=k,T=function(){z.postMessage(null)}}else T=function(){_(k,0)};function X(j){P=j,C||(C=!0,T())}function G(j,H){M=_(function(){j(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,X(w))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(j){switch(h){case 1:case 2:case 3:var H=3;break;default:H=h}var Q=h;h=H;try{return j()}finally{h=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,H){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var Q=h;h=j;try{return H()}finally{h=Q}},t.unstable_scheduleCallback=function(j,H,Q){var V=t.unstable_now();switch(Q=typeof Q=="object"&&Q!==null&&typeof(Q=Q.delay)=="number"&&0<Q?V+Q:V,j){case 1:var ee=-1;break;case 2:ee=250;break;case 5:ee=1073741823;break;case 4:ee=1e4;break;default:ee=5e3}return j={id:u++,callback:H,priorityLevel:j,startTime:Q,expirationTime:ee=Q+ee,sortIndex:-1},Q>V?(j.sortIndex=Q,e(c,j),n(l)===null&&j===n(c)&&(m?(y(M),M=-1):m=!0,G(E,Q-V))):(j.sortIndex=ee,e(l,j),p||f||(p=!0,X(w))),j},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(j){var H=h;return function(){var Q=h;h=H;try{return j.apply(this,arguments)}finally{h=Q}}}}(C6)),C6)),xL}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function MLe(){return S6||(S6=1,T6=function(t){var e={},n=Gn,r=ILe(),i=Object.assign;function s(g){for(var v="https://reactjs.org/docs/error-decoder.html?invariant="+g,S=1;S<arguments.length;S++)v+="&args[]="+encodeURIComponent(arguments[S]);return"Minified React error #"+g+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,a=Symbol.for("react.element"),l=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),b=Symbol.for("react.offscreen"),E=Symbol.iterator;function w(g){return g===null||typeof g!="object"?null:typeof(g=E&&g[E]||g["@@iterator"])=="function"?g:null}function T(g){if(g==null)return null;if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g;switch(g){case c:return"Fragment";case l:return"Portal";case d:return"Profiler";case u:return"StrictMode";case m:return"Suspense";case _:return"SuspenseList"}if(typeof g=="object")switch(g.$$typeof){case f:return(g.displayName||"Context")+".Consumer";case h:return(g._context.displayName||"Context")+".Provider";case p:var v=g.render;return(g=g.displayName)||(g=(g=v.displayName||v.name||"")!==""?"ForwardRef("+g+")":"ForwardRef"),g;case y:return(v=g.displayName||null)!==null?v:T(g.type)||"Memo";case x:v=g._payload,g=g._init;try{return T(g(v))}catch{}}return null}function C(g){var v=g.type;switch(g.tag){case 24:return"Cache";case 9:return(v.displayName||"Context")+".Consumer";case 10:return(v._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return g=(g=v.render).displayName||g.name||"",v.displayName||(g!==""?"ForwardRef("+g+")":"ForwardRef");case 7:return"Fragment";case 5:return v;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return T(v);case 8:return v===u?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof v=="function")return v.displayName||v.name||null;if(typeof v=="string")return v}return null}function P(g){var v=g,S=g;if(g.alternate)for(;v.return;)v=v.return;else{g=v;do 4098&(v=g).flags&&(S=v.return),g=v.return;while(g)}return v.tag===3?S:null}function M(g){if(P(g)!==g)throw Error(s(188))}function N(g){var v=g.alternate;if(!v){if((v=P(g))===null)throw Error(s(188));return v!==g?null:g}for(var S=g,L=v;;){var O=S.return;if(O===null)break;var $=O.alternate;if($===null){if((L=O.return)!==null){S=L;continue}break}if(O.child===$.child){for($=O.child;$;){if($===S)return M(O),g;if($===L)return M(O),v;$=$.sibling}throw Error(s(188))}if(S.return!==L.return)S=O,L=$;else{for(var te=!1,ce=O.child;ce;){if(ce===S){te=!0,S=O,L=$;break}if(ce===L){te=!0,L=O,S=$;break}ce=ce.sibling}if(!te){for(ce=$.child;ce;){if(ce===S){te=!0,S=$,L=O;break}if(ce===L){te=!0,L=$,S=O;break}ce=ce.sibling}if(!te)throw Error(s(189))}}if(S.alternate!==L)throw Error(s(190))}if(S.tag!==3)throw Error(s(188));return S.stateNode.current===S?g:v}function F(g){return(g=N(g))!==null?I(g):null}function I(g){if(g.tag===5||g.tag===6)return g;for(g=g.child;g!==null;){var v=I(g);if(v!==null)return v;g=g.sibling}return null}function k(g){if(g.tag===5||g.tag===6)return g;for(g=g.child;g!==null;){if(g.tag!==4){var v=k(g);if(v!==null)return v}g=g.sibling}return null}var R,z=Array.isArray,X=t.getPublicInstance,G=t.getRootHostContext,j=t.getChildHostContext,H=t.prepareForCommit,Q=t.resetAfterCommit,V=t.createInstance,ee=t.appendInitialChild,ye=t.finalizeInitialChildren,se=t.prepareUpdate,fe=t.shouldSetTextContent,ve=t.createTextInstance,Oe=t.scheduleTimeout,ae=t.cancelTimeout,ue=t.noTimeout,Ce=t.isPrimaryRenderer,pe=t.supportsMutation,ke=t.supportsPersistence,Re=t.supportsHydration,B=t.getInstanceFromNode,oe=t.preparePortalMount,ie=t.getCurrentEventPriority,q=t.detachDeletedInstance,Y=t.supportsMicrotasks,ne=t.scheduleMicrotask,me=t.supportsTestSelectors,he=t.findFiberRoot,de=t.getBoundingRect,Ae=t.getTextContent,De=t.isHiddenSubtree,Be=t.matchAccessibilityRole,tt=t.setFocusIfFocusable,St=t.setupIntersectionObserver,be=t.appendChild,we=t.appendChildToContainer,qe=t.commitTextUpdate,gt=t.commitMount,Bt=t.commitUpdate,Ie=t.insertBefore,It=t.insertInContainerBefore,Ve=t.removeChild,Ye=t.removeChildFromContainer,ft=t.resetTextContent,kt=t.hideInstance,vn=t.hideTextInstance,zn=t.unhideInstance,Kn=t.unhideTextInstance,ur=t.clearContainer,le=t.cloneInstance,_e=t.createContainerChildSet,Me=t.appendChildToContainerChildSet,et=t.finalizeContainerChildren,ct=t.replaceContainerChildren,jt=t.cloneHiddenInstance,Pt=t.cloneHiddenTextInstance,Ct=t.canHydrateInstance,vt=t.canHydrateTextInstance,Jt=t.canHydrateSuspenseInstance,Sn=t.isSuspenseInstancePending,Nt=t.isSuspenseInstanceFallback,Kt=t.getSuspenseInstanceFallbackErrorDetails,Nn=t.registerSuspenseInstanceRetry,qn=t.getNextHydratableSibling,Mn=t.getFirstHydratableChild,ti=t.getFirstHydratableChildWithinContainer,gs=t.getFirstHydratableChildWithinSuspenseInstance,Zi=t.hydrateInstance,un=t.hydrateTextInstance,yn=t.hydrateSuspenseInstance,ni=t.getNextHydratableInstanceAfterSuspenseInstance,gi=t.commitHydratedContainer,_r=t.commitHydratedSuspenseInstance,vs=t.clearSuspenseBoundary,Xt=t.clearSuspenseBoundaryFromContainer,Zt=t.shouldDeleteUnhydratedTailInstances,$n=t.didNotMatchHydratedContainerTextInstance,Oi=t.didNotMatchHydratedTextInstance;function br(g){if(R===void 0)try{throw Error()}catch(S){var v=S.stack.trim().match(/\n( *(at )?)/);R=v&&v[1]||""}return`
`+R+g}var ko=!1;function No(g,v){if(!g||ko)return"";ko=!0;var S=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(v)if(v=function(){throw Error()},Object.defineProperty(v.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(v,[])}catch(Ne){var L=Ne}Reflect.construct(g,[],v)}else{try{v.call()}catch(Ne){L=Ne}g.call(v.prototype)}else{try{throw Error()}catch(Ne){L=Ne}g()}}catch(Ne){if(Ne&&L&&typeof Ne.stack=="string"){for(var O=Ne.stack.split(`
`),$=L.stack.split(`
`),te=O.length-1,ce=$.length-1;1<=te&&0<=ce&&O[te]!==$[ce];)ce--;for(;1<=te&&0<=ce;te--,ce--)if(O[te]!==$[ce]){if(te!==1||ce!==1)do if(te--,0>--ce||O[te]!==$[ce]){var Ee=`
`+O[te].replace(" at new "," at ");return g.displayName&&Ee.includes("<anonymous>")&&(Ee=Ee.replace("<anonymous>",g.displayName)),Ee}while(1<=te&&0<=ce);break}}}finally{ko=!1,Error.prepareStackTrace=S}return(g=g?g.displayName||g.name:"")?br(g):""}var ya=Object.prototype.hasOwnProperty,nc=[],ki=-1;function vi(g){return{current:g}}function Vn(g){0>ki||(g.current=nc[ki],nc[ki]=null,ki--)}function Dn(g,v){ki++,nc[ki]=g.current,g.current=v}var Js={},jn=vi(Js),ri=vi(!1),_a=Js;function nl(g,v){var S=g.type.contextTypes;if(!S)return Js;var L=g.stateNode;if(L&&L.__reactInternalMemoizedUnmaskedChildContext===v)return L.__reactInternalMemoizedMaskedChildContext;var O,$={};for(O in S)$[O]=v[O];return L&&((g=g.stateNode).__reactInternalMemoizedUnmaskedChildContext=v,g.__reactInternalMemoizedMaskedChildContext=$),$}function Ni(g){return(g=g.childContextTypes)!=null}function jd(){Vn(ri),Vn(jn)}function Gd(g,v,S){if(jn.current!==Js)throw Error(s(168));Dn(jn,v),Dn(ri,S)}function Do(g,v,S){var L=g.stateNode;if(v=v.childContextTypes,typeof L.getChildContext!="function")return S;for(var O in L=L.getChildContext())if(!(O in v))throw Error(s(108,C(g)||"Unknown",O));return i({},S,L)}function zf(g){return g=(g=g.stateNode)&&g.__reactInternalMemoizedMergedChildContext||Js,_a=jn.current,Dn(jn,g),Dn(ri,ri.current),!0}function Bg(g,v,S){var L=g.stateNode;if(!L)throw Error(s(169));S?(g=Do(g,v,_a),L.__reactInternalMemoizedMergedChildContext=g,Vn(ri),Vn(jn),Dn(jn,g)):Vn(ri),Dn(ri,S)}var ys=Math.clz32?Math.clz32:function(g){return(g>>>=0)===0?32:31-(l_(g)/AC|0)|0},l_=Math.log,AC=Math.LN2,Fg=64,K=4194304;function J(g){switch(g&-g){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&g;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&g;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return g}}function re(g,v){var S=g.pendingLanes;if(S===0)return 0;var L=0,O=g.suspendedLanes,$=g.pingedLanes,te=268435455&S;if(te!==0){var ce=te&~O;ce!==0?L=J(ce):($&=te)!==0&&(L=J($))}else(te=S&~O)!==0?L=J(te):$!==0&&(L=J($));if(L===0)return 0;if(v!==0&&v!==L&&!(v&O)&&((O=L&-L)>=($=v&-v)||O===16&&4194240&$))return v;if(4&L&&(L|=16&S),(v=g.entangledLanes)!==0)for(g=g.entanglements,v&=L;0<v;)O=1<<(S=31-ys(v)),L|=g[S],v&=~O;return L}function Te(g,v){switch(g){case 1:case 2:case 4:return v+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return v+5e3;default:return-1}}function We(g){return(g=-1073741825&g.pendingLanes)!==0?g:1073741824&g?1073741824:0}function ut(){var g=Fg;return!(4194240&(Fg<<=1))&&(Fg=64),g}function tn(g){for(var v=[],S=0;31>S;S++)v.push(g);return v}function dr(g,v,S){g.pendingLanes|=v,v!==536870912&&(g.suspendedLanes=0,g.pingedLanes=0),(g=g.eventTimes)[v=31-ys(v)]=S}function Ur(g,v){var S=g.entangledLanes|=v;for(g=g.entanglements;S;){var L=31-ys(S),O=1<<L;O&v|g[L]&v&&(g[L]|=v),S&=~O}}var Gt=0;function eo(g){return 1<(g&=-g)?4<g?268435455&g?16:536870912:4:1}var RC=r.unstable_scheduleCallback,qD=r.unstable_cancelCallback,JJ=r.unstable_shouldYield,eee=r.unstable_requestPaint,yi=r.unstable_now,PC=r.unstable_ImmediatePriority,tee=r.unstable_UserBlockingPriority,ZD=r.unstable_NormalPriority,nee=r.unstable_IdlePriority,c_=null,rl=null,ba=typeof Object.is=="function"?Object.is:function(g,v){return g===v&&(g!==0||1/g==1/v)||g!=g&&v!=v},rc=null,u_=!1,IC=!1;function QD(g){rc===null?rc=[g]:rc.push(g)}function il(){if(!IC&&rc!==null){IC=!0;var g=0,v=Gt;try{var S=rc;for(Gt=1;g<S.length;g++){var L=S[g];do L=L(!0);while(L!==null)}rc=null,u_=!1}catch(O){throw rc!==null&&(rc=rc.slice(g+1)),RC(PC,il),O}finally{Gt=v,IC=!1}}return null}var $f=[],jf=0,d_=null,h_=0,Bo=[],Fo=0,Hd=null,sl=1,ic="";function Vd(g,v){$f[jf++]=h_,$f[jf++]=d_,d_=g,h_=v}function JD(g,v,S){Bo[Fo++]=sl,Bo[Fo++]=ic,Bo[Fo++]=Hd,Hd=g;var L=sl;g=ic;var O=32-ys(L)-1;L&=~(1<<O),S+=1;var $=32-ys(v)+O;if(30<$){var te=O-O%5;$=(L&(1<<te)-1).toString(32),L>>=te,O-=te,sl=1<<32-ys(v)+O|S<<O|L,ic=$+g}else sl=1<<$|S<<O|L,ic=g}function MC(g){g.return!==null&&(Vd(g,1),JD(g,1,0))}function LC(g){for(;g===d_;)d_=$f[--jf],$f[jf]=null,h_=$f[--jf],$f[jf]=null;for(;g===Hd;)Hd=Bo[--Fo],Bo[Fo]=null,ic=Bo[--Fo],Bo[Fo]=null,sl=Bo[--Fo],Bo[Fo]=null}var to=null,Uo=null,hr=!1,Ug=!1,xa=null;function eB(g,v){var S=Ho(5,null,null,0);S.elementType="DELETED",S.stateNode=v,S.return=g,(v=g.deletions)===null?(g.deletions=[S],g.flags|=16):v.push(S)}function tB(g,v){switch(g.tag){case 5:return(v=Ct(v,g.type,g.pendingProps))!==null&&(g.stateNode=v,to=g,Uo=Mn(v),!0);case 6:return(v=vt(v,g.pendingProps))!==null&&(g.stateNode=v,to=g,Uo=null,!0);case 13:if((v=Jt(v))!==null){var S=Hd!==null?{id:sl,overflow:ic}:null;return g.memoizedState={dehydrated:v,treeContext:S,retryLane:1073741824},(S=Ho(18,null,null,0)).stateNode=v,S.return=g,g.child=S,to=g,Uo=null,!0}return!1;default:return!1}}function OC(g){return(1&g.mode)!=0&&(128&g.flags)==0}function kC(g){if(hr){var v=Uo;if(v){var S=v;if(!tB(g,v)){if(OC(g))throw Error(s(418));v=qn(S);var L=to;v&&tB(g,v)?eB(L,S):(g.flags=-4097&g.flags|2,hr=!1,to=g)}}else{if(OC(g))throw Error(s(418));g.flags=-4097&g.flags|2,hr=!1,to=g}}}function nB(g){for(g=g.return;g!==null&&g.tag!==5&&g.tag!==3&&g.tag!==13;)g=g.return;to=g}function f_(g){if(!Re||g!==to)return!1;if(!hr)return nB(g),hr=!0,!1;if(g.tag!==3&&(g.tag!==5||Zt(g.type)&&!fe(g.type,g.memoizedProps))){var v=Uo;if(v){if(OC(g))throw rB(),Error(s(418));for(;v;)eB(g,v),v=qn(v)}}if(nB(g),g.tag===13){if(!Re)throw Error(s(316));if(!(g=(g=g.memoizedState)!==null?g.dehydrated:null))throw Error(s(317));Uo=ni(g)}else Uo=to?qn(g.stateNode):null;return!0}function rB(){for(var g=Uo;g;)g=qn(g)}function Gf(){Re&&(Uo=to=null,Ug=hr=!1)}function NC(g){xa===null?xa=[g]:xa.push(g)}var ree=o.ReactCurrentBatchConfig;function p_(g,v){if(ba(g,v))return!0;if(typeof g!="object"||g===null||typeof v!="object"||v===null)return!1;var S=Object.keys(g),L=Object.keys(v);if(S.length!==L.length)return!1;for(L=0;L<S.length;L++){var O=S[L];if(!ya.call(v,O)||!ba(g[O],v[O]))return!1}return!0}function iee(g){switch(g.tag){case 5:return br(g.type);case 16:return br("Lazy");case 13:return br("Suspense");case 19:return br("SuspenseList");case 0:case 2:case 15:return g=No(g.type,!1);case 11:return g=No(g.type.render,!1);case 1:return g=No(g.type,!0);default:return""}}function Ea(g,v){if(g&&g.defaultProps){for(var S in v=i({},v),g=g.defaultProps)v[S]===void 0&&(v[S]=g[S]);return v}return v}var m_=vi(null),g_=null,Hf=null,DC=null;function BC(){DC=Hf=g_=null}function iB(g,v,S){Ce?(Dn(m_,v._currentValue),v._currentValue=S):(Dn(m_,v._currentValue2),v._currentValue2=S)}function FC(g){var v=m_.current;Vn(m_),Ce?g._currentValue=v:g._currentValue2=v}function UC(g,v,S){for(;g!==null;){var L=g.alternate;if((g.childLanes&v)!==v?(g.childLanes|=v,L!==null&&(L.childLanes|=v)):L!==null&&(L.childLanes&v)!==v&&(L.childLanes|=v),g===S)break;g=g.return}}function Vf(g,v){g_=g,DC=Hf=null,(g=g.dependencies)!==null&&g.firstContext!==null&&(g.lanes&v&&(Ds=!0),g.firstContext=null)}function zo(g){var v=Ce?g._currentValue:g._currentValue2;if(DC!==g)if(g={context:g,memoizedValue:v,next:null},Hf===null){if(g_===null)throw Error(s(308));Hf=g,g_.dependencies={lanes:0,firstContext:g}}else Hf=Hf.next=g;return v}var Wd=null;function zC(g){Wd===null?Wd=[g]:Wd.push(g)}function sB(g,v,S,L){var O=v.interleaved;return O===null?(S.next=S,zC(v)):(S.next=O.next,O.next=S),v.interleaved=S,ol(g,L)}function ol(g,v){g.lanes|=v;var S=g.alternate;for(S!==null&&(S.lanes|=v),S=g,g=g.return;g!==null;)g.childLanes|=v,(S=g.alternate)!==null&&(S.childLanes|=v),S=g,g=g.return;return S.tag===3?S.stateNode:null}var nu=!1;function $C(g){g.updateQueue={baseState:g.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oB(g,v){g=g.updateQueue,v.updateQueue===g&&(v.updateQueue={baseState:g.baseState,firstBaseUpdate:g.firstBaseUpdate,lastBaseUpdate:g.lastBaseUpdate,shared:g.shared,effects:g.effects})}function sc(g,v){return{eventTime:g,lane:v,tag:0,payload:null,callback:null,next:null}}function ru(g,v,S){var L=g.updateQueue;if(L===null)return null;if(L=L.shared,(2&gn)!=0){var O=L.pending;return O===null?v.next=v:(v.next=O.next,O.next=v),L.pending=v,ol(g,S)}return(O=L.interleaved)===null?(v.next=v,zC(L)):(v.next=O.next,O.next=v),L.interleaved=v,ol(g,S)}function v_(g,v,S){if((v=v.updateQueue)!==null&&(v=v.shared,(4194240&S)!=0)){var L=v.lanes;S|=L&=g.pendingLanes,v.lanes=S,Ur(g,S)}}function aB(g,v){var S=g.updateQueue,L=g.alternate;if(L!==null&&S===(L=L.updateQueue)){var O=null,$=null;if((S=S.firstBaseUpdate)!==null){do{var te={eventTime:S.eventTime,lane:S.lane,tag:S.tag,payload:S.payload,callback:S.callback,next:null};$===null?O=$=te:$=$.next=te,S=S.next}while(S!==null);$===null?O=$=v:$=$.next=v}else O=$=v;return S={baseState:L.baseState,firstBaseUpdate:O,lastBaseUpdate:$,shared:L.shared,effects:L.effects},void(g.updateQueue=S)}(g=S.lastBaseUpdate)===null?S.firstBaseUpdate=v:g.next=v,S.lastBaseUpdate=v}function y_(g,v,S,L){var O=g.updateQueue;nu=!1;var $=O.firstBaseUpdate,te=O.lastBaseUpdate,ce=O.shared.pending;if(ce!==null){O.shared.pending=null;var Ee=ce,Ne=Ee.next;Ee.next=null,te===null?$=Ne:te.next=Ne,te=Ee;var je=g.alternate;je!==null&&(ce=(je=je.updateQueue).lastBaseUpdate)!==te&&(ce===null?je.firstBaseUpdate=Ne:ce.next=Ne,je.lastBaseUpdate=Ee)}if($!==null){var nt=O.baseState;for(te=0,je=Ne=Ee=null,ce=$;;){var ze=ce.lane,Qe=ce.eventTime;if((L&ze)===ze){je!==null&&(je=je.next={eventTime:Qe,lane:0,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null});e:{var xt=g,sn=ce;switch(ze=v,Qe=S,sn.tag){case 1:if(typeof(xt=sn.payload)=="function"){nt=xt.call(Qe,nt,ze);break e}nt=xt;break e;case 3:xt.flags=-65537&xt.flags|128;case 0:if((ze=typeof(xt=sn.payload)=="function"?xt.call(Qe,nt,ze):xt)==null)break e;nt=i({},nt,ze);break e;case 2:nu=!0}}ce.callback!==null&&ce.lane!==0&&(g.flags|=64,(ze=O.effects)===null?O.effects=[ce]:ze.push(ce))}else Qe={eventTime:Qe,lane:ze,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null},je===null?(Ne=je=Qe,Ee=nt):je=je.next=Qe,te|=ze;if((ce=ce.next)===null){if((ce=O.shared.pending)===null)break;ce=(ze=ce).next,ze.next=null,O.lastBaseUpdate=ze,O.shared.pending=null}}if(je===null&&(Ee=nt),O.baseState=Ee,O.firstBaseUpdate=Ne,O.lastBaseUpdate=je,(v=O.shared.interleaved)!==null){O=v;do te|=O.lane,O=O.next;while(O!==v)}else $===null&&(O.shared.lanes=0);Yd|=te,g.lanes=te,g.memoizedState=nt}}function lB(g,v,S){if(g=v.effects,v.effects=null,g!==null)for(v=0;v<g.length;v++){var L=g[v],O=L.callback;if(O!==null){if(L.callback=null,L=S,typeof O!="function")throw Error(s(191,O));O.call(L)}}}var cB=new n.Component().refs;function jC(g,v,S,L){S=(S=S(L,v=g.memoizedState))==null?v:i({},v,S),g.memoizedState=S,g.lanes===0&&(g.updateQueue.baseState=S)}var __={isMounted:function(g){return!!(g=g._reactInternals)&&P(g)===g},enqueueSetState:function(g,v,S){g=g._reactInternals;var L=es(),O=au(g),$=sc(L,O);$.payload=v,S!=null&&($.callback=S),(v=ru(g,$,O))!==null&&(Go(v,g,O,L),v_(v,g,O))},enqueueReplaceState:function(g,v,S){g=g._reactInternals;var L=es(),O=au(g),$=sc(L,O);$.tag=1,$.payload=v,S!=null&&($.callback=S),(v=ru(g,$,O))!==null&&(Go(v,g,O,L),v_(v,g,O))},enqueueForceUpdate:function(g,v){g=g._reactInternals;var S=es(),L=au(g),O=sc(S,L);O.tag=2,v!=null&&(O.callback=v),(v=ru(g,O,L))!==null&&(Go(v,g,L,S),v_(v,g,L))}};function uB(g,v,S,L,O,$,te){return typeof(g=g.stateNode).shouldComponentUpdate=="function"?g.shouldComponentUpdate(L,$,te):!v.prototype||!v.prototype.isPureReactComponent||!p_(S,L)||!p_(O,$)}function dB(g,v,S){var L=!1,O=Js,$=v.contextType;return typeof $=="object"&&$!==null?$=zo($):(O=Ni(v)?_a:jn.current,$=(L=(L=v.contextTypes)!=null)?nl(g,O):Js),v=new v(S,$),g.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=__,g.stateNode=v,v._reactInternals=g,L&&((g=g.stateNode).__reactInternalMemoizedUnmaskedChildContext=O,g.__reactInternalMemoizedMaskedChildContext=$),v}function hB(g,v,S,L){g=v.state,typeof v.componentWillReceiveProps=="function"&&v.componentWillReceiveProps(S,L),typeof v.UNSAFE_componentWillReceiveProps=="function"&&v.UNSAFE_componentWillReceiveProps(S,L),v.state!==g&&__.enqueueReplaceState(v,v.state,null)}function GC(g,v,S,L){var O=g.stateNode;O.props=S,O.state=g.memoizedState,O.refs=cB,$C(g);var $=v.contextType;typeof $=="object"&&$!==null?O.context=zo($):($=Ni(v)?_a:jn.current,O.context=nl(g,$)),O.state=g.memoizedState,typeof($=v.getDerivedStateFromProps)=="function"&&(jC(g,v,$,S),O.state=g.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof O.getSnapshotBeforeUpdate=="function"||typeof O.UNSAFE_componentWillMount!="function"&&typeof O.componentWillMount!="function"||(v=O.state,typeof O.componentWillMount=="function"&&O.componentWillMount(),typeof O.UNSAFE_componentWillMount=="function"&&O.UNSAFE_componentWillMount(),v!==O.state&&__.enqueueReplaceState(O,O.state,null),y_(g,S,O,L),O.state=g.memoizedState),typeof O.componentDidMount=="function"&&(g.flags|=4194308)}function zg(g,v,S){if((g=S.ref)!==null&&typeof g!="function"&&typeof g!="object"){if(S._owner){if(S=S._owner){if(S.tag!==1)throw Error(s(309));var L=S.stateNode}if(!L)throw Error(s(147,g));var O=L,$=""+g;return v!==null&&v.ref!==null&&typeof v.ref=="function"&&v.ref._stringRef===$?v.ref:(v=function(te){var ce=O.refs;ce===cB&&(ce=O.refs={}),te===null?delete ce[$]:ce[$]=te},v._stringRef=$,v)}if(typeof g!="string")throw Error(s(284));if(!S._owner)throw Error(s(290,g))}return g}function b_(g,v){throw g=Object.prototype.toString.call(v),Error(s(31,g==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":g))}function fB(g){return(0,g._init)(g._payload)}function pB(g){function v(Ge,ge){if(g){var Le=Ge.deletions;Le===null?(Ge.deletions=[ge],Ge.flags|=16):Le.push(ge)}}function S(Ge,ge){if(!g)return null;for(;ge!==null;)v(Ge,ge),ge=ge.sibling;return null}function L(Ge,ge){for(Ge=new Map;ge!==null;)ge.key!==null?Ge.set(ge.key,ge):Ge.set(ge.index,ge),ge=ge.sibling;return Ge}function O(Ge,ge){return(Ge=cu(Ge,ge)).index=0,Ge.sibling=null,Ge}function $(Ge,ge,Le){return Ge.index=Le,g?(Le=Ge.alternate)!==null?(Le=Le.index)<ge?(Ge.flags|=2,ge):Le:(Ge.flags|=2,ge):(Ge.flags|=1048576,ge)}function te(Ge){return g&&Ge.alternate===null&&(Ge.flags|=2),Ge}function ce(Ge,ge,Le,Xe){return ge===null||ge.tag!==6?((ge=PA(Le,Ge.mode,Xe)).return=Ge,ge):((ge=O(ge,Le)).return=Ge,ge)}function Ee(Ge,ge,Le,Xe){var Mt=Le.type;return Mt===c?je(Ge,ge,Le.props.children,Xe,Le.key):ge!==null&&(ge.elementType===Mt||typeof Mt=="object"&&Mt!==null&&Mt.$$typeof===x&&fB(Mt)===ge.type)?((Xe=O(ge,Le.props)).ref=zg(Ge,ge,Le),Xe.return=Ge,Xe):((Xe=W_(Le.type,Le.key,Le.props,null,Ge.mode,Xe)).ref=zg(Ge,ge,Le),Xe.return=Ge,Xe)}function Ne(Ge,ge,Le,Xe){return ge===null||ge.tag!==4||ge.stateNode.containerInfo!==Le.containerInfo||ge.stateNode.implementation!==Le.implementation?((ge=IA(Le,Ge.mode,Xe)).return=Ge,ge):((ge=O(ge,Le.children||[])).return=Ge,ge)}function je(Ge,ge,Le,Xe,Mt){return ge===null||ge.tag!==7?((ge=Zd(Le,Ge.mode,Xe,Mt)).return=Ge,ge):((ge=O(ge,Le)).return=Ge,ge)}function nt(Ge,ge,Le){if(typeof ge=="string"&&ge!==""||typeof ge=="number")return(ge=PA(""+ge,Ge.mode,Le)).return=Ge,ge;if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case a:return(Le=W_(ge.type,ge.key,ge.props,null,Ge.mode,Le)).ref=zg(Ge,null,ge),Le.return=Ge,Le;case l:return(ge=IA(ge,Ge.mode,Le)).return=Ge,ge;case x:return nt(Ge,(0,ge._init)(ge._payload),Le)}if(z(ge)||w(ge))return(ge=Zd(ge,Ge.mode,Le,null)).return=Ge,ge;b_(Ge,ge)}return null}function ze(Ge,ge,Le,Xe){var Mt=ge!==null?ge.key:null;if(typeof Le=="string"&&Le!==""||typeof Le=="number")return Mt!==null?null:ce(Ge,ge,""+Le,Xe);if(typeof Le=="object"&&Le!==null){switch(Le.$$typeof){case a:return Le.key===Mt?Ee(Ge,ge,Le,Xe):null;case l:return Le.key===Mt?Ne(Ge,ge,Le,Xe):null;case x:return ze(Ge,ge,(Mt=Le._init)(Le._payload),Xe)}if(z(Le)||w(Le))return Mt!==null?null:je(Ge,ge,Le,Xe,null);b_(Ge,Le)}return null}function Qe(Ge,ge,Le,Xe,Mt){if(typeof Xe=="string"&&Xe!==""||typeof Xe=="number")return ce(ge,Ge=Ge.get(Le)||null,""+Xe,Mt);if(typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case a:return Ee(ge,Ge=Ge.get(Xe.key===null?Le:Xe.key)||null,Xe,Mt);case l:return Ne(ge,Ge=Ge.get(Xe.key===null?Le:Xe.key)||null,Xe,Mt);case x:return Qe(Ge,ge,Le,(0,Xe._init)(Xe._payload),Mt)}if(z(Xe)||w(Xe))return je(ge,Ge=Ge.get(Le)||null,Xe,Mt,null);b_(ge,Xe)}return null}function xt(Ge,ge,Le,Xe){for(var Mt=null,Ln=null,Et=ge,xn=ge=0,Bi=null;Et!==null&&xn<Le.length;xn++){Et.index>xn?(Bi=Et,Et=null):Bi=Et.sibling;var On=ze(Ge,Et,Le[xn],Xe);if(On===null){Et===null&&(Et=Bi);break}g&&Et&&On.alternate===null&&v(Ge,Et),ge=$(On,ge,xn),Ln===null?Mt=On:Ln.sibling=On,Ln=On,Et=Bi}if(xn===Le.length)return S(Ge,Et),hr&&Vd(Ge,xn),Mt;if(Et===null){for(;xn<Le.length;xn++)(Et=nt(Ge,Le[xn],Xe))!==null&&(ge=$(Et,ge,xn),Ln===null?Mt=Et:Ln.sibling=Et,Ln=Et);return hr&&Vd(Ge,xn),Mt}for(Et=L(Ge,Et);xn<Le.length;xn++)(Bi=Qe(Et,Ge,xn,Le[xn],Xe))!==null&&(g&&Bi.alternate!==null&&Et.delete(Bi.key===null?xn:Bi.key),ge=$(Bi,ge,xn),Ln===null?Mt=Bi:Ln.sibling=Bi,Ln=Bi);return g&&Et.forEach(function(uu){return v(Ge,uu)}),hr&&Vd(Ge,xn),Mt}function sn(Ge,ge,Le,Xe){var Mt=w(Le);if(typeof Mt!="function")throw Error(s(150));if((Le=Mt.call(Le))==null)throw Error(s(151));for(var Ln=Mt=null,Et=ge,xn=ge=0,Bi=null,On=Le.next();Et!==null&&!On.done;xn++,On=Le.next()){Et.index>xn?(Bi=Et,Et=null):Bi=Et.sibling;var uu=ze(Ge,Et,On.value,Xe);if(uu===null){Et===null&&(Et=Bi);break}g&&Et&&uu.alternate===null&&v(Ge,Et),ge=$(uu,ge,xn),Ln===null?Mt=uu:Ln.sibling=uu,Ln=uu,Et=Bi}if(On.done)return S(Ge,Et),hr&&Vd(Ge,xn),Mt;if(Et===null){for(;!On.done;xn++,On=Le.next())(On=nt(Ge,On.value,Xe))!==null&&(ge=$(On,ge,xn),Ln===null?Mt=On:Ln.sibling=On,Ln=On);return hr&&Vd(Ge,xn),Mt}for(Et=L(Ge,Et);!On.done;xn++,On=Le.next())(On=Qe(Et,Ge,xn,On.value,Xe))!==null&&(g&&On.alternate!==null&&Et.delete(On.key===null?xn:On.key),ge=$(On,ge,xn),Ln===null?Mt=On:Ln.sibling=On,Ln=On);return g&&Et.forEach(function(Ree){return v(Ge,Ree)}),hr&&Vd(Ge,xn),Mt}return function Ge(ge,Le,Xe,Mt){if(typeof Xe=="object"&&Xe!==null&&Xe.type===c&&Xe.key===null&&(Xe=Xe.props.children),typeof Xe=="object"&&Xe!==null){switch(Xe.$$typeof){case a:e:{for(var Ln=Xe.key,Et=Le;Et!==null;){if(Et.key===Ln){if((Ln=Xe.type)===c){if(Et.tag===7){S(ge,Et.sibling),(Le=O(Et,Xe.props.children)).return=ge,ge=Le;break e}}else if(Et.elementType===Ln||typeof Ln=="object"&&Ln!==null&&Ln.$$typeof===x&&fB(Ln)===Et.type){S(ge,Et.sibling),(Le=O(Et,Xe.props)).ref=zg(ge,Et,Xe),Le.return=ge,ge=Le;break e}S(ge,Et);break}v(ge,Et),Et=Et.sibling}Xe.type===c?((Le=Zd(Xe.props.children,ge.mode,Mt,Xe.key)).return=ge,ge=Le):((Mt=W_(Xe.type,Xe.key,Xe.props,null,ge.mode,Mt)).ref=zg(ge,Le,Xe),Mt.return=ge,ge=Mt)}return te(ge);case l:e:{for(Et=Xe.key;Le!==null;){if(Le.key===Et){if(Le.tag===4&&Le.stateNode.containerInfo===Xe.containerInfo&&Le.stateNode.implementation===Xe.implementation){S(ge,Le.sibling),(Le=O(Le,Xe.children||[])).return=ge,ge=Le;break e}S(ge,Le);break}v(ge,Le),Le=Le.sibling}(Le=IA(Xe,ge.mode,Mt)).return=ge,ge=Le}return te(ge);case x:return Ge(ge,Le,(Et=Xe._init)(Xe._payload),Mt)}if(z(Xe))return xt(ge,Le,Xe,Mt);if(w(Xe))return sn(ge,Le,Xe,Mt);b_(ge,Xe)}return typeof Xe=="string"&&Xe!==""||typeof Xe=="number"?(Xe=""+Xe,Le!==null&&Le.tag===6?(S(ge,Le.sibling),(Le=O(Le,Xe)).return=ge,ge=Le):(S(ge,Le),(Le=PA(Xe,ge.mode,Mt)).return=ge,ge=Le),te(ge)):S(ge,Le)}}var Wf=pB(!0),mB=pB(!1),$g={},$o=vi($g),jg=vi($g),Xf=vi($g);function al(g){if(g===$g)throw Error(s(174));return g}function HC(g,v){Dn(Xf,v),Dn(jg,g),Dn($o,$g),g=G(v),Vn($o),Dn($o,g)}function Yf(){Vn($o),Vn(jg),Vn(Xf)}function gB(g){var v=al(Xf.current),S=al($o.current);S!==(v=j(S,g.type,v))&&(Dn(jg,g),Dn($o,v))}function VC(g){jg.current===g&&(Vn($o),Vn(jg))}var Ar=vi(0);function x_(g){for(var v=g;v!==null;){if(v.tag===13){var S=v.memoizedState;if(S!==null&&((S=S.dehydrated)===null||Sn(S)||Nt(S)))return v}else if(v.tag===19&&v.memoizedProps.revealOrder!==void 0){if(128&v.flags)return v}else if(v.child!==null){v.child.return=v,v=v.child;continue}if(v===g)break;for(;v.sibling===null;){if(v.return===null||v.return===g)return null;v=v.return}v.sibling.return=v.return,v=v.sibling}return null}var WC=[];function XC(){for(var g=0;g<WC.length;g++){var v=WC[g];Ce?v._workInProgressVersionPrimary=null:v._workInProgressVersionSecondary=null}WC.length=0}var E_=o.ReactCurrentDispatcher,YC=o.ReactCurrentBatchConfig,Xd=0,xr=null,_i=null,bi=null,w_=!1,Gg=!1,Hg=0,see=0;function Qi(){throw Error(s(321))}function KC(g,v){if(v===null)return!1;for(var S=0;S<v.length&&S<g.length;S++)if(!ba(g[S],v[S]))return!1;return!0}function qC(g,v,S,L,O,$){if(Xd=$,xr=v,v.memoizedState=null,v.updateQueue=null,v.lanes=0,E_.current=g===null||g.memoizedState===null?cee:uee,g=S(L,O),Gg){$=0;do{if(Gg=!1,Hg=0,25<=$)throw Error(s(301));$+=1,bi=_i=null,v.updateQueue=null,E_.current=dee,g=S(L,O)}while(Gg)}if(E_.current=C_,v=_i!==null&&_i.next!==null,Xd=0,bi=_i=xr=null,w_=!1,v)throw Error(s(300));return g}function ZC(){var g=Hg!==0;return Hg=0,g}function ll(){var g={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return bi===null?xr.memoizedState=bi=g:bi=bi.next=g,bi}function jo(){if(_i===null){var g=xr.alternate;g=g!==null?g.memoizedState:null}else g=_i.next;var v=bi===null?xr.memoizedState:bi.next;if(v!==null)bi=v,_i=g;else{if(g===null)throw Error(s(310));g={memoizedState:(_i=g).memoizedState,baseState:_i.baseState,baseQueue:_i.baseQueue,queue:_i.queue,next:null},bi===null?xr.memoizedState=bi=g:bi=bi.next=g}return bi}function Vg(g,v){return typeof v=="function"?v(g):v}function QC(g){var v=jo(),S=v.queue;if(S===null)throw Error(s(311));S.lastRenderedReducer=g;var L=_i,O=L.baseQueue,$=S.pending;if($!==null){if(O!==null){var te=O.next;O.next=$.next,$.next=te}L.baseQueue=O=$,S.pending=null}if(O!==null){$=O.next,L=L.baseState;var ce=te=null,Ee=null,Ne=$;do{var je=Ne.lane;if((Xd&je)===je)Ee!==null&&(Ee=Ee.next={lane:0,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null}),L=Ne.hasEagerState?Ne.eagerState:g(L,Ne.action);else{var nt={lane:je,action:Ne.action,hasEagerState:Ne.hasEagerState,eagerState:Ne.eagerState,next:null};Ee===null?(ce=Ee=nt,te=L):Ee=Ee.next=nt,xr.lanes|=je,Yd|=je}Ne=Ne.next}while(Ne!==null&&Ne!==$);Ee===null?te=L:Ee.next=ce,ba(L,v.memoizedState)||(Ds=!0),v.memoizedState=L,v.baseState=te,v.baseQueue=Ee,S.lastRenderedState=L}if((g=S.interleaved)!==null){O=g;do $=O.lane,xr.lanes|=$,Yd|=$,O=O.next;while(O!==g)}else O===null&&(S.lanes=0);return[v.memoizedState,S.dispatch]}function JC(g){var v=jo(),S=v.queue;if(S===null)throw Error(s(311));S.lastRenderedReducer=g;var L=S.dispatch,O=S.pending,$=v.memoizedState;if(O!==null){S.pending=null;var te=O=O.next;do $=g($,te.action),te=te.next;while(te!==O);ba($,v.memoizedState)||(Ds=!0),v.memoizedState=$,v.baseQueue===null&&(v.baseState=$),S.lastRenderedState=$}return[$,L]}function vB(){}function yB(g,v){var S=xr,L=jo(),O=v(),$=!ba(L.memoizedState,O);if($&&(L.memoizedState=O,Ds=!0),L=L.queue,eA(xB.bind(null,S,L,g),[g]),L.getSnapshot!==v||$||bi!==null&&1&bi.memoizedState.tag){if(S.flags|=2048,Wg(9,bB.bind(null,S,L,O,v),void 0,null),xi===null)throw Error(s(349));30&Xd||_B(S,v,O)}return O}function _B(g,v,S){g.flags|=16384,g={getSnapshot:v,value:S},(v=xr.updateQueue)===null?(v={lastEffect:null,stores:null},xr.updateQueue=v,v.stores=[g]):(S=v.stores)===null?v.stores=[g]:S.push(g)}function bB(g,v,S,L){v.value=S,v.getSnapshot=L,EB(v)&&wB(g)}function xB(g,v,S){return S(function(){EB(v)&&wB(g)})}function EB(g){var v=g.getSnapshot;g=g.value;try{var S=v();return!ba(g,S)}catch{return!0}}function wB(g){var v=ol(g,1);v!==null&&Go(v,g,1,-1)}function TB(g){var v=ll();return typeof g=="function"&&(g=g()),v.memoizedState=v.baseState=g,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Vg,lastRenderedState:g},v.queue=g,g=g.dispatch=lee.bind(null,xr,g),[v.memoizedState,g]}function Wg(g,v,S,L){return g={tag:g,create:v,destroy:S,deps:L,next:null},(v=xr.updateQueue)===null?(v={lastEffect:null,stores:null},xr.updateQueue=v,v.lastEffect=g.next=g):(S=v.lastEffect)===null?v.lastEffect=g.next=g:(L=S.next,S.next=g,g.next=L,v.lastEffect=g),g}function SB(){return jo().memoizedState}function T_(g,v,S,L){var O=ll();xr.flags|=g,O.memoizedState=Wg(1|v,S,void 0,L===void 0?null:L)}function S_(g,v,S,L){var O=jo();L=L===void 0?null:L;var $=void 0;if(_i!==null){var te=_i.memoizedState;if($=te.destroy,L!==null&&KC(L,te.deps))return void(O.memoizedState=Wg(v,S,$,L))}xr.flags|=g,O.memoizedState=Wg(1|v,S,$,L)}function CB(g,v){return T_(8390656,8,g,v)}function eA(g,v){return S_(2048,8,g,v)}function AB(g,v){return S_(4,2,g,v)}function RB(g,v){return S_(4,4,g,v)}function PB(g,v){return typeof v=="function"?(g=g(),v(g),function(){v(null)}):v!=null?(g=g(),v.current=g,function(){v.current=null}):void 0}function IB(g,v,S){return S=S!=null?S.concat([g]):null,S_(4,4,PB.bind(null,v,g),S)}function tA(){}function MB(g,v){var S=jo();v=v===void 0?null:v;var L=S.memoizedState;return L!==null&&v!==null&&KC(v,L[1])?L[0]:(S.memoizedState=[g,v],g)}function LB(g,v){var S=jo();v=v===void 0?null:v;var L=S.memoizedState;return L!==null&&v!==null&&KC(v,L[1])?L[0]:(g=g(),S.memoizedState=[g,v],g)}function OB(g,v,S){return 21&Xd?(ba(S,v)||(S=ut(),xr.lanes|=S,Yd|=S,g.baseState=!0),v):(g.baseState&&(g.baseState=!1,Ds=!0),g.memoizedState=S)}function oee(g,v){var S=Gt;Gt=S!==0&&4>S?S:4,g(!0);var L=YC.transition;YC.transition={};try{g(!1),v()}finally{Gt=S,YC.transition=L}}function kB(){return jo().memoizedState}function aee(g,v,S){var L=au(g);S={lane:L,action:S,hasEagerState:!1,eagerState:null,next:null},NB(g)?DB(v,S):(S=sB(g,v,S,L))!==null&&(Go(S,g,L,es()),BB(S,v,L))}function lee(g,v,S){var L=au(g),O={lane:L,action:S,hasEagerState:!1,eagerState:null,next:null};if(NB(g))DB(v,O);else{var $=g.alternate;if(g.lanes===0&&($===null||$.lanes===0)&&($=v.lastRenderedReducer)!==null)try{var te=v.lastRenderedState,ce=$(te,S);if(O.hasEagerState=!0,O.eagerState=ce,ba(ce,te)){var Ee=v.interleaved;return Ee===null?(O.next=O,zC(v)):(O.next=Ee.next,Ee.next=O),void(v.interleaved=O)}}catch{}(S=sB(g,v,O,L))!==null&&(Go(S,g,L,O=es()),BB(S,v,L))}}function NB(g){var v=g.alternate;return g===xr||v!==null&&v===xr}function DB(g,v){Gg=w_=!0;var S=g.pending;S===null?v.next=v:(v.next=S.next,S.next=v),g.pending=v}function BB(g,v,S){if(4194240&S){var L=v.lanes;S|=L&=g.pendingLanes,v.lanes=S,Ur(g,S)}}var C_={readContext:zo,useCallback:Qi,useContext:Qi,useEffect:Qi,useImperativeHandle:Qi,useInsertionEffect:Qi,useLayoutEffect:Qi,useMemo:Qi,useReducer:Qi,useRef:Qi,useState:Qi,useDebugValue:Qi,useDeferredValue:Qi,useTransition:Qi,useMutableSource:Qi,useSyncExternalStore:Qi,useId:Qi,unstable_isNewReconciler:!1},cee={readContext:zo,useCallback:function(g,v){return ll().memoizedState=[g,v===void 0?null:v],g},useContext:zo,useEffect:CB,useImperativeHandle:function(g,v,S){return S=S!=null?S.concat([g]):null,T_(4194308,4,PB.bind(null,v,g),S)},useLayoutEffect:function(g,v){return T_(4194308,4,g,v)},useInsertionEffect:function(g,v){return T_(4,2,g,v)},useMemo:function(g,v){var S=ll();return v=v===void 0?null:v,g=g(),S.memoizedState=[g,v],g},useReducer:function(g,v,S){var L=ll();return v=S!==void 0?S(v):v,L.memoizedState=L.baseState=v,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:g,lastRenderedState:v},L.queue=g,g=g.dispatch=aee.bind(null,xr,g),[L.memoizedState,g]},useRef:function(g){return g={current:g},ll().memoizedState=g},useState:TB,useDebugValue:tA,useDeferredValue:function(g){return ll().memoizedState=g},useTransition:function(){var g=TB(!1),v=g[0];return g=oee.bind(null,g[1]),ll().memoizedState=g,[v,g]},useMutableSource:function(){},useSyncExternalStore:function(g,v,S){var L=xr,O=ll();if(hr){if(S===void 0)throw Error(s(407));S=S()}else{if(S=v(),xi===null)throw Error(s(349));30&Xd||_B(L,v,S)}O.memoizedState=S;var $={value:S,getSnapshot:v};return O.queue=$,CB(xB.bind(null,L,$,g),[g]),L.flags|=2048,Wg(9,bB.bind(null,L,$,S,v),void 0,null),S},useId:function(){var g=ll(),v=xi.identifierPrefix;if(hr){var S=ic;v=":"+v+"R"+(S=(sl&~(1<<32-ys(sl)-1)).toString(32)+S),0<(S=Hg++)&&(v+="H"+S.toString(32)),v+=":"}else v=":"+v+"r"+(S=see++).toString(32)+":";return g.memoizedState=v},unstable_isNewReconciler:!1},uee={readContext:zo,useCallback:MB,useContext:zo,useEffect:eA,useImperativeHandle:IB,useInsertionEffect:AB,useLayoutEffect:RB,useMemo:LB,useReducer:QC,useRef:SB,useState:function(){return QC(Vg)},useDebugValue:tA,useDeferredValue:function(g){return OB(jo(),_i.memoizedState,g)},useTransition:function(){return[QC(Vg)[0],jo().memoizedState]},useMutableSource:vB,useSyncExternalStore:yB,useId:kB,unstable_isNewReconciler:!1},dee={readContext:zo,useCallback:MB,useContext:zo,useEffect:eA,useImperativeHandle:IB,useInsertionEffect:AB,useLayoutEffect:RB,useMemo:LB,useReducer:JC,useRef:SB,useState:function(){return JC(Vg)},useDebugValue:tA,useDeferredValue:function(g){var v=jo();return _i===null?v.memoizedState=g:OB(v,_i.memoizedState,g)},useTransition:function(){return[JC(Vg)[0],jo().memoizedState]},useMutableSource:vB,useSyncExternalStore:yB,useId:kB,unstable_isNewReconciler:!1};function Kf(g,v){try{var S="",L=v;do S+=iee(L),L=L.return;while(L);var O=S}catch($){O=`
Error generating stack: `+$.message+`
`+$.stack}return{value:g,source:v,stack:O,digest:null}}function nA(g,v,S){return{value:g,source:null,stack:S??null,digest:v??null}}function rA(g,v){try{console.error(v.value)}catch(S){setTimeout(function(){throw S})}}var hee=typeof WeakMap=="function"?WeakMap:Map;function FB(g,v,S){(S=sc(-1,S)).tag=3,S.payload={element:null};var L=v.value;return S.callback=function(){z_||(z_=!0,EA=L),rA(0,v)},S}function UB(g,v,S){(S=sc(-1,S)).tag=3;var L=g.type.getDerivedStateFromError;if(typeof L=="function"){var O=v.value;S.payload=function(){return L(O)},S.callback=function(){rA(0,v)}}var $=g.stateNode;return $!==null&&typeof $.componentDidCatch=="function"&&(S.callback=function(){rA(0,v),typeof L!="function"&&(su===null?su=new Set([this]):su.add(this));var te=v.stack;this.componentDidCatch(v.value,{componentStack:te!==null?te:""})}),S}function zB(g,v,S){var L=g.pingCache;if(L===null){L=g.pingCache=new hee;var O=new Set;L.set(v,O)}else(O=L.get(v))===void 0&&(O=new Set,L.set(v,O));O.has(S)||(O.add(S),g=xee.bind(null,g,v,S),v.then(g,g))}function $B(g){do{var v;if((v=g.tag===13)&&(v=(v=g.memoizedState)===null||v.dehydrated!==null),v)return g;g=g.return}while(g!==null);return null}function jB(g,v,S,L,O){return 1&g.mode?(g.flags|=65536,g.lanes=O,g):(g===v?g.flags|=65536:(g.flags|=128,S.flags|=131072,S.flags&=-52805,S.tag===1&&(S.alternate===null?S.tag=17:((v=sc(-1,1)).tag=2,ru(S,v,1))),S.lanes|=1),g)}var fee=o.ReactCurrentOwner,Ds=!1;function Bs(g,v,S,L){v.child=g===null?mB(v,null,S,L):Wf(v,g.child,S,L)}function GB(g,v,S,L,O){S=S.render;var $=v.ref;return Vf(v,O),L=qC(g,v,S,L,$,O),S=ZC(),g===null||Ds?(hr&&S&&MC(v),v.flags|=1,Bs(g,v,L,O),v.child):(v.updateQueue=g.updateQueue,v.flags&=-2053,g.lanes&=~O,oc(g,v,O))}function HB(g,v,S,L,O){if(g===null){var $=S.type;return typeof $!="function"||RA($)||$.defaultProps!==void 0||S.compare!==null||S.defaultProps!==void 0?((g=W_(S.type,null,L,v,v.mode,O)).ref=v.ref,g.return=v,v.child=g):(v.tag=15,v.type=$,VB(g,v,$,L,O))}if($=g.child,(g.lanes&O)==0){var te=$.memoizedProps;if((S=(S=S.compare)!==null?S:p_)(te,L)&&g.ref===v.ref)return oc(g,v,O)}return v.flags|=1,(g=cu($,L)).ref=v.ref,g.return=v,v.child=g}function VB(g,v,S,L,O){if(g!==null){var $=g.memoizedProps;if(p_($,L)&&g.ref===v.ref){if(Ds=!1,v.pendingProps=L=$,(g.lanes&O)==0)return v.lanes=g.lanes,oc(g,v,O);131072&g.flags&&(Ds=!0)}}return iA(g,v,S,L,O)}function WB(g,v,S){var L=v.pendingProps,O=L.children,$=g!==null?g.memoizedState:null;if(L.mode==="hidden")if(!(1&v.mode))v.memoizedState={baseLanes:0,cachePool:null,transitions:null},Dn(Zf,no),no|=S;else{if(!(1073741824&S))return g=$!==null?$.baseLanes|S:S,v.lanes=v.childLanes=1073741824,v.memoizedState={baseLanes:g,cachePool:null,transitions:null},v.updateQueue=null,Dn(Zf,no),no|=g,null;v.memoizedState={baseLanes:0,cachePool:null,transitions:null},L=$!==null?$.baseLanes:S,Dn(Zf,no),no|=L}else $!==null?(L=$.baseLanes|S,v.memoizedState=null):L=S,Dn(Zf,no),no|=L;return Bs(g,v,O,S),v.child}function XB(g,v){var S=v.ref;(g===null&&S!==null||g!==null&&g.ref!==S)&&(v.flags|=512,v.flags|=2097152)}function iA(g,v,S,L,O){var $=Ni(S)?_a:jn.current;return $=nl(v,$),Vf(v,O),S=qC(g,v,S,L,$,O),L=ZC(),g===null||Ds?(hr&&L&&MC(v),v.flags|=1,Bs(g,v,S,O),v.child):(v.updateQueue=g.updateQueue,v.flags&=-2053,g.lanes&=~O,oc(g,v,O))}function YB(g,v,S,L,O){if(Ni(S)){var $=!0;zf(v)}else $=!1;if(Vf(v,O),v.stateNode===null)I_(g,v),dB(v,S,L),GC(v,S,L,O),L=!0;else if(g===null){var te=v.stateNode,ce=v.memoizedProps;te.props=ce;var Ee=te.context,Ne=S.contextType;typeof Ne=="object"&&Ne!==null?Ne=zo(Ne):Ne=nl(v,Ne=Ni(S)?_a:jn.current);var je=S.getDerivedStateFromProps,nt=typeof je=="function"||typeof te.getSnapshotBeforeUpdate=="function";nt||typeof te.UNSAFE_componentWillReceiveProps!="function"&&typeof te.componentWillReceiveProps!="function"||(ce!==L||Ee!==Ne)&&hB(v,te,L,Ne),nu=!1;var ze=v.memoizedState;te.state=ze,y_(v,L,te,O),Ee=v.memoizedState,ce!==L||ze!==Ee||ri.current||nu?(typeof je=="function"&&(jC(v,S,je,L),Ee=v.memoizedState),(ce=nu||uB(v,S,ce,L,ze,Ee,Ne))?(nt||typeof te.UNSAFE_componentWillMount!="function"&&typeof te.componentWillMount!="function"||(typeof te.componentWillMount=="function"&&te.componentWillMount(),typeof te.UNSAFE_componentWillMount=="function"&&te.UNSAFE_componentWillMount()),typeof te.componentDidMount=="function"&&(v.flags|=4194308)):(typeof te.componentDidMount=="function"&&(v.flags|=4194308),v.memoizedProps=L,v.memoizedState=Ee),te.props=L,te.state=Ee,te.context=Ne,L=ce):(typeof te.componentDidMount=="function"&&(v.flags|=4194308),L=!1)}else{te=v.stateNode,oB(g,v),ce=v.memoizedProps,Ne=v.type===v.elementType?ce:Ea(v.type,ce),te.props=Ne,nt=v.pendingProps,ze=te.context,typeof(Ee=S.contextType)=="object"&&Ee!==null?Ee=zo(Ee):Ee=nl(v,Ee=Ni(S)?_a:jn.current);var Qe=S.getDerivedStateFromProps;(je=typeof Qe=="function"||typeof te.getSnapshotBeforeUpdate=="function")||typeof te.UNSAFE_componentWillReceiveProps!="function"&&typeof te.componentWillReceiveProps!="function"||(ce!==nt||ze!==Ee)&&hB(v,te,L,Ee),nu=!1,ze=v.memoizedState,te.state=ze,y_(v,L,te,O);var xt=v.memoizedState;ce!==nt||ze!==xt||ri.current||nu?(typeof Qe=="function"&&(jC(v,S,Qe,L),xt=v.memoizedState),(Ne=nu||uB(v,S,Ne,L,ze,xt,Ee)||!1)?(je||typeof te.UNSAFE_componentWillUpdate!="function"&&typeof te.componentWillUpdate!="function"||(typeof te.componentWillUpdate=="function"&&te.componentWillUpdate(L,xt,Ee),typeof te.UNSAFE_componentWillUpdate=="function"&&te.UNSAFE_componentWillUpdate(L,xt,Ee)),typeof te.componentDidUpdate=="function"&&(v.flags|=4),typeof te.getSnapshotBeforeUpdate=="function"&&(v.flags|=1024)):(typeof te.componentDidUpdate!="function"||ce===g.memoizedProps&&ze===g.memoizedState||(v.flags|=4),typeof te.getSnapshotBeforeUpdate!="function"||ce===g.memoizedProps&&ze===g.memoizedState||(v.flags|=1024),v.memoizedProps=L,v.memoizedState=xt),te.props=L,te.state=xt,te.context=Ee,L=Ne):(typeof te.componentDidUpdate!="function"||ce===g.memoizedProps&&ze===g.memoizedState||(v.flags|=4),typeof te.getSnapshotBeforeUpdate!="function"||ce===g.memoizedProps&&ze===g.memoizedState||(v.flags|=1024),L=!1)}return sA(g,v,S,L,$,O)}function sA(g,v,S,L,O,$){XB(g,v);var te=(128&v.flags)!=0;if(!L&&!te)return O&&Bg(v,S,!1),oc(g,v,$);L=v.stateNode,fee.current=v;var ce=te&&typeof S.getDerivedStateFromError!="function"?null:L.render();return v.flags|=1,g!==null&&te?(v.child=Wf(v,g.child,null,$),v.child=Wf(v,null,ce,$)):Bs(g,v,ce,$),v.memoizedState=L.state,O&&Bg(v,S,!0),v.child}function KB(g){var v=g.stateNode;v.pendingContext?Gd(0,v.pendingContext,v.pendingContext!==v.context):v.context&&Gd(0,v.context,!1),HC(g,v.containerInfo)}function qB(g,v,S,L,O){return Gf(),NC(O),v.flags|=256,Bs(g,v,S,L),v.child}var Xg,Yg,A_,R_,oA={dehydrated:null,treeContext:null,retryLane:0};function aA(g){return{baseLanes:g,cachePool:null,transitions:null}}function ZB(g,v,S){var L,O=v.pendingProps,$=Ar.current,te=!1,ce=(128&v.flags)!=0;if((L=ce)||(L=(g===null||g.memoizedState!==null)&&(2&$)!=0),L?(te=!0,v.flags&=-129):g!==null&&g.memoizedState===null||($|=1),Dn(Ar,1&$),g===null)return kC(v),(g=v.memoizedState)!==null&&(g=g.dehydrated)!==null?(1&v.mode?Nt(g)?v.lanes=8:v.lanes=1073741824:v.lanes=1,null):(ce=O.children,g=O.fallback,te?(O=v.mode,te=v.child,ce={mode:"hidden",children:ce},!(1&O)&&te!==null?(te.childLanes=0,te.pendingProps=ce):te=X_(ce,O,0,null),g=Zd(g,O,S,null),te.return=v,g.return=v,te.sibling=g,v.child=te,v.child.memoizedState=aA(S),v.memoizedState=oA,g):lA(v,ce));if(($=g.memoizedState)!==null&&(L=$.dehydrated)!==null)return function(Ne,je,nt,ze,Qe,xt,sn){if(nt)return 256&je.flags?(je.flags&=-257,P_(Ne,je,sn,ze=nA(Error(s(422))))):je.memoizedState!==null?(je.child=Ne.child,je.flags|=128,null):(xt=ze.fallback,Qe=je.mode,ze=X_({mode:"visible",children:ze.children},Qe,0,null),(xt=Zd(xt,Qe,sn,null)).flags|=2,ze.return=je,xt.return=je,ze.sibling=xt,je.child=ze,1&je.mode&&Wf(je,Ne.child,null,sn),je.child.memoizedState=aA(sn),je.memoizedState=oA,xt);if(!(1&je.mode))return P_(Ne,je,sn,null);if(Nt(Qe))return ze=Kt(Qe).digest,xt=Error(s(419)),ze=nA(xt,ze,void 0),P_(Ne,je,sn,ze);if(nt=(sn&Ne.childLanes)!=0,Ds||nt){if((ze=xi)!==null){switch(sn&-sn){case 4:Qe=2;break;case 16:Qe=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Qe=32;break;case 536870912:Qe=268435456;break;default:Qe=0}(Qe=Qe&(ze.suspendedLanes|sn)?0:Qe)!==0&&Qe!==xt.retryLane&&(xt.retryLane=Qe,ol(Ne,Qe),Go(ze,Ne,Qe,-1))}return AA(),P_(Ne,je,sn,ze=nA(Error(s(421))))}return Sn(Qe)?(je.flags|=128,je.child=Ne.child,je=Eee.bind(null,Ne),Nn(Qe,je),null):(Ne=xt.treeContext,Re&&(Uo=gs(Qe),to=je,hr=!0,xa=null,Ug=!1,Ne!==null&&(Bo[Fo++]=sl,Bo[Fo++]=ic,Bo[Fo++]=Hd,sl=Ne.id,ic=Ne.overflow,Hd=je)),je=lA(je,ze.children),je.flags|=4096,je)}(g,v,ce,O,L,$,S);if(te){te=O.fallback,ce=v.mode,L=($=g.child).sibling;var Ee={mode:"hidden",children:O.children};return!(1&ce)&&v.child!==$?((O=v.child).childLanes=0,O.pendingProps=Ee,v.deletions=null):(O=cu($,Ee)).subtreeFlags=14680064&$.subtreeFlags,L!==null?te=cu(L,te):(te=Zd(te,ce,S,null)).flags|=2,te.return=v,O.return=v,O.sibling=te,v.child=O,O=te,te=v.child,ce=(ce=g.child.memoizedState)===null?aA(S):{baseLanes:ce.baseLanes|S,cachePool:null,transitions:ce.transitions},te.memoizedState=ce,te.childLanes=g.childLanes&~S,v.memoizedState=oA,O}return g=(te=g.child).sibling,O=cu(te,{mode:"visible",children:O.children}),!(1&v.mode)&&(O.lanes=S),O.return=v,O.sibling=null,g!==null&&((S=v.deletions)===null?(v.deletions=[g],v.flags|=16):S.push(g)),v.child=O,v.memoizedState=null,O}function lA(g,v){return(v=X_({mode:"visible",children:v},g.mode,0,null)).return=g,g.child=v}function P_(g,v,S,L){return L!==null&&NC(L),Wf(v,g.child,null,S),(g=lA(v,v.pendingProps.children)).flags|=2,v.memoizedState=null,g}function QB(g,v,S){g.lanes|=v;var L=g.alternate;L!==null&&(L.lanes|=v),UC(g.return,v,S)}function cA(g,v,S,L,O){var $=g.memoizedState;$===null?g.memoizedState={isBackwards:v,rendering:null,renderingStartTime:0,last:L,tail:S,tailMode:O}:($.isBackwards=v,$.rendering=null,$.renderingStartTime=0,$.last=L,$.tail=S,$.tailMode=O)}function JB(g,v,S){var L=v.pendingProps,O=L.revealOrder,$=L.tail;if(Bs(g,v,L.children,S),(2&(L=Ar.current))!=0)L=1&L|2,v.flags|=128;else{if(g!==null&&128&g.flags)e:for(g=v.child;g!==null;){if(g.tag===13)g.memoizedState!==null&&QB(g,S,v);else if(g.tag===19)QB(g,S,v);else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===v)break e;for(;g.sibling===null;){if(g.return===null||g.return===v)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}L&=1}if(Dn(Ar,L),(1&v.mode)==0)v.memoizedState=null;else switch(O){case"forwards":for(S=v.child,O=null;S!==null;)(g=S.alternate)!==null&&x_(g)===null&&(O=S),S=S.sibling;(S=O)===null?(O=v.child,v.child=null):(O=S.sibling,S.sibling=null),cA(v,!1,O,S,$);break;case"backwards":for(S=null,O=v.child,v.child=null;O!==null;){if((g=O.alternate)!==null&&x_(g)===null){v.child=O;break}g=O.sibling,O.sibling=S,S=O,O=g}cA(v,!0,S,null,$);break;case"together":cA(v,!1,null,null,void 0);break;default:v.memoizedState=null}return v.child}function I_(g,v){!(1&v.mode)&&g!==null&&(g.alternate=null,v.alternate=null,v.flags|=2)}function oc(g,v,S){if(g!==null&&(v.dependencies=g.dependencies),Yd|=v.lanes,(S&v.childLanes)==0)return null;if(g!==null&&v.child!==g.child)throw Error(s(153));if(v.child!==null){for(S=cu(g=v.child,g.pendingProps),v.child=S,S.return=v;g.sibling!==null;)g=g.sibling,(S=S.sibling=cu(g,g.pendingProps)).return=v;S.sibling=null}return v.child}function cl(g){g.flags|=4}function eF(g,v){if(g!==null&&g.child===v.child)return!0;if(16&v.flags)return!1;for(g=v.child;g!==null;){if(12854&g.flags||12854&g.subtreeFlags)return!1;g=g.sibling}return!0}if(pe)Xg=function(g,v){for(var S=v.child;S!==null;){if(S.tag===5||S.tag===6)ee(g,S.stateNode);else if(S.tag!==4&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===v)break;for(;S.sibling===null;){if(S.return===null||S.return===v)return;S=S.return}S.sibling.return=S.return,S=S.sibling}},Yg=function(){},A_=function(g,v,S,L,O){if((g=g.memoizedProps)!==L){var $=v.stateNode,te=al($o.current);S=se($,S,g,L,O,te),(v.updateQueue=S)&&cl(v)}},R_=function(g,v,S,L){S!==L&&cl(v)};else if(ke){Xg=function(g,v,S,L){for(var O=v.child;O!==null;){if(O.tag===5){var $=O.stateNode;S&&L&&($=jt($,O.type,O.memoizedProps,O)),ee(g,$)}else if(O.tag===6)$=O.stateNode,S&&L&&($=Pt($,O.memoizedProps,O)),ee(g,$);else if(O.tag!==4){if(O.tag===22&&O.memoizedState!==null)($=O.child)!==null&&($.return=O),Xg(g,O,!0,!0);else if(O.child!==null){O.child.return=O,O=O.child;continue}}if(O===v)break;for(;O.sibling===null;){if(O.return===null||O.return===v)return;O=O.return}O.sibling.return=O.return,O=O.sibling}};var tF=function(g,v,S,L){for(var O=v.child;O!==null;){if(O.tag===5){var $=O.stateNode;S&&L&&($=jt($,O.type,O.memoizedProps,O)),Me(g,$)}else if(O.tag===6)$=O.stateNode,S&&L&&($=Pt($,O.memoizedProps,O)),Me(g,$);else if(O.tag!==4){if(O.tag===22&&O.memoizedState!==null)($=O.child)!==null&&($.return=O),tF(g,O,!0,!0);else if(O.child!==null){O.child.return=O,O=O.child;continue}}if(O===v)break;for(;O.sibling===null;){if(O.return===null||O.return===v)return;O=O.return}O.sibling.return=O.return,O=O.sibling}};Yg=function(g,v){var S=v.stateNode;if(!eF(g,v)){g=S.containerInfo;var L=_e(g);tF(L,v,!1,!1),S.pendingChildren=L,cl(v),et(g,L)}},A_=function(g,v,S,L,O){var $=g.stateNode,te=g.memoizedProps;if((g=eF(g,v))&&te===L)v.stateNode=$;else{var ce=v.stateNode,Ee=al($o.current),Ne=null;te!==L&&(Ne=se(ce,S,te,L,O,Ee)),g&&Ne===null?v.stateNode=$:($=le($,Ne,S,te,L,v,g,ce),ye($,S,L,O,Ee)&&cl(v),v.stateNode=$,g?cl(v):Xg($,v,!1,!1))}},R_=function(g,v,S,L){S!==L?(g=al(Xf.current),S=al($o.current),v.stateNode=ve(L,g,S,v),cl(v)):v.stateNode=g.stateNode}}else Yg=function(){},A_=function(){},R_=function(){};function Kg(g,v){if(!hr)switch(g.tailMode){case"hidden":v=g.tail;for(var S=null;v!==null;)v.alternate!==null&&(S=v),v=v.sibling;S===null?g.tail=null:S.sibling=null;break;case"collapsed":S=g.tail;for(var L=null;S!==null;)S.alternate!==null&&(L=S),S=S.sibling;L===null?v||g.tail===null?g.tail=null:g.tail.sibling=null:L.sibling=null}}function _s(g){var v=g.alternate!==null&&g.alternate.child===g.child,S=0,L=0;if(v)for(var O=g.child;O!==null;)S|=O.lanes|O.childLanes,L|=14680064&O.subtreeFlags,L|=14680064&O.flags,O.return=g,O=O.sibling;else for(O=g.child;O!==null;)S|=O.lanes|O.childLanes,L|=O.subtreeFlags,L|=O.flags,O.return=g,O=O.sibling;return g.subtreeFlags|=L,g.childLanes=S,v}function pee(g,v,S){var L=v.pendingProps;switch(LC(v),v.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _s(v),null;case 1:case 17:return Ni(v.type)&&jd(),_s(v),null;case 3:return S=v.stateNode,Yf(),Vn(ri),Vn(jn),XC(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),g!==null&&g.child!==null||(f_(v)?cl(v):g===null||g.memoizedState.isDehydrated&&!(256&v.flags)||(v.flags|=1024,xa!==null&&(SA(xa),xa=null))),Yg(g,v),_s(v),null;case 5:VC(v),S=al(Xf.current);var O=v.type;if(g!==null&&v.stateNode!=null)A_(g,v,O,L,S),g.ref!==v.ref&&(v.flags|=512,v.flags|=2097152);else{if(!L){if(v.stateNode===null)throw Error(s(166));return _s(v),null}if(g=al($o.current),f_(v)){if(!Re)throw Error(s(175));g=Zi(v.stateNode,v.type,v.memoizedProps,S,g,v,!Ug),v.updateQueue=g,g!==null&&cl(v)}else{var $=V(O,L,S,g,v);Xg($,v,!1,!1),v.stateNode=$,ye($,O,L,S,g)&&cl(v)}v.ref!==null&&(v.flags|=512,v.flags|=2097152)}return _s(v),null;case 6:if(g&&v.stateNode!=null)R_(g,v,g.memoizedProps,L);else{if(typeof L!="string"&&v.stateNode===null)throw Error(s(166));if(g=al(Xf.current),S=al($o.current),f_(v)){if(!Re)throw Error(s(176));if(g=v.stateNode,S=v.memoizedProps,(L=un(g,S,v,!Ug))&&(O=to)!==null)switch(O.tag){case 3:$n(O.stateNode.containerInfo,g,S,(1&O.mode)!=0);break;case 5:Oi(O.type,O.memoizedProps,O.stateNode,g,S,(1&O.mode)!=0)}L&&cl(v)}else v.stateNode=ve(L,g,S,v)}return _s(v),null;case 13:if(Vn(Ar),L=v.memoizedState,g===null||g.memoizedState!==null&&g.memoizedState.dehydrated!==null){if(hr&&Uo!==null&&1&v.mode&&!(128&v.flags))rB(),Gf(),v.flags|=98560,O=!1;else if(O=f_(v),L!==null&&L.dehydrated!==null){if(g===null){if(!O)throw Error(s(318));if(!Re)throw Error(s(344));if(!(O=(O=v.memoizedState)!==null?O.dehydrated:null))throw Error(s(317));yn(O,v)}else Gf(),!(128&v.flags)&&(v.memoizedState=null),v.flags|=4;_s(v),O=!1}else xa!==null&&(SA(xa),xa=null),O=!0;if(!O)return 65536&v.flags?v:null}return 128&v.flags?(v.lanes=S,v):((S=L!==null)!=(g!==null&&g.memoizedState!==null)&&S&&(v.child.flags|=8192,1&v.mode&&(g===null||1&Ar.current?ii===0&&(ii=3):AA())),v.updateQueue!==null&&(v.flags|=4),_s(v),null);case 4:return Yf(),Yg(g,v),g===null&&oe(v.stateNode.containerInfo),_s(v),null;case 10:return FC(v.type._context),_s(v),null;case 19:if(Vn(Ar),(O=v.memoizedState)===null)return _s(v),null;if(L=(128&v.flags)!=0,($=O.rendering)===null)if(L)Kg(O,!1);else{if(ii!==0||g!==null&&128&g.flags)for(g=v.child;g!==null;){if(($=x_(g))!==null){for(v.flags|=128,Kg(O,!1),(g=$.updateQueue)!==null&&(v.updateQueue=g,v.flags|=4),v.subtreeFlags=0,g=S,S=v.child;S!==null;)O=g,(L=S).flags&=14680066,($=L.alternate)===null?(L.childLanes=0,L.lanes=O,L.child=null,L.subtreeFlags=0,L.memoizedProps=null,L.memoizedState=null,L.updateQueue=null,L.dependencies=null,L.stateNode=null):(L.childLanes=$.childLanes,L.lanes=$.lanes,L.child=$.child,L.subtreeFlags=0,L.deletions=null,L.memoizedProps=$.memoizedProps,L.memoizedState=$.memoizedState,L.updateQueue=$.updateQueue,L.type=$.type,O=$.dependencies,L.dependencies=O===null?null:{lanes:O.lanes,firstContext:O.firstContext}),S=S.sibling;return Dn(Ar,1&Ar.current|2),v.child}g=g.sibling}O.tail!==null&&yi()>xA&&(v.flags|=128,L=!0,Kg(O,!1),v.lanes=4194304)}else{if(!L)if((g=x_($))!==null){if(v.flags|=128,L=!0,(g=g.updateQueue)!==null&&(v.updateQueue=g,v.flags|=4),Kg(O,!0),O.tail===null&&O.tailMode==="hidden"&&!$.alternate&&!hr)return _s(v),null}else 2*yi()-O.renderingStartTime>xA&&S!==1073741824&&(v.flags|=128,L=!0,Kg(O,!1),v.lanes=4194304);O.isBackwards?($.sibling=v.child,v.child=$):((g=O.last)!==null?g.sibling=$:v.child=$,O.last=$)}return O.tail!==null?(v=O.tail,O.rendering=v,O.tail=v.sibling,O.renderingStartTime=yi(),v.sibling=null,g=Ar.current,Dn(Ar,L?1&g|2:1&g),v):(_s(v),null);case 22:case 23:return CA(),S=v.memoizedState!==null,g!==null&&g.memoizedState!==null!==S&&(v.flags|=8192),S&&1&v.mode?1073741824&no&&(_s(v),pe&&6&v.subtreeFlags&&(v.flags|=8192)):_s(v),null;case 24:case 25:return null}throw Error(s(156,v.tag))}function mee(g,v){switch(LC(v),v.tag){case 1:return Ni(v.type)&&jd(),65536&(g=v.flags)?(v.flags=-65537&g|128,v):null;case 3:return Yf(),Vn(ri),Vn(jn),XC(),65536&(g=v.flags)&&!(128&g)?(v.flags=-65537&g|128,v):null;case 5:return VC(v),null;case 13:if(Vn(Ar),(g=v.memoizedState)!==null&&g.dehydrated!==null){if(v.alternate===null)throw Error(s(340));Gf()}return 65536&(g=v.flags)?(v.flags=-65537&g|128,v):null;case 19:return Vn(Ar),null;case 4:return Yf(),null;case 10:return FC(v.type._context),null;case 22:case 23:return CA(),null;default:return null}}var M_=!1,Ji=!1,gee=typeof WeakSet=="function"?WeakSet:Set,yt=null;function qf(g,v){var S=g.ref;if(S!==null)if(typeof S=="function")try{S(null)}catch(L){fr(g,v,L)}else S.current=null}function nF(g,v,S){try{S()}catch(L){fr(g,v,L)}}var rF=!1;function qg(g,v,S){var L=v.updateQueue;if((L=L!==null?L.lastEffect:null)!==null){var O=L=L.next;do{if((O.tag&g)===g){var $=O.destroy;O.destroy=void 0,$!==void 0&&nF(v,S,$)}O=O.next}while(O!==L)}}function L_(g,v){if((v=(v=v.updateQueue)!==null?v.lastEffect:null)!==null){var S=v=v.next;do{if((S.tag&g)===g){var L=S.create;S.destroy=L()}S=S.next}while(S!==v)}}function uA(g){var v=g.ref;if(v!==null){var S=g.stateNode;g.tag===5?g=X(S):g=S,typeof v=="function"?v(g):v.current=g}}function iF(g){var v=g.alternate;v!==null&&(g.alternate=null,iF(v)),g.child=null,g.deletions=null,g.sibling=null,g.tag===5&&(v=g.stateNode)!==null&&q(v),g.stateNode=null,g.return=null,g.dependencies=null,g.memoizedProps=null,g.memoizedState=null,g.pendingProps=null,g.stateNode=null,g.updateQueue=null}function sF(g){return g.tag===5||g.tag===3||g.tag===4}function oF(g){e:for(;;){for(;g.sibling===null;){if(g.return===null||sF(g.return))return null;g=g.return}for(g.sibling.return=g.return,g=g.sibling;g.tag!==5&&g.tag!==6&&g.tag!==18;){if(2&g.flags||g.child===null||g.tag===4)continue e;g.child.return=g,g=g.child}if(!(2&g.flags))return g.stateNode}}function dA(g,v,S){var L=g.tag;if(L===5||L===6)g=g.stateNode,v?It(S,g,v):we(S,g);else if(L!==4&&(g=g.child)!==null)for(dA(g,v,S),g=g.sibling;g!==null;)dA(g,v,S),g=g.sibling}function hA(g,v,S){var L=g.tag;if(L===5||L===6)g=g.stateNode,v?Ie(S,g,v):be(S,g);else if(L!==4&&(g=g.child)!==null)for(hA(g,v,S),g=g.sibling;g!==null;)hA(g,v,S),g=g.sibling}var bs=null,ul=!1;function dl(g,v,S){for(S=S.child;S!==null;)fA(g,v,S),S=S.sibling}function fA(g,v,S){if(rl&&typeof rl.onCommitFiberUnmount=="function")try{rl.onCommitFiberUnmount(c_,S)}catch{}switch(S.tag){case 5:Ji||qf(S,v);case 6:if(pe){var L=bs,O=ul;bs=null,dl(g,v,S),ul=O,(bs=L)!==null&&(ul?Ye(bs,S.stateNode):Ve(bs,S.stateNode))}else dl(g,v,S);break;case 18:pe&&bs!==null&&(ul?Xt(bs,S.stateNode):vs(bs,S.stateNode));break;case 4:pe?(L=bs,O=ul,bs=S.stateNode.containerInfo,ul=!0,dl(g,v,S),bs=L,ul=O):(ke&&(L=S.stateNode.containerInfo,O=_e(L),ct(L,O)),dl(g,v,S));break;case 0:case 11:case 14:case 15:if(!Ji&&(L=S.updateQueue)!==null&&(L=L.lastEffect)!==null){O=L=L.next;do{var $=O,te=$.destroy;$=$.tag,te!==void 0&&(2&$||4&$)&&nF(S,v,te),O=O.next}while(O!==L)}dl(g,v,S);break;case 1:if(!Ji&&(qf(S,v),typeof(L=S.stateNode).componentWillUnmount=="function"))try{L.props=S.memoizedProps,L.state=S.memoizedState,L.componentWillUnmount()}catch(ce){fr(S,v,ce)}dl(g,v,S);break;case 21:dl(g,v,S);break;case 22:1&S.mode?(Ji=(L=Ji)||S.memoizedState!==null,dl(g,v,S),Ji=L):dl(g,v,S);break;default:dl(g,v,S)}}function aF(g){var v=g.updateQueue;if(v!==null){g.updateQueue=null;var S=g.stateNode;S===null&&(S=g.stateNode=new gee),v.forEach(function(L){var O=wee.bind(null,g,L);S.has(L)||(S.add(L),L.then(O,O))})}}function wa(g,v){var S=v.deletions;if(S!==null)for(var L=0;L<S.length;L++){var O=S[L];try{var $=g,te=v;if(pe){var ce=te;e:for(;ce!==null;){switch(ce.tag){case 5:bs=ce.stateNode,ul=!1;break e;case 3:case 4:bs=ce.stateNode.containerInfo,ul=!0;break e}ce=ce.return}if(bs===null)throw Error(s(160));fA($,te,O),bs=null,ul=!1}else fA($,te,O);var Ee=O.alternate;Ee!==null&&(Ee.return=null),O.return=null}catch(Ne){fr(O,v,Ne)}}if(12854&v.subtreeFlags)for(v=v.child;v!==null;)lF(v,g),v=v.sibling}function lF(g,v){var S=g.alternate,L=g.flags;switch(g.tag){case 0:case 11:case 14:case 15:if(wa(v,g),hl(g),4&L){try{qg(3,g,g.return),L_(3,g)}catch(ze){fr(g,g.return,ze)}try{qg(5,g,g.return)}catch(ze){fr(g,g.return,ze)}}break;case 1:wa(v,g),hl(g),512&L&&S!==null&&qf(S,S.return);break;case 5:if(wa(v,g),hl(g),512&L&&S!==null&&qf(S,S.return),pe){if(32&g.flags){var O=g.stateNode;try{ft(O)}catch(ze){fr(g,g.return,ze)}}if(4&L&&(O=g.stateNode)!=null){var $=g.memoizedProps;if(S=S!==null?S.memoizedProps:$,L=g.type,v=g.updateQueue,g.updateQueue=null,v!==null)try{Bt(O,v,L,S,$,g)}catch(ze){fr(g,g.return,ze)}}}break;case 6:if(wa(v,g),hl(g),4&L&&pe){if(g.stateNode===null)throw Error(s(162));O=g.stateNode,$=g.memoizedProps,S=S!==null?S.memoizedProps:$;try{qe(O,S,$)}catch(ze){fr(g,g.return,ze)}}break;case 3:if(wa(v,g),hl(g),4&L){if(pe&&Re&&S!==null&&S.memoizedState.isDehydrated)try{gi(v.containerInfo)}catch(ze){fr(g,g.return,ze)}if(ke){O=v.containerInfo,$=v.pendingChildren;try{ct(O,$)}catch(ze){fr(g,g.return,ze)}}}break;case 4:if(wa(v,g),hl(g),4&L&&ke){O=($=g.stateNode).containerInfo,$=$.pendingChildren;try{ct(O,$)}catch(ze){fr(g,g.return,ze)}}break;case 13:wa(v,g),hl(g),8192&(O=g.child).flags&&($=O.memoizedState!==null,O.stateNode.isHidden=$,!$||O.alternate!==null&&O.alternate.memoizedState!==null||(bA=yi())),4&L&&aF(g);break;case 22:var te=S!==null&&S.memoizedState!==null;if(1&g.mode?(Ji=(S=Ji)||te,wa(v,g),Ji=S):wa(v,g),hl(g),8192&L){if(S=g.memoizedState!==null,(g.stateNode.isHidden=S)&&!te&&(1&g.mode)!=0)for(yt=g,L=g.child;L!==null;){for(v=yt=L;yt!==null;){var ce=(te=yt).child;switch(te.tag){case 0:case 11:case 14:case 15:qg(4,te,te.return);break;case 1:qf(te,te.return);var Ee=te.stateNode;if(typeof Ee.componentWillUnmount=="function"){var Ne=te,je=te.return;try{var nt=Ne;Ee.props=nt.memoizedProps,Ee.state=nt.memoizedState,Ee.componentWillUnmount()}catch(ze){fr(Ne,je,ze)}}break;case 5:qf(te,te.return);break;case 22:if(te.memoizedState!==null){dF(v);continue}}ce!==null?(ce.return=te,yt=ce):dF(v)}L=L.sibling}if(pe){e:if(L=null,pe)for(v=g;;){if(v.tag===5){if(L===null){L=v;try{O=v.stateNode,S?kt(O):zn(v.stateNode,v.memoizedProps)}catch(ze){fr(g,g.return,ze)}}}else if(v.tag===6){if(L===null)try{$=v.stateNode,S?vn($):Kn($,v.memoizedProps)}catch(ze){fr(g,g.return,ze)}}else if((v.tag!==22&&v.tag!==23||v.memoizedState===null||v===g)&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===g)break e;for(;v.sibling===null;){if(v.return===null||v.return===g)break e;L===v&&(L=null),v=v.return}L===v&&(L=null),v.sibling.return=v.return,v=v.sibling}}}break;case 19:wa(v,g),hl(g),4&L&&aF(g);break;case 21:break;default:wa(v,g),hl(g)}}function hl(g){var v=g.flags;if(2&v){try{if(pe){e:{for(var S=g.return;S!==null;){if(sF(S)){var L=S;break e}S=S.return}throw Error(s(160))}switch(L.tag){case 5:var O=L.stateNode;32&L.flags&&(ft(O),L.flags&=-33),hA(g,oF(g),O);break;case 3:case 4:var $=L.stateNode.containerInfo;dA(g,oF(g),$);break;default:throw Error(s(161))}}}catch(te){fr(g,g.return,te)}g.flags&=-3}4096&v&&(g.flags&=-4097)}function vee(g,v,S){yt=g,cF(g)}function cF(g,v,S){for(var L=(1&g.mode)!=0;yt!==null;){var O=yt,$=O.child;if(O.tag===22&&L){var te=O.memoizedState!==null||M_;if(!te){var ce=O.alternate,Ee=ce!==null&&ce.memoizedState!==null||Ji;ce=M_;var Ne=Ji;if(M_=te,(Ji=Ee)&&!Ne)for(yt=O;yt!==null;)Ee=(te=yt).child,te.tag===22&&te.memoizedState!==null?hF(O):Ee!==null?(Ee.return=te,yt=Ee):hF(O);for(;$!==null;)yt=$,cF($),$=$.sibling;yt=O,M_=ce,Ji=Ne}uF(g)}else 8772&O.subtreeFlags&&$!==null?($.return=O,yt=$):uF(g)}}function uF(g){for(;yt!==null;){var v=yt;if(8772&v.flags){var S=v.alternate;try{if(8772&v.flags)switch(v.tag){case 0:case 11:case 15:Ji||L_(5,v);break;case 1:var L=v.stateNode;if(4&v.flags&&!Ji)if(S===null)L.componentDidMount();else{var O=v.elementType===v.type?S.memoizedProps:Ea(v.type,S.memoizedProps);L.componentDidUpdate(O,S.memoizedState,L.__reactInternalSnapshotBeforeUpdate)}var $=v.updateQueue;$!==null&&lB(v,$,L);break;case 3:var te=v.updateQueue;if(te!==null){if(S=null,v.child!==null)switch(v.child.tag){case 5:S=X(v.child.stateNode);break;case 1:S=v.child.stateNode}lB(v,te,S)}break;case 5:var ce=v.stateNode;S===null&&4&v.flags&&gt(ce,v.type,v.memoizedProps,v);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(Re&&v.memoizedState===null){var Ee=v.alternate;if(Ee!==null){var Ne=Ee.memoizedState;if(Ne!==null){var je=Ne.dehydrated;je!==null&&_r(je)}}}break;default:throw Error(s(163))}Ji||512&v.flags&&uA(v)}catch(nt){fr(v,v.return,nt)}}if(v===g){yt=null;break}if((S=v.sibling)!==null){S.return=v.return,yt=S;break}yt=v.return}}function dF(g){for(;yt!==null;){var v=yt;if(v===g){yt=null;break}var S=v.sibling;if(S!==null){S.return=v.return,yt=S;break}yt=v.return}}function hF(g){for(;yt!==null;){var v=yt;try{switch(v.tag){case 0:case 11:case 15:var S=v.return;try{L_(4,v)}catch(Ee){fr(v,S,Ee)}break;case 1:var L=v.stateNode;if(typeof L.componentDidMount=="function"){var O=v.return;try{L.componentDidMount()}catch(Ee){fr(v,O,Ee)}}var $=v.return;try{uA(v)}catch(Ee){fr(v,$,Ee)}break;case 5:var te=v.return;try{uA(v)}catch(Ee){fr(v,te,Ee)}}}catch(Ee){fr(v,v.return,Ee)}if(v===g){yt=null;break}var ce=v.sibling;if(ce!==null){ce.return=v.return,yt=ce;break}yt=v.return}}var O_=0,k_=1,N_=2,D_=3,B_=4;if(typeof Symbol=="function"&&Symbol.for){var Zg=Symbol.for;O_=Zg("selector.component"),k_=Zg("selector.has_pseudo_class"),N_=Zg("selector.role"),D_=Zg("selector.test_id"),B_=Zg("selector.text")}function pA(g){var v=B(g);if(v!=null){if(typeof v.memoizedProps["data-testname"]!="string")throw Error(s(364));return v}if((g=he(g))===null)throw Error(s(362));return g.stateNode.current}function mA(g,v){switch(v.$$typeof){case O_:if(g.type===v.value)return!0;break;case k_:e:{v=v.value,g=[g,0];for(var S=0;S<g.length;){var L=g[S++],O=g[S++],$=v[O];if(L.tag!==5||!De(L)){for(;$!=null&&mA(L,$);)$=v[++O];if(O===v.length){v=!0;break e}for(L=L.child;L!==null;)g.push(L,O),L=L.sibling}}v=!1}return v;case N_:if(g.tag===5&&Be(g.stateNode,v.value))return!0;break;case B_:if((g.tag===5||g.tag===6)&&(g=Ae(g))!==null&&0<=g.indexOf(v.value))return!0;break;case D_:if(g.tag===5&&typeof(g=g.memoizedProps["data-testname"])=="string"&&g.toLowerCase()===v.value.toLowerCase())return!0;break;default:throw Error(s(365))}return!1}function gA(g){switch(g.$$typeof){case O_:return"<"+(T(g.value)||"Unknown")+">";case k_:return":has("+(gA(g)||"")+")";case N_:return'[role="'+g.value+'"]';case B_:return'"'+g.value+'"';case D_:return'[data-testname="'+g.value+'"]';default:throw Error(s(365))}}function fF(g,v){var S=[];g=[g,0];for(var L=0;L<g.length;){var O=g[L++],$=g[L++],te=v[$];if(O.tag!==5||!De(O)){for(;te!=null&&mA(O,te);)te=v[++$];if($===v.length)S.push(O);else for(O=O.child;O!==null;)g.push(O,$),O=O.sibling}}return S}function vA(g,v){if(!me)throw Error(s(363));g=fF(g=pA(g),v),v=[],g=Array.from(g);for(var S=0;S<g.length;){var L=g[S++];if(L.tag===5)De(L)||v.push(L.stateNode);else for(L=L.child;L!==null;)g.push(L),L=L.sibling}return v}var yee=Math.ceil,F_=o.ReactCurrentDispatcher,yA=o.ReactCurrentOwner,zr=o.ReactCurrentBatchConfig,gn=0,xi=null,Xr=null,Di=0,no=0,Zf=vi(0),ii=0,Qg=null,Yd=0,U_=0,_A=0,Jg=null,ro=null,bA=0,xA=1/0,iu=null;function Qf(){xA=yi()+500}var pF,z_=!1,EA=null,su=null,$_=!1,ou=null,j_=0,e0=0,wA=null,G_=-1,H_=0;function es(){return 6&gn?yi():G_!==-1?G_:G_=yi()}function au(g){return 1&g.mode?2&gn&&Di!==0?Di&-Di:ree.transition!==null?(H_===0&&(H_=ut()),H_):(g=Gt)!==0?g:ie():1}function Go(g,v,S,L){if(50<e0)throw e0=0,wA=null,Error(s(185));dr(g,S,L),2&gn&&g===xi||(g===xi&&(!(2&gn)&&(U_|=S),ii===4&&lu(g,Di)),Fs(g,L),S===1&&gn===0&&!(1&v.mode)&&(Qf(),u_&&il()))}function Fs(g,v){var S=g.callbackNode;(function(O,$){for(var te=O.suspendedLanes,ce=O.pingedLanes,Ee=O.expirationTimes,Ne=O.pendingLanes;0<Ne;){var je=31-ys(Ne),nt=1<<je,ze=Ee[je];ze===-1?nt&te&&!(nt&ce)||(Ee[je]=Te(nt,$)):ze<=$&&(O.expiredLanes|=nt),Ne&=~nt}})(g,v);var L=re(g,g===xi?Di:0);if(L===0)S!==null&&qD(S),g.callbackNode=null,g.callbackPriority=0;else if(v=L&-L,g.callbackPriority!==v){if(S!=null&&qD(S),v===1)g.tag===0?function(O){u_=!0,QD(O)}(gF.bind(null,g)):QD(gF.bind(null,g)),Y?ne(function(){!(6&gn)&&il()}):RC(PC,il),S=null;else{switch(eo(L)){case 1:S=PC;break;case 4:S=tee;break;case 16:default:S=ZD;break;case 536870912:S=nee}S=TF(S,mF.bind(null,g))}g.callbackPriority=v,g.callbackNode=S}}function mF(g,v){if(G_=-1,H_=0,(6&gn)!=0)throw Error(s(327));var S=g.callbackNode;if(qd()&&g.callbackNode!==S)return null;var L=re(g,g===xi?Di:0);if(L===0)return null;if(30&L||L&g.expiredLanes||v)v=V_(g,L);else{v=L;var O=gn;gn|=2;var $=_F();for(xi===g&&Di===v||(iu=null,Qf(),Kd(g,v));;)try{bee();break}catch(ce){yF(g,ce)}BC(),F_.current=$,gn=O,Xr!==null?v=0:(xi=null,Di=0,v=ii)}if(v!==0){if(v===2&&(O=We(g))!==0&&(L=O,v=TA(g,O)),v===1)throw S=Qg,Kd(g,0),lu(g,L),Fs(g,yi()),S;if(v===6)lu(g,L);else{if(O=g.current.alternate,(30&L)==0&&!function(ce){for(var Ee=ce;;){if(16384&Ee.flags){var Ne=Ee.updateQueue;if(Ne!==null&&(Ne=Ne.stores)!==null)for(var je=0;je<Ne.length;je++){var nt=Ne[je],ze=nt.getSnapshot;nt=nt.value;try{if(!ba(ze(),nt))return!1}catch{return!1}}}if(Ne=Ee.child,16384&Ee.subtreeFlags&&Ne!==null)Ne.return=Ee,Ee=Ne;else{if(Ee===ce)break;for(;Ee.sibling===null;){if(Ee.return===null||Ee.return===ce)return!0;Ee=Ee.return}Ee.sibling.return=Ee.return,Ee=Ee.sibling}}return!0}(O)&&((v=V_(g,L))===2&&($=We(g))!==0&&(L=$,v=TA(g,$)),v===1))throw S=Qg,Kd(g,0),lu(g,L),Fs(g,yi()),S;switch(g.finishedWork=O,g.finishedLanes=L,v){case 0:case 1:throw Error(s(345));case 2:case 5:Jf(g,ro,iu);break;case 3:if(lu(g,L),(130023424&L)===L&&10<(v=bA+500-yi())){if(re(g,0)!==0)break;if(((O=g.suspendedLanes)&L)!==L){es(),g.pingedLanes|=g.suspendedLanes&O;break}g.timeoutHandle=Oe(Jf.bind(null,g,ro,iu),v);break}Jf(g,ro,iu);break;case 4:if(lu(g,L),(4194240&L)===L)break;for(v=g.eventTimes,O=-1;0<L;){var te=31-ys(L);$=1<<te,(te=v[te])>O&&(O=te),L&=~$}if(L=O,10<(L=(120>(L=yi()-L)?120:480>L?480:1080>L?1080:1920>L?1920:3e3>L?3e3:4320>L?4320:1960*yee(L/1960))-L)){g.timeoutHandle=Oe(Jf.bind(null,g,ro,iu),L);break}Jf(g,ro,iu);break;default:throw Error(s(329))}}}return Fs(g,yi()),g.callbackNode===S?mF.bind(null,g):null}function TA(g,v){var S=Jg;return g.current.memoizedState.isDehydrated&&(Kd(g,v).flags|=256),(g=V_(g,v))!==2&&(v=ro,ro=S,v!==null&&SA(v)),g}function SA(g){ro===null?ro=g:ro.push.apply(ro,g)}function lu(g,v){for(v&=~_A,v&=~U_,g.suspendedLanes|=v,g.pingedLanes&=~v,g=g.expirationTimes;0<v;){var S=31-ys(v),L=1<<S;g[S]=-1,v&=~L}}function gF(g){if(6&gn)throw Error(s(327));qd();var v=re(g,0);if(!(1&v))return Fs(g,yi()),null;var S=V_(g,v);if(g.tag!==0&&S===2){var L=We(g);L!==0&&(v=L,S=TA(g,L))}if(S===1)throw S=Qg,Kd(g,0),lu(g,v),Fs(g,yi()),S;if(S===6)throw Error(s(345));return g.finishedWork=g.current.alternate,g.finishedLanes=v,Jf(g,ro,iu),Fs(g,yi()),null}function vF(g){ou!==null&&ou.tag===0&&!(6&gn)&&qd();var v=gn;gn|=1;var S=zr.transition,L=Gt;try{if(zr.transition=null,Gt=1,g)return g()}finally{Gt=L,zr.transition=S,!(6&(gn=v))&&il()}}function CA(){no=Zf.current,Vn(Zf)}function Kd(g,v){g.finishedWork=null,g.finishedLanes=0;var S=g.timeoutHandle;if(S!==ue&&(g.timeoutHandle=ue,ae(S)),Xr!==null)for(S=Xr.return;S!==null;){var L=S;switch(LC(L),L.tag){case 1:(L=L.type.childContextTypes)!=null&&jd();break;case 3:Yf(),Vn(ri),Vn(jn),XC();break;case 5:VC(L);break;case 4:Yf();break;case 13:case 19:Vn(Ar);break;case 10:FC(L.type._context);break;case 22:case 23:CA()}S=S.return}if(xi=g,Xr=g=cu(g.current,null),Di=no=v,ii=0,Qg=null,_A=U_=Yd=0,ro=Jg=null,Wd!==null){for(v=0;v<Wd.length;v++)if((L=(S=Wd[v]).interleaved)!==null){S.interleaved=null;var O=L.next,$=S.pending;if($!==null){var te=$.next;$.next=O,L.next=te}S.pending=L}Wd=null}return g}function yF(g,v){for(;;){var S=Xr;try{if(BC(),E_.current=C_,w_){for(var L=xr.memoizedState;L!==null;){var O=L.queue;O!==null&&(O.pending=null),L=L.next}w_=!1}if(Xd=0,bi=_i=xr=null,Gg=!1,Hg=0,yA.current=null,S===null||S.return===null){ii=1,Qg=v,Xr=null;break}e:{var $=g,te=S.return,ce=S,Ee=v;if(v=Di,ce.flags|=32768,Ee!==null&&typeof Ee=="object"&&typeof Ee.then=="function"){var Ne=Ee,je=ce,nt=je.tag;if(!(1&je.mode)&&(nt===0||nt===11||nt===15)){var ze=je.alternate;ze?(je.updateQueue=ze.updateQueue,je.memoizedState=ze.memoizedState,je.lanes=ze.lanes):(je.updateQueue=null,je.memoizedState=null)}var Qe=$B(te);if(Qe!==null){Qe.flags&=-257,jB(Qe,te,ce,0,v),1&Qe.mode&&zB($,Ne,v),Ee=Ne;var xt=(v=Qe).updateQueue;if(xt===null){var sn=new Set;sn.add(Ee),v.updateQueue=sn}else xt.add(Ee);break e}if(!(1&v)){zB($,Ne,v),AA();break e}Ee=Error(s(426))}else if(hr&&1&ce.mode){var Ge=$B(te);if(Ge!==null){!(65536&Ge.flags)&&(Ge.flags|=256),jB(Ge,te,ce,0,v),NC(Kf(Ee,ce));break e}}$=Ee=Kf(Ee,ce),ii!==4&&(ii=2),Jg===null?Jg=[$]:Jg.push($),$=te;do{switch($.tag){case 3:$.flags|=65536,v&=-v,$.lanes|=v,aB($,FB(0,Ee,v));break e;case 1:ce=Ee;var ge=$.type,Le=$.stateNode;if(!(128&$.flags)&&(typeof ge.getDerivedStateFromError=="function"||Le!==null&&typeof Le.componentDidCatch=="function"&&(su===null||!su.has(Le)))){$.flags|=65536,v&=-v,$.lanes|=v,aB($,UB($,ce,v));break e}}$=$.return}while($!==null)}xF(S)}catch(Xe){v=Xe,Xr===S&&S!==null&&(Xr=S=S.return);continue}break}}function _F(){var g=F_.current;return F_.current=C_,g===null?C_:g}function AA(){ii!==0&&ii!==3&&ii!==2||(ii=4),xi===null||!(268435455&Yd)&&!(268435455&U_)||lu(xi,Di)}function V_(g,v){var S=gn;gn|=2;var L=_F();for(xi===g&&Di===v||(iu=null,Kd(g,v));;)try{_ee();break}catch(O){yF(g,O)}if(BC(),gn=S,F_.current=L,Xr!==null)throw Error(s(261));return xi=null,Di=0,ii}function _ee(){for(;Xr!==null;)bF(Xr)}function bee(){for(;Xr!==null&&!JJ();)bF(Xr)}function bF(g){var v=pF(g.alternate,g,no);g.memoizedProps=g.pendingProps,v===null?xF(g):Xr=v,yA.current=null}function xF(g){var v=g;do{var S=v.alternate;if(g=v.return,(32768&v.flags)==0){if((S=pee(S,v,no))!==null)return void(Xr=S)}else{if((S=mee(S,v))!==null)return S.flags&=32767,void(Xr=S);if(g===null)return ii=6,void(Xr=null);g.flags|=32768,g.subtreeFlags=0,g.deletions=null}if((v=v.sibling)!==null)return void(Xr=v);Xr=v=g}while(v!==null);ii===0&&(ii=5)}function Jf(g,v,S){var L=Gt,O=zr.transition;try{zr.transition=null,Gt=1,function($,te,ce,Ee){do qd();while(ou!==null);if(6&gn)throw Error(s(327));ce=$.finishedWork;var Ne=$.finishedLanes;if(ce===null)return null;if($.finishedWork=null,$.finishedLanes=0,ce===$.current)throw Error(s(177));$.callbackNode=null,$.callbackPriority=0;var je=ce.lanes|ce.childLanes;if(function(Qe,xt){var sn=Qe.pendingLanes&~xt;Qe.pendingLanes=xt,Qe.suspendedLanes=0,Qe.pingedLanes=0,Qe.expiredLanes&=xt,Qe.mutableReadLanes&=xt,Qe.entangledLanes&=xt,xt=Qe.entanglements;var Ge=Qe.eventTimes;for(Qe=Qe.expirationTimes;0<sn;){var ge=31-ys(sn),Le=1<<ge;xt[ge]=0,Ge[ge]=-1,Qe[ge]=-1,sn&=~Le}}($,je),$===xi&&(Xr=xi=null,Di=0),!(2064&ce.subtreeFlags)&&!(2064&ce.flags)||$_||($_=!0,TF(ZD,function(){return qd(),null})),je=(15990&ce.flags)!=0,(15990&ce.subtreeFlags)!=0||je){je=zr.transition,zr.transition=null;var nt=Gt;Gt=1;var ze=gn;gn|=4,yA.current=null,function(Qe,xt){for(H(Qe.containerInfo),yt=xt;yt!==null;)if(xt=(Qe=yt).child,(1028&Qe.subtreeFlags)!=0&&xt!==null)xt.return=Qe,yt=xt;else for(;yt!==null;){Qe=yt;try{var sn=Qe.alternate;if(1024&Qe.flags)switch(Qe.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(sn!==null){var Ge=sn.memoizedProps,ge=sn.memoizedState,Le=Qe.stateNode,Xe=Le.getSnapshotBeforeUpdate(Qe.elementType===Qe.type?Ge:Ea(Qe.type,Ge),ge);Le.__reactInternalSnapshotBeforeUpdate=Xe}break;case 3:pe&&ur(Qe.stateNode.containerInfo);break;default:throw Error(s(163))}}catch(Mt){fr(Qe,Qe.return,Mt)}if((xt=Qe.sibling)!==null){xt.return=Qe.return,yt=xt;break}yt=Qe.return}sn=rF,rF=!1}($,ce),lF(ce,$),Q($.containerInfo),$.current=ce,vee(ce),eee(),gn=ze,Gt=nt,zr.transition=je}else $.current=ce;if($_&&($_=!1,ou=$,j_=Ne),je=$.pendingLanes,je===0&&(su=null),function(Qe){if(rl&&typeof rl.onCommitFiberRoot=="function")try{rl.onCommitFiberRoot(c_,Qe,void 0,(128&Qe.current.flags)==128)}catch{}}(ce.stateNode),Fs($,yi()),te!==null)for(Ee=$.onRecoverableError,ce=0;ce<te.length;ce++)Ne=te[ce],Ee(Ne.value,{componentStack:Ne.stack,digest:Ne.digest});if(z_)throw z_=!1,$=EA,EA=null,$;1&j_&&$.tag!==0&&qd(),je=$.pendingLanes,1&je?$===wA?e0++:(e0=0,wA=$):e0=0,il()}(g,v,S,L)}finally{zr.transition=O,Gt=L}return null}function qd(){if(ou!==null){var g=eo(j_),v=zr.transition,S=Gt;try{if(zr.transition=null,Gt=16>g?16:g,ou===null)var L=!1;else{if(g=ou,ou=null,j_=0,(6&gn)!=0)throw Error(s(331));var O=gn;for(gn|=4,yt=g.current;yt!==null;){var $=yt,te=$.child;if(16&yt.flags){var ce=$.deletions;if(ce!==null){for(var Ee=0;Ee<ce.length;Ee++){var Ne=ce[Ee];for(yt=Ne;yt!==null;){var je=yt;switch(je.tag){case 0:case 11:case 15:qg(8,je,$)}var nt=je.child;if(nt!==null)nt.return=je,yt=nt;else for(;yt!==null;){var ze=(je=yt).sibling,Qe=je.return;if(iF(je),je===Ne){yt=null;break}if(ze!==null){ze.return=Qe,yt=ze;break}yt=Qe}}}var xt=$.alternate;if(xt!==null){var sn=xt.child;if(sn!==null){xt.child=null;do{var Ge=sn.sibling;sn.sibling=null,sn=Ge}while(sn!==null)}}yt=$}}if(2064&$.subtreeFlags&&te!==null)te.return=$,yt=te;else e:for(;yt!==null;){if(2048&($=yt).flags)switch($.tag){case 0:case 11:case 15:qg(9,$,$.return)}var ge=$.sibling;if(ge!==null){ge.return=$.return,yt=ge;break e}yt=$.return}}var Le=g.current;for(yt=Le;yt!==null;){var Xe=(te=yt).child;if(2064&te.subtreeFlags&&Xe!==null)Xe.return=te,yt=Xe;else e:for(te=Le;yt!==null;){if(2048&(ce=yt).flags)try{switch(ce.tag){case 0:case 11:case 15:L_(9,ce)}}catch(Ln){fr(ce,ce.return,Ln)}if(ce===te){yt=null;break e}var Mt=ce.sibling;if(Mt!==null){Mt.return=ce.return,yt=Mt;break e}yt=ce.return}}if(gn=O,il(),rl&&typeof rl.onPostCommitFiberRoot=="function")try{rl.onPostCommitFiberRoot(c_,g)}catch{}L=!0}return L}finally{Gt=S,zr.transition=v}}return!1}function EF(g,v,S){g=ru(g,v=FB(0,v=Kf(S,v),1),1),v=es(),g!==null&&(dr(g,1,v),Fs(g,v))}function fr(g,v,S){if(g.tag===3)EF(g,g,S);else for(;v!==null;){if(v.tag===3){EF(v,g,S);break}if(v.tag===1){var L=v.stateNode;if(typeof v.type.getDerivedStateFromError=="function"||typeof L.componentDidCatch=="function"&&(su===null||!su.has(L))){v=ru(v,g=UB(v,g=Kf(S,g),1),1),g=es(),v!==null&&(dr(v,1,g),Fs(v,g));break}}v=v.return}}function xee(g,v,S){var L=g.pingCache;L!==null&&L.delete(v),v=es(),g.pingedLanes|=g.suspendedLanes&S,xi===g&&(Di&S)===S&&(ii===4||ii===3&&(130023424&Di)===Di&&500>yi()-bA?Kd(g,0):_A|=S),Fs(g,v)}function wF(g,v){v===0&&(1&g.mode?(v=K,!(130023424&(K<<=1))&&(K=4194304)):v=1);var S=es();(g=ol(g,v))!==null&&(dr(g,v,S),Fs(g,S))}function Eee(g){var v=g.memoizedState,S=0;v!==null&&(S=v.retryLane),wF(g,S)}function wee(g,v){var S=0;switch(g.tag){case 13:var L=g.stateNode,O=g.memoizedState;O!==null&&(S=O.retryLane);break;case 19:L=g.stateNode;break;default:throw Error(s(314))}L!==null&&L.delete(v),wF(g,S)}function TF(g,v){return RC(g,v)}function Tee(g,v,S,L){this.tag=g,this.key=S,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=v,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=L,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ho(g,v,S,L){return new Tee(g,v,S,L)}function RA(g){return!(!(g=g.prototype)||!g.isReactComponent)}function cu(g,v){var S=g.alternate;return S===null?((S=Ho(g.tag,v,g.key,g.mode)).elementType=g.elementType,S.type=g.type,S.stateNode=g.stateNode,S.alternate=g,g.alternate=S):(S.pendingProps=v,S.type=g.type,S.flags=0,S.subtreeFlags=0,S.deletions=null),S.flags=14680064&g.flags,S.childLanes=g.childLanes,S.lanes=g.lanes,S.child=g.child,S.memoizedProps=g.memoizedProps,S.memoizedState=g.memoizedState,S.updateQueue=g.updateQueue,v=g.dependencies,S.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext},S.sibling=g.sibling,S.index=g.index,S.ref=g.ref,S}function W_(g,v,S,L,O,$){var te=2;if(L=g,typeof g=="function")RA(g)&&(te=1);else if(typeof g=="string")te=5;else e:switch(g){case c:return Zd(S.children,O,$,v);case u:te=8,O|=8;break;case d:return(g=Ho(12,S,v,2|O)).elementType=d,g.lanes=$,g;case m:return(g=Ho(13,S,v,O)).elementType=m,g.lanes=$,g;case _:return(g=Ho(19,S,v,O)).elementType=_,g.lanes=$,g;case b:return X_(S,O,$,v);default:if(typeof g=="object"&&g!==null)switch(g.$$typeof){case h:te=10;break e;case f:te=9;break e;case p:te=11;break e;case y:te=14;break e;case x:te=16,L=null;break e}throw Error(s(130,g==null?g:typeof g,""))}return(v=Ho(te,S,v,O)).elementType=g,v.type=L,v.lanes=$,v}function Zd(g,v,S,L){return(g=Ho(7,g,L,v)).lanes=S,g}function X_(g,v,S,L){return(g=Ho(22,g,L,v)).elementType=b,g.lanes=S,g.stateNode={isHidden:!1},g}function PA(g,v,S){return(g=Ho(6,g,null,v)).lanes=S,g}function IA(g,v,S){return(v=Ho(4,g.children!==null?g.children:[],g.key,v)).lanes=S,v.stateNode={containerInfo:g.containerInfo,pendingChildren:null,implementation:g.implementation},v}function See(g,v,S,L,O){this.tag=v,this.containerInfo=g,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=ue,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tn(0),this.expirationTimes=tn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tn(0),this.identifierPrefix=L,this.onRecoverableError=O,Re&&(this.mutableSourceEagerHydrationData=null)}function SF(g,v,S,L,O,$,te,ce,Ee){return g=new See(g,v,S,ce,Ee),v===1?(v=1,$===!0&&(v|=8)):v=0,$=Ho(3,null,null,v),g.current=$,$.stateNode=g,$.memoizedState={element:L,isDehydrated:S,cache:null,transitions:null,pendingSuspenseBoundaries:null},$C($),g}function CF(g){if(!g)return Js;e:{if(P(g=g._reactInternals)!==g||g.tag!==1)throw Error(s(170));var v=g;do{switch(v.tag){case 3:v=v.stateNode.context;break e;case 1:if(Ni(v.type)){v=v.stateNode.__reactInternalMemoizedMergedChildContext;break e}}v=v.return}while(v!==null);throw Error(s(171))}if(g.tag===1){var S=g.type;if(Ni(S))return Do(g,S,v)}return v}function AF(g){var v=g._reactInternals;if(v===void 0)throw typeof g.render=="function"?Error(s(188)):(g=Object.keys(g).join(","),Error(s(268,g)));return(g=F(v))===null?null:g.stateNode}function RF(g,v){if((g=g.memoizedState)!==null&&g.dehydrated!==null){var S=g.retryLane;g.retryLane=S!==0&&S<v?S:v}}function Y_(g,v){RF(g,v),(g=g.alternate)&&RF(g,v)}function Cee(g){return(g=F(g))===null?null:g.stateNode}function Aee(){return null}return pF=function(g,v,S){if(g!==null)if(g.memoizedProps!==v.pendingProps||ri.current)Ds=!0;else{if(!(g.lanes&S)&&!(128&v.flags))return Ds=!1,function(nt,ze,Qe){switch(ze.tag){case 3:KB(ze),Gf();break;case 5:gB(ze);break;case 1:Ni(ze.type)&&zf(ze);break;case 4:HC(ze,ze.stateNode.containerInfo);break;case 10:iB(0,ze.type._context,ze.memoizedProps.value);break;case 13:var xt=ze.memoizedState;if(xt!==null)return xt.dehydrated!==null?(Dn(Ar,1&Ar.current),ze.flags|=128,null):Qe&ze.child.childLanes?ZB(nt,ze,Qe):(Dn(Ar,1&Ar.current),(nt=oc(nt,ze,Qe))!==null?nt.sibling:null);Dn(Ar,1&Ar.current);break;case 19:if(xt=(Qe&ze.childLanes)!=0,(128&nt.flags)!=0){if(xt)return JB(nt,ze,Qe);ze.flags|=128}var sn=ze.memoizedState;if(sn!==null&&(sn.rendering=null,sn.tail=null,sn.lastEffect=null),Dn(Ar,Ar.current),xt)break;return null;case 22:case 23:return ze.lanes=0,WB(nt,ze,Qe)}return oc(nt,ze,Qe)}(g,v,S);Ds=(131072&g.flags)!=0}else Ds=!1,hr&&1048576&v.flags&&JD(v,h_,v.index);switch(v.lanes=0,v.tag){case 2:var L=v.type;I_(g,v),g=v.pendingProps;var O=nl(v,jn.current);Vf(v,S),O=qC(null,v,L,g,O,S);var $=ZC();return v.flags|=1,typeof O=="object"&&O!==null&&typeof O.render=="function"&&O.$$typeof===void 0?(v.tag=1,v.memoizedState=null,v.updateQueue=null,Ni(L)?($=!0,zf(v)):$=!1,v.memoizedState=O.state!==null&&O.state!==void 0?O.state:null,$C(v),O.updater=__,v.stateNode=O,O._reactInternals=v,GC(v,L,g,S),v=sA(null,v,L,!0,$,S)):(v.tag=0,hr&&$&&MC(v),Bs(null,v,O,S),v=v.child),v;case 16:L=v.elementType;e:{switch(I_(g,v),g=v.pendingProps,L=(O=L._init)(L._payload),v.type=L,O=v.tag=function(nt){if(typeof nt=="function")return RA(nt)?1:0;if(nt!=null){if((nt=nt.$$typeof)===p)return 11;if(nt===y)return 14}return 2}(L),g=Ea(L,g),O){case 0:v=iA(null,v,L,g,S);break e;case 1:v=YB(null,v,L,g,S);break e;case 11:v=GB(null,v,L,g,S);break e;case 14:v=HB(null,v,L,Ea(L.type,g),S);break e}throw Error(s(306,L,""))}return v;case 0:return L=v.type,O=v.pendingProps,iA(g,v,L,O=v.elementType===L?O:Ea(L,O),S);case 1:return L=v.type,O=v.pendingProps,YB(g,v,L,O=v.elementType===L?O:Ea(L,O),S);case 3:e:{if(KB(v),g===null)throw Error(s(387));L=v.pendingProps,O=($=v.memoizedState).element,oB(g,v),y_(v,L,null,S);var te=v.memoizedState;if(L=te.element,Re&&$.isDehydrated){if($={element:L,isDehydrated:!1,cache:te.cache,pendingSuspenseBoundaries:te.pendingSuspenseBoundaries,transitions:te.transitions},v.updateQueue.baseState=$,v.memoizedState=$,256&v.flags){v=qB(g,v,L,S,O=Kf(Error(s(423)),v));break e}if(L!==O){v=qB(g,v,L,S,O=Kf(Error(s(424)),v));break e}for(Re&&(Uo=ti(v.stateNode.containerInfo),to=v,hr=!0,xa=null,Ug=!1),S=mB(v,null,L,S),v.child=S;S;)S.flags=-3&S.flags|4096,S=S.sibling}else{if(Gf(),L===O){v=oc(g,v,S);break e}Bs(g,v,L,S)}v=v.child}return v;case 5:return gB(v),g===null&&kC(v),L=v.type,O=v.pendingProps,$=g!==null?g.memoizedProps:null,te=O.children,fe(L,O)?te=null:$!==null&&fe(L,$)&&(v.flags|=32),XB(g,v),Bs(g,v,te,S),v.child;case 6:return g===null&&kC(v),null;case 13:return ZB(g,v,S);case 4:return HC(v,v.stateNode.containerInfo),L=v.pendingProps,g===null?v.child=Wf(v,null,L,S):Bs(g,v,L,S),v.child;case 11:return L=v.type,O=v.pendingProps,GB(g,v,L,O=v.elementType===L?O:Ea(L,O),S);case 7:return Bs(g,v,v.pendingProps,S),v.child;case 8:case 12:return Bs(g,v,v.pendingProps.children,S),v.child;case 10:e:{if(L=v.type._context,O=v.pendingProps,$=v.memoizedProps,iB(0,L,te=O.value),$!==null)if(ba($.value,te)){if($.children===O.children&&!ri.current){v=oc(g,v,S);break e}}else for(($=v.child)!==null&&($.return=v);$!==null;){var ce=$.dependencies;if(ce!==null){te=$.child;for(var Ee=ce.firstContext;Ee!==null;){if(Ee.context===L){if($.tag===1){(Ee=sc(-1,S&-S)).tag=2;var Ne=$.updateQueue;if(Ne!==null){var je=(Ne=Ne.shared).pending;je===null?Ee.next=Ee:(Ee.next=je.next,je.next=Ee),Ne.pending=Ee}}$.lanes|=S,(Ee=$.alternate)!==null&&(Ee.lanes|=S),UC($.return,S,v),ce.lanes|=S;break}Ee=Ee.next}}else if($.tag===10)te=$.type===v.type?null:$.child;else if($.tag===18){if((te=$.return)===null)throw Error(s(341));te.lanes|=S,(ce=te.alternate)!==null&&(ce.lanes|=S),UC(te,S,v),te=$.sibling}else te=$.child;if(te!==null)te.return=$;else for(te=$;te!==null;){if(te===v){te=null;break}if(($=te.sibling)!==null){$.return=te.return,te=$;break}te=te.return}$=te}Bs(g,v,O.children,S),v=v.child}return v;case 9:return O=v.type,L=v.pendingProps.children,Vf(v,S),L=L(O=zo(O)),v.flags|=1,Bs(g,v,L,S),v.child;case 14:return O=Ea(L=v.type,v.pendingProps),HB(g,v,L,O=Ea(L.type,O),S);case 15:return VB(g,v,v.type,v.pendingProps,S);case 17:return L=v.type,O=v.pendingProps,O=v.elementType===L?O:Ea(L,O),I_(g,v),v.tag=1,Ni(L)?(g=!0,zf(v)):g=!1,Vf(v,S),dB(v,L,O),GC(v,L,O,S),sA(null,v,L,!0,g,S);case 19:return JB(g,v,S);case 22:return WB(g,v,S)}throw Error(s(156,v.tag))},e.attemptContinuousHydration=function(g){if(g.tag===13){var v=ol(g,134217728);v!==null&&Go(v,g,134217728,es()),Y_(g,134217728)}},e.attemptDiscreteHydration=function(g){if(g.tag===13){var v=ol(g,1);v!==null&&Go(v,g,1,es()),Y_(g,1)}},e.attemptHydrationAtCurrentPriority=function(g){if(g.tag===13){var v=au(g),S=ol(g,v);S!==null&&Go(S,g,v,es()),Y_(g,v)}},e.attemptSynchronousHydration=function(g){switch(g.tag){case 3:var v=g.stateNode;if(v.current.memoizedState.isDehydrated){var S=J(v.pendingLanes);S!==0&&(Ur(v,1|S),Fs(v,yi()),!(6&gn)&&(Qf(),il()))}break;case 13:vF(function(){var L=ol(g,1);if(L!==null){var O=es();Go(L,g,1,O)}}),Y_(g,1)}},e.batchedUpdates=function(g,v){var S=gn;gn|=1;try{return g(v)}finally{(gn=S)===0&&(Qf(),u_&&il())}},e.createComponentSelector=function(g){return{$$typeof:O_,value:g}},e.createContainer=function(g,v,S,L,O,$,te){return SF(g,v,!1,null,0,L,0,$,te)},e.createHasPseudoClassSelector=function(g){return{$$typeof:k_,value:g}},e.createHydrationContainer=function(g,v,S,L,O,$,te,ce,Ee){return(g=SF(S,L,!0,g,0,$,0,ce,Ee)).context=CF(null),S=g.current,($=sc(L=es(),O=au(S))).callback=v??null,ru(S,$,O),g.current.lanes=O,dr(g,O,L),Fs(g,L),g},e.createPortal=function(g,v,S){var L=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:L==null?null:""+L,children:g,containerInfo:v,implementation:S}},e.createRoleSelector=function(g){return{$$typeof:N_,value:g}},e.createTestNameSelector=function(g){return{$$typeof:D_,value:g}},e.createTextSelector=function(g){return{$$typeof:B_,value:g}},e.deferredUpdates=function(g){var v=Gt,S=zr.transition;try{return zr.transition=null,Gt=16,g()}finally{Gt=v,zr.transition=S}},e.discreteUpdates=function(g,v,S,L,O){var $=Gt,te=zr.transition;try{return zr.transition=null,Gt=1,g(v,S,L,O)}finally{Gt=$,zr.transition=te,gn===0&&Qf()}},e.findAllNodes=vA,e.findBoundingRects=function(g,v){if(!me)throw Error(s(363));v=vA(g,v),g=[];for(var S=0;S<v.length;S++)g.push(de(v[S]));for(v=g.length-1;0<v;v--)for(var L=(S=g[v]).x,O=L+S.width,$=S.y,te=$+S.height,ce=v-1;0<=ce;ce--)if(v!==ce){var Ee=g[ce],Ne=Ee.x,je=Ne+Ee.width,nt=Ee.y,ze=nt+Ee.height;if(L>=Ne&&$>=nt&&O<=je&&te<=ze){g.splice(v,1);break}if(!(L!==Ne||S.width!==Ee.width||ze<$||nt>te)){nt>$&&(Ee.height+=nt-$,Ee.y=$),ze<te&&(Ee.height=te-nt),g.splice(v,1);break}if(!($!==nt||S.height!==Ee.height||je<L||Ne>O)){Ne>L&&(Ee.width+=Ne-L,Ee.x=L),je<O&&(Ee.width=O-Ne),g.splice(v,1);break}}return g},e.findHostInstance=AF,e.findHostInstanceWithNoPortals=function(g){return(g=(g=N(g))!==null?k(g):null)===null?null:g.stateNode},e.findHostInstanceWithWarning=function(g){return AF(g)},e.flushControlled=function(g){var v=gn;gn|=1;var S=zr.transition,L=Gt;try{zr.transition=null,Gt=1,g()}finally{Gt=L,zr.transition=S,(gn=v)===0&&(Qf(),il())}},e.flushPassiveEffects=qd,e.flushSync=vF,e.focusWithin=function(g,v){if(!me)throw Error(s(363));for(v=fF(g=pA(g),v),v=Array.from(v),g=0;g<v.length;){var S=v[g++];if(!De(S)){if(S.tag===5&&tt(S.stateNode))return!0;for(S=S.child;S!==null;)v.push(S),S=S.sibling}}return!1},e.getCurrentUpdatePriority=function(){return Gt},e.getFindAllNodesFailureDescription=function(g,v){if(!me)throw Error(s(363));var S=0,L=[];g=[pA(g),0];for(var O=0;O<g.length;){var $=g[O++],te=g[O++],ce=v[te];if(($.tag!==5||!De($))&&(mA($,ce)&&(L.push(gA(ce)),++te>S&&(S=te)),te<v.length))for($=$.child;$!==null;)g.push($,te),$=$.sibling}if(S<v.length){for(g=[];S<v.length;S++)g.push(gA(v[S]));return`findAllNodes was able to match part of the selector:
  `+L.join(" > ")+`

No matching component was found for:
  `+g.join(" > ")}return null},e.getPublicRootInstance=function(g){return(g=g.current).child?g.child.tag===5?X(g.child.stateNode):g.child.stateNode:null},e.injectIntoDevTools=function(g){if(g={bundleType:g.bundleType,version:g.version,rendererPackageName:g.rendererPackageName,rendererConfig:g.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:Cee,findFiberByHostInstance:g.findFiberByHostInstance||Aee,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")g=!1;else{var v=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(v.isDisabled||!v.supportsFiber)g=!0;else{try{c_=v.inject(g),rl=v}catch{}g=!!v.checkDCE}}return g},e.isAlreadyRendering=function(){return!1},e.observeVisibleRects=function(g,v,S,L){if(!me)throw Error(s(363));g=vA(g,v);var O=St(g,S,L).disconnect;return{disconnect:function(){O()}}},e.registerMutableSourceForHydration=function(g,v){var S=v._getVersion;S=S(v._source),g.mutableSourceEagerHydrationData==null?g.mutableSourceEagerHydrationData=[v,S]:g.mutableSourceEagerHydrationData.push(v,S)},e.runWithPriority=function(g,v){var S=Gt;try{return Gt=g,v()}finally{Gt=S}},e.shouldError=function(){return null},e.shouldSuspend=function(){return!1},e.updateContainer=function(g,v,S,L){var O=v.current,$=es(),te=au(O);return S=CF(S),v.context===null?v.context=S:v.pendingContext=S,(v=sc($,te)).payload={element:g},(L=L===void 0?null:L)!==null&&(v.callback=L),(g=ru(O,v,te))!==null&&(Go(g,O,te,$),v_(g,O,te)),te},e}),T6}({get exports(){return bL},set exports(t){bL=t}}).exports=MLe();var LLe=iLe(bL),Oq={name:"root",private:!0,workspaces:["packages/*"],scripts:{build:"nx run-many --target=build --all --parallel","build:force":"nx run-many --target=build --all --parallel --skip-nx-cache","build:docs":"nx run @pixi/react-docs:deploy",clean:"rimraf packages/*/dist packages/*/build",lint:"eslint .",prepare:"husky install",prerelease:"./scripts/checkReleaseBranch.mjs && npm run lint && npm run test:force && npm run build:force",release:"lerna publish --no-private",test:"nx run-many --target=test --all --parallel","test:force":"nx run-many --target=test --all --parallel --skip-nx-cache","test:ci":"nx run-many --target=test:ci --all --parallel","test:ci:force":"nx run-many --target=test:ci --all --parallel --skip-nx-cache","test:types":"nx run-many --target=test:types --all --parallel","test:types:force":"nx run-many --target=test:types --all --parallel --skip-nx-cache"},husky:{hooks:{"pre-commit":"lint-staged"}},"lint-staged":{"*.{ts,js,mjs}":["eslint --cache --fix"]},resolutions:{"get-pkg-repo":"4.1.1","hosted-git-info":"^2.1.4"},dependencies:{"@babel/runtime":"^7.14.8","@pixi/app":"^7.1.1","@pixi/constants":"^7.1.1","@pixi/core":"^7.1.1","@pixi/display":"^7.1.1","@pixi/extensions":"^7.1.1","@pixi/graphics":"^7.1.1","@pixi/math":"^7.1.1","@pixi/mesh":"^7.1.1","@pixi/mesh-extras":"^7.1.1","@pixi/particle-container":"^7.1.1","@pixi/sprite":"^7.1.1","@pixi/sprite-animated":"^7.1.1","@pixi/sprite-tiling":"^7.1.1","@pixi/text":"^7.1.1","@pixi/text-bitmap":"^7.1.1","@pixi/ticker":"^7.1.1","@react-spring/animated":"^9.6.1","@react-spring/types":"^9.6.1",react:"^18.0.0","react-dom":"^18.0.0","react-reconciler":"0.29.0","react-spring":"^9.6.1"},devDependencies:{"@babel/cli":"^7.20.7","@babel/core":"^7.20.7","@babel/eslint-parser":"^7.19.1","@babel/plugin-transform-runtime":"^7.19.6","@babel/preset-env":"^7.20.2","@babel/preset-react":"^7.18.6","@nrwl/nx-cloud":"latest","@pixi/eslint-config":"^4.0.1","@rollup/plugin-alias":"^4.0.2","@rollup/plugin-babel":"^6.0.3","@rollup/plugin-commonjs":"^24.0.0","@rollup/plugin-json":"^6.0.0","@rollup/plugin-node-resolve":"^15.0.1","@rollup/plugin-replace":"^5.0.2","@rollup/plugin-terser":"^0.2.1","@rollup/plugin-typescript":"^10.0.1","@types/jest":"^29.2.4","@types/react":"17.0.15","@types/react-dom":"17.0.9","@types/react-reconciler":"0.28.2","babel-jest":"^29.3.1","babel-plugin-module-resolver":"4.1.0","cross-env":"^7.0.3",eslint:"^8.29.0","eslint-plugin-react":"^7.31.11",husky:"^8.0.2",jest:"^29.3.1","jest-environment-jsdom":"^29.3.1","jest-extended":"^3.2.0","jest-watch-typeahead":"^2.2.1",lerna:"^6.0.3","lint-staged":"^13.1.0",nx:"15.3.0",rimraf:"^3.0.2",rollup:"^3.7.0","rollup-plugin-filesize":"^9.1.2","rollup-plugin-visualizer":"^5.9.0","ts-jest":"^29.0.3","ts-node":"^10.9.1",typescript:"^4.9.4"}},EL={},hx={get exports(){return EL},set exports(t){EL=t}};(function(){var t,e,n,r,i,s;typeof performance<"u"&&performance!==null&&performance.now?hx.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(hx.exports=function(){return(t()-i)/1e6},e=process.hrtime,r=(t=function(){var o;return 1e9*(o=e())[0]+o[1]})(),s=1e9*process.uptime(),i=r-s):Date.now?(hx.exports=function(){return Date.now()-n},n=Date.now()):(hx.exports=function(){return new Date().getTime()-n},n=new Date().getTime())}).call(rLe);var A6,rm={},oh={};({get exports(){return rm},set exports(t){rm=t}}).exports=(A6||(A6=1,oh.ConcurrentRoot=1,oh.ContinuousEventPriority=4,oh.DefaultEventPriority=16,oh.DiscreteEventPriority=1,oh.IdleEventPriority=536870912,oh.LegacyRoot=0),oh);var OLe={};function FP(t,e){t.addChild&&(t.addChild(e),typeof e.didMount=="function"&&e.didMount(e,t))}function kq(t,e){var n,r,i;(n=t.willUnmount)===null||n===void 0||n.call(t,t,e),((r=t.config)===null||r===void 0?void 0:r.destroyChildren)!==!1&&(i=t.children)!==null&&i!==void 0&&i.length&&$c(t.children).forEach(function(s){kq(s,t)})}function R6(t,e){var n;kq(e,t),t.removeChild(e);var r=(n=e.config)!==null&&n!==void 0?n:{},i=r.destroy,s=i===void 0||i,o=r.destroyChildren,a=o===void 0||o,l=r.destroyTexture,c=l!==void 0&&l,u=r.destroyBaseTexture,d=u!==void 0&&u;s&&e.destroy({children:a,texture:c,baseTexture:d})}function P6(t,e,n){Dr(e!==n,"pixi-react: PixiFiber cannot insert node before itself"),t.children.indexOf(e)!==-1&&t.removeChild(e);var r=t.getChildIndex(n);t.addChildAt(e,r)}var I6=null,$a=LLe({getRootHostContext:function(){return OLe},getChildHostContext:function(t){return t},getChildHostContextForEventComponent:function(t){return t},getPublicInstance:function(t){return t},getCurrentEventPriority:function(){return function(){var t,e;if(typeof window>"u")return rm.DefaultEventPriority;switch((t=window)===null||t===void 0||(e=t.event)===null||e===void 0?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return rm.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return rm.ContinuousEventPriority;default:return rm.DefaultEventPriority}}()},prepareForCommit:function(){return null},resetAfterCommit:function(){},createInstance:function(t){var e,n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,s=ALe[t];if(typeof s=="function"&&(e=s(i,r)),!e){var o=Lq[t];o&&((e=o.create(r,{root:i})).didMount=o.didMount?o.didMount.bind(e):void 0,e.willUnmount=o.willUnmount?o.willUnmount.bind(e):void 0,e.applyProps=o.applyProps?o.applyProps.bind(e):void 0,e.config=o.config)}return e&&(e.__reactpixi={root:i},(typeof((n=e)===null||n===void 0?void 0:n.applyProps)=="function"?e.applyProps:Wl)(e,{},r)),e},hideInstance:function(t){t.visible=!1},unhideInstance:function(t,e){var n=e==null||!e.hasOwnProperty("visible")||e.visible;t.visible=n},finalizeInitialChildren:function(t,e,n){return!1},prepareUpdate:function(t,e,n,r,i,s){return I6=function(o,a,l,c){var u=null;for(var d in l)!c.hasOwnProperty(d)&&l.hasOwnProperty(d)&&l[d]!==null&&(d===yL||(u||(u=[]),u.push(d,null)));for(var h in c){var f=c[h],p=l!==null?l[h]:void 0;!c.hasOwnProperty(h)||f===p||f===null&&p===null||h===yL||(u||(u=[]),u.push(h,f))}return u}(0,0,n,r)},shouldSetTextContent:function(t,e){return!1},shouldDeprioritizeSubtree:function(t,e){var n=e.alpha===void 0||e.alpha>0,r=e.renderable===void 0||e.renderable===!0,i=e.visible===void 0||e.visible===!0;return!(n&&r&&i)},createTextInstance:function(t,e,n){Dr(!1,'pixi-react: Error trying to add text node "'.concat(t,'"'),"PixiFiber does not support text nodes as children of a Pixi component. To pass a string value to your component, use a property other than children. If you wish to display some text, you can use &lt;Text text={string} /&gt; instead.")},unhideTextInstance:function(t,e){},mountEventComponent:function(){},updateEventComponent:function(){},handleEventTarget:function(){},scheduleTimeout:setTimeout,cancelTimeout:clearTimeout,noTimeout:-1,warnsIfNotActing:!1,now:EL,isPrimaryRenderer:!1,supportsMutation:!0,supportsPersistence:!1,supportsHydration:!1,supportsMicrotasks:!0,scheduleMicrotask:queueMicrotask,appendInitialChild:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=FP.apply(null,r);return(t=r[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendInitialChild"}),s},appendChild:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=FP.apply(null,r);return(t=r[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChild"}),s},appendChildToContainer:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=FP.apply(null,r);return(t=r[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"appendChildToContainer"}),s},removeChild:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=R6.apply(null,r);return(t=r[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChild"}),s},removeChildFromContainer:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=R6.apply(null,r);return(t=r[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"removeChildFromContainer"}),s},insertBefore:P6,insertInContainerBefore:function(){for(var t,e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=P6.apply(null,r);return(t=r[0].__reactpixi)===null||t===void 0||(e=t.root)===null||e===void 0||e.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"insertInContainerBefore"}),s},commitUpdate:function(t,e,n,r,i){var s,o,a=t&&t.applyProps;typeof a!="function"&&(a=Wl),(a(t,r,i)||I6)&&((s=t.__reactpixi)===null||s===void 0||(o=s.root)===null||o===void 0||o.emit("__REACT_PIXI_REQUEST_RENDER__",{detail:"commitUpdate"}))},commitMount:function(t,e,n,r,i){},commitTextUpdate:function(t,e,n){},resetTextContent:function(t){},clearContainer:function(t){},getFundamentalComponentInstance:function(t){throw new Error("Not yet implemented.")},mountFundamentalComponent:function(t){throw new Error("Not yet implemented.")},shouldUpdateFundamentalComponent:function(t){throw new Error("Not yet implemented.")},unmountFundamentalComponent:function(t){throw new Error("Not yet implemented.")},getInstanceFromNode:function(t){throw new Error("Not yet implemented.")},isOpaqueHydratingObject:function(t){throw new Error("Not yet implemented")},makeOpaqueHydratingObject:function(t){throw new Error("Not yet implemented.")},makeClientIdInDEV:function(t){throw new Error("Not yet implemented")},beforeActiveInstanceBlur:function(t){},afterActiveInstanceBlur:function(){},detachDeletedInstance:function(){},preparePortalMount:function(t){}}),kLe=Oq.dependencies["react-dom"].replace(/[^0-9.]/g,""),NLe=Oq.name;$a.injectIntoDevTools({bundleType:0,version:kLe,rendererPackageName:NLe,findHostInstanceByFiber:$a.findHostInstance});var dd=new Map;function Nq(t){if(Dr(qi.prototype.isPrototypeOf(t),"Invalid argument `container`, expected instance of `PIXI.Container`."),dd.has(t)){var e=dd.get(t).pixiFiberContainer;$a.updateContainer(null,e,void 0,function(){dd.delete(t)})}}function Dq(t){Dr(qi.prototype.isPrototypeOf(t),"Invalid argument `container`, expected instance of `PIXI.Container`.");var e=dd.get(t);if(Dr(!e,"Pixi React: createRoot should only be called once"),!e){var n=$a.createContainer(t);e={pixiFiberContainer:n,reactRoot:{render:function(r){return $a.updateContainer(r,n,void 0),$a.getPublicRootInstance(n)},unmount:function(){Nq(t),dd.delete(t)}}},dd.set(t,e)}return e.reactRoot}function DLe(t,e,n){var r;return console.warn("Pixi React Deprecation Warning: render is deprecated, use createRoot instead"),n!==void 0&&console.warn("Pixi React Deprecation Warning: render callback no longer exists in React 18"),dd.has(e)?r=dd.get(e).reactRoot:r=Dq(e),r.render(t)}function BLe(t){Nq(t)}function qy(){return qy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qy.apply(this,arguments)}function FLe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ULe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Pq(r.key),r)}}function hc(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Yw(t,e){return Yw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Yw(t,e)}function zLe(t,e){if(e&&(wo(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hc(t)}function Kw(t){return Kw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Kw(t)}var gC=Gn.createContext(null),Bq=gC.Provider,Fq=gC.Consumer,$Le=function(t){var e=Gn.forwardRef(function(n,r){return Gn.createElement(Fq,null,function(i){return Gn.createElement(t,qy({},n,{ref:r,app:i}))})});return e.displayName="withPIXIApp(".concat(t.displayName||t.name,")"),e};function jLe(t){var e=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var n,r=Kw(t);if(e){var i=Kw(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return zLe(this,n)}}function M6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fx(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?M6(Object(n),!0).forEach(function(r){jr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):M6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var L6=function(){},Uq={width:ir.number,height:ir.number,onMount:ir.func,onUnmount:ir.func,raf:ir.bool,renderOnComponentChange:ir.bool,children:ir.node,options:ir.shape({autoStart:ir.bool,width:ir.number,height:ir.number,useContextAlpha:ir.bool,backgroundAlpha:ir.number,autoDensity:ir.bool,antialias:ir.bool,preserveDrawingBuffer:ir.bool,resolution:ir.number,forceCanvas:ir.bool,backgroundColor:ir.number,clearBeforeRender:ir.bool,powerPreference:ir.string,sharedTicker:ir.bool,sharedLoader:ir.bool,resizeTo:function(t,e){var n=t[e];n&&Dr(n===window||n instanceof HTMLElement,"Invalid prop `resizeTo` of type ".concat(wo(n),", expect `window` or an `HTMLElement`."))},view:function(t,e,n){var r=t[e];r&&Dr(r instanceof HTMLCanvasElement,"Invalid prop `view` of type ".concat(wo(r),", supplied to ").concat(n,", expected `<canvas> Element`"))}})},GLe={width:800,height:600,onMount:L6,onUnmount:L6,raf:!0,renderOnComponentChange:!0},wL=function(t){(function(s,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(o&&o.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),Object.defineProperty(s,"prototype",{writable:!1}),o&&Yw(s,o)})(i,Gn.Component);var e,n,r=jLe(i);function i(){var s;FLe(this,i);for(var o=arguments.length,a=new Array(o),l=0;l<o;l++)a[l]=arguments[l];return jr(hc(s=r.call.apply(r,[this].concat(a))),"_canvas",null),jr(hc(s),"_mediaQuery",null),jr(hc(s),"_ticker",null),jr(hc(s),"_needsUpdate",!0),jr(hc(s),"app",null),jr(hc(s),"updateSize",function(){var c=s.props,u=c.width,d=c.height,h=c.options;h!=null&&h.resolution||(s.app.renderer.resolution=window.devicePixelRatio,s.resetInteractionManager()),s.app.renderer.resize(u,d)}),jr(hc(s),"needsRenderUpdate",function(){s._needsUpdate=!0}),jr(hc(s),"renderStage",function(){var c=s.props,u=c.renderOnComponentChange;!c.raf&&u&&s._needsUpdate&&(s._needsUpdate=!1,s.app.renderer.render(s.app.stage))}),s}return e=i,(n=[{key:"componentDidMount",value:function(){var s=this.props,o=s.onMount,a=s.width,l=s.height,c=s.options,u=s.raf,d=s.renderOnComponentChange;this.app=new Y1(fx(fx({width:a,height:l,view:this._canvas},c),{},{autoDensity:(c==null?void 0:c.autoDensity)!==!1})),this.app.ticker.autoStart=!1,this.app.ticker[u?"start":"stop"](),this.app.stage.__reactpixi={root:this.app.stage},this.mountNode=$a.createContainer(this.app.stage),$a.updateContainer(this.getChildren(),this.mountNode,this),o(this.app),c!=null&&c.autoDensity&&window.matchMedia&&(c==null?void 0:c.resolution)===void 0&&(this._mediaQuery=window.matchMedia("(-webkit-min-device-pixel-ratio: 1.3), (min-resolution: 120dpi)"),this._mediaQuery.addListener(this.updateSize)),d&&!u&&(this._ticker=new Qr,this._ticker.autoStart=!0,this._ticker.add(this.renderStage),this.app.stage.on("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate)),this.updateSize(),this.renderStage()}},{key:"componentDidUpdate",value:function(s,o,a){var l,c=this.props,u=c.width,d=c.height,h=c.raf,f=c.renderOnComponentChange,p=c.options;(p==null?void 0:p.resolution)!==void 0&&(s==null?void 0:s.options.resolution)!==(p==null?void 0:p.resolution)&&(this.app.renderer.resolution=p.resolution,this.resetInteractionManager()),s.height===d&&s.width===u&&((l=s.options)===null||l===void 0?void 0:l.resolution)===(p==null?void 0:p.resolution)||this.updateSize(),s.raf!==h&&this.app.ticker[h?"start":"stop"](),$a.updateContainer(this.getChildren(),this.mountNode,this),s.width===u&&s.height===d&&s.raf===h&&s.renderOnComponentChange===f&&s.options===p||(this._needsUpdate=!0,this.renderStage())}},{key:"resetInteractionManager",value:function(){var s=this.app.renderer.plugins.interaction;s!=null&&s.resolution&&(s.resolution=this.app.renderer.resolution)}},{key:"getChildren",value:function(){var s=this.props.children;return Gn.createElement(Bq,{value:this.app},s)}},{key:"componentDidCatch",value:function(s,o){console.error("Error occurred in `Stage`."),console.error(s),console.error(o)}},{key:"componentWillUnmount",value:function(){this.props.onUnmount(this.app),this._ticker&&(this._ticker.remove(this.renderStage),this._ticker.destroy()),this.app.stage.off("__REACT_PIXI_REQUEST_RENDER__",this.needsRenderUpdate),$a.updateContainer(null,this.mountNode,this),this._mediaQuery&&(this._mediaQuery.removeListener(this.updateSize),this._mediaQuery=null),this.app.destroy()}},{key:"render",value:function(){var s,o,a=this,l=this.props.options;return l&&l.view?(Dr(l.view instanceof HTMLCanvasElement,"options.view needs to be a `HTMLCanvasElement`"),null):Gn.createElement("canvas",qy({},(s=this.props,o=[].concat($c(Object.keys(Uq)),$c(Object.keys(_L))),Object.keys(s).filter(function(c){return!o.includes(c)}).reduce(function(c,u){return fx(fx({},c),{},jr({},u,s[u]))},{})),{ref:function(c){return a._canvas=c}}))}}])&&ULe(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();wL.propTypes=Uq,wL.defaultProps=GLe;var HLe=wL;function zq(){var t=A.useContext(gC);return Dr(t instanceof Y1,"No Context found with `%s`. Make sure to wrap component with `%s`","PIXI.Application","AppProvider"),t}function VLe(t){var e=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1],n=zq();Dr(typeof t=="function","`useTick` needs a callback function."),Dr(n instanceof Y1,"No Context found with `%s`. Make sure to wrap component with `%s`","PIXI.Application","AppProvider");var r=A.useRef(null);A.useEffect(function(){r.current=t},[t]),A.useEffect(function(){if(e){var i=function(s){return r.current.apply(n.ticker,[s,n.ticker])};return n.ticker.add(i),function(){n.ticker&&n.ticker.remove(i)}}},[e])}function WLe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function TL(t,e,n){return TL=WLe()?Reflect.construct.bind():function(r,i,s){var o=[null];o.push.apply(o,i);var a=new(Function.bind.apply(r,o));return s&&Yw(a,s.prototype),a},TL.apply(null,arguments)}var XLe=["children","apply"];function O6(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function px(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?O6(Object(n),!0).forEach(function(r){jr(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):O6(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}var YLe=function(t,e){Dr(wo(e)==="object","Second argument needs to be an indexed object with { prop: Filter }");var n=Object.keys(e),r=function(i){var s=i.children,o=i.apply,a=$d(i,XLe),l=A.useRef(A.useMemo(function(){return n.map(function(d){var h,f=(a==null||(h=a[d])===null||h===void 0?void 0:h.construct)||[];return TL(e[d],$c(f))})},[n])),c=A.useMemo(function(){return n.reduce(function(d,h,f){return px(px({},d),{},jr({},h,l.current[f]))},{})},[n]),u=A.useMemo(function(){return Object.keys(a).filter(Mq(Iq(n))).reduce(function(d,h){return px(px({},d),{},jr({},h,a[h]))},{})},[a,n]);return n.forEach(function(d,h){return Object.assign(l.current[h],a[d])}),o&&function(){for(var d=arguments.length,h=new Array(d),f=0;f<d;f++)h[f]=arguments[f];return h.every(function(p){return typeof p=="function"})}(o)&&o.call(t,c),Gn.createElement(t,qy({},u,{filters:l.current}),s)};return r.displayName="FilterWrapper",r.propTypes={children:ir.node,apply:ir.func},r},KLe=Qs.BitmapText,qLe=Qs.Container,ZLe=Qs.Graphics,QLe=Qs.NineSlicePlane,JLe=Qs.ParticleContainer,eOe=Qs.Sprite,tOe=Qs.AnimatedSprite,nOe=Qs.Text,rOe=Qs.TilingSprite,iOe=Qs.SimpleMesh,sOe=Qs.SimpleRope;const oOe=Object.freeze(Object.defineProperty({__proto__:null,AnimatedSprite:tOe,AppConsumer:Fq,AppContext:gC,AppProvider:Bq,BitmapText:KLe,Container:qLe,Graphics:ZLe,NineSlicePlane:QLe,ParticleContainer:JLe,PixiComponent:RLe,PixiFiber:$a,SimpleMesh:iOe,SimpleRope:sOe,Sprite:eOe,Stage:HLe,TYPES:Qs,Text:nOe,TilingSprite:rOe,applyDefaultProps:Wl,createRoot:Dq,eventHandlers:Xw,render:DLe,unmountComponentAtNode:BLe,useApp:zq,useTick:VLe,withFilters:YLe,withPixiApp:$Le},Symbol.toStringTag,{value:"Module"})),aOe=In(oOe);EY.exports=aOe;var fn=EY.exports,lOe=Object.defineProperty,cOe=(t,e,n)=>e in t?lOe(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Fe=(t,e,n)=>(cOe(t,typeof e!="symbol"?e+"":e,n),n);class va{constructor(e){Fe(this,"parent"),Fe(this,"paused"),this.parent=e,this.paused=!1}destroy(){}down(e){return!1}move(e){return!1}up(e){return!1}wheel(e){return!1}update(e){}resize(){}reset(){}pause(){this.paused=!0}resume(){this.paused=!1}}var uOe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},$q={exports:{}};(function(t,e){(function(){var n,r;r=function(i){return t.exports=i},n={linear:function(i,s,o,a){return o*i/a+s},easeInQuad:function(i,s,o,a){return o*(i/=a)*i+s},easeOutQuad:function(i,s,o,a){return-o*(i/=a)*(i-2)+s},easeInOutQuad:function(i,s,o,a){return(i/=a/2)<1?o/2*i*i+s:-o/2*(--i*(i-2)-1)+s},easeInCubic:function(i,s,o,a){return o*(i/=a)*i*i+s},easeOutCubic:function(i,s,o,a){return o*((i=i/a-1)*i*i+1)+s},easeInOutCubic:function(i,s,o,a){return(i/=a/2)<1?o/2*i*i*i+s:o/2*((i-=2)*i*i+2)+s},easeInQuart:function(i,s,o,a){return o*(i/=a)*i*i*i+s},easeOutQuart:function(i,s,o,a){return-o*((i=i/a-1)*i*i*i-1)+s},easeInOutQuart:function(i,s,o,a){return(i/=a/2)<1?o/2*i*i*i*i+s:-o/2*((i-=2)*i*i*i-2)+s},easeInQuint:function(i,s,o,a){return o*(i/=a)*i*i*i*i+s},easeOutQuint:function(i,s,o,a){return o*((i=i/a-1)*i*i*i*i+1)+s},easeInOutQuint:function(i,s,o,a){return(i/=a/2)<1?o/2*i*i*i*i*i+s:o/2*((i-=2)*i*i*i*i+2)+s},easeInSine:function(i,s,o,a){return-o*Math.cos(i/a*(Math.PI/2))+o+s},easeOutSine:function(i,s,o,a){return o*Math.sin(i/a*(Math.PI/2))+s},easeInOutSine:function(i,s,o,a){return-o/2*(Math.cos(Math.PI*i/a)-1)+s},easeInExpo:function(i,s,o,a){return i===0?s:o*Math.pow(2,10*(i/a-1))+s},easeOutExpo:function(i,s,o,a){return i===a?s+o:o*(-Math.pow(2,-10*i/a)+1)+s},easeInOutExpo:function(i,s,o,a){return(i/=a/2)<1?o/2*Math.pow(2,10*(i-1))+s:o/2*(-Math.pow(2,-10*--i)+2)+s},easeInCirc:function(i,s,o,a){return-o*(Math.sqrt(1-(i/=a)*i)-1)+s},easeOutCirc:function(i,s,o,a){return o*Math.sqrt(1-(i=i/a-1)*i)+s},easeInOutCirc:function(i,s,o,a){return(i/=a/2)<1?-o/2*(Math.sqrt(1-i*i)-1)+s:o/2*(Math.sqrt(1-(i-=2)*i)+1)+s},easeInElastic:function(i,s,o,a){var l,c,u;return u=1.70158,c=0,l=o,i===0||(i/=a),c||(c=a*.3),l<Math.abs(o)?(l=o,u=c/4):u=c/(2*Math.PI)*Math.asin(o/l),-(l*Math.pow(2,10*(i-=1))*Math.sin((i*a-u)*(2*Math.PI)/c))+s},easeOutElastic:function(i,s,o,a){var l,c,u;return u=1.70158,c=0,l=o,i===0||(i/=a),c||(c=a*.3),l<Math.abs(o)?(l=o,u=c/4):u=c/(2*Math.PI)*Math.asin(o/l),l*Math.pow(2,-10*i)*Math.sin((i*a-u)*(2*Math.PI)/c)+o+s},easeInOutElastic:function(i,s,o,a){var l,c,u;return u=1.70158,c=0,l=o,i===0||(i/=a/2),c||(c=a*(.3*1.5)),l<Math.abs(o)?(l=o,u=c/4):u=c/(2*Math.PI)*Math.asin(o/l),i<1?-.5*(l*Math.pow(2,10*(i-=1))*Math.sin((i*a-u)*(2*Math.PI)/c))+s:l*Math.pow(2,-10*(i-=1))*Math.sin((i*a-u)*(2*Math.PI)/c)*.5+o+s},easeInBack:function(i,s,o,a,l){return l===void 0&&(l=1.70158),o*(i/=a)*i*((l+1)*i-l)+s},easeOutBack:function(i,s,o,a,l){return l===void 0&&(l=1.70158),o*((i=i/a-1)*i*((l+1)*i+l)+1)+s},easeInOutBack:function(i,s,o,a,l){return l===void 0&&(l=1.70158),(i/=a/2)<1?o/2*(i*i*(((l*=1.525)+1)*i-l))+s:o/2*((i-=2)*i*(((l*=1.525)+1)*i+l)+2)+s},easeInBounce:function(i,s,o,a){var l;return l=n.easeOutBounce(a-i,0,o,a),o-l+s},easeOutBounce:function(i,s,o,a){return(i/=a)<1/2.75?o*(7.5625*i*i)+s:i<2/2.75?o*(7.5625*(i-=1.5/2.75)*i+.75)+s:i<2.5/2.75?o*(7.5625*(i-=2.25/2.75)*i+.9375)+s:o*(7.5625*(i-=2.625/2.75)*i+.984375)+s},easeInOutBounce:function(i,s,o,a){var l;return i<a/2?(l=n.easeInBounce(i*2,0,o,a),l*.5+s):(l=n.easeOutBounce(i*2-a,0,o,a),l*.5+o*.5+s)}},r(n)}).call(uOe)})($q);const k6=$q.exports;function vC(t,e){if(t){if(typeof t=="function")return t;if(typeof t=="string")return k6[t]}else return k6[e]}const dOe={removeOnInterrupt:!1,ease:"linear",time:1e3};class hOe extends va{constructor(e,n={}){super(e),Fe(this,"options"),Fe(this,"startX"),Fe(this,"startY"),Fe(this,"deltaX"),Fe(this,"deltaY"),Fe(this,"keepCenter"),Fe(this,"startWidth",null),Fe(this,"startHeight",null),Fe(this,"deltaWidth",null),Fe(this,"deltaHeight",null),Fe(this,"width",null),Fe(this,"height",null),Fe(this,"time",0),this.options=Object.assign({},dOe,n),this.options.ease=vC(this.options.ease),this.setupPosition(),this.setupZoom(),this.time=0}setupPosition(){typeof this.options.position<"u"?(this.startX=this.parent.center.x,this.startY=this.parent.center.y,this.deltaX=this.options.position.x-this.parent.center.x,this.deltaY=this.options.position.y-this.parent.center.y,this.keepCenter=!1):this.keepCenter=!0}setupZoom(){this.width=null,this.height=null,typeof this.options.scale<"u"?this.width=this.parent.screenWidth/this.options.scale:typeof this.options.scaleX<"u"||typeof this.options.scaleY<"u"?(typeof this.options.scaleX<"u"&&(this.width=this.parent.screenWidth/this.options.scaleX),typeof this.options.scaleY<"u"&&(this.height=this.parent.screenHeight/this.options.scaleY)):(typeof this.options.width<"u"&&(this.width=this.options.width),typeof this.options.height<"u"&&(this.height=this.options.height)),this.width!==null&&(this.startWidth=this.parent.screenWidthInWorldPixels,this.deltaWidth=this.width-this.startWidth),this.height!==null&&(this.startHeight=this.parent.screenHeightInWorldPixels,this.deltaHeight=this.height-this.startHeight)}down(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("animate"),!1}complete(){this.parent.plugins.remove("animate"),this.width!==null&&this.parent.fitWidth(this.width,this.keepCenter,this.height===null),this.height!==null&&this.parent.fitHeight(this.height,this.keepCenter,this.width===null),!this.keepCenter&&this.options.position&&this.parent.moveCenter(this.options.position),this.parent.emit("animate-end",this.parent),this.options.callbackOnComplete&&this.options.callbackOnComplete(this.parent)}update(e){if(this.paused)return;this.time+=e;const n=new Ot(this.parent.scale.x,this.parent.scale.y);if(this.time>=this.options.time){const r=this.parent.width,i=this.parent.height;this.complete(),(r!==this.parent.width||i!==this.parent.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:n,type:"animate"})}else{const r=this.options.ease(this.time,0,1,this.options.time);if(this.width!==null){const i=this.startWidth,s=this.deltaWidth;this.parent.fitWidth(i+s*r,this.keepCenter,this.height===null)}if(this.height!==null){const i=this.startHeight,s=this.deltaHeight;this.parent.fitHeight(i+s*r,this.keepCenter,this.width===null)}if(this.width===null?this.parent.scale.x=this.parent.scale.y:this.height===null&&(this.parent.scale.y=this.parent.scale.x),!this.keepCenter){const i=this.startX,s=this.startY,o=this.deltaX,a=this.deltaY,l=new Ot(this.parent.x,this.parent.y);this.parent.moveCenter(i+o*r,s+a*r),this.parent.emit("moved",{viewport:this.parent,original:l,type:"animate"})}(this.width||this.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:n,type:"animate"})}}}const fOe={sides:"all",friction:.5,time:150,ease:"easeInOutSine",underflow:"center",bounceBox:null};class pOe extends va{constructor(e,n={}){super(e),Fe(this,"options"),Fe(this,"left"),Fe(this,"top"),Fe(this,"right"),Fe(this,"bottom"),Fe(this,"underflowX"),Fe(this,"underflowY"),Fe(this,"ease"),Fe(this,"toX"),Fe(this,"toY"),this.options=Object.assign({},fOe,n),this.ease=vC(this.options.ease,"easeInOutSine"),this.options.sides?this.options.sides==="all"?this.top=this.bottom=this.left=this.right=!0:this.options.sides==="horizontal"?(this.right=this.left=!0,this.top=this.bottom=!1):this.options.sides==="vertical"?(this.left=this.right=!1,this.top=this.bottom=!0):(this.top=this.options.sides.indexOf("top")!==-1,this.bottom=this.options.sides.indexOf("bottom")!==-1,this.left=this.options.sides.indexOf("left")!==-1,this.right=this.options.sides.indexOf("right")!==-1):this.left=this.top=this.right=this.bottom=!1;const r=this.options.underflow.toLowerCase();r==="center"?(this.underflowX=0,this.underflowY=0):(this.underflowX=r.indexOf("left")!==-1?-1:r.indexOf("right")!==-1?1:0,this.underflowY=r.indexOf("top")!==-1?-1:r.indexOf("bottom")!==-1?1:0),this.reset()}isActive(){return this.toX!==null||this.toY!==null}down(){return this.toX=this.toY=null,!1}up(){return this.bounce(),!1}update(e){if(!this.paused){if(this.bounce(),this.toX){const n=this.toX;n.time+=e,this.parent.emit("moved",{viewport:this.parent,type:"bounce-x"}),n.time>=this.options.time?(this.parent.x=n.end,this.toX=null,this.parent.emit("bounce-x-end",this.parent)):this.parent.x=this.ease(n.time,n.start,n.delta,this.options.time)}if(this.toY){const n=this.toY;n.time+=e,this.parent.emit("moved",{viewport:this.parent,type:"bounce-y"}),n.time>=this.options.time?(this.parent.y=n.end,this.toY=null,this.parent.emit("bounce-y-end",this.parent)):this.parent.y=this.ease(n.time,n.start,n.delta,this.options.time)}}}calcUnderflowX(){let e;switch(this.underflowX){case-1:e=0;break;case 1:e=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:e=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}return e}calcUnderflowY(){let e;switch(this.underflowY){case-1:e=0;break;case 1:e=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:e=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}return e}oob(){const e=this.options.bounceBox;if(e){const n=typeof e.x>"u"?0:e.x,r=typeof e.y>"u"?0:e.y,i=typeof e.width>"u"?this.parent.worldWidth:e.width,s=typeof e.height>"u"?this.parent.worldHeight:e.height;return{left:this.parent.left<n,right:this.parent.right>i,top:this.parent.top<r,bottom:this.parent.bottom>s,topLeft:new Ot(n*this.parent.scale.x,r*this.parent.scale.y),bottomRight:new Ot(i*this.parent.scale.x-this.parent.screenWidth,s*this.parent.scale.y-this.parent.screenHeight)}}return{left:this.parent.left<0,right:this.parent.right>this.parent.worldWidth,top:this.parent.top<0,bottom:this.parent.bottom>this.parent.worldHeight,topLeft:new Ot(0,0),bottomRight:new Ot(this.parent.worldWidth*this.parent.scale.x-this.parent.screenWidth,this.parent.worldHeight*this.parent.scale.y-this.parent.screenHeight)}}bounce(){var e,n;if(this.paused)return;let r,i=this.parent.plugins.get("decelerate",!0);i&&(i.x||i.y)&&(i.x&&i.percentChangeX===((e=i.options)==null?void 0:e.friction)||i.y&&i.percentChangeY===((n=i.options)==null?void 0:n.friction))&&(r=this.oob(),(r.left&&this.left||r.right&&this.right)&&(i.percentChangeX=this.options.friction),(r.top&&this.top||r.bottom&&this.bottom)&&(i.percentChangeY=this.options.friction));const s=this.parent.plugins.get("drag",!0)||{},o=this.parent.plugins.get("pinch",!0)||{};if(i=i||{},!(s!=null&&s.active)&&!(o!=null&&o.active)&&(!this.toX||!this.toY)&&(!i.x||!i.y)){r=r||this.oob();const a=r.topLeft,l=r.bottomRight;if(!this.toX&&!i.x){let c=null;r.left&&this.left?c=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-a.x:r.right&&this.right&&(c=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-l.x),c!==null&&this.parent.x!==c&&(this.toX={time:0,start:this.parent.x,delta:c-this.parent.x,end:c},this.parent.emit("bounce-x-start",this.parent))}if(!this.toY&&!i.y){let c=null;r.top&&this.top?c=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-a.y:r.bottom&&this.bottom&&(c=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-l.y),c!==null&&this.parent.y!==c&&(this.toY={time:0,start:this.parent.y,delta:c-this.parent.y,end:c},this.parent.emit("bounce-y-start",this.parent))}}}reset(){this.toX=this.toY=null,this.bounce()}}const mOe={left:!1,right:!1,top:!1,bottom:!1,direction:null,underflow:"center"};class gOe extends va{constructor(e,n={}){super(e),Fe(this,"options"),Fe(this,"last"),Fe(this,"noUnderflow"),Fe(this,"underflowX"),Fe(this,"underflowY"),this.options=Object.assign({},mOe,n),this.options.direction&&(this.options.left=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.right=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.top=this.options.direction==="y"||this.options.direction==="all"?!0:null,this.options.bottom=this.options.direction==="y"||this.options.direction==="all"?!0:null),this.parseUnderflow(),this.last={x:null,y:null,scaleX:null,scaleY:null},this.update()}parseUnderflow(){const e=this.options.underflow.toLowerCase();e==="none"?this.noUnderflow=!0:e==="center"?(this.underflowX=this.underflowY=0,this.noUnderflow=!1):(this.underflowX=e.indexOf("left")!==-1?-1:e.indexOf("right")!==-1?1:0,this.underflowY=e.indexOf("top")!==-1?-1:e.indexOf("bottom")!==-1?1:0,this.noUnderflow=!1)}move(){return this.update(),!1}update(){if(this.paused||this.parent.x===this.last.x&&this.parent.y===this.last.y&&this.parent.scale.x===this.last.scaleX&&this.parent.scale.y===this.last.scaleY)return;const e=new Ot(this.parent.x,this.parent.y),n=this.parent.plugins.decelerate||{};if(this.options.left!==null||this.options.right!==null){let r=!1;if(!this.noUnderflow&&this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x!==0&&(this.parent.x=0,r=!0);break;case 1:this.parent.x!==this.parent.screenWidth-this.parent.screenWorldWidth&&(this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth,r=!0);break;default:this.parent.x!==(this.parent.screenWidth-this.parent.screenWorldWidth)/2&&(this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2,r=!0)}else this.options.left!==null&&this.parent.left<(this.options.left===!0?0:this.options.left)&&(this.parent.x=-(this.options.left===!0?0:this.options.left)*this.parent.scale.x,n.x=0,r=!0),this.options.right!==null&&this.parent.right>(this.options.right===!0?this.parent.worldWidth:this.options.right)&&(this.parent.x=-(this.options.right===!0?this.parent.worldWidth:this.options.right)*this.parent.scale.x+this.parent.screenWidth,n.x=0,r=!0);r&&this.parent.emit("moved",{viewport:this.parent,original:e,type:"clamp-x"})}if(this.options.top!==null||this.options.bottom!==null){let r=!1;if(!this.noUnderflow&&this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y!==0&&(this.parent.y=0,r=!0);break;case 1:this.parent.y!==this.parent.screenHeight-this.parent.screenWorldHeight&&(this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight,r=!0);break;default:this.parent.y!==(this.parent.screenHeight-this.parent.screenWorldHeight)/2&&(this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2,r=!0)}else this.options.top!==null&&this.parent.top<(this.options.top===!0?0:this.options.top)&&(this.parent.y=-(this.options.top===!0?0:this.options.top)*this.parent.scale.y,n.y=0,r=!0),this.options.bottom!==null&&this.parent.bottom>(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)&&(this.parent.y=-(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)*this.parent.scale.y+this.parent.screenHeight,n.y=0,r=!0);r&&this.parent.emit("moved",{viewport:this.parent,original:e,type:"clamp-y"})}this.last.x=this.parent.x,this.last.y=this.parent.y,this.last.scaleX=this.parent.scale.x,this.last.scaleY=this.parent.scale.y}reset(){this.update()}}const vOe={minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,minScale:null,maxScale:null};class yOe extends va{constructor(e,n={}){super(e),Fe(this,"options"),this.options=Object.assign({},vOe,n),this.clamp()}resize(){this.clamp()}clamp(){if(!this.paused){if(this.options.minWidth||this.options.minHeight||this.options.maxWidth||this.options.maxHeight){let e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight;if(this.options.minWidth!==null&&e<this.options.minWidth){const r=this.parent.scale.x;this.parent.fitWidth(this.options.minWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/r,e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxWidth!==null&&e>this.options.maxWidth){const r=this.parent.scale.x;this.parent.fitWidth(this.options.maxWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/r,e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.minHeight!==null&&n<this.options.minHeight){const r=this.parent.scale.y;this.parent.fitHeight(this.options.minHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/r,e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxHeight!==null&&n>this.options.maxHeight){const r=this.parent.scale.y;this.parent.fitHeight(this.options.maxHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/r,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}}else if(this.options.minScale||this.options.maxScale){const e={x:null,y:null},n={x:null,y:null};if(typeof this.options.minScale=="number")e.x=this.options.minScale,e.y=this.options.minScale;else if(this.options.minScale!==null){const s=this.options.minScale;e.x=typeof s.x>"u"?null:s.x,e.y=typeof s.y>"u"?null:s.y}if(typeof this.options.maxScale=="number")n.x=this.options.maxScale,n.y=this.options.maxScale;else if(this.options.maxScale!==null){const s=this.options.maxScale;n.x=typeof s.x>"u"?null:s.x,n.y=typeof s.y>"u"?null:s.y}let r=this.parent.scale.x,i=this.parent.scale.y;e.x!==null&&r<e.x&&(r=e.x),n.x!==null&&r>n.x&&(r=n.x),e.y!==null&&i<e.y&&(i=e.y),n.y!==null&&i>n.y&&(i=n.y),(r!==this.parent.scale.x||i!==this.parent.scale.y)&&(this.parent.scale.set(r,i),this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"}))}}}reset(){this.clamp()}}const _Oe={friction:.98,bounce:.8,minSpeed:.01},_u=16;class bOe extends va{constructor(e,n={}){super(e),Fe(this,"options"),Fe(this,"x"),Fe(this,"y"),Fe(this,"percentChangeX"),Fe(this,"percentChangeY"),Fe(this,"saved"),Fe(this,"timeSinceRelease"),this.options=Object.assign({},_Oe,n),this.saved=[],this.timeSinceRelease=0,this.reset(),this.parent.on("moved",r=>this.handleMoved(r))}down(){return this.saved=[],this.x=this.y=null,!1}isActive(){return!!(this.x||this.y)}move(){if(this.paused)return!1;const e=this.parent.input.count();return(e===1||e>1&&!this.parent.plugins.get("pinch",!0))&&(this.saved.push({x:this.parent.x,y:this.parent.y,time:performance.now()}),this.saved.length>60&&this.saved.splice(0,30)),!1}handleMoved(e){if(this.saved.length){const n=this.saved[this.saved.length-1];e.type==="clamp-x"&&e.original?n.x===e.original.x&&(n.x=this.parent.x):e.type==="clamp-y"&&e.original&&n.y===e.original.y&&(n.y=this.parent.y)}}up(){if(this.parent.input.count()===0&&this.saved.length){const e=performance.now();for(const n of this.saved)if(n.time>=e-100){const r=e-n.time;this.x=(this.parent.x-n.x)/r,this.y=(this.parent.y-n.y)/r,this.percentChangeX=this.percentChangeY=this.options.friction,this.timeSinceRelease=0;break}}return!1}activate(e){e=e||{},typeof e.x<"u"&&(this.x=e.x,this.percentChangeX=this.options.friction),typeof e.y<"u"&&(this.y=e.y,this.percentChangeY=this.options.friction)}update(e){if(this.paused)return;const n=this.x||this.y,r=this.timeSinceRelease,i=this.timeSinceRelease+e;if(this.x){const s=this.percentChangeX,o=Math.log(s);this.parent.x+=this.x*_u/o*(Math.pow(s,i/_u)-Math.pow(s,r/_u)),this.x*=Math.pow(this.percentChangeX,e/_u)}if(this.y){const s=this.percentChangeY,o=Math.log(s);this.parent.y+=this.y*_u/o*(Math.pow(s,i/_u)-Math.pow(s,r/_u)),this.y*=Math.pow(this.percentChangeY,e/_u)}this.timeSinceRelease+=e,this.x&&this.y?Math.abs(this.x)<this.options.minSpeed&&Math.abs(this.y)<this.options.minSpeed&&(this.x=0,this.y=0):(Math.abs(this.x||0)<this.options.minSpeed&&(this.x=0),Math.abs(this.y||0)<this.options.minSpeed&&(this.y=0)),n&&this.parent.emit("moved",{viewport:this.parent,type:"decelerate"})}reset(){this.x=this.y=null}}const xOe={direction:"all",pressDrag:!0,wheel:!0,wheelScroll:1,reverse:!1,clampWheel:!1,underflow:"center",factor:1,mouseButtons:"all",keyToPress:null,ignoreKeyToPressOnTouch:!1,lineHeight:20,wheelSwapAxes:!1};class EOe extends va{constructor(e,n={}){super(e),Fe(this,"options"),Fe(this,"moved"),Fe(this,"reverse"),Fe(this,"xDirection"),Fe(this,"yDirection"),Fe(this,"keyIsPressed"),Fe(this,"mouse"),Fe(this,"underflowX"),Fe(this,"underflowY"),Fe(this,"last"),Fe(this,"current"),Fe(this,"windowEventHandlers",[]),this.options=Object.assign({},xOe,n),this.moved=!1,this.reverse=this.options.reverse?1:-1,this.xDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="x",this.yDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="y",this.keyIsPressed=!1,this.parseUnderflow(),this.mouseButtons(this.options.mouseButtons),this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(e){const n=i=>{e.includes(i.code)&&(this.keyIsPressed=!0)},r=i=>{e.includes(i.code)&&(this.keyIsPressed=!1)};this.addWindowEventHandler("keyup",r),this.addWindowEventHandler("keydown",n)}addWindowEventHandler(e,n){typeof window>"u"||(window.addEventListener(e,n),this.windowEventHandlers.push({event:e,handler:n}))}destroy(){typeof window>"u"||this.windowEventHandlers.forEach(({event:e,handler:n})=>{window.removeEventListener(e,n)})}mouseButtons(e){!e||e==="all"?this.mouse=[!0,!0,!0]:this.mouse=[e.indexOf("left")!==-1,e.indexOf("middle")!==-1,e.indexOf("right")!==-1]}parseUnderflow(){const e=this.options.underflow.toLowerCase();e==="center"?(this.underflowX=0,this.underflowY=0):(e.includes("left")?this.underflowX=-1:e.includes("right")?this.underflowX=1:this.underflowX=0,e.includes("top")?this.underflowY=-1:e.includes("bottom")?this.underflowY=1:this.underflowY=0)}checkButtons(e){const n=e.pointerType==="mouse",r=this.parent.input.count();return!!((r===1||r>1&&!this.parent.plugins.get("pinch",!0))&&(!n||this.mouse[e.button]))}checkKeyPress(e){return!this.options.keyToPress||this.keyIsPressed||this.options.ignoreKeyToPressOnTouch&&e.data.pointerType==="touch"}down(e){return this.paused||!this.options.pressDrag?!1:this.checkButtons(e)&&this.checkKeyPress(e)?(this.last={x:e.global.x,y:e.global.y},this.current=e.pointerId,!0):(this.last=null,!1)}get active(){return this.moved}move(e){if(this.paused||!this.options.pressDrag)return!1;if(this.last&&this.current===e.data.pointerId){const n=e.global.x,r=e.global.y,i=this.parent.input.count();if(i===1||i>1&&!this.parent.plugins.get("pinch",!0)){const s=n-this.last.x,o=r-this.last.y;if(this.moved||this.xDirection&&this.parent.input.checkThreshold(s)||this.yDirection&&this.parent.input.checkThreshold(o)){const a={x:n,y:r};return this.xDirection&&(this.parent.x+=(a.x-this.last.x)*this.options.factor),this.yDirection&&(this.parent.y+=(a.y-this.last.y)*this.options.factor),this.last=a,this.moved||this.parent.emit("drag-start",{event:e,screen:new Ot(this.last.x,this.last.y),world:this.parent.toWorld(new Ot(this.last.x,this.last.y)),viewport:this.parent}),this.moved=!0,this.parent.emit("moved",{viewport:this.parent,type:"drag"}),!0}}else this.moved=!1}return!1}up(e){if(this.paused)return!1;const n=this.parent.input.touches;if(n.length===1){const r=n[0];return r.last&&(this.last={x:r.last.x,y:r.last.y},this.current=r.id),this.moved=!1,!0}else if(this.last&&this.moved){const r=new Ot(this.last.x,this.last.y);return this.parent.emit("drag-end",{event:e,screen:r,world:this.parent.toWorld(r),viewport:this.parent}),this.last=null,this.moved=!1,!0}return!1}wheel(e){if(this.paused)return!1;if(this.options.wheel){const n=this.parent.plugins.get("wheel",!0);if(!n||!n.options.wheelZoom&&!e.ctrlKey){const r=e.deltaMode?this.options.lineHeight:1,i=[e.deltaX,e.deltaY],[s,o]=this.options.wheelSwapAxes?i.reverse():i;return this.xDirection&&(this.parent.x+=s*r*this.options.wheelScroll*this.reverse),this.yDirection&&(this.parent.y+=o*r*this.options.wheelScroll*this.reverse),this.options.clampWheel&&this.clamp(),this.parent.emit("wheel-scroll",this.parent),this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.options.passiveWheel||e.preventDefault(),this.parent.options.stopPropagation&&e.stopPropagation(),!0}}return!1}resume(){this.last=null,this.paused=!1}clamp(){const e=this.parent.plugins.get("decelerate",!0)||{};if(this.options.clampWheel!=="y")if(this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x=0;break;case 1:this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}else this.parent.left<0?(this.parent.x=0,e.x=0):this.parent.right>this.parent.worldWidth&&(this.parent.x=-this.parent.worldWidth*this.parent.scale.x+this.parent.screenWidth,e.x=0);if(this.options.clampWheel!=="x")if(this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y=0;break;case 1:this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}else this.parent.top<0&&(this.parent.y=0,e.y=0),this.parent.bottom>this.parent.worldHeight&&(this.parent.y=-this.parent.worldHeight*this.parent.scale.y+this.parent.screenHeight,e.y=0)}}const wOe={speed:0,acceleration:null,radius:null};class TOe extends va{constructor(e,n,r={}){super(e),Fe(this,"options"),Fe(this,"target"),Fe(this,"velocity"),this.target=n,this.options=Object.assign({},wOe,r),this.velocity={x:0,y:0}}update(e){if(this.paused)return;const n=this.parent.center;let r=this.target.x,i=this.target.y;if(this.options.radius)if(Math.sqrt(Math.pow(this.target.y-n.y,2)+Math.pow(this.target.x-n.x,2))>this.options.radius){const a=Math.atan2(this.target.y-n.y,this.target.x-n.x);r=this.target.x-Math.cos(a)*this.options.radius,i=this.target.y-Math.sin(a)*this.options.radius}else return;const s=r-n.x,o=i-n.y;if(s||o)if(this.options.speed)if(this.options.acceleration){const a=Math.atan2(i-n.y,r-n.x),l=Math.sqrt(Math.pow(s,2)+Math.pow(o,2));if(l){const c=(Math.pow(this.velocity.x,2)+Math.pow(this.velocity.y,2))/(2*this.options.acceleration);l>c?this.velocity={x:Math.min(this.velocity.x+(this.options.acceleration*e,this.options.speed)),y:Math.min(this.velocity.y+(this.options.acceleration*e,this.options.speed))}:this.velocity={x:Math.max(this.velocity.x-this.options.acceleration*this.options.speed,0),y:Math.max(this.velocity.y-this.options.acceleration*this.options.speed,0)};const u=Math.cos(a)*this.velocity.x,d=Math.sin(a)*this.velocity.y,h=Math.abs(u)>Math.abs(s)?r:n.x+u,f=Math.abs(d)>Math.abs(o)?i:n.y+d;this.parent.moveCenter(h,f),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}else{const a=Math.atan2(i-n.y,r-n.x),l=Math.cos(a)*this.options.speed,c=Math.sin(a)*this.options.speed,u=Math.abs(l)>Math.abs(s)?r:n.x+l,d=Math.abs(c)>Math.abs(o)?i:n.y+c;this.parent.moveCenter(u,d),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}else this.parent.moveCenter(r,i),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}const SOe={radius:null,distance:null,top:null,bottom:null,left:null,right:null,speed:8,reverse:!1,noDecelerate:!1,linear:!1,allowButtons:!1};class COe extends va{constructor(e,n={}){super(e),Fe(this,"options"),Fe(this,"reverse"),Fe(this,"radiusSquared"),Fe(this,"left"),Fe(this,"top"),Fe(this,"right"),Fe(this,"bottom"),Fe(this,"horizontal"),Fe(this,"vertical"),this.options=Object.assign({},SOe,n),this.reverse=this.options.reverse?1:-1,this.radiusSquared=typeof this.options.radius=="number"?Math.pow(this.options.radius,2):null,this.resize()}resize(){const e=this.options.distance;e!==null?(this.left=e,this.top=e,this.right=this.parent.screenWidth-e,this.bottom=this.parent.screenHeight-e):this.options.radius||(this.left=this.options.left,this.top=this.options.top,this.right=this.options.right===null?null:this.parent.screenWidth-this.options.right,this.bottom=this.options.bottom===null?null:this.parent.screenHeight-this.options.bottom)}down(){return this.paused||this.options.allowButtons||(this.horizontal=this.vertical=null),!1}move(e){if(this.paused||e.pointerType!=="mouse"&&e.pointerId!==1||!this.options.allowButtons&&e.buttons!==0)return!1;const n=e.global.x,r=e.global.y;if(this.radiusSquared){const i=this.parent.toScreen(this.parent.center);if(Math.pow(i.x-n,2)+Math.pow(i.y-r,2)>=this.radiusSquared){const s=Math.atan2(i.y-r,i.x-n);this.options.linear?(this.horizontal=Math.round(Math.cos(s))*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.round(Math.sin(s))*this.options.speed*this.reverse*(60/1e3)):(this.horizontal=Math.cos(s)*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.sin(s)*this.options.speed*this.reverse*(60/1e3))}else this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=0}else this.left!==null&&n<this.left?this.horizontal=Number(this.reverse)*this.options.speed*(60/1e3):this.right!==null&&n>this.right?this.horizontal=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateHorizontal(),this.horizontal=0),this.top!==null&&r<this.top?this.vertical=Number(this.reverse)*this.options.speed*(60/1e3):this.bottom!==null&&r>this.bottom?this.vertical=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateVertical(),this.vertical=0);return!1}decelerateHorizontal(){const e=this.parent.plugins.get("decelerate",!0);this.horizontal&&e&&!this.options.noDecelerate&&e.activate({x:this.horizontal*this.options.speed*this.reverse/(1e3/60)})}decelerateVertical(){const e=this.parent.plugins.get("decelerate",!0);this.vertical&&e&&!this.options.noDecelerate&&e.activate({y:this.vertical*this.options.speed*this.reverse/(1e3/60)})}up(){return this.paused||(this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=null),!1}update(){if(!this.paused&&(this.horizontal||this.vertical)){const e=this.parent.center;this.horizontal&&(e.x+=this.horizontal*this.options.speed),this.vertical&&(e.y+=this.vertical*this.options.speed),this.parent.moveCenter(e),this.parent.emit("moved",{viewport:this.parent,type:"mouse-edges"})}}}const AOe={noDrag:!1,percent:1,center:null,factor:1,axis:"all"};class ROe extends va{constructor(e,n={}){super(e),Fe(this,"options"),Fe(this,"active",!1),Fe(this,"pinching",!1),Fe(this,"moved",!1),Fe(this,"lastCenter"),this.options=Object.assign({},AOe,n)}down(){return this.parent.input.count()>=2?(this.active=!0,!0):!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}move(e){if(this.paused||!this.active)return!1;const n=e.global.x,r=e.global.y,i=this.parent.input.touches;if(i.length>=2){const s=i[0],o=i[1],a=s.last&&o.last?Math.sqrt(Math.pow(o.last.x-s.last.x,2)+Math.pow(o.last.y-s.last.y,2)):null;if(s.id===e.pointerId?s.last={x:n,y:r,data:e}:o.id===e.pointerId&&(o.last={x:n,y:r,data:e}),a){let l;const c=new Ot(s.last.x+(o.last.x-s.last.x)/2,s.last.y+(o.last.y-s.last.y)/2);this.options.center||(l=this.parent.toLocal(c));let u=Math.sqrt(Math.pow(o.last.x-s.last.x,2)+Math.pow(o.last.y-s.last.y,2));u=u===0?u=1e-10:u;const d=(1-a/u)*this.options.percent*(this.isAxisX()?this.parent.scale.x:this.parent.scale.y);this.isAxisX()&&(this.parent.scale.x+=d),this.isAxisY()&&(this.parent.scale.y+=d),this.parent.emit("zoomed",{viewport:this.parent,type:"pinch",center:c});const h=this.parent.plugins.get("clamp-zoom",!0);if(h&&h.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const f=this.parent.toGlobal(l);this.parent.x+=(c.x-f.x)*this.options.factor,this.parent.y+=(c.y-f.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})}!this.options.noDrag&&this.lastCenter&&(this.parent.x+=(c.x-this.lastCenter.x)*this.options.factor,this.parent.y+=(c.y-this.lastCenter.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})),this.lastCenter=c,this.moved=!0}else this.pinching||(this.parent.emit("pinch-start",this.parent),this.pinching=!0);return!0}return!1}up(){return this.pinching&&this.parent.input.touches.length<=1?(this.active=!1,this.lastCenter=null,this.pinching=!1,this.moved=!1,this.parent.emit("pinch-end",this.parent),!0):!1}}const POe={topLeft:!1,friction:.8,time:1e3,ease:"easeInOutSine",interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1};class IOe extends va{constructor(e,n,r,i={}){super(e),Fe(this,"options"),Fe(this,"ease"),Fe(this,"x"),Fe(this,"y"),Fe(this,"percent"),Fe(this,"snapping"),Fe(this,"deltaX"),Fe(this,"deltaY"),Fe(this,"startX"),Fe(this,"startY"),this.options=Object.assign({},POe,i),this.ease=vC(i.ease,"easeInOutSine"),this.x=n,this.y=r,this.options.forceStart&&this.snapStart()}snapStart(){this.percent=0,this.snapping={time:0};const e=this.options.topLeft?this.parent.corner:this.parent.center;this.deltaX=this.x-e.x,this.deltaY=this.y-e.y,this.startX=e.x,this.startY=e.y,this.parent.emit("snap-start",this.parent)}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap"):this.options.interrupt&&(this.snapping=null),!1}up(){if(this.parent.input.count()===0){const e=this.parent.plugins.get("decelerate",!0);e&&(e.x||e.y)&&(e.percentChangeX=e.percentChangeY=this.options.friction)}return!1}update(e){if(!this.paused&&!(this.options.interrupt&&this.parent.input.count()!==0))if(this.snapping){const n=this.snapping;n.time+=e;let r,i,s;const o=this.startX,a=this.startY,l=this.deltaX,c=this.deltaY;if(n.time>this.options.time)r=!0,i=o+l,s=a+c;else{const u=this.ease(n.time,0,1,this.options.time);i=o+l*u,s=a+c*u}this.options.topLeft?this.parent.moveCorner(i,s):this.parent.moveCenter(i,s),this.parent.emit("moved",{viewport:this.parent,type:"snap"}),r&&(this.options.removeOnComplete&&this.parent.plugins.remove("snap"),this.parent.emit("snap-end",this.parent),this.snapping=null)}else{const n=this.options.topLeft?this.parent.corner:this.parent.center;(n.x!==this.x||n.y!==this.y)&&this.snapStart()}}}const MOe={width:0,height:0,time:1e3,ease:"easeInOutSine",center:null,interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1,noMove:!1};class LOe extends va{constructor(e,n={}){super(e),Fe(this,"options"),Fe(this,"ease"),Fe(this,"xScale"),Fe(this,"yScale"),Fe(this,"xIndependent"),Fe(this,"yIndependent"),Fe(this,"snapping"),this.options=Object.assign({},MOe,n),this.ease=vC(this.options.ease),this.xIndependent=!1,this.yIndependent=!1,this.xScale=0,this.yScale=0,this.options.width>0&&(this.xScale=e.screenWidth/this.options.width,this.xIndependent=!0),this.options.height>0&&(this.yScale=e.screenHeight/this.options.height,this.yIndependent=!0),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale,this.options.time===0?(e.container.scale.x=this.xScale,e.container.scale.y=this.yScale,this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom")):n.forceStart&&this.createSnapping()}createSnapping(){const e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,r=this.parent.screenWidth/this.xScale,i=this.parent.screenHeight/this.yScale;this.snapping={time:0,startX:e,startY:n,deltaX:r-e,deltaY:i-n},this.parent.emit("snap-zoom-start",this.parent)}resize(){this.snapping=null,this.options.width>0&&(this.xScale=this.parent.screenWidth/this.options.width),this.options.height>0&&(this.yScale=this.parent.screenHeight/this.options.height),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap-zoom"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap-zoom"):this.options.interrupt&&(this.snapping=null),!1}update(e){if(this.paused||this.options.interrupt&&this.parent.input.count()!==0)return;let n;if(!this.options.center&&!this.options.noMove&&(n=this.parent.center),!this.snapping)(this.parent.scale.x!==this.xScale||this.parent.scale.y!==this.yScale)&&this.createSnapping();else if(this.snapping){const r=this.snapping;if(r.time+=e,r.time>=this.options.time)this.parent.scale.set(this.xScale,this.yScale),this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom"),this.parent.emit("snap-zoom-end",this.parent),this.snapping=null;else{const s=this.snapping,o=this.ease(s.time,s.startX,s.deltaX,this.options.time),a=this.ease(s.time,s.startY,s.deltaY,this.options.time);this.parent.scale.x=this.parent.screenWidth/o,this.parent.scale.y=this.parent.screenHeight/a}const i=this.parent.plugins.get("clamp-zoom",!0);i&&i.clamp(),this.options.noMove||(this.options.center?this.parent.moveCenter(this.options.center):this.parent.moveCenter(n))}}resume(){this.snapping=null,super.resume()}}const OOe={percent:.1,smooth:!1,interrupt:!0,reverse:!1,center:null,lineHeight:20,axis:"all",keyToPress:null,trackpadPinch:!1,wheelZoom:!0};class kOe extends va{constructor(e,n={}){super(e),Fe(this,"options"),Fe(this,"smoothing"),Fe(this,"smoothingCenter"),Fe(this,"smoothingCount"),Fe(this,"keyIsPressed"),this.options=Object.assign({},OOe,n),this.keyIsPressed=!1,this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(e){typeof window>"u"||(window.addEventListener("keydown",n=>{e.includes(n.code)&&(this.keyIsPressed=!0)}),window.addEventListener("keyup",n=>{e.includes(n.code)&&(this.keyIsPressed=!1)}))}checkKeyPress(){return!this.options.keyToPress||this.keyIsPressed}down(){return this.options.interrupt&&(this.smoothing=null),!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}update(){if(this.smoothing){const e=this.smoothingCenter,n=this.smoothing;let r;this.options.center||(r=this.parent.toLocal(e)),this.isAxisX()&&(this.parent.scale.x+=n.x),this.isAxisY()&&(this.parent.scale.y+=n.y),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const i=this.parent.plugins.get("clamp-zoom",!0);if(i&&i.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const s=this.parent.toGlobal(r);this.parent.x+=e.x-s.x,this.parent.y+=e.y-s.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.smoothingCount++,this.smoothingCount>=this.options.smooth&&(this.smoothing=null)}}pinch(e){if(this.paused)return;const n=this.parent.input.getPointerPosition(e),r=-e.deltaY*(e.deltaMode?this.options.lineHeight:1)/200,i=Math.pow(2,(1+this.options.percent)*r);let s;this.options.center||(s=this.parent.toLocal(n)),this.isAxisX()&&(this.parent.scale.x*=i),this.isAxisY()&&(this.parent.scale.y*=i),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const o=this.parent.plugins.get("clamp-zoom",!0);if(o&&o.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const a=this.parent.toGlobal(s);this.parent.x+=n.x-a.x,this.parent.y+=n.y-a.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:e,viewport:this.parent})}wheel(e){if(this.paused||!this.checkKeyPress())return!1;if(e.ctrlKey&&this.options.trackpadPinch)this.pinch(e);else if(this.options.wheelZoom){const n=this.parent.input.getPointerPosition(e),r=(this.options.reverse?-1:1)*-e.deltaY*(e.deltaMode?this.options.lineHeight:1)/500,i=Math.pow(2,(1+this.options.percent)*r);if(this.options.smooth){const s={x:this.smoothing?this.smoothing.x*(this.options.smooth-this.smoothingCount):0,y:this.smoothing?this.smoothing.y*(this.options.smooth-this.smoothingCount):0};this.smoothing={x:((this.parent.scale.x+s.x)*i-this.parent.scale.x)/this.options.smooth,y:((this.parent.scale.y+s.y)*i-this.parent.scale.y)/this.options.smooth},this.smoothingCount=0,this.smoothingCenter=n}else{let s;this.options.center||(s=this.parent.toLocal(n)),this.isAxisX()&&(this.parent.scale.x*=i),this.isAxisY()&&(this.parent.scale.y*=i),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const o=this.parent.plugins.get("clamp-zoom",!0);if(o&&o.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const a=this.parent.toGlobal(s);this.parent.x+=n.x-a.x,this.parent.y+=n.y-a.y}}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:e,viewport:this.parent})}return!this.parent.options.passiveWheel}}class NOe{constructor(e){Fe(this,"viewport"),Fe(this,"clickedAvailable"),Fe(this,"isMouseDown"),Fe(this,"last"),Fe(this,"wheelFunction"),Fe(this,"touches"),this.viewport=e,this.touches=[],this.addListeners()}addListeners(){this.viewport.eventMode="static",this.viewport.forceHitArea||(this.viewport.hitArea=new Wt(0,0,this.viewport.worldWidth,this.viewport.worldHeight)),this.viewport.on("pointerdown",this.down,this),this.viewport.options.allowPreserveDragOutside?this.viewport.on("globalpointermove",this.move,this):this.viewport.on("pointermove",this.move,this),this.viewport.on("pointerup",this.up,this),this.viewport.on("pointerupoutside",this.up,this),this.viewport.on("pointercancel",this.up,this),this.viewport.options.allowPreserveDragOutside||this.viewport.on("pointerleave",this.up,this),this.wheelFunction=e=>this.handleWheel(e),this.viewport.options.events.domElement.addEventListener("wheel",this.wheelFunction,{passive:this.viewport.options.passiveWheel}),this.isMouseDown=!1}destroy(){var e;(e=this.viewport.options.events.domElement)==null||e.removeEventListener("wheel",this.wheelFunction)}down(e){if(!(this.viewport.pause||!this.viewport.worldVisible)){if(e.pointerType==="mouse"?this.isMouseDown=!0:this.get(e.pointerId)||this.touches.push({id:e.pointerId,last:null}),this.count()===1){this.last=e.global.clone();const n=this.viewport.plugins.get("decelerate",!0),r=this.viewport.plugins.get("bounce",!0);(!n||!n.isActive())&&(!r||!r.isActive())?this.clickedAvailable=!0:this.clickedAvailable=!1}else this.clickedAvailable=!1;this.viewport.plugins.down(e)&&this.viewport.options.stopPropagation&&e.stopPropagation()}}clear(){this.isMouseDown=!1,this.touches=[],this.last=null}checkThreshold(e){return Math.abs(e)>=this.viewport.threshold}move(e){if(this.viewport.pause||!this.viewport.worldVisible)return;const n=this.viewport.plugins.move(e);if(this.clickedAvailable&&this.last){const r=e.global.x-this.last.x,i=e.global.y-this.last.y;(this.checkThreshold(r)||this.checkThreshold(i))&&(this.clickedAvailable=!1)}n&&this.viewport.options.stopPropagation&&e.stopPropagation()}up(e){if(this.viewport.pause||!this.viewport.worldVisible)return;e.pointerType==="mouse"&&(this.isMouseDown=!1),e.pointerType!=="mouse"&&this.remove(e.pointerId);const n=this.viewport.plugins.up(e);this.clickedAvailable&&this.count()===0&&this.last&&(this.viewport.emit("clicked",{event:e,screen:this.last,world:this.viewport.toWorld(this.last),viewport:this.viewport}),this.clickedAvailable=!1),n&&this.viewport.options.stopPropagation&&e.stopPropagation()}getPointerPosition(e){const n=new Ot;return this.viewport.options.events.mapPositionToPoint(n,e.clientX,e.clientY),n}handleWheel(e){if(this.viewport.pause||!this.viewport.worldVisible)return;const n=this.viewport.toLocal(this.getPointerPosition(e));this.viewport.left<=n.x&&n.x<=this.viewport.right&&this.viewport.top<=n.y&&n.y<=this.viewport.bottom&&this.viewport.plugins.wheel(e)&&!this.viewport.options.passiveWheel&&e.preventDefault()}pause(){this.touches=[],this.isMouseDown=!1}get(e){for(const n of this.touches)if(n.id===e)return n;return null}remove(e){for(let n=0;n<this.touches.length;n++)if(this.touches[n].id===e){this.touches.splice(n,1);return}}count(){return(this.isMouseDown?1:0)+this.touches.length}}const O0=["drag","pinch","wheel","follow","mouse-edges","decelerate","animate","bounce","snap-zoom","clamp-zoom","snap","clamp"];class DOe{constructor(e){Fe(this,"plugins"),Fe(this,"list"),Fe(this,"viewport"),this.viewport=e,this.list=[],this.plugins={}}add(e,n,r=O0.length){const i=this.plugins[e];i&&i.destroy(),this.plugins[e]=n;const s=O0.indexOf(e);s!==-1&&O0.splice(s,1),O0.splice(r,0,e),this.sort()}get(e,n){var r;return n&&(r=this.plugins[e])!=null&&r.paused?null:this.plugins[e]}update(e){for(const n of this.list)n.update(e)}resize(){for(const e of this.list)e.resize()}reset(){for(const e of this.list)e.reset()}removeAll(){this.list.forEach(e=>{e.destroy()}),this.plugins={},this.sort()}remove(e){var n;this.plugins[e]&&((n=this.plugins[e])==null||n.destroy(),delete this.plugins[e],this.viewport.emit("plugin-remove",e),this.sort())}pause(e){var n;(n=this.plugins[e])==null||n.pause()}resume(e){var n;(n=this.plugins[e])==null||n.resume()}sort(){this.list=[];for(const e of O0)this.plugins[e]&&this.list.push(this.plugins[e])}down(e){let n=!1;for(const r of this.list)r.down(e)&&(n=!0);return n}move(e){let n=!1;for(const r of this.viewport.plugins.list)r.move(e)&&(n=!0);return n}up(e){let n=!1;for(const r of this.list)r.up(e)&&(n=!0);return n}wheel(e){let n=!1;for(const r of this.list)r.wheel(e)&&(n=!0);return n}}const BOe={screenWidth:typeof window>"u"?0:window.innerWidth,screenHeight:typeof window>"u"?0:window.innerHeight,worldWidth:null,worldHeight:null,threshold:5,passiveWheel:!0,stopPropagation:!1,forceHitArea:null,noTicker:!1,disableOnContextMenu:!1,ticker:Qr.shared,allowPreserveDragOutside:!1};class FOe extends qi{constructor(e){super(),Fe(this,"moving"),Fe(this,"screenWidth"),Fe(this,"screenHeight"),Fe(this,"threshold"),Fe(this,"input"),Fe(this,"plugins"),Fe(this,"zooming"),Fe(this,"lastViewport"),Fe(this,"options"),Fe(this,"_dirty"),Fe(this,"_forceHitArea"),Fe(this,"_hitAreaDefault"),Fe(this,"_pause"),Fe(this,"tickerFunction"),Fe(this,"_worldWidth"),Fe(this,"_worldHeight"),Fe(this,"_disableOnContextMenu",n=>n.preventDefault()),this.options={...BOe,...e},this.screenWidth=this.options.screenWidth,this.screenHeight=this.options.screenHeight,this._worldWidth=this.options.worldWidth,this._worldHeight=this.options.worldHeight,this.forceHitArea=this.options.forceHitArea,this.threshold=this.options.threshold,this.options.disableOnContextMenu&&this.options.events.domElement.addEventListener("contextmenu",this._disableOnContextMenu),this.options.noTicker||(this.tickerFunction=()=>this.update(this.options.ticker.elapsedMS),this.options.ticker.add(this.tickerFunction)),this.input=new NOe(this),this.plugins=new DOe(this)}destroy(e){var n;!this.options.noTicker&&this.tickerFunction&&this.options.ticker.remove(this.tickerFunction),this.options.disableOnContextMenu&&((n=this.options.events.domElement)==null||n.removeEventListener("contextmenu",this._disableOnContextMenu)),this.input.destroy(),super.destroy(e)}update(e){this.pause||(this.plugins.update(e),this.lastViewport&&(this.lastViewport.x!==this.x||this.lastViewport.y!==this.y?this.moving=!0:this.moving&&(this.emit("moved-end",this),this.moving=!1),this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y?this.zooming=!0:this.zooming&&(this.emit("zoomed-end",this),this.zooming=!1)),this.forceHitArea||(this._hitAreaDefault=new Wt(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight),this.hitArea=this._hitAreaDefault),this._dirty=this._dirty||!this.lastViewport||this.lastViewport.x!==this.x||this.lastViewport.y!==this.y||this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y,this.lastViewport={x:this.x,y:this.y,scaleX:this.scale.x,scaleY:this.scale.y},this.emit("frame-end",this))}resize(e=typeof window>"u"?0:window.innerWidth,n=typeof window>"u"?0:window.innerHeight,r,i){this.screenWidth=e,this.screenHeight=n,typeof r<"u"&&(this._worldWidth=r),typeof i<"u"&&(this._worldHeight=i),this.plugins.resize(),this.dirty=!0}get worldWidth(){return this._worldWidth?this._worldWidth:this.width/this.scale.x}set worldWidth(e){this._worldWidth=e,this.plugins.resize()}get worldHeight(){return this._worldHeight?this._worldHeight:this.height/this.scale.y}set worldHeight(e){this._worldHeight=e,this.plugins.resize()}getVisibleBounds(){return new Wt(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight)}toWorld(e,n){return arguments.length===2?this.toLocal(new Ot(e,n)):this.toLocal(e)}toScreen(e,n){return arguments.length===2?this.toGlobal(new Ot(e,n)):this.toGlobal(e)}get worldScreenWidth(){return this.screenWidth/this.scale.x}get worldScreenHeight(){return this.screenHeight/this.scale.y}get screenWorldWidth(){return this.worldWidth*this.scale.x}get screenWorldHeight(){return this.worldHeight*this.scale.y}get center(){return new Ot(this.worldScreenWidth/2-this.x/this.scale.x,this.worldScreenHeight/2-this.y/this.scale.y)}set center(e){this.moveCenter(e)}moveCenter(...e){let n,r;typeof e[0]=="number"?(n=e[0],r=e[1]):(n=e[0].x,r=e[0].y);const i=(this.worldScreenWidth/2-n)*this.scale.x,s=(this.worldScreenHeight/2-r)*this.scale.y;return(this.x!==i||this.y!==s)&&(this.position.set(i,s),this.plugins.reset(),this.dirty=!0),this}get corner(){return new Ot(-this.x/this.scale.x,-this.y/this.scale.y)}set corner(e){this.moveCorner(e)}moveCorner(...e){let n,r;return e.length===1?(n=-e[0].x*this.scale.x,r=-e[0].y*this.scale.y):(n=-e[0]*this.scale.x,r=-e[1]*this.scale.y),(n!==this.x||r!==this.y)&&(this.position.set(n,r),this.plugins.reset(),this.dirty=!0),this}get screenWidthInWorldPixels(){return this.screenWidth/this.scale.x}get screenHeightInWorldPixels(){return this.screenHeight/this.scale.y}findFitWidth(e){return this.screenWidth/e}findFitHeight(e){return this.screenHeight/e}findFit(e,n){const r=this.screenWidth/e,i=this.screenHeight/n;return Math.min(r,i)}findCover(e,n){const r=this.screenWidth/e,i=this.screenHeight/n;return Math.max(r,i)}fitWidth(e=this.worldWidth,n,r=!0,i){let s;n&&(s=this.center),this.scale.x=this.screenWidth/e,r&&(this.scale.y=this.scale.x);const o=this.plugins.get("clamp-zoom",!0);return!i&&o&&o.clamp(),n&&s&&this.moveCenter(s),this}fitHeight(e=this.worldHeight,n,r=!0,i){let s;n&&(s=this.center),this.scale.y=this.screenHeight/e,r&&(this.scale.x=this.scale.y);const o=this.plugins.get("clamp-zoom",!0);return!i&&o&&o.clamp(),n&&s&&this.moveCenter(s),this}fitWorld(e){let n;e&&(n=this.center),this.scale.x=this.screenWidth/this.worldWidth,this.scale.y=this.screenHeight/this.worldHeight,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const r=this.plugins.get("clamp-zoom",!0);return r&&r.clamp(),e&&n&&this.moveCenter(n),this}fit(e,n=this.worldWidth,r=this.worldHeight){let i;e&&(i=this.center),this.scale.x=this.screenWidth/n,this.scale.y=this.screenHeight/r,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const s=this.plugins.get("clamp-zoom",!0);return s&&s.clamp(),e&&i&&this.moveCenter(i),this}setZoom(e,n){let r;n&&(r=this.center),this.scale.set(e);const i=this.plugins.get("clamp-zoom",!0);return i&&i.clamp(),n&&r&&this.moveCenter(r),this}zoomPercent(e,n){return this.setZoom(this.scale.x+this.scale.x*e,n)}zoom(e,n){return this.fitWidth(e+this.worldScreenWidth,n),this}get scaled(){return this.scale.x}set scaled(e){this.setZoom(e,!0)}snapZoom(e){return this.plugins.add("snap-zoom",new LOe(this,e)),this}OOB(){return{left:this.left<0,right:this.right>this.worldWidth,top:this.top<0,bottom:this.bottom>this.worldHeight,cornerPoint:new Ot(this.worldWidth*this.scale.x-this.screenWidth,this.worldHeight*this.scale.y-this.screenHeight)}}get right(){return-this.x/this.scale.x+this.worldScreenWidth}set right(e){this.x=-e*this.scale.x+this.screenWidth,this.plugins.reset()}get left(){return-this.x/this.scale.x}set left(e){this.x=-e*this.scale.x,this.plugins.reset()}get top(){return-this.y/this.scale.y}set top(e){this.y=-e*this.scale.y,this.plugins.reset()}get bottom(){return-this.y/this.scale.y+this.worldScreenHeight}set bottom(e){this.y=-e*this.scale.y+this.screenHeight,this.plugins.reset()}get dirty(){return!!this._dirty}set dirty(e){this._dirty=e}get forceHitArea(){return this._forceHitArea}set forceHitArea(e){e?(this._forceHitArea=e,this.hitArea=e):(this._forceHitArea=null,this.hitArea=new Wt(0,0,this.worldWidth,this.worldHeight))}drag(e){return this.plugins.add("drag",new EOe(this,e)),this}clamp(e){return this.plugins.add("clamp",new gOe(this,e)),this}decelerate(e){return this.plugins.add("decelerate",new bOe(this,e)),this}bounce(e){return this.plugins.add("bounce",new pOe(this,e)),this}pinch(e){return this.plugins.add("pinch",new ROe(this,e)),this}snap(e,n,r){return this.plugins.add("snap",new IOe(this,e,n,r)),this}follow(e,n){return this.plugins.add("follow",new TOe(this,e,n)),this}wheel(e){return this.plugins.add("wheel",new kOe(this,e)),this}animate(e){return this.plugins.add("animate",new hOe(this,e)),this}clampZoom(e){return this.plugins.add("clamp-zoom",new yOe(this,e)),this}mouseEdges(e){return this.plugins.add("mouse-edges",new COe(this,e)),this}get pause(){return!!this._pause}set pause(e){this._pause=e,this.lastViewport=null,this.moving=!1,this.zooming=!1,e&&this.input.pause()}ensureVisible(e,n,r,i,s){s&&(r>this.worldScreenWidth||i>this.worldScreenHeight)&&(this.fit(!0,r,i),this.emit("zoomed",{viewport:this,type:"ensureVisible"}));let o=!1;e<this.left?(this.left=e,o=!0):e+r>this.right&&(this.right=e+r,o=!0),n<this.top?(this.top=n,o=!0):n+i>this.bottom&&(this.bottom=n+i,o=!0),o&&this.emit("moved",{viewport:this,type:"ensureVisible"})}}const UOe=t=>{const e=new FOe({passiveWheel:!1,events:t.app.renderer.events,stopPropagation:!0,screenWidth:t.screenWidth,screenHeight:t.screenHeight,worldWidth:1e3,worldHeight:1e3});return e.moveCenter(t.viewportCenter[2]||0,t.viewportCenter[1]||0),e.setZoom(t.viewportCenter[0]||1,!0),e.drag({wheel:!1}).wheel({wheelZoom:!0}).pinch().clampZoom({maxScale:5,minScale:.1}),t.onDragStart&&e.on("drag-start",t.onDragStart),t.onDragEnd&&e.on("drag-end",t.onDragEnd),t.onPinchStart&&e.on("pinch-start",t.onPinchStart),t.onPinchEnd&&e.on("pinch-end",t.onPinchEnd),t.onSnapStart&&e.on("snap-start",t.onSnapStart),t.onSnapEnd&&e.on("snap-end",t.onSnapEnd),t.onSnapZoomStart&&e.on("snap-zoom-start",t.onSnapZoomStart),t.onSnapZoomEnd&&e.on("snap-zoom-end",t.onSnapZoomEnd),t.onZoomed&&e.on("zoomed",t.onZoomed),t.onZoomedEnd&&e.on("zoomed-end",t.onZoomedEnd),t.onMouseUp&&e.on("mouseup",t.onMouseUp),t.onMoved&&e.on("moved",t.onMoved),t.onMovedEnd&&e.on("moved-end",n=>{t.onMovedEnd&&t.onMovedEnd({x:n.center.x,y:n.center.y,zoom:n.lastViewport.scaleX})}),e},zOe=t=>{const e=fn.useApp(),n=({left:i,top:s,right:o,bottom:a,paddingMarginRatio:l})=>{if(t.screenWidth===0)return;const c=e.stage.getChildAt(0),u=lY({left:i,top:s,right:o,bottom:a,width:t.screenWidth,height:t.screenHeight,paddingMarginRatio:l});c.moveCenter(u[2],u[1]),c.setZoom(u[0],!0),requestAnimationFrame(()=>{t.onSetViewportCenter(u)})};A.useEffect(()=>{requestAnimationFrame(()=>{const i=e.stage.getChildAt(0);t.screenWidth>0&&t.screenHeight>0&&(t.viewportCenter?(i.moveCenter(t.viewportCenter[2],t.viewportCenter[1]),i.setZoom(t.viewportCenter[0],!0)):n(t.boundingBox))})},[t.viewportCenter]),A.useLayoutEffect(()=>{requestAnimationFrame(()=>{const i=e.stage.getChildAt(0);i.pause=t.pause})},[t.pause]);const r=fn.PixiComponent("Viewport",{create:i=>{const s=UOe(i);return s.options.events.domElement=i.app.renderer.view,s},didMount(i,s){},willUnmount:i=>{i.destroy({children:!0})}});return D(r,{app:e,...t})},$Oe='<svg xmlns="http://www.w3.org/2000/svg" class="MuiSvgIcon-root MuiSvgIcon-fontSizeMedium MuiBox-root css-kaxv2e" focusable="false" aria-hidden="true" viewBox="0 0 24 24" data-testid="DomainIcon"><path d="M12 7V3H2v18h20V7H12zM6 19H4v-2h2v2zm0-4H4v-2h2v2zm0-4H4V9h2v2zm0-4H4V5h2v2zm4 12H8v-2h2v2zm0-4H8v-2h2v2zm0-4H8V9h2v2zm0-4H8V5h2v2zm10 12h-8v-2h2v-2h-2v-2h2v-2h-2V9h8v10zm-2-8h-2v2h2v-2zm0 4h-2v2h2v-2z"></path></svg>',jOe=new Blob([$Oe],{type:"image/svg+xml"}),jq=URL.createObjectURL(jOe),Gq=new Br;lr.prototype._cacheAsBitmap=!1;lr.prototype._cacheData=null;lr.prototype._cacheAsBitmapResolution=null;lr.prototype._cacheAsBitmapMultisample=null;class GOe{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(lr.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(t){if(this._cacheAsBitmap===t)return;this._cacheAsBitmap=t;let e;t?(this._cacheData||(this._cacheData=new GOe),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}});lr.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))};lr.prototype._initCachedDisplayObject=function(t){var h,f;if((h=this._cacheData)!=null&&h.sprite)return;const e=this.alpha;this.alpha=1,t.batch.flush();const n=this.getLocalBounds(new Wt,!0);if((f=this.filters)!=null&&f.length){const p=this.filters[0].padding;n.pad(p)}const r=this.cacheAsBitmapResolution||t.resolution;n.ceil(r),n.width=Math.max(n.width,1/r),n.height=Math.max(n.height,1/r);const i=t.renderTexture.current,s=t.renderTexture.sourceFrame.clone(),o=t.renderTexture.destinationFrame.clone(),a=t.projection.transform,l=zd.create({width:n.width,height:n.height,resolution:r,multisample:this.cacheAsBitmapMultisample??t.multisample}),c=`cacheAsBitmap_${Td()}`;this._cacheData.textureCacheId=c,Qt.addToCache(l.baseTexture,c),zt.addToCache(l,c);const u=this.transform.localTransform.copyTo(Gq).invert().translate(-n.x,-n.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:l,clear:!0,transform:u,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=a,t.renderTexture.bind(i,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=e;const d=new tl(l);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-(n.x/n.width),d.anchor.y=-(n.y/n.height),d.alpha=e,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=d.containsPoint.bind(d)};lr.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))};lr.prototype._initCachedDisplayObjectCanvas=function(t){var u;if((u=this._cacheData)!=null&&u.sprite)return;const e=this.getLocalBounds(new Wt,!0),n=this.alpha;this.alpha=1;const r=t.canvasContext.activeContext,i=t._projTransform,s=this.cacheAsBitmapResolution||t.resolution;e.ceil(s),e.width=Math.max(e.width,1/s),e.height=Math.max(e.height,1/s);const o=zd.create({width:e.width,height:e.height,resolution:s}),a=`cacheAsBitmap_${Td()}`;this._cacheData.textureCacheId=a,Qt.addToCache(o.baseTexture,a),zt.addToCache(o,a);const l=Gq;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=e.x,l.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),t.canvasContext.activeContext=r,t._projTransform=i,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;const c=new tl(o);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-(e.x/e.width),c.anchor.y=-(e.y/e.height),c.alpha=n,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=c.containsPoint.bind(c)};lr.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};lr.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};lr.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Qt.removeFromCache(this._cacheData.textureCacheId),zt.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};lr.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};lr.prototype.name=null;qi.prototype.getChildByName=function(t,e){for(let n=0,r=this.children.length;n<r;n++)if(this.children[n].name===t)return this.children[n];if(e)for(let n=0,r=this.children.length;n<r;n++){const i=this.children[n];if(!i.getChildByName)continue;const s=i.getChildByName(t,!0);if(s)return s}return null};lr.prototype.getGlobalPosition=function(t=new Ot,e=!1){return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t};var HOe=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class Hq extends hs{constructor(e=1){super(MK,HOe,{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}const VOe=Object.freeze(Object.defineProperty({__proto__:null,AlphaFilter:Hq},Symbol.toStringTag,{value:"Module"})),WOe={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},XOe=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function YOe(t){const e=WOe[t],n=e.length;let r=XOe,i="";const s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<t;a++){let l=s.replace("%index%",a.toString());o=a,a>=n&&(o=t-a-1),l=l.replace("%value%",e[o].toString()),i+=l,i+=`
`}return r=r.replace("%blur%",i),r=r.replace("%size%",t.toString()),r}const KOe=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function qOe(t,e){const n=Math.ceil(t/2);let r=KOe,i="",s;e?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<t;o++){let a=s.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(n-1)}.0`),i+=a,i+=`
`}return r=r.replace("%blur%",i),r=r.replace("%size%",t.toString()),r}class qw extends hs{constructor(e,n=8,r=4,i=hs.defaultResolution,s=5){const o=qOe(s,e),a=YOe(s);super(o,a),this.horizontal=e,this.resolution=i,this._quality=0,this.quality=r,this.blur=n}apply(e,n,r,i){if(r?this.horizontal?this.uniforms.strength=1/r.width*(r.width/n.width):this.uniforms.strength=1/r.height*(r.height/n.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/n.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/n.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,n,r,i);else{const s=e.getFilterTexture(),o=e.renderer;let a=n,l=s;this.state.blend=!1,e.applyFilter(this,a,l,Na.CLEAR);for(let c=1;c<this.passes-1;c++){e.bindAndClear(a,Na.BLIT),this.uniforms.uSampler=l;const u=l;l=a,a=u,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,l,r,i),e.returnFilterTexture(s)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}}class Vq extends hs{constructor(e=8,n=4,r=hs.defaultResolution,i=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new qw(!0,e,n,r,i),this.blurYFilter=new qw(!1,e,n,r,i),this.resolution=r,this.quality=n,this.blur=e,this.repeatEdgePixels=!1}apply(e,n,r,i){const s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){const a=e.getFilterTexture();this.blurXFilter.apply(e,n,a,Na.CLEAR),this.blurYFilter.apply(e,a,r,i),e.returnFilterTexture(a)}else o?this.blurYFilter.apply(e,n,r,i):this.blurXFilter.apply(e,n,r,i)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}const ZOe=Object.freeze(Object.defineProperty({__proto__:null,BlurFilter:Vq,BlurFilterPass:qw},Symbol.toStringTag,{value:"Module"}));var QOe=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class Zw extends hs{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(W3,QOe,e),this.alpha=1}_loadMatrix(e,n=!1){let r=e;n&&(this._multiply(r,this.uniforms.m,e),r=this._colorMatrix(r)),this.uniforms.m=r}_multiply(e,n,r){return e[0]=n[0]*r[0]+n[1]*r[5]+n[2]*r[10]+n[3]*r[15],e[1]=n[0]*r[1]+n[1]*r[6]+n[2]*r[11]+n[3]*r[16],e[2]=n[0]*r[2]+n[1]*r[7]+n[2]*r[12]+n[3]*r[17],e[3]=n[0]*r[3]+n[1]*r[8]+n[2]*r[13]+n[3]*r[18],e[4]=n[0]*r[4]+n[1]*r[9]+n[2]*r[14]+n[3]*r[19]+n[4],e[5]=n[5]*r[0]+n[6]*r[5]+n[7]*r[10]+n[8]*r[15],e[6]=n[5]*r[1]+n[6]*r[6]+n[7]*r[11]+n[8]*r[16],e[7]=n[5]*r[2]+n[6]*r[7]+n[7]*r[12]+n[8]*r[17],e[8]=n[5]*r[3]+n[6]*r[8]+n[7]*r[13]+n[8]*r[18],e[9]=n[5]*r[4]+n[6]*r[9]+n[7]*r[14]+n[8]*r[19]+n[9],e[10]=n[10]*r[0]+n[11]*r[5]+n[12]*r[10]+n[13]*r[15],e[11]=n[10]*r[1]+n[11]*r[6]+n[12]*r[11]+n[13]*r[16],e[12]=n[10]*r[2]+n[11]*r[7]+n[12]*r[12]+n[13]*r[17],e[13]=n[10]*r[3]+n[11]*r[8]+n[12]*r[13]+n[13]*r[18],e[14]=n[10]*r[4]+n[11]*r[9]+n[12]*r[14]+n[13]*r[19]+n[14],e[15]=n[15]*r[0]+n[16]*r[5]+n[17]*r[10]+n[18]*r[15],e[16]=n[15]*r[1]+n[16]*r[6]+n[17]*r[11]+n[18]*r[16],e[17]=n[15]*r[2]+n[16]*r[7]+n[17]*r[12]+n[18]*r[17],e[18]=n[15]*r[3]+n[16]*r[8]+n[17]*r[13]+n[18]*r[18],e[19]=n[15]*r[4]+n[16]*r[9]+n[17]*r[14]+n[18]*r[19]+n[19],e}_colorMatrix(e){const n=new Float32Array(e);return n[4]/=255,n[9]/=255,n[14]/=255,n[19]/=255,n}brightness(e,n){const r=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(r,n)}tint(e,n){const[r,i,s]=Tn.shared.setValue(e).toArray(),o=[r,0,0,0,0,0,i,0,0,0,0,0,s,0,0,0,0,0,1,0];this._loadMatrix(o,n)}greyscale(e,n){const r=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(r,n)}blackAndWhite(e){const n=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(n,e)}hue(e,n){e=(e||0)/180*Math.PI;const r=Math.cos(e),i=Math.sin(e),s=Math.sqrt,o=1/3,a=s(o),l=r+(1-r)*o,c=o*(1-r)-a*i,u=o*(1-r)+a*i,d=o*(1-r)+a*i,h=r+o*(1-r),f=o*(1-r)-a*i,p=o*(1-r)-a*i,m=o*(1-r)+a*i,_=r+o*(1-r),y=[l,c,u,0,0,d,h,f,0,0,p,m,_,0,0,0,0,0,1,0];this._loadMatrix(y,n)}contrast(e,n){const r=(e||0)+1,i=-.5*(r-1),s=[r,0,0,0,i,0,r,0,0,i,0,0,r,0,i,0,0,0,1,0];this._loadMatrix(s,n)}saturate(e=0,n){const r=e*2/3+1,i=(r-1)*-.5,s=[r,i,i,0,0,i,r,i,0,0,i,i,r,0,0,0,0,0,1,0];this._loadMatrix(s,n)}desaturate(){this.saturate(-1)}negative(e){const n=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(n,e)}sepia(e){const n=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(n,e)}technicolor(e){const n=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(n,e)}polaroid(e){const n=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(n,e)}toBGR(e){const n=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(n,e)}kodachrome(e){const n=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(n,e)}browni(e){const n=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(n,e)}vintage(e){const n=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(n,e)}colorTone(e,n,r,i,s){e=e||.2,n=n||.15,r=r||16770432,i=i||3375104;const o=Tn.shared,[a,l,c]=o.setValue(r).toArray(),[u,d,h]=o.setValue(i).toArray(),f=[.3,.59,.11,0,0,a,l,c,e,0,u,d,h,n,0,a-u,l-d,c-h,0,0];this._loadMatrix(f,s)}night(e,n){e=e||.1;const r=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(r,n)}predator(e,n){const r=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(r,n)}lsd(e){const n=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(n,e)}reset(){const e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}Zw.prototype.grayscale=Zw.prototype.greyscale;const JOe=Object.freeze(Object.defineProperty({__proto__:null,ColorMatrixFilter:Zw},Symbol.toStringTag,{value:"Module"}));var eke=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,tke=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class Wq extends hs{constructor(e,n){const r=new Br;e.renderable=!1,super(tke,eke,{mapSampler:e._texture,filterMatrix:r,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=r,n==null&&(n=20),this.scale=new Ot(n,n)}apply(e,n,r,i){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),a=Math.sqrt(s.c*s.c+s.d*s.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/a,this.uniforms.rotation[3]=s.d/a),e.applyFilter(this,n,r,i)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}}const nke=Object.freeze(Object.defineProperty({__proto__:null,DisplacementFilter:Wq},Symbol.toStringTag,{value:"Module"}));var rke=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,ike=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class Xq extends hs{constructor(){super(ike,rke)}}const ske=Object.freeze(Object.defineProperty({__proto__:null,FXAAFilter:Xq},Symbol.toStringTag,{value:"Module"}));var oke=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class Yq extends hs{constructor(e=.5,n=Math.random()){super(W3,oke,{uNoise:0,uSeed:0}),this.noise=e,this.seed=n}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}}const ake=Object.freeze(Object.defineProperty({__proto__:null,NoiseFilter:Yq},Symbol.toStringTag,{value:"Module"})),N6={AlphaFilter:Hq,BlurFilter:Vq,BlurFilterPass:qw,ColorMatrixFilter:Zw,DisplacementFilter:Wq,FXAAFilter:Xq,NoiseFilter:Yq};Object.entries(N6).forEach(([t,e])=>{Object.defineProperty(N6,t,{get(){return Ht("7.1.0",`filters.${t} has moved to ${t}`),e}})});class lke{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(Qr.system.add(this.tickerUpdate,this,zc.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Qr.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const zu=new lke;class kg{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=kg.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Ot,this.page=new Ot,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,n,r){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,n,r,i,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class Zy extends kg{constructor(){super(...arguments),this.client=new Ot,this.movement=new Ot,this.offset=new Ot,this.global=new Ot,this.screen=new Ot}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,n,r){return e.worldTransform.applyInverse(r||this.global,n)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,n,r,i,s,o,a,l,c,u,d,h,f,p,m){throw new Error("Method not implemented.")}}class Vo extends Zy{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Yh extends Zy{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}Yh.DOM_DELTA_PIXEL=0,Yh.DOM_DELTA_LINE=1,Yh.DOM_DELTA_PAGE=2;const cke=2048,uke=new Ot,UP=new Ot;class Kq{constructor(e){this.dispatch=new Ig,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,n){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:n,priority:0}),this.mappingTable[e].sort((r,i)=>r.priority-i.priority)}dispatchEvent(e,n){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,n),this.dispatch.emit(n||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const n=this.mappingTable[e.type];if(n)for(let r=0,i=n.length;r<i;r++)n[r].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,n){zu.pauseUpdate=!0;const r=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",i=this[r](this.rootTarget,this.rootTarget.eventMode,uke.set(e,n),this.hitTestFn,this.hitPruneFn);return i&&i[0]}propagate(e,n){if(!e.target)return;const r=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let i=0,s=r.length-1;i<s;i++)if(e.currentTarget=r[i],this.notifyTarget(e,n),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,n),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let i=r.length-2;i>=0;i--)if(e.currentTarget=r[i],this.notifyTarget(e,n),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,n,r=this._allInteractiveElements){if(r.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const i=Array.isArray(n)?n:[n];for(let s=r.length-1;s>=0;s--)i.forEach(o=>{e.currentTarget=r[s],this.notifyTarget(e,o)})}propagationPath(e){const n=[e];for(let r=0;r<cke&&e!==this.rootTarget;r++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");n.push(e.parent),e=e.parent}return n.reverse(),n}hitTestMoveRecursive(e,n,r,i,s,o=!1){let a=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||n==="dynamic")&&(zu.pauseUpdate=!1),e.interactiveChildren&&e.children){const u=e.children;for(let d=u.length-1;d>=0;d--){const h=u[d],f=this.hitTestMoveRecursive(h,this._isInteractive(n)?n:h.eventMode,r,i,s,o||s(e,r));if(f){if(f.length>0&&!f[f.length-1].parent)continue;const p=e.isInteractive();(f.length>0||p)&&(p&&this._allInteractiveElements.push(e),f.push(e)),this._hitElements.length===0&&(this._hitElements=f),a=!0}}}const l=this._isInteractive(n),c=e.isInteractive();return l&&c&&this._allInteractiveElements.push(e),o||this._hitElements.length>0?null:a?this._hitElements:l&&!s(e,r)&&i(e,r)?c?[e]:[]:null}hitTestRecursive(e,n,r,i,s){if(this._interactivePrune(e)||s(e,r))return null;if((e.eventMode==="dynamic"||n==="dynamic")&&(zu.pauseUpdate=!1),e.interactiveChildren&&e.children){const l=e.children;for(let c=l.length-1;c>=0;c--){const u=l[c],d=this.hitTestRecursive(u,this._isInteractive(n)?n:u.eventMode,r,i,s);if(d){if(d.length>0&&!d[d.length-1].parent)continue;const h=e.isInteractive();return(d.length>0||h)&&d.push(e),d}}}const o=this._isInteractive(n),a=e.isInteractive();return o&&i(e,r)?a?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!!(!e||e.isMask||!e.visible||!e.renderable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren||e.isMask)}hitPruneFn(e,n){var r;if(e.hitArea&&(e.worldTransform.applyInverse(n,UP),!e.hitArea.contains(UP.x,UP.y)))return!0;if(e._mask){const i=e._mask.isMaskData?e._mask.maskObject:e._mask;if(i&&!((r=i.containsPoint)!=null&&r.call(i,n)))return!0}return!1}hitTestFn(e,n){return e.eventMode==="passive"?!1:e.hitArea?!0:e.containsPoint?e.containsPoint(n):!1}notifyTarget(e,n){var s,o;n=n??e.type;const r=`on${n}`;(o=(s=e.currentTarget)[r])==null||o.call(s,e);const i=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${n}capture`:n;this.notifyListeners(e,i),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,n)}mapPointerDown(e){if(!(e instanceof Vo)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=this.createPointerEvent(e);if(this.dispatchEvent(n,"pointerdown"),n.pointerType==="touch")this.dispatchEvent(n,"touchstart");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const i=n.button===2;this.dispatchEvent(n,i?"rightdown":"mousedown")}const r=this.trackingData(e.pointerId);r.pressTargetsByButton[e.button]=n.composedPath(),this.freeEvent(n)}mapPointerMove(e){var l,c;if(!(e instanceof Vo)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const n=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const r=n.pointerType==="mouse"||n.pointerType==="pen",i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.overTargets);if(((l=i.overTargets)==null?void 0:l.length)>0&&s!==n.target){const u=e.type==="mousemove"?"mouseout":"pointerout",d=this.createPointerEvent(e,u,s);if(this.dispatchEvent(d,"pointerout"),r&&this.dispatchEvent(d,"mouseout"),!n.composedPath().includes(s)){const h=this.createPointerEvent(e,"pointerleave",s);for(h.eventPhase=h.AT_TARGET;h.target&&!n.composedPath().includes(h.target);)h.currentTarget=h.target,this.notifyTarget(h),r&&this.notifyTarget(h,"mouseleave"),h.target=h.target.parent;this.freeEvent(h)}this.freeEvent(d)}if(s!==n.target){const u=e.type==="mousemove"?"mouseover":"pointerover",d=this.clonePointerEvent(n,u);this.dispatchEvent(d,"pointerover"),r&&this.dispatchEvent(d,"mouseover");let h=s==null?void 0:s.parent;for(;h&&h!==this.rootTarget.parent&&h!==n.target;)h=h.parent;if(!h||h===this.rootTarget.parent){const f=this.clonePointerEvent(n,"pointerenter");for(f.eventPhase=f.AT_TARGET;f.target&&f.target!==s&&f.target!==this.rootTarget.parent;)f.currentTarget=f.target,this.notifyTarget(f),r&&this.notifyTarget(f,"mouseenter"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(d)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(n,"pointermove"),a&&o.push("globalpointermove"),n.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(n,"touchmove"),a&&o.push("globaltouchmove")),r&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(n,"mousemove"),a&&o.push("globalmousemove"),this.cursor=(c=n.target)==null?void 0:c.cursor),o.length>0&&this.all(n,o),this._allInteractiveElements.length=0,this._hitElements.length=0,i.overTargets=n.composedPath(),this.freeEvent(n)}mapPointerOver(e){var o;if(!(e instanceof Vo)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=this.trackingData(e.pointerId),r=this.createPointerEvent(e),i=r.pointerType==="mouse"||r.pointerType==="pen";this.dispatchEvent(r,"pointerover"),i&&this.dispatchEvent(r,"mouseover"),r.pointerType==="mouse"&&(this.cursor=(o=r.target)==null?void 0:o.cursor);const s=this.clonePointerEvent(r,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),i&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;n.overTargets=r.composedPath(),this.freeEvent(r),this.freeEvent(s)}mapPointerOut(e){if(!(e instanceof Vo)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=this.trackingData(e.pointerId);if(n.overTargets){const r=e.pointerType==="mouse"||e.pointerType==="pen",i=this.findMountedTarget(n.overTargets),s=this.createPointerEvent(e,"pointerout",i);this.dispatchEvent(s),r&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(e,"pointerleave",i);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),r&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;n.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof Vo)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=performance.now(),r=this.createPointerEvent(e);if(this.dispatchEvent(r,"pointerup"),r.pointerType==="touch")this.dispatchEvent(r,"touchend");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const a=r.button===2;this.dispatchEvent(r,a?"rightup":"mouseup")}const i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.pressTargetsByButton[e.button]);let o=s;if(s&&!r.composedPath().includes(s)){let a=s;for(;a&&!r.composedPath().includes(a);){if(r.currentTarget=a,this.notifyTarget(r,"pointerupoutside"),r.pointerType==="touch")this.notifyTarget(r,"touchendoutside");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const l=r.button===2;this.notifyTarget(r,l?"rightupoutside":"mouseupoutside")}a=a.parent}delete i.pressTargetsByButton[e.button],o=a}if(o){const a=this.clonePointerEvent(r,"click");a.target=o,a.path=null,i.clicksByButton[e.button]||(i.clicksByButton[e.button]={clickCount:0,target:a.target,timeStamp:n});const l=i.clicksByButton[e.button];if(l.target===a.target&&n-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=n,a.detail=l.clickCount,a.pointerType==="mouse"){const c=a.button===2;this.dispatchEvent(a,c?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(r)}mapPointerUpOutside(e){if(!(e instanceof Vo)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=this.trackingData(e.pointerId),r=this.findMountedTarget(n.pressTargetsByButton[e.button]),i=this.createPointerEvent(e);if(r){let s=r;for(;s;)i.currentTarget=s,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch"?this.notifyTarget(i,"touchendoutside"):(i.pointerType==="mouse"||i.pointerType==="pen")&&this.notifyTarget(i,i.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete n.pressTargetsByButton[e.button]}this.freeEvent(i)}mapWheel(e){if(!(e instanceof Yh)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const n=this.createWheelEvent(e);this.dispatchEvent(n),this.freeEvent(n)}findMountedTarget(e){if(!e)return null;let n=e[0];for(let r=1;r<e.length&&e[r].parent===n;r++)n=e[r];return n}createPointerEvent(e,n,r){const i=this.allocateEvent(Vo);return this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e,i.target=r??this.hitTest(i.global.x,i.global.y)??this._hitElements[0],typeof n=="string"&&(i.type=n),i}createWheelEvent(e){const n=this.allocateEvent(Yh);return this.copyWheelData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.nativeEvent=e.nativeEvent,n.originalEvent=e,n.target=this.hitTest(n.global.x,n.global.y),n}clonePointerEvent(e,n){const r=this.allocateEvent(Vo);return r.nativeEvent=e.nativeEvent,r.originalEvent=e.originalEvent,this.copyPointerData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.target=e.target,r.path=e.composedPath().slice(),r.type=n??r.type,r}copyWheelData(e,n){n.deltaMode=e.deltaMode,n.deltaX=e.deltaX,n.deltaY=e.deltaY,n.deltaZ=e.deltaZ}copyPointerData(e,n){e instanceof Vo&&n instanceof Vo&&(n.pointerId=e.pointerId,n.width=e.width,n.height=e.height,n.isPrimary=e.isPrimary,n.pointerType=e.pointerType,n.pressure=e.pressure,n.tangentialPressure=e.tangentialPressure,n.tiltX=e.tiltX,n.tiltY=e.tiltY,n.twist=e.twist)}copyMouseData(e,n){e instanceof Zy&&n instanceof Zy&&(n.altKey=e.altKey,n.button=e.button,n.buttons=e.buttons,n.client.copyFrom(e.client),n.ctrlKey=e.ctrlKey,n.metaKey=e.metaKey,n.movement.copyFrom(e.movement),n.screen.copyFrom(e.screen),n.shiftKey=e.shiftKey,n.global.copyFrom(e.global))}copyData(e,n){n.isTrusted=e.isTrusted,n.srcElement=e.srcElement,n.timeStamp=performance.now(),n.type=e.type,n.detail=e.detail,n.view=e.view,n.which=e.which,n.layer.copyFrom(e.layer),n.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const n=this.eventPool.get(e).pop()||new e(this);return n.eventPhase=n.NONE,n.currentTarget=null,n.path=null,n.target=null,n}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const n=e.constructor;this.eventPool.has(n)||this.eventPool.set(n,[]),this.eventPool.get(n).push(e)}notifyListeners(e,n){const r=e.currentTarget._events[n];if(r&&e.currentTarget.isInteractive())if("fn"in r)r.once&&e.currentTarget.removeListener(n,r.fn,void 0,!0),r.fn.call(r.context,e);else for(let i=0,s=r.length;i<s&&!e.propagationImmediatelyStopped;i++)r[i].once&&e.currentTarget.removeListener(n,r[i].fn,void 0,!0),r[i].fn.call(r[i].context,e)}}const dke=1,hke={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},SL=class CL{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new Kq(null),zu.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Vo(null),this.rootWheelEvent=new Yh(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...CL.defaultEventFeatures},{set:(n,r,i)=>(r==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=i),n[r]=i,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(e){const{view:n,resolution:r}=this.renderer;this.setTargetElement(n),this.resolution=r,CL._defaultEventMode=e.eventMode??"auto",Object.assign(this.features,e.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let n=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(n=!1),this.currentCursor===e)return;this.currentCursor=e;const r=this.cursorStyles[e];if(r)switch(typeof r){case"string":n&&(this.domElement.style.cursor=r);break;case"function":r(e);break;case"object":n&&Object.assign(this.domElement.style,r);break}else n&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}get pointer(){return this.rootPointerEvent}onPointerDown(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const n=this.normalizeToPointerData(e);this.autoPreventDefault&&n[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let r=0,i=n.length;r<i;r++){const s=n[r],o=this.bootstrapEvent(this.rootPointerEvent,s);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,zu.pointerMoved();const n=this.normalizeToPointerData(e);for(let r=0,i=n.length;r<i;r++){const s=this.bootstrapEvent(this.rootPointerEvent,n[r]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let n=e.target;e.composedPath&&e.composedPath().length>0&&(n=e.composedPath()[0]);const r=n!==this.domElement?"outside":"",i=this.normalizeToPointerData(e);for(let s=0,o=i.length;s<o;s++){const a=this.bootstrapEvent(this.rootPointerEvent,i[s]);a.type+=r,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const n=this.normalizeToPointerData(e);for(let r=0,i=n.length;r<i;r++){const s=this.bootstrapEvent(this.rootPointerEvent,n[r]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){if(!this.features.wheel)return;const n=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(n)}setTargetElement(e){this.removeEvents(),this.domElement=e,zu.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;zu.addTickerListener();const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;zu.removeTickerListener();const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,n,r){const i=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},s=1/this.resolution;e.x=(n-i.left)*(this.domElement.width/i.width)*s,e.y=(r-i.top)*(this.domElement.height/i.height)*s}normalizeToPointerData(e){const n=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let r=0,i=e.changedTouches.length;r<i;r++){const s=e.changedTouches[r];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=e.type,n.push(s)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const r=e;typeof r.isPrimary>"u"&&(r.isPrimary=!0),typeof r.width>"u"&&(r.width=1),typeof r.height>"u"&&(r.height=1),typeof r.tiltX>"u"&&(r.tiltX=0),typeof r.tiltY>"u"&&(r.tiltY=0),typeof r.pointerType>"u"&&(r.pointerType="mouse"),typeof r.pointerId>"u"&&(r.pointerId=dke),typeof r.pressure>"u"&&(r.pressure=.5),typeof r.twist>"u"&&(r.twist=0),typeof r.tangentialPressure>"u"&&(r.tangentialPressure=0),r.isNormalized=!0,n.push(r)}else n.push(e);return n}normalizeWheelEvent(e){const n=this.rootWheelEvent;return this.transferMouseData(n,e),n.deltaX=e.deltaX,n.deltaY=e.deltaY,n.deltaZ=e.deltaZ,n.deltaMode=e.deltaMode,this.mapPositionToPoint(n.screen,e.clientX,e.clientY),n.global.copyFrom(n.screen),n.offset.copyFrom(n.screen),n.nativeEvent=e,n.type=e.type,n}bootstrapEvent(e,n){return e.originalEvent=null,e.nativeEvent=n,e.pointerId=n.pointerId,e.width=n.width,e.height=n.height,e.isPrimary=n.isPrimary,e.pointerType=n.pointerType,e.pressure=n.pressure,e.tangentialPressure=n.tangentialPressure,e.tiltX=n.tiltX,e.tiltY=n.tiltY,e.twist=n.twist,this.transferMouseData(e,n),this.mapPositionToPoint(e.screen,n.clientX,n.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=n.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=hke[e.type]||e.type),e}transferMouseData(e,n){e.isTrusted=n.isTrusted,e.srcElement=n.srcElement,e.timeStamp=performance.now(),e.type=n.type,e.altKey=n.altKey,e.button=n.button,e.buttons=n.buttons,e.client.x=n.clientX,e.client.y=n.clientY,e.ctrlKey=n.ctrlKey,e.metaKey=n.metaKey,e.movement.x=n.movementX,e.movement.y=n.movementY,e.page.x=n.pageX,e.page.y=n.pageY,e.relatedTarget=null,e.shiftKey=n.shiftKey}};SL.extension={name:"events",type:[rt.RendererSystem,rt.CanvasRendererSystem]},SL.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let Qw=SL;bt.add(Qw);function D6(t){return t==="dynamic"||t==="static"}const qq={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??D6(Qw.defaultEventMode)},set interactive(t){Ht("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=t,this.eventMode=t?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??Qw.defaultEventMode},set eventMode(t){this._internalInteractive=D6(t),this._internalEventMode=t},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(t,e,n){const r=typeof n=="boolean"&&n||typeof n=="object"&&n.capture,i=typeof n=="object"?n.signal:void 0,s=typeof n=="object"?n.once===!0:!1,o=typeof e=="function"?void 0:e;t=r?`${t}capture`:t;const a=typeof e=="function"?e:e.handleEvent,l=this;i&&i.addEventListener("abort",()=>{l.off(t,a,o)}),s?l.once(t,a,o):l.on(t,a,o)},removeEventListener(t,e,n){const r=typeof n=="boolean"&&n||typeof n=="object"&&n.capture,i=typeof e=="function"?void 0:e;t=r?`${t}capture`:t,e=typeof e=="function"?e:e.handleEvent,this.off(t,e,i)},dispatchEvent(t){if(!(t instanceof kg))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return t.defaultPrevented=!1,t.path=null,t.target=this,t.manager.dispatchEvent(t),!t.defaultPrevented}};lr.mixin(qq);const fke=Object.freeze(Object.defineProperty({__proto__:null,EventBoundary:Kq,EventSystem:Qw,FederatedDisplayObject:qq,FederatedEvent:kg,FederatedMouseEvent:Zy,FederatedPointerEvent:Vo,FederatedWheelEvent:Yh},Symbol.toStringTag,{value:"Module"})),Zq={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};lr.mixin(Zq);const pke=9,mx=100,mke=0,gke=0,B6=2,F6=1,vke=-1e3,yke=-1e3,_ke=2;class rD{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Fa.tablet||Fa.phone)&&this.createTouchHook();const n=document.createElement("div");n.style.width=`${mx}px`,n.style.height=`${mx}px`,n.style.position="absolute",n.style.top=`${mke}px`,n.style.left=`${gke}px`,n.style.zIndex=B6.toString(),this.div=n,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width=`${F6}px`,e.style.height=`${F6}px`,e.style.position="absolute",e.style.top=`${vke}px`,e.style.left=`${yke}px`,e.style.zIndex=_ke.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(e=this.renderer.view.parentNode)==null||e.appendChild(this.div))}deactivate(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(e=this.div.parentNode)==null||e.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const n=e.children;if(n)for(let r=0;r<n.length;r++)this.updateAccessibleObjects(n[r])}update(){const e=performance.now();if(Fa.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:n,y:r,width:i,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,c=i/o*l,u=s/a*l;let d=this.div;d.style.left=`${n}px`,d.style.top=`${r}px`,d.style.width=`${o}px`,d.style.height=`${a}px`;for(let h=0;h<this.children.length;h++){const f=this.children[h];if(f.renderId!==this.renderId)f._accessibleActive=!1,Wh(this.children,h,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,h--;else{d=f._accessibleDiv;let p=f.hitArea;const m=f.worldTransform;f.hitArea?(d.style.left=`${(m.tx+p.x*m.a)*c}px`,d.style.top=`${(m.ty+p.y*m.d)*u}px`,d.style.width=`${p.width*m.a*c}px`,d.style.height=`${p.height*m.d*u}px`):(p=f.getBounds(),this.capHitArea(p),d.style.left=`${p.x*c}px`,d.style.top=`${p.y*u}px`,d.style.width=`${p.width*c}px`,d.style.height=`${p.height*u}px`,d.title!==f.accessibleTitle&&f.accessibleTitle!==null&&(d.title=f.accessibleTitle),d.getAttribute("aria-label")!==f.accessibleHint&&f.accessibleHint!==null&&d.setAttribute("aria-label",f.accessibleHint)),(f.accessibleTitle!==d.title||f.tabIndex!==d.tabIndex)&&(d.title=f.accessibleTitle,d.tabIndex=f.tabIndex,this.debug&&this.updateDebugHTML(d))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:n,height:r}=this.renderer;e.x+e.width>n&&(e.width=n-e.x),e.y+e.height>r&&(e.height=r-e.y)}addChild(e){let n=this.pool.pop();n||(n=document.createElement("button"),n.style.width=`${mx}px`,n.style.height=`${mx}px`,n.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",n.style.position="absolute",n.style.zIndex=B6.toString(),n.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?n.setAttribute("aria-live","off"):n.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?n.setAttribute("aria-relevant","additions"):n.setAttribute("aria-relevant","text"),n.addEventListener("click",this._onClick.bind(this)),n.addEventListener("focus",this._onFocus.bind(this)),n.addEventListener("focusout",this._onFocusOut.bind(this))),n.style.pointerEvents=e.accessiblePointerEvents,n.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?n.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(n.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&n.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(n),e._accessibleActive=!0,e._accessibleDiv=n,n.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,n){const{displayObject:r}=e.target,i=this.renderer.events.rootBoundary,s=Object.assign(new kg(i),{target:r});i.rootTarget=this.renderer.lastObjectRendered,n.forEach(o=>i.dispatchEvent(s,o))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode===pke&&this.activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}rD.extension={name:"accessibility",type:[rt.RendererPlugin,rt.CanvasRendererPlugin]};bt.add(rD);const bke=Object.freeze(Object.defineProperty({__proto__:null,AccessibilityManager:rD,accessibleTarget:Zq},Symbol.toStringTag,{value:"Module"}));var wi=(t=>(t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t[t.COMPRESSED_RGBA_BPTC_UNORM_EXT=36492]="COMPRESSED_RGBA_BPTC_UNORM_EXT",t[t.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT=36493]="COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT",t[t.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT=36494]="COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT",t[t.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT=36495]="COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT",t))(wi||{});const Qy={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1,36492:1,36493:1,36494:1,36495:1};let El,Np;function U6(){Np={s3tc:El.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:El.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:El.getExtension("WEBGL_compressed_texture_etc"),etc1:El.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:El.getExtension("WEBGL_compressed_texture_pvrtc")||El.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:El.getExtension("WEBGL_compressed_texture_atc"),astc:El.getExtension("WEBGL_compressed_texture_astc"),bptc:El.getExtension("EXT_texture_compression_bptc")}}const Qq={extension:{type:rt.DetectionParser,priority:2},test:async()=>{const t=ht.ADAPTER.createCanvas().getContext("webgl");return t?(El=t,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async t=>{Np||U6();const e=[];for(const n in Np)Np[n]&&e.push(n);return[...e,...t]},remove:async t=>(Np||U6(),t.filter(e=>!(e in Np)))};bt.add(Qq);class Jq extends F1{constructor(e,n={width:1,height:1,autoLoad:!0}){let r,i;typeof e=="string"?(r=e,i=new Uint8Array):(r=null,i=e),super(i,n),this.origin=r,this.buffer=i?new Fw(i):null,this._load=null,this.loaded=!1,this.origin!==null&&n.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(e=>e.blob()).then(e=>e.arrayBuffer()).then(e=>(this.data=new Uint32Array(e),this.buffer=new Fw(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this)),this._load)}}class hd extends Jq{constructor(e,n){super(e,n),this.format=n.format,this.levels=n.levels||1,this._width=n.width,this._height=n.height,this._extension=hd._formatToExtension(this.format),(n.levelBuffers||this.buffer)&&(this._levelBuffers=n.levelBuffers||hd._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,n,r){const i=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;i.pixelStorei(i.UNPACK_ALIGNMENT,4);for(let s=0,o=this.levels;s<o;s++){const{levelID:a,levelWidth:l,levelHeight:c,levelBuffer:u}=this._levelBuffers[s];i.compressedTexImage2D(i.TEXTURE_2D,a,this.format,l,c,0,u)}return!0}onBlobLoaded(){this._levelBuffers=hd._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=35916&&e<=35919)return"s3tc_sRGB";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e===36196)return"etc1";if(e===35986||e===35987||e===34798)return"atc";if(e>=36492&&e<=36495)return"bptc";if(e===37808)return"astc";throw new Error(`Invalid (compressed) texture format given: ${e}`)}static _createLevelBuffers(e,n,r,i,s,o,a){const l=new Array(r);let c=e.byteOffset,u=o,d=a,h=u+i-1&~(i-1),f=d+s-1&~(s-1),p=h*f*Qy[n];for(let m=0;m<r;m++)l[m]={levelID:m,levelWidth:r>1?u:h,levelHeight:r>1?d:f,levelBuffer:new Uint8Array(e.buffer,c,p)},c+=p,u=u>>1||1,d=d>>1||1,h=u+i-1&~(i-1),f=d+s-1&~(s-1),p=h*f*Qy[n];return l}}const zP=4,gx=124,xke=32,z6=20,Eke=542327876,vx={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},wke={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},yx={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},Tke=1,Ske=2,Cke=4,Ake=64,Rke=512,Pke=131072,Ike=827611204,Mke=861165636,Lke=894720068,Oke=808540228,kke=4,Nke={[Ike]:wi.COMPRESSED_RGBA_S3TC_DXT1_EXT,[Mke]:wi.COMPRESSED_RGBA_S3TC_DXT3_EXT,[Lke]:wi.COMPRESSED_RGBA_S3TC_DXT5_EXT},Dke={70:wi.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:wi.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:wi.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:wi.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:wi.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:wi.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:wi.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:wi.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:wi.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT,96:wi.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,95:wi.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,98:wi.COMPRESSED_RGBA_BPTC_UNORM_EXT,99:wi.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT};function eZ(t){const e=new Uint32Array(t);if(e[0]!==Eke)throw new Error("Invalid DDS file magic word");const n=new Uint32Array(t,0,gx/Uint32Array.BYTES_PER_ELEMENT),r=n[vx.HEIGHT],i=n[vx.WIDTH],s=n[vx.MIPMAP_COUNT],o=new Uint32Array(t,vx.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,xke/Uint32Array.BYTES_PER_ELEMENT),a=o[Tke];if(a&Cke){const l=o[wke.FOURCC];if(l!==Oke){const x=Nke[l],b=zP+gx,E=new Uint8Array(t,b);return[new hd(E,{format:x,width:i,height:r,levels:s})]}const c=zP+gx,u=new Uint32Array(e.buffer,c,z6/Uint32Array.BYTES_PER_ELEMENT),d=u[yx.DXGI_FORMAT],h=u[yx.RESOURCE_DIMENSION],f=u[yx.MISC_FLAG],p=u[yx.ARRAY_SIZE],m=Dke[d];if(m===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${d}`);if(f===kke)throw new Error("DDSParser does not support cubemap textures");if(h===6)throw new Error("DDSParser does not supported 3D texture data");const _=new Array,y=zP+gx+z6;if(p===1)_.push(new Uint8Array(t,y));else{const x=Qy[m];let b=0,E=i,w=r;for(let C=0;C<s;C++){const P=Math.max(1,E+3&-4),M=Math.max(1,w+3&-4),N=P*M*x;b+=N,E=E>>>1,w=w>>>1}let T=y;for(let C=0;C<p;C++)_.push(new Uint8Array(t,T,b)),T+=b}return _.map(x=>new hd(x,{format:m,width:i,height:r,levels:s}))}throw a&Ake?new Error("DDSParser does not support uncompressed texture data."):a&Rke?new Error("DDSParser does not supported YUV uncompressed texture data."):a&Pke?new Error("DDSParser does not support single-channel (lumninance) texture data!"):a&Ske?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const $6=[171,75,84,88,32,49,49,187,13,10,26,10],Bke=67305985,Ca={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},AL=64,RL={[At.UNSIGNED_BYTE]:1,[At.UNSIGNED_SHORT]:2,[At.INT]:4,[At.UNSIGNED_INT]:4,[At.FLOAT]:4,[At.HALF_FLOAT]:8},tZ={[Ze.RGBA]:4,[Ze.RGB]:3,[Ze.RG]:2,[Ze.RED]:1,[Ze.LUMINANCE]:1,[Ze.LUMINANCE_ALPHA]:2,[Ze.ALPHA]:1},nZ={[At.UNSIGNED_SHORT_4_4_4_4]:2,[At.UNSIGNED_SHORT_5_5_5_1]:2,[At.UNSIGNED_SHORT_5_6_5]:2};function rZ(t,e,n=!1){const r=new DataView(e);if(!Fke(t,r))return null;const i=r.getUint32(Ca.ENDIANNESS,!0)===Bke,s=r.getUint32(Ca.GL_TYPE,i),o=r.getUint32(Ca.GL_FORMAT,i),a=r.getUint32(Ca.GL_INTERNAL_FORMAT,i),l=r.getUint32(Ca.PIXEL_WIDTH,i),c=r.getUint32(Ca.PIXEL_HEIGHT,i)||1,u=r.getUint32(Ca.PIXEL_DEPTH,i)||1,d=r.getUint32(Ca.NUMBER_OF_ARRAY_ELEMENTS,i)||1,h=r.getUint32(Ca.NUMBER_OF_FACES,i),f=r.getUint32(Ca.NUMBER_OF_MIPMAP_LEVELS,i),p=r.getUint32(Ca.BYTES_OF_KEY_VALUE_DATA,i);if(c===0||u!==1)throw new Error("Only 2D textures are supported");if(h!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(d!==1)throw new Error("WebGL does not support array textures");const m=4,_=4,y=l+3&-4,x=c+3&-4,b=new Array(d);let E=l*c;s===0&&(E=y*x);let w;if(s!==0?RL[s]?w=RL[s]*tZ[o]:w=nZ[s]:w=Qy[a],w===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const T=n?zke(r,p,i):null;let C=E*w,P=l,M=c,N=y,F=x,I=AL+p;for(let k=0;k<f;k++){const R=r.getUint32(I,i);let z=I+4;for(let X=0;X<d;X++){let G=b[X];G||(G=b[X]=new Array(f)),G[k]={levelID:k,levelWidth:f>1||s!==0?P:N,levelHeight:f>1||s!==0?M:F,levelBuffer:new Uint8Array(e,z,C)},z+=C}I+=R+4,I=I%4!==0?I+4-I%4:I,P=P>>1||1,M=M>>1||1,N=P+m-1&~(m-1),F=M+_-1&~(_-1),C=N*F*w}return s!==0?{uncompressed:b.map(k=>{let R=k[0].levelBuffer,z=!1;return s===At.FLOAT?R=new Float32Array(k[0].levelBuffer.buffer,k[0].levelBuffer.byteOffset,k[0].levelBuffer.byteLength/4):s===At.UNSIGNED_INT?(z=!0,R=new Uint32Array(k[0].levelBuffer.buffer,k[0].levelBuffer.byteOffset,k[0].levelBuffer.byteLength/4)):s===At.INT&&(z=!0,R=new Int32Array(k[0].levelBuffer.buffer,k[0].levelBuffer.byteOffset,k[0].levelBuffer.byteLength/4)),{resource:new F1(R,{width:k[0].levelWidth,height:k[0].levelHeight}),type:s,format:z?Uke(o):o}}),kvData:T}:{compressed:b.map(k=>new hd(null,{format:a,width:l,height:c,levels:f,levelBuffers:k})),kvData:T}}function Fke(t,e){for(let n=0;n<$6.length;n++)if(e.getUint8(n)!==$6[n])return console.error(`${t} is not a valid *.ktx file!`),!1;return!0}function Uke(t){switch(t){case Ze.RGBA:return Ze.RGBA_INTEGER;case Ze.RGB:return Ze.RGB_INTEGER;case Ze.RG:return Ze.RG_INTEGER;case Ze.RED:return Ze.RED_INTEGER;default:return t}}function zke(t,e,n){const r=new Map;let i=0;for(;i<e;){const s=t.getUint32(AL+i,n),o=AL+i+4,a=3-(s+3)%4;if(s===0||s>e-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<s&&t.getUint8(o+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const c=new TextDecoder().decode(new Uint8Array(t.buffer,o,l)),u=new DataView(t.buffer,o+l+1,s-l-1);r.set(c,u),i+=4+s+a}return r}const iZ={extension:{type:rt.LoadParser,priority:ga.High},name:"loadDDS",test(t){return Jc(t,".dds")},async load(t,e,n){const r=await(await ht.ADAPTER.fetch(t)).arrayBuffer(),i=eZ(r).map(s=>{const o=new Qt(s,{mipmap:Qa.OFF,alphaMode:Is.NO_PREMULTIPLIED_ALPHA,resolution:Gl(t),...e.data});return Og(o,n,t)});return i.length===1?i[0]:i},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};bt.add(iZ);const sZ={extension:{type:rt.LoadParser,priority:ga.High},name:"loadKTX",test(t){return Jc(t,".ktx")},async load(t,e,n){const r=await(await ht.ADAPTER.fetch(t)).arrayBuffer(),{compressed:i,uncompressed:s,kvData:o}=rZ(t,r),a=i??s,l={mipmap:Qa.OFF,alphaMode:Is.NO_PREMULTIPLIED_ALPHA,resolution:Gl(t),...e.data},c=a.map(u=>{a===s&&Object.assign(l,{type:u.type,format:u.format});const d=u.resource??u,h=new Qt(d,l);return h.ktxKeyValueData=o,Og(h,n,t)});return c.length===1?c[0]:c},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};bt.add(sZ);const oZ={extension:rt.ResolveParser,test:t=>{const e=ei.extname(t).slice(1);return["basis","ktx","dds"].includes(e)},parse:t=>{var n,r;const e=ei.extname(t).slice(1);if(e==="ktx"){const i=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx",".bptc.ktx"];if(i.some(s=>t.endsWith(s)))return{resolution:parseFloat(((n=ht.RETINA_PREFIX.exec(t))==null?void 0:n[1])??"1"),format:i.find(s=>t.endsWith(s)),src:t}}return{resolution:parseFloat(((r=ht.RETINA_PREFIX.exec(t))==null?void 0:r[1])??"1"),format:e,src:t}}};bt.add(oZ);const $ke=Object.freeze(Object.defineProperty({__proto__:null,BlobResource:Jq,CompressedTextureResource:hd,FORMATS_TO_COMPONENTS:tZ,INTERNAL_FORMATS:wi,INTERNAL_FORMAT_TO_BYTES_PER_PIXEL:Qy,TYPES_TO_BYTES_PER_COMPONENT:RL,TYPES_TO_BYTES_PER_PIXEL:nZ,detectCompressedTextures:Qq,loadDDS:iZ,loadKTX:sZ,parseDDS:eZ,parseKTX:rZ,resolveCompressedTextureUrl:oZ},Symbol.toStringTag,{value:"Module"})),_x=new Wt,jke=4,aZ=class dv{constructor(e){this.renderer=e,this._rendererPremultipliedAlpha=!1}contextChange(){var n;const e=(n=this.renderer)==null?void 0:n.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}async image(e,n,r,i){const s=new Image;return s.src=await this.base64(e,n,r,i),s}async base64(e,n,r,i){const s=this.canvas(e,i);if(s.toBlob!==void 0)return new Promise((o,a)=>{s.toBlob(l=>{if(!l){a(new Error("ICanvas.toBlob failed!"));return}const c=new FileReader;c.onload=()=>o(c.result),c.onerror=a,c.readAsDataURL(l)},n,r)});if(s.toDataURL!==void 0)return s.toDataURL(n,r);if(s.convertToBlob!==void 0){const o=await s.convertToBlob({type:n,quality:r});return new Promise((a,l)=>{const c=new FileReader;c.onload=()=>a(c.result),c.onerror=l,c.readAsDataURL(o)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(e,n){const{pixels:r,width:i,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,n);o&&dv._flipY(r,i,s),a&&dv._unpremultiplyAlpha(r);const l=new XY(i,s,1),c=new ImageData(new Uint8ClampedArray(r.buffer),i,s);return l.context.putImageData(c,0,0),l.canvas}pixels(e,n){const{pixels:r,width:i,height:s,flipY:o,premultipliedAlpha:a}=this._rawPixels(e,n);return o&&dv._flipY(r,i,s),a&&dv._unpremultiplyAlpha(r),r}_rawPixels(e,n){const r=this.renderer;if(!r)throw new Error("The Extract has already been destroyed");let i,s=!1,o=!1,a,l=!1;e&&(e instanceof zd?a=e:(a=r.generateTexture(e,{region:n,resolution:r.resolution,multisample:r.multisample}),l=!0,n&&(_x.width=n.width,_x.height=n.height,n=_x)));const c=r.gl;if(a){if(i=a.baseTexture.resolution,n=n??a.frame,s=!1,o=a.baseTexture.alphaMode>0&&a.baseTexture.format===Ze.RGBA,!l){r.renderTexture.bind(a);const f=a.framebuffer.glFramebuffers[r.CONTEXT_UID];f.blitFramebuffer&&r.framebuffer.bind(f.blitFramebuffer)}}else i=r.resolution,n||(n=_x,n.width=r.width/i,n.height=r.height/i),s=!0,o=this._rendererPremultipliedAlpha,r.renderTexture.bind();const u=Math.max(Math.round(n.width*i),1),d=Math.max(Math.round(n.height*i),1),h=new Uint8Array(jke*u*d);return c.readPixels(Math.round(n.x*i),Math.round(n.y*i),u,d,c.RGBA,c.UNSIGNED_BYTE,h),l&&(a==null||a.destroy(!0)),{pixels:h,width:u,height:d,flipY:s,premultipliedAlpha:o}}destroy(){this.renderer=null}static _flipY(e,n,r){const i=n<<2,s=r>>1,o=new Uint8Array(i);for(let a=0;a<s;a++){const l=a*i,c=(r-a-1)*i;o.set(e.subarray(l,l+i)),e.copyWithin(l,c,c+i),e.set(o,c)}}static _unpremultiplyAlpha(e){e instanceof Uint8ClampedArray&&(e=new Uint8Array(e.buffer));const n=e.length;for(let r=0;r<n;r+=4){const i=e[r+3];if(i!==0){const s=255.001/i;e[r]=e[r]*s+.5,e[r+1]=e[r+1]*s+.5,e[r+2]=e[r+2]*s+.5}}}};aZ.extension={name:"extract",type:rt.RendererSystem};let lZ=aZ;bt.add(lZ);const Gke=Object.freeze(Object.defineProperty({__proto__:null,Extract:lZ},Symbol.toStringTag,{value:"Module"}));class cZ{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function Hke(t,e){var r;let n=!1;if((r=t==null?void 0:t._textures)!=null&&r.length){for(let i=0;i<t._textures.length;i++)if(t._textures[i]instanceof zt){const s=t._textures[i].baseTexture;e.includes(s)||(e.push(s),n=!0)}}return n}function Vke(t,e){if(t.baseTexture instanceof Qt){const n=t.baseTexture;return e.includes(n)||e.push(n),!0}return!1}function Wke(t,e){if(t._texture&&t._texture instanceof zt){const n=t._texture.baseTexture;return e.includes(n)||e.push(n),!0}return!1}function Xke(t,e){return e instanceof dC?(e.updateText(!0),!0):!1}function Yke(t,e){if(e instanceof Io){const n=e.toFontString();return _c.measureFont(n),!0}return!1}function Kke(t,e){if(t instanceof dC){e.includes(t.style)||e.push(t.style),e.includes(t)||e.push(t);const n=t._texture.baseTexture;return e.includes(n)||e.push(n),!0}return!1}function qke(t,e){return t instanceof Io?(e.includes(t)||e.push(t),!0):!1}const uZ=class dZ{constructor(e){this.limiter=new cZ(dZ.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(Kke),this.registerFindHook(qke),this.registerFindHook(Hke),this.registerFindHook(Vke),this.registerFindHook(Wke),this.registerUploadHook(Xke),this.registerUploadHook(Yke)}upload(e){return new Promise(n=>{e&&this.add(e),this.queue.length?(this.completes.push(n),this.ticking||(this.ticking=!0,Qr.system.addOnce(this.tick,this,zc.UTILITY))):n()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let n=!1;if(e&&!e._destroyed){for(let r=0,i=this.uploadHooks.length;r<i;r++)if(this.uploadHooks[r](this.uploadHookHelper,e)){this.queue.shift(),n=!0;break}}n||this.queue.shift()}if(this.queue.length)Qr.system.addOnce(this.tick,this,zc.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let n=0,r=e.length;n<r;n++)e[n]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let n=0,r=this.addHooks.length;n<r&&!this.addHooks[n](e,this.queue);n++);if(e instanceof qi)for(let n=e.children.length-1;n>=0;n--)this.add(e.children[n]);return this}destroy(){this.ticking&&Qr.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};uZ.uploadsPerFrame=4;let Jw=uZ;Object.defineProperties(ht,{UPLOADS_PER_FRAME:{get(){return Jw.uploadsPerFrame},set(t){Ht("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),Jw.uploadsPerFrame=t}}});function hZ(t,e){return e instanceof Qt?(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0):!1}function Zke(t,e){if(!(e instanceof Sm))return!1;const{geometry:n}=e;e.finishPoly(),n.updateBatches();const{batches:r}=n;for(let i=0;i<r.length;i++){const{texture:s}=r[i].style;s&&hZ(t,s.baseTexture)}return n.batchable||t.geometry.bind(n,e._resolveDirectShader(t)),!0}function Qke(t,e){return t instanceof Sm?(e.push(t),!0):!1}class iD extends Jw{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(Qke),this.registerUploadHook(hZ),this.registerUploadHook(Zke)}}iD.extension={name:"prepare",type:rt.RendererSystem};bt.add(iD);class Jke{constructor(e){this.maxMilliseconds=e,this.frameStart=0}beginFrame(){this.frameStart=Date.now()}allowedToUpload(){return Date.now()-this.frameStart<this.maxMilliseconds}}const eNe=Object.freeze(Object.defineProperty({__proto__:null,BasePrepare:Jw,CountLimiter:cZ,Prepare:iD,TimeLimiter:Jke},Symbol.toStringTag,{value:"Module"})),fZ=class hv{constructor(e,n,r){this.linkedSheets=[],(e instanceof Qt||e instanceof zt)&&(e={texture:e,data:n,resolutionFilename:r});const{texture:i,data:s,resolutionFilename:o=null,cachePrefix:a=""}=e;this.cachePrefix=a,this._texture=i instanceof zt?i:null,this.baseTexture=i instanceof Qt?i:this._texture.baseTexture,this.textures={},this.animations={},this.data=s;const l=this.baseTexture.resource;this.resolution=this._updateResolution(o||(l?l.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:n}=this.data.meta;let r=Gl(e,null);return r===null&&(r=typeof n=="number"?n:parseFloat(n??"1")),r!==1&&this.baseTexture.setResolution(r),r}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=hv.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let n=e;const r=hv.BATCH_SIZE;for(;n-e<r&&n<this._frameKeys.length;){const i=this._frameKeys[n],s=this._frames[i],o=s.frame;if(o){let a=null,l=null;const c=s.trimmed!==!1&&s.sourceSize?s.sourceSize:s.frame,u=new Wt(0,0,Math.floor(c.w)/this.resolution,Math.floor(c.h)/this.resolution);s.rotated?a=new Wt(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.h)/this.resolution,Math.floor(o.w)/this.resolution):a=new Wt(Math.floor(o.x)/this.resolution,Math.floor(o.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution),s.trimmed!==!1&&s.spriteSourceSize&&(l=new Wt(Math.floor(s.spriteSourceSize.x)/this.resolution,Math.floor(s.spriteSourceSize.y)/this.resolution,Math.floor(o.w)/this.resolution,Math.floor(o.h)/this.resolution)),this.textures[i]=new zt(this.baseTexture,a,u,l,s.rotated?2:0,s.anchor,s.borders),zt.addToCache(this.textures[i],this.cachePrefix+i.toString())}n++}}_processAnimations(){const e=this.data.animations||{};for(const n in e){this.animations[n]=[];for(let r=0;r<e[n].length;r++){const i=e[n][r];this.animations[n].push(this.textures[i])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*hv.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*hv.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var n;for(const r in this.textures)this.textures[r].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((n=this._texture)==null||n.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};fZ.BATCH_SIZE=1e3;let PL=fZ;const tNe=["jpg","png","jpeg","avif","webp"];function pZ(t,e,n){const r={};if(t.forEach(i=>{r[i]=e}),Object.keys(e.textures).forEach(i=>{r[`${e.cachePrefix}${i}`]=e.textures[i]}),!n){const i=ei.dirname(t[0]);e.linkedSheets.forEach((s,o)=>{Object.assign(r,pZ([`${i}/${e.data.meta.related_multi_packs[o]}`],s,!0))})}return r}const mZ={extension:rt.Asset,cache:{test:t=>t instanceof PL,getCacheableAssets:(t,e)=>pZ(t,e,!1)},resolver:{test:t=>{const e=t.split("?")[0].split("."),n=e.pop(),r=e.pop();return n==="json"&&tNe.includes(r)},parse:t=>{var n;const e=t.split(".");return{resolution:parseFloat(((n=ht.RETINA_PREFIX.exec(t))==null?void 0:n[1])??"1"),format:e[e.length-2],src:t}}},loader:{name:"spritesheetLoader",extension:{type:rt.LoadParser,priority:ga.Normal},async testParse(t,e){return ei.extname(e.src).toLowerCase()===".json"&&!!t.frames},async parse(t,e,n){var u,d;const{texture:r,imageFilename:i,cachePrefix:s}=(e==null?void 0:e.data)??{};let o=ei.dirname(e.src);o&&o.lastIndexOf("/")!==o.length-1&&(o+="/");let a;if(r&&r.baseTexture)a=r;else{const h=Ww(o+(i??t.meta.image),e.src);a=(await n.load([h]))[h]}const l=new PL({texture:a.baseTexture,data:t,resolutionFilename:e.src,cachePrefix:s});await l.parse();const c=(u=t==null?void 0:t.meta)==null?void 0:u.related_multi_packs;if(Array.isArray(c)){const h=[];for(const p of c){if(typeof p!="string")continue;let m=o+p;(d=e.data)!=null&&d.ignoreMultiPack||(m=Ww(m,e.src),h.push(n.load({src:m,data:{ignoreMultiPack:!0}})))}const f=await Promise.all(h);l.linkedSheets=f,f.forEach(p=>{p.linkedSheets=[l].concat(l.linkedSheets.filter(m=>m!==p))})}return l},unload(t){t.destroy(!0)}}};bt.add(mZ);const nNe=Object.freeze(Object.defineProperty({__proto__:null,Spritesheet:PL,spritesheetAsset:mZ},Symbol.toStringTag,{value:"Module"})),IL=class Dp extends Io{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(e){return new Dp(Object.keys(Dp.defaultOptions).reduce((n,r)=>({...n,[r]:e[r]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(e=>{URL.revokeObjectURL(e.src),e.refs--,e.refs===0&&(e.fontFace&&document.fonts.delete(e.fontFace),delete Dp.availableFonts[e.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(e,n={}){const{availableFonts:r}=Dp;if(r[e]){const i=r[e];return this._fonts.push(i),i.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return ht.ADAPTER.fetch(e).then(i=>i.blob()).then(async i=>new Promise((s,o)=>{const a=URL.createObjectURL(i),l=new FileReader;l.onload=()=>s([a,l.result]),l.onerror=o,l.readAsDataURL(i)})).then(async([i,s])=>{const o=Object.assign({family:ei.basename(e,ei.extname(e)),weight:"normal",style:"normal",display:"auto",src:i,dataSrc:s,refs:1,originalUrl:e,fontFace:null},n);r[e]=o,this._fonts.push(o),this.styleID++;const a=new FontFace(o.family,`url(${o.src})`,{weight:o.weight,style:o.style,display:o.display});o.fontFace=a,await a.load(),document.fonts.add(a),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...e){const n=e.filter(r=>!this._overrides.includes(r));n.length>0&&(this._overrides.push(...n),this.styleID++)}removeOverride(...e){const n=e.filter(r=>this._overrides.includes(r));n.length>0&&(this._overrides=this._overrides.filter(r=>!n.includes(r)),this.styleID++)}toCSS(e){return[`transform: scale(${e})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((e,n)=>`${e}
            @font-face {
                font-family: "${n.family}";
                src: url('${n.dataSrc}');
                font-weight: ${n.weight};
                font-style: ${n.style};
                font-display: ${n.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(e){this._stylesheet!==e&&(this._stylesheet=e,this.styleID++)}normalizeColor(e){return Array.isArray(e)&&(e=HY(e)),typeof e=="number"?GY(e):e}dropShadowToCSS(){let e=this.normalizeColor(this.dropShadowColor);const n=this.dropShadowAlpha,r=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),i=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);e.startsWith("#")&&n<1&&(e+=(n*255|0).toString(16).padStart(2,"0"));const s=`${r}px ${i}px`;return this.dropShadowBlur>0?`text-shadow: ${s} ${this.dropShadowBlur}px ${e}`:`text-shadow: ${s} ${e}`}reset(){Object.assign(this,Dp.defaultOptions)}onBeforeDraw(){const{fontsDirty:e}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&e?new Promise(n=>setTimeout(n,100)):Promise.resolve()}get isSafari(){const{userAgent:e}=ht.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(e)}set fillGradientStops(e){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(e){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(e){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(e){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(e){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(e){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(e){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};IL.availableFonts={},IL.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let EE=IL;const fv=class Bp extends tl{constructor(e="",n={}){super(zt.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const r=new Image,i=zt.from(r,{scaleMode:ht.SCALE_MODE,resourceOptions:{autoLoad:!1}});i.orig=new Wt,i.trim=new Wt,this.texture=i;const s="http://www.w3.org/2000/svg",o="http://www.w3.org/1999/xhtml",a=document.createElementNS(s,"svg"),l=document.createElementNS(s,"foreignObject"),c=document.createElementNS(o,"div"),u=document.createElementNS(o,"style");l.setAttribute("width","10000"),l.setAttribute("height","10000"),l.style.overflow="hidden",a.appendChild(l),this.maxWidth=Bp.defaultMaxWidth,this.maxHeight=Bp.defaultMaxHeight,this._domElement=c,this._styleElement=u,this._svgRoot=a,this._foreignObject=l,this._foreignObject.appendChild(u),this._foreignObject.appendChild(c),this._image=r,this._loadImage=new Image,this._autoResolution=Bp.defaultAutoResolution,this._resolution=Bp.defaultResolution??ht.RESOLUTION,this.text=e,this.style=n}measureText(e){var u,d;const{text:n,style:r,resolution:i}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},e);Object.assign(this._domElement,{innerHTML:n,style:r.toCSS(i)}),this._styleElement.textContent=r.toGlobalCSS(),document.body.appendChild(this._svgRoot);const s=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:o,height:a}=s;(o>this.maxWidth||a>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const l=Math.min(this.maxWidth,Math.ceil(o)),c=Math.min(this.maxHeight,Math.ceil(a));return this._svgRoot.setAttribute("width",l.toString()),this._svgRoot.setAttribute("height",c.toString()),n!==this._text&&(this._domElement.innerHTML=this._text),r!==this._style&&(Object.assign(this._domElement,{style:(u=this._style)==null?void 0:u.toCSS(i)}),this._styleElement.textContent=(d=this._style)==null?void 0:d.toGlobalCSS()),{width:l+r.padding*2,height:c+r.padding*2}}async updateText(e=!0){const{style:n,_image:r,_loadImage:i}=this;if(this.localStyleID!==n.styleID&&(this.dirty=!0,this.localStyleID=n.styleID),!this.dirty&&e)return;const{width:s,height:o}=this.measureText();r.width=i.width=Math.ceil(Math.max(1,s)),r.height=i.height=Math.ceil(Math.max(1,o)),this._updateID++;const a=this._updateID;await new Promise(l=>{i.onload=async()=>{if(a<this._updateID){l();return}await n.onBeforeDraw(),r.src=i.src,i.onload=null,i.src="",this.updateTexture(),l()};const c=new XMLSerializer().serializeToString(this._svgRoot);i.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(c)}`})}get source(){return this._image}updateTexture(){const{style:e,texture:n,_image:r,resolution:i}=this,{padding:s}=e,{baseTexture:o}=n;n.trim.width=n._frame.width=r.width/i,n.trim.height=n._frame.height=r.height/i,n.trim.x=-s,n.trim.y=-s,n.orig.width=n._frame.width-s*2,n.orig.height=n._frame.height-s*2,this._onTextureUpdate(),o.setRealSize(r.width,r.height,i),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}_renderCanvas(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(e)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds(e)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(e){var r,i,s,o,a;typeof e=="boolean"&&(e={children:e}),e=Object.assign({},Bp.defaultDestroyOptions,e),super.destroy(e);const n=null;this.ownsStyle&&((r=this._style)==null||r.cleanFonts()),this._style=n,(i=this._svgRoot)==null||i.remove(),this._svgRoot=n,(s=this._domElement)==null||s.remove(),this._domElement=n,(o=this._foreignObject)==null||o.remove(),this._foreignObject=n,(a=this._styleElement)==null||a.remove(),this._styleElement=n,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=n,this._image.src="",this._image=n}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(e){this.updateText(!0);const n=Cc(this.scale.x)||1;this.scale.x=n*e/this._image.width/this.resolution,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(e){this.updateText(!0);const n=Cc(this.scale.y)||1;this.scale.y=n*e/this._image.height/this.resolution,this._height=e}get style(){return this._style}set style(e){this._style!==e&&(e=e||{},e instanceof EE?(this.ownsStyle=!1,this._style=e):e instanceof Io?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=EE.from(e)):(this.ownsStyle=!0,this._style=new EE(e)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(e){e=String(e===""||e===null||e===void 0?" ":e),e=this.sanitiseText(e),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}sanitiseText(e){return e.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};fv.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},fv.defaultMaxWidth=2024,fv.defaultMaxHeight=2024,fv.defaultAutoResolution=!0;let rNe=fv;const iNe=Object.freeze(Object.defineProperty({__proto__:null,HTMLText:rNe,HTMLTextStyle:EE},Symbol.toStringTag,{value:"Module"})),sNe=new Io({fontSize:14,fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fill:"#333333",align:"center"}),oNe=new Io({fontSize:14,fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fill:"#dd0000",align:"center"}),aNe=new Io({fontSize:11,fontFamily:'"Source Sans Pro", Helvetica, sans-serif',align:"center",fill:"#333333"}),Pa=t=>new Io({fontSize:11,fontFamily:'"Source Sans Pro", Helvetica, sans-serif',fill:"#333333",align:"center",...t}),lNe=t=>{if(!t.city)return null;const e=n=>{n.clear(),n.beginFill(cY,.7),n.lineStyle(2,170,1),n.drawRoundedRect(-90,-50,170,195,20),n.endFill()};return Pe(fn.Container,{position:{x:t.x,y:t.y},children:[D(fn.Graphics,{draw:e}),D(fn.Text,{x:0,y:-30,anchor:{x:.5,y:.5},style:Pa({fontSize:14,fill:170}),text:`(${t.city.point[0].toFixed(2)}, ${t.city.point[1].toFixed(2)})`}),D(fn.Sprite,{image:jq,x:0,y:0,scale:{x:.3,y:.3},anchor:{x:.5,y:.5}}),D(fn.Text,{x:0,y:28,anchor:{x:.5,y:.5},style:Pa({fontSize:18,fill:170}),text:`#${t.index}`}),D(fn.Text,{x:0,y:45,anchor:{x:.5,y:.5},style:Pa({fontSize:10,fill:170}),text:t.city.label.length<28?t.city.label:t.city.label.substring(0,28)+"..."}),D(fn.Text,{x:0,y:60,anchor:{x:.5,y:.5},style:Pa({fontSize:11,fill:136}),text:`share of manufacturing = ${t.city.manufactureShare.toFixed(3)} `}),D(fn.Text,{x:0,y:75,anchor:{x:.5,y:.5},style:Pa({fontSize:11,fill:136}),text:`      share of agriculture = ${t.city.agricultureShare.toFixed(3)} `}),D(fn.Text,{x:0,y:90,anchor:{x:.5,y:.5},style:Pa({fontSize:11,fill:136}),text:`        price index = ${t.city.priceIndex.toFixed(3)} `}),D(fn.Text,{x:0,y:105,anchor:{x:.5,y:.5},style:Pa({fontSize:11,fill:136}),text:`    nominal wage = ${t.city.nominalWage.toFixed(3)} `}),D(fn.Text,{x:0,y:120,anchor:{x:.5,y:.5},style:Pa({fontSize:11,fill:136}),text:`          real wage = ${t.city.realWage.toFixed(3)} `}),D(fn.Text,{x:0,y:135,anchor:{x:.5,y:.5},style:Pa({fontSize:11,fill:136}),text:`    GDP = ${t.city.priceIndex.toFixed(3)} `})]})},cNe=t=>D(fn.Container,{children:D(fn.Graphics,{draw:e=>{e.clear(),t.focusedIndices.map(n=>{const r=t.locations[n];r&&(e.beginFill(16776960,.2),e.drawCircle(r.point[0],r.point[1],35),e.endFill())})}})}),uNe=t=>D(fn.Container,{children:D(fn.Graphics,{draw:e=>{e.clear(),t.selectedIndices.map(n=>{const r=t.locations[n];r&&(e.beginFill(16776960,.8),t.focusedIndices.includes(n)?e.lineStyle(2,16711680,.6):e.lineStyle(2,16711680,.2),e.drawCircle(r.point[0],r.point[1],35),e.endFill())})}})}),dNe=t=>D(fn.Container,{children:t.edges.map((e,n)=>D(hNe,{edge:e,index:n,...t},n))}),hNe=t=>{const e=MI(t.locations,t.edge.source),n=MI(t.locations,t.edge.target),r=t.locations[e],i=t.locations[n];if(!r||!i)return;const{x:s,y:o}={x:(r.point[0]+i.point[0])/2,y:(r.point[1]+i.point[1])/2},a=Gn.useCallback(l=>{l.clear(),l.lineStyle({width:1,color:0,alpha:.1,alignment:.5}),l.moveTo(r.point[0],r.point[1]),l.lineTo(i.point[0],i.point[1])},[r.point[0],i.point[0],r.point[1],i.point[1]]);return Pe(fn.Container,{children:[D(fn.Graphics,{draw:a}),!(t.focusedIndices.length===2&&e===t.focusedIndices[0]&&n===t.focusedIndices[1])&&!(t.selectedIndices.length===2&&e===t.selectedIndices[0]&&n===t.selectedIndices[1])&&D(fn.Text,{text:t.edge.distance.toFixed(2),position:{x:s,y:o},anchor:{x:.5,y:.5},style:aNe})]},t.index)},fNe=t=>D(fn.Container,{children:t.locations.map((e,n)=>D(pNe,{index:n,...t},e.id))}),pNe=t=>{const[e,n]=Gn.useState(null),r=t.locations[t.index],i=A.useCallback(c=>{c.preventDefault(),t.onDragStart(c.clientX,c.clientY,t.index)},[t.index]),s=A.useCallback(c=>{if(c.preventDefault(),t.draggingIndex===t.index){c.currentTarget.cursor="grabbing";const u=c.currentTarget.parent.parent,d=c.getLocalPosition(u),h=t.locations[t.index],f=d.x-h.point[0],p=d.y-h.point[1];t.onDrag(f,p,t.index)}},[t.draggingIndex,t.locations,t.onDrag,t.index]),o=A.useCallback(c=>{c.preventDefault(),c.currentTarget.cursor="pointer",t.onPointerUp(c,t.index),t.onDragEnd(c.clientX,c.clientY,t.index)},[t.onPointerUp,t.onDragEnd,t.index,e]),a=A.useCallback(c=>{c.preventDefault(),t.onPointerEnter(c,t.index),n(t.index)},[t.onPointerEnter,t.index]),l=A.useCallback(c=>{c.preventDefault(),t.onPointerLeave(c,t.index),n(null)},[t.onPointerLeave,t.index]);return Pe(fn.Container,{position:{x:r.point[0],y:r.point[1]},interactive:!0,eventMode:"static",children:[D(fn.Graphics,{draw:c=>{const u=t.locations[t.index];c.clear(),u.manufactureShare0<u.manufactureShare?c.lineStyle(1,255,.5):c.lineStyle(0,0,.1),c.beginFill(1668818,.25),c.drawCircle(0,0,100*u.manufactureShare),c.endFill()}}),D(fn.Sprite,{texture:t.cityTexture,width:20,height:20,anchor:{x:.5,y:.5},alpha:t.draggingIndex===t.index?.3:1,interactive:!0,eventMode:"static",onpointerdown:i,onpointerupoutside:o,onmouseup:o,onpointerenter:a,onpointerleave:l,onglobalpointermove:s}),D(fn.Text,{text:`#${t.index}`,position:{x:0,y:20},anchor:{x:.5,y:.5},style:sNe}),e===t.index&&D(fn.Text,{text:r.label,position:{x:-10,y:45},anchor:{x:0,y:.5},style:oNe})]},t.index)};var gZ={},vZ={};const yZ=In(qIe),_Z=In(VOe),bZ=In(ZOe),xZ=In(JOe),EZ=In(nke),wZ=In(ske),TZ=In(ake);var mNe=yZ,gNe=_Z,j6=bZ,vNe=xZ,yNe=EZ,_Ne=wZ,bNe=TZ;const ML={AlphaFilter:gNe.AlphaFilter,BlurFilter:j6.BlurFilter,BlurFilterPass:j6.BlurFilterPass,ColorMatrixFilter:vNe.ColorMatrixFilter,DisplacementFilter:yNe.DisplacementFilter,FXAAFilter:_Ne.FXAAFilter,NoiseFilter:bNe.NoiseFilter};Object.entries(ML).forEach(([t,e])=>{Object.defineProperty(ML,t,{get(){return mNe.utils.deprecation("7.1.0",`filters.${t} has moved to ${t}`),e}})});vZ.filters=ML;const xNe=In(bke),ENe=In(nLe),wNe=In(FMe),TNe=In($ke),SNe=In(JIe),CNe=In(fke),ANe=In(Gke),RNe=In(VMe),PNe=In(dMe),INe=In(WMe),MNe=In(KMe),LNe=In(eNe),ONe=In(tMe),kNe=In(qMe),NNe=In(tLe),DNe=In(nNe),BNe=In(sMe),FNe=In(zMe),UNe=In(iNe);(function(t){var e=vZ,n=xNe,r=ENe,i=wNe,s=TNe,o=yZ,a=SNe,l=CNe,c=ANe,u=_Z,d=bZ,h=xZ,f=EZ,p=wZ,m=TZ,_=RNe,y=PNe,x=INe,b=MNe,E=LNe,w=ONe,T=kNe,C=NNe,P=DNe,M=BNe,N=FNe,F=UNe;t.filters=e.filters,Object.keys(n).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return n[I]}})}),Object.keys(r).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return r[I]}})}),Object.keys(i).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return i[I]}})}),Object.keys(s).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return s[I]}})}),Object.keys(o).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return o[I]}})}),Object.keys(a).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return a[I]}})}),Object.keys(l).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return l[I]}})}),Object.keys(c).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return c[I]}})}),Object.keys(u).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return u[I]}})}),Object.keys(d).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return d[I]}})}),Object.keys(h).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return h[I]}})}),Object.keys(f).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return f[I]}})}),Object.keys(p).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return p[I]}})}),Object.keys(m).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return m[I]}})}),Object.keys(_).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return _[I]}})}),Object.keys(y).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return y[I]}})}),Object.keys(x).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return x[I]}})}),Object.keys(b).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return b[I]}})}),Object.keys(E).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return E[I]}})}),Object.keys(w).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return w[I]}})}),Object.keys(T).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return T[I]}})}),Object.keys(C).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return C[I]}})}),Object.keys(P).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return P[I]}})}),Object.keys(M).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return M[I]}})}),Object.keys(N).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return N[I]}})}),Object.keys(F).forEach(function(I){I!=="default"&&!Object.prototype.hasOwnProperty.call(t,I)&&Object.defineProperty(t,I,{enumerable:!0,get:function(){return F[I]}})})})(gZ);var eT=Pi&&Pi.__assign||function(){return eT=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},eT.apply(this,arguments)},SZ=void 0,ml=gZ,zNe={dash:[10,5],width:1,color:16777215,alpha:1,scale:1,useTexture:!1,alignment:.5},$Ne=function(){function t(e,n){n===void 0&&(n={}),this.cursor=new ml.Point,this.scale=1,this.graphics=e,n=eT(eT({},zNe),n),this.dash=n.dash,this.dashSize=this.dash.reduce(function(r,i){return r+i}),this.useTexture=n.useTexture,this.options=n,this.setLineStyle()}return t.prototype.setLineStyle=function(){var e=this.options;if(this.useTexture){var n=t.getTexture(e,this.dashSize);this.graphics.lineTextureStyle({width:e.width*e.scale,color:e.color,alpha:e.alpha,texture:n,alignment:e.alignment}),this.activeTexture=n}else this.graphics.lineStyle({width:e.width*e.scale,color:e.color,alpha:e.alpha,cap:e.cap,join:e.join,alignment:e.alignment});this.scale=e.scale},t.distance=function(e,n,r,i){return Math.sqrt(Math.pow(r-e,2)+Math.pow(i-n,2))},t.prototype.moveTo=function(e,n){return this.lineLength=0,this.cursor.set(e,n),this.start=new ml.Point(e,n),this.graphics.moveTo(this.cursor.x,this.cursor.y),this},t.prototype.lineTo=function(e,n,r){typeof this.lineLength===void 0&&this.moveTo(0,0);var i=t.distance(this.cursor.x,this.cursor.y,e,n),s=Math.atan2(n-this.cursor.y,e-this.cursor.x),o=r&&e===this.start.x&&n===this.start.y;if(this.useTexture)if(this.graphics.moveTo(this.cursor.x,this.cursor.y),this.adjustLineStyle(s),o&&this.dash.length%2===0){var a=Math.min(this.dash[this.dash.length-1],i);this.graphics.lineTo(e-Math.cos(s)*a,n-Math.sin(s)*a),this.graphics.closePath()}else this.graphics.lineTo(e,n);else{for(var l=Math.cos(s),c=Math.sin(s),u=this.cursor.x,d=this.cursor.y,h=this.lineLength%(this.dashSize*this.scale),f=0,p=0,m=0,_=0;_<this.dash.length;_++){var y=this.dash[_]*this.scale;if(h<m+y){f=_,p=h-m;break}else m+=y}for(var x=i;x>0;){var y=this.dash[f]*this.scale-p,b=x>y?y:x;if(o){var E=t.distance(u+l*b,d+c*b,this.start.x,this.start.y);if(E<=b){if(f%2===0){var w=t.distance(u,d,this.start.x,this.start.y)-this.dash[this.dash.length-1]*this.scale;u+=l*w,d+=c*w,this.graphics.lineTo(u,d)}break}}u+=l*b,d+=c*b,f%2?this.graphics.moveTo(u,d):this.graphics.lineTo(u,d),x-=b,f++,f=f===this.dash.length?0:f,p=0}}return this.lineLength+=i,this.cursor.set(e,n),this},t.prototype.closePath=function(){this.lineTo(this.start.x,this.start.y,!0)},t.prototype.drawCircle=function(e,n,r,i,s){i===void 0&&(i=80);var o=Math.PI*2/i,a=0,l;s?(l=new ml.Point(e+Math.cos(a)*r,n+Math.sin(a)*r),s.apply(l,l),this.moveTo(l[0],l[1])):(l=new ml.Point(e+Math.cos(a)*r,n+Math.sin(a)*r),this.moveTo(l.x,l.y)),a+=o;for(var c=1;c<i+1;c++){var u=c===i?l:[e+Math.cos(a)*r,n+Math.sin(a)*r];this.lineTo(u[0],u[1]),a+=o}return this},t.prototype.drawEllipse=function(e,n,r,i,s,o){s===void 0&&(s=80);for(var a=Math.PI*2/s,l,c=new ml.Point,u=0;u<Math.PI*2;u+=a){var d=e-r*Math.sin(u),h=n-i*Math.cos(u);o&&(c.set(d,h),o.apply(c,c),d=c.x,h=c.y),u===0?(this.moveTo(d,h),l={x:d,y:h}):this.lineTo(d,h)}return this.lineTo(l.x,l.y,!0),this},t.prototype.drawPolygon=function(e,n){var r=new ml.Point;if(typeof e[0]=="number")if(n){r.set(e[0],e[1]),n.apply(r,r),this.moveTo(r.x,r.y);for(var i=2;i<e.length;i+=2)r.set(e[i],e[i+1]),n.apply(r,r),this.lineTo(r.x,r.y,i===e.length-2)}else{this.moveTo(e[0],e[1]);for(var i=2;i<e.length;i+=2)this.lineTo(e[i],e[i+1],i===e.length-2)}else if(n){var s=e[0];r.copyFrom(s),n.apply(r,r),this.moveTo(r.x,r.y);for(var i=1;i<e.length;i++){var o=e[i];r.copyFrom(o),n.apply(r,r),this.lineTo(r.x,r.y,i===e.length-1)}}else{var s=e[0];this.moveTo(s.x,s.y);for(var i=1;i<e.length;i++){var a=e[i];this.lineTo(a.x,a.y,i===e.length-1)}}return this},t.prototype.drawRect=function(e,n,r,i,s){if(s){var o=new ml.Point;o.set(e,n),s.apply(o,o),this.moveTo(o.x,o.y),o.set(e+r,n),s.apply(o,o),this.lineTo(o.x,o.y),o.set(e+r,n+i),s.apply(o,o),this.lineTo(o.x,o.y),o.set(e,n+i),s.apply(o,o),this.lineTo(o.x,o.y),o.set(e,n),s.apply(o,o),this.lineTo(o.x,o.y,!0)}else this.moveTo(e,n).lineTo(e+r,n).lineTo(e+r,n+i).lineTo(e,n+i).lineTo(e,n,!0);return this},t.prototype.adjustLineStyle=function(e){var n=this.graphics.line;n.matrix=new ml.Matrix,e&&n.matrix.rotate(e),this.scale!==1&&n.matrix.scale(this.scale,this.scale);var r=-this.lineLength;n.matrix.translate(this.cursor.x+r*Math.cos(e),this.cursor.y+r*Math.sin(e)),this.graphics.lineStyle(n)},t.getTexture=function(e,n){var r=e.dash.toString();if(t.dashTextureCache[r])return t.dashTextureCache[r];var i=document.createElement("canvas");i.width=n,i.height=Math.ceil(e.width);var s=i.getContext("2d");if(!s){console.warn("Did not get context from canvas");return}s.strokeStyle="white",s.globalAlpha=e.alpha,s.lineWidth=e.width;var o=0,a=e.width/2;s.moveTo(o,a);for(var l=0;l<e.dash.length;l+=2)o+=e.dash[l],s.lineTo(o,a),e.dash.length!==l+1&&(o+=e.dash[l+1],s.moveTo(o,a));s.stroke();var c=t.dashTextureCache[r]=ml.Texture.from(i);return c.baseTexture.scaleMode=ml.SCALE_MODES.NEAREST,c},t.dashTextureCache={},t}();SZ=$Ne;const G6=t=>{if(t.focusedIndices.length<=1||!t.adjacencyMatrix||!t.distanceMatrix||!t.predecessorMatrix)return;let e=t.focusedIndices[0];const n=t.focusedIndices[1];let r=e,i=zm(t.locations,e);if(!i)return;const s=[i],o=[];for(let c=0;r!==n&&c<t.locations.length;c++){const u=t.predecessorMatrix[r][n];if(u===-1)break;const d=t.locations[u];d&&(s.push(d),Bc(t.distanceMatrix[e][n])||o.push({text:t.adjacencyMatrix[r][u].toFixed(2),x:(i.point[0]+d.point[0])/2,y:(i.point[1]+d.point[1])/2}),r=u,i=d)}const a=c=>{const u=t.focusedIndices[0],d=t.focusedIndices[1];let h=zm(t.locations,u);if(c.clear(),h&&t.distanceMatrix&&t.predecessorMatrix&&t.predecessorMatrix[u][d]!==-1&&u<t.locations.length&&d<t.locations.length){c.lineStyle({width:2,color:t.color||16755200,alpha:.25,alignment:.5,cap:za.ROUND,join:Ss.ROUND}),c.moveTo(h.point[0],h.point[1]),s.forEach(p=>c.lineTo(p.point[0],p.point[1]));const f=new SZ(c,{dash:[1,15],width:10,color:t.color||16711680,alpha:.25,alignment:.5,cap:za.ROUND,join:Ss.ROUND});f.moveTo(t.locations[u].point[0],t.locations[u].point[1]),f.lineTo(t.locations[d].point[0],t.locations[d].point[1])}},l=t.distanceMatrix[e][n];return Pe(fn.Container,{children:[D(fn.Graphics,{draw:a}),Pe(fn.Container,{children:[o.map((c,u)=>D(fn.Text,{text:c.text,position:{x:c.x,y:c.y},anchor:{x:.5,y:.5},style:Pa({fontSize:11,alpha:1,dropShadow:!0,dropShadowAlpha:.5,dropShadowColor:16776960,fill:16776960})},u)),!Bc(l)&&l>0&&e<t.locations.length&&n<t.locations.length&&D(fn.Text,{text:t.distanceMatrix[e][n].toFixed(2),position:{x:(t.locations[e].point[0]+t.locations[n].point[0])/2,y:(t.locations[e].point[1]+t.locations[n].point[1])/2},anchor:{x:.5,y:.5},style:Pa({fontSize:15,fill:16711680,dropShadow:!1,dropShadowAlpha:.1,dropShadowBlur:1,dropShadowColor:0})})]})]})},jNe=t=>{const[e,n]=A.useState(null);return D(fn.Container,{children:D(fn.Graphics,{draw:r=>{r.clear();const i=100,s=Math.ceil(2e3/i)+1,o=Math.ceil(2e3/i)+1;for(let a=-s;a<s;a++)for(let l=-o;l<o;l++)(a+l)%2===0?r.beginFill(16777215,.001+t.backgroundAlpha):r.beginFill(255,.001+.05*t.backgroundAlpha),r.drawRect(a*i,l*i,i,i),r.endFill()},eventMode:"static",onmousedown:r=>{n([r.clientX,r.clientY])},onmouseup:r=>{e&&r.clientX===e[0]&&r.clientY===e[1]&&(n(null),t.clearSelection())}})})},GNe=zt.from(jq),HNe=Gn.memo(t=>{const e=A.useRef(null),[n,r]=A.useState(0),i=t.sessionState,s=i.locations,o=i.edges,a=t.focusedIndices,l=t.selectedIndices,c=t.draggingIndex!==null?i.locations[t.draggingIndex]:null,u=t.focusedIndices.length>0?zm(i.locations,t.focusedIndices[0]):null,d=t.selectedIndices.length>0?zm(i.locations,t.selectedIndices[0]):null,h=A.useCallback(()=>{r(.5)},[]),f=A.useCallback(()=>{r(0)},[]),p=A.useCallback((k,R)=>{e.current.style.cursor="pointer",c||t.onFocus([R])},[t.onFocus]),m=A.useCallback((k,R)=>{e.current.style.cursor="default",c||t.onUnfocus([R])},[t.onUnfocus]),_=A.useCallback((k,R)=>{},[]),y=A.useCallback((k,R)=>{k.preventDefault(),e.current.style.cursor="default",t.onPointerUp(k.clientX,k.clientY,R)},[t.onPointerUp]),x=A.useCallback(k=>{},[]),b=A.useCallback(()=>{t.onClearSelection()},[t.onClearSelection]),E=u??c??d,w=a.length>0?a[0]:t.draggingIndex&&t.draggingIndex>=0?t.draggingIndex:l.length>0?l[0]:-1,T=A.useCallback(k=>{t.overrideViewportCenter(k)},[t.overrideViewportCenter]),C=A.useCallback(()=>{h(),e.current.style.cursor="grabbing"},[]),P=A.useCallback(()=>{f(),e.current.style.cursor="default"},[t.viewportCenter]),M=A.useCallback(()=>{e.current.style.cursor="default"},[]),N=A.useCallback(k=>{h()},[]),F=A.useCallback(k=>{t.onMoved({x:k.viewport.center.x,y:k.viewport.center.y,zoom:k.viewport.scale.x})},[]),I=A.useCallback(({x:k,y:R,zoom:z})=>{t.onMovedEnd({x:k,y:R,zoom:z})},[]);return D("div",{ref:e,style:{zIndex:100},children:Pe(fn.Stage,{width:t.width,height:t.height,options:{backgroundColor:cY,backgroundAlpha:.1},children:[Pe(zOe,{pause:t.draggingIndex!==null,boundingBox:t.boundingBox,screenWidth:t.width,screenHeight:t.height,viewportCenter:t.viewportCenter,onSetViewportCenter:T,onDragStart:C,onDragEnd:P,onPinchStart:h,onPinchEnd:f,onSnapStart:h,onSnapEnd:f,onSnapZoomStart:h,onSnapZoomEnd:f,onZoomed:N,onZoomedEnd:f,onMouseUp:M,onMoved:F,onMovedEnd:I,children:[D(jNe,{backgroundAlpha:n,clearSelection:b}),D(cNe,{focusedIndices:a,locations:s,width:t.width,height:t.height}),D(uNe,{selectedIndices:l,focusedIndices:a,locations:s,width:t.width,height:t.height}),a.length===2&&t.matrices.distanceMatrix&&a[0]<t.matrices.distanceMatrix.length&&a[1]<t.matrices.distanceMatrix[a[0]].length&&!Bc(t.matrices.distanceMatrix[a[0]][a[1]])&&D(G6,{edges:o,locations:s,width:t.width,height:t.height,focusedIndices:a,adjacencyMatrix:t.matrices.adjacencyMatrix,distanceMatrix:t.matrices.distanceMatrix,predecessorMatrix:t.matrices.predecessorMatrix}),l.length===2&&!Bc(t.matrices.distanceMatrix[l[0]][l[1]])&&D(G6,{edges:o,locations:s,width:t.width,height:t.height,focusedIndices:l,adjacencyMatrix:t.matrices.adjacencyMatrix,distanceMatrix:t.matrices.distanceMatrix,predecessorMatrix:t.matrices.predecessorMatrix,color:16724787}),D(dNe,{edges:o,locations:s,focusedIndices:a,selectedIndices:l}),D(fNe,{locations:s,selectedIndices:l,draggingIndex:t.draggingIndex,onDragStart:t.onDragStart,onDragEnd:t.onDragEnd,onDrag:t.onDrag,width:t.width,height:t.height,cityTexture:GNe,onPointerEnter:p,onPointerLeave:m,onPointerDown:_,onPointerUp:y,onPointerMove:x})]}),E&&D(lNe,{index:w,city:E,x:140,y:t.height-155})]})})}),CZ=A.memo(({width:t,height:e,sessionState:n,uiState:r,matrices:i,overrideViewportCenter:s,onDragStart:o,onDragEnd:a,onDrag:l,onFocus:c,onUnfocus:u,onPointerUp:d,onClearSelection:h,onMovedEnd:f,onMoved:p})=>D(HNe,{width:t,height:e,boundingBox:{...aY(n.locations),paddingMarginRatio:uY},onDragStart:o,onDrag:l,onMoved:p,onMovedEnd:f,onDragEnd:a,onFocus:c,onUnfocus:u,onPointerUp:d,onClearSelection:h,draggingIndex:r.draggingIndex,sessionState:n,viewportCenter:r.viewportCenter,overrideViewportCenter:s,selectedIndices:r.selectedIndices,focusedIndices:r.focusedIndices,matrices:i})),VNe=()=>{const{uuid:t,x:e,y:n,zoom:r,type:i}=ql(),[s,o]=of($h);return A.useEffect(()=>{o(a=>{const l=jm[Lt.Graph][0],c=$k({parameterSet:l,locations:[],edges:[],locationSerialNumber:0},[],4);return console.log(c),{...a,...c}})},[]),D(v3,{uuid:t,type:i,viewportCenter:[r,n,e],backgroundColor:"rgba(230,255,230,0.6)",backgroundPanel:a=>D(CZ,{...a})})};function tT(t,e){if(!t)throw new Error(e||"loader assertion failed.")}const sD=!!(typeof process!="object"||String(process)!=="[object process]"||process.browser),H6=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);H6&&parseFloat(H6[1]);const WNe="3.4.14";function jc(t,e){if(!t)throw new Error(e||"loaders.gl assertion failed.")}const wE=typeof process!="object"||String(process)!=="[object process]"||process.browser,XNe=typeof window<"u"&&typeof window.orientation<"u",V6=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);V6&&parseFloat(V6[1]);function Jy(t){"@babel/helpers - typeof";return Jy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jy(t)}function YNe(t,e){if(Jy(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Jy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function KNe(t){var e=YNe(t,"string");return Jy(e)=="symbol"?e:String(e)}function W(t,e,n){return e=KNe(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class qNe{constructor(e,n){W(this,"name",void 0),W(this,"workerThread",void 0),W(this,"isRunning",!0),W(this,"result",void 0),W(this,"_resolve",()=>{}),W(this,"_reject",()=>{}),this.name=e,this.workerThread=n,this.result=new Promise((r,i)=>{this._resolve=r,this._reject=i})}postMessage(e,n){this.workerThread.postMessage({source:"loaders.gl",type:e,payload:n})}done(e){jc(this.isRunning),this.isRunning=!1,this._resolve(e)}error(e){jc(this.isRunning),this.isRunning=!1,this._reject(e)}}let $P=class{terminate(){}};const jP=new Map;function ZNe(t){jc(t.source&&!t.url||!t.source&&t.url);let e=jP.get(t.source||t.url);return e||(t.url&&(e=QNe(t.url),jP.set(t.url,e)),t.source&&(e=AZ(t.source),jP.set(t.source,e))),jc(e),e}function QNe(t){if(!t.startsWith("http"))return t;const e=JNe(t);return AZ(e)}function AZ(t){const e=new Blob([t],{type:"application/javascript"});return URL.createObjectURL(e)}function JNe(t){return`try {
  importScripts('`.concat(t,`');
} catch (error) {
  console.error(error);
  throw error;
}`)}function RZ(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2?arguments[2]:void 0;const r=n||new Set;if(t){if(W6(t))r.add(t);else if(W6(t.buffer))r.add(t.buffer);else if(!ArrayBuffer.isView(t)){if(e&&typeof t=="object")for(const i in t)RZ(t[i],e,r)}}return n===void 0?Array.from(r):[]}function W6(t){return t?t instanceof ArrayBuffer||typeof MessagePort<"u"&&t instanceof MessagePort||typeof ImageBitmap<"u"&&t instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas:!1}const GP=()=>{};class LL{static isSupported(){return typeof Worker<"u"&&wE||typeof $P<"u"&&!wE}constructor(e){W(this,"name",void 0),W(this,"source",void 0),W(this,"url",void 0),W(this,"terminated",!1),W(this,"worker",void 0),W(this,"onMessage",void 0),W(this,"onError",void 0),W(this,"_loadableURL","");const{name:n,source:r,url:i}=e;jc(r||i),this.name=n,this.source=r,this.url=i,this.onMessage=GP,this.onError=s=>console.log(s),this.worker=wE?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=GP,this.onError=GP,this.worker.terminate(),this.terminated=!0}get isRunning(){return!!this.onMessage}postMessage(e,n){n=n||RZ(e),this.worker.postMessage(e,n)}_getErrorFromErrorEvent(e){let n="Failed to load ";return n+="worker ".concat(this.name," from ").concat(this.url,". "),e.message&&(n+="".concat(e.message," in ")),e.lineno&&(n+=":".concat(e.lineno,":").concat(e.colno)),new Error(n)}_createBrowserWorker(){this._loadableURL=ZNe({source:this.source,url:this.url});const e=new Worker(this._loadableURL,{name:this.name});return e.onmessage=n=>{n.data?this.onMessage(n.data):this.onError(new Error("No data received"))},e.onerror=n=>{this.onError(this._getErrorFromErrorEvent(n)),this.terminated=!0},e.onmessageerror=n=>console.error(n),e}_createNodeWorker(){let e;if(this.url){const r=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);e=new $P(r,{eval:!1})}else if(this.source)e=new $P(this.source,{eval:!0});else throw new Error("no worker");return e.on("message",n=>{this.onMessage(n)}),e.on("error",n=>{this.onError(n)}),e.on("exit",n=>{}),e}}let e3e=class{static isSupported(){return LL.isSupported()}constructor(e){W(this,"name","unnamed"),W(this,"source",void 0),W(this,"url",void 0),W(this,"maxConcurrency",1),W(this,"maxMobileConcurrency",1),W(this,"onDebug",()=>{}),W(this,"reuseWorkers",!0),W(this,"props",{}),W(this,"jobQueue",[]),W(this,"idleQueue",[]),W(this,"count",0),W(this,"isDestroyed",!1),this.source=e.source,this.url=e.url,this.setProps(e)}destroy(){this.idleQueue.forEach(e=>e.destroy()),this.isDestroyed=!0}setProps(e){this.props={...this.props,...e},e.name!==void 0&&(this.name=e.name),e.maxConcurrency!==void 0&&(this.maxConcurrency=e.maxConcurrency),e.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=e.maxMobileConcurrency),e.reuseWorkers!==void 0&&(this.reuseWorkers=e.reuseWorkers),e.onDebug!==void 0&&(this.onDebug=e.onDebug)}async startJob(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:(s,o,a)=>s.done(a),r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:(s,o)=>s.error(o);const i=new Promise(s=>(this.jobQueue.push({name:e,onMessage:n,onError:r,onStart:s}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const e=this._getAvailableWorker();if(!e)return;const n=this.jobQueue.shift();if(n){this.onDebug({message:"Starting job",name:n.name,workerThread:e,backlog:this.jobQueue.length});const r=new qNe(n.name,e);e.onMessage=i=>n.onMessage(r,i.type,i.payload),e.onError=i=>n.onError(r,i),n.onStart(r);try{await r.result}finally{this.returnWorkerToQueue(e)}}}returnWorkerToQueue(e){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(e.destroy(),this.count--):this.idleQueue.push(e),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const e="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new LL({name:e,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return XNe?this.maxMobileConcurrency:this.maxConcurrency}};const t3e={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class xc{static isSupported(){return LL.isSupported()}static getWorkerFarm(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return xc._workerFarm=xc._workerFarm||new xc({}),xc._workerFarm.setProps(e),xc._workerFarm}constructor(e){W(this,"props",void 0),W(this,"workerPools",new Map),this.props={...t3e},this.setProps(e),this.workerPools=new Map}destroy(){for(const e of this.workerPools.values())e.destroy();this.workerPools=new Map}setProps(e){this.props={...this.props,...e};for(const n of this.workerPools.values())n.setProps(this._getWorkerPoolProps())}getWorkerPool(e){const{name:n,source:r,url:i}=e;let s=this.workerPools.get(n);return s||(s=new e3e({name:n,source:r,url:i}),s.setProps(this._getWorkerPoolProps()),this.workerPools.set(n,s)),s}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}W(xc,"_workerFarm",void 0);const n3e="latest";function r3e(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=e[t.id]||{},r="".concat(t.id,"-worker.js");let i=n.workerUrl;if(!i&&t.id==="compression"&&(i=e.workerUrl),e._workerType==="test"&&(i="modules/".concat(t.module,"/dist/").concat(r)),!i){let s=t.version;s==="latest"&&(s=n3e);const o=s?"@".concat(s):"";i="https://unpkg.com/@loaders.gl/".concat(t.module).concat(o,"/dist/").concat(r)}return jc(i),i}function i3e(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:WNe;jc(t,"no worker provided");const n=t.version;return!(!e||!n)}function s3e(t,e){return!xc.isSupported()||!wE&&!(e!=null&&e._nodeWorkers)?!1:t.worker&&(e==null?void 0:e.worker)}async function o3e(t,e,n,r,i){const s=t.id,o=r3e(t,n),l=xc.getWorkerFarm(n).getWorkerPool({name:s,url:o});n=JSON.parse(JSON.stringify(n)),r=JSON.parse(JSON.stringify(r||{}));const c=await l.startJob("process-on-worker",a3e.bind(null,i));return c.postMessage("process",{input:e,options:n,context:r}),await(await c.result).result}async function a3e(t,e,n,r){switch(n){case"done":e.done(r);break;case"error":e.error(new Error(r.error));break;case"process":const{id:i,input:s,options:o}=r;try{const a=await t(s,o);e.postMessage("done",{id:i,result:a})}catch(a){const l=a instanceof Error?a.message:"unknown error";e.postMessage("error",{id:i,error:l})}break;default:console.warn("parse-with-worker unknown message ".concat(n))}}function l3e(t,e,n){if(n=n||t.byteLength,t.byteLength<n||e.byteLength<n)return!1;const r=new Uint8Array(t),i=new Uint8Array(e);for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}function c3e(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];const r=e.map(a=>a instanceof ArrayBuffer?new Uint8Array(a):a),i=r.reduce((a,l)=>a+l.byteLength,0),s=new Uint8Array(i);let o=0;for(const a of r)s.set(a,o),o+=a.byteLength;return s.buffer}async function u3e(t){const e=[];for await(const n of t)e.push(n);return c3e(...e)}let d3e="";const X6={};function h3e(t){for(const e in X6)if(t.startsWith(e)){const n=X6[e];t=t.replace(e,n)}return!t.startsWith("http://")&&!t.startsWith("https://")&&(t="".concat(d3e).concat(t)),t}function f3e(t){return t&&typeof t=="object"&&t.isBuffer}function PZ(t){if(f3e(t))return t;if(t instanceof ArrayBuffer)return t;if(ArrayBuffer.isView(t))return t.byteOffset===0&&t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength);if(typeof t=="string"){const e=t;return new TextEncoder().encode(e).buffer}if(t&&typeof t=="object"&&t._toArrayBuffer)return t._toArrayBuffer();throw new Error("toArrayBuffer")}function IZ(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(e+1):""}function p3e(t){const e=t?t.lastIndexOf("/"):-1;return e>=0?t.substr(0,e):""}const m3e=t=>typeof t=="boolean",Xv=t=>typeof t=="function",K1=t=>t!==null&&typeof t=="object",Y6=t=>K1(t)&&t.constructor==={}.constructor,g3e=t=>t&&typeof t[Symbol.iterator]=="function",v3e=t=>t&&typeof t[Symbol.asyncIterator]=="function",Df=t=>typeof Response<"u"&&t instanceof Response||t&&t.arrayBuffer&&t.text&&t.json,Bf=t=>typeof Blob<"u"&&t instanceof Blob,y3e=t=>t&&typeof t=="object"&&t.isBuffer,_3e=t=>typeof ReadableStream<"u"&&t instanceof ReadableStream||K1(t)&&Xv(t.tee)&&Xv(t.cancel)&&Xv(t.getReader),b3e=t=>K1(t)&&Xv(t.read)&&Xv(t.pipe)&&m3e(t.readable),MZ=t=>_3e(t)||b3e(t),x3e=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,E3e=/^([-\w.]+\/[-\w.+]+)/;function w3e(t){const e=E3e.exec(t);return e?e[1]:t}function K6(t){const e=x3e.exec(t);return e?e[1]:""}const LZ=/\?.*/;function T3e(t){const e=t.match(LZ);return e&&e[0]}function oD(t){return t.replace(LZ,"")}function yC(t){return Df(t)?t.url:Bf(t)?t.name||"":typeof t=="string"?t:""}function aD(t){if(Df(t)){const e=t,n=e.headers.get("content-type")||"",r=oD(e.url);return w3e(n)||K6(r)}return Bf(t)?t.type||"":typeof t=="string"?K6(t):""}function S3e(t){return Df(t)?t.headers["content-length"]||-1:Bf(t)?t.size:typeof t=="string"?t.length:t instanceof ArrayBuffer||ArrayBuffer.isView(t)?t.byteLength:-1}async function OZ(t){if(Df(t))return t;const e={},n=S3e(t);n>=0&&(e["content-length"]=String(n));const r=yC(t),i=aD(t);i&&(e["content-type"]=i);const s=await R3e(t);s&&(e["x-first-bytes"]=s),typeof t=="string"&&(t=new TextEncoder().encode(t));const o=new Response(t,{headers:e});return Object.defineProperty(o,"url",{value:r}),o}async function C3e(t){if(!t.ok){const e=await A3e(t);throw new Error(e)}}async function A3e(t){let e="Failed to fetch resource ".concat(t.url," (").concat(t.status,"): ");try{const n=t.headers.get("Content-Type");let r=t.statusText;n.includes("application/json")&&(r+=" ".concat(await t.text())),e+=r,e=e.length>60?"".concat(e.slice(0,60),"..."):e}catch{}return e}async function R3e(t){if(typeof t=="string")return"data:,".concat(t.slice(0,5));if(t instanceof Blob){const n=t.slice(0,5);return await new Promise(r=>{const i=new FileReader;i.onload=s=>{var o;return r(s==null||(o=s.target)===null||o===void 0?void 0:o.result)},i.readAsDataURL(n)})}if(t instanceof ArrayBuffer){const n=t.slice(0,5),r=P3e(n);return"data:base64,".concat(r)}return null}function P3e(t){let e="";const n=new Uint8Array(t);for(let r=0;r<n.byteLength;r++)e+=String.fromCharCode(n[r]);return btoa(e)}async function q6(t,e){if(typeof t=="string"){t=h3e(t);let n=e;return e!=null&&e.fetch&&typeof(e==null?void 0:e.fetch)!="function"&&(n=e.fetch),await fetch(t,n)}return await OZ(t)}function I3e(t){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron)return!0;const e=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function q1(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||I3e()}const bx=globalThis.window||globalThis.self||globalThis.global,k0=globalThis.process||{},kZ=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";q1();function M3e(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}let L3e=class{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";this.storage=void 0,this.id=void 0,this.config=void 0,this.storage=M3e(r),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}};function O3e(t){let e;return t<10?e=`${t.toFixed(2)}ms`:t<100?e=`${t.toFixed(1)}ms`:t<1e3?e=`${t.toFixed(0)}ms`:e=`${(t/1e3).toFixed(2)}s`,e}function k3e(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const n=Math.max(e-t.length,0);return`${" ".repeat(n)}${t}`}function HP(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));const s=t.width*n,o=t.height*n,a=["font-size:1px;",`padding:${Math.floor(o/2)}px ${Math.floor(s/2)}px;`,`line-height:${o}px;`,`background:url(${i});`,`background-size:${s}px ${o}px;`,"color:transparent;"].join("");return[`${e} %c+`,a]}let nT;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(nT||(nT={}));const N3e=10;function Z6(t){return typeof t!="string"?t:(t=t.toUpperCase(),nT[t]||nT.WHITE)}function D3e(t,e,n){return!q1&&typeof t=="string"&&(e&&(t=`\x1B[${Z6(e)}m${t}\x1B[39m`),n&&(t=`\x1B[${Z6(n)+N3e}m${t}\x1B[49m`)),t}function B3e(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n),i=t;for(const s of r){const o=i[s];typeof o=="function"&&(e.find(a=>s===a)||(i[s]=o.bind(t)))}}function rT(t,e){if(!t)throw new Error(e||"Assertion failed")}function xp(){let t;if(q1()&&bx.performance){var e,n;t=bx==null||(e=bx.performance)===null||e===void 0||(n=e.now)===null||n===void 0?void 0:n.call(e)}else if("hrtime"in k0){var r;const i=k0==null||(r=k0.hrtime)===null||r===void 0?void 0:r.call(k0);t=i[0]*1e3+i[1]/1e6}else t=Date.now();return t}const Ep={debug:q1()&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},F3e={enabled:!0,level:0};function Ko(){}const Q6={},J6={once:!0};let lD=class{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};this.id=void 0,this.VERSION=kZ,this._startTs=xp(),this._deltaTs=xp(),this._storage=void 0,this.userData={},this.LOG_THROTTLE_TIMEOUT=0,this.id=e,this.userData={},this._storage=new L3e(`__probe-${this.id}__`,F3e),this.timeStamp(`${this.id} started`),B3e(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((xp()-this._startTs).toPrecision(10))}getDelta(){return Number((xp()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){rT(e,n)}warn(e){return this._getLogFunction(0,e,Ep.warn,arguments,J6)}error(e){return this._getLogFunction(0,e,Ep.error,arguments)}deprecated(e,n){return this.warn(`\`${e}\` is deprecated and will be removed in a later version. Use \`${n}\` instead`)}removed(e,n){return this.error(`\`${e}\` has been removed. Use \`${n}\` instead`)}probe(e,n){return this._getLogFunction(e,n,Ep.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,Ep.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){return this._getLogFunction(e,n,Ep.debug||Ep.info,arguments,J6)}table(e,n,r){return n?this._getLogFunction(e,n,console.table||Ko,r&&[r],{tag:j3e(n)}):Ko}image(e){let{logLevel:n,priority:r,image:i,message:s="",scale:o=1}=e;return this._shouldLog(n||r)?q1()?$3e({image:i,message:s,scale:o}):z3e():Ko}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||Ko)}group(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=e$({logLevel:e,message:n,opts:r}),{collapsed:s}=r;return i.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,n,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||Ko)}withGroup(e,n,r){this.group(e,n)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=NZ(e)}_getLogFunction(e,n,r,i,s){if(this._shouldLog(e)){s=e$({logLevel:e,message:n,args:i,opts:s}),r=r||s.method,rT(r),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=xp();const o=s.tag||s.message;if(s.once&&o)if(!Q6[o])Q6[o]=xp();else return Ko;return n=U3e(this.id,s.message,s),r.bind(console,n,...s.args)}return Ko}};lD.VERSION=kZ;function NZ(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return rT(Number.isFinite(e)&&e>=0),e}function e$(t){const{logLevel:e,message:n}=t;t.logLevel=NZ(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const i=typeof t.message;return rT(i==="string"||i==="object"),Object.assign(t,{args:r},t.opts)}function U3e(t,e,n){if(typeof e=="string"){const r=n.time?k3e(O3e(n.total)):"";e=n.time?`${t}: ${r}  ${e}`:`${t}: ${e}`,e=D3e(e,n.color,n.background)}return e}function z3e(t){return console.warn("removed"),Ko}function $3e(t){let{image:e,message:n="",scale:r=1}=t;if(typeof e=="string"){const s=new Image;return s.onload=()=>{const o=HP(s,n,r);console.log(...o)},s.src=e,Ko}const i=e.nodeName||"";if(i.toLowerCase()==="img")return console.log(...HP(e,n,r)),Ko;if(i.toLowerCase()==="canvas"){const s=new Image;return s.onload=()=>console.log(...HP(s,n,r)),s.src=e.toDataURL(),Ko}return Ko}function j3e(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const t$=new lD({id:"loaders.gl"});class G3e{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class H3e{constructor(){W(this,"console",void 0),this.console=console}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.log.bind(this.console,...n)}info(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.info.bind(this.console,...n)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.warn.bind(this.console,...n)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return this.console.error.bind(this.console,...n)}}const DZ={fetch:null,mimeType:void 0,nothrow:!1,log:new H3e,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:sD,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},V3e={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function BZ(){globalThis.loaders=globalThis.loaders||{};const{loaders:t}=globalThis;return t._state=t._state||{},t._state}const FZ=()=>{const t=BZ();return t.globalOptions=t.globalOptions||{...DZ},t.globalOptions};function W3e(t,e,n,r){return n=n||[],n=Array.isArray(n)?n:[n],X3e(t,n),K3e(e,t,r)}function X3e(t,e){n$(t,null,DZ,V3e,e);for(const n of e){const r=t&&t[n.id]||{},i=n.options&&n.options[n.id]||{},s=n.deprecatedOptions&&n.deprecatedOptions[n.id]||{};n$(r,n.id,i,s,e)}}function n$(t,e,n,r,i){const s=e||"Top level",o=e?"".concat(e,"."):"";for(const a in t){const l=!e&&K1(t[a]),c=a==="baseUri"&&!e,u=a==="workerUrl"&&e;if(!(a in n)&&!c&&!u){if(a in r)t$.warn("".concat(s," loader option '").concat(o).concat(a,"' no longer supported, use '").concat(r[a],"'"))();else if(!l){const d=Y3e(a,i);t$.warn("".concat(s," loader option '").concat(o).concat(a,"' not recognized. ").concat(d))()}}}}function Y3e(t,e){const n=t.toLowerCase();let r="";for(const i of e)for(const s in i.options){if(t===s)return"Did you mean '".concat(i.id,".").concat(s,"'?");const o=s.toLowerCase();(n.startsWith(o)||o.startsWith(n))&&(r=r||"Did you mean '".concat(i.id,".").concat(s,"'?"))}return r}function K3e(t,e,n){const i={...t.options||{}};return q3e(i,n),i.log===null&&(i.log=new G3e),r$(i,FZ()),r$(i,e),i}function r$(t,e){for(const n in e)if(n in e){const r=e[n];Y6(r)&&Y6(t[n])?t[n]={...t[n],...e[n]}:t[n]=e[n]}}function q3e(t,e){e&&!("baseUri"in t)&&(t.baseUri=e)}function cD(t){var e;return t?(Array.isArray(t)&&(t=t[0]),Array.isArray((e=t)===null||e===void 0?void 0:e.extensions)):!1}function uD(t){var e,n;tT(t,"null loader"),tT(cD(t),"invalid loader");let r;return Array.isArray(t)&&(r=t[1],t=t[0],t={...t,options:{...t.options,...r}}),((e=t)!==null&&e!==void 0&&e.parseTextSync||(n=t)!==null&&n!==void 0&&n.parseText)&&(t.text=!0),t.text||(t.binary=!0),t}const UZ=()=>{const t=BZ();return t.loaderRegistry=t.loaderRegistry||[],t.loaderRegistry};function Z3e(t){const e=UZ();t=Array.isArray(t)?t:[t];for(const n of t){const r=uD(n);e.find(i=>r===i)||e.unshift(r)}}function Q3e(){return UZ()}const J3e=new lD({id:"loaders.gl"}),eDe=/\.([^.]+)$/;async function tDe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!zZ(t))return null;let i=i$(t,e,{...n,nothrow:!0},r);if(i)return i;if(Bf(t)&&(t=await t.slice(0,10).arrayBuffer(),i=i$(t,e,n,r)),!i&&!(n!=null&&n.nothrow))throw new Error($Z(t));return i}function i$(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(!zZ(t))return null;if(e&&!Array.isArray(e))return uD(e);let i=[];e&&(i=i.concat(e)),n!=null&&n.ignoreRegisteredLoaders||i.push(...Q3e()),rDe(i);const s=nDe(t,i,n,r);if(!s&&!(n!=null&&n.nothrow))throw new Error($Z(t));return s}function nDe(t,e,n,r){const i=yC(t),s=aD(t),o=oD(i)||(r==null?void 0:r.url);let a=null,l="";if(n!=null&&n.mimeType&&(a=VP(e,n==null?void 0:n.mimeType),l="match forced by supplied MIME type ".concat(n==null?void 0:n.mimeType)),a=a||iDe(e,o),l=l||(a?"matched url ".concat(o):""),a=a||VP(e,s),l=l||(a?"matched MIME type ".concat(s):""),a=a||oDe(e,t),l=l||(a?"matched initial data ".concat(jZ(t)):""),a=a||VP(e,n==null?void 0:n.fallbackMimeType),l=l||(a?"matched fallback MIME type ".concat(s):""),l){var c;J3e.log(1,"selectLoader selected ".concat((c=a)===null||c===void 0?void 0:c.name,": ").concat(l,"."))}return a}function zZ(t){return!(t instanceof Response&&t.status===204)}function $Z(t){const e=yC(t),n=aD(t);let r="No valid loader found (";r+=e?"".concat(IZ(e),", "):"no url provided, ",r+="MIME type: ".concat(n?'"'.concat(n,'"'):"not provided",", ");const i=t?jZ(t):"";return r+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",r+=")",r}function rDe(t){for(const e of t)uD(e)}function iDe(t,e){const n=e&&eDe.exec(e),r=n&&n[1];return r?sDe(t,r):null}function sDe(t,e){e=e.toLowerCase();for(const n of t)for(const r of n.extensions)if(r.toLowerCase()===e)return n;return null}function VP(t,e){for(const n of t)if(n.mimeTypes&&n.mimeTypes.includes(e)||e==="application/x.".concat(n.id))return n;return null}function oDe(t,e){if(!e)return null;for(const n of t)if(typeof e=="string"){if(aDe(e,n))return n}else if(ArrayBuffer.isView(e)){if(s$(e.buffer,e.byteOffset,n))return n}else if(e instanceof ArrayBuffer&&s$(e,0,n))return n;return null}function aDe(t,e){return e.testText?e.testText(t):(Array.isArray(e.tests)?e.tests:[e.tests]).some(r=>t.startsWith(r))}function s$(t,e,n){return(Array.isArray(n.tests)?n.tests:[n.tests]).some(i=>lDe(t,e,n,i))}function lDe(t,e,n,r){if(r instanceof ArrayBuffer)return l3e(r,t,r.byteLength);switch(typeof r){case"function":return r(t,n);case"string":const i=OL(t,e,r.length);return r===i;default:return!1}}function jZ(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5;return typeof t=="string"?t.slice(0,e):ArrayBuffer.isView(t)?OL(t.buffer,t.byteOffset,e):t instanceof ArrayBuffer?OL(t,0,e):""}function OL(t,e,n){if(t.byteLength<e+n)return"";const r=new DataView(t);let i="";for(let s=0;s<n;s++)i+=String.fromCharCode(r.getUint8(e+s));return i}const cDe=256*1024;function*uDe(t,e){const n=(e==null?void 0:e.chunkSize)||cDe;let r=0;const i=new TextEncoder;for(;r<t.length;){const s=Math.min(t.length-r,n),o=t.slice(r,r+s);r+=s,yield i.encode(o)}}const dDe=256*1024;function hDe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){const{chunkSize:n=dDe}=e;let r=0;for(;r<t.byteLength;){const i=Math.min(t.byteLength-r,n),s=new ArrayBuffer(i),o=new Uint8Array(t,r,i);new Uint8Array(s).set(o),r+=i,yield s}}()}const fDe=1024*1024;async function*pDe(t,e){const n=(e==null?void 0:e.chunkSize)||fDe;let r=0;for(;r<t.size;){const i=r+n,s=await t.slice(r,i).arrayBuffer();r=i,yield s}}function o$(t,e){return sD?mDe(t,e):gDe(t)}async function*mDe(t,e){const n=t.getReader();let r;try{for(;;){const i=r||n.read();e!=null&&e._streamReadAhead&&(r=n.read());const{done:s,value:o}=await i;if(s)return;yield PZ(o)}}catch{n.releaseLock()}}async function*gDe(t,e){for await(const n of t)yield PZ(n)}function vDe(t,e){if(typeof t=="string")return uDe(t,e);if(t instanceof ArrayBuffer)return hDe(t,e);if(Bf(t))return pDe(t,e);if(MZ(t))return o$(t,e);if(Df(t))return o$(t.body,e);throw new Error("makeIterator")}const GZ="Cannot convert supplied data type";function yDe(t,e,n){if(e.text&&typeof t=="string")return t;if(y3e(t)&&(t=t.buffer),t instanceof ArrayBuffer){const r=t;return e.text&&!e.binary?new TextDecoder("utf8").decode(r):r}if(ArrayBuffer.isView(t)){if(e.text&&!e.binary)return new TextDecoder("utf8").decode(t);let r=t.buffer;const i=t.byteLength||t.length;return(t.byteOffset!==0||i!==r.byteLength)&&(r=r.slice(t.byteOffset,t.byteOffset+i)),r}throw new Error(GZ)}async function _De(t,e,n){const r=t instanceof ArrayBuffer||ArrayBuffer.isView(t);if(typeof t=="string"||r)return yDe(t,e);if(Bf(t)&&(t=await OZ(t)),Df(t)){const i=t;return await C3e(i),e.binary?await i.arrayBuffer():await i.text()}if(MZ(t)&&(t=vDe(t,n)),g3e(t)||v3e(t))return u3e(t);throw new Error(GZ)}function HZ(t,e){const n=FZ(),r=t||n;return typeof r.fetch=="function"?r.fetch:K1(r.fetch)?i=>q6(i,r):e!=null&&e.fetch?e==null?void 0:e.fetch:q6}function bDe(t,e,n){if(n)return n;const r={fetch:HZ(e,t),...t};if(r.url){const i=oD(r.url);r.baseUrl=i,r.queryString=T3e(r.url),r.filename=IZ(i),r.baseUrl=p3e(i)}return Array.isArray(r.loaders)||(r.loaders=null),r}function xDe(t,e){if(!e&&t&&!Array.isArray(t))return t;let n;if(t&&(n=Array.isArray(t)?t:[t]),e&&e.loaders){const r=Array.isArray(e.loaders)?e.loaders:[e.loaders];n=n?[...n,...r]:r}return n&&n.length?n:null}async function dD(t,e,n,r){jc(!r||typeof r=="object"),e&&!Array.isArray(e)&&!cD(e)&&(r=void 0,n=e,e=void 0),t=await t,n=n||{};const i=yC(t),o=xDe(e,r),a=await tDe(t,o,n);return a?(n=W3e(n,a,o,i),r=bDe({url:i,parse:dD,loaders:o},n,r||null),await EDe(a,t,n,r)):null}async function EDe(t,e,n,r){if(i3e(t),Df(e)){const i=e,{ok:s,redirected:o,status:a,statusText:l,type:c,url:u}=i,d=Object.fromEntries(i.headers.entries());r.response={headers:d,ok:s,redirected:o,status:a,statusText:l,type:c,url:u}}if(e=await _De(e,t,n),t.parseTextSync&&typeof e=="string")return n.dataType="text",t.parseTextSync(e,n,r,t);if(s3e(t,n))return await o3e(t,e,n,r,dD);if(t.parseText&&typeof e=="string")return await t.parseText(e,n,r,t);if(t.parse)return await t.parse(e,n,r,t);throw jc(!t.parseSync),new Error("".concat(t.id," loader - no parser found and worker is disabled"))}async function kL(t,e,n,r){!Array.isArray(e)&&!cD(e)&&(n=e,e=void 0);const i=HZ(n);let s=t;return typeof t=="string"&&(s=await i(t)),Bf(t)&&(s=await i(t)),await dD(s,e,n)}const wDe="3.4.14",{_parseImageNode:TDe}=globalThis,NL=typeof Image<"u",DL=typeof ImageBitmap<"u",SDe=!!TDe,BL=sD?!0:SDe;function CDe(t){switch(t){case"auto":return DL||NL||BL;case"imagebitmap":return DL;case"image":return NL;case"data":return BL;default:throw new Error("@loaders.gl/images: image ".concat(t," not supported in this environment"))}}function ADe(){if(DL)return"imagebitmap";if(NL)return"image";if(BL)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function RDe(t){const e=IDe(t);if(!e)throw new Error("Not an image");return e}function PDe(t){switch(RDe(t)){case"data":return t;case"image":case"imagebitmap":const e=document.createElement("canvas"),n=e.getContext("2d");if(!n)throw new Error("getImageData");return e.width=t.width,e.height=t.height,n.drawImage(t,0,0),n.getImageData(0,0,t.width,t.height);default:throw new Error("getImageData")}}function IDe(t){return typeof ImageBitmap<"u"&&t instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&t instanceof Image?"image":t&&typeof t=="object"&&t.data&&t.width&&t.height?"data":null}const MDe=/^data:image\/svg\+xml/,LDe=/\.svg((\?|#).*)?$/;function hD(t){return t&&(MDe.test(t)||LDe.test(t))}function ODe(t,e){if(hD(e)){let r=new TextDecoder().decode(t);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(r=unescape(encodeURIComponent(r)))}catch(s){throw new Error(s.message)}return"data:image/svg+xml;base64,".concat(btoa(r))}return VZ(t,e)}function VZ(t,e){if(hD(e))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(t)])}async function WZ(t,e,n){const r=ODe(t,n),i=self.URL||self.webkitURL,s=typeof r!="string"&&i.createObjectURL(r);try{return await kDe(s||r,e)}finally{s&&i.revokeObjectURL(s)}}async function kDe(t,e){const n=new Image;return n.src=t,e.image&&e.image.decode&&n.decode?(await n.decode(),n):await new Promise((r,i)=>{try{n.onload=()=>r(n),n.onerror=s=>i(new Error("Could not load image ".concat(t,": ").concat(s)))}catch(s){i(s)}})}const NDe={};let a$=!0;async function DDe(t,e,n){let r;hD(n)?r=await WZ(t,e,n):r=VZ(t,n);const i=e&&e.imagebitmap;return await BDe(r,i)}async function BDe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if((FDe(e)||!a$)&&(e=null),e)try{return await createImageBitmap(t,e)}catch(n){console.warn(n),a$=!1}return await createImageBitmap(t)}function FDe(t){for(const e in t||NDe)return!1;return!0}function UDe(t){return!GDe(t,"ftyp",4)||!(t[8]&96)?null:zDe(t)}function zDe(t){switch($De(t,8,12).replace("\0"," ").trim()){case"avif":case"avis":return{extension:"avif",mimeType:"image/avif"};default:return null}}function $De(t,e,n){return String.fromCharCode(...t.slice(e,n))}function jDe(t){return[...t].map(e=>e.charCodeAt(0))}function GDe(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;const r=jDe(e);for(let i=0;i<r.length;++i)if(r[i]!==t[i+n])return!1;return!0}const Il=!1,Yv=!0;function XZ(t){const e=Z1(t);return VDe(e)||YDe(e)||WDe(e)||XDe(e)||HDe(e)}function HDe(t){const e=new Uint8Array(t instanceof DataView?t.buffer:t),n=UDe(e);return n?{mimeType:n.mimeType,width:0,height:0}:null}function VDe(t){const e=Z1(t);return e.byteLength>=24&&e.getUint32(0,Il)===2303741511?{mimeType:"image/png",width:e.getUint32(16,Il),height:e.getUint32(20,Il)}:null}function WDe(t){const e=Z1(t);return e.byteLength>=10&&e.getUint32(0,Il)===1195984440?{mimeType:"image/gif",width:e.getUint16(6,Yv),height:e.getUint16(8,Yv)}:null}function XDe(t){const e=Z1(t);return e.byteLength>=14&&e.getUint16(0,Il)===16973&&e.getUint32(2,Yv)===e.byteLength?{mimeType:"image/bmp",width:e.getUint32(18,Yv),height:e.getUint32(22,Yv)}:null}function YDe(t){const e=Z1(t);if(!(e.byteLength>=3&&e.getUint16(0,Il)===65496&&e.getUint8(2)===255))return null;const{tableMarkers:r,sofMarkers:i}=KDe();let s=2;for(;s+9<e.byteLength;){const o=e.getUint16(s,Il);if(i.has(o))return{mimeType:"image/jpeg",height:e.getUint16(s+5,Il),width:e.getUint16(s+7,Il)};if(!r.has(o))return null;s+=2,s+=e.getUint16(s,Il)}return null}function KDe(){const t=new Set([65499,65476,65484,65501,65534]);for(let n=65504;n<65520;++n)t.add(n);return{tableMarkers:t,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function Z1(t){if(t instanceof DataView)return t;if(ArrayBuffer.isView(t))return new DataView(t.buffer);if(t instanceof ArrayBuffer)return new DataView(t);throw new Error("toDataView")}async function qDe(t,e){const{mimeType:n}=XZ(t)||{},r=globalThis._parseImageNode;return tT(r),await r(t,n)}async function ZDe(t,e,n){e=e||{};const i=(e.image||{}).type||"auto",{url:s}=n||{},o=QDe(i);let a;switch(o){case"imagebitmap":a=await DDe(t,e,s);break;case"image":a=await WZ(t,e,s);break;case"data":a=await qDe(t);break;default:tT(!1)}return i==="data"&&(a=PDe(a)),a}function QDe(t){switch(t){case"auto":case"data":return ADe();default:return CDe(t),t}}const JDe=["png","jpg","jpeg","gif","webp","bmp","ico","svg","avif"],eBe=["image/png","image/jpeg","image/gif","image/webp","image/avif","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],tBe={image:{type:"auto",decode:!0}},nBe={id:"image",module:"images",name:"Images",version:wDe,mimeTypes:eBe,extensions:JDe,parse:ZDe,tests:[t=>!!XZ(new DataView(t))],options:tBe};function YZ(t){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&process.versions.electron)return!0;const e=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,n=t||e;return!!(n&&n.indexOf("Electron")>=0)}function eu(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||YZ()}const TE={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:typeof process=="object"&&process},xx=TE.window||TE.self||TE.global,N0=TE.process||{},KZ=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";eu();const WP=globalThis;function qZ(t){if(!t&&!eu())return"Node";if(YZ(t))return"Electron";const n=t||(typeof navigator<"u"?navigator:{}).userAgent||"";if(n.indexOf("Edge")>-1)return"Edge";const r=n.indexOf("MSIE ")!==-1,i=n.indexOf("Trident/")!==-1;return r||i?"IE":WP.chrome?"Chrome":WP.safari?"Safari":WP.mozInnerScreenX?"Firefox":"Unknown"}function rBe(t){try{const e=window[t],n="__storage_test__";return e.setItem(n,n),e.removeItem(n),e}catch{return null}}class iBe{constructor(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";W(this,"storage",void 0),W(this,"id",void 0),W(this,"config",void 0),this.storage=rBe(r),this.id=e,this.config=n,this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(e){if(Object.assign(this.config,e),this.storage){const n=JSON.stringify(this.config);this.storage.setItem(this.id,n)}}_loadConfiguration(){let e={};if(this.storage){const n=this.storage.getItem(this.id);e=n?JSON.parse(n):{}}return Object.assign(this.config,e),this}}function sBe(t){let e;return t<10?e="".concat(t.toFixed(2),"ms"):t<100?e="".concat(t.toFixed(1),"ms"):t<1e3?e="".concat(t.toFixed(0),"ms"):e="".concat((t/1e3).toFixed(2),"s"),e}function oBe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const n=Math.max(e-t.length,0);return"".concat(" ".repeat(n)).concat(t)}function XP(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=t.src.replace(/\(/g,"%28").replace(/\)/g,"%29");t.width>r&&(n=Math.min(n,r/t.width));const s=t.width*n,o=t.height*n,a=["font-size:1px;","padding:".concat(Math.floor(o/2),"px ").concat(Math.floor(s/2),"px;"),"line-height:".concat(o,"px;"),"background:url(".concat(i,");"),"background-size:".concat(s,"px ").concat(o,"px;"),"color:transparent;"].join("");return["".concat(e," %c+"),a]}let iT;(function(t){t[t.BLACK=30]="BLACK",t[t.RED=31]="RED",t[t.GREEN=32]="GREEN",t[t.YELLOW=33]="YELLOW",t[t.BLUE=34]="BLUE",t[t.MAGENTA=35]="MAGENTA",t[t.CYAN=36]="CYAN",t[t.WHITE=37]="WHITE",t[t.BRIGHT_BLACK=90]="BRIGHT_BLACK",t[t.BRIGHT_RED=91]="BRIGHT_RED",t[t.BRIGHT_GREEN=92]="BRIGHT_GREEN",t[t.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",t[t.BRIGHT_BLUE=94]="BRIGHT_BLUE",t[t.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",t[t.BRIGHT_CYAN=96]="BRIGHT_CYAN",t[t.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(iT||(iT={}));function l$(t){return typeof t=="string"?iT[t.toUpperCase()]||iT.WHITE:t}function aBe(t,e,n){return!eu&&typeof t=="string"&&(e&&(e=l$(e),t="\x1B[".concat(e,"m").concat(t,"\x1B[39m")),n&&(e=l$(n),t="\x1B[".concat(n+10,"m").concat(t,"\x1B[49m"))),t}function lBe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const n=Object.getPrototypeOf(t),r=Object.getOwnPropertyNames(n);for(const i of r)typeof t[i]=="function"&&(e.find(s=>i===s)||(t[i]=t[i].bind(t)))}function sT(t,e){if(!t)throw new Error(e||"Assertion failed")}function wp(){let t;if(eu&&"performance"in xx){var e,n;t=xx==null||(e=xx.performance)===null||e===void 0||(n=e.now)===null||n===void 0?void 0:n.call(e)}else if("hrtime"in N0){var r;const i=N0==null||(r=N0.hrtime)===null||r===void 0?void 0:r.call(N0);t=i[0]*1e3+i[1]/1e6}else t=Date.now();return t}const Tp={debug:eu&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},cBe={enabled:!0,level:0};function qo(){}const c$={},u$={once:!0};class fD{constructor(){let{id:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};W(this,"id",void 0),W(this,"VERSION",KZ),W(this,"_startTs",wp()),W(this,"_deltaTs",wp()),W(this,"_storage",void 0),W(this,"userData",{}),W(this,"LOG_THROTTLE_TIMEOUT",0),this.id=e,this.userData={},this._storage=new iBe("__probe-".concat(this.id,"__"),cBe),this.timeStamp("".concat(this.id," started")),lBe(this),Object.seal(this)}set level(e){this.setLevel(e)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((wp()-this._startTs).toPrecision(10))}getDelta(){return Number((wp()-this._deltaTs).toPrecision(10))}set priority(e){this.level=e}get priority(){return this.level}getPriority(){return this.level}enable(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.setConfiguration({enabled:e}),this}setLevel(e){return this._storage.setConfiguration({level:e}),this}get(e){return this._storage.config[e]}set(e,n){this._storage.setConfiguration({[e]:n})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(e,n){sT(e,n)}warn(e){return this._getLogFunction(0,e,Tp.warn,arguments,u$)}error(e){return this._getLogFunction(0,e,Tp.error,arguments)}deprecated(e,n){return this.warn("`".concat(e,"` is deprecated and will be removed in a later version. Use `").concat(n,"` instead"))}removed(e,n){return this.error("`".concat(e,"` has been removed. Use `").concat(n,"` instead"))}probe(e,n){return this._getLogFunction(e,n,Tp.log,arguments,{time:!0,once:!0})}log(e,n){return this._getLogFunction(e,n,Tp.debug,arguments)}info(e,n){return this._getLogFunction(e,n,console.info,arguments)}once(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];return this._getLogFunction(e,n,Tp.debug||Tp.info,arguments,u$)}table(e,n,r){return n?this._getLogFunction(e,n,console.table||qo,r&&[r],{tag:fBe(n)}):qo}image(e){let{logLevel:n,priority:r,image:i,message:s="",scale:o=1}=e;return this._shouldLog(n||r)?eu?hBe({image:i,message:s,scale:o}):dBe():qo}time(e,n){return this._getLogFunction(e,n,console.time?console.time:console.info)}timeEnd(e,n){return this._getLogFunction(e,n,console.timeEnd?console.timeEnd:console.info)}timeStamp(e,n){return this._getLogFunction(e,n,console.timeStamp||qo)}group(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=d$({logLevel:e,message:n,opts:r}),{collapsed:s}=r;return i.method=(s?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(e,n,Object.assign({},r,{collapsed:!0}))}groupEnd(e){return this._getLogFunction(e,"",console.groupEnd||qo)}withGroup(e,n,r){this.group(e,n)();try{r()}finally{this.groupEnd(e)()}}trace(){console.trace&&console.trace()}_shouldLog(e){return this.isEnabled()&&this.getLevel()>=ZZ(e)}_getLogFunction(e,n,r,i,s){if(this._shouldLog(e)){s=d$({logLevel:e,message:n,args:i,opts:s}),r=r||s.method,sT(r),s.total=this.getTotal(),s.delta=this.getDelta(),this._deltaTs=wp();const o=s.tag||s.message;if(s.once)if(!c$[o])c$[o]=wp();else return qo;return n=uBe(this.id,s.message,s),r.bind(console,n,...s.args)}return qo}}W(fD,"VERSION",KZ);function ZZ(t){if(!t)return 0;let e;switch(typeof t){case"number":e=t;break;case"object":e=t.logLevel||t.priority||0;break;default:return 0}return sT(Number.isFinite(e)&&e>=0),e}function d$(t){const{logLevel:e,message:n}=t;t.logLevel=ZZ(e);const r=t.args?Array.from(t.args):[];for(;r.length&&r.shift()!==n;);switch(typeof e){case"string":case"function":n!==void 0&&r.unshift(n),t.message=e;break;case"object":Object.assign(t,e);break}typeof t.message=="function"&&(t.message=t.message());const i=typeof t.message;return sT(i==="string"||i==="object"),Object.assign(t,{args:r},t.opts)}function uBe(t,e,n){if(typeof e=="string"){const r=n.time?oBe(sBe(n.total)):"";e=n.time?"".concat(t,": ").concat(r,"  ").concat(e):"".concat(t,": ").concat(e),e=aBe(e,n.color,n.background)}return e}function dBe(t){return console.warn("removed"),qo}function hBe(t){let{image:e,message:n="",scale:r=1}=t;if(typeof e=="string"){const s=new Image;return s.onload=()=>{const o=XP(s,n,r);console.log(...o)},s.src=e,qo}const i=e.nodeName||"";if(i.toLowerCase()==="img")return console.log(...XP(e,n,r)),qo;if(i.toLowerCase()==="canvas"){const s=new Image;return s.onload=()=>console.log(...XP(s,n,r)),s.src=e.toDataURL(),qo}return qo}function fBe(t){for(const e in t)for(const n in t[e])return n||"untitled";return"empty"}const Yn=new fD({id:"deck"});let FL={};function pBe(t){FL=t}function Cs(t,e,n,r){Yn.level>0&&FL[t]&&FL[t].call(null,e,n,r)}function mBe(t){const e=t[0],n=t[t.length-1];return e==="{"&&n==="}"||e==="["&&n==="]"}const gBe={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:mBe,parseTextSync:JSON.parse};function vBe(){const t="8.9.34",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==t)throw new Error("deck.gl - multiple versions detected: ".concat(e," vs ").concat(t));return e||(Yn.log(1,"deck.gl ".concat(t))(),globalThis.deck={...globalThis.deck,VERSION:t,version:t,log:Yn,_registerLoggers:pBe},Z3e([gBe,[nBe,{imagebitmap:{premultiplyAlpha:"none"}}]])),t}const yBe=vBe(),wn={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(wn,"IDENTITY",{get:()=>(Yn.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const Ol={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},e1={common:0,meters:1,pixels:2},h$={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},Rt=new fD({id:"luma.gl"});function As(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}const _Be="Invalid WebGLRenderingContext",bBe="Requires WebGL2";function _C(t){return typeof WebGLRenderingContext<"u"&&t instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&Number.isFinite(t._version))}function pn(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&t._version===2)}function xBe(t){return pn(t)?t:null}function bC(t){return As(_C(t),_Be),t}function Ps(t){return As(pn(t),bBe),t}const pv={};function EBe(t){globalThis.console&&globalThis.console.error&&globalThis.console.error(t)}function wBe(t){globalThis.console&&globalThis.console.log&&globalThis.console.log(t)}function TBe(t,e){pv[t]=!0,e!==void 0&&EBe(e)}function SBe(t){const e=t.getError;t.getError=function(){let r;do r=e.apply(t),r!==0&&(pv[r]=!0);while(r!==0);for(r in pv)if(pv[r])return delete pv[r],parseInt(r,10);return 0}}const Q1=function t(e){const n=e.gl;this.ext=e,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(e.maxVertexAttribs);for(let r=0;r<this.attribs.length;r++){const i=new t.VertexAttrib(n);this.attribs[r]=i}this.maxAttrib=0};Q1.VertexAttrib=function(e){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};Q1.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const Ff=function(e){const n=this;this.gl=e,SBe(e);const r=this.original={getParameter:e.getParameter,enableVertexAttribArray:e.enableVertexAttribArray,disableVertexAttribArray:e.disableVertexAttribArray,bindBuffer:e.bindBuffer,getVertexAttrib:e.getVertexAttrib,vertexAttribPointer:e.vertexAttribPointer};e.getParameter=function(s){return s===n.VERTEX_ARRAY_BINDING_OES?n.currentVertexArrayObject===n.defaultVertexArrayObject?null:n.currentVertexArrayObject:r.getParameter.apply(this,arguments)},e.enableVertexAttribArray=function(s){const o=n.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);const a=o.attribs[s];return a.enabled=!0,r.enableVertexAttribArray.apply(this,arguments)},e.disableVertexAttribArray=function(s){const o=n.currentVertexArrayObject;o.maxAttrib=Math.max(o.maxAttrib,s);const a=o.attribs[s];return a.enabled=!1,r.disableVertexAttribArray.apply(this,arguments)},e.bindBuffer=function(s,o){switch(s){case 34962:n.currentArrayBuffer=o;break;case 34963:n.currentVertexArrayObject.elementArrayBuffer=o;break}return r.bindBuffer.apply(this,arguments)},e.getVertexAttrib=function(s,o){const l=n.currentVertexArrayObject.attribs[s];switch(o){case 34975:return l.buffer;case 34338:return l.enabled;case 34339:return l.size;case 34340:return l.stride;case 34341:return l.type;case 34922:return l.normalized;default:return r.getVertexAttrib.apply(this,arguments)}},e.vertexAttribPointer=function(s,o,a,l,c,u){const d=n.currentVertexArrayObject;d.maxAttrib=Math.max(d.maxAttrib,s);const h=d.attribs[s];return h.buffer=n.currentArrayBuffer,h.size=o,h.type=a,h.normalized=l,h.stride=c,h.offset=u,h.recache(),r.vertexAttribPointer.apply(this,arguments)},e.instrumentExtension&&e.instrumentExtension(this,"OES_vertex_array_object"),e.canvas&&e.canvas.addEventListener("webglcontextrestored",()=>{wBe("OESVertexArrayObject emulation library context restored"),n.reset_()},!0),this.reset_()};Ff.prototype.VERTEX_ARRAY_BINDING_OES=34229;Ff.prototype.reset_=function(){if(this.vertexArrayObjects!==void 0)for(let r=0;r<this.vertexArrayObjects.length;++r)this.vertexArrayObjects.isAlive=!1;const n=this.gl;this.maxVertexAttribs=n.getParameter(34921),this.defaultVertexArrayObject=new Q1(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};Ff.prototype.createVertexArrayOES=function(){const e=new Q1(this);return this.vertexArrayObjects.push(e),e};Ff.prototype.deleteVertexArrayOES=function(e){e.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(e),1),this.currentVertexArrayObject===e&&this.bindVertexArrayOES(null)};Ff.prototype.isVertexArrayOES=function(e){return!!(e&&e instanceof Q1&&e.hasBeenBound&&e.ext===this)};Ff.prototype.bindVertexArrayOES=function(e){const n=this.gl;if(e&&!e.isAlive){TBe(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}const r=this.original,i=this.currentVertexArrayObject;this.currentVertexArrayObject=e||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const s=this.currentVertexArrayObject;if(i===s)return;(!i||s.elementArrayBuffer!==i.elementArrayBuffer)&&r.bindBuffer.call(n,34963,s.elementArrayBuffer);let o=this.currentArrayBuffer;const a=Math.max(i?i.maxAttrib:0,s.maxAttrib);for(let l=0;l<=a;l++){const c=s.attribs[l],u=i?i.attribs[l]:null;if((!i||c.enabled!==u.enabled)&&(c.enabled?r.enableVertexAttribArray.call(n,l):r.disableVertexAttribArray.call(n,l)),c.enabled){let d=!1;(!i||c.buffer!==u.buffer)&&(o!==c.buffer&&(r.bindBuffer.call(n,34962,c.buffer),o=c.buffer),d=!0),(d||c.cached!==u.cached)&&r.vertexAttribPointer.call(n,l,c.size,c.type,c.normalized,c.stride,c.offset)}}this.currentArrayBuffer!==o&&r.bindBuffer.call(n,34962,this.currentArrayBuffer)};function CBe(t){if(typeof t.createVertexArray=="function")return;const e=t.getSupportedExtensions;t.getSupportedExtensions=function(){const i=e.call(this)||[];return i.indexOf("OES_vertex_array_object")<0&&i.push("OES_vertex_array_object"),i};const n=t.getExtension;t.getExtension=function(i){const s=n.call(this,i);return s||(i!=="OES_vertex_array_object"?null:(t.__OESVertexArrayObject||(this.__OESVertexArrayObject=new Ff(this)),this.__OESVertexArrayObject))}}const f$="OES_element_index",p$="WEBGL_draw_buffers",ABe="EXT_disjoint_timer_query",RBe="EXT_disjoint_timer_query_webgl2",PBe="EXT_texture_filter_anisotropic",m$="WEBGL_debug_renderer_info",IBe=35723,MBe=4352,LBe=36795,OBe=34047,kBe=37445,NBe=37446,Zn=t=>pn(t)?void 0:0,DBe={3074:t=>pn(t)?void 0:36064,[IBe]:t=>pn(t)?void 0:MBe,35977:Zn,32937:Zn,[LBe]:(t,e)=>{const n=pn(t)?t.getExtension(RBe):t.getExtension(ABe);return n&&n.GPU_DISJOINT_EXT?e(n.GPU_DISJOINT_EXT):0},[kBe]:(t,e)=>{const n=t.getExtension(m$);return e(n&&n.UNMASKED_VENDOR_WEBGL||7936)},[NBe]:(t,e)=>{const n=t.getExtension(m$);return e(n&&n.UNMASKED_RENDERER_WEBGL||7937)},[OBe]:(t,e)=>{const n=t.luma.extensions[PBe];return n?e(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},32883:Zn,35071:Zn,37447:Zn,36063:(t,e)=>{if(!pn(t)){const n=t.getExtension(p$);return n?e(n.MAX_COLOR_ATTACHMENTS_WEBGL):0}},35379:Zn,35374:Zn,35377:Zn,34852:t=>{if(!pn(t)){const e=t.getExtension(p$);return e?e.MAX_DRAW_BUFFERS_WEBGL:0}},36203:t=>t.getExtension(f$)?2147483647:65535,33001:t=>t.getExtension(f$)?16777216:65535,33e3:t=>16777216,37157:Zn,35373:Zn,35657:Zn,36183:Zn,37137:Zn,34045:Zn,35978:Zn,35979:Zn,35968:Zn,35376:Zn,35375:Zn,35659:Zn,37154:Zn,35371:Zn,35658:Zn,35076:Zn,35077:Zn,35380:Zn};function BBe(t,e,n){const r=DBe[n],i=typeof r=="function"?r(t,e,n):r;return i!==void 0?i:e(n)}const FBe="OES_vertex_array_object",QZ="ANGLE_instanced_arrays",UBe="WEBGL_draw_buffers",zBe="EXT_disjoint_timer_query",$Be="EXT_texture_filter_anisotropic",jBe="VertexArray requires WebGL2 or OES_vertex_array_object extension";function GBe(t,e){return{webgl2:pn(t),ext:t.getExtension(e)}}const JZ={[FBe]:{meta:{suffix:"OES"},createVertexArray:()=>{As(!1,jBe)},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[QZ]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(t,e){As(e===0,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[UBe]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{As(!1)}},[zBe]:{meta:{suffix:"EXT"},createQuery:()=>{As(!1)},deleteQuery:()=>{As(!1)},beginQuery:()=>{As(!1)},endQuery:()=>{},getQuery(t,e){return this.getQueryObject(t,e)},getQueryParameter(t,e){return this.getQueryObject(t,e)},getQueryObject:()=>{}}},YP={readBuffer:(t,e,n)=>{pn(t)&&e(n)},getVertexAttrib:(t,e,n,r)=>{const{webgl2:i,ext:s}=GBe(t,QZ);let o;switch(r){case 35069:o=i?void 0:!1;break;case 35070:o=!i&&!s?0:void 0;break}return o!==void 0?o:e(n,r)},getProgramParameter:(t,e,n,r)=>{if(!pn(t))switch(r){case 35967:return 35981;case 35971:return 0;case 35382:return 0}return e(n,r)},getInternalformatParameter:(t,e,n,r,i)=>{if(!pn(t))switch(i){case 32937:return new Int32Array([0])}return t.getInternalformatParameter(n,r,i)},getTexParameter(t,e,n,r){switch(r){case 34046:const{extensions:i}=t.luma,s=i[$Be];r=s&&s.TEXTURE_MAX_ANISOTROPY_EXT||34046;break}return e(n,r)},getParameter:BBe,hint(t,e,n,r){return e(n,r)}};function HBe(t){t.luma=t.luma||{};const{luma:e}=t;return e.polyfilled||(CBe(t),VBe(t),XBe(t,JZ),WBe(t,{target:e,target2:t}),e.polyfilled=!0),t}globalThis.polyfillContext=HBe;function VBe(t){t.luma.extensions={};const e=t.getSupportedExtensions()||[];for(const n of e)t.luma[n]=t.getExtension(n)}function WBe(t,e){let{target:n,target2:r}=e;Object.keys(YP).forEach(i=>{if(typeof YP[i]=="function"){const s=t[i]?t[i].bind(t):()=>{},o=YP[i].bind(null,t,s);n[i]=o,r[i]=o}})}function XBe(t,e){for(const n of Object.getOwnPropertyNames(e))n!=="overrides"&&YBe(t,{extension:n,target:t.luma,target2:t})}function YBe(t,e){let{extension:n,target:r,target2:i}=e;const s=JZ[n];As(s);const{meta:o={}}=s,{suffix:a=""}=o,l=t.getExtension(n);for(const c of Object.keys(s)){const u="".concat(c).concat(a);let d=null;c==="meta"||typeof t[c]=="function"||(l&&typeof l[u]=="function"?d=function(){return l[u](...arguments)}:typeof s[c]=="function"&&(d=s[c].bind(r))),d&&(r[c]=d,i[c]=d)}}const pD={3042:!1,32773:new Float32Array([0,0,0,0]),32777:32774,34877:32774,32969:1,32968:0,32971:1,32970:0,3106:new Float32Array([0,0,0,0]),3107:[!0,!0,!0,!0],2884:!1,2885:1029,2929:!1,2931:1,2932:513,2928:new Float32Array([0,1]),2930:!0,3024:!0,36006:null,2886:2305,33170:4352,2849:1,32823:!1,32824:0,10752:0,32938:1,32939:!1,3089:!1,3088:new Int32Array([0,0,1024,1024]),2960:!1,2961:0,2968:4294967295,36005:4294967295,2962:519,2967:0,2963:4294967295,34816:519,36003:0,36004:4294967295,2964:7680,2965:7680,2966:7680,34817:7680,34818:7680,34819:7680,2978:[0,0,1024,1024],3333:4,3317:4,37440:!1,37441:!1,37443:37444,35723:4352,36010:null,35977:!1,3330:0,3332:0,3331:0,3314:0,32878:0,3316:0,3315:0,32877:0},bu=(t,e,n)=>e?t.enable(n):t.disable(n),g$=(t,e,n)=>t.hint(n,e),io=(t,e,n)=>t.pixelStorei(n,e),KBe=(t,e)=>{const n=pn(t)?36009:36160;return t.bindFramebuffer(n,e)},qBe=(t,e)=>t.bindFramebuffer(36008,e);function D0(t){return Array.isArray(t)||ArrayBuffer.isView(t)}const ZBe={3042:bu,32773:(t,e)=>t.blendColor(...e),32777:"blendEquation",34877:"blendEquation",32969:"blendFunc",32968:"blendFunc",32971:"blendFunc",32970:"blendFunc",3106:(t,e)=>t.clearColor(...e),3107:(t,e)=>t.colorMask(...e),2884:bu,2885:(t,e)=>t.cullFace(e),2929:bu,2931:(t,e)=>t.clearDepth(e),2932:(t,e)=>t.depthFunc(e),2928:(t,e)=>t.depthRange(...e),2930:(t,e)=>t.depthMask(e),3024:bu,35723:g$,36006:KBe,2886:(t,e)=>t.frontFace(e),33170:g$,2849:(t,e)=>t.lineWidth(e),32823:bu,32824:"polygonOffset",10752:"polygonOffset",35977:bu,32938:"sampleCoverage",32939:"sampleCoverage",3089:bu,3088:(t,e)=>t.scissor(...e),2960:bu,2961:(t,e)=>t.clearStencil(e),2968:(t,e)=>t.stencilMaskSeparate(1028,e),36005:(t,e)=>t.stencilMaskSeparate(1029,e),2962:"stencilFuncFront",2967:"stencilFuncFront",2963:"stencilFuncFront",34816:"stencilFuncBack",36003:"stencilFuncBack",36004:"stencilFuncBack",2964:"stencilOpFront",2965:"stencilOpFront",2966:"stencilOpFront",34817:"stencilOpBack",34818:"stencilOpBack",34819:"stencilOpBack",2978:(t,e)=>t.viewport(...e),3333:io,3317:io,37440:io,37441:io,37443:io,3330:io,3332:io,3331:io,36010:qBe,3314:io,32878:io,3316:io,3315:io,32877:io,framebuffer:(t,e)=>{const n=e&&"handle"in e?e.handle:e;return t.bindFramebuffer(36160,n)},blend:(t,e)=>e?t.enable(3042):t.disable(3042),blendColor:(t,e)=>t.blendColor(...e),blendEquation:(t,e)=>{e=D0(e)?e:[e,e],t.blendEquationSeparate(...e)},blendFunc:(t,e)=>{e=D0(e)&&e.length===2?[...e,...e]:e,t.blendFuncSeparate(...e)},clearColor:(t,e)=>t.clearColor(...e),clearDepth:(t,e)=>t.clearDepth(e),clearStencil:(t,e)=>t.clearStencil(e),colorMask:(t,e)=>t.colorMask(...e),cull:(t,e)=>e?t.enable(2884):t.disable(2884),cullFace:(t,e)=>t.cullFace(e),depthTest:(t,e)=>e?t.enable(2929):t.disable(2929),depthFunc:(t,e)=>t.depthFunc(e),depthMask:(t,e)=>t.depthMask(e),depthRange:(t,e)=>t.depthRange(...e),dither:(t,e)=>e?t.enable(3024):t.disable(3024),derivativeHint:(t,e)=>{t.hint(35723,e)},frontFace:(t,e)=>t.frontFace(e),mipmapHint:(t,e)=>t.hint(33170,e),lineWidth:(t,e)=>t.lineWidth(e),polygonOffsetFill:(t,e)=>e?t.enable(32823):t.disable(32823),polygonOffset:(t,e)=>t.polygonOffset(...e),sampleCoverage:(t,e)=>t.sampleCoverage(...e),scissorTest:(t,e)=>e?t.enable(3089):t.disable(3089),scissor:(t,e)=>t.scissor(...e),stencilTest:(t,e)=>e?t.enable(2960):t.disable(2960),stencilMask:(t,e)=>{e=D0(e)?e:[e,e];const[n,r]=e;t.stencilMaskSeparate(1028,n),t.stencilMaskSeparate(1029,r)},stencilFunc:(t,e)=>{e=D0(e)&&e.length===3?[...e,...e]:e;const[n,r,i,s,o,a]=e;t.stencilFuncSeparate(1028,n,r,i),t.stencilFuncSeparate(1029,s,o,a)},stencilOp:(t,e)=>{e=D0(e)&&e.length===3?[...e,...e]:e;const[n,r,i,s,o,a]=e;t.stencilOpSeparate(1028,n,r,i),t.stencilOpSeparate(1029,s,o,a)},viewport:(t,e)=>t.viewport(...e)};function Rr(t,e,n){return e[t]!==void 0?e[t]:n[t]}const QBe={blendEquation:(t,e,n)=>t.blendEquationSeparate(Rr(32777,e,n),Rr(34877,e,n)),blendFunc:(t,e,n)=>t.blendFuncSeparate(Rr(32969,e,n),Rr(32968,e,n),Rr(32971,e,n),Rr(32970,e,n)),polygonOffset:(t,e,n)=>t.polygonOffset(Rr(32824,e,n),Rr(10752,e,n)),sampleCoverage:(t,e,n)=>t.sampleCoverage(Rr(32938,e,n),Rr(32939,e,n)),stencilFuncFront:(t,e,n)=>t.stencilFuncSeparate(1028,Rr(2962,e,n),Rr(2967,e,n),Rr(2963,e,n)),stencilFuncBack:(t,e,n)=>t.stencilFuncSeparate(1029,Rr(34816,e,n),Rr(36003,e,n),Rr(36004,e,n)),stencilOpFront:(t,e,n)=>t.stencilOpSeparate(1028,Rr(2964,e,n),Rr(2965,e,n),Rr(2966,e,n)),stencilOpBack:(t,e,n)=>t.stencilOpSeparate(1029,Rr(34817,e,n),Rr(34818,e,n),Rr(34819,e,n))},v$={enable:(t,e)=>t({[e]:!0}),disable:(t,e)=>t({[e]:!1}),pixelStorei:(t,e,n)=>t({[e]:n}),hint:(t,e,n)=>t({[e]:n}),bindFramebuffer:(t,e,n)=>{switch(e){case 36160:return t({36006:n,36010:n});case 36009:return t({36006:n});case 36008:return t({36010:n});default:return null}},blendColor:(t,e,n,r,i)=>t({32773:new Float32Array([e,n,r,i])}),blendEquation:(t,e)=>t({32777:e,34877:e}),blendEquationSeparate:(t,e,n)=>t({32777:e,34877:n}),blendFunc:(t,e,n)=>t({32969:e,32968:n,32971:e,32970:n}),blendFuncSeparate:(t,e,n,r,i)=>t({32969:e,32968:n,32971:r,32970:i}),clearColor:(t,e,n,r,i)=>t({3106:new Float32Array([e,n,r,i])}),clearDepth:(t,e)=>t({2931:e}),clearStencil:(t,e)=>t({2961:e}),colorMask:(t,e,n,r,i)=>t({3107:[e,n,r,i]}),cullFace:(t,e)=>t({2885:e}),depthFunc:(t,e)=>t({2932:e}),depthRange:(t,e,n)=>t({2928:new Float32Array([e,n])}),depthMask:(t,e)=>t({2930:e}),frontFace:(t,e)=>t({2886:e}),lineWidth:(t,e)=>t({2849:e}),polygonOffset:(t,e,n)=>t({32824:e,10752:n}),sampleCoverage:(t,e,n)=>t({32938:e,32939:n}),scissor:(t,e,n,r,i)=>t({3088:new Int32Array([e,n,r,i])}),stencilMask:(t,e)=>t({2968:e,36005:e}),stencilMaskSeparate:(t,e,n)=>t({[e===1028?2968:36005]:n}),stencilFunc:(t,e,n,r)=>t({2962:e,2967:n,2963:r,34816:e,36003:n,36004:r}),stencilFuncSeparate:(t,e,n,r,i)=>t({[e===1028?2962:34816]:n,[e===1028?2967:36003]:r,[e===1028?2963:36004]:i}),stencilOp:(t,e,n,r)=>t({2964:e,2965:n,2966:r,34817:e,34818:n,34819:r}),stencilOpSeparate:(t,e,n,r,i)=>t({[e===1028?2964:34817]:n,[e===1028?2965:34818]:r,[e===1028?2966:34819]:i}),viewport:(t,e,n,r,i)=>t({2978:[e,n,r,i]})},gl=(t,e)=>t.isEnabled(e),y$={3042:gl,2884:gl,2929:gl,3024:gl,32823:gl,32926:gl,32928:gl,3089:gl,2960:gl,35977:gl};function eQ(t){for(const e in t)return!1;return!0}function JBe(t,e){if(t===e)return!0;const n=Array.isArray(t)||ArrayBuffer.isView(t),r=Array.isArray(e)||ArrayBuffer.isView(e);if(n&&r&&t.length===e.length){for(let i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0}return!1}function _$(t,e){const n=t[e].bind(t);t[e]=function(){const i=arguments.length<=0?void 0:arguments[0];return i in t.state.cache?t.state.enable?t.state.cache[i]:n(...arguments):n(...arguments)},Object.defineProperty(t[e],"name",{value:"".concat(e,"-from-cache"),configurable:!1})}function eFe(t,e,n){const r=t[e].bind(t);t[e]=function(){for(var s=arguments.length,o=new Array(s),a=0;a<s;a++)o[a]=arguments[a];const{valueChanged:l,oldValue:c}=n(t.state._updateCache,...o);return l&&r(...o),c},Object.defineProperty(t[e],"name",{value:"".concat(e,"-to-cache"),configurable:!1})}function tFe(t){const e=t.useProgram.bind(t);t.useProgram=function(r){t.state.program!==r&&(e(r),t.state.program=r)}}class nFe{constructor(e){let{copyState:n=!1,log:r=()=>{}}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.program=null,this.stateStack=[],this.enable=!0,this.cache=n?iFe(e):Object.assign({},pD),this.log=r,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){As(this.stateStack.length>0);const e=this.stateStack[this.stateStack.length-1];Gc(this.gl,e),this.stateStack.pop()}_updateCache(e){let n=!1,r;const i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const s in e){As(s!==void 0);const o=e[s],a=this.cache[s];JBe(o,a)||(n=!0,r=a,i&&!(s in i)&&(i[s]=a),this.cache[s]=o)}return{valueChanged:n,oldValue:r}}}function tQ(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{enable:n=!0,copyState:r}=e;if(As(r!==void 0),!t.state){const{polyfillContext:i}=globalThis;i&&i(t),t.state=new nFe(t,{copyState:r}),tFe(t);for(const s in v$){const o=v$[s];eFe(t,s,o)}_$(t,"getParameter"),_$(t,"isEnabled")}return t.state.enable=n,t}function rFe(t){t.state||tQ(t,{copyState:!1}),t.state.push()}function b$(t){As(t.state),t.state.pop()}function Gc(t,e){if(As(_C(t),"setParameters requires a WebGL context"),eQ(e))return;const n={};for(const i in e){const s=Number(i),o=ZBe[i];o&&(typeof o=="string"?n[o]=!0:o(t,e[i],s))}const r=t.state&&t.state.cache;if(r)for(const i in n){const s=QBe[i];s(t,e,r)}}function iFe(t,e){if(e=e||pD,typeof e=="number"){const i=e,s=y$[i];return s?s(t,i):t.getParameter(i)}const n=Array.isArray(e)?e:Object.keys(e),r={};for(const i of n){const s=y$[i];r[i]=s?s(t,Number(i)):t.getParameter(Number(i))}return r}function sFe(t){Gc(t,pD)}function Ka(t,e,n){if(eQ(e))return n(t);const{nocatch:r=!0}=e;rFe(t),Gc(t,e);let i;if(r)i=n(t),b$(t);else try{i=n(t)}finally{b$(t)}return i}function sg(t){const{luma:e}=t;if(t.canvas&&e){const n=e.canvasSizeInfo,r="clientWidth"in n?n.clientWidth:t.canvas.clientWidth;return r?t.drawingBufferWidth/r:1}return 1}function KP(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const r=sg(t),i=t.drawingBufferWidth,s=t.drawingBufferHeight;return aFe(e,r,i,s,n)}function oFe(t){const e=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(t)?t<=0?1:t:t?e:1}function aFe(t,e,n,r,i){const s=x$(t[0],e,n);let o=E$(t[1],e,r,i),a=x$(t[0]+1,e,n);const l=a===n-1?a:a-1;a=E$(t[1]+1,e,r,i);let c;return i?(a=a===0?a:a+1,c=o,o=a):c=a===r-1?a:a-1,{x:s,y:o,width:Math.max(l-s+1,1),height:Math.max(c-o+1,1)}}function x$(t,e,n){return Math.min(Math.round(t*e),n-1)}function E$(t,e,n,r){return r?Math.max(0,n-1-Math.round(t*e)):Math.min(Math.round(t*e),n-1)}const mD=eu(),lFe=mD&&typeof document<"u",nQ={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function rQ(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};As(mD,`createGLContext only available in the browser.
Create your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils`),t=Object.assign({},nQ,t);const{width:e,height:n}=t;function r(a){if(t.throwOnError)throw new Error(a);return console.error(a),null}t.onError=r;let i;const{canvas:s}=t,o=hFe({canvas:s,width:e,height:n,onError:r});return i=dFe(o,t),i?(i=gD(i,t),fFe(i),i):null}function gD(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!t||t._instrumented)return t;t._version=t._version||pFe(t),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{},e=Object.assign({},nQ,e);const{manageState:n,debug:r}=e;return n&&tQ(t,{copyState:!1,log:function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return Rt.log(1,...s)()}}),mD&&r&&(globalThis.makeDebugContext?(t=globalThis.makeDebugContext(t,e),Rt.level=Math.max(Rt.level,1)):Rt.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),t._instrumented=!0,t}function cFe(t){const e=t.getParameter(7936),n=t.getParameter(7937),r=t.getExtension("WEBGL_debug_renderer_info"),i=r&&t.getParameter(r.UNMASKED_VENDOR_WEBGL||7936),s=r&&t.getParameter(r.UNMASKED_RENDERER_WEBGL||7937);return{vendor:i||e,renderer:s||n,vendorMasked:e,rendererMasked:n,version:t.getParameter(7938),shadingLanguageVersion:t.getParameter(35724)}}function uFe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t.canvas){const r=oFe(e.useDevicePixels);mFe(t,r,e);return}const n=t.getExtension("STACKGL_resize_drawingbuffer");n&&"width"in e&&"height"in e&&n.resize(e.width,e.height)}function dFe(t,e){const{onError:n}=e;let r=null;const i=l=>r=l.statusMessage||r;t.addEventListener("webglcontextcreationerror",i,!1);const{webgl1:s=!0,webgl2:o=!0}=e;let a=null;return o&&(a=a||t.getContext("webgl2",e),a=a||t.getContext("experimental-webgl2",e)),s&&(a=a||t.getContext("webgl",e),a=a||t.getContext("experimental-webgl",e)),t.removeEventListener("webglcontextcreationerror",i,!1),a?(e.onContextLost&&t.addEventListener("webglcontextlost",e.onContextLost,!1),e.onContextRestored&&t.addEventListener("webglcontextrestored",e.onContextRestored,!1),a):n("Failed to create ".concat(o&&!s?"WebGL2":"WebGL"," context: ").concat(r||"Unknown error"))}function hFe(t){let{canvas:e,width:n=800,height:r=600,onError:i}=t,s;return typeof e=="string"?(lFe&&document.readyState==="complete"||i("createGLContext called on canvas '".concat(e,"' before page was loaded")),s=document.getElementById(e)):e?s=e:(s=document.createElement("canvas"),s.id="lumagl-canvas",s.style.width=Number.isFinite(n)?"".concat(n,"px"):"100%",s.style.height=Number.isFinite(r)?"".concat(r,"px"):"100%",document.body.insertBefore(s,document.body.firstChild)),s}function fFe(t){const e=pn(t)?"WebGL2":"WebGL1",n=cFe(t),r=n?"(".concat(n.vendor,",").concat(n.renderer,")"):"",i=t.debug?" debug":"";Rt.info(1,"".concat(e).concat(i," context ").concat(r))()}function pFe(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?2:1}function mFe(t,e,n){let r="width"in n?n.width:t.canvas.clientWidth,i="height"in n?n.height:t.canvas.clientHeight;(!r||!i)&&(Rt.log(1,"Canvas clientWidth/clientHeight is 0")(),e=1,r=t.canvas.width||1,i=t.canvas.height||1),t.luma=t.luma||{},t.luma.canvasSizeInfo=t.luma.canvasSizeInfo||{};const s=t.luma.canvasSizeInfo;if(s.clientWidth!==r||s.clientHeight!==i||s.devicePixelRatio!==e){let o=e;const a=Math.floor(r*o),l=Math.floor(i*o);t.canvas.width=a,t.canvas.height=l,(t.drawingBufferWidth!==a||t.drawingBufferHeight!==l)&&(Rt.warn("Device pixel ratio clamped")(),o=Math.min(t.drawingBufferWidth/r,t.drawingBufferHeight/i),t.canvas.width=Math.floor(r*o),t.canvas.height=Math.floor(i*o)),Object.assign(t.luma.canvasSizeInfo,{clientWidth:r,clientHeight:i,devicePixelRatio:e})}}function w$(){let t;if(typeof window<"u"&&window.performance)t=window.performance.now();else if(typeof process<"u"&&process.hrtime){const e=process.hrtime();t=e[0]*1e3+e[1]/1e6}else t=Date.now();return t}class T${constructor(e,n){W(this,"name",void 0),W(this,"type",void 0),W(this,"sampleSize",1),W(this,"time",void 0),W(this,"count",void 0),W(this,"samples",void 0),W(this,"lastTiming",void 0),W(this,"lastSampleTime",void 0),W(this,"lastSampleCount",void 0),W(this,"_count",0),W(this,"_time",0),W(this,"_samples",0),W(this,"_startTime",0),W(this,"_timerPending",!1),this.name=e,this.type=n,this.reset()}setSampleSize(e){return this.sampleSize=e,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(e){return this._count+=e,this._samples++,this._checkSampling(),this}subtractCount(e){return this._count-=e,this._samples++,this._checkSampling(),this}addTime(e){return this._time+=e,this.lastTiming=e,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=w$(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(w$()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class vD{constructor(e){W(this,"id",void 0),W(this,"stats",{}),this.id=e.id,this.stats={},this._initializeStats(e.stats),Object.seal(this)}get(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:e,type:n})}get size(){return Object.keys(this.stats).length}reset(){for(const e in this.stats)this.stats[e].reset();return this}forEach(e){for(const n in this.stats)e(this.stats[n])}getTable(){const e={};return this.forEach(n=>{e[n.name]={time:n.time||0,count:n.count||0,average:n.getAverageTime()||0,hz:n.getHz()||0}}),e}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>this._getOrCreate(n))}_getOrCreate(e){if(!e||!e.name)return null;const{name:n,type:r}=e;return this.stats[n]||(e instanceof T$?this.stats[n]=e:this.stats[n]=new T$(n,r)),this.stats[n]}}const Kv="8.5.21",gFe="set luma.log.level=1 (or higher) to trace rendering";class vFe{constructor(){this.stats=new Map}get(e){return this.stats.has(e)||this.stats.set(e,new vD({id:e})),this.stats.get(e)}}const Oh=new vFe;if(globalThis.luma&&globalThis.luma.VERSION!==Kv)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(Kv));globalThis.luma||(eu()&&Rt.log(1,"luma.gl ".concat(Kv," - ").concat(gFe))(),globalThis.luma=globalThis.luma||{VERSION:Kv,version:Kv,log:Rt,stats:Oh,globals:{modules:{},nodeIO:{}}});function yFe(t){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)}function _Fe(t){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t)}function pt(t,e){if(!t)throw new Error(e||"luma.gl: assertion failed.")}function qP(t,e){if(typeof e!="string")return e;const n=Number(e);if(!isNaN(n))return n;e=e.replace(/^.*\./,"");const r=t[e];return pt(r!==void 0,"Accessing undefined constant GL.".concat(e)),r}function fd(t,e){e=Number(e);for(const n in t)if(t[n]===e)return"GL.".concat(n);return String(e)}const ZP={};function Cd(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"id";ZP[t]=ZP[t]||1;const e=ZP[t]++;return"".concat(t,"-").concat(e)}function S$(t){return pt(typeof t=="number","Input must be a number"),t&&(t&t-1)===0}function og(t){let e=!0;for(const n in t){e=!1;break}return e}function iQ(t,e,n,r){const i="See luma.gl ".concat(n," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),s=Object.getPrototypeOf(t);r.forEach(o=>{s.methodName||(s[o]=()=>{throw Rt.removed("Calling removed method ".concat(e,".").concat(o,": "),i)(),new Error(o)})})}const Sp="Resource subclass must define virtual methods";let tu=class{get[Symbol.toStringTag](){return"Resource"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};bC(e);const{id:r,userData:i={}}=n;this.gl=e,this.gl2=e,this.id=r||Cd(this[Symbol.toStringTag]),this.userData=i,this._bound=!1,this._handle=n.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,n&&e&&n.filter(Boolean).forEach(r=>r.delete()),this}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.handle;if(typeof e!="function")return this._bindHandle(e),this;let n;return this._bound?n=e():(this._bindHandle(this.handle),this._bound=!0,n=e(),this._bound=!1,this._bindHandle(null)),n}unbind(){this.bind(null)}getParameter(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};e=qP(this.gl,e),pt(e);const i=(this.constructor.PARAMETERS||{})[e];if(i){const s=pn(this.gl);if(!((!("webgl2"in i)||s)&&(!("extension"in i)||this.gl.getExtension(i.extension)))){const a=i.webgl1,l="webgl2"in i?i.webgl2:i.webgl1;return s?l:a}}return this._getParameter(e,n)}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{parameters:n,keys:r}=e,i=this.constructor.PARAMETERS||{},s=pn(this.gl),o={},a=n||Object.keys(i);for(const l of a){const c=i[l];if(c&&(!("webgl2"in c)||s)&&(!("extension"in c)||this.gl.getExtension(c.extension))){const d=r?fd(this.gl,l):l;o[d]=this.getParameter(l,e),r&&c.type==="GLenum"&&(o[d]=fd(this.gl,o[d]))}}return o}setParameter(e,n){e=qP(this.gl,e),pt(e);const i=(this.constructor.PARAMETERS||{})[e];if(i){const s=pn(this.gl);if(!((!("webgl2"in i)||s)&&(!("extension"in i)||this.gl.getExtension(i.extension))))throw new Error("Parameter not available on this platform");i.type==="GLenum"&&(n=qP(n))}return this._setParameter(e,n),this}setParameters(e){for(const n in e)this.setParameter(n,e[n]);return this}stubRemovedMethods(e,n,r){return iQ(this,e,n,r)}initialize(e){}_createHandle(){throw new Error(Sp)}_deleteHandle(){throw new Error(Sp)}_bindHandle(e){throw new Error(Sp)}_getOptsFromHandle(){throw new Error(Sp)}_getParameter(e,n){throw new Error(Sp)}_setParameter(e,n){throw new Error(Sp)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_addStats(){const e=this[Symbol.toStringTag],n=Oh.get("Resource Counts");n.get("Resources Created").incrementCount(),n.get("".concat(e,"s Created")).incrementCount(),n.get("".concat(e,"s Active")).incrementCount()}_removeStats(){const e=this[Symbol.toStringTag];Oh.get("Resource Counts").get("".concat(e,"s Active")).decrementCount()}_trackAllocatedMemory(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag];this._trackAllocatedMemoryForContext(e,n),this._trackAllocatedMemoryForContext(e,n,this.gl.canvas&&this.gl.canvas.id),this.byteLength=e}_trackAllocatedMemoryForContext(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag],r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";const i=Oh.get("Memory Usage".concat(r));i.get("GPU Memory").addCount(e),i.get("".concat(n," Memory")).addCount(e)}_trackDeallocatedMemory(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag];this._trackDeallocatedMemoryForContext(e),this._trackDeallocatedMemoryForContext(e,this.gl.canvas&&this.gl.canvas.id),this.byteLength=0}_trackDeallocatedMemoryForContext(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag],n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=Oh.get("Memory Usage".concat(n));r.get("GPU Memory").subtractCount(this.byteLength),r.get("".concat(e," Memory")).subtractCount(this.byteLength)}};const bFe="Failed to deduce GL constant from typed array";function UL(t){switch(ArrayBuffer.isView(t)?t.constructor:t){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(bFe)}}function t1(t){let{clamped:e=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(t){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return e?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function xFe(t){let{data:e,width:n,height:r,bytesPerPixel:i=4,temp:s}=t;const o=n*i;s=s||new Uint8Array(o);for(let a=0;a<r/2;++a){const l=a*o,c=(r-a-1)*o;s.set(e.subarray(l,l+o)),e.copyWithin(l,c,c+o),e.set(s,c)}}function EFe(t){let{data:e,width:n,height:r}=t;const i=Math.round(n/2),s=Math.round(r/2),o=new Uint8Array(i*s*4);for(let a=0;a<s;a++)for(let l=0;l<i;l++)for(let c=0;c<4;c++)o[(a*i+l)*4+c]=e[(a*2*n+l*2)*4+c];return{data:o,width:i,height:s}}function zL(t,e,n){const{removedProps:r={},deprecatedProps:i={},replacedProps:s={}}=n;for(const a in r)if(a in e){const c=r[a]?"".concat(t,".").concat(r[a]):"N/A";Rt.removed("".concat(t,".").concat(a),c)()}for(const a in i)if(a in e){const l=i[a];Rt.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(l))()}let o=null;for(const a in s)if(a in e){const l=s[a];Rt.deprecated("".concat(t,".").concat(a),"".concat(t,".").concat(l))(),o=o||Object.assign({},e),o[l]=e[a],delete o[a]}return o||e}const wFe={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},TFe={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class po{static getBytesPerElement(e){return t1(e.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(e){return pt(e.size),t1(e.type||5126).BYTES_PER_ELEMENT*e.size}static resolve(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return new po(wFe,...n)}constructor(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];n.forEach(i=>this._assign(i)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return po.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return po.getBytesPerVertex(this)}_assign(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e=zL("Accessor",e,TFe),e.type!==void 0&&(this.type=e.type,(e.type===5124||e.type===5125)&&(this.integer=!0)),e.size!==void 0&&(this.size=e.size),e.offset!==void 0&&(this.offset=e.offset),e.stride!==void 0&&(this.stride=e.stride),e.normalized!==void 0&&(this.normalized=e.normalized),e.integer!==void 0&&(this.integer=e.integer),e.divisor!==void 0&&(this.divisor=e.divisor),e.buffer!==void 0&&(this.buffer=e.buffer),e.index!==void 0&&(typeof e.index=="boolean"?this.index=e.index?1:0:this.index=e.index),e.instanced!==void 0&&(this.divisor=e.instanced?1:0),e.isInstanced!==void 0&&(this.divisor=e.isInstanced?1:0),this}}const C$=10,sQ={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},SFe={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:sQ},CFe={removedProps:sQ};let kn=class extends tu{get[Symbol.toStringTag](){return"Buffer"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=n.target||(this.gl.webgl2?36662:34962),this.initialize(n),Object.seal(this)}getElementCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/po.getBytesPerElement(e))}getVertexCount(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/po.getBytesPerVertex(e))}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ArrayBuffer.isView(e)&&(e={data:e}),Number.isFinite(e)&&(e={byteLength:e}),e=zL("Buffer",e,SFe),this.usage=e.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},e,e.accessor)),e.data?this._setData(e.data,e.offset,e.byteLength):this._setByteLength(e.byteLength||0),this}setProps(e){return e=zL("Buffer",e,CFe),"accessor"in e&&this.setAccessor(e.accessor),this}setAccessor(e){return e=Object.assign({},e),delete e.buffer,this.accessor=new po(e),this}reallocate(e){return e>this.byteLength?(this._setByteLength(e),!0):(this.bytesUsed=e,!1)}setData(e){return this.initialize(e)}subData(e){ArrayBuffer.isView(e)&&(e={data:e});const{data:n,offset:r=0,srcOffset:i=0}=e,s=e.byteLength||e.length;pt(n);const o=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(o,this.handle),i!==0||s!==void 0?(Ps(this.gl),this.gl.bufferSubData(this.target,r,n,i,s)):this.gl.bufferSubData(o,r,n),this.gl.bindBuffer(o,null),this.debugData=null,this._inferType(n),this}copyData(e){let{sourceBuffer:n,readOffset:r=0,writeOffset:i=0,size:s}=e;const{gl:o}=this;return Ps(o),o.bindBuffer(36662,n.handle),o.bindBuffer(36663,this.handle),o.copyBufferSubData(36662,36663,r,i,s),o.bindBuffer(36662,null),o.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:e=null,srcByteOffset:n=0,dstOffset:r=0,length:i=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ps(this.gl);const s=t1(this.accessor.type||5126,{clamped:!1}),o=this._getAvailableElementCount(n),a=r;let l,c;e?(c=e.length,l=c-a):(l=Math.min(o,i||o),c=a+l);const u=Math.min(o,l);return i=i||u,pt(i<=u),e=e||new s(c),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,n,e,r,i),this.gl.bindBuffer(36662,null),e}bind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index,offset:r=0,size:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?i!==void 0?this.gl.bindBufferRange(e,n,this.handle,r,i):(pt(r===0),this.gl.bindBufferBase(e,n,this.handle)):this.gl.bindBuffer(e,this.handle),this}unbind(){let{target:e=this.target,index:n=this.accessor&&this.accessor.index}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e===35345||e===35982?this.gl.bindBufferBase(e,n,null):this.gl.bindBuffer(e,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(C$,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.byteLength+n;pt(ArrayBuffer.isView(e)),this._trackDeallocatedMemory();const i=this._getTarget();this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,this.usage),this.gl.bufferSubData(i,n,e),this.gl.bindBuffer(i,null),this.debugData=e.slice(0,C$),this.bytesUsed=r,this._trackAllocatedMemory(r);const s=UL(e);return pt(s),this.setAccessor(new po(this.accessor,{type:s})),this}_setByteLength(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.usage;pt(e>=0),this._trackDeallocatedMemory();let r=e;e===0&&(r=new Float32Array(0));const i=this._getTarget();return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,r,n),this.gl.bindBuffer(i,null),this.usage=n,this.debugData=null,this.bytesUsed=e,this._trackAllocatedMemory(e),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(e){const n=t1(this.accessor.type||5126,{clamped:!1}),r=e/n.BYTES_PER_ELEMENT;return this.getElementCount()-r}_inferType(e){this.accessor.type||this.setAccessor(new po(this.accessor,{type:UL(e)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(e){this.gl.bindBuffer(this.target,this.handle);const n=this.gl.getBufferParameter(this.target,e);return this.gl.bindBuffer(this.target,null),n}get type(){return Rt.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return Rt.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(e){return Rt.deprecated("setByteLength","reallocate")(),this.reallocate(e)}updateAccessor(e){return Rt.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new po(this.accessor,e),this}};const yD={6407:{dataFormat:6407,types:[5121,33635]},6408:{dataFormat:6408,types:[5121,32819,32820]},6406:{dataFormat:6406,types:[5121]},6409:{dataFormat:6409,types:[5121]},6410:{dataFormat:6410,types:[5121]},33326:{dataFormat:6403,types:[5126],gl2:!0},33328:{dataFormat:33319,types:[5126],gl2:!0},34837:{dataFormat:6407,types:[5126],gl2:!0},34836:{dataFormat:6408,types:[5126],gl2:!0}},oQ={6403:1,36244:1,33319:2,33320:2,6407:3,36248:3,6408:4,36249:4,6402:1,34041:1,6406:1,6409:1,6410:2},aQ={5126:4,5125:4,5124:4,5123:2,5122:2,5131:2,5120:1,5121:1};function AFe(t,e){const n=yD[e];if(!n)return!1;if(n.gl1===void 0&&n.gl2===void 0)return!0;const r=pn(t)&&n.gl2||n.gl1;return typeof r=="string"?t.getExtension(r):r}function RFe(t,e){const n=yD[e];switch(n&&n.types[0]){case 5126:return t.getExtension("OES_texture_float_linear");case 5131:return t.getExtension("OES_texture_half_float_linear");default:return!0}}const PFe=[9729,9728],A$=globalThis.WebGLBuffer||function(){};class ag extends tu{get[Symbol.toStringTag](){return"Texture"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{format:r,linearFiltering:i}=n;let s=!0;return r&&(s=s&&AFe(e,r),s=s&&(!i||RFe(e,r))),s}constructor(e,n){const{id:r=Cd("texture"),handle:i,target:s}=n;super(e,{id:r,handle:i}),this.target=s,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.data;if(n instanceof Promise)return n.then(x=>this.initialize(Object.assign({},e,{pixels:x,data:x}))),this;const r=typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement;if(r&&n.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,n.addEventListener("loadeddata",()=>this.initialize(e)),this;const{pixels:i=null,format:s=6408,border:o=0,recreate:a=!1,parameters:l={},pixelStore:c={},textureUnit:u=void 0}=e;n||(n=i);let{width:d,height:h,dataFormat:f,type:p,compressed:m=!1,mipmaps:_=!0}=e;const{depth:y=0}=e;return{width:d,height:h,compressed:m,dataFormat:f,type:p}=this._deduceParameters({format:s,type:p,dataFormat:f,compressed:m,data:n,width:d,height:h}),this.width=d,this.height=h,this.depth=y,this.format=s,this.type=p,this.dataFormat=f,this.border=o,this.textureUnit=u,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),_&&this._isNPOT()&&(Rt.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),_=!1,this._updateForNPOT(l)),this.mipmaps=_,this.setImageData({data:n,width:d,height:h,depth:y,format:s,type:p,dataFormat:f,border:o,mipmaps:_,parameters:c,compressed:m}),_&&this.generateMipmap(),this.setParameters(l),a&&(this.data=n),r&&(this._video={video:n,parameters:l,lastTime:n.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?n.currentTime:-1}),this}update(){if(this._video){const{video:e,parameters:n,lastTime:r}=this._video;if(r===e.currentTime||e.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:e,parameters:n}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=e.currentTime}}resize(e){let{height:n,width:r,mipmaps:i=!1}=e;return r!==this.width||n!==this.height?this.initialize({width:r,height:n,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}generateMipmap(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isNPOT()?(Rt.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),Ka(this.gl,e,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(e){this._trackDeallocatedMemory("Texture");const{target:n=this.target,pixels:r=null,level:i=0,format:s=this.format,border:o=this.border,offset:a=0,parameters:l={}}=e;let{data:c=null,type:u=this.type,width:d=this.width,height:h=this.height,dataFormat:f=this.dataFormat,compressed:p=!1}=e;c||(c=r),{type:u,dataFormat:f,compressed:p,width:d,height:h}=this._deduceParameters({format:s,type:u,dataFormat:f,compressed:p,data:c,width:d,height:h});const{gl:m}=this;m.bindTexture(this.target,this.handle);let _=null;({data:c,dataType:_}=this._getDataType({data:c,compressed:p}));let y,x=0;if(Ka(this.gl,l,()=>{switch(_){case"null":m.texImage2D(n,i,s,d,h,o,f,u,c);break;case"typed-array":m.texImage2D(n,i,s,d,h,o,f,u,c,a);break;case"buffer":y=Ps(m),y.bindBuffer(35052,c.handle||c),y.texImage2D(n,i,s,d,h,o,f,u,a),y.bindBuffer(35052,null);break;case"browser-object":pn(m)?m.texImage2D(n,i,s,d,h,o,f,u,c):m.texImage2D(n,i,s,f,u,c);break;case"compressed":for(const[b,E]of c.entries())m.compressedTexImage2D(n,b,E.format,E.width,E.height,o,E.data),x+=E.levelSize;break;default:pt(!1,"Unknown image data type")}}),_==="compressed")this._trackAllocatedMemory(x,"Texture");else if(c&&c.byteLength)this._trackAllocatedMemory(c.byteLength,"Texture");else{const b=oQ[this.dataFormat]||4,E=aQ[this.type]||1;this._trackAllocatedMemory(this.width*this.height*b*E,"Texture")}return this.loaded=!0,this}setSubImageData(e){let{target:n=this.target,pixels:r=null,data:i=null,x:s=0,y:o=0,width:a=this.width,height:l=this.height,level:c=0,format:u=this.format,type:d=this.type,dataFormat:h=this.dataFormat,compressed:f=!1,offset:p=0,border:m=this.border,parameters:_={}}=e;if({type:d,dataFormat:h,compressed:f,width:a,height:l}=this._deduceParameters({format:u,type:d,dataFormat:h,compressed:f,data:i,width:a,height:l}),pt(this.depth===0,"texSubImage not supported for 3D textures"),i||(i=r),i&&i.data){const y=i;i=y.data,a=y.shape[0],l=y.shape[1]}i instanceof kn&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),Ka(this.gl,_,()=>{if(f)this.gl.compressedTexSubImage2D(n,c,s,o,a,l,u,i);else if(i===null)this.gl.texSubImage2D(n,c,s,o,a,l,h,d,null);else if(ArrayBuffer.isView(i))this.gl.texSubImage2D(n,c,s,o,a,l,h,d,i,p);else if(i instanceof A$){const y=Ps(this.gl);y.bindBuffer(35052,i),y.texSubImage2D(n,c,s,o,a,l,h,d,p),y.bindBuffer(35052,null)}else pn(this.gl)?Ps(this.gl).texSubImage2D(n,c,s,o,a,l,h,d,i):this.gl.texSubImage2D(n,c,s,o,h,d,i)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return Rt.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,this.handle),e}unbind(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:n}=this;return e!==void 0&&(this.textureUnit=e,n.activeTexture(33984+e)),n.bindTexture(this.target,null),e}_getDataType(e){let{data:n,compressed:r=!1}=e;return r?{data:n,dataType:"compressed"}:n===null?{data:n,dataType:"null"}:ArrayBuffer.isView(n)?{data:n,dataType:"typed-array"}:n instanceof kn?{data:n.handle,dataType:"buffer"}:n instanceof A$?{data:n,dataType:"buffer"}:{data:n,dataType:"browser-object"}}_deduceParameters(e){const{format:n,data:r}=e;let{width:i,height:s,dataFormat:o,type:a,compressed:l}=e;const c=yD[n];return o=o||c&&c.dataFormat,a=a||c&&c.types[0],l=l||c&&c.compressed,{width:i,height:s}=this._deduceImageSize(r,i,s),{dataFormat:o,type:a,compressed:l,width:i,height:s,format:n,data:r}}_deduceImageSize(e,n,r){let i;return typeof ImageData<"u"&&e instanceof ImageData?i={width:e.width,height:e.height}:typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement?i={width:e.naturalWidth,height:e.naturalHeight}:typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement?i={width:e.width,height:e.height}:typeof ImageBitmap<"u"&&e instanceof ImageBitmap?i={width:e.width,height:e.height}:typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?i={width:e.videoWidth,height:e.videoHeight}:e?i={width:n,height:r}:i={width:n>=0?n:1,height:r>=0?r:1},pt(i,"Could not deduced texture size"),pt(n===void 0||i.width===n,"Deduced texture width does not match supplied width"),pt(r===void 0||i.height===r,"Deduced texture height does not match supplied height"),i}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(e){switch(e){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const n=this.gl.getTexParameter(this.target,e);return this.gl.bindTexture(this.target,null),n}}_setParameter(e,n){switch(this.gl.bindTexture(this.target,this.handle),n=this._getNPOTParam(e,n),e){case 33082:case 33083:this.gl.texParameterf(this.handle,e,n);break;case 4096:case 4097:pt(!1);break;default:this.gl.texParameteri(this.target,e,n);break}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return pn(this.gl)||!this.width||!this.height?!1:!S$(this.width)||!S$(this.height)}_updateForNPOT(e){e[this.gl.TEXTURE_MIN_FILTER]===void 0&&(e[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),e[this.gl.TEXTURE_WRAP_S]===void 0&&(e[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),e[this.gl.TEXTURE_WRAP_T]===void 0&&(e[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(e,n){if(this._isNPOT())switch(e){case 10241:PFe.indexOf(n)===-1&&(n=9729);break;case 10242:case 10243:n!==33071&&(n=33071);break}return n}}let IFe="";function MFe(t,e){return pt(typeof t=="string"),t=IFe+t,new Promise((n,r)=>{try{const i=new Image;i.onload=()=>n(i),i.onerror=()=>r(new Error("Could not load image ".concat(t,"."))),i.crossOrigin=e&&e.crossOrigin||"anonymous",i.src=t}catch(i){r(i)}})}class Ja extends ag{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(e,n){return ag.isSupported(e,n)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};bC(e),(n instanceof Promise||typeof n=="string")&&(n={data:n}),typeof n.data=="string"&&(n=Object.assign({},n,{data:MFe(n.data)})),super(e,Object.assign({},n,{target:3553})),this.initialize(n),Object.seal(this)}}const $L=[34069,34070,34071,34072,34073,34074];class lQ extends ag{get[Symbol.toStringTag](){return"TextureCube"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};bC(e),super(e,Object.assign({},n,{target:34067})),this.initialize(n),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{mipmaps:n=!0,parameters:r={}}=e;return this.opts=e,this.setCubeMapImageData(e).then(()=>{this.loaded=!0,n&&this.generateMipmap(e),this.setParameters(r)}),this}subImage(e){let{face:n,data:r,x:i=0,y:s=0,mipmapLevel:o=0}=e;return this._subImage({target:n,data:r,x:i,y:s,mipmapLevel:o})}async setCubeMapImageData(e){let{width:n,height:r,pixels:i,data:s,border:o=0,format:a=6408,type:l=5121}=e;const{gl:c}=this,u=i||s,d=await Promise.all($L.map(h=>{const f=u[h];return Promise.all(Array.isArray(f)?f:[f])}));this.bind(),$L.forEach((h,f)=>{d[f].length>1&&this.opts.mipmaps!==!1&&Rt.warn("".concat(this.id," has mipmap and multiple LODs."))(),d[f].forEach((p,m)=>{n&&r?c.texImage2D(h,m,a,n,r,o,a,l,p):c.texImage2D(h,m,a,a,l,p)})}),this.unbind()}setImageDataForFace(e){const{face:n,width:r,height:i,pixels:s,data:o,border:a=0,format:l=6408,type:c=5121}=e,{gl:u}=this,d=s||o;return this.bind(),d instanceof Promise?d.then(h=>this.setImageDataForFace(Object.assign({},e,{face:n,data:h,pixels:h}))):this.width||this.height?u.texImage2D(n,0,l,r,i,a,l,c,d):u.texImage2D(n,0,l,l,c,d),this}}lQ.FACES=$L;class LFe extends ag{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(e){return pn(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ps(e),n=Object.assign({depth:1},n,{target:32879,unpackFlipY:!1}),super(e,n),this.initialize(n),Object.seal(this)}setImageData(e){let{level:n=0,dataFormat:r=6408,width:i,height:s,depth:o=1,border:a=0,format:l,type:c=5121,offset:u=0,data:d,parameters:h={}}=e;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),Ka(this.gl,h,()=>{ArrayBuffer.isView(d)&&this.gl.texImage3D(this.target,n,r,i,s,o,a,l,c,d),d instanceof kn&&(this.gl.bindBuffer(35052,d.handle),this.gl.texImage3D(this.target,n,r,i,s,o,a,l,c,u))}),d&&d.byteLength)this._trackAllocatedMemory(d.byteLength,"Texture");else{const f=oQ[this.dataFormat]||4,p=aQ[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*f*p,"Texture")}return this.loaded=!0,this}}const ah="EXT_color_buffer_float",R$={33189:{bpp:2},33190:{gl2:!0,bpp:3},36012:{gl2:!0,bpp:4},36168:{bpp:1},34041:{bpp:4},35056:{gl2:!0,bpp:4},36013:{gl2:!0,bpp:5},32854:{bpp:2},36194:{bpp:2},32855:{bpp:2},33321:{gl2:!0,bpp:1},33330:{gl2:!0,bpp:1},33329:{gl2:!0,bpp:1},33332:{gl2:!0,bpp:2},33331:{gl2:!0,bpp:2},33334:{gl2:!0,bpp:4},33333:{gl2:!0,bpp:4},33323:{gl2:!0,bpp:2},33336:{gl2:!0,bpp:2},33335:{gl2:!0,bpp:2},33338:{gl2:!0,bpp:4},33337:{gl2:!0,bpp:4},33340:{gl2:!0,bpp:8},33339:{gl2:!0,bpp:8},32849:{gl2:!0,bpp:3},32856:{gl2:!0,bpp:4},32857:{gl2:!0,bpp:4},36220:{gl2:!0,bpp:4},36238:{gl2:!0,bpp:4},36975:{gl2:!0,bpp:4},36214:{gl2:!0,bpp:8},36232:{gl2:!0,bpp:8},36226:{gl2:!0,bpp:16},36208:{gl2:!0,bpp:16},33325:{gl2:ah,bpp:2},33327:{gl2:ah,bpp:4},34842:{gl2:ah,bpp:8},33326:{gl2:ah,bpp:4},33328:{gl2:ah,bpp:8},34836:{gl2:ah,bpp:16},35898:{gl2:ah,bpp:4}};function OFe(t,e,n){const r=n[e];if(!r)return!1;const i=pn(t)&&r.gl2||r.gl1;return typeof i=="string"?t.getExtension(i):i}class im extends tu{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(e){let{format:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{format:null};return!n||OFe(e,n,R$)}static getSamplesForFormat(e,n){let{format:r}=n;return e.getInternalformatParameter(36161,r,32937)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.initialize(n),Object.seal(this)}initialize(e){let{format:n,width:r=1,height:i=1,samples:s=0}=e;return pt(n,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),s!==0&&pn(this.gl)?this.gl.renderbufferStorageMultisample(36161,s,n,r,i):this.gl.renderbufferStorage(36161,n,r,i),this.format=n,this.width=r,this.height=i,this.samples=s,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*R$[this.format].bpp),this}resize(e){let{width:n,height:r}=e;return n!==this.width||r!==this.height?this.initialize({width:n,height:r,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(e){this.gl.bindRenderbuffer(36161,e)}_syncHandle(e){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(e){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,e)}}const kFe=256,NFe=1024,DFe=16384,P$=6144,I$=6145,M$=6146,L$=34041,cQ="clear: bad arguments";function _D(t){let{framebuffer:e=null,color:n=null,depth:r=null,stencil:i=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s={};e&&(s.framebuffer=e);let o=0;n&&(o|=DFe,n!==!0&&(s.clearColor=n)),r&&(o|=kFe,r!==!0&&(s.clearDepth=r)),i&&(o|=NFe,r!==!0&&(s.clearStencil=r)),pt(o!==0,cQ),Ka(t,s,()=>{t.clear(o)})}function BFe(t){let{framebuffer:e=null,buffer:n=P$,drawBuffer:r=0,value:i=[0,0,0,0]}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ps(t),Ka(t,{framebuffer:e},()=>{switch(n){case P$:switch(i.constructor){case Int32Array:t.clearBufferiv(n,r,i);break;case Uint32Array:t.clearBufferuiv(n,r,i);break;case Float32Array:default:t.clearBufferfv(n,r,i)}break;case I$:t.clearBufferfv(I$,0,[i]);break;case M$:t.clearBufferiv(M$,0,[i]);break;case L$:const[s,o]=i;t.clearBufferfi(L$,0,s,o);break;default:pt(!1,cQ)}})}function FFe(t){switch(t){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return pt(!1),0}}function xC(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{sourceX:n=0,sourceY:r=0,sourceFormat:i=6408}=e;let{sourceAttachment:s=36064,target:o=null,sourceWidth:a,sourceHeight:l,sourceType:c}=e;const{framebuffer:u,deleteFramebuffer:d}=UFe(t);pt(u);const{gl:h,handle:f,attachments:p}=u;a=a||u.width,l=l||u.height,s===36064&&f===null&&(s=1028),pt(p[s]),c=c||p[s].type,o=zFe(o,c,i,a,l),c=c||UL(o);const m=h.bindFramebuffer(36160,f);return h.readPixels(n,r,a,l,i,c,o),h.bindFramebuffer(36160,m||null),d&&u.delete(),o}function O$(t){let{sourceAttachment:e=36064,targetMaxHeight:n=Number.MAX_SAFE_INTEGER}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=xC(t,{sourceAttachment:e}),{width:i,height:s}=t;for(;s>n;)({data:r,width:i,height:s}=EFe({data:r,width:i,height:s}));xFe({data:r,width:i,height:s});const o=document.createElement("canvas");o.width=i,o.height=s;const a=o.getContext("2d"),l=a.createImageData(i,s);return l.data.set(r),a.putImageData(l,0,0),o.toDataURL()}function UFe(t){return t instanceof pi?{framebuffer:t,deleteFramebuffer:!1}:{framebuffer:qFe(t),deleteFramebuffer:!0}}function zFe(t,e,n,r,i){if(t)return t;e=e||5121;const s=t1(e,{clamped:!1}),o=FFe(n);return new s(r*i*o)}const sr={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function $Fe(t){const e=new Ja(t,{format:6408,type:5126,dataFormat:6408}),n=new pi(t,{id:"test-framebuffer",check:!1,attachments:{36064:e}}),r=n.getStatus();return e.delete(),n.delete(),r===36053}const uQ={[sr.WEBGL2]:[!1,!0],[sr.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[sr.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[sr.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[sr.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[sr.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[sr.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[sr.FLOAT_BLEND]:["EXT_float_blend"],[sr.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[sr.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[sr.TEXTURE_FLOAT]:["OES_texture_float",!0],[sr.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[sr.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[sr.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[sr.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[sr.COLOR_ATTACHMENT_RGBA32F]:[$Fe,"EXT_color_buffer_float"],[sr.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[sr.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[sr.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[sr.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[sr.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[sr.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]},jFe=2;function GFe(t,e){return bD(t,e)}function bD(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>dQ(t,n))}function HFe(t){t.luma=t.luma||{},t.luma.caps=t.luma.caps||{};for(const e in uQ)t.luma.caps[e]===void 0&&(t.luma.caps[e]=dQ(t,e));return t.luma.caps}function dQ(t,e){return t.luma=t.luma||{},t.luma.caps=t.luma.caps||{},t.luma.caps[e]===void 0&&(t.luma.caps[e]=VFe(t,e)),t.luma.caps[e]||Rt.log(jFe,"Feature: ".concat(e," not supported"))(),t.luma.caps[e]}function VFe(t,e){const n=uQ[e];pt(n,e);let r;const i=pn(t)&&n[1]||n[0];if(typeof i=="function")r=i(t);else if(Array.isArray(i)){r=!0;for(const s of i)r=r&&!!t.getExtension(s)}else typeof i=="string"?r=!!t.getExtension(i):typeof i=="boolean"?r=i:pt(!1);return r}const k$="Multiple render targets not supported";class pi extends tu{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{colorBufferFloat:r,colorBufferHalfFloat:i}=n;let s=!0;return r&&(s=!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("WEBGL_color_buffer_float")||e.getExtension("OES_texture_float"))),i&&(s=s&&!!(e.getExtension("EXT_color_buffer_float")||e.getExtension("EXT_color_buffer_half_float"))),s}static getDefaultFramebuffer(e){return e.luma=e.luma||{},e.luma.defaultFramebuffer=e.luma.defaultFramebuffer||new pi(e,{id:"default-framebuffer",handle:null,attachments:{}}),e.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const e=Ps(this.gl);return e.getParameter(e.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const e=Ps(this.gl);return e.getParameter(e.MAX_DRAW_BUFFERS)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(n),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(e){let{width:n=1,height:r=1,attachments:i=null,color:s=!0,depth:o=!0,stencil:a=!1,check:l=!0,readBuffer:c=void 0,drawBuffers:u=void 0}=e;if(pt(n>=0&&r>=0,"Width and height need to be integers"),this.width=n,this.height=r,i)for(const d in i){const h=i[d];(Array.isArray(h)?h[0]:h).resize({width:n,height:r})}else i=this._createDefaultAttachments(s,o,a,n,r);this.update({clearAttachments:!0,attachments:i,readBuffer:c,drawBuffers:u}),i&&l&&this.checkStatus()}delete(){for(const e of this.ownResources)e.delete();return super.delete(),this}update(e){let{attachments:n={},readBuffer:r,drawBuffers:i,clearAttachments:s=!1,resizeAttachments:o=!0}=e;this.attach(n,{clearAttachments:s,resizeAttachments:o});const{gl:a}=this,l=a.bindFramebuffer(36160,this.handle);return r&&this._setReadBuffer(r),i&&this._setDrawBuffers(i),a.bindFramebuffer(36160,l||null),this}resize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{width:n,height:r}=e;if(this.handle===null)return pt(n===void 0&&r===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;n===void 0&&(n=this.gl.drawingBufferWidth),r===void 0&&(r=this.gl.drawingBufferHeight),n!==this.width&&r!==this.height&&Rt.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(n,"x").concat(r))();for(const i in this.attachments)this.attachments[i].resize({width:n,height:r});return this.width=n,this.height=r,this}attach(e){let{clearAttachments:n=!1,resizeAttachments:r=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i={};n&&Object.keys(this.attachments).forEach(o=>{i[o]=null}),Object.assign(i,e);const s=this.gl.bindFramebuffer(36160,this.handle);for(const o in i){pt(o!==void 0,"Misspelled framebuffer binding point?");const a=Number(o),l=i[a];let c=l;if(!c)this._unattach(a);else if(c instanceof im)this._attachRenderbuffer({attachment:a,renderbuffer:c});else if(Array.isArray(l)){const[u,d=0,h=0]=l;c=u,this._attachTexture({attachment:a,texture:u,layer:d,level:h})}else this._attachTexture({attachment:a,texture:c,layer:0,level:0});r&&c&&c.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,s||null),Object.assign(this.attachments,e),Object.keys(this.attachments).filter(o=>!this.attachments[o]).forEach(o=>{delete this.attachments[o]})}checkStatus(){const e=this.getStatus();if(e!==36053)throw new Error(XFe(e));return this}getStatus(){const{gl:e}=this,n=e.bindFramebuffer(36160,this.handle),r=e.checkFramebufferStatus(36160);return e.bindFramebuffer(36160,n||null),r}clear(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{color:n,depth:r,stencil:i,drawBuffers:s=[]}=e,o=this.gl.bindFramebuffer(36160,this.handle);return(n||r||i)&&_D(this.gl,{color:n,depth:r,stencil:i}),s.forEach((a,l)=>{BFe(this.gl,{drawBuffer:l,value:a})}),this.gl.bindFramebuffer(36160,o||null),this}readPixels(){return Rt.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return Rt.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return Rt.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return Rt.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return Rt.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return Rt.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(e){let{attachments:n=[],x:r=0,y:i=0,width:s,height:o}=e;const a=Ps(this.gl),l=a.bindFramebuffer(36008,this.handle);return r===0&&i===0&&s===void 0&&o===void 0?a.invalidateFramebuffer(36008,n):a.invalidateFramebuffer(36008,n,r,i,s,o),a.bindFramebuffer(36008,l),this}getAttachmentParameter(e,n,r){let i=this._getAttachmentParameterFallback(n);return i===null&&(this.gl.bindFramebuffer(36160,this.handle),i=this.gl.getFramebufferAttachmentParameter(36160,e,n),this.gl.bindFramebuffer(36160,null)),r&&i>1e3&&(i=fd(this.gl,i)),i}getAttachmentParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:36064,n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const i={};for(const s of r){const o=n?fd(this.gl,s):s;i[o]=this.getAttachmentParameter(e,s,n)}return i}getParameters(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const n=Object.keys(this.attachments),r={};for(const i of n){const s=Number(i),o=e?fd(this.gl,s):s;r[o]=this.getAttachmentParameters(s,e)}return r}show(){return typeof window<"u"&&window.open(O$(this),"luma-debug-texture"),this}log(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(e>Rt.level||typeof window>"u")return this;n=n||"Framebuffer ".concat(this.id);const r=O$(this,{targetMaxHeight:100});return Rt.image({logLevel:e,message:n,image:r},n)(),this}bind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,this.handle),this}unbind(){let{target:e=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(e,null),this}_createDefaultAttachments(e,n,r,i,s){let o=null;return e&&(o=o||{},o[36064]=new Ja(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:i,height:s,mipmaps:!1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.ownResources.push(o[36064])),n&&r?(o=o||{},o[33306]=new im(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:i,height:111}),this.ownResources.push(o[33306])):n?(o=o||{},o[36096]=new im(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:i,height:s}),this.ownResources.push(o[36096])):r&&pt(!1),o}_unattach(e){const n=this.attachments[e];n&&(n instanceof im?this.gl.framebufferRenderbuffer(36160,e,36161,null):this.gl.framebufferTexture2D(36160,e,3553,null,0),delete this.attachments[e])}_attachRenderbuffer(e){let{attachment:n=36064,renderbuffer:r}=e;const{gl:i}=this;i.framebufferRenderbuffer(36160,n,36161,r.handle),this.attachments[n]=r}_attachTexture(e){let{attachment:n=36064,texture:r,layer:i,level:s}=e;const{gl:o}=this;switch(o.bindTexture(r.target,r.handle),r.target){case 35866:case 32879:Ps(o).framebufferTextureLayer(36160,n,r.target,s,i);break;case 34067:const l=WFe(i);o.framebufferTexture2D(36160,n,l,r.handle,s);break;case 3553:o.framebufferTexture2D(36160,n,3553,r.handle,s);break;default:pt(!1,"Illegal texture type")}o.bindTexture(r.target,null),this.attachments[n]=r}_setReadBuffer(e){const n=xBe(this.gl);n?n.readBuffer(e):pt(e===36064||e===1029,k$),this.readBuffer=e}_setDrawBuffers(e){const{gl:n}=this,r=Ps(n);if(r)r.drawBuffers(e);else{const i=n.getExtension("WEBGL_draw_buffers");i?i.drawBuffersWEBGL(e):pt(e.length===1&&(e[0]===36064||e[0]===1029),k$)}this.drawBuffers=e}_getAttachmentParameterFallback(e){const n=HFe(this.gl);switch(e){case 36052:return n.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return n.WEBGL2?null:8;case 33297:return n.WEBGL2?null:5125;case 33296:return!n.WEBGL2&&!n.EXT_sRGB?9729:null;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(e){return this.gl.bindFramebuffer(36160,e)}}function WFe(t){return t<34069?t+34069:t}function XFe(t){return(pi.STATUS||{})[t]||"Framebuffer error ".concat(t)}const YFe=[36049,36048,33296,33298,33299,33300,33301,33302,33303];pi.ATTACHMENT_PARAMETERS=YFe;function KFe(t,e){pt(t instanceof Ja||t instanceof lQ||t instanceof LFe);const n=t.constructor,{gl:r,width:i,height:s,format:o,type:a,dataFormat:l,border:c,mipmaps:u}=t,d=Object.assign({width:i,height:s,format:o,type:a,dataFormat:l,border:c,mipmaps:u},e);return new n(r,d)}function qFe(t,e){const{gl:n,width:r,height:i,id:s}=t;return new pi(n,Object.assign({},e,{id:"framebuffer-for-".concat(s),width:r,height:i,attachments:{36064:t}}))}function SE(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"unnamed";const n=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,r=t.match(n);return r?r[1]:e}const ZFe=35632,QFe=35633;function JFe(t){switch(t){case ZFe:return"fragment";case QFe:return"vertex";default:return"unknown type"}}function e4e(t,e,n,r){const i=t.split(/\r?\n/),s={},o={},a=r||SE(e)||"(unnamed)",l="".concat(JFe(n)," shader ").concat(a);for(let u=0;u<i.length;u++){const d=i[u];if(d.length<=1)continue;const h=d.split(":"),f=h[0],p=parseInt(h[2],10);if(isNaN(p))throw new Error("GLSL compilation error in ".concat(l,": ").concat(t));f!=="WARNING"?s[p]=d:o[p]=d}const c=t4e(e);return{shaderName:l,errors:N$(s,c),warnings:N$(o,c)}}function N$(t,e){let n="";for(let r=0;r<e.length;r++){const i=e[r];if(!(!t[r+3]&&!t[r+2]&&!t[r+1])&&(n+="".concat(i,`
`),t[r+1])){const s=t[r+1],o=s.split(":",3),a=o[0],l=parseInt(o[1],10)||0,c=s.substring(o.join(":").length+1).trim();n+=hQ("^^^ ".concat(a,": ").concat(c,`

`),l)}}return n}function t4e(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:": ";const r=t.split(/\r?\n/),i=String(r.length+e-1).length;return r.map((s,o)=>{const a=String(o+e),l=a.length;return hQ(a,i-l)+n+s})}function hQ(t,e){let n="";for(let r=0;r<e;++r)n+=" ";return"".concat(n).concat(t)}function fQ(t){let e=100;const n=t.match(/[^\s]+/g);if(n.length>=2&&n[0]==="#version"){const r=parseInt(n[1],10);Number.isFinite(r)&&(e=r)}return e}const n4e="Shader: GLSL source code must be a JavaScript string";class n1 extends tu{get[Symbol.toStringTag](){return"Shader"}static getTypeName(e){switch(e){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return pt(!1),"unknown"}}constructor(e,n){bC(e),pt(typeof n.source=="string",n4e);const r=SE(n.source,null)||n.id||Cd("unnamed ".concat(n1.getTypeName(n.shaderType)));super(e,{id:r}),this.shaderType=n.shaderType,this.source=n.source,this.initialize(n)}initialize(e){let{source:n}=e;const r=SE(n,null);r&&(this.id=Cd(r)),this._compile(n)}getParameter(e){return this.gl.getShaderParameter(this.handle,e)}toString(){return"".concat(n1.getTypeName(this.shaderType),":").concat(this.id)}getName(){return SE(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const e=this.gl.getExtension("WEBGL_debug_shaders");return e?e.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.source;if(e.startsWith("#version ")||(e=`#version 100
`.concat(e)),this.source=e,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const r=this.gl.getShaderInfoLog(this.handle),{shaderName:i,errors:s,warnings:o}=e4e(r,this.source,this.shaderType,this.id);throw Rt.error("GLSL compilation errors in ".concat(i,`
`).concat(s))(),Rt.warn("GLSL compilation warnings in ".concat(i,`
`).concat(o))(),new Error("GLSL compilation errors in ".concat(i))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class QP extends n1{get[Symbol.toStringTag](){return"VertexShader"}constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class JP extends n1{get[Symbol.toStringTag](){return"FragmentShader"}constructor(e,n){typeof n=="string"&&(n={source:n}),super(e,Object.assign({},n,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const r4e={5126:nr.bind(null,"uniform1fv",so,1,is),35664:nr.bind(null,"uniform2fv",so,2,is),35665:nr.bind(null,"uniform3fv",so,3,is),35666:nr.bind(null,"uniform4fv",so,4,is),5124:nr.bind(null,"uniform1iv",xu,1,is),35667:nr.bind(null,"uniform2iv",xu,2,is),35668:nr.bind(null,"uniform3iv",xu,3,is),35669:nr.bind(null,"uniform4iv",xu,4,is),35670:nr.bind(null,"uniform1iv",xu,1,is),35671:nr.bind(null,"uniform2iv",xu,2,is),35672:nr.bind(null,"uniform3iv",xu,3,is),35673:nr.bind(null,"uniform4iv",xu,4,is),35674:nr.bind(null,"uniformMatrix2fv",so,4,uc),35675:nr.bind(null,"uniformMatrix3fv",so,9,uc),35676:nr.bind(null,"uniformMatrix4fv",so,16,uc),35678:zi,35680:zi,5125:nr.bind(null,"uniform1uiv",Ex,1,is),36294:nr.bind(null,"uniform2uiv",Ex,2,is),36295:nr.bind(null,"uniform3uiv",Ex,3,is),36296:nr.bind(null,"uniform4uiv",Ex,4,is),35685:nr.bind(null,"uniformMatrix2x3fv",so,6,uc),35686:nr.bind(null,"uniformMatrix2x4fv",so,8,uc),35687:nr.bind(null,"uniformMatrix3x2fv",so,6,uc),35688:nr.bind(null,"uniformMatrix3x4fv",so,12,uc),35689:nr.bind(null,"uniformMatrix4x2fv",so,8,uc),35690:nr.bind(null,"uniformMatrix4x3fv",so,12,uc),35678:zi,35680:zi,35679:zi,35682:zi,36289:zi,36292:zi,36293:zi,36298:zi,36299:zi,36300:zi,36303:zi,36306:zi,36307:zi,36308:zi,36311:zi},i4e={},s4e={},o4e={},D$=[0];function xD(t,e,n,r){e===1&&typeof t=="boolean"&&(t=t?1:0),Number.isFinite(t)&&(D$[0]=t,t=D$);const i=t.length;if(i%e&&Rt.warn("Uniform size should be multiples of ".concat(e),t)(),t instanceof n)return t;let s=r[i];s||(s=new n(i),r[i]=s);for(let o=0;o<i;o++)s[o]=t[o];return s}function so(t,e){return xD(t,e,Float32Array,i4e)}function xu(t,e){return xD(t,e,Int32Array,s4e)}function Ex(t,e){return xD(t,e,Uint32Array,o4e)}function B$(t,e,n){const r=r4e[n.type];if(!r)throw new Error("Unknown GLSL uniform type ".concat(n.type));return r().bind(null,t,e)}function a4e(t){if(t[t.length-1]!=="]")return{name:t,length:1,isArray:!1};const e=/([^[]*)(\[[0-9]+\])?/,n=t.match(e);if(!n||n.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(t));return{name:n[1],length:n[2]||1,isArray:!!n[2]}}function l4e(t,e,n){for(const r in t){const i=t[r];if((!n||!!n[r])&&!c4e(i))throw e=e?"".concat(e," "):"",console.error("".concat(e," Bad uniform ").concat(r),i),new Error("".concat(e," Bad uniform ").concat(r))}return!0}function c4e(t){return Array.isArray(t)||ArrayBuffer.isView(t)?d4e(t):isFinite(t)||t===!0||t===!1||t instanceof ag||t instanceof im?!0:t instanceof pi?!!t.texture:!1}function u4e(t,e,n){if(Array.isArray(n)||ArrayBuffer.isView(n))if(t[e]){const r=t[e];for(let i=0,s=n.length;i<s;++i)r[i]=n[i]}else t[e]=n.slice();else t[e]=n}function d4e(t){if(t.length===0)return!1;const e=Math.min(t.length,16);for(let n=0;n<e;++n)if(!Number.isFinite(t[n]))return!1;return!0}function zi(){let t=null;return(e,n,r)=>{const i=t!==r;return i&&(e.uniform1i(n,r),t=r),i}}function nr(t,e,n,r){let i=null,s=null;return(o,a,l)=>{const c=e(l,n),u=c.length;let d=!1;if(i===null)i=new Float32Array(u),s=u,d=!0;else{pt(s===u,"Uniform length cannot change.");for(let h=0;h<u;++h)if(c[h]!==i[h]){d=!0;break}}return d&&(r(o,t,a,c),i.set(c)),d}}function is(t,e,n,r){t[e](n,r)}function uc(t,e,n,r){t[e](n,!1,r)}const h4e=5120,f4e=5121,p4e=5122,m4e=5123,F$=0,wx=1,g4e=2,v4e=3,Tx=4,y4e=5,_4e=6,oi=5126,b4e=35664,x4e=35665,E4e=35666,B0=5124,w4e=35667,T4e=35668,S4e=35669,F0=5125,C4e=36294,A4e=36295,R4e=36296,P4e=35670,I4e=35671,M4e=35672,L4e=35673,O4e=35674,k4e=35675,N4e=35676,D4e=35685,B4e=35686,F4e=35687,U4e=35688,z4e=35689,$4e=35690,jL={[oi]:[oi,1,"float"],[b4e]:[oi,2,"vec2"],[x4e]:[oi,3,"vec3"],[E4e]:[oi,4,"vec4"],[B0]:[B0,1,"int"],[w4e]:[B0,2,"ivec2"],[T4e]:[B0,3,"ivec3"],[S4e]:[B0,4,"ivec4"],[F0]:[F0,1,"uint"],[C4e]:[F0,2,"uvec2"],[A4e]:[F0,3,"uvec3"],[R4e]:[F0,4,"uvec4"],[P4e]:[oi,1,"bool"],[I4e]:[oi,2,"bvec2"],[M4e]:[oi,3,"bvec3"],[L4e]:[oi,4,"bvec4"],[O4e]:[oi,8,"mat2"],[D4e]:[oi,8,"mat2x3"],[B4e]:[oi,8,"mat2x4"],[k4e]:[oi,12,"mat3"],[F4e]:[oi,12,"mat3x2"],[U4e]:[oi,12,"mat3x4"],[N4e]:[oi,16,"mat4"],[z4e]:[oi,16,"mat4x2"],[$4e]:[oi,16,"mat4x3"]};function j4e(t){switch(t){case F$:return F$;case wx:return wx;case v4e:return wx;case g4e:return wx;case Tx:return Tx;case y4e:return Tx;case _4e:return Tx;default:return pt(!1),0}}function U$(t){const e=jL[t];if(!e)return null;const[n,r]=e;return{type:n,components:r}}function pQ(t,e){switch(t){case h4e:case f4e:case p4e:case m4e:t=oi;break}for(const n in jL){const[r,i,s]=jL[n];if(r===t&&i===e)return{glType:n,name:s}}return null}class G4e{constructor(e){this.id=e.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(e),this._readVaryingsFromProgram(e)}getAttributeInfo(e){const n=Number(e);return Number.isFinite(n)?this.attributeInfosByLocation[n]:this.attributeInfosByName[e]||null}getAttributeLocation(e){const n=this.getAttributeInfo(e);return n?n.location:-1}getAttributeAccessor(e){const n=this.getAttributeInfo(e);return n?n.accessor:null}getVaryingInfo(e){const n=Number(e);return Number.isFinite(n)?this.varyingInfos[n]:this.varyingInfosByName[e]||null}getVaryingIndex(e){const n=this.getVaryingInfo();return n?n.location:-1}getVaryingAccessor(e){const n=this.getVaryingInfo();return n?n.accessor:null}_readAttributesFromProgram(e){const{gl:n}=e,r=n.getProgramParameter(e.handle,35721);for(let i=0;i<r;i++){const{name:s,type:o,size:a}=n.getActiveAttrib(e.handle,i),l=n.getAttribLocation(e.handle,s);l>=0&&this._addAttribute(l,s,o,a)}this.attributeInfos.sort((i,s)=>i.location-s.location)}_readVaryingsFromProgram(e){const{gl:n}=e;if(!pn(n))return;const r=n.getProgramParameter(e.handle,35971);for(let i=0;i<r;i++){const{name:s,type:o,size:a}=n.getTransformFeedbackVarying(e.handle,i);this._addVarying(i,s,o,a)}this.varyingInfos.sort((i,s)=>i.location-s.location)}_addAttribute(e,n,r,i){const{type:s,components:o}=U$(r),a={type:s,size:i*o};this._inferProperties(e,n,a);const l={location:e,name:n,accessor:new po(a)};this.attributeInfos.push(l),this.attributeInfosByLocation[e]=l,this.attributeInfosByName[l.name]=l}_inferProperties(e,n,r){/instance/i.test(n)&&(r.divisor=1)}_addVarying(e,n,r,i){const{type:s,components:o}=U$(r),a=new po({type:s,size:i*o}),l={location:e,name:n,accessor:a};this.varyingInfos.push(l),this.varyingInfosByName[l.name]=l}}const z$=4,H4e=35981,V4e=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class mQ extends tu{get[Symbol.toStringTag](){return"Program"}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.stubRemovedMethods("Program","v6.0",V4e),this._isCached=!1,this.initialize(n),Object.seal(this),this._setId(n.id)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{hash:n,vs:r,fs:i,varyings:s,bufferMode:o=H4e}=e;return this.hash=n||"",this.vs=typeof r=="string"?new QP(this.gl,{id:"".concat(e.id,"-vs"),source:r}):r,this.fs=typeof i=="string"?new JP(this.gl,{id:"".concat(e.id,"-fs"),source:i}):i,pt(this.vs instanceof QP),pt(this.fs instanceof JP),this.uniforms={},this._textureUniforms={},s&&s.length>0&&(Ps(this.gl),this.varyings=s,this.gl2.transformFeedbackVaryings(this.handle,s,o)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new G4e(this),this.setProps(e)}delete(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isCached?this:super.delete(e)}setProps(e){return"uniforms"in e&&this.setUniforms(e.uniforms),this}draw(e){let{logPriority:n,drawMode:r=4,vertexCount:i,offset:s=0,start:o,end:a,isIndexed:l=!1,indexType:c=5123,instanceCount:u=0,isInstanced:d=u>0,vertexArray:h=null,transformFeedback:f,framebuffer:p,parameters:m={},uniforms:_,samplers:y}=e;if((_||y)&&(Rt.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(_||{})),Rt.priority>=n){const x=p?p.id:"default",b="mode=".concat(fd(this.gl,r)," verts=").concat(i," ")+"instances=".concat(u," indexType=").concat(fd(this.gl,c)," ")+"isInstanced=".concat(d," isIndexed=").concat(l," ")+"Framebuffer=".concat(x);Rt.log(n,b)()}return pt(h),this.gl.useProgram(this.handle),!this._areTexturesRenderable()||i===0||d&&u===0?!1:(h.bindForDraw(i,u,()=>{if(p!==void 0&&(m=Object.assign({},m,{framebuffer:p})),f){const x=j4e(r);f.begin(x)}this._bindTextures(),Ka(this.gl,m,()=>{l&&d?this.gl2.drawElementsInstanced(r,i,c,s,u):l&&pn(this.gl)&&!isNaN(o)&&!isNaN(a)?this.gl2.drawRangeElements(r,o,a,i,c,s):l?this.gl.drawElements(r,i,c,s):d?this.gl2.drawArraysInstanced(r,s,i,u):this.gl.drawArrays(r,s,i)}),f&&f.end()}),!0)}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Rt.priority>=2&&l4e(e,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const n in e){const r=e[n],i=this._uniformSetters[n];if(i){let s=r,o=!1;if(s instanceof pi&&(s=s.texture),s instanceof ag)if(o=this.uniforms[n]!==r,o){i.textureIndex===void 0&&(i.textureIndex=this._textureIndexCounter++);const a=s,{textureIndex:l}=i;a.bind(l),s=l,this._textureUniforms[n]=a}else s=i.textureIndex;else this._textureUniforms[n]&&delete this._textureUniforms[n];(i(s)||o)&&u4e(this.uniforms,n,r)}}return this}_areTexturesRenderable(){let e=!0;for(const n in this._textureUniforms){const r=this._textureUniforms[n];r.update(),e=e&&r.loaded}return e}_bindTextures(){for(const e in this._textureUniforms){const n=this._uniformSetters[e].textureIndex;this._textureUniforms[e].bind(n)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(e){const n=this.gl.getAttachedShaders(e),r={};for(const i of n)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:r.vs=new QP({handle:i});break;case 35632:r.fs=new JP({handle:i});break}return r}_getParameter(e){return this.gl.getProgramParameter(this.handle,e)}_setId(e){if(!e){const n=this._getName();this.id=Cd(n)}}_getName(){let e=this.vs.getName()||this.fs.getName();return e=e.replace(/shader/i,""),e=e?"".concat(e,"-program"):"program",e}_compileAndLink(){const{gl:e}=this;if(e.attachShader(this.handle,this.vs.handle),e.attachShader(this.handle,this.fs.handle),Rt.time(z$,"linkProgram for ".concat(this._getName()))(),e.linkProgram(this.handle),Rt.timeEnd(z$,"linkProgram for ".concat(this._getName()))(),e.debug||Rt.level>0){if(!e.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(e.getProgramInfoLog(this.handle)));if(e.validateProgram(this.handle),!e.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(e.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:e}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let n=0;n<this._uniformCount;n++){const r=this.gl.getActiveUniform(this.handle,n),{name:i}=a4e(r.name);let s=e.getUniformLocation(this.handle,i);if(this._uniformSetters[i]=B$(e,s,r),r.size>1)for(let o=0;o<r.size;o++)s=e.getUniformLocation(this.handle,"".concat(i,"[").concat(o,"]")),this._uniformSetters["".concat(i,"[").concat(o,"]")]=B$(e,s,r)}this._textureIndexCounter=0}getActiveUniforms(e,n){return this.gl2.getActiveUniforms(this.handle,e,n)}getUniformBlockIndex(e){return this.gl2.getUniformBlockIndex(this.handle,e)}getActiveUniformBlockParameter(e,n){return this.gl2.getActiveUniformBlockParameter(this.handle,e,n)}uniformBlockBinding(e,n){this.gl2.uniformBlockBinding(this.handle,e,n)}}const W4e=34918,X4e=34919,Y4e=35007,K4e=36795,q4e=35976,Z4e=35887,Q4e=36202;class oT extends tu{get[Symbol.toStringTag](){return"Query"}static isSupported(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const r=pn(e),i=bD(e,sr.TIMER_QUERY);let s=r||i;for(const o of n)switch(o){case"queries":s=s&&r;break;case"timers":s=s&&i;break;default:pt(!1)}return s}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(e,n),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(Y4e)}beginOcclusionQuery(){let{conservative:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.begin(e?Q4e:Z4e)}beginTransformFeedbackQuery(){return this.begin(q4e)}begin(e){return this._queryPending?this:(this.target=e,this.gl2.beginQuery(this.target,this.handle),this)}end(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}isResultAvailable(){if(!this._queryPending)return!1;const e=this.gl2.getQueryParameter(this.handle,X4e);return e&&(this._queryPending=!1),e}isTimerDisjoint(){return this.gl2.getParameter(K4e)}getResult(){return this.gl2.getQueryParameter(this.handle,W4e)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let n=0;return this._pollingPromise=new Promise((r,i)=>{const s=()=>{this.isResultAvailable()?(r(this.getResult()),this._pollingPromise=null):n++>e?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(s)};requestAnimationFrame(s)}),this._pollingPromise}_createHandle(){return oT.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}class gQ extends tu{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(e){return pn(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ps(e),super(e,n),this.initialize(n),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,og(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(e),this}setProps(e){"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"bindOnUse"in e&&(e=e.bindOnUse),"buffers"in e&&this.setBuffers(e.buffers)}setBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.bind(()=>{for(const n in e)this.setBuffer(n,e[n])}),this}setBuffer(e,n){const r=this._getVaryingIndex(e),{buffer:i,byteSize:s,byteOffset:o}=this._getBufferParams(n);return r<0?(this.unused[e]=i,Rt.warn("".concat(this.id," unused varying buffer ").concat(e))(),this):(this.buffers[r]=n,this.bindOnUse||this._bindBuffer(r,i,o,s),this)}begin(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(e),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(e){let n,r,i;return e instanceof kn?i=e:(i=e.buffer,r=e.byteSize,n=e.byteOffset),(n!==void 0||r!==void 0)&&(n=n||0,r=r||i.byteLength-n),{buffer:i,byteOffset:n,byteSize:r}}_getVaryingInfo(e){return this.configuration&&this.configuration.getVaryingInfo(e)}_getVaryingIndex(e){if(this.configuration)return this.configuration.getVaryingInfo(e).location;const n=Number(e);return Number.isFinite(n)?n:-1}_bindBuffers(){if(this.bindOnUse)for(const e in this.buffers){const{buffer:n,byteSize:r,byteOffset:i}=this._getBufferParams(this.buffers[e]);this._bindBuffer(e,n,i,r)}}_unbindBuffers(){if(this.bindOnUse)for(const e in this.buffers)this._bindBuffer(e,null)}_bindBuffer(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;const s=n&&n.handle;return!s||i===void 0?this.gl.bindBufferBase(35982,e,s):this.gl.bindBufferRange(35982,e,s,r,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(e){this.gl.bindTransformFeedback(36386,this.handle)}}let Sx=null;function J4e(t){return(!Sx||Sx.byteLength<t)&&(Sx=new ArrayBuffer(t)),Sx}function e5e(t,e){const n=J4e(t.BYTES_PER_ELEMENT*e);return new t(n,0,e)}function t5e(t){let{target:e,source:n,start:r=0,count:i=1}=t;const s=n.length,o=i*s;let a=0;for(let l=r;a<s;a++)e[l++]=n[a];for(;a<o;)a<o-a?(e.copyWithin(r+a,r,r+a),a*=2):(e.copyWithin(r+a,r,r+o-a),a=o);return e}const n5e="elements must be GL.ELEMENT_ARRAY_BUFFER";class co extends tu{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(e){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).constantAttributeZero?pn(e)||qZ()==="Chrome":!0}static getDefaultArray(e){return e.luma=e.luma||{},e.luma.defaultVertexArray||(e.luma.defaultVertexArray=new co(e,{handle:null,isDefaultArray:!0})),e.luma.defaultVertexArray}static getMaxAttributes(e){return co.MAX_ATTRIBUTES=co.MAX_ATTRIBUTES||e.getParameter(34921),co.MAX_ATTRIBUTES}static setConstant(e,n,r){switch(r.constructor){case Float32Array:co._setConstantFloatArray(e,n,r);break;case Int32Array:co._setConstantIntArray(e,n,r);break;case Uint32Array:co._setConstantUintArray(e,n,r);break;default:pt(!1)}}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=n.id||n.program&&n.program.id;super(e,Object.assign({},n,{id:r})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=n.isDefaultArray||!1,this.gl2=e,this.initialize(n),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return co.getMaxAttributes(this.gl)}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.setProps(e)}setProps(e){return this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return pt(!e||e.target===34963,n5e),this.bind(()=>{this.gl.bindBuffer(34963,e?e.handle:null)}),this}setBuffer(e,n,r){if(n.target===34963)return this.setElementBuffer(n,r);const{size:i,type:s,stride:o,offset:a,normalized:l,integer:c,divisor:u}=r,{gl:d,gl2:h}=this;return e=Number(e),this.bind(()=>{d.bindBuffer(34962,n.handle),c?(pt(pn(d)),h.vertexAttribIPointer(e,i,s,o,a)):d.vertexAttribPointer(e,i,s,l,o,a),d.enableVertexAttribArray(e),h.vertexAttribDivisor(e,u||0)}),this}enable(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return!n&&e===0&&!co.isSupported(this.gl,{constantAttributeZero:!0})||(e=Number(e),this.bind(()=>n?this.gl.enableVertexAttribArray(e):this.gl.disableVertexAttribArray(e))),this}getConstantBuffer(e,n){const r=this._normalizeConstantArrayValue(n),i=r.byteLength*e,s=r.length*e;let o=!this.buffer;if(this.buffer=this.buffer||new kn(this.gl,i),o=o||this.buffer.reallocate(i),o=o||!this._compareConstantArrayValues(r,this.bufferValue),o){const a=e5e(n.constructor,s);t5e({target:a,source:r,start:0,count:s}),this.buffer.subData(a),this.bufferValue=n}return this.buffer}_normalizeConstantArrayValue(e){return Array.isArray(e)?new Float32Array(e):e}_compareConstantArrayValues(e,n){if(!e||!n||e.length!==n.length||e.constructor!==n.constructor)return!1;for(let r=0;r<e.length;++r)if(e[r]!==n[r])return!1;return!0}static _setConstantFloatArray(e,n,r){switch(r.length){case 1:e.vertexAttrib1fv(n,r);break;case 2:e.vertexAttrib2fv(n,r);break;case 3:e.vertexAttrib3fv(n,r);break;case 4:e.vertexAttrib4fv(n,r);break;default:pt(!1)}}static _setConstantIntArray(e,n,r){switch(pt(pn(e)),r.length){case 1:e.vertexAttribI1iv(n,r);break;case 2:e.vertexAttribI2iv(n,r);break;case 3:e.vertexAttribI3iv(n,r);break;case 4:e.vertexAttribI4iv(n,r);break;default:pt(!1)}}static _setConstantUintArray(e,n,r){switch(pt(pn(e)),r.length){case 1:e.vertexAttribI1uiv(n,r);break;case 2:e.vertexAttribI2uiv(n,r);break;case 3:e.vertexAttribI3uiv(n,r);break;case 4:e.vertexAttribI4uiv(n,r);break;default:pt(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(e){return this.gl2.deleteVertexArray(e),[this.elements]}_bindHandle(e){this.gl2.bindVertexArray(e)}_getParameter(e,n){let{location:r}=n;return pt(Number.isFinite(r)),this.bind(()=>{switch(e){case 34373:return this.gl.getVertexAttribOffset(r,e);default:return this.gl.getVertexAttrib(r,e)}})}}const r5e="VertexArray: attributes must be Buffers or constants (i.e. typed array)",i5e=/^(.+)__LOCATION_([0-9]+)$/,s5e=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class o5e{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=n.id||n.program&&n.program.id;this.id=r,this.gl=e,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new co(e),iQ(this,"VertexArray","v6.0",s5e),this.initialize(n),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(e)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:e}=this.vertexArrayObject;return this.values=new Array(e).fill(null),this.accessors=new Array(e).fill(null),this.unused={},this.drawParams=null,this}setProps(e){return"program"in e&&(this.configuration=e.program&&e.program.configuration),"configuration"in e&&(this.configuration=e.configuration),"attributes"in e&&this.setAttributes(e.attributes),"elements"in e&&this.setElementBuffer(e.elements),"bindOnUse"in e&&(e=e.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(e){return Object.assign(this.attributes,e),this.vertexArrayObject.bind(()=>{for(const n in e){const r=e[n];this._setAttribute(n,r)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.elements=e,this.elementsAccessor=n,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(e,n),this}setBuffer(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(n.target===34963)return this.setElementBuffer(n,r);const{location:i,accessor:s}=this._resolveLocationAndAccessor(e,n,n.accessor,r);return i>=0&&(this.values[i]=n,this.accessors[i]=s,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,n,s)),this}setConstant(e,n){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{location:i,accessor:s}=this._resolveLocationAndAccessor(e,n,Object.assign({size:n.length},r));return i>=0&&(n=this.vertexArrayObject._normalizeConstantArrayValue(n),this.values[i]=n,this.accessors[i]=s,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new kn(this.gl,{accessor:{size:4}});for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++)this.values[e]instanceof kn&&(this.gl.disableVertexAttribArray(e),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(e,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let e=0;e<this.vertexArrayObject.MAX_ATTRIBUTES;e++){const n=this.values[e];n instanceof kn&&this.setBuffer(e,n)}}),this}bindForDraw(e,n,r){let i;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(e,n),i=r()}),i}_resolveLocationAndAccessor(e,n,r,i){const s={location:-1,accessor:null},{location:o,name:a}=this._getAttributeIndex(e);if(!Number.isFinite(o)||o<0)return this.unused[e]=n,Rt.once(3,()=>"unused value ".concat(e," in ").concat(this.id))(),s;const l=this._getAttributeInfo(a||o);if(!l)return s;const c=this.accessors[o]||{},u=po.resolve(l.accessor,c,r,i),{size:d,type:h}=u;return pt(Number.isFinite(d)&&Number.isFinite(h)),{location:o,accessor:u}}_getAttributeInfo(e){return this.configuration&&this.configuration.getAttributeInfo(e)}_getAttributeIndex(e){const n=Number(e);if(Number.isFinite(n))return{location:n};const r=i5e.exec(e),i=r?r[1]:e,s=r?Number(r[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(i)+s,name:i}:{location:-1}}_setAttribute(e,n){if(n instanceof kn)this.setBuffer(e,n);else if(Array.isArray(n)&&n.length&&n[0]instanceof kn){const r=n[0],i=n[1];this.setBuffer(e,r,i)}else if(ArrayBuffer.isView(n)||Array.isArray(n)){const r=n;this.setConstant(e,r)}else if(n.buffer instanceof kn){const r=n;this.setBuffer(e,r.buffer,r)}else throw new Error(r5e)}_setConstantAttributes(e,n){const r=Math.max(e|0,n|0);let i=this.values[0];ArrayBuffer.isView(i)&&this._setConstantAttributeZero(i,r);for(let s=1;s<this.vertexArrayObject.MAX_ATTRIBUTES;s++)i=this.values[s],ArrayBuffer.isView(i)&&this._setConstantAttribute(s,i)}_setConstantAttributeZero(e,n){if(co.isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,e);return}const r=this.vertexArrayObject.getConstantBuffer(n,e);this.vertexArrayObject.setBuffer(0,r,this.accessors[0])}_setConstantAttribute(e,n){co.setConstant(this.gl,e,n)}_updateDrawParams(){const e={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let n=0;n<this.vertexArrayObject.MAX_ATTRIBUTES;n++)this._updateDrawParamsForLocation(e,n);return this.elements&&(e.elementCount=this.elements.getElementCount(this.elements.accessor),e.isIndexed=!0,e.indexType=this.elementsAccessor.type||this.elements.accessor.type,e.indexOffset=this.elementsAccessor.offset||0),e.indexCount===1/0&&(e.indexCount=0),e.vertexCount===1/0&&(e.vertexCount=0),e.instanceCount===1/0&&(e.instanceCount=0),e}_updateDrawParamsForLocation(e,n){const r=this.values[n],i=this.accessors[n];if(!r)return;const{divisor:s}=i,o=s>0;if(e.isInstanced=e.isInstanced||o,r instanceof kn){const a=r;if(o){const l=a.getVertexCount(i);e.instanceCount=Math.min(e.instanceCount,l)}else{const l=a.getVertexCount(i);e.vertexCount=Math.min(e.vertexCount,l)}}}setElements(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Rt.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(e,n)}}function a5e(t,e){const{maxElts:n=16,size:r=1}=e;let i="[";for(let o=0;o<t.length&&o<n;++o)o>0&&(i+=",".concat(o%r===0?" ":"")),i+=r1(t[o],e);const s=t.length>n?"...":"]";return"".concat(i).concat(s)}function r1(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=1e-16,{isInteger:r=!1}=e;if(Array.isArray(t)||ArrayBuffer.isView(t))return a5e(t,e);if(!Number.isFinite(t))return String(t);if(Math.abs(t)<n)return r?"0":"0.";if(r||Math.abs(t)>100&&Math.abs(t)<1e4)return t.toFixed(0);const i=t.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}function $$(t){let{header:e="Uniforms",program:n,uniforms:r,undefinedOnly:i=!1}=t;pt(n);const s=".*_.*",o=".*Matrix",a=n._uniformSetters,l={},c=Object.keys(a).sort();let u=0;for(const f of c)!f.match(s)&&!f.match(o)&&e2({table:l,header:e,uniforms:r,uniformName:f,undefinedOnly:i})&&u++;for(const f of c)f.match(o)&&e2({table:l,header:e,uniforms:r,uniformName:f,undefinedOnly:i})&&u++;for(const f of c)l[f]||e2({table:l,header:e,uniforms:r,uniformName:f,undefinedOnly:i})&&u++;let d=0;const h={};if(!i)for(const f in r){const p=r[f];l[f]||(d++,h[f]={Type:"NOT USED: ".concat(p),[e]:r1(p)})}return{table:l,count:u,unusedTable:h,unusedCount:d}}function e2(t){let{table:e,header:n,uniforms:r,uniformName:i,undefinedOnly:s}=t;const o=r[i],a=l5e(o);return!s||!a?(e[i]={[n]:a?r1(o):"N/A","Uniform Type":a?o:"NOT PROVIDED"},!0):!1}function l5e(t){return t!=null}function c5e(t){let{vertexArray:e,header:n="Attributes"}=t;if(!e.configuration)return{};const r={};e.elements&&(r.ELEMENT_ARRAY_BUFFER=j$(e,e.elements,null,n));const i=e.values;for(const s in i){const o=e._getAttributeInfo(s);if(o){let a="".concat(s,": ").concat(o.name);const l=e.accessors[o.location];l&&(a="".concat(s,": ").concat(u5e(o.name,l))),r[a]=j$(e,i[s],l,n)}}return r}function j$(t,e,n,r){const{gl:i}=t;if(!e)return{[r]:"null","Format ":"N/A"};let s="NOT PROVIDED",o=1,a=0,l=0,c,u,d;if(n&&(s=n.type,o=n.size,s=String(s).replace("Array",""),c=s.indexOf("nt")!==-1),e instanceof kn){const h=e,{data:f,changed:p}=h.getDebugData();u=p?"*":"",d=f,l=h.byteLength,a=l/f.BYTES_PER_ELEMENT/o;let m;if(n){const _=n.divisor>0;m="".concat(_?"I ":"P "," ").concat(a," (x").concat(o,"=").concat(l," bytes ").concat(fd(i,s),")")}else c=!0,m="".concat(l," bytes");return{[r]:"".concat(u).concat(r1(d,{size:o,isInteger:c})),"Format ":m}}return d=e,o=e.length,s=String(e.constructor.name).replace("Array",""),c=s.indexOf("nt")!==-1,{[r]:"".concat(r1(d,{size:o,isInteger:c})," (constant)"),"Format ":"".concat(o,"x").concat(s," (constant)")}}function u5e(t,e){const{type:n,size:r}=e,i=pQ(n,r);return i?"".concat(t," (").concat(i.name,")"):t}function d5e(t){const e={},n="Accessors for ".concat(t.id);for(const r of t.attributeInfos)if(r){const i=G$(r);e["in ".concat(i)]={[n]:JSON.stringify(r.accessor)}}for(const r of t.varyingInfos)if(r){const i=G$(r);e["out ".concat(i)]={[n]:JSON.stringify(r.accessor)}}return e}function G$(t){const{type:e,size:n}=t.accessor,r=pQ(e,n);return r?"".concat(r.name," ").concat(t.name):t.name}const H$=eu()&&typeof document<"u";let h5e=0;class f5e{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{onCreateContext:n=_=>rQ(_),onAddHTML:r=null,onInitialize:i=()=>{},onRender:s=()=>{},onFinalize:o=()=>{},onError:a,gl:l=null,glOptions:c={},debug:u=!1,createFramebuffer:d=!1,autoResizeViewport:h=!0,autoResizeDrawingBuffer:f=!0,stats:p=Oh.get("animation-loop-".concat(h5e++))}=e;let{useDevicePixels:m=!0}=e;"useDevicePixelRatio"in e&&(Rt.deprecated("useDevicePixelRatio","useDevicePixels")(),m=e.useDevicePixelRatio),this.props={onCreateContext:n,onAddHTML:r,onInitialize:i,onRender:s,onFinalize:o,onError:a,gl:l,glOptions:c,debug:u,createFramebuffer:d},this.gl=l,this.needsRedraw=null,this.timeline=null,this.stats=p,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:h,autoResizeDrawingBuffer:f,useDevicePixels:m}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(e){return pt(typeof e=="string"),this.needsRedraw=this.needsRedraw||e,this}setProps(e){return"autoResizeViewport"in e&&(this.autoResizeViewport=e.autoResizeViewport),"autoResizeDrawingBuffer"in e&&(this.autoResizeDrawingBuffer=e.autoResizeDrawingBuffer),"useDevicePixels"in e&&(this.useDevicePixels=e.useDevicePixels),this}start(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._running)return this;this._running=!0;const n=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(e),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=oT.isSupported(this.gl,["timers"])?new oT(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(r=>{this._running&&(this._addCallbackData(r||{}),r!==!1&&this._startLoop())});return this.props.onError&&n.catch(this.props.onError),this}redraw(){return this.isContextLost()?this:(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this)}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(e){return this.timeline=e,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(e=>{this._resolveNextFrame=e})),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const r=document.getElementById(e);return r?Number(r.value):n}setViewParameters(){return Rt.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const e=()=>{this._running&&(this.redraw(),this._animationFrameId=this._requestAnimationFrame(e))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(e)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=H$?new Promise((e,n)=>{if(H$&&document.readyState==="complete"){e(document);return}window.addEventListener("load",()=>{e(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(e){this.display&&(this.display.delete(),this.display.animationLoop=null),e&&(e.animationLoop=this),this.display=e}_cancelAnimationFrame(e){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(e):_Fe(e)}_requestAnimationFrame(e){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(e):yFe(e)}_renderFrame(){if(this.display){this.display._renderFrame(...arguments);return}this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:e,height:n,aspect:r}=this._getSizeAndAspect();(e!==this.animationProps.width||n!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),r!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=e,this.animationProps.height=n,this.animationProps.aspect=r,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(e){typeof e=="object"&&e!==null&&(this.animationProps=Object.assign({},this.animationProps,e))}_createWebGLContext(e){if(this.offScreen=e.canvas&&typeof OffscreenCanvas<"u"&&e.canvas instanceof OffscreenCanvas,e=Object.assign({},e,this.props.glOptions),this.gl=this.props.gl?gD(this.props.gl,e):this.onCreateContext(e),!_C(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");sFe(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const e=document.createElement("div");document.body.appendChild(e),e.style.position="relative";const n=document.createElement("div");n.style.position="absolute",n.style.left="10px",n.style.bottom="10px",n.style.width="300px",n.style.background="white",e.appendChild(this.gl.canvas),e.appendChild(n);const r=this.props.onAddHTML(n);r&&(n.innerHTML=r)}}_getSizeAndAspect(){const e=this.gl.drawingBufferWidth,n=this.gl.drawingBufferHeight;let r=1;const{canvas:i}=this.gl;return i&&i.clientHeight?r=i.clientWidth/i.clientHeight:e>0&&n>0&&(r=e/n),{width:e,height:n,aspect:r}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&uFe(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new pi(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:e}=this.gl;e&&(e.addEventListener("mousemove",this._onMousemove),e.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(e){this.animationProps._mousePosition=[e.offsetX,e.offsetY]}_onMouseleave(e){this.animationProps._mousePosition=null}}const J1="vs",ED="fs";function To(t,e){if(!t)throw new Error(e||"shadertools: assertion failed.")}const t2={number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},array:{validate(t,e){return Array.isArray(t)||ArrayBuffer.isView(t)}}};function p5e(t){const e={};for(const n in t){const r=t[n],i=m5e(r);e[n]=i}return e}function m5e(t){let e=V$(t);return e==="object"?t?"type"in t?Object.assign({},t,t2[t.type]):"value"in t?(e=V$(t.value),Object.assign({type:e},t,t2[e])):{type:"object",value:t}:{type:"object",value:null}:Object.assign({type:e,value:t},t2[e])}function V$(t){return Array.isArray(t)||ArrayBuffer.isView(t)?"array":typeof t}const g5e="vs",v5e="fs";class W${constructor(e){let{name:n,vs:r,fs:i,dependencies:s=[],uniforms:o,getUniforms:a,deprecations:l=[],defines:c={},inject:u={},vertexShader:d,fragmentShader:h}=e;To(typeof n=="string"),this.name=n,this.vs=r||d,this.fs=i||h,this.getModuleUniforms=a,this.dependencies=s,this.deprecations=this._parseDeprecationDefinitions(l),this.defines=c,this.injections=y5e(u),o&&(this.uniforms=p5e(o))}getModuleSource(e){let n;switch(e){case g5e:n=this.vs||"";break;case v5e:n=this.fs||"";break;default:To(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),`
`).concat(n,"// END MODULE_").concat(this.name,`

`)}getUniforms(e,n){return this.getModuleUniforms?this.getModuleUniforms(e,n):this.uniforms?this._defaultGetUniforms(e):{}}getDefines(){return this.defines}checkDeprecations(e,n){this.deprecations.forEach(r=>{r.regex.test(e)&&(r.deprecated?n.deprecated(r.old,r.new)():n.removed(r.old,r.new)())})}_parseDeprecationDefinitions(e){return e.forEach(n=>{switch(n.type){case"function":n.regex=new RegExp("\\b".concat(n.old,"\\("));break;default:n.regex=new RegExp("".concat(n.type," ").concat(n.old,";"))}}),e}_defaultGetUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n={},r=this.uniforms;for(const i in r){const s=r[i];i in e&&!s.private?(s.validate&&To(s.validate(e[i],s),"".concat(this.name,": invalid ").concat(i)),n[i]=e[i]):n[i]=s.value}return n}}function y5e(t){const e={vs:{},fs:{}};for(const n in t){let r=t[n];const i=n.slice(0,2);typeof r=="string"&&(r={order:0,injection:r}),e[i][n]=r}return e}function _5e(t){return b5e(yQ(t))}function b5e(t){const e={},n={};return vQ({modules:t,level:0,moduleMap:e,moduleDepth:n}),Object.keys(n).sort((r,i)=>n[i]-n[r]).map(r=>e[r])}function vQ(t){let{modules:e,level:n,moduleMap:r,moduleDepth:i}=t;if(n>=5)throw new Error("Possible loop in shader dependency graph");for(const s of e)r[s.name]=s,(i[s.name]===void 0||i[s.name]<n)&&(i[s.name]=n);for(const s of e)s.dependencies&&vQ({modules:s.dependencies,level:n+1,moduleMap:r,moduleDepth:i})}function yQ(t,e){return t.map(n=>(n instanceof W$||(To(typeof n!="string","Shader module use by name is deprecated. Import shader module '".concat(n,"' and use it directly.")),To(n.name,"shader module has no name"),n=new W$(n),n.dependencies=yQ(n.dependencies)),n))}function x5e(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=typeof window<"u"?window.navigator||{}:{},n=t.userAgent||e.userAgent||"",r=n.indexOf("MSIE ")!==-1,i=n.indexOf("Trident/")!==-1;return r||i}const E5e=7936,w5e=7937,T5e=7938,S5e=35724,wD={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},bh={};Object.keys(wD).forEach(t=>{bh[t]=t});function C5e(t){return typeof WebGL2RenderingContext<"u"&&t instanceof WebGL2RenderingContext?!0:!!(t&&t._version===2)}function A5e(t){const e=t.getExtension("WEBGL_debug_renderer_info"),n=t.getParameter(e&&e.UNMASKED_VENDOR_WEBGL||E5e),r=t.getParameter(e&&e.UNMASKED_RENDERER_WEBGL||w5e);return{gpuVendor:R5e(n,r),vendor:n,renderer:r,version:t.getParameter(T5e),shadingLanguageVersion:t.getParameter(S5e)}}function R5e(t,e){return t.match(/NVIDIA/i)||e.match(/NVIDIA/i)?"NVIDIA":t.match(/INTEL/i)||e.match(/INTEL/i)?"INTEL":t.match(/AMD/i)||e.match(/AMD/i)||t.match(/ATI/i)||e.match(/ATI/i)?"AMD":"UNKNOWN GPU"}const n2={};function X$(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=wD[e];if(To(r,e),!x5e(n))return!0;if(e in n2)return n2[e];const i=r[0],s=n.behavior||"enable",o="#extension GL_".concat(i," : ").concat(s,`
void main(void) {}`),a=t.createShader(35633);t.shaderSource(a,o),t.compileShader(a);const l=t.getShaderParameter(a,35713);return t.deleteShader(a),n2[e]=l,l}function P5e(t,e){const n=wD[e];To(n,e);const r=C5e(t)&&n[1]||n[0],i=typeof r=="string"?!!t.getExtension(r):r;return To(i===!1||i===!0),i}function Cx(t,e){return e=Array.isArray(e)?e:[e],e.every(n=>P5e(t,n))}function I5e(t){switch(A5e(t).gpuVendor.toLowerCase()){case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function M5e(t,e,n){let r=`#if (__VERSION__ > 120)

# define FEATURE_GLSL_DERIVATIVES
# define FEATURE_GLSL_DRAW_BUFFERS
# define FEATURE_GLSL_FRAG_DEPTH
# define FEATURE_GLSL_TEXTURE_LOD

// DEPRECATED FLAGS, remove in v9
# define FRAG_DEPTH
# define DERIVATIVES
# define DRAW_BUFFERS
# define TEXTURE_LOD

#endif // __VERSION
`;return Cx(t,bh.GLSL_FRAG_DEPTH)&&(r+=`
// FRAG_DEPTH => gl_FragDepth is available
#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
# define FEATURE_GLSL_FRAG_DEPTH
# define FRAG_DEPTH
# define gl_FragDepth gl_FragDepthEXT
#endif
`),Cx(t,bh.GLSL_DERIVATIVES)&&X$(t,bh.GLSL_DERIVATIVES)&&(r+=`
// DERIVATIVES => dxdF, dxdY and fwidth are available
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
# define FEATURE_GLSL_DERIVATIVES
# define DERIVATIVES
#endif
`),Cx(t,bh.GLSL_FRAG_DATA)&&X$(t,bh.GLSL_FRAG_DATA,{behavior:"require"})&&(r+=`
// DRAW_BUFFERS => gl_FragData[] is available
#ifdef GL_EXT_draw_buffers
#extension GL_EXT_draw_buffers : require
#define FEATURE_GLSL_DRAW_BUFFERS
#define DRAW_BUFFERS
#endif
`),Cx(t,bh.GLSL_TEXTURE_LOD)&&(r+=`// TEXTURE_LOD => texture2DLod etc are available
#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable

# define FEATURE_GLSL_TEXTURE_LOD
# define TEXTURE_LOD

#endif
`),r}const L5e=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,O5e=`#ifdef MODULE_MATERIAL
  gl_FragColor = material_filterColor(gl_FragColor);
#endif

#ifdef MODULE_LIGHTING
  gl_FragColor = lighting_filterColor(gl_FragColor);
#endif

#ifdef MODULE_FOG
  gl_FragColor = fog_filterColor(gl_FragColor);
#endif

#ifdef MODULE_PICKING
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,k5e={[J1]:L5e,[ED]:O5e},CE="__LUMA_INJECT_DECLARATIONS__",Y$=/void\s+main\s*\([^)]*\)\s*\{\n?/,K$=/}\n?[^{}]*$/,r2=[];function q$(t,e,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=e===J1;for(const s in n){const o=n[s];o.sort((l,c)=>l.order-c.order),r2.length=o.length;for(let l=0,c=o.length;l<c;++l)r2[l]=o[l].injection;const a="".concat(r2.join(`
`),`
`);switch(s){case"vs:#decl":i&&(t=t.replace(CE,a));break;case"vs:#main-start":i&&(t=t.replace(Y$,l=>l+a));break;case"vs:#main-end":i&&(t=t.replace(K$,l=>a+l));break;case"fs:#decl":i||(t=t.replace(CE,a));break;case"fs:#main-start":i||(t=t.replace(Y$,l=>l+a));break;case"fs:#main-end":i||(t=t.replace(K$,l=>a+l));break;default:t=t.replace(s,l=>l+a)}}return t=t.replace(CE,""),r&&(t=t.replace(/\}\s*$/,s=>s+k5e[e])),t}function GL(t){const e={};return To(Array.isArray(t)&&t.length>1),t.forEach(n=>{for(const r in n)e[r]=e[r]?"".concat(e[r],`
`).concat(n[r]):n[r]}),e}function lg(t){return new RegExp("\\b".concat(t,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const _Q=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],N5e=[..._Q,[lg("attribute"),"in $1"],[lg("varying"),"out $1"]],D5e=[..._Q,[lg("varying"),"in $1"]],bQ=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],B5e=[...bQ,[lg("in"),"attribute $1"],[lg("out"),"varying $1"]],F5e=[...bQ,[lg("in"),"varying $1"]],HL="gl_FragColor",VL=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,U5e=/void\s+main\s*\([^)]*\)\s*\{\n?/;function z5e(t,e,n){switch(e){case 300:return n?aT(t,N5e):$5e(t);case 100:return n?aT(t,B5e):j5e(t);default:throw new Error("unknown GLSL version ".concat(e))}}function aT(t,e){for(const[n,r]of e)t=t.replace(n,r);return t}function $5e(t){t=aT(t,D5e);const e=t.match(VL);if(e){const n=e[1];t=t.replace(new RegExp("\\b".concat(HL,"\\b"),"g"),n)}else{const n="fragmentColor";t=t.replace(U5e,r=>"out vec4 ".concat(n,`;
`).concat(r)).replace(new RegExp("\\b".concat(HL,"\\b"),"g"),n)}return t}function j5e(t){t=aT(t,F5e);const e=t.match(VL);if(e){const n=e[1];t=t.replace(VL,"").replace(new RegExp("\\b".concat(n,"\\b"),"g"),HL)}return t}const G5e=`

`.concat(CE,`

`),xQ={[J1]:"vertex",[ED]:"fragment"},H5e=`precision highp float;

`;function V5e(t,e){const{vs:n,fs:r}=e,i=_5e(e.modules||[]);return{gl:t,vs:Z$(t,Object.assign({},e,{source:n,type:J1,modules:i})),fs:Z$(t,Object.assign({},e,{source:r,type:ED,modules:i})),getUniforms:W5e(i)}}function Z$(t,e){let{id:n,source:r,type:i,modules:s,defines:o={},hookFunctions:a=[],inject:l={},transpileToGLSL100:c=!1,prologue:u=!0,log:d}=e;To(typeof r=="string","shader source must be a string");const h=i===J1,f=r.split(`
`);let p=100,m="",_=r;f[0].indexOf("#version ")===0?(p=300,m=f[0],_=f.slice(1).join(`
`)):m="#version ".concat(p);const y={};s.forEach(C=>{Object.assign(y,C.getDefines())}),Object.assign(y,o);let x=u?"".concat(m,`
`).concat(Y5e({id:n,source:r,type:i}),`
`).concat(X5e({type:i}),`
`).concat(I5e(t),`
`).concat(M5e(t),`
`).concat(K5e(y),`
`).concat(h?"":H5e,`
`):"".concat(m,`
`);const b=Z5e(a),E={},w={},T={};for(const C in l){const P=typeof l[C]=="string"?{injection:l[C],order:0}:l[C],M=C.match(/^(v|f)s:(#)?([\w-]+)$/);if(M){const N=M[2],F=M[3];N?F==="decl"?w[C]=[P]:T[C]=[P]:E[C]=[P]}else T[C]=[P]}for(const C of s){d&&C.checkDeprecations(_,d);const P=C.getModuleSource(i,p);x+=P;const M=C.injections[i];for(const N in M){const F=N.match(/^(v|f)s:#([\w-]+)$/);if(F){const k=F[2]==="decl"?w:T;k[N]=k[N]||[],k[N].push(M[N])}else E[N]=E[N]||[],E[N].push(M[N])}}return x+=G5e,x=q$(x,i,w),x+=q5e(b[i],E),x+=_,x=q$(x,i,T),x=z5e(x,c?100:p,h),x}function W5e(t){return function(n){const r={};for(const i of t){const s=i.getUniforms(n,r);Object.assign(r,s)}return r}}function X5e(t){let{type:e}=t;return`
#define SHADER_TYPE_`.concat(xQ[e].toUpperCase(),`
`)}function Y5e(t){let{id:e,source:n,type:r}=t;return e&&typeof e=="string"&&n.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME `.concat(e,"_").concat(xQ[r],`

`):""}function K5e(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=0,n="";for(const r in t){e===0&&(n+=`
// APPLICATION DEFINES
`),e++;const i=t[r];(i||Number.isFinite(i))&&(n+="#define ".concat(r.toUpperCase()," ").concat(t[r],`
`))}return e===0&&(n+=`
`),n}function q5e(t,e){let n="";for(const r in t){const i=t[r];if(n+="void ".concat(i.signature,` {
`),i.header&&(n+="  ".concat(i.header)),e[r]){const s=e[r];s.sort((o,a)=>o.order-a.order);for(const o of s)n+="  ".concat(o.injection,`
`)}i.footer&&(n+="  ".concat(i.footer)),n+=`}
`}return n}function Z5e(t){const e={vs:{},fs:{}};return t.forEach(n=>{let r;typeof n!="string"?(r=n,n=r.hook):r={},n=n.trim();const[i,s]=n.split(":"),o=n.replace(/\(.+/,"");e[i][o]=Object.assign(r,{signature:s})}),e}const Q5e="void main() {gl_FragColor = vec4(0);}",EQ=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,J5e=`#version 300 es
`.concat(EQ);function wQ(t,e){e=Array.isArray(e)?e:[e];const n=t.replace(/^\s+/,"").split(/\s+/),[r,i,s]=n;if(!e.includes(r)||!i||!s)return null;const o=s.split(";")[0];return{qualifier:r,type:i,name:o}}function TQ(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{version:e=100,input:n,inputType:r,output:i}=t;if(!n)return e===300?J5e:e>300?"#version ".concat(e,`
`).concat(EQ):Q5e;const s=nUe(n,r);return e>=300?"#version ".concat(e," ").concat(e===300?"es":"",`
in `).concat(r," ").concat(n,`;
out vec4 `).concat(i,`;
void main() {
  `).concat(i," = ").concat(s,`;
}`):"varying ".concat(r," ").concat(n,`;
void main() {
  gl_FragColor = `).concat(s,`;
}`)}function eUe(t){switch(t){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return To(!1),null}}function tUe(t){switch(t){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return To(!1),null}}function nUe(t,e){switch(e){case"float":return"vec4(".concat(t,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(t,", 0.0, 1.0)");case"vec3":return"vec4(".concat(t,", 1.0)");case"vec4":return t;default:return To(!1),null}}const rUe=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,iUe={name:"fp32",vs:rUe,fs:null};function Q$(t,e){if(!t)throw new Error("math.gl assertion ".concat(e))}const yo={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function sUe(t,{precision:e=yo.precision}={}){return t=oUe(t),"".concat(parseFloat(t.toPrecision(e)))}function cg(t){return Array.isArray(t)||ArrayBuffer.isView(t)&&!(t instanceof DataView)}function qu(t,e,n){return lUe(t,r=>Math.max(e,Math.min(n,r)))}function lT(t,e,n){return cg(t)?t.map((r,i)=>lT(r,e[i],n)):n*e+(1-n)*t}function i1(t,e,n){const r=yo.EPSILON;n&&(yo.EPSILON=n);try{if(t===e)return!0;if(cg(t)&&cg(e)){if(t.length!==e.length)return!1;for(let i=0;i<t.length;++i)if(!i1(t[i],e[i]))return!1;return!0}return t&&t.equals?t.equals(e):e&&e.equals?e.equals(t):typeof t=="number"&&typeof e=="number"?Math.abs(t-e)<=yo.EPSILON*Math.max(1,Math.abs(t),Math.abs(e)):!1}finally{yo.EPSILON=r}}function oUe(t){return Math.round(t/yo.EPSILON)*yo.EPSILON}function aUe(t){return t.clone?t.clone():new Array(t.length)}function lUe(t,e,n){if(cg(t)){const r=t;n=n||aUe(r);for(let i=0;i<n.length&&i<r.length;++i)n[i]=e(t[i],i,n);return n}return e(t)}function cUe(t){function e(){var n=Reflect.construct(t,Array.from(arguments));return Object.setPrototypeOf(n,Object.getPrototypeOf(this)),n}return e.prototype=Object.create(t.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t,e}class SQ extends cUe(Array){clone(){return new this.constructor().copy(this)}fromArray(e,n=0){for(let r=0;r<this.ELEMENTS;++r)this[r]=e[r+n];return this.check()}toArray(e=[],n=0){for(let r=0;r<this.ELEMENTS;++r)e[n+r]=this[r];return e}from(e){return Array.isArray(e)?this.copy(e):this.fromObject(e)}to(e){return e===this?this:cg(e)?this.toArray(e):this.toObject(e)}toTarget(e){return e?this.to(e):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(yo)}formatString(e){let n="";for(let r=0;r<this.ELEMENTS;++r)n+=(r>0?", ":"")+sUe(this[r],e);return"".concat(e.printTypes?this.constructor.name:"","[").concat(n,"]")}equals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(!i1(this[n],e[n]))return!1;return!0}exactEquals(e){if(!e||this.length!==e.length)return!1;for(let n=0;n<this.ELEMENTS;++n)if(this[n]!==e[n])return!1;return!0}negate(){for(let e=0;e<this.ELEMENTS;++e)this[e]=-this[e];return this.check()}lerp(e,n,r){if(r===void 0)return this.lerp(this,e,n);for(let i=0;i<this.ELEMENTS;++i){const s=e[i];this[i]=s+r*(n[i]-s)}return this.check()}min(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(e[n],this[n]);return this.check()}max(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.max(e[n],this[n]);return this.check()}clamp(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e[r]),n[r]);return this.check()}add(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]+=n[r];return this.check()}subtract(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]-=n[r];return this.check()}scale(e){if(typeof e=="number")for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;else for(let n=0;n<this.ELEMENTS&&n<e.length;++n)this[n]*=e[n];return this.check()}multiplyByScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}check(){if(yo.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let e=this.length===this.ELEMENTS;for(let n=0;n<this.ELEMENTS;++n)e=e&&Number.isFinite(this[n]);return e}sub(e){return this.subtract(e)}setScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]=e;return this.check()}addScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]+=e;return this.check()}subScalar(e){return this.addScalar(-e)}multiplyScalar(e){for(let n=0;n<this.ELEMENTS;++n)this[n]*=e;return this.check()}divideScalar(e){return this.multiplyByScalar(1/e)}clampScalar(e,n){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(Math.max(this[r],e),n);return this.check()}get elements(){return this}}function uUe(t,e){if(t.length!==e)return!1;for(let n=0;n<t.length;++n)if(!Number.isFinite(t[n]))return!1;return!0}function fo(t){if(!Number.isFinite(t))throw new Error("Invalid number ".concat(t));return t}function i2(t,e,n=""){if(yo.debug&&!uUe(t,e))throw new Error("math.gl: ".concat(n," some fields set to invalid numbers'"));return t}class dUe extends SQ{get x(){return this[0]}set x(e){this[0]=fo(e)}get y(){return this[1]}set y(e){this[1]=fo(e)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let e=0;for(let n=0;n<this.ELEMENTS;++n)e+=this[n]*this[n];return e}magnitudeSquared(){return this.lengthSquared()}distance(e){return Math.sqrt(this.distanceSquared(e))}distanceSquared(e){let n=0;for(let r=0;r<this.ELEMENTS;++r){const i=this[r]-e[r];n+=i*i}return fo(n)}dot(e){let n=0;for(let r=0;r<this.ELEMENTS;++r)n+=this[r]*e[r];return fo(n)}normalize(){const e=this.magnitude();if(e!==0)for(let n=0;n<this.ELEMENTS;++n)this[n]/=e;return this.check()}multiply(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]*=n[r];return this.check()}divide(...e){for(const n of e)for(let r=0;r<this.ELEMENTS;++r)this[r]/=n[r];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(e){return this.distance(e)}distanceToSquared(e){return this.distanceSquared(e)}getComponent(e){return Q$(e>=0&&e<this.ELEMENTS,"index is out of range"),fo(this[e])}setComponent(e,n){return Q$(e>=0&&e<this.ELEMENTS,"index is out of range"),this[e]=n,this.check()}addVectors(e,n){return this.copy(e).add(n)}subVectors(e,n){return this.copy(e).subtract(n)}multiplyVectors(e,n){return this.copy(e).multiply(n)}addScaledVector(e,n){return this.add(new this.constructor(e).multiplyScalar(n))}}var AE=1e-6,ug=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function hUe(){var t=new ug(2);return ug!=Float32Array&&(t[0]=0,t[1]=0),t}function J$(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function fUe(t,e){return t[0]=-e[0],t[1]=-e[1],t}function CQ(t,e,n,r){var i=e[0],s=e[1];return t[0]=i+r*(n[0]-i),t[1]=s+r*(n[1]-s),t}function pUe(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}(function(){var t=hUe();return function(e,n,r,i,s,o){var a,l;for(n||(n=2),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,a=r;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],s(t,t,o),e[a]=t[0],e[a+1]=t[1];return e}})();function mUe(t,e,n){const r=e[0],i=e[1],s=n[3]*r+n[7]*i||1;return t[0]=(n[0]*r+n[4]*i)/s,t[1]=(n[1]*r+n[5]*i)/s,t}function AQ(t,e,n){const r=e[0],i=e[1],s=e[2],o=n[3]*r+n[7]*i+n[11]*s||1;return t[0]=(n[0]*r+n[4]*i+n[8]*s)/o,t[1]=(n[1]*r+n[5]*i+n[9]*s)/o,t[2]=(n[2]*r+n[6]*i+n[10]*s)/o,t}function gUe(t,e,n){const r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t[2]=e[2],t}function vUe(){var t=new ug(3);return ug!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function yUe(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function _Ue(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function bUe(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function xUe(t,e,n){var r=e[0],i=e[1],s=e[2],o=n[0],a=n[1],l=n[2];return t[0]=i*l-s*a,t[1]=s*o-r*l,t[2]=r*a-i*o,t}function RQ(t,e,n){var r=e[0],i=e[1],s=e[2],o=n[3]*r+n[7]*i+n[11]*s+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*i+n[8]*s+n[12])/o,t[1]=(n[1]*r+n[5]*i+n[9]*s+n[13])/o,t[2]=(n[2]*r+n[6]*i+n[10]*s+n[14])/o,t}function EUe(t,e,n){var r=e[0],i=e[1],s=e[2];return t[0]=r*n[0]+i*n[3]+s*n[6],t[1]=r*n[1]+i*n[4]+s*n[7],t[2]=r*n[2]+i*n[5]+s*n[8],t}function wUe(t,e,n){var r=n[0],i=n[1],s=n[2],o=n[3],a=e[0],l=e[1],c=e[2],u=i*c-s*l,d=s*a-r*c,h=r*l-i*a,f=i*h-s*d,p=s*u-r*h,m=r*d-i*u,_=o*2;return u*=_,d*=_,h*=_,f*=2,p*=2,m*=2,t[0]=a+u+f,t[1]=l+d+p,t[2]=c+h+m,t}function TUe(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0],s[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),s[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function SUe(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),s[1]=i[1],s[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function CUe(t,e,n,r){var i=[],s=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],s[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),s[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),s[2]=i[2],t[0]=s[0]+n[0],t[1]=s[1]+n[1],t[2]=s[2]+n[2],t}function AUe(t,e){var n=t[0],r=t[1],i=t[2],s=e[0],o=e[1],a=e[2],l=Math.sqrt(n*n+r*r+i*i),c=Math.sqrt(s*s+o*o+a*a),u=l*c,d=u&&bUe(t,e)/u;return Math.acos(Math.min(Math.max(d,-1),1))}var RUe=yUe;(function(){var t=vUe();return function(e,n,r,i,s,o){var a,l;for(n||(n=3),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,a=r;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2];return e}})();const s2=[0,0,0];let Ax;class Xl extends dUe{static get ZERO(){return Ax||(Ax=new Xl(0,0,0),Object.freeze(Ax)),Ax}constructor(e=0,n=0,r=0){super(-0,-0,-0),arguments.length===1&&cg(e)?this.copy(e):(yo.debug&&(fo(e),fo(n),fo(r)),this[0]=e,this[1]=n,this[2]=r)}set(e,n,r){return this[0]=e,this[1]=n,this[2]=r,this.check()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this.check()}fromObject(e){return yo.debug&&(fo(e.x),fo(e.y),fo(e.z)),this[0]=e.x,this[1]=e.y,this[2]=e.z,this.check()}toObject(e){return e.x=this[0],e.y=this[1],e.z=this[2],e}get ELEMENTS(){return 3}get z(){return this[2]}set z(e){this[2]=fo(e)}angle(e){return AUe(this,e)}cross(e){return xUe(this,this,e),this.check()}rotateX({radians:e,origin:n=s2}){return TUe(this,this,n,e),this.check()}rotateY({radians:e,origin:n=s2}){return SUe(this,this,n,e),this.check()}rotateZ({radians:e,origin:n=s2}){return CUe(this,this,n,e),this.check()}transform(e){return this.transformAsPoint(e)}transformAsPoint(e){return RQ(this,this,e),this.check()}transformAsVector(e){return AQ(this,this,e),this.check()}transformByMatrix3(e){return EUe(this,this,e),this.check()}transformByMatrix2(e){return gUe(this,this,e),this.check()}transformByQuaternion(e){return wUe(this,this,e),this.check()}}class PUe extends SQ{toString(){let e="[";if(yo.printRowMajor){e+="row-major:";for(let n=0;n<this.RANK;++n)for(let r=0;r<this.RANK;++r)e+=" ".concat(this[r*this.RANK+n])}else{e+="column-major:";for(let n=0;n<this.ELEMENTS;++n)e+=" ".concat(this[n])}return e+="]",e}getElementIndex(e,n){return n*this.RANK+e}getElement(e,n){return this[n*this.RANK+e]}setElement(e,n,r){return this[n*this.RANK+e]=fo(r),this}getColumn(e,n=new Array(this.RANK).fill(-0)){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)n[i]=this[r+i];return n}setColumn(e,n){const r=e*this.RANK;for(let i=0;i<this.RANK;++i)this[r+i]=n[i];return this}}function IUe(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function MUe(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],s=e[6],o=e[7],a=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=s,t[11]=e[14],t[12]=i,t[13]=o,t[14]=a}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function WL(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],d=e[9],h=e[10],f=e[11],p=e[12],m=e[13],_=e[14],y=e[15],x=n*a-r*o,b=n*l-i*o,E=n*c-s*o,w=r*l-i*a,T=r*c-s*a,C=i*c-s*l,P=u*m-d*p,M=u*_-h*p,N=u*y-f*p,F=d*_-h*m,I=d*y-f*m,k=h*y-f*_,R=x*k-b*I+E*F+w*N-T*M+C*P;return R?(R=1/R,t[0]=(a*k-l*I+c*F)*R,t[1]=(i*I-r*k-s*F)*R,t[2]=(m*C-_*T+y*w)*R,t[3]=(h*T-d*C-f*w)*R,t[4]=(l*N-o*k-c*M)*R,t[5]=(n*k-i*N+s*M)*R,t[6]=(_*E-p*C-y*b)*R,t[7]=(u*C-h*E+f*b)*R,t[8]=(o*I-a*N+c*P)*R,t[9]=(r*N-n*I-s*P)*R,t[10]=(p*T-m*E+y*x)*R,t[11]=(d*E-u*T-f*x)*R,t[12]=(a*M-o*F-l*P)*R,t[13]=(n*F-r*M+i*P)*R,t[14]=(m*b-p*w-_*x)*R,t[15]=(u*w-d*b+h*x)*R,t):null}function LUe(t){var e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],o=t[5],a=t[6],l=t[7],c=t[8],u=t[9],d=t[10],h=t[11],f=t[12],p=t[13],m=t[14],_=t[15],y=e*o-n*s,x=e*a-r*s,b=e*l-i*s,E=n*a-r*o,w=n*l-i*o,T=r*l-i*a,C=c*p-u*f,P=c*m-d*f,M=c*_-h*f,N=u*m-d*p,F=u*_-h*p,I=d*_-h*m;return y*I-x*F+b*N+E*M-w*P+T*C}function Kh(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3],a=e[4],l=e[5],c=e[6],u=e[7],d=e[8],h=e[9],f=e[10],p=e[11],m=e[12],_=e[13],y=e[14],x=e[15],b=n[0],E=n[1],w=n[2],T=n[3];return t[0]=b*r+E*a+w*d+T*m,t[1]=b*i+E*l+w*h+T*_,t[2]=b*s+E*c+w*f+T*y,t[3]=b*o+E*u+w*p+T*x,b=n[4],E=n[5],w=n[6],T=n[7],t[4]=b*r+E*a+w*d+T*m,t[5]=b*i+E*l+w*h+T*_,t[6]=b*s+E*c+w*f+T*y,t[7]=b*o+E*u+w*p+T*x,b=n[8],E=n[9],w=n[10],T=n[11],t[8]=b*r+E*a+w*d+T*m,t[9]=b*i+E*l+w*h+T*_,t[10]=b*s+E*c+w*f+T*y,t[11]=b*o+E*u+w*p+T*x,b=n[12],E=n[13],w=n[14],T=n[15],t[12]=b*r+E*a+w*d+T*m,t[13]=b*i+E*l+w*h+T*_,t[14]=b*s+E*c+w*f+T*y,t[15]=b*o+E*u+w*p+T*x,t}function cT(t,e,n){var r=n[0],i=n[1],s=n[2],o,a,l,c,u,d,h,f,p,m,_,y;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*s+e[12],t[13]=e[1]*r+e[5]*i+e[9]*s+e[13],t[14]=e[2]*r+e[6]*i+e[10]*s+e[14],t[15]=e[3]*r+e[7]*i+e[11]*s+e[15]):(o=e[0],a=e[1],l=e[2],c=e[3],u=e[4],d=e[5],h=e[6],f=e[7],p=e[8],m=e[9],_=e[10],y=e[11],t[0]=o,t[1]=a,t[2]=l,t[3]=c,t[4]=u,t[5]=d,t[6]=h,t[7]=f,t[8]=p,t[9]=m,t[10]=_,t[11]=y,t[12]=o*r+u*i+p*s+e[12],t[13]=a*r+d*i+m*s+e[13],t[14]=l*r+h*i+_*s+e[14],t[15]=c*r+f*i+y*s+e[15]),t}function TD(t,e,n){var r=n[0],i=n[1],s=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function OUe(t,e,n,r){var i=r[0],s=r[1],o=r[2],a=Math.hypot(i,s,o),l,c,u,d,h,f,p,m,_,y,x,b,E,w,T,C,P,M,N,F,I,k,R,z;return a<AE?null:(a=1/a,i*=a,s*=a,o*=a,l=Math.sin(n),c=Math.cos(n),u=1-c,d=e[0],h=e[1],f=e[2],p=e[3],m=e[4],_=e[5],y=e[6],x=e[7],b=e[8],E=e[9],w=e[10],T=e[11],C=i*i*u+c,P=s*i*u+o*l,M=o*i*u-s*l,N=i*s*u-o*l,F=s*s*u+c,I=o*s*u+i*l,k=i*o*u+s*l,R=s*o*u-i*l,z=o*o*u+c,t[0]=d*C+m*P+b*M,t[1]=h*C+_*P+E*M,t[2]=f*C+y*P+w*M,t[3]=p*C+x*P+T*M,t[4]=d*N+m*F+b*I,t[5]=h*N+_*F+E*I,t[6]=f*N+y*F+w*I,t[7]=p*N+x*F+T*I,t[8]=d*k+m*R+b*z,t[9]=h*k+_*R+E*z,t[10]=f*k+y*R+w*z,t[11]=p*k+x*R+T*z,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function PQ(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[4],o=e[5],a=e[6],l=e[7],c=e[8],u=e[9],d=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+c*r,t[5]=o*i+u*r,t[6]=a*i+d*r,t[7]=l*i+h*r,t[8]=c*i-s*r,t[9]=u*i-o*r,t[10]=d*i-a*r,t[11]=h*i-l*r,t}function kUe(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],c=e[8],u=e[9],d=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-c*r,t[1]=o*i-u*r,t[2]=a*i-d*r,t[3]=l*i-h*r,t[8]=s*r+c*i,t[9]=o*r+u*i,t[10]=a*r+d*i,t[11]=l*r+h*i,t}function IQ(t,e,n){var r=Math.sin(n),i=Math.cos(n),s=e[0],o=e[1],a=e[2],l=e[3],c=e[4],u=e[5],d=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+c*r,t[1]=o*i+u*r,t[2]=a*i+d*r,t[3]=l*i+h*r,t[4]=c*i-s*r,t[5]=u*i-o*r,t[6]=d*i-a*r,t[7]=h*i-l*r,t}function NUe(t,e){var n=e[0],r=e[1],i=e[2],s=e[3],o=n+n,a=r+r,l=i+i,c=n*o,u=r*o,d=r*a,h=i*o,f=i*a,p=i*l,m=s*o,_=s*a,y=s*l;return t[0]=1-d-p,t[1]=u+y,t[2]=h-_,t[3]=0,t[4]=u-y,t[5]=1-c-p,t[6]=f+m,t[7]=0,t[8]=h+_,t[9]=f-m,t[10]=1-c-d,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function DUe(t,e,n,r,i,s,o){var a=1/(n-e),l=1/(i-r),c=1/(s-o);return t[0]=s*2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s*2*l,t[6]=0,t[7]=0,t[8]=(n+e)*a,t[9]=(i+r)*l,t[10]=(o+s)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*s*2*c,t[15]=0,t}function BUe(t,e,n,r,i){var s=1/Math.tan(e/2),o;return t[0]=s/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,i!=null&&i!==1/0?(o=1/(r-i),t[10]=(i+r)*o,t[14]=2*i*r*o):(t[10]=-1,t[14]=-2*r),t}var FUe=BUe;function UUe(t,e,n,r,i,s,o){var a=1/(e-n),l=1/(r-i),c=1/(s-o);return t[0]=-2*a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*a,t[13]=(i+r)*l,t[14]=(o+s)*c,t[15]=1,t}var zUe=UUe;function $Ue(t,e,n,r){var i,s,o,a,l,c,u,d,h,f,p=e[0],m=e[1],_=e[2],y=r[0],x=r[1],b=r[2],E=n[0],w=n[1],T=n[2];return Math.abs(p-E)<AE&&Math.abs(m-w)<AE&&Math.abs(_-T)<AE?IUe(t):(u=p-E,d=m-w,h=_-T,f=1/Math.hypot(u,d,h),u*=f,d*=f,h*=f,i=x*h-b*d,s=b*u-y*h,o=y*d-x*u,f=Math.hypot(i,s,o),f?(f=1/f,i*=f,s*=f,o*=f):(i=0,s=0,o=0),a=d*o-h*s,l=h*i-u*o,c=u*s-d*i,f=Math.hypot(a,l,c),f?(f=1/f,a*=f,l*=f,c*=f):(a=0,l=0,c=0),t[0]=i,t[1]=a,t[2]=u,t[3]=0,t[4]=s,t[5]=l,t[6]=d,t[7]=0,t[8]=o,t[9]=c,t[10]=h,t[11]=0,t[12]=-(i*p+s*m+o*_),t[13]=-(a*p+l*m+c*_),t[14]=-(u*p+d*m+h*_),t[15]=1,t)}function jUe(){var t=new ug(4);return ug!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function GUe(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function e_(t,e,n){var r=e[0],i=e[1],s=e[2],o=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*s+n[12]*o,t[1]=n[1]*r+n[5]*i+n[9]*s+n[13]*o,t[2]=n[2]*r+n[6]*i+n[10]*s+n[14]*o,t[3]=n[3]*r+n[7]*i+n[11]*s+n[15]*o,t}(function(){var t=jUe();return function(e,n,r,i,s,o){var a,l;for(n||(n=4),r||(r=0),i?l=Math.min(i*n+r,e.length):l=e.length,a=r;a<l;a+=n)t[0]=e[a],t[1]=e[a+1],t[2]=e[a+2],t[3]=e[a+3],s(t,t,o),e[a]=t[0],e[a+1]=t[1],e[a+2]=t[2],e[a+3]=t[3];return e}})();var XL;(function(t){t[t.COL0ROW0=0]="COL0ROW0",t[t.COL0ROW1=1]="COL0ROW1",t[t.COL0ROW2=2]="COL0ROW2",t[t.COL0ROW3=3]="COL0ROW3",t[t.COL1ROW0=4]="COL1ROW0",t[t.COL1ROW1=5]="COL1ROW1",t[t.COL1ROW2=6]="COL1ROW2",t[t.COL1ROW3=7]="COL1ROW3",t[t.COL2ROW0=8]="COL2ROW0",t[t.COL2ROW1=9]="COL2ROW1",t[t.COL2ROW2=10]="COL2ROW2",t[t.COL2ROW3=11]="COL2ROW3",t[t.COL3ROW0=12]="COL3ROW0",t[t.COL3ROW1=13]="COL3ROW1",t[t.COL3ROW2=14]="COL3ROW2",t[t.COL3ROW3=15]="COL3ROW3"})(XL||(XL={}));const HUe=45*Math.PI/180,VUe=1,o2=.1,a2=500,WUe=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Yl extends PUe{static get IDENTITY(){return YUe()}static get ZERO(){return XUe()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return XL}constructor(e){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(e)?this.copy(e):this.identity()}copy(e){return this[0]=e[0],this[1]=e[1],this[2]=e[2],this[3]=e[3],this[4]=e[4],this[5]=e[5],this[6]=e[6],this[7]=e[7],this[8]=e[8],this[9]=e[9],this[10]=e[10],this[11]=e[11],this[12]=e[12],this[13]=e[13],this[14]=e[14],this[15]=e[15],this.check()}set(e,n,r,i,s,o,a,l,c,u,d,h,f,p,m,_){return this[0]=e,this[1]=n,this[2]=r,this[3]=i,this[4]=s,this[5]=o,this[6]=a,this[7]=l,this[8]=c,this[9]=u,this[10]=d,this[11]=h,this[12]=f,this[13]=p,this[14]=m,this[15]=_,this.check()}setRowMajor(e,n,r,i,s,o,a,l,c,u,d,h,f,p,m,_){return this[0]=e,this[1]=s,this[2]=c,this[3]=f,this[4]=n,this[5]=o,this[6]=u,this[7]=p,this[8]=r,this[9]=a,this[10]=d,this[11]=m,this[12]=i,this[13]=l,this[14]=h,this[15]=_,this.check()}toRowMajor(e){return e[0]=this[0],e[1]=this[4],e[2]=this[8],e[3]=this[12],e[4]=this[1],e[5]=this[5],e[6]=this[9],e[7]=this[13],e[8]=this[2],e[9]=this[6],e[10]=this[10],e[11]=this[14],e[12]=this[3],e[13]=this[7],e[14]=this[11],e[15]=this[15],e}identity(){return this.copy(WUe)}fromObject(e){return this.check()}fromQuaternion(e){return NUe(this,e),this.check()}frustum(e){const{left:n,right:r,bottom:i,top:s,near:o=o2,far:a=a2}=e;return a===1/0?KUe(this,n,r,i,s,o):DUe(this,n,r,i,s,o,a),this.check()}lookAt(e){const{eye:n,center:r=[0,0,0],up:i=[0,1,0]}=e;return $Ue(this,n,r,i),this.check()}ortho(e){const{left:n,right:r,bottom:i,top:s,near:o=o2,far:a=a2}=e;return zUe(this,n,r,i,s,o,a),this.check()}orthographic(e){const{fovy:n=HUe,aspect:r=VUe,focalDistance:i=1,near:s=o2,far:o=a2}=e;ej(n);const a=n/2,l=i*Math.tan(a),c=l*r;return this.ortho({left:-c,right:c,bottom:-l,top:l,near:s,far:o})}perspective(e){const{fovy:n=45*Math.PI/180,aspect:r=1,near:i=.1,far:s=500}=e;return ej(n),FUe(this,n,r,i,s),this.check()}determinant(){return LUe(this)}getScale(e=[-0,-0,-0]){return e[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),e[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),e[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),e}getTranslation(e=[-0,-0,-0]){return e[0]=this[12],e[1]=this[13],e[2]=this[14],e}getRotation(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),i=1/r[0],s=1/r[1],o=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=0,e[4]=this[4]*i,e[5]=this[5]*s,e[6]=this[6]*o,e[7]=0,e[8]=this[8]*i,e[9]=this[9]*s,e[10]=this[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}getRotationMatrix3(e,n){e=e||[-0,-0,-0,-0,-0,-0,-0,-0,-0],n=n||[-0,-0,-0];const r=this.getScale(n),i=1/r[0],s=1/r[1],o=1/r[2];return e[0]=this[0]*i,e[1]=this[1]*s,e[2]=this[2]*o,e[3]=this[4]*i,e[4]=this[5]*s,e[5]=this[6]*o,e[6]=this[8]*i,e[7]=this[9]*s,e[8]=this[10]*o,e}transpose(){return MUe(this,this),this.check()}invert(){return WL(this,this),this.check()}multiplyLeft(e){return Kh(this,e,this),this.check()}multiplyRight(e){return Kh(this,this,e),this.check()}rotateX(e){return PQ(this,this,e),this.check()}rotateY(e){return kUe(this,this,e),this.check()}rotateZ(e){return IQ(this,this,e),this.check()}rotateXYZ(e){return this.rotateX(e[0]).rotateY(e[1]).rotateZ(e[2])}rotateAxis(e,n){return OUe(this,this,e,n),this.check()}scale(e){return TD(this,this,Array.isArray(e)?e:[e,e,e]),this.check()}translate(e){return cT(this,this,e),this.check()}transform(e,n){return e.length===4?(n=e_(n||[-0,-0,-0,-0],e,this),i2(n,4),n):this.transformAsPoint(e,n)}transformAsPoint(e,n){const{length:r}=e;let i;switch(r){case 2:i=pUe(n||[-0,-0],e,this);break;case 3:i=RQ(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return i2(i,e.length),i}transformAsVector(e,n){let r;switch(e.length){case 2:r=mUe(n||[-0,-0],e,this);break;case 3:r=AQ(n||[-0,-0,-0],e,this);break;default:throw new Error("Illegal vector")}return i2(r,e.length),r}transformPoint(e,n){return this.transformAsPoint(e,n)}transformVector(e,n){return this.transformAsPoint(e,n)}transformDirection(e,n){return this.transformAsVector(e,n)}makeRotationX(e){return this.identity().rotateX(e)}makeTranslation(e,n,r){return this.identity().translate([e,n,r])}}let Rx,Px;function XUe(){return Rx||(Rx=new Yl([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(Rx)),Rx}function YUe(){return Px||(Px=new Yl,Object.freeze(Px)),Px}function ej(t){if(t>Math.PI*2)throw Error("expected radians")}function KUe(t,e,n,r,i,s){const o=2*s/(n-e),a=2*s/(i-r),l=(n+e)/(n-e),c=(i+r)/(i-r),u=-1,d=-1,h=-2*s;return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=l,t[9]=c,t[10]=u,t[11]=d,t[12]=0,t[13]=0,t[14]=h,t[15]=0,t}const tj=`#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))

struct AmbientLight {
 vec3 color;
};

struct PointLight {
 vec3 color;
 vec3 position;
 vec3 attenuation;
};

struct DirectionalLight {
  vec3 color;
  vec3 direction;
};

uniform AmbientLight lighting_uAmbientLight;
uniform PointLight lighting_uPointLight[MAX_LIGHTS];
uniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];
uniform int lighting_uPointLightCount;
uniform int lighting_uDirectionalLightCount;

uniform bool lighting_uEnabled;

float getPointLightAttenuation(PointLight pointLight, float distance) {
  return pointLight.attenuation.x
       + pointLight.attenuation.y * distance
       + pointLight.attenuation.z * distance * distance;
}

#endif
`,qUe={lightSources:{}};function l2(){let{color:t=[0,0,0],intensity:e=1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t.map(n=>n*e/255)}function ZUe(t){let{ambientLight:e,pointLights:n=[],directionalLights:r=[]}=t;const i={};return e?i["lighting_uAmbientLight.color"]=l2(e):i["lighting_uAmbientLight.color"]=[0,0,0],n.forEach((s,o)=>{i["lighting_uPointLight[".concat(o,"].color")]=l2(s),i["lighting_uPointLight[".concat(o,"].position")]=s.position,i["lighting_uPointLight[".concat(o,"].attenuation")]=s.attenuation||[1,0,0]}),i.lighting_uPointLightCount=n.length,r.forEach((s,o)=>{i["lighting_uDirectionalLight[".concat(o,"].color")]=l2(s),i["lighting_uDirectionalLight[".concat(o,"].direction")]=s.direction}),i.lighting_uDirectionalLightCount=r.length,i}function MQ(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:qUe;if("lightSources"in t){const{ambientLight:e,pointLights:n,directionalLights:r}=t.lightSources||{};return e||n&&n.length>0||r&&r.length>0?Object.assign({},ZUe({ambientLight:e,pointLights:n,directionalLights:r}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in t){const e={pointLights:[],directionalLights:[]};for(const n of t.lights||[])switch(n.type){case"ambient":e.ambientLight=n;break;case"directional":e.directionalLights.push(n);break;case"point":e.pointLights.push(n);break}return MQ({lightSources:e})}return{}}const QUe={name:"lights",vs:tj,fs:tj,getUniforms:MQ,defines:{MAX_LIGHTS:3}},JUe=new Uint8Array([0,255,255,255]),eze={pickingSelectedColor:null,pickingHighlightColor:JUe,pickingActive:!1,pickingAttribute:!1};function tze(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:eze;const e={};if(t.pickingSelectedColor!==void 0)if(!t.pickingSelectedColor)e.picking_uSelectedColorValid=0;else{const n=t.pickingSelectedColor.slice(0,3);e.picking_uSelectedColorValid=1,e.picking_uSelectedColor=n}if(t.pickingHighlightColor){const n=Array.from(t.pickingHighlightColor,r=>r/255);Number.isFinite(n[3])||(n[3]=1),e.picking_uHighlightColor=n}return t.pickingActive!==void 0&&(e.picking_uActive=!!t.pickingActive,e.picking_uAttribute=!!t.pickingAttribute),e}const nze=`uniform bool picking_uActive;
uniform bool picking_uAttribute;
uniform vec3 picking_uSelectedColor;
uniform bool picking_uSelectedColorValid;

out vec4 picking_vRGBcolor_Avalid;

const float COLOR_SCALE = 1. / 255.;

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.001;
}

bool isVertexPicked(vec3 vertexColor) {
  return
    picking_uSelectedColorValid &&
    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));
}

void picking_setPickingColor(vec3 pickingColor) {
  if (picking_uActive) {
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!picking_uAttribute) {
      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;
    }
  } else {
    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.r = value;
  }
}
void picking_setPickingAttribute(vec2 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}
void picking_setPickingAttribute(vec3 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,rze=`uniform bool picking_uActive;
uniform vec3 picking_uSelectedColor;
uniform vec4 picking_uHighlightColor;

in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
  if (picking_uActive) {
    return color;
  }
  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    float highLightAlpha = picking_uHighlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}
vec4 picking_filterPickingColor(vec4 color) {
  if (picking_uActive) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}
vec4 picking_filterColor(vec4 color) {
  vec4 highightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highightColor);
}

`,ize={name:"picking",vs:nze,fs:rze,getUniforms:tze},sze=`
uniform float lighting_uAmbient;
uniform float lighting_uDiffuse;
uniform float lighting_uShininess;
uniform vec3  lighting_uSpecularColor;

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {
    vec3 halfway_direction = normalize(light_direction + view_direction);
    float lambertian = dot(light_direction, normal_worldspace);
    float specular = 0.0;
    if (lambertian > 0.0) {
      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);
      specular = pow(specular_angle, lighting_uShininess);
    }
    lambertian = max(lambertian, 0.0);
    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;
}

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = surfaceColor;

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);
    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}

vec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = vec3(0, 0, 0);
  vec3 surfaceColor = vec3(0, 0, 0);

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}
`,oze={};function aze(t){const{ambient:e=.35,diffuse:n=.6,shininess:r=32,specularColor:i=[30,30,30]}=t;return{lighting_uAmbient:e,lighting_uDiffuse:n,lighting_uShininess:r,lighting_uSpecularColor:i.map(s=>s/255)}}function lze(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:oze;if(!("material"in t))return{};const{material:e}=t;return e?aze(e):{lighting_uEnabled:!1}}const cze={name:"gouraud-lighting",dependencies:[QUe],vs:sze,defines:{LIGHTING_VERTEX:1},getUniforms:lze},uze=`attribute float transform_elementID;
vec2 transform_getPixelSizeHalf(vec2 size) {
  return vec2(1.) / (2. * size);
}

vec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {
  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);
  float xIndex = transform_elementID - (yIndex * texSize[0]);
  return vec2(xIndex, yIndex);
}
vec2 transform_getTexCoord(vec2 size) {
  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);
  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);
  vec2 coord = indices / size + pixelSizeHalf;
  return coord;
}
vec2 transform_getPos(vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);
  return pos;
}
vec4 transform_getInput(sampler2D texSampler, vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec4 textureColor = texture2D(texSampler, texCoord);
  return textureColor;
}
`,dze={name:"transform",vs:uze,fs:null};class t_{static getDefaultProgramManager(e){return e.luma=e.luma||{},e.luma.defaultProgramManager=e.luma.defaultProgramManager||new t_(e),e.luma.defaultProgramManager}constructor(e){this.gl=e,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(e){this._defaultModules.find(n=>n.name===e.name)||this._defaultModules.push(e),this.stateHash++}removeDefaultModule(e){const n=typeof e=="string"?e:e.name;this._defaultModules=this._defaultModules.filter(r=>r.name!==n),this.stateHash++}addShaderHook(e,n){n&&(e=Object.assign(n,{hook:e})),this._hookFunctions.push(e),this.stateHash++}get(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{vs:n="",fs:r="",defines:i={},inject:s={},varyings:o=[],bufferMode:a=35981,transpileToGLSL100:l=!1}=e,c=this._getModuleList(e.modules),u=this._getHash(n),d=this._getHash(r),h=c.map(b=>this._getHash(b.name)).sort(),f=o.map(b=>this._getHash(b)),p=Object.keys(i).sort(),m=Object.keys(s).sort(),_=[],y=[];for(const b of p)_.push(this._getHash(b)),_.push(this._getHash(i[b]));for(const b of m)y.push(this._getHash(b)),y.push(this._getHash(s[b]));const x="".concat(u,"/").concat(d,"D").concat(_.join("/"),"M").concat(h.join("/"),"I").concat(y.join("/"),"V").concat(f.join("/"),"H").concat(this.stateHash,"B").concat(a).concat(l?"T":"");if(!this._programCache[x]){const b=V5e(this.gl,{vs:n,fs:r,modules:c,inject:s,defines:i,hookFunctions:this._hookFunctions,transpileToGLSL100:l});this._programCache[x]=new mQ(this.gl,{hash:x,vs:b.vs,fs:b.fs,varyings:o,bufferMode:a}),this._getUniforms[x]=b.getUniforms||(E=>{}),this._useCounts[x]=0}return this._useCounts[x]++,this._programCache[x]}getUniforms(e){return this._getUniforms[e.hash]||null}release(e){const n=e.hash;this._useCounts[n]--,this._useCounts[n]===0&&(this._programCache[n].delete(),delete this._programCache[n],delete this._getUniforms[n],delete this._useCounts[n])}_getHash(e){return this._hashes[e]===void 0&&(this._hashes[e]=this._hashCounter++),this._hashes[e]}_getModuleList(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const n=new Array(this._defaultModules.length+e.length),r={};let i=0;for(let s=0,o=this._defaultModules.length;s<o;++s){const a=this._defaultModules[s],l=a.name;n[i++]=a,r[l]=!0}for(let s=0,o=e.length;s<o;++s){const a=e[s],l=a.name;r[l]||(n[i++]=a,r[l]=!0)}return n.length=i,n}}const hze={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function fze(t,e,n){const r={};let i=e.indices;for(const s in e.attributes){const o=e.attributes[s],a=pze(s,n);if(s==="indices")i=o;else if(o.constant)r[a]=o.value;else{const l=o.value,c={...o};delete c.value,r[a]=[new kn(t,l),c],mze(s,c)}}if(i){const s=i.value||i;pt(s instanceof Uint16Array||s instanceof Uint32Array,'attribute array for "indices" must be of integer type');const o={size:1,isIndexed:i.isIndexed===void 0?!0:i.isIndexed};r.indices=[new kn(t,{data:s,target:34963}),o]}return r}function pze(t,e){const{attributeMap:n=hze}=e||{};return n&&n[t]||t}function mze(t,e){let n;switch(t){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":n="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":n="vectors";break}switch(n){case"vectors":e.size=e.size||3;break;case"uvs":e.size=e.size||2;break}pt(Number.isFinite(e.size),"attribute ".concat(t," needs size"))}const Cp=2,gze=1e4,vze="Model needs drawMode and vertexCount",nj=()=>{},yze={};class s1{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{id:r=Cd("model")}=n;pt(_C(e)),this.id=r,this.gl=e,this.id=n.id||Cd("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(n)}initialize(e){this.props={},this.programManager=e.programManager||t_.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:n=null,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=e;this.programProps={program:n,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(e.moduleSettings))),this.drawMode=e.drawMode!==void 0?e.drawMode:4,this.vertexCount=e.vertexCount||0,this.geometryBuffers={},this.isInstanced=e.isInstanced||e.instanced||e.instanceCount>0,this._setModelProps(e),this.geometry={},pt(this.drawMode!==void 0&&Number.isFinite(this.vertexCount),vze)}setProps(e){this._setModelProps(e)}delete(){for(const e in this._attributes)this._attributes[e]!==this.attributes[e]&&this._attributes[e].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(e){const{program:n,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=e;this.programProps={program:n,vs:r,fs:i,modules:s,defines:o,inject:a,varyings:l,bufferMode:c,transpileToGLSL100:u},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(e){return this.drawMode=e,this}setVertexCount(e){return pt(Number.isFinite(e)),this.vertexCount=e,this}setInstanceCount(e){return pt(Number.isFinite(e)),this.instanceCount=e,this}setGeometry(e){return this.drawMode=e.drawMode,this.vertexCount=e.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=fze(this.gl,e),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(og(e))return this;const n={};for(const r in e){const i=e[r];n[r]=i.getValue?i.getValue():i}return this.vertexArray.setAttributes(n),this}setUniforms(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.assign(this.uniforms,e),this}getModuleUniforms(e){this._checkProgram();const n=this.programManager.getUniforms(this.program);return n?n(e):{}}updateModuleSettings(e){const n=this.getModuleUniforms(e||{});return this.setUniforms(n)}clear(e){return _D(this.program.gl,e),this}draw(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._checkProgram();const{moduleSettings:n=null,framebuffer:r,uniforms:i={},attributes:s={},transformFeedback:o=this.transformFeedback,parameters:a={},vertexArray:l=this.vertexArray}=e;this.setAttributes(s),this.updateModuleSettings(n),this.setUniforms(i);let c;Rt.priority>=Cp&&(c=this._logDrawCallStart(Cp));const u=this.vertexArray.getDrawParams(),{isIndexed:d=u.isIndexed,indexType:h=u.indexType,indexOffset:f=u.indexOffset,vertexArrayInstanced:p=u.isInstanced}=this.props;p&&!this.isInstanced&&Rt.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:m,instanceCount:_}=this,{onBeforeRender:y=nj,onAfterRender:x=nj}=this.props;y(),this.program.setUniforms(this.uniforms);const b=this.program.draw(Object.assign(yze,e,{logPriority:c,uniforms:null,framebuffer:r,parameters:a,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:l,transformFeedback:o,isIndexed:d,indexType:h,isInstanced:m,instanceCount:_,offset:d?f:0}));return x(),Rt.priority>=Cp&&this._logDrawCallEnd(c,l,r),b}transform(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{discard:n=!0,feedbackBuffers:r,unbindModels:i=[]}=e;let{parameters:s}=e;r&&this._setFeedbackBuffers(r),n&&(s=Object.assign({},s,{35977:n})),i.forEach(o=>o.vertexArray.unbindBuffers());try{this.draw(Object.assign({},e,{parameters:s}))}finally{i.forEach(o=>o.vertexArray.bindBuffers())}return this}render(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Rt.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(e).draw()}_setModelProps(e){Object.assign(this.props,e),"uniforms"in e&&this.setUniforms(e.uniforms),"pickable"in e&&(this.pickable=e.pickable),"instanceCount"in e&&(this.instanceCount=e.instanceCount),"geometry"in e&&this.setGeometry(e.geometry),"attributes"in e&&this.setAttributes(e.attributes),"_feedbackBuffers"in e&&this._setFeedbackBuffers(e._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:n}=this.programProps;if(n)this._managedProgram=!1;else{const{vs:r,fs:i,modules:s,inject:o,defines:a,varyings:l,bufferMode:c,transpileToGLSL100:u}=this.programProps;n=this.programManager.get({vs:r,fs:i,modules:s,inject:o,defines:a,varyings:l,bufferMode:c,transpileToGLSL100:u}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}pt(n instanceof mQ,"Model needs a program"),this._programDirty=!1,n!==this.program&&(this.program=n,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new o5e(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const e in this.geometryBuffers){const n=this.geometryBuffers[e][0]||this.geometryBuffers[e];n instanceof kn&&n.delete()}}_setAnimationProps(e){this.animated&&pt(e,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(og(e))return this;const{gl:n}=this.program;return this.transformFeedback=this.transformFeedback||new gQ(n,{program:this.program}),this.transformFeedback.setBuffers(e),this}_logDrawCallStart(e){const n=e>3?0:gze;if(!(Date.now()-this.lastLogTime<n))return this.lastLogTime=Date.now(),Rt.group(Cp,">>> DRAWING MODEL ".concat(this.id),{collapsed:Rt.level<=2})(),e}_logDrawCallEnd(e,n,r,i){if(e===void 0)return;const s=c5e({vertexArray:n,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:o,unusedTable:a,unusedCount:l}=$$({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r)}),{table:c,count:u}=$$({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,r),undefinedOnly:!0});u>0&&Rt.log("MISSING UNIFORMS",Object.keys(c))(),l>0&&Rt.log("UNUSED UNIFORMS",Object.keys(a))();const d=d5e(this.vertexArray.configuration);Rt.table(e,s)(),Rt.table(e,o)(),Rt.table(e+1,d)(),i&&i.log({logLevel:Cp,message:"Rendered to ".concat(i.id)}),Rt.groupEnd(Cp)()}}class _ze{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}setupResources(e){for(const n of this.bindings)this._setupTransformFeedback(n,e)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyings:n}=this;return n.length>0&&(e=Object.assign({},e,{varyings:n})),e}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this.bindings[this.currentIndex],{sourceBuffers:r,transformFeedback:i}=n;return{attributes:Object.assign({},r,e.attributes),transformFeedback:i}}swap(){return this.feedbackMap?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e)}getBuffer(e){const{feedbackBuffers:n}=this.bindings[this.currentIndex],r=e?n[e]:null;return r?r instanceof kn?r:r.buffer:null}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyingName:n}=e,r=this.getBuffer(n);return r?r.getData():null}delete(){for(const e in this.resources)this.resources[e].delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(e),this.varyings=e.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&pt(pn(this.gl))}_getFeedbackBuffers(e){const{sourceBuffers:n={}}=e,r={};if(this.bindings[this.currentIndex]&&Object.assign(r,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const i in this.feedbackMap){const s=this.feedbackMap[i];i in n&&(r[s]=i)}Object.assign(r,e.feedbackBuffers);for(const i in r){const s=r[i];if(typeof s=="string"){const o=n[s],{byteLength:a,usage:l,accessor:c}=o;r[i]=this._createNewBuffer(i,{byteLength:a,usage:l,accessor:c})}}return r}_setupBuffers(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n=null}=e;Object.assign(this.feedbackMap,e.feedbackMap);const r=this._getFeedbackBuffers(e);this._updateBindings({sourceBuffers:n,feedbackBuffers:r})}_setupTransformFeedback(e,n){let{model:r}=n;const{program:i}=r;e.transformFeedback=new gQ(this.gl,{program:i,buffers:e.feedbackBuffers})}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this.feedbackMap){const{sourceBuffers:n,feedbackBuffers:r}=this._swapBuffers(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:n,feedbackBuffers:r})}}_updateBinding(e,n){return e?(Object.assign(e.sourceBuffers,n.sourceBuffers),Object.assign(e.feedbackBuffers,n.feedbackBuffers),e.transformFeedback&&e.transformFeedback.setBuffers(e.feedbackBuffers),e):{sourceBuffers:Object.assign({},n.sourceBuffers),feedbackBuffers:Object.assign({},n.feedbackBuffers)}}_swapBuffers(e){if(!this.feedbackMap)return null;const n=Object.assign({},e.sourceBuffers),r=Object.assign({},e.feedbackBuffers);for(const i in this.feedbackMap){const s=this.feedbackMap[i];n[i]=e.feedbackBuffers[s],r[s]=e.sourceBuffers[i],pt(r[s]instanceof kn)}return{sourceBuffers:n,feedbackBuffers:r}}_createNewBuffer(e,n){const r=new kn(this.gl,n);return this.resources[e]&&this.resources[e].delete(),this.resources[e]=r,r}_getNextIndex(){return(this.currentIndex+1)%2}}const bze="transform_uSampler_",uT="transform_uSize_",rj="transform_position";function xze(t){let{vs:e,sourceTextureMap:n,targetTextureVarying:r,targetTexture:i}=t,o=Object.keys(n).length,a=null;const l={};let c=e,u={};if(o>0||r){const d=c.split(`
`),h=d.slice();if(d.forEach((f,p,m)=>{if(o>0){const _=Cze(f,n);if(_){const{updatedLine:y,inject:x}=_;h[p]=y,u=GL([u,x]),Object.assign(l,_.samplerTextureMap),o--}}r&&!a&&(a=Sze(f,r))}),r){pt(i);const f="".concat(uT).concat(r),p="uniform vec2 ".concat(f,`;
`),m="     vec2 ".concat(rj," = transform_getPos(").concat(f,`);
     gl_Position = vec4(`).concat(rj,`, 0, 1.);
`);u=GL([u,{"vs:#decl":p,"vs:#main-start":m}])}c=h.join(`
`)}return{vs:c,targetTextureType:a,inject:u,samplerTextureMap:l}}function Eze(t){let{sourceTextureMap:e,targetTextureVarying:n,targetTexture:r}=t;const i={};let s,o;n&&({width:s,height:o}=r,i["".concat(uT).concat(n)]=[s,o]);for(const a in e)({width:s,height:o}=e[a]),i["".concat(uT).concat(a)]=[s,o];return i}function wze(t){return wQ(t,["attribute","in"])}function Tze(t){const e="".concat(bze).concat(t),n="".concat(uT).concat(t),r="  uniform sampler2D ".concat(e,`;
  uniform vec2 `).concat(n,";");return{samplerName:e,sizeName:n,uniformDeclerations:r}}function Sze(t,e){const n=wQ(t,["varying","out"]);return n&&n.name===e?n.type:null}function Cze(t,e){const n={},r=wze(t);if(!r)return null;const{type:i,name:s}=r;if(s&&e[s]){const o="// ".concat(t," => Replaced by Transform with a sampler"),{samplerName:a,sizeName:l,uniformDeclerations:c}=Tze(s),u=eUe(i),d="  ".concat(i," ").concat(s," = transform_getInput(").concat(a,", ").concat(l,").").concat(u,`;
`);return n[a]=s,{updatedLine:o,inject:{"vs:#decl":c,"vs:#main-start":d},samplerTextureMap:n}}return null}const Aze={10241:9728,10240:9728,10242:33071,10243:33071},Rze="transform_output";class Pze{constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(n),Object.seal(this)}updateModelProps(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=this._processVertexShader(e);return Object.assign({},e,n)}getDrawOptions(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n,sourceTextures:r,framebuffer:i,targetTexture:s}=this.bindings[this.currentIndex],o=Object.assign({},n,e.attributes),a=Object.assign({},e.uniforms),l=Object.assign({},e.parameters);let c=e.discard;if(this.hasSourceTextures||this.hasTargetTexture){o.transform_elementID=this.elementIDBuffer;for(const d in this.samplerTextureMap){const h=this.samplerTextureMap[d];a[d]=r[h]}this._setSourceTextureParameters();const u=Eze({sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:s});Object.assign(a,u)}return this.hasTargetTexture&&(c=!1,l.viewport=[0,0,i.width,i.height]),{attributes:o,framebuffer:i,uniforms:a,discard:c,parameters:l}}swap(){return this._swapTexture?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupTextures(e)}getTargetTexture(){const{targetTexture:e}=this.bindings[this.currentIndex];return e}getData(){let{packed:e=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{framebuffer:n}=this.bindings[this.currentIndex],r=xC(n);if(!e)return r;const i=r.constructor,s=tUe(this.targetTextureType),o=new i(r.length*s/4);let a=0;for(let l=0;l<r.length;l+=4)for(let c=0;c<s;c++)o[a++]=r[l+c];return o}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{_targetTextureVarying:n,_swapTexture:r}=e;this._swapTexture=r,this.targetTextureVarying=n,this.hasTargetTexture=n,this._setupTextures(e)}_createTargetTexture(e){const{sourceTextures:n,textureOrReference:r}=e;if(r instanceof Ja)return r;const i=n[r];return i?(this._targetRefTexName=r,this._createNewTexture(i)):null}_setupTextures(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:n,_sourceTextures:r={},_targetTexture:i}=e,s=this._createTargetTexture({sourceTextures:r,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||r&&Object.keys(r).length>0,this._updateBindings({sourceBuffers:n,sourceTextures:r,targetTexture:s}),"elementCount"in e&&this._updateElementIDBuffer(e.elementCount)}_updateElementIDBuffer(e){if(typeof e!="number"||this.elementCount>=e)return;const n=new Float32Array(e);n.forEach((r,i,s)=>{s[i]=i}),this.elementIDBuffer?this.elementIDBuffer.setData({data:n}):this.elementIDBuffer=new kn(this.gl,{data:n,accessor:{size:1}}),this.elementCount=e}_updateBindings(e){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],e),this._swapTexture){const{sourceTextures:n,targetTexture:r}=this._swapTextures(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:n,targetTexture:r})}}_updateBinding(e,n){const{sourceBuffers:r,sourceTextures:i,targetTexture:s}=n;if(e||(e={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(e.sourceTextures,i),Object.assign(e.sourceBuffers,r),s){e.targetTexture=s;const{width:o,height:a}=s,{framebuffer:l}=e;l?(l.update({attachments:{36064:s},resizeAttachments:!1}),l.resize({width:o,height:a})):e.framebuffer=new pi(this.gl,{id:"transform-framebuffer",width:o,height:a,attachments:{36064:s}})}return e}_setSourceTextureParameters(){const e=this.currentIndex,{sourceTextures:n}=this.bindings[e];for(const r in n)n[r].setParameters(Aze)}_swapTextures(e){if(!this._swapTexture)return null;const n=Object.assign({},e.sourceTextures);n[this._swapTexture]=e.targetTexture;const r=e.sourceTextures[this._swapTexture];return{sourceTextures:n,targetTexture:r}}_createNewTexture(e){const n=KFe(e,{parameters:{10241:9728,10240:9728,10242:33071,10243:33071},pixelStore:{37440:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=n,n}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceTextures:n,targetTexture:r}=this.bindings[this.currentIndex],{vs:i,uniforms:s,targetTextureType:o,inject:a,samplerTextureMap:l}=xze({vs:e.vs,sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:r}),c=GL([e.inject||{},a]);this.targetTextureType=o,this.samplerTextureMap=l;const u=e._fs||TQ({version:fQ(i),input:this.targetTextureVarying,inputType:o,output:Rze}),d=this.hasSourceTextures||this.targetTextureVarying?[dze].concat(e.modules||[]):e.modules;return{vs:i,fs:u,modules:d,uniforms:s,inject:c}}}class SD{static isSupported(e){return pn(e)}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=e,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(n),Object.seal(this)}delete(){const{model:e,bufferTransform:n,textureTransform:r}=this;e&&e.delete(),n&&n.delete(),r&&r.delete()}run(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{clearRenderTarget:n=!0}=e,r=this._updateDrawOptions(e);n&&r.framebuffer&&r.framebuffer.clear({color:!0}),this.model.transform(r)}swap(){let e=!1;const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)e=e||r.swap();pt(e,"Nothing to swap")}getBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(e)}getData(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n){const i=r.getData(e);if(i)return i}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};"elementCount"in e&&this.model.setVertexCount(e.elementCount);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const r of n)r.update(e)}_initialize(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{gl:n}=this;this._buildResourceTransforms(n,e),e=this._updateModelProps(e),this.model=new s1(n,Object.assign({},e,{fs:e.fs||TQ({version:fQ(e.vs)}),id:e.id||"transform-model",drawMode:e.drawMode||0,vertexCount:e.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(e){let n=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of r)n=i.updateModelProps(n);return n}_buildResourceTransforms(e,n){Ize(n)&&(this.bufferTransform=new _ze(e,n)),Mze(n)&&(this.textureTransform=new Pze(e,n)),pt(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(e){let n=Object.assign({},e);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of r)n=Object.assign(n,i.getDrawOptions(n));return n}}function Ize(t){return!!(!og(t.feedbackBuffers)||!og(t.feedbackMap)||t.varyings&&t.varyings.length>0)}function Mze(t){return!!(!og(t._sourceTextures)||t._targetTexture||t._targetTextureVarying)}const ij={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class CD{static get DRAW_MODE(){return ij}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:n=Cd("geometry"),drawMode:r=ij.TRIANGLES,attributes:i={},indices:s=null,vertexCount:o=null}=e;this.id=n,this.drawMode=r|0,this.attributes={},this.userData={},this._setAttributes(i,s),this.vertexCount=o||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(e){return"Geometry ".concat(this.id," attribute ").concat(e)}_setAttributes(e,n){n&&(this.indices=ArrayBuffer.isView(n)?{value:n,size:1}:n);for(const r in e){let i=e[r];i=ArrayBuffer.isView(i)?{value:i}:i,pt(ArrayBuffer.isView(i.value),"".concat(this._print(r),": must be typed array or object with value as typed array")),(r==="POSITION"||r==="positions")&&!i.size&&(i.size=3),r==="indices"?(pt(!this.indices),this.indices=i):this.attributes[r]=i}return this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(e,n){if(n)return n.value.length;let r=1/0;for(const i in e){const s=e[i],{value:o,size:a,constant:l}=s;!l&&o&&a>=1&&(r=Math.min(r,o.length/a))}return pt(Number.isFinite(r)),r}}let Lze=1,Oze=1;class LQ{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(e){const{delay:n=0,duration:r=Number.POSITIVE_INFINITY,rate:i=1,repeat:s=1}=e,o=Lze++,a={time:0,delay:n,duration:r,rate:i,repeat:s};return this._setChannelTime(a,this.time),this.channels.set(o,a),o}removeChannel(e){this.channels.delete(e);for(const[n,r]of this.animations)r.channel===e&&this.detachAnimation(n)}isFinished(e){const n=this.channels.get(e);return n===void 0?!1:this.time>=n.delay+n.duration*n.repeat}getTime(e){if(e===void 0)return this.time;const n=this.channels.get(e);return n===void 0?-1:n.time}setTime(e){this.time=Math.max(0,e);const n=this.channels.values();for(const i of n)this._setChannelTime(i,this.time);const r=this.animations.values();for(const i of r){const{animation:s,channel:o}=i;s.setTime(this.getTime(o))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(e,n){const r=Oze++;return this.animations.set(r,{animation:e,channel:n}),e.setTime(this.getTime(n)),r}detachAnimation(e){this.animations.delete(e)}update(e){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=e),this.setTime(this.time+(e-this.lastEngineTime)),this.lastEngineTime=e)}_setChannelTime(e,n){const r=n-e.delay,i=e.duration*e.repeat;r>=i?e.time=e.duration*e.rate:(e.time=Math.max(0,r)%e.duration,e.time*=e.rate)}}const kze=[255,255,255],Nze=1;let Dze=0;class Bze{constructor(e={}){W(this,"id",void 0),W(this,"color",void 0),W(this,"intensity",void 0),W(this,"type","ambient");const{color:n=kze}=e,{intensity:r=Nze}=e;this.id=e.id||"ambient-".concat(Dze++),this.color=n,this.intensity=r}}const Fze=[255,255,255],Uze=1,zze=[0,0,-1];let $ze=0;class sj{constructor(e={}){W(this,"id",void 0),W(this,"color",void 0),W(this,"intensity",void 0),W(this,"type","directional"),W(this,"direction",void 0),W(this,"shadow",void 0);const{color:n=Fze}=e,{intensity:r=Uze}=e,{direction:i=zze}=e,{_shadow:s=!1}=e;this.id=e.id||"directional-".concat($ze++),this.color=n,this.intensity=r,this.type="directional",this.direction=new Xl(i).normalize().toArray(),this.shadow=s}getProjectedLight(e){return this}}class jze{constructor(e,n={id:"pass"}){W(this,"id",void 0),W(this,"gl",void 0),W(this,"props",void 0);const{id:r}=n;this.id=r,this.gl=e,this.props={...n}}setProps(e){Object.assign(this.props,e)}render(e){}cleanup(){}}class AD extends jze{constructor(...e){super(...e),W(this,"_lastRenderIndex",-1)}render(e){const n=this.gl;return Gc(n,{framebuffer:e.target}),this._drawLayers(e)}_drawLayers(e){const{target:n,moduleParameters:r,viewports:i,views:s,onViewportActive:o,clearStack:a=!0,clearCanvas:l=!0}=e;e.pass=e.pass||"unknown";const c=this.gl;l&&Hze(c,n),a&&(this._lastRenderIndex=-1);const u=[];for(const d of i){const h=s&&s[d.id];o==null||o(d);const f=this._getDrawLayerParams(d,e),p=d.subViewports||[d];for(const m of p){const _=this._drawLayersInViewport(c,{target:n,moduleParameters:r,viewport:m,view:h,pass:e.pass,layers:e.layers},f);u.push(_)}}return u}_getDrawLayerParams(e,{layers:n,pass:r,isPicking:i=!1,layerFilter:s,cullRect:o,effects:a,moduleParameters:l},c=!1){const u=[],d=OQ(this._lastRenderIndex+1),h={layer:n[0],viewport:e,isPicking:i,renderPass:r,cullRect:o},f={};for(let p=0;p<n.length;p++){const m=n[p],_=this._shouldDrawLayer(m,h,s,f),y={shouldDrawLayer:_};_&&!c&&(y.layerRenderIndex=d(m,_),y.moduleParameters=this._getModuleParameters(m,a,r,l),y.layerParameters=this.getLayerParameters(m,p,e)),u[p]=y}return u}_drawLayersInViewport(e,{layers:n,moduleParameters:r,pass:i,target:s,viewport:o,view:a},l){const c=Gze(e,{moduleParameters:r,target:s,viewport:o});if(a&&a.props.clear){const d=a.props.clear===!0?{color:!0,depth:!0}:a.props.clear;Ka(e,{scissorTest:!0,scissor:c},()=>_D(e,d))}const u={totalCount:n.length,visibleCount:0,compositeCount:0,pickableCount:0};Gc(e,{viewport:c});for(let d=0;d<n.length;d++){const h=n[d],{shouldDrawLayer:f,layerRenderIndex:p,moduleParameters:m,layerParameters:_}=l[d];if(f&&h.props.pickable&&u.pickableCount++,h.isComposite)u.compositeCount++;else if(f){u.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,p),m.viewport=o;try{h._drawLayer({moduleParameters:m,uniforms:{layerIndex:p},parameters:_})}catch(y){h.raiseError(y,"drawing ".concat(h," to ").concat(i))}}}return u}shouldDrawLayer(e){return!0}getModuleParameters(e,n){return null}getLayerParameters(e,n,r){return e.props.parameters}_shouldDrawLayer(e,n,r,i){if(!(e.props.visible&&this.shouldDrawLayer(e)))return!1;n.layer=e;let o=e.parent;for(;o;){if(!o.props.visible||!o.filterSubLayer(n))return!1;n.layer=o,o=o.parent}if(r){const a=n.layer.id;if(a in i||(i[a]=r(n)),!i[a])return!1}return e.activateViewport(n.viewport),!0}_getModuleParameters(e,n,r,i){var s;const o=Object.assign(Object.create(((s=e.internalState)===null||s===void 0?void 0:s.propsInTransition)||e.props),{autoWrapLongitude:e.wrapLongitude,viewport:e.context.viewport,mousePosition:e.context.mousePosition,pickingActive:0,devicePixelRatio:sg(this.gl)});if(n)for(const l of n){var a;Object.assign(o,(a=l.getModuleParameters)===null||a===void 0?void 0:a.call(l,e))}return Object.assign(o,this.getModuleParameters(e,n),i)}}function OQ(t=0,e={}){const n={},r=(i,s)=>{const o=i.props._offset,a=i.id,l=i.parent&&i.parent.id;let c;if(l&&!(l in e)&&r(i.parent,!1),l in n){const u=n[l]=n[l]||OQ(e[l],e);c=u(i,s),n[a]=u}else Number.isFinite(o)?(c=o+(e[l]||0),n[a]=null):c=t;return s&&c>=t&&(t=c+1),e[a]=c,c};return r}function Gze(t,{moduleParameters:e,target:n,viewport:r}){const i=n&&n.id!=="default-framebuffer",s=e&&e.devicePixelRatio||sg(t),o=i?n.height:t.drawingBufferHeight,a=r;return[a.x*s,o-(a.y+a.height)*s,a.width*s,a.height*s]}function Hze(t,e){const n=e?e.width:t.drawingBufferWidth,r=e?e.height:t.drawingBufferHeight;Gc(t,{viewport:[0,0,n,r]}),t.clear(16640)}class Vze extends AD{constructor(e,n){super(e,n),W(this,"shadowMap",void 0),W(this,"depthBuffer",void 0),W(this,"fbo",void 0),this.shadowMap=new Ja(e,{width:1,height:1,parameters:{10241:9729,10240:9729,10242:33071,10243:33071}}),this.depthBuffer=new im(e,{format:33189,width:1,height:1}),this.fbo=new pi(e,{id:"shadowmap",width:1,height:1,attachments:{36064:this.shadowMap,36096:this.depthBuffer}})}render(e){const n=this.fbo;Ka(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const r=e.viewports[0],i=sg(this.gl),s=r.width*i,o=r.height*i;(s!==n.width||o!==n.height)&&n.resize({width:s,height:o}),super.render({...e,target:n,pass:"shadow"})})}shouldDrawLayer(e){return e.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const kQ="#define SMOOTH_EDGE_RADIUS 0.5",Wze=`
`.concat(kQ,`

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`),Xze=`
`.concat(kQ,`

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`),Yze={name:"geometry",vs:Wze,fs:Xze},Kze=Object.keys(wn).map(t=>"const int COORDINATE_SYSTEM_".concat(t," = ").concat(wn[t],";")).join(""),qze=Object.keys(Ol).map(t=>"const int PROJECTION_MODE_".concat(t," = ").concat(Ol[t],";")).join(""),Zze=Object.keys(e1).map(t=>"const int UNIT_".concat(t.toUpperCase()," = ").concat(e1[t],";")).join(""),Qze="".concat(Kze,`
`).concat(qze,`
`).concat(Zze,`

uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;

const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0;
const float GLOBE_RADIUS = 256.0;
float project_size_at_latitude(float lat) {
  float y = clamp(lat, -89.9, 89.9);
  return 1.0 / cos(radians(y));
}

float project_size() {
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
    project_uPseudoMeters == false) {
    
    if (geometry.position.w == 0.0) {
      return project_size_at_latitude(geometry.worldPosition.y);
    }
  
    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    float y2 = y * y;
    float y4 = y2 * y2;
    float y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}

float project_size_at_latitude(float meters, float lat) {
  return meters * project_uCommonUnitsPerMeter.z * project_size_at_latitude(lat);
}
float project_size(float meters) {
  return meters * project_uCommonUnitsPerMeter.z * project_size();
}

vec2 project_size(vec2 meters) {
  return meters * project_uCommonUnitsPerMeter.xy * project_size();
}

vec3 project_size(vec3 meters) {
  return meters * project_uCommonUnitsPerMeter * project_size();
}

vec4 project_size(vec4 meters) {
  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}
mat3 project_get_orientation_matrix(vec3 up) {
  vec3 uz = normalize(up);
  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
  vec3 uy = cross(uz, ux);
  return mat3(ux, uy, uz);
}

bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    transform = project_get_orientation_matrix(commonPosition);
    return true;
  }
  return false;
}
vec3 project_normal(vec3 vector) {
  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
  mat3 rotation;
  if (project_needs_rotation(geometry.position.xyz, rotation)) {
    n = rotation * n;
  }
  return n;
}

vec4 project_offset_(vec4 offset) {
  float dy = offset.y;
  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}
vec2 project_mercator_(vec2 lnglat) {
  float x = lnglat.x;
  if (project_uWrapLongitude) {
    x = mod(x + 180., 360.0) - 180.;
  }
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

vec3 project_globe_(vec3 lnglatz) {
  float lambda = radians(lnglatz.x);
  float phi = radians(lnglatz.y);
  float cosPhi = cos(phi);
  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;

  return vec3(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}
vec4 project_position(vec4 position, vec3 position64Low) {
  vec4 position_world = project_uModelMatrix * position;
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_mercator_(position_world.xy),
        project_size_at_latitude(position_world.z, position_world.y),
        position_world.w
      );
    }
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world.xyz += project_uCoordinateOrigin;
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
        return vec4(
          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
          project_size(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    position_world.xyz -= project_uCoordinateOrigin;
  }
  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_LOW);
}

vec3 project_position(vec3 position, vec3 position64Low) {
  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
  return projected_position.xyz;
}

vec3 project_position(vec3 position) {
  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

vec2 project_position(vec2 position) {
  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  return viewProjectionMatrix * position + center;
}
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
  return offset * project_uFocalDistance;
}

float project_size_to_pixel(float meters) {
  return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
  if (unit == UNIT_METERS) return project_size_to_pixel(size);
  if (unit == UNIT_COMMON) return size * project_uScale;
  return size;
}
float project_pixel_size(float pixels) {
  return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
  return pixels / project_uScale;
}
`);function Jze(t,e){if(t===e)return!0;if(Array.isArray(t)){const n=t.length;if(!e||e.length!==n)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}return!1}function n_(t){let e={},n;return r=>{for(const i in r)if(!Jze(r[i],e[i])){n=t(r),e=r;break}return n}}const oj=[0,0,0,0],e8e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],NQ=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t8e=[0,0,0],DQ=[0,0,0],n8e=n_(s8e);function BQ(t,e,n=DQ){n.length<3&&(n=[n[0],n[1],0]);let r=n,i,s=!0;switch(e===wn.LNGLAT_OFFSETS||e===wn.METER_OFFSETS?i=n:i=t.isGeospatial?[Math.fround(t.longitude),Math.fround(t.latitude),0]:null,t.projectionMode){case Ol.WEB_MERCATOR:(e===wn.LNGLAT||e===wn.CARTESIAN)&&(i=[0,0,0],s=!1);break;case Ol.WEB_MERCATOR_AUTO_OFFSET:e===wn.LNGLAT?r=i:e===wn.CARTESIAN&&(r=[Math.fround(t.center[0]),Math.fround(t.center[1]),0],i=t.unprojectPosition(r),r[0]-=n[0],r[1]-=n[1],r[2]-=n[2]);break;case Ol.IDENTITY:r=t.position.map(Math.fround),r[2]=r[2]||0;break;case Ol.GLOBE:s=!1,i=null;break;default:s=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:r,offsetMode:s}}function r8e(t,e,n){const{viewMatrixUncentered:r,projectionMatrix:i}=t;let{viewMatrix:s,viewProjectionMatrix:o}=t,a=oj,l=oj,c=t.cameraPosition;const{geospatialOrigin:u,shaderCoordinateOrigin:d,offsetMode:h}=BQ(t,e,n);return h&&(l=t.projectPosition(u||d),c=[c[0]-l[0],c[1]-l[1],c[2]-l[2]],l[3]=1,a=e_([],l,o),s=r||s,o=Kh([],i,s),o=Kh([],o,e8e)),{viewMatrix:s,viewProjectionMatrix:o,projectionCenter:a,originCommon:l,cameraPosCommon:c,shaderCoordinateOrigin:d,geospatialOrigin:u}}function i8e({viewport:t,devicePixelRatio:e=1,modelMatrix:n=null,coordinateSystem:r=wn.DEFAULT,coordinateOrigin:i=DQ,autoWrapLongitude:s=!1}){r===wn.DEFAULT&&(r=t.isGeospatial?wn.LNGLAT:wn.CARTESIAN);const o=n8e({viewport:t,devicePixelRatio:e,coordinateSystem:r,coordinateOrigin:i});return o.project_uWrapLongitude=s,o.project_uModelMatrix=n||NQ,o}function s8e({viewport:t,devicePixelRatio:e,coordinateSystem:n,coordinateOrigin:r}){const{projectionCenter:i,viewProjectionMatrix:s,originCommon:o,cameraPosCommon:a,shaderCoordinateOrigin:l,geospatialOrigin:c}=r8e(t,n,r),u=t.getDistanceScales(),d=[t.width*e,t.height*e],h=e_([],[0,0,-t.focalDistance,1],t.projectionMatrix)[3]||1,f={project_uCoordinateSystem:n,project_uProjectionMode:t.projectionMode,project_uCoordinateOrigin:l,project_uCommonOrigin:o.slice(0,3),project_uCenter:i,project_uPseudoMeters:!!t._pseudoMeters,project_uViewportSize:d,project_uDevicePixelRatio:e,project_uFocalDistance:h,project_uCommonUnitsPerMeter:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit:u.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:t8e,project_uScale:t.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:s,project_uModelMatrix:NQ,project_uCameraPosition:a};if(c){const p=t.getDistanceScales(c);switch(n){case wn.METER_OFFSETS:f.project_uCommonUnitsPerWorldUnit=p.unitsPerMeter,f.project_uCommonUnitsPerWorldUnit2=p.unitsPerMeter2;break;case wn.LNGLAT:case wn.LNGLAT_OFFSETS:t._pseudoMeters||(f.project_uCommonUnitsPerMeter=p.unitsPerMeter),f.project_uCommonUnitsPerWorldUnit=p.unitsPerDegree,f.project_uCommonUnitsPerWorldUnit2=p.unitsPerDegree2;break;case wn.CARTESIAN:f.project_uCommonUnitsPerWorldUnit=[1,1,p.unitsPerMeter[2]],f.project_uCommonUnitsPerWorldUnit2=[0,0,p.unitsPerMeter2[2]];break}}return f}const o8e={};function a8e(t=o8e){return"viewport"in t?i8e(t):{}}const RD={name:"project",dependencies:[iUe,Yze],vs:Qze,getUniforms:a8e};function l8e(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Cm(t,e){const n=e_([],e,t);return GUe(n,n,1/n[3]),n}function aj(t,e){const n=t%e;return n<0?e+n:n}function YL(t,e,n){return t<e?e:t>n?n:t}function c8e(t){return Math.log(t)*Math.LOG2E}const PD=Math.log2||c8e;function Hc(t,e){if(!t)throw new Error(e||"@math.gl/web-mercator: assertion failed.")}const ja=Math.PI,FQ=ja/4,aa=ja/180,KL=180/ja,dg=512,dT=4003e4,Ix=85.051129,u8e=1.5;function d8e(t){return PD(t)}function hT(t){const[e,n]=t;Hc(Number.isFinite(e)),Hc(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");const r=e*aa,i=n*aa,s=dg*(r+ja)/(2*ja),o=dg*(ja+Math.log(Math.tan(FQ+i*.5)))/(2*ja);return[s,o]}function hg(t){const[e,n]=t,r=e/dg*(2*ja)-ja,i=2*(Math.atan(Math.exp(n/dg*(2*ja)-ja))-FQ);return[r*KL,i*KL]}function h8e(t){const{latitude:e}=t;Hc(Number.isFinite(e));const n=Math.cos(e*aa);return d8e(dT*n)-9}function c2(t){const e=Math.cos(t*aa);return dg/dT/e}function qL(t){const{latitude:e,longitude:n,highPrecision:r=!1}=t;Hc(Number.isFinite(e)&&Number.isFinite(n));const i=dg,s=Math.cos(e*aa),o=i/360,a=o/s,l=i/dT/s,c={unitsPerMeter:[l,l,l],metersPerUnit:[1/l,1/l,1/l],unitsPerDegree:[o,a,l],degreesPerUnit:[1/o,1/a,1/l]};if(r){const u=aa*Math.tan(e*aa)/s,d=o*u/2,h=i/dT*u,f=h/a*l;c.unitsPerDegree2=[0,d,h],c.unitsPerMeter2=[f,0,f]}return c}function UQ(t,e){const[n,r,i]=t,[s,o,a]=e,{unitsPerMeter:l,unitsPerMeter2:c}=qL({longitude:n,latitude:r,highPrecision:!0}),u=hT(t);u[0]+=s*(l[0]+c[0]*o),u[1]+=o*(l[1]+c[1]*o);const d=hg(u),h=(i||0)+(a||0);return Number.isFinite(i)||Number.isFinite(a)?[d[0],d[1],h]:d}function f8e(t){const{height:e,pitch:n,bearing:r,altitude:i,scale:s,center:o}=t,a=l8e();cT(a,a,[0,0,-i]),PQ(a,a,-n*aa),IQ(a,a,r*aa);const l=s/e;return TD(a,a,[l,l,l]),o&&cT(a,a,_Ue([],o)),a}function p8e(t){const{width:e,height:n,altitude:r,pitch:i=0,offset:s,center:o,scale:a,nearZMultiplier:l=1,farZMultiplier:c=1}=t;let{fovy:u=fT(u8e)}=t;r!==void 0&&(u=fT(r));const d=u*aa,h=i*aa,f=zQ(u);let p=f;o&&(p+=o[2]*a/Math.cos(h)/n);const m=d*(.5+(s?s[1]:0)/n),_=Math.sin(m)*p/Math.sin(YL(Math.PI/2-h-m,.01,Math.PI-.01)),y=Math.sin(h)*_+p,x=p*10,b=Math.min(y*c,x);return{fov:d,aspect:e/n,focalDistance:f,near:l,far:b}}function fT(t){return 2*Math.atan(.5/t)*KL}function zQ(t){return .5/Math.tan(.5*t*aa)}function $Q(t,e){const[n,r,i=0]=t;return Hc(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(i)),Cm(e,[n,r,i,1])}function ID(t,e,n=0){const[r,i,s]=t;if(Hc(Number.isFinite(r)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(s))return Cm(e,[r,i,s,1]);const o=Cm(e,[r,i,0,1]),a=Cm(e,[r,i,1,1]),l=o[2],c=a[2],u=l===c?0:((n||0)-l)/(c-l);return CQ([],o,a,u)}function m8e(t){const{width:e,height:n,bounds:r,minExtent:i=0,maxZoom:s=24,offset:o=[0,0]}=t,[[a,l],[c,u]]=r,d=g8e(t.padding),h=hT([a,YL(u,-Ix,Ix)]),f=hT([c,YL(l,-Ix,Ix)]),p=[Math.max(Math.abs(f[0]-h[0]),i),Math.max(Math.abs(f[1]-h[1]),i)],m=[e-d.left-d.right-Math.abs(o[0])*2,n-d.top-d.bottom-Math.abs(o[1])*2];Hc(m[0]>0&&m[1]>0);const _=m[0]/p[0],y=m[1]/p[1],x=(d.right-d.left)/2/_,b=(d.top-d.bottom)/2/y,E=[(f[0]+h[0])/2+x,(f[1]+h[1])/2+b],w=hg(E),T=Math.min(s,PD(Math.abs(Math.min(_,y))));return Hc(Number.isFinite(T)),{longitude:w[0],latitude:w[1],zoom:T}}function g8e(t=0){return typeof t=="number"?{top:t,bottom:t,left:t,right:t}:(Hc(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}const lj=Math.PI/180;function v8e(t,e=0){const{width:n,height:r,unproject:i}=t,s={targetZ:e},o=i([0,r],s),a=i([n,r],s);let l,c;const u=t.fovy?.5*t.fovy*lj:Math.atan(.5/t.altitude),d=(90-t.pitch)*lj;return u>d-.01?(l=cj(t,0,e),c=cj(t,n,e)):(l=i([0,0],s),c=i([n,0],s)),[o,a,c,l]}function cj(t,e,n){const{pixelUnprojectionMatrix:r}=t,i=Cm(r,[e,0,1,1]),s=Cm(r,[e,t.height,1,1]),a=(n*t.distanceScales.unitsPerMeter[2]-i[2])/(s[2]-i[2]),l=CQ([],i,s,a),c=hg(l);return c.push(n),c}const uj=512;function y8e(t){const{width:e,height:n,pitch:r=0}=t;let{longitude:i,latitude:s,zoom:o,bearing:a=0}=t;(i<-180||i>180)&&(i=aj(i+180,360)-180),(a<-180||a>180)&&(a=aj(a+180,360)-180);const l=PD(n/uj);if(o<=l)o=l,s=0;else{const c=n/2/Math.pow(2,o),u=hg([0,c])[1];if(s<u)s=u;else{const d=hg([0,uj-c])[1];s>d&&(s=d)}}return{width:e,height:n,longitude:i,latitude:s,zoom:o,pitch:r,bearing:a}}const _8e=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,b8e=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture2D(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,x8e=n_(C8e),E8e=n_(A8e),w8e=[0,0,0,1],T8e=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function S8e(t,e){const[n,r,i]=t,s=ID([n,r,i],e);return Number.isFinite(i)?s:[s[0],s[1],0]}function C8e({viewport:t,center:e}){return new Yl(t.viewProjectionMatrix).invert().transform(e)}function A8e({viewport:t,shadowMatrices:e}){const n=[],r=t.pixelUnprojectionMatrix,i=t.isGeospatial?void 0:1,s=[[0,0,i],[t.width,0,i],[0,t.height,i],[t.width,t.height,i],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(o=>S8e(o,r));for(const o of e){const a=o.clone().translate(new Xl(t.center).negate()),l=s.map(u=>a.transform(u)),c=new Yl().ortho({left:Math.min(...l.map(u=>u[0])),right:Math.max(...l.map(u=>u[0])),bottom:Math.min(...l.map(u=>u[1])),top:Math.max(...l.map(u=>u[1])),near:Math.min(...l.map(u=>-u[2])),far:Math.max(...l.map(u=>-u[2]))});n.push(c.multiplyRight(o))}return n}function R8e(t,e){const{shadowEnabled:n=!0}=t;if(!n||!t.shadowMatrices||!t.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const r={shadow_uDrawShadowMap:!!t.drawToShadowMap,shadow_uUseShadowMap:t.shadowMaps?t.shadowMaps.length>0:!1,shadow_uColor:t.shadowColor||w8e,shadow_uLightId:t.shadowLightId||0,shadow_uLightCount:t.shadowMatrices.length},i=x8e({viewport:t.viewport,center:e.project_uCenter}),s=[],o=E8e({shadowMatrices:t.shadowMatrices,viewport:t.viewport}).slice();for(let a=0;a<t.shadowMatrices.length;a++){const l=o[a],c=l.clone().translate(new Xl(t.viewport.center).negate());e.project_uCoordinateSystem===wn.LNGLAT&&e.project_uProjectionMode===Ol.WEB_MERCATOR?(o[a]=c,s[a]=i):(o[a]=l.clone().multiplyRight(T8e),s[a]=c.transform(i))}for(let a=0;a<o.length;a++)r["shadow_uViewProjectionMatrices[".concat(a,"]")]=o[a],r["shadow_uProjectCenters[".concat(a,"]")]=s[a],t.shadowMaps&&t.shadowMaps.length>0?r["shadow_uShadowMap".concat(a)]=t.shadowMaps[a]:r["shadow_uShadowMap".concat(a)]=t.dummyShadowMap;return r}const u2={name:"shadow",dependencies:[RD],vs:_8e,fs:b8e,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(t={},e={})=>"viewport"in t&&(t.drawToShadowMap||t.shadowMaps&&t.shadowMaps.length>0)?R8e(t,e):{}},P8e={color:[255,255,255],intensity:1},dj=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],I8e=[0,0,0,200/255];class jQ{constructor(e={}){W(this,"id","lighting-effect"),W(this,"props",void 0),W(this,"shadowColor",I8e),W(this,"shadow",void 0),W(this,"ambientLight",void 0),W(this,"directionalLights",void 0),W(this,"pointLights",void 0),W(this,"shadowPasses",[]),W(this,"shadowMaps",[]),W(this,"dummyShadowMap",null),W(this,"programManager",void 0),W(this,"shadowMatrices",void 0),this.setProps(e)}setProps(e){this.ambientLight=null,this.directionalLights=[],this.pointLights=[];for(const n in e){const r=e[n];switch(r.type){case"ambient":this.ambientLight=r;break;case"directional":this.directionalLights.push(r);break;case"point":this.pointLights.push(r);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(n=>n.shadow),this.props=e}preRender(e,{layers:n,layerFilter:r,viewports:i,onViewportActive:s,views:o}){if(this.shadow){this.shadowMatrices=this._calculateMatrices(),this.shadowPasses.length===0&&this._createShadowPasses(e),this.programManager||(this.programManager=t_.getDefaultProgramManager(e),u2&&this.programManager.addDefaultModule(u2)),this.dummyShadowMap||(this.dummyShadowMap=new Ja(e,{width:1,height:1}));for(let a=0;a<this.shadowPasses.length;a++)this.shadowPasses[a].render({layers:n,layerFilter:r,viewports:i,onViewportActive:s,views:o,moduleParameters:{shadowLightId:a,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(e){const n=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return n.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(r=>r.getProjectedLight({layer:e})),pointLights:this.pointLights.map(r=>r.getProjectedLight({layer:e}))},n}cleanup(){for(const e of this.shadowPasses)e.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(u2),this.programManager=null)}_calculateMatrices(){const e=[];for(const n of this.directionalLights){const r=new Yl().lookAt({eye:new Xl(n.direction).negate()});e.push(r)}return e}_createShadowPasses(e){for(let n=0;n<this.directionalLights.length;n++){const r=new Vze(e);this.shadowPasses[n]=r,this.shadowMaps[n]=r.shadowMap}}_applyDefaultLights(){const{ambientLight:e,pointLights:n,directionalLights:r}=this;!e&&n.length===0&&r.length===0&&(this.ambientLight=new Bze(P8e),this.directionalLights.push(new sj(dj[0]),new sj(dj[1])))}}class M8e{constructor(e={}){W(this,"_pool",[]),W(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(e)}setOptions(e){Object.assign(this.opts,e)}allocate(e,n,{size:r=1,type:i,padding:s=0,copy:o=!1,initialize:a=!1,maxCount:l}){const c=i||e&&e.constructor||Float32Array,u=n*r+s;if(ArrayBuffer.isView(e)){if(u<=e.length)return e;if(u*e.BYTES_PER_ELEMENT<=e.buffer.byteLength)return new c(e.buffer,0,u)}let d=1/0;l&&(d=l*r+s);const h=this._allocate(c,u,a,d);return e&&o?h.set(e):a||h.fill(0,0,4),this._release(e),h}release(e){this._release(e)}_allocate(e,n,r,i){let s=Math.max(Math.ceil(n*this.opts.overAlloc),1);s>i&&(s=i);const o=this._pool,a=e.BYTES_PER_ELEMENT*s,l=o.findIndex(c=>c.byteLength>=a);if(l>=0){const c=new e(o.splice(l,1)[0],0,s);return r&&c.fill(0),c}return new e(s)}_release(e){if(!ArrayBuffer.isView(e))return;const n=this._pool,{buffer:r}=e,{byteLength:i}=r,s=n.findIndex(o=>o.byteLength>=i);s<0?n.push(r):(s>0||n.length<this.opts.poolSize)&&n.splice(s,0,r),n.length>this.opts.poolSize&&n.shift()}}const fg=new M8e;function mv(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function L8e(t){return[t[12],t[13],t[14]]}function O8e(t){return{left:Ap(t[3]+t[0],t[7]+t[4],t[11]+t[8],t[15]+t[12]),right:Ap(t[3]-t[0],t[7]-t[4],t[11]-t[8],t[15]-t[12]),bottom:Ap(t[3]+t[1],t[7]+t[5],t[11]+t[9],t[15]+t[13]),top:Ap(t[3]-t[1],t[7]-t[5],t[11]-t[9],t[15]-t[13]),near:Ap(t[3]+t[2],t[7]+t[6],t[11]+t[10],t[15]+t[14]),far:Ap(t[3]-t[2],t[7]-t[6],t[11]-t[10],t[15]-t[14])}}const hj=new Xl;function Ap(t,e,n,r){hj.set(t,e,n);const i=hj.len();return{distance:r/i,normal:new Xl(-t/i,-e/i,-n/i)}}function k8e(t){return t-Math.fround(t)}let U0;function d2(t,e){const{size:n=1,startIndex:r=0}=e,i=e.endIndex!==void 0?e.endIndex:t.length,s=(i-r)/n;U0=fg.allocate(U0,s,{type:Float32Array,size:n*2});let o=r,a=0;for(;o<i;){for(let l=0;l<n;l++){const c=t[o++];U0[a+l]=c,U0[a+l+n]=k8e(c)}a+=n*2}return U0.subarray(0,s*n*2)}function N8e(t){let e=null,n=!1;for(const r of t)r&&(e?(n||(e=[[e[0][0],e[0][1]],[e[1][0],e[1][1]]],n=!0),e[0][0]=Math.min(e[0][0],r[0][0]),e[0][1]=Math.min(e[0][1],r[0][1]),e[1][0]=Math.max(e[1][0],r[1][0]),e[1][1]=Math.max(e[1][1],r[1][1])):e=r);return e}const D8e=Math.PI/180,B8e=mv(),fj=[0,0,0],F8e={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function U8e({width:t,height:e,orthographic:n,fovyRadians:r,focalDistance:i,padding:s,near:o,far:a}){const l=t/e,c=n?new Yl().orthographic({fovy:r,aspect:l,focalDistance:i,near:o,far:a}):new Yl().perspective({fovy:r,aspect:l,near:o,far:a});if(s){const{left:u=0,right:d=0,top:h=0,bottom:f=0}=s,p=qu((u+t-d)/2,0,t)-t/2,m=qu((h+e-f)/2,0,e)-e/2;c[8]-=p*2/t,c[9]+=m*2/e}return c}class Ng{constructor(e={}){W(this,"id",void 0),W(this,"x",void 0),W(this,"y",void 0),W(this,"width",void 0),W(this,"height",void 0),W(this,"padding",void 0),W(this,"isGeospatial",void 0),W(this,"zoom",void 0),W(this,"focalDistance",void 0),W(this,"position",void 0),W(this,"modelMatrix",void 0),W(this,"distanceScales",void 0),W(this,"scale",void 0),W(this,"center",void 0),W(this,"cameraPosition",void 0),W(this,"projectionMatrix",void 0),W(this,"viewMatrix",void 0),W(this,"viewMatrixUncentered",void 0),W(this,"viewMatrixInverse",void 0),W(this,"viewProjectionMatrix",void 0),W(this,"pixelProjectionMatrix",void 0),W(this,"pixelUnprojectionMatrix",void 0),W(this,"resolution",void 0),W(this,"_frustumPlanes",{}),this.id=e.id||this.constructor.displayName||"viewport",this.x=e.x||0,this.y=e.y||0,this.width=e.width||1,this.height=e.height||1,this.zoom=e.zoom||0,this.padding=e.padding,this.distanceScales=e.distanceScales||F8e,this.focalDistance=e.focalDistance||1,this.position=e.position||fj,this.modelMatrix=e.modelMatrix||null;const{longitude:n,latitude:r}=e;this.isGeospatial=Number.isFinite(r)&&Number.isFinite(n),this._initProps(e),this._initMatrices(e),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get subViewports(){return null}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Ol.WEB_MERCATOR:Ol.WEB_MERCATOR_AUTO_OFFSET:Ol.IDENTITY}equals(e){return e instanceof Ng?this===e?!0:e.width===this.width&&e.height===this.height&&e.scale===this.scale&&i1(e.projectionMatrix,this.projectionMatrix)&&i1(e.viewMatrix,this.viewMatrix):!1}project(e,{topLeft:n=!0}={}){const r=this.projectPosition(e),i=$Q(r,this.pixelProjectionMatrix),[s,o]=i,a=n?o:this.height-o;return e.length===2?[s,a]:[s,a,i[2]]}unproject(e,{topLeft:n=!0,targetZ:r}={}){const[i,s,o]=e,a=n?s:this.height-s,l=r&&r*this.distanceScales.unitsPerMeter[2],c=ID([i,a,o],this.pixelUnprojectionMatrix,l),[u,d,h]=this.unprojectPosition(c);return Number.isFinite(o)?[u,d,h]:Number.isFinite(r)?[u,d,r]:[u,d]}projectPosition(e){const[n,r]=this.projectFlat(e),i=(e[2]||0)*this.distanceScales.unitsPerMeter[2];return[n,r,i]}unprojectPosition(e){const[n,r]=this.unprojectFlat(e),i=(e[2]||0)*this.distanceScales.metersPerUnit[2];return[n,r,i]}projectFlat(e){if(this.isGeospatial){const n=hT(e);return n[1]=qu(n[1],-318,830),n}return e}unprojectFlat(e){return this.isGeospatial?hg(e):e}getBounds(e={}){const n={targetZ:e.z||0},r=this.unproject([0,0],n),i=this.unproject([this.width,0],n),s=this.unproject([0,this.height],n),o=this.unproject([this.width,this.height],n);return[Math.min(r[0],i[0],s[0],o[0]),Math.min(r[1],i[1],s[1],o[1]),Math.max(r[0],i[0],s[0],o[0]),Math.max(r[1],i[1],s[1],o[1])]}getDistanceScales(e){return e?qL({longitude:e[0],latitude:e[1],highPrecision:!0}):this.distanceScales}containsPixel({x:e,y:n,width:r=1,height:i=1}){return e<this.x+this.width&&this.x<e+r&&n<this.y+this.height&&this.y<n+i}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,O8e(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(e,n){return null}_initProps(e){const n=e.longitude,r=e.latitude;this.isGeospatial&&(Number.isFinite(e.zoom)||(this.zoom=h8e({latitude:r})+Math.log2(this.focalDistance)),this.distanceScales=e.distanceScales||qL({latitude:r,longitude:n}));const i=Math.pow(2,this.zoom);this.scale=i;const{position:s,modelMatrix:o}=e;let a=fj;if(s&&(a=o?new Yl(o).transformAsVector(s,[]):s),this.isGeospatial){const l=this.projectPosition([n,r,0]);this.center=new Xl(a).scale(this.distanceScales.unitsPerMeter).add(l)}else this.center=this.projectPosition(a)}_initMatrices(e){const{viewMatrix:n=B8e,projectionMatrix:r=null,orthographic:i=!1,fovyRadians:s,fovy:o=75,near:a=.1,far:l=1e3,padding:c=null,focalDistance:u=1}=e;this.viewMatrixUncentered=n,this.viewMatrix=new Yl().multiplyRight(n).translate(new Xl(this.center).negate()),this.projectionMatrix=r||U8e({width:this.width,height:this.height,orthographic:i,fovyRadians:s||o*D8e,focalDistance:u,padding:c,near:a,far:l});const d=mv();Kh(d,d,this.projectionMatrix),Kh(d,d,this.viewMatrix),this.viewProjectionMatrix=d,this.viewMatrixInverse=WL([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=L8e(this.viewMatrixInverse);const h=mv(),f=mv();TD(h,h,[this.width/2,-this.height/2,1]),cT(h,h,[1,-1,0]),Kh(f,h,this.viewProjectionMatrix),this.pixelProjectionMatrix=f,this.pixelUnprojectionMatrix=WL(mv(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||Yn.warn("Pixel project matrix not invertible")()}}W(Ng,"displayName","Viewport");class pg extends Ng{constructor(e={}){const{latitude:n=0,longitude:r=0,zoom:i=0,pitch:s=0,bearing:o=0,nearZMultiplier:a=.1,farZMultiplier:l=1.01,nearZ:c,farZ:u,orthographic:d=!1,projectionMatrix:h,repeat:f=!1,worldOffset:p=0,position:m,padding:_,legacyMeterSizes:y=!1}=e;let{width:x,height:b,altitude:E=1.5}=e;const w=Math.pow(2,i);x=x||1,b=b||1;let T,C=null;if(h)E=h[5]/2,T=fT(E);else{e.fovy?(T=e.fovy,E=zQ(T)):T=fT(E);let M;if(_){const{top:N=0,bottom:F=0}=_;M=[0,qu((N+b-F)/2,0,b)-b/2]}C=p8e({width:x,height:b,scale:w,center:m&&[0,0,m[2]*c2(n)],offset:M,pitch:s,fovy:T,nearZMultiplier:a,farZMultiplier:l}),Number.isFinite(c)&&(C.near=c),Number.isFinite(u)&&(C.far=u)}let P=f8e({height:b,pitch:s,bearing:o,scale:w,altitude:E});p&&(P=new Yl().translate([512*p,0,0]).multiplyLeft(P)),super({...e,width:x,height:b,viewMatrix:P,longitude:r,latitude:n,zoom:i,...C,fovy:T,focalDistance:E}),W(this,"longitude",void 0),W(this,"latitude",void 0),W(this,"pitch",void 0),W(this,"bearing",void 0),W(this,"altitude",void 0),W(this,"fovy",void 0),W(this,"orthographic",void 0),W(this,"_subViewports",void 0),W(this,"_pseudoMeters",void 0),this.latitude=n,this.longitude=r,this.zoom=i,this.pitch=s,this.bearing=o,this.altitude=E,this.fovy=T,this.orthographic=d,this._subViewports=f?[]:null,this._pseudoMeters=y,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const e=this.getBounds(),n=Math.floor((e[0]+180)/360),r=Math.ceil((e[2]-180)/360);for(let i=n;i<=r;i++){const s=i?new pg({...this,worldOffset:i}):this;this._subViewports.push(s)}}return this._subViewports}projectPosition(e){if(this._pseudoMeters)return super.projectPosition(e);const[n,r]=this.projectFlat(e),i=(e[2]||0)*c2(e[1]);return[n,r,i]}unprojectPosition(e){if(this._pseudoMeters)return super.unprojectPosition(e);const[n,r]=this.unprojectFlat(e),i=(e[2]||0)/c2(r);return[n,r,i]}addMetersToLngLat(e,n){return UQ(e,n)}panByPosition(e,n){const r=ID(n,this.pixelUnprojectionMatrix),i=this.projectFlat(e),s=J$([],i,fUe([],r)),o=J$([],this.center,s),[a,l]=this.unprojectFlat(o);return{longitude:a,latitude:l}}getBounds(e={}){const n=v8e(this,e.z||0);return[Math.min(n[0][0],n[1][0],n[2][0],n[3][0]),Math.min(n[0][1],n[1][1],n[2][1],n[3][1]),Math.max(n[0][0],n[1][0],n[2][0],n[3][0]),Math.max(n[0][1],n[1][1],n[2][1],n[3][1])]}fitBounds(e,n={}){const{width:r,height:i}=this,{longitude:s,latitude:o,zoom:a}=m8e({width:r,height:i,bounds:e,...n});return new pg({width:r,height:i,longitude:s,latitude:o,zoom:a})}}W(pg,"displayName","WebMercatorViewport");const pj=[0,0,0];function h2(t,e,n=!1){const r=e.projectPosition(t);if(n&&e instanceof pg){const[i,s,o=0]=t,a=e.getDistanceScales([i,s]);r[2]=o*a.unitsPerMeter[2]}return r}function z8e(t){const{viewport:e,modelMatrix:n,coordinateOrigin:r}=t;let{coordinateSystem:i,fromCoordinateSystem:s,fromCoordinateOrigin:o}=t;return i===wn.DEFAULT&&(i=e.isGeospatial?wn.LNGLAT:wn.CARTESIAN),s===void 0&&(s=i),o===void 0&&(o=r),{viewport:e,coordinateSystem:i,coordinateOrigin:r,modelMatrix:n,fromCoordinateSystem:s,fromCoordinateOrigin:o}}function GQ(t,{viewport:e,modelMatrix:n,coordinateSystem:r,coordinateOrigin:i,offsetMode:s}){let[o,a,l=0]=t;switch(n&&([o,a,l]=e_([],[o,a,l,1],n)),r){case wn.LNGLAT:return h2([o,a,l],e,s);case wn.LNGLAT_OFFSETS:return h2([o+i[0],a+i[1],l+(i[2]||0)],e,s);case wn.METER_OFFSETS:return h2(UQ(i,[o,a,l]),e,s);case wn.CARTESIAN:default:return e.isGeospatial?[o+i[0],a+i[1],l+i[2]]:e.projectPosition([o,a,l])}}function $8e(t,e){const{viewport:n,coordinateSystem:r,coordinateOrigin:i,modelMatrix:s,fromCoordinateSystem:o,fromCoordinateOrigin:a}=z8e(e),{autoOffset:l=!0}=e,{geospatialOrigin:c=pj,shaderCoordinateOrigin:u=pj,offsetMode:d=!1}=l?BQ(n,r,i):{},h=GQ(t,{viewport:n,modelMatrix:s,coordinateSystem:o,coordinateOrigin:a,offsetMode:d});if(d){const f=n.projectPosition(c||u);RUe(h,h,f)}return h}const mj={blendFunc:[1,0,32771,0],blendEquation:32774};class HQ extends AD{constructor(...e){super(...e),W(this,"pickZ",void 0),W(this,"_colorEncoderState",null)}render(e){return"pickingFBO"in e?this._drawPickingBuffer(e):super.render(e)}_drawPickingBuffer({layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:s,pickingFBO:o,deviceRect:{x:a,y:l,width:c,height:u},cullRect:d,effects:h,pass:f="picking",pickZ:p,moduleParameters:m}){const _=this.gl;this.pickZ=p;const y=this._resetColorEncoder(p),x=Ka(_,{scissorTest:!0,scissor:[a,l,c,u],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...mj,blend:!p},()=>super.render({target:o,layers:e,layerFilter:n,views:r,viewports:i,onViewportActive:s,cullRect:d,effects:h==null?void 0:h.filter(E=>E.useInPicking),pass:f,isPicking:!0,moduleParameters:m}));return this._colorEncoderState=null,{decodePickingColor:y&&G8e.bind(null,y),stats:x}}shouldDrawLayer(e){const{pickable:n,operation:r}=e.props;return n&&r.includes("draw")||r.includes("terrain")||r.includes("mask")}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(e,n,r){const i={...e.props.parameters},{pickable:s,operation:o}=e.props;return this._colorEncoderState?s&&o.includes("draw")&&(Object.assign(i,mj),i.blend=!0,i.blendColor=j8e(this._colorEncoderState,e,r)):i.blend=!1,o.includes("terrain")&&(i.blend=!1),i}_resetColorEncoder(e){return this._colorEncoderState=e?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function j8e(t,e,n){const{byLayer:r,byAlpha:i}=t;let s,o=r.get(e);return o?(o.viewports.push(n),s=o.a):(s=r.size+1,s<=255?(o={a:s,layer:e,viewports:[n]},r.set(e,o),i[s]=o):(Yn.warn("Too many pickable layers, only picking the first 255")(),s=0)),[0,0,0,s/255]}function G8e(t,e){const n=t.byAlpha[e[3]];return n&&{pickedLayer:n.layer,pickedViewports:n.viewports,pickedObjectIndex:n.layer.decodePickingColor(e)}}const Fp={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},pT=Symbol.for("component"),qh=Symbol.for("propTypes"),f2=Symbol.for("deprecatedProps"),Am=Symbol.for("asyncPropDefaults"),Ef=Symbol.for("asyncPropOriginal"),Zu=Symbol.for("asyncPropResolved");function VQ(t,e=()=>!0){return Array.isArray(t)?WQ(t,e,[]):e(t)?[t]:[]}function WQ(t,e,n){let r=-1;for(;++r<t.length;){const i=t[r];Array.isArray(i)?WQ(i,e,n):e(i)&&n.push(i)}return n}function H8e({target:t,source:e,start:n=0,count:r=1}){const i=e.length,s=r*i;let o=0;for(let a=n;o<i;o++)t[a++]=e[o];for(;o<s;)o<s-o?(t.copyWithin(n+o,n,n+o),o*=2):(t.copyWithin(n+o,n,n+s-o),o=s);return t}class V8e{constructor(e,n,r){W(this,"id",void 0),W(this,"context",void 0),W(this,"isLoaded",void 0),W(this,"persistent",void 0),W(this,"_loadCount",0),W(this,"_subscribers",new Set),W(this,"_data",void 0),W(this,"_loader",void 0),W(this,"_error",void 0),W(this,"_content",void 0),this.id=e,this.context=r,this.setData(n)}subscribe(e){this._subscribers.add(e)}unsubscribe(e){this._subscribers.delete(e)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(e,n){if(e===this._data&&!n)return;this._data=e;const r=++this._loadCount;let i=e;typeof e=="string"&&(i=kL(e)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then(s=>{this._loadCount===r&&(this.isLoaded=!0,this._error=void 0,this._content=s)}).catch(s=>{this._loadCount===r&&(this.isLoaded=!0,this._error=s||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=e);for(const s of this._subscribers)s.onChange(this.getData())}}class W8e{constructor({gl:e,protocol:n}){W(this,"protocol",void 0),W(this,"_context",void 0),W(this,"_resources",void 0),W(this,"_consumers",void 0),W(this,"_pruneRequest",void 0),this.protocol=n||"resource://",this._context={gl:e,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(e){return e.startsWith(this.protocol)?!0:e in this._resources}add({resourceId:e,data:n,forceUpdate:r=!1,persistent:i=!0}){let s=this._resources[e];s?s.setData(n,r):(s=new V8e(e,n,this._context),this._resources[e]=s),s.persistent=i}remove(e){const n=this._resources[e];n&&(n.delete(),delete this._resources[e])}unsubscribe({consumerId:e}){const n=this._consumers[e];if(n){for(const r in n){const i=n[r],s=this._resources[i.resourceId];s&&s.unsubscribe(i)}delete this._consumers[e],this.prune()}}subscribe({resourceId:e,onChange:n,consumerId:r,requestId:i="default"}){const{_resources:s,protocol:o}=this;e.startsWith(o)&&(e=e.replace(o,""),s[e]||this.add({resourceId:e,data:null,persistent:!1}));const a=s[e];if(this._track(r,i,a,n),a)return a.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const e in this._resources)this._resources[e].delete()}_track(e,n,r,i){const s=this._consumers,o=s[e]=s[e]||{},a=o[n]||{},l=a.resourceId&&this._resources[a.resourceId];l&&(l.unsubscribe(a),this.prune()),r&&(o[n]=a,a.onChange=i,a.resourceId=r.id,r.subscribe(a))}_prune(){this._pruneRequest=null;for(const e of Object.keys(this._resources)){const n=this._resources[e];!n.persistent&&!n.inUse()&&(n.delete(),delete this._resources[e])}}}const X8e=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,MD={name:"project32",dependencies:[RD],vs:X8e},LD={inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:#decl":`
uniform bool picking_uAttribute;
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}},...ize},Y8e=[RD],K8e=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function q8e(t){const e=t_.getDefaultProgramManager(t);for(const n of Y8e)e.addDefaultModule(n);for(const n of K8e)e.addShaderHook(n);return e}const Z8e="layerManager.setLayers",Q8e="layerManager.activateViewport";class J8e{constructor(e,{deck:n,stats:r,viewport:i,timeline:s}={}){W(this,"layers",void 0),W(this,"context",void 0),W(this,"resourceManager",void 0),W(this,"_lastRenderedLayers",[]),W(this,"_needsRedraw",!1),W(this,"_needsUpdate",!1),W(this,"_nextLayers",null),W(this,"_debug",!1),W(this,"activateViewport",o=>{Cs(Q8e,this,o),o&&(this.context.viewport=o)}),this.layers=[],this.resourceManager=new W8e({gl:e,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:e,deck:n,programManager:e&&q8e(e),stats:r||new vD({id:"deck.gl"}),viewport:i||new Ng({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:s||new LQ,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const e of this.layers)this._finalizeLayer(e)}needsRedraw(e={clearRedrawFlags:!1}){let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);for(const r of this.layers){const i=r.getNeedsRedraw(e);n=n||i}return n}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(e){this._needsRedraw=this._needsRedraw||e}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e}getLayers({layerIds:e}={}){return e?this.layers.filter(n=>e.find(r=>n.id.indexOf(r)===0)):this.layers}setProps(e){"debug"in e&&(this._debug=e.debug),"userData"in e&&(this.context.userData=e.userData),"layers"in e&&(this._nextLayers=e.layers),"onError"in e&&(this.context.onError=e.onError)}setLayers(e,n){Cs(Z8e,this,n,e),this._lastRenderedLayers=e;const r=VQ(e,Boolean);for(const i of r)i.context=this.context;this._updateLayers(this.layers,r)}updateLayers(){const e=this.needsUpdate();e&&(this.setNeedsRedraw("updating layers: ".concat(e)),this.setLayers(this._nextLayers||this._lastRenderedLayers,e)),this._nextLayers=null}_handleError(e,n,r){r.raiseError(n,"".concat(e," of ").concat(r))}_updateLayers(e,n){const r={};for(const o of e)r[o.id]?Yn.warn("Multiple old layers with same id ".concat(o.id))():r[o.id]=o;const i=[];this._updateSublayersRecursively(n,r,i),this._finalizeOldLayers(r);let s=!1;for(const o of i)if(o.hasUniformTransition()){s="Uniform transition in ".concat(o);break}this._needsUpdate=s,this.layers=i}_updateSublayersRecursively(e,n,r){for(const i of e){i.context=this.context;const s=n[i.id];s===null&&Yn.warn("Multiple new layers with same id ".concat(i.id))(),n[i.id]=null;let o=null;try{this._debug&&s!==i&&i.validateProps(),s?(this._transferLayerState(s,i),this._updateLayer(i)):this._initializeLayer(i),r.push(i),o=i.isComposite?i.getSubLayers():null}catch(a){this._handleError("matching",a,i)}o&&this._updateSublayersRecursively(o,n,r)}}_finalizeOldLayers(e){for(const n in e){const r=e[n];r&&this._finalizeLayer(r)}}_initializeLayer(e){try{e._initialize(),e.lifecycle=Fp.INITIALIZED}catch(n){this._handleError("initialization",n,e)}}_transferLayerState(e,n){n._transferState(e),n.lifecycle=Fp.MATCHED,n!==e&&(e.lifecycle=Fp.AWAITING_GC)}_updateLayer(e){try{e._update()}catch(n){this._handleError("update",n,e)}}_finalizeLayer(e){this._needsRedraw=this._needsRedraw||"finalized ".concat(e),e.lifecycle=Fp.AWAITING_FINALIZATION;try{e._finalize(),e.lifecycle=Fp.FINALIZED}catch(n){this._handleError("finalization",n,e)}}}function kl(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!kl(t[r],e[r],n-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(const s of r)if(!e.hasOwnProperty(s)||!kl(t[s],e[s],n-1))return!1;return!0}return!1}class e6e{constructor(e){W(this,"width",void 0),W(this,"height",void 0),W(this,"views",void 0),W(this,"viewState",void 0),W(this,"controllers",void 0),W(this,"timeline",void 0),W(this,"_viewports",void 0),W(this,"_viewportMap",void 0),W(this,"_isUpdating",void 0),W(this,"_needsRedraw",void 0),W(this,"_needsUpdate",void 0),W(this,"_eventManager",void 0),W(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=e.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=e.eventManager,this._eventCallbacks={onViewStateChange:e.onViewStateChange,onInteractionStateChange:e.onInteractionStateChange},Object.seal(this),this.setProps(e)}finalize(){for(const e in this.controllers){const n=this.controllers[e];n&&n.finalize()}this.controllers={}}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}setNeedsUpdate(e){this._needsUpdate=this._needsUpdate||e,this._needsRedraw=this._needsRedraw||e}updateViewStates(){for(const e in this.controllers){const n=this.controllers[e];n&&n.updateTransition()}}getViewports(e){return e?this._viewports.filter(n=>n.containsPixel(e)):this._viewports}getViews(){const e={};return this.views.forEach(n=>{e[n.id]=n}),e}getView(e){return this.views.find(n=>n.id===e)}getViewState(e){const n=typeof e=="string"?this.getView(e):e,r=n&&this.viewState[n.getViewStateId()]||this.viewState;return n?n.filterViewState(r):r}getViewport(e){return this._viewportMap[e]}unproject(e,n){const r=this.getViewports(),i={x:e[0],y:e[1]};for(let s=r.length-1;s>=0;--s){const o=r[s];if(o.containsPixel(i)){const a=e.slice();return a[0]-=o.x,a[1]-=o.y,o.unproject(a,n)}}return null}setProps(e){e.views&&this._setViews(e.views),e.viewState&&this._setViewState(e.viewState),("width"in e||"height"in e)&&this._setSize(e.width,e.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(e,n){(e!==this.width||n!==this.height)&&(this.width=e,this.height=n,this.setNeedsUpdate("Size changed"))}_setViews(e){e=VQ(e,Boolean),this._diffViews(e,this.views)&&this.setNeedsUpdate("views changed"),this.views=e}_setViewState(e){e?(!kl(e,this.viewState,3)&&this.setNeedsUpdate("viewState changed"),this.viewState=e):Yn.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(e,n){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...n,viewId:e})}_createController(e,n){const r=n.type;return new r({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,n.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:s=>{var o;return(o=this.getView(e.id))===null||o===void 0?void 0:o.makeViewport({viewState:s,width:this.width,height:this.height})}})}_updateController(e,n,r,i){const s=e.controller;if(s&&r){const o={...n,...s,id:e.id,x:r.x,y:r.y,width:r.width,height:r.height};return(!i||i.constructor!==s.type)&&(i=this._createController(e,o)),i&&i.setProps(o),i}return null}_rebuildViewports(){const{views:e}=this,n=this.controllers;this._viewports=[],this.controllers={};let r=!1;for(let i=e.length;i--;){const s=e[i],o=this.getViewState(s),a=s.makeViewport({viewState:o,width:this.width,height:this.height});let l=n[s.id];const c=!!s.controller;c&&!l&&(r=!0),(r||!c)&&l&&(l.finalize(),l=null),this.controllers[s.id]=this._updateController(s,o,a,l),a&&this._viewports.unshift(a)}for(const i in n){const s=n[i];s&&!this.controllers[i]&&s.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(e=>{e.id&&(this._viewportMap[e.id]=this._viewportMap[e.id]||e)})}_diffViews(e,n){return e.length!==n.length?!0:e.some((r,i)=>!e[i].equals(n[i]))}}const t6e=/([0-9]+\.?[0-9]*)(%|px)/;function Eu(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":const e=t6e.exec(t);if(e&&e.length>=3){const n=e[2]==="%",r=parseFloat(e[1]);return{position:n?r/100:r,relative:n}}default:throw new Error("Could not parse position string ".concat(t))}}function wu(t,e){return t.relative?Math.round(t.position*e):t.position}function Ai(t,e){if(!t)throw new Error(e||"deck.gl: assertion failed.")}class mg{constructor(e){W(this,"id",void 0),W(this,"viewportInstance",void 0),W(this,"_x",void 0),W(this,"_y",void 0),W(this,"_width",void 0),W(this,"_height",void 0),W(this,"_padding",void 0),W(this,"props",void 0);const{id:n,x:r=0,y:i=0,width:s="100%",height:o="100%",padding:a=null,viewportInstance:l}=e||{};Ai(!l||l instanceof Ng),this.viewportInstance=l,this.id=n||this.constructor.displayName||"view",this.props={...e,id:this.id},this._x=Eu(r),this._y=Eu(i),this._width=Eu(s),this._height=Eu(o),this._padding=a&&{left:Eu(a.left||0),right:Eu(a.right||0),top:Eu(a.top||0),bottom:Eu(a.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(e){return this===e?!0:this.viewportInstance?e.viewportInstance?this.viewportInstance.equals(e.viewportInstance):!1:this.ViewportType===e.ViewportType&&kl(this.props,e.props,2)}makeViewport({width:e,height:n,viewState:r}){if(this.viewportInstance)return this.viewportInstance;r=this.filterViewState(r);const i=this.getDimensions({width:e,height:n});return!i.height||!i.width?null:new this.ViewportType({...r,...this.props,...i})}getViewStateId(){const{viewState:e}=this.props;return typeof e=="string"?e:(e==null?void 0:e.id)||this.id}filterViewState(e){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const n={...e};for(const r in this.props.viewState)r!=="id"&&(n[r]=this.props.viewState[r]);return n}return e}getDimensions({width:e,height:n}){const r={x:wu(this._x,e),y:wu(this._y,n),width:wu(this._width,e),height:wu(this._height,n)};return this._padding&&(r.padding={left:wu(this._padding.left,e),top:wu(this._padding.top,n),right:wu(this._padding.right,e),bottom:wu(this._padding.bottom,n)}),r}get controller(){const e=this.props.controller;return e?e===!0?{type:this.ControllerType}:typeof e=="function"?{type:e}:{type:this.ControllerType,...e}:null}}class r_{constructor(e){W(this,"_inProgress",void 0),W(this,"_handle",void 0),W(this,"_timeline",void 0),W(this,"time",void 0),W(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=e,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(e){var n,r;this.cancel(),this.settings=e,this._inProgress=!0,(n=(r=this.settings).onStart)===null||n===void 0||n.call(r,this)}end(){if(this._inProgress){var e,n;this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(e=(n=this.settings).onEnd)===null||e===void 0||e.call(n,this)}}cancel(){if(this._inProgress){var e,n;(e=(n=this.settings).onInterrupt)===null||e===void 0||e.call(n,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1}}update(){var e,n;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:r,settings:i}=this;this._handle=r.addChannel({delay:r.getTime(),duration:i.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(e=(n=this.settings).onUpdate)===null||e===void 0||e.call(n,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const gj=()=>{},ZL={BREAK:1,SNAP_TO_END:2,IGNORE:3},n6e=t=>t,r6e=ZL.BREAK;class i6e{constructor(e){W(this,"getControllerState",void 0),W(this,"props",void 0),W(this,"propsInTransition",void 0),W(this,"transition",void 0),W(this,"onViewStateChange",void 0),W(this,"onStateChange",void 0),W(this,"_onTransitionUpdate",n=>{const{time:r,settings:{interpolator:i,startProps:s,endProps:o,duration:a,easing:l}}=n,c=l(r/a),u=i.interpolateProps(s,o,c);this.propsInTransition=this.getControllerState({...this.props,...u}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=e.getControllerState,this.propsInTransition=null,this.transition=new r_(e.timeline),this.onViewStateChange=e.onViewStateChange||gj,this.onStateChange=e.onStateChange||gj}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(e){let n=!1;const r=this.props;if(this.props=e,!r||this._shouldIgnoreViewportChange(r,e))return!1;if(this._isTransitionEnabled(e)){let i=r;if(this.transition.inProgress){const{interruption:s,endProps:o}=this.transition.settings;i={...r,...s===ZL.SNAP_TO_END?o:this.propsInTransition||r}}this._triggerTransition(i,e),n=!0}else this.transition.cancel();return n}updateTransition(){this.transition.update()}_isTransitionEnabled(e){const{transitionDuration:n,transitionInterpolator:r}=e;return(n>0||n==="auto")&&!!r}_isUpdateDueToCurrentTransition(e){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(e,this.propsInTransition):!1}_shouldIgnoreViewportChange(e,n){return this.transition.inProgress?this.transition.settings.interruption===ZL.IGNORE||this._isUpdateDueToCurrentTransition(n):this._isTransitionEnabled(n)?n.transitionInterpolator.arePropsEqual(e,n):!0}_triggerTransition(e,n){const r=this.getControllerState(e),i=this.getControllerState(n).shortestPathFrom(r),s=n.transitionInterpolator,o=s.getDuration?s.getDuration(e,n):n.transitionDuration;if(o===0)return;const a=s.initializeProps(e,i);this.propsInTransition={};const l={duration:o,easing:n.transitionEasing||n6e,interpolator:s,interruption:n.transitionInterruption||r6e,startProps:a.start,endProps:a.end,onStart:n.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(n.onTransitionInterrupt),onEnd:this._onTransitionEnd(n.onTransitionEnd)};this.transition.start(l),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(e){return n=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),e==null||e(n)}}}class s6e{constructor(e){W(this,"_propsToCompare",void 0),W(this,"_propsToExtract",void 0),W(this,"_requiredProps",void 0);const{compare:n,extract:r,required:i}=e;this._propsToCompare=n,this._propsToExtract=r||n,this._requiredProps=i}arePropsEqual(e,n){for(const r of this._propsToCompare)if(!(r in e)||!(r in n)||!i1(e[r],n[r]))return!1;return!0}initializeProps(e,n){const r={},i={};for(const s of this._propsToExtract)(s in e||s in n)&&(r[s]=e[s],i[s]=n[s]);return this._checkRequiredProps(r),this._checkRequiredProps(i),{start:r,end:i}}getDuration(e,n){return n.transitionDuration}_checkRequiredProps(e){this._requiredProps&&this._requiredProps.forEach(n=>{const r=e[n];Ai(Number.isFinite(r)||Array.isArray(r),"".concat(n," is required for transition"))})}}const o6e=["longitude","latitude","zoom","bearing","pitch"],a6e=["longitude","latitude","zoom"];class XQ extends s6e{constructor(e={}){const n=Array.isArray(e)?e:e.transitionProps,r=Array.isArray(e)?{}:e;r.transitionProps=Array.isArray(n)?{compare:n,required:n}:n||{compare:o6e,required:a6e},super(r.transitionProps),W(this,"opts",void 0),this.opts=r}initializeProps(e,n){const r=super.initializeProps(e,n),{makeViewport:i,around:s}=this.opts;if(i&&s){const o=i(e),a=i(n),l=o.unproject(s);r.start.around=s,Object.assign(r.end,{around:a.project(l),aroundPosition:l,width:n.width,height:n.height})}return r}interpolateProps(e,n,r){const i={};for(const s of this._propsToExtract)i[s]=lT(e[s]||0,n[s]||0,r);if(n.aroundPosition&&this.opts.makeViewport){const s=this.opts.makeViewport({...n,...i});Object.assign(i,s.panByPosition(n.aroundPosition,lT(e.around,n.around,r)))}return i}}const Tu={transitionDuration:0},l6e=300,Mx=t=>1-(1-t)*(1-t),Rp={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},lh={};class c6e{constructor(e){W(this,"props",void 0),W(this,"state",{}),W(this,"transitionManager",void 0),W(this,"eventManager",void 0),W(this,"onViewStateChange",void 0),W(this,"onStateChange",void 0),W(this,"makeViewport",void 0),W(this,"_controllerState",void 0),W(this,"_events",{}),W(this,"_interactionState",{isDragging:!1}),W(this,"_customEvents",[]),W(this,"_eventStartBlocked",null),W(this,"_panMove",!1),W(this,"invertPan",!1),W(this,"dragMode","rotate"),W(this,"inertia",0),W(this,"scrollZoom",!0),W(this,"dragPan",!0),W(this,"dragRotate",!0),W(this,"doubleClickZoom",!0),W(this,"touchZoom",!0),W(this,"touchRotate",!1),W(this,"keyboard",!0),this.transitionManager=new i6e({...e,getControllerState:n=>new this.ControllerState(n),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=e.eventManager,this.onViewStateChange=e.onViewStateChange||(()=>{}),this.onStateChange=e.onStateChange||(()=>{}),this.makeViewport=e.makeViewport}set events(e){this.toggleEvents(this._customEvents,!1),this.toggleEvents(e,!0),this._customEvents=e,this.props&&this.setProps(this.props)}finalize(){for(const n in this._events)if(this._events[n]){var e;(e=this.eventManager)===null||e===void 0||e.off(n,this.handleEvent)}this.transitionManager.finalize()}handleEvent(e){this._controllerState=void 0;const n=this._eventStartBlocked;switch(e.type){case"panstart":return n?!1:this._onPanStart(e);case"panmove":return this._onPan(e);case"panend":return this._onPanEnd(e);case"pinchstart":return n?!1:this._onPinchStart(e);case"pinchmove":return this._onPinch(e);case"pinchend":return this._onPinchEnd(e);case"tripanstart":return n?!1:this._onTriplePanStart(e);case"tripanmove":return this._onTriplePan(e);case"tripanend":return this._onTriplePanEnd(e);case"doubletap":return this._onDoubleTap(e);case"wheel":return this._onWheel(e);case"keydown":return this._onKeyDown(e);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(e){const{x:n,y:r}=this.props,{offsetCenter:i}=e;return[i.x-n,i.y-r]}isPointInBounds(e,n){const{width:r,height:i}=this.props;if(n&&n.handled)return!1;const s=e[0]>=0&&e[0]<=r&&e[1]>=0&&e[1]<=i;return s&&n&&n.stopPropagation(),s}isFunctionKeyPressed(e){const{srcEvent:n}=e;return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(e){const n=setTimeout(()=>{this._eventStartBlocked===n&&(this._eventStartBlocked=null)},e);this._eventStartBlocked=n}setProps(e){e.dragMode&&(this.dragMode=e.dragMode),this.props=e,"transitionInterpolator"in e||(e.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(e);const{inertia:n}=e;this.inertia=Number.isFinite(n)?n:n===!0?l6e:0;const{scrollZoom:r=!0,dragPan:i=!0,dragRotate:s=!0,doubleClickZoom:o=!0,touchZoom:a=!0,touchRotate:l=!1,keyboard:c=!0}=e,u=!!this.onViewStateChange;this.toggleEvents(Rp.WHEEL,u&&r),this.toggleEvents(Rp.PAN,u),this.toggleEvents(Rp.PINCH,u&&(a||l)),this.toggleEvents(Rp.TRIPLE_PAN,u&&l),this.toggleEvents(Rp.DOUBLE_TAP,u&&o),this.toggleEvents(Rp.KEYBOARD,u&&c),this.scrollZoom=r,this.dragPan=i,this.dragRotate=s,this.doubleClickZoom=o,this.touchZoom=a,this.touchRotate=l,this.keyboard=c}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(e,n){this.eventManager&&e.forEach(r=>{this._events[r]!==n&&(this._events[r]=n,n?this.eventManager.on(r,this.handleEvent):this.eventManager.off(r,this.handleEvent))})}updateViewport(e,n=null,r={}){const i={...e.getViewportProps(),...n},s=this.controllerState!==e;if(this.state=e.getState(),this._setInteractionState(r),s){const o=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:o})}}_onTransition(e){this.onViewStateChange({...e,interactionState:this._interactionState})}_setInteractionState(e){Object.assign(this._interactionState,e),this.onStateChange(this._interactionState)}_onPanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;let r=this.isFunctionKeyPressed(e)||e.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(r=!r);const i=this.controllerState[r?"panStart":"rotateStart"]({pos:n});return this._panMove=r,this.updateViewport(i,Tu,{isDragging:!0}),!0}_onPan(e){return this.isDragging()?this._panMove?this._onPanMove(e):this._onPanRotate(e):!1}_onPanEnd(e){return this.isDragging()?this._panMove?this._onPanMoveEnd(e):this._onPanRotateEnd(e):!1}_onPanMove(e){if(!this.dragPan)return!1;const n=this.getCenter(e),r=this.controllerState.pan({pos:n});return this.updateViewport(r,Tu,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(e){const{inertia:n}=this;if(this.dragPan&&n&&e.velocity){const r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],s=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:Mx},{isDragging:!1,isPanning:!0})}else{const r=this.controllerState.panEnd();this.updateViewport(r,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(e){if(!this.dragRotate)return!1;const n=this.getCenter(e),r=this.controllerState.rotate({pos:n});return this.updateViewport(r,Tu,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(e){const{inertia:n}=this;if(this.dragRotate&&n&&e.velocity){const r=this.getCenter(e),i=[r[0]+e.velocityX*n/2,r[1]+e.velocityY*n/2],s=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:Mx},{isDragging:!1,isRotating:!0})}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(e){if(!this.scrollZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;e.srcEvent.preventDefault();const{speed:r=.01,smooth:i=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:s}=e;let o=2/(1+Math.exp(-Math.abs(s*r)));s<0&&o!==0&&(o=1/o);const a=this.controllerState.zoom({pos:n,scale:o});return this.updateViewport(a,{...this._getTransitionProps({around:n}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.rotateStart({pos:n});return this.updateViewport(r,Tu,{isDragging:!0}),!0}_onTriplePan(e){if(!this.touchRotate||!this.isDragging())return!1;const n=this.getCenter(e);n[0]-=e.deltaX;const r=this.controllerState.rotate({pos:n});return this.updateViewport(r,Tu,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this;if(this.touchRotate&&n&&e.velocityY){const r=this.getCenter(e),i=[r[0],r[1]+=e.velocityY*n/2],s=this.controllerState.rotate({pos:i});this.updateViewport(s,{...this._getTransitionProps(),transitionDuration:n,transitionEasing:Mx},{isDragging:!1,isRotating:!0}),this.blockEvents(n)}else{const r=this.controllerState.rotateEnd();this.updateViewport(r,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(e){const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.controllerState.zoomStart({pos:n}).rotateStart({pos:n});return lh._startPinchRotation=e.rotation,lh._lastPinchEvent=e,this.updateViewport(r,Tu,{isDragging:!0}),!0}_onPinch(e){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let n=this.controllerState;if(this.touchZoom){const{scale:r}=e,i=this.getCenter(e);n=n.zoom({pos:i,scale:r})}if(this.touchRotate){const{rotation:r}=e;n=n.rotate({deltaAngleX:lh._startPinchRotation-r})}return this.updateViewport(n,Tu,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),lh._lastPinchEvent=e,!0}_onPinchEnd(e){if(!this.isDragging())return!1;const{inertia:n}=this,{_lastPinchEvent:r}=lh;if(this.touchZoom&&n&&r&&e.scale!==r.scale){const i=this.getCenter(e);let s=this.controllerState.rotateEnd();const o=Math.log2(e.scale),a=(o-Math.log2(r.scale))/(e.deltaTime-r.deltaTime),l=Math.pow(2,o+a*n/2);s=s.zoom({pos:i,scale:l}).zoomEnd(),this.updateViewport(s,{...this._getTransitionProps({around:i}),transitionDuration:n,transitionEasing:Mx},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(n)}else{const i=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return lh._startPinchRotation=null,lh._lastPinchEvent=null,!0}_onDoubleTap(e){if(!this.doubleClickZoom)return!1;const n=this.getCenter(e);if(!this.isPointInBounds(n,e))return!1;const r=this.isFunctionKeyPressed(e),i=this.controllerState.zoom({pos:n,scale:r?.5:2});return this.updateViewport(i,this._getTransitionProps({around:n}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(e){if(!this.keyboard)return!1;const n=this.isFunctionKeyPressed(e),{zoomSpeed:r,moveSpeed:i,rotateSpeedX:s,rotateSpeedY:o}=this.keyboard===!0?{}:this.keyboard,{controllerState:a}=this;let l;const c={};switch(e.srcEvent.code){case"Minus":l=n?a.zoomOut(r).zoomOut(r):a.zoomOut(r),c.isZooming=!0;break;case"Equal":l=n?a.zoomIn(r).zoomIn(r):a.zoomIn(r),c.isZooming=!0;break;case"ArrowLeft":n?(l=a.rotateLeft(s),c.isRotating=!0):(l=a.moveLeft(i),c.isPanning=!0);break;case"ArrowRight":n?(l=a.rotateRight(s),c.isRotating=!0):(l=a.moveRight(i),c.isPanning=!0);break;case"ArrowUp":n?(l=a.rotateUp(o),c.isRotating=!0):(l=a.moveUp(i),c.isPanning=!0);break;case"ArrowDown":n?(l=a.rotateDown(o),c.isRotating=!0):(l=a.moveDown(i),c.isPanning=!0);break;default:return!1}return this.updateViewport(l,this._getTransitionProps(),c),!0}_getTransitionProps(e){const{transition:n}=this;return!n||!n.transitionInterpolator?Tu:e?{...n,transitionInterpolator:new XQ({...e,...n.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:n}}class u6e{constructor(e,n){W(this,"_viewportProps",void 0),W(this,"_state",void 0),this._viewportProps=this.applyConstraints(e),this._state=n}getViewportProps(){return this._viewportProps}getState(){return this._state}}const vj=5,d6e=1.2;class h6e extends u6e{constructor(e){const{width:n,height:r,latitude:i,longitude:s,zoom:o,bearing:a=0,pitch:l=0,altitude:c=1.5,position:u=[0,0,0],maxZoom:d=20,minZoom:h=0,maxPitch:f=60,minPitch:p=0,startPanLngLat:m,startZoomLngLat:_,startRotatePos:y,startBearing:x,startPitch:b,startZoom:E,normalize:w=!0}=e;Ai(Number.isFinite(s)),Ai(Number.isFinite(i)),Ai(Number.isFinite(o)),super({width:n,height:r,latitude:i,longitude:s,zoom:o,bearing:a,pitch:l,altitude:c,maxZoom:d,minZoom:h,maxPitch:f,minPitch:p,normalize:w,position:u},{startPanLngLat:m,startZoomLngLat:_,startRotatePos:y,startBearing:x,startPitch:b,startZoom:E}),W(this,"makeViewport",void 0),this.makeViewport=e.makeViewport}panStart({pos:e}){return this._getUpdatedState({startPanLngLat:this._unproject(e)})}pan({pos:e,startPos:n}){const r=this.getState().startPanLngLat||this._unproject(n);if(!r)return this;const s=this.makeViewport(this.getViewportProps()).panByPosition(r,e);return this._getUpdatedState(s)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:e}){return this._getUpdatedState({startRotatePos:e,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:e,deltaAngleX:n=0,deltaAngleY:r=0}){const{startRotatePos:i,startBearing:s,startPitch:o}=this.getState();if(!i||s===void 0||o===void 0)return this;let a;return e?a=this._getNewRotation(e,i,o,s):a={bearing:s+n,pitch:o+r},this._getUpdatedState(a)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:e}){return this._getUpdatedState({startZoomLngLat:this._unproject(e),startZoom:this.getViewportProps().zoom})}zoom({pos:e,startPos:n,scale:r}){let{startZoom:i,startZoomLngLat:s}=this.getState();if(s||(i=this.getViewportProps().zoom,s=this._unproject(n)||this._unproject(e)),!s)return this;const{maxZoom:o,minZoom:a}=this.getViewportProps();let l=i+Math.log2(r);l=qu(l,a,o);const c=this.makeViewport({...this.getViewportProps(),zoom:l});return this._getUpdatedState({zoom:l,...c.panByPosition(s,e)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(e=2){return this._zoomFromCenter(e)}zoomOut(e=2){return this._zoomFromCenter(1/e)}moveLeft(e=100){return this._panFromCenter([e,0])}moveRight(e=100){return this._panFromCenter([-e,0])}moveUp(e=100){return this._panFromCenter([0,e])}moveDown(e=100){return this._panFromCenter([0,-e])}rotateLeft(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-e})}rotateRight(e=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+e})}rotateUp(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+e})}rotateDown(e=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-e})}shortestPathFrom(e){const n=e.getViewportProps(),r={...this.getViewportProps()},{bearing:i,longitude:s}=r;return Math.abs(i-n.bearing)>180&&(r.bearing=i<0?i+360:i-360),Math.abs(s-n.longitude)>180&&(r.longitude=s<0?s+360:s-360),r}applyConstraints(e){const{maxZoom:n,minZoom:r,zoom:i}=e;e.zoom=qu(i,r,n);const{maxPitch:s,minPitch:o,pitch:a}=e;e.pitch=qu(a,o,s);const{normalize:l=!0}=e;return l&&Object.assign(e,y8e(e)),e}_zoomFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.zoom({pos:[n/2,r/2],scale:e})}_panFromCenter(e){const{width:n,height:r}=this.getViewportProps();return this.pan({startPos:[n/2,r/2],pos:[n/2+e[0],r/2+e[1]]})}_getUpdatedState(e){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...e})}_unproject(e){const n=this.makeViewport(this.getViewportProps());return e&&n.unproject(e)}_getNewRotation(e,n,r,i){const s=e[0]-n[0],o=e[1]-n[1],a=e[1],l=n[1],{width:c,height:u}=this.getViewportProps(),d=s/c;let h=0;o>0?Math.abs(u-l)>vj&&(h=o/(l-u)*d6e):o<0&&l>vj&&(h=1-a/l),h=qu(h,-1,1);const{minPitch:f,maxPitch:p}=this.getViewportProps(),m=i+180*d;let _=r;return h>0?_=r+h*(p-r):h<0&&(_=r-h*(f-r)),{pitch:_,bearing:m}}}class f6e extends c6e{constructor(...e){super(...e),W(this,"ControllerState",h6e),W(this,"transition",{transitionDuration:300,transitionInterpolator:new XQ({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),W(this,"dragMode","pan")}setProps(e){e.position=e.position||[0,0,0];const n=this.props;super.setProps(e),(!n||n.height!==e.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...e,...this.state}))}}class OD extends mg{get ViewportType(){return pg}get ControllerType(){return f6e}}W(OD,"displayName","MapView");const p6e=new jQ;function m6e(t,e){var n,r;const i=(n=t.order)!==null&&n!==void 0?n:1/0,s=(r=e.order)!==null&&r!==void 0?r:1/0;return i-s}class g6e{constructor(){W(this,"effects",void 0),W(this,"_resolvedEffects",[]),W(this,"_defaultEffects",[]),W(this,"_needsRedraw",void 0),this.effects=[],this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(e){const n=this._defaultEffects;if(!n.find(r=>r.id===e.id)){const r=n.findIndex(i=>m6e(i,e)>0);r<0?n.push(e):n.splice(r,0,e),this._setEffects(this.effects)}}setProps(e){"effects"in e&&(kl(e.effects,this.effects,1)||this._setEffects(e.effects))}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}getEffects(){return this._resolvedEffects}_setEffects(e){const n={};for(const i of this.effects)n[i.id]=i;const r=[];for(const i of e){const s=n[i.id];s&&s!==i?s.setProps?(s.setProps(i.props),r.push(s)):(s.cleanup(),r.push(i)):r.push(i),delete n[i.id]}for(const i in n)n[i].cleanup();this.effects=r,this._resolvedEffects=r.concat(this._defaultEffects),e.some(i=>i instanceof jQ)||this._resolvedEffects.push(p6e),this._needsRedraw="effects changed"}finalize(){for(const e of this._resolvedEffects)e.cleanup();this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class v6e extends AD{shouldDrawLayer(e){const{operation:n}=e.props;return n.includes("draw")||n.includes("terrain")}}const y6e="deckRenderer.renderLayers";class _6e{constructor(e){W(this,"gl",void 0),W(this,"layerFilter",void 0),W(this,"drawPickingColors",void 0),W(this,"drawLayersPass",void 0),W(this,"pickLayersPass",void 0),W(this,"renderCount",void 0),W(this,"_needsRedraw",void 0),W(this,"renderBuffers",void 0),W(this,"lastPostProcessEffect",void 0),this.gl=e,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new v6e(e),this.pickLayersPass=new HQ(e),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(e){this.layerFilter!==e.layerFilter&&(this.layerFilter=e.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==e.drawPickingColors&&(this.drawPickingColors=e.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(e){if(!e.viewports.length)return;const n=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,r={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...e,target:e.target||pi.getDefaultFramebuffer(this.gl)};r.effects&&this._preRender(r.effects,r);const i=this.lastPostProcessEffect?this.renderBuffers[0]:r.target,s=n.render({...r,target:i});r.effects&&this._postRender(r.effects,r),this.renderCount++,Cs(y6e,this,s,e)}needsRedraw(e={clearRedrawFlags:!1}){const n=this._needsRedraw;return e.clearRedrawFlags&&(this._needsRedraw=!1),n}finalize(){const{renderBuffers:e}=this;for(const n of e)n.delete();e.length=0}_preRender(e,n){this.lastPostProcessEffect=null,n.preRenderStats=n.preRenderStats||{};for(const r of e)n.preRenderStats[r.id]=r.preRender(this.gl,n),r.postRender&&(this.lastPostProcessEffect=r.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){const{renderBuffers:e}=this;e.length===0&&e.push(new pi(this.gl),new pi(this.gl));for(const n of e)n.resize()}_postRender(e,n){const{renderBuffers:r}=this,i={...n,inputBuffer:r[0],swapBuffer:r[1],target:null};for(const s of e)if(s.postRender){if(s.id===this.lastPostProcessEffect){i.target=n.target,s.postRender(this.gl,i);break}const o=s.postRender(this.gl,i);i.inputBuffer=o,i.swapBuffer=o===r[0]?r[1]:r[0]}}}const b6e={pickedColor:null,pickedObjectIndex:-1};function x6e({pickedColors:t,decodePickingColor:e,deviceX:n,deviceY:r,deviceRadius:i,deviceRect:s}){const{x:o,y:a,width:l,height:c}=s;let u=i*i,d=-1,h=0;for(let f=0;f<c;f++){const p=f+a-r,m=p*p;if(m>u)h+=4*l;else for(let _=0;_<l;_++){if(t[h+3]-1>=0){const x=_+o-n,b=x*x+m;b<=u&&(u=b,d=h)}h+=4}}if(d>=0){const f=t.slice(d,d+4),p=e(f);if(p){const m=Math.floor(d/4/l),_=d/4-m*l;return{...p,pickedColor:f,pickedX:o+_,pickedY:a+m}}Yn.error("Picked non-existent layer. Is picking buffer corrupt?")()}return b6e}function E6e({pickedColors:t,decodePickingColor:e}){const n=new Map;if(t){for(let r=0;r<t.length;r+=4)if(t[r+3]-1>=0){const s=t.slice(r,r+4),o=s.join(",");if(!n.has(o)){const a=e(s);a?n.set(o,{...a,color:s}):Yn.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(n.values())}function YQ({pickInfo:t,viewports:e,pixelRatio:n,x:r,y:i,z:s}){let o=e[0];e.length>1&&(o=T6e((t==null?void 0:t.pickedViewports)||e,{x:r,y:i}));let a;if(o){const l=[r-o.x,i-o.y];s!==void 0&&(l[2]=s),a=o.unproject(l)}return{color:null,layer:null,viewport:o,index:-1,picked:!1,x:r,y:i,pixel:[r,i],coordinate:a,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:n}}function w6e(t){const{pickInfo:e,lastPickedInfo:n,mode:r,layers:i}=t,{pickedColor:s,pickedLayer:o,pickedObjectIndex:a}=e,l=o?[o]:[];if(r==="hover"){const d=n.index,h=n.layerId,f=o?o.props.id:null;if(f!==h||a!==d){if(f!==h){const p=i.find(m=>m.props.id===h);p&&l.unshift(p)}n.layerId=f,n.index=a,n.info=null}}const c=YQ(t),u=new Map;return u.set(null,c),l.forEach(d=>{let h={...c};d===o&&(h.color=s,h.index=a,h.picked=!0),h=KQ({layer:d,info:h,mode:r});const f=h.layer;d===o&&r==="hover"&&(n.info=h),u.set(f.id,h),r==="hover"&&f.updateAutoHighlight(h)}),u}function KQ({layer:t,info:e,mode:n}){for(;t&&e;){const r=e.layer||null;e.sourceLayer=r,e.layer=t,e=t.getPickingInfo({info:e,mode:n,sourceLayer:r}),t=t.parent}return e}function T6e(t,e){for(let n=t.length-1;n>=0;n--){const r=t[n];if(r.containsPixel(e))return r}return t[0]}class S6e{constructor(e){W(this,"gl",void 0),W(this,"pickingFBO",void 0),W(this,"depthFBO",void 0),W(this,"pickLayersPass",void 0),W(this,"layerFilter",void 0),W(this,"lastPickedInfo",void 0),W(this,"_pickable",!0),this.gl=e,this.pickLayersPass=new HQ(e),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(e){"layerFilter"in e&&(this.layerFilter=e.layerFilter),"_pickable"in e&&(this._pickable=e._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(e){return this._pickClosestObject(e)}pickObjects(e){return this._pickVisibleObjects(e)}getLastPickedObject({x:e,y:n,layers:r,viewports:i},s=this.lastPickedInfo.info){const o=s&&s.layer&&s.layer.id,a=s&&s.viewport&&s.viewport.id,l=o?r.find(h=>h.id===o):null,c=a&&i.find(h=>h.id===a)||i[0],u=c&&c.unproject([e-c.x,n-c.y]);return{...s,...{x:e,y:n,viewport:c,coordinate:u,layer:l}}}_resizeBuffer(){var e,n;const{gl:r}=this;if(!this.pickingFBO&&(this.pickingFBO=new pi(r),pi.isSupported(r,{colorBufferFloat:!0}))){const i=new pi(r);i.attach({36064:new Ja(r,{format:pn(r)?34836:6408,type:5126})}),this.depthFBO=i}(e=this.pickingFBO)===null||e===void 0||e.resize({width:r.canvas.width,height:r.canvas.height}),(n=this.depthFBO)===null||n===void 0||n.resize({width:r.canvas.width,height:r.canvas.height})}_getPickable(e){if(this._pickable===!1)return null;const n=e.filter(r=>this.pickLayersPass.shouldDrawLayer(r)&&!r.isComposite);return n.length?n:null}_pickClosestObject({layers:e,views:n,viewports:r,x:i,y:s,radius:o=0,depth:a=1,mode:l="query",unproject3D:c,onViewportActive:u,effects:d}){const h=this._getPickable(e),f=sg(this.gl);if(!h)return{result:[],emptyInfo:YQ({viewports:r,x:i,y:s,pixelRatio:f})};this._resizeBuffer();const p=KP(this.gl,[i,s],!0),m=[p.x+Math.floor(p.width/2),p.y+Math.floor(p.height/2)],_=Math.round(o*f),{width:y,height:x}=this.pickingFBO,b=this._getPickingRect({deviceX:m[0],deviceY:m[1],deviceRadius:_,deviceWidth:y,deviceHeight:x}),E={x:i-o,y:s-o,width:o*2+1,height:o*2+1};let w;const T=[],C=new Set;for(let P=0;P<a;P++){let M;if(b){const F=this._drawAndSample({layers:h,views:n,viewports:r,onViewportActive:u,deviceRect:b,cullRect:E,effects:d,pass:"picking:".concat(l)});M=x6e({...F,deviceX:m[0],deviceY:m[1],deviceRadius:_,deviceRect:b})}else M={pickedColor:null,pickedObjectIndex:-1};let N;if(M.pickedLayer&&c&&this.depthFBO){const{pickedColors:F}=this._drawAndSample({layers:[M.pickedLayer],views:n,viewports:r,onViewportActive:u,deviceRect:{x:M.pickedX,y:M.pickedY,width:1,height:1},cullRect:E,effects:d,pass:"picking:".concat(l,":z")},!0);F[3]&&(N=F[0])}M.pickedLayer&&P+1<a&&(C.add(M.pickedLayer),M.pickedLayer.disablePickingIndex(M.pickedObjectIndex)),w=w6e({pickInfo:M,lastPickedInfo:this.lastPickedInfo,mode:l,layers:h,viewports:r,x:i,y:s,z:N,pixelRatio:f});for(const F of w.values())F.layer&&T.push(F);if(!M.pickedColor)break}for(const P of C)P.restorePickingColors();return{result:T,emptyInfo:w.get(null)}}_pickVisibleObjects({layers:e,views:n,viewports:r,x:i,y:s,width:o=1,height:a=1,mode:l="query",maxObjects:c=null,onViewportActive:u,effects:d}){const h=this._getPickable(e);if(!h)return[];this._resizeBuffer();const f=sg(this.gl),p=KP(this.gl,[i,s],!0),m=p.x,_=p.y+p.height,y=KP(this.gl,[i+o,s+a],!0),x=y.x+y.width,b=y.y,E={x:m,y:b,width:x-m,height:_-b},w=this._drawAndSample({layers:h,views:n,viewports:r,onViewportActive:u,deviceRect:E,cullRect:{x:i,y:s,width:o,height:a},effects:d,pass:"picking:".concat(l)}),T=E6e(w),C=new Map,P=Number.isFinite(c);for(let N=0;N<T.length;N++){var M;if(P&&c&&C.size>=c)break;const F=T[N];let I={color:F.pickedColor,layer:null,index:F.pickedObjectIndex,picked:!0,x:i,y:s,pixelRatio:f};I=KQ({layer:F.pickedLayer,info:I,mode:l});const k=(M=I.object)!==null&&M!==void 0?M:"".concat(I.layer.id,"[").concat(I.index,"]");C.has(k)||C.set(k,I)}return Array.from(C.values())}_drawAndSample({layers:e,views:n,viewports:r,onViewportActive:i,deviceRect:s,cullRect:o,effects:a,pass:l},c=!1){const u=c?this.depthFBO:this.pickingFBO,d={layers:e,layerFilter:this.layerFilter,views:n,viewports:r,onViewportActive:i,pickingFBO:u,deviceRect:s,cullRect:o,effects:a,pass:l,pickZ:c,preRenderStats:{}};for(const x of a)x.useInPicking&&(d.preRenderStats[x.id]=x.preRender(this.gl,d));const{decodePickingColor:h}=this.pickLayersPass.render(d),{x:f,y:p,width:m,height:_}=s,y=new(c?Float32Array:Uint8Array)(m*_*4);return xC(u,{sourceX:f,sourceY:p,sourceWidth:m,sourceHeight:_,target:y}),{pickedColors:y,decodePickingColor:h}}_getPickingRect({deviceX:e,deviceY:n,deviceRadius:r,deviceWidth:i,deviceHeight:s}){const o=Math.max(0,e-r),a=Math.max(0,n-r),l=Math.min(i,e+r+1)-o,c=Math.min(s,n+r+1)-a;return l<=0||c<=0?null:{x:o,y:a,width:l,height:c}}}const C6e={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class A6e{constructor(e){W(this,"el",null),W(this,"isVisible",!1);const n=e.parentElement;n&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,C6e),n.appendChild(this.el))}setTooltip(e,n,r){const i=this.el;if(i){if(typeof e=="string")i.innerText=e;else if(e)e.text&&(i.innerText=e.text),e.html&&(i.innerHTML=e.html),e.className&&(i.className=e.className);else{this.isVisible=!1,i.style.display="none";return}this.isVisible=!0,i.style.display="block",i.style.transform="translate(".concat(n,"px, ").concat(r,"px)"),e&&typeof e=="object"&&"style"in e&&Object.assign(i.style,e.style)}}remove(){this.el&&(this.el.remove(),this.el=null)}}var qQ={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(t){(function(e,n,r,i){var s=["","webkit","Moz","MS","ms","o"],o=n.createElement("div"),a="function",l=Math.round,c=Math.abs,u=Date.now;function d(K,J,re){return setTimeout(b(K,re),J)}function h(K,J,re){return Array.isArray(K)?(f(K,re[J],re),!0):!1}function f(K,J,re){var Te;if(K)if(K.forEach)K.forEach(J,re);else if(K.length!==i)for(Te=0;Te<K.length;)J.call(re,K[Te],Te,K),Te++;else for(Te in K)K.hasOwnProperty(Te)&&J.call(re,K[Te],Te,K)}function p(K,J,re){var Te="DEPRECATED METHOD: "+J+`
`+re+` AT 
`;return function(){var We=new Error("get-stack-trace"),ut=We&&We.stack?We.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",tn=e.console&&(e.console.warn||e.console.log);return tn&&tn.call(e.console,Te,ut),K.apply(this,arguments)}}var m;typeof Object.assign!="function"?m=function(J){if(J===i||J===null)throw new TypeError("Cannot convert undefined or null to object");for(var re=Object(J),Te=1;Te<arguments.length;Te++){var We=arguments[Te];if(We!==i&&We!==null)for(var ut in We)We.hasOwnProperty(ut)&&(re[ut]=We[ut])}return re}:m=Object.assign;var _=p(function(J,re,Te){for(var We=Object.keys(re),ut=0;ut<We.length;)(!Te||Te&&J[We[ut]]===i)&&(J[We[ut]]=re[We[ut]]),ut++;return J},"extend","Use `assign`."),y=p(function(J,re){return _(J,re,!0)},"merge","Use `assign`.");function x(K,J,re){var Te=J.prototype,We;We=K.prototype=Object.create(Te),We.constructor=K,We._super=Te,re&&m(We,re)}function b(K,J){return function(){return K.apply(J,arguments)}}function E(K,J){return typeof K==a?K.apply(J&&J[0]||i,J):K}function w(K,J){return K===i?J:K}function T(K,J,re){f(N(J),function(Te){K.addEventListener(Te,re,!1)})}function C(K,J,re){f(N(J),function(Te){K.removeEventListener(Te,re,!1)})}function P(K,J){for(;K;){if(K==J)return!0;K=K.parentNode}return!1}function M(K,J){return K.indexOf(J)>-1}function N(K){return K.trim().split(/\s+/g)}function F(K,J,re){if(K.indexOf&&!re)return K.indexOf(J);for(var Te=0;Te<K.length;){if(re&&K[Te][re]==J||!re&&K[Te]===J)return Te;Te++}return-1}function I(K){return Array.prototype.slice.call(K,0)}function k(K,J,re){for(var Te=[],We=[],ut=0;ut<K.length;){var tn=J?K[ut][J]:K[ut];F(We,tn)<0&&Te.push(K[ut]),We[ut]=tn,ut++}return re&&(J?Te=Te.sort(function(Ur,Gt){return Ur[J]>Gt[J]}):Te=Te.sort()),Te}function R(K,J){for(var re,Te,We=J[0].toUpperCase()+J.slice(1),ut=0;ut<s.length;){if(re=s[ut],Te=re?re+We:J,Te in K)return Te;ut++}return i}var z=1;function X(){return z++}function G(K){var J=K.ownerDocument||K;return J.defaultView||J.parentWindow||e}var j=/mobile|tablet|ip(ad|hone|od)|android/i,H="ontouchstart"in e,Q=R(e,"PointerEvent")!==i,V=H&&j.test(navigator.userAgent),ee="touch",ye="pen",se="mouse",fe="kinect",ve=25,Oe=1,ae=2,ue=4,Ce=8,pe=1,ke=2,Re=4,B=8,oe=16,ie=ke|Re,q=B|oe,Y=ie|q,ne=["x","y"],me=["clientX","clientY"];function he(K,J){var re=this;this.manager=K,this.callback=J,this.element=K.element,this.target=K.options.inputTarget,this.domHandler=function(Te){E(K.options.enable,[K])&&re.handler(Te)},this.init()}he.prototype={handler:function(){},init:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(G(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&C(this.element,this.evEl,this.domHandler),this.evTarget&&C(this.target,this.evTarget,this.domHandler),this.evWin&&C(G(this.element),this.evWin,this.domHandler)}};function de(K){var J,re=K.options.inputClass;return re?J=re:Q?J=le:V?J=vt:H?J=Kt:J=kt,new J(K,Ae)}function Ae(K,J,re){var Te=re.pointers.length,We=re.changedPointers.length,ut=J&Oe&&Te-We===0,tn=J&(ue|Ce)&&Te-We===0;re.isFirst=!!ut,re.isFinal=!!tn,ut&&(K.session={}),re.eventType=J,De(K,re),K.emit("hammer.input",re),K.recognize(re),K.session.prevInput=re}function De(K,J){var re=K.session,Te=J.pointers,We=Te.length;re.firstInput||(re.firstInput=St(J)),We>1&&!re.firstMultiple?re.firstMultiple=St(J):We===1&&(re.firstMultiple=!1);var ut=re.firstInput,tn=re.firstMultiple,dr=tn?tn.center:ut.center,Ur=J.center=be(Te);J.timeStamp=u(),J.deltaTime=J.timeStamp-ut.timeStamp,J.angle=Bt(dr,Ur),J.distance=gt(dr,Ur),Be(re,J),J.offsetDirection=qe(J.deltaX,J.deltaY);var Gt=we(J.deltaTime,J.deltaX,J.deltaY);J.overallVelocityX=Gt.x,J.overallVelocityY=Gt.y,J.overallVelocity=c(Gt.x)>c(Gt.y)?Gt.x:Gt.y,J.scale=tn?It(tn.pointers,Te):1,J.rotation=tn?Ie(tn.pointers,Te):0,J.maxPointers=re.prevInput?J.pointers.length>re.prevInput.maxPointers?J.pointers.length:re.prevInput.maxPointers:J.pointers.length,tt(re,J);var eo=K.element;P(J.srcEvent.target,eo)&&(eo=J.srcEvent.target),J.target=eo}function Be(K,J){var re=J.center,Te=K.offsetDelta||{},We=K.prevDelta||{},ut=K.prevInput||{};(J.eventType===Oe||ut.eventType===ue)&&(We=K.prevDelta={x:ut.deltaX||0,y:ut.deltaY||0},Te=K.offsetDelta={x:re.x,y:re.y}),J.deltaX=We.x+(re.x-Te.x),J.deltaY=We.y+(re.y-Te.y)}function tt(K,J){var re=K.lastInterval||J,Te=J.timeStamp-re.timeStamp,We,ut,tn,dr;if(J.eventType!=Ce&&(Te>ve||re.velocity===i)){var Ur=J.deltaX-re.deltaX,Gt=J.deltaY-re.deltaY,eo=we(Te,Ur,Gt);ut=eo.x,tn=eo.y,We=c(eo.x)>c(eo.y)?eo.x:eo.y,dr=qe(Ur,Gt),K.lastInterval=J}else We=re.velocity,ut=re.velocityX,tn=re.velocityY,dr=re.direction;J.velocity=We,J.velocityX=ut,J.velocityY=tn,J.direction=dr}function St(K){for(var J=[],re=0;re<K.pointers.length;)J[re]={clientX:l(K.pointers[re].clientX),clientY:l(K.pointers[re].clientY)},re++;return{timeStamp:u(),pointers:J,center:be(J),deltaX:K.deltaX,deltaY:K.deltaY}}function be(K){var J=K.length;if(J===1)return{x:l(K[0].clientX),y:l(K[0].clientY)};for(var re=0,Te=0,We=0;We<J;)re+=K[We].clientX,Te+=K[We].clientY,We++;return{x:l(re/J),y:l(Te/J)}}function we(K,J,re){return{x:J/K||0,y:re/K||0}}function qe(K,J){return K===J?pe:c(K)>=c(J)?K<0?ke:Re:J<0?B:oe}function gt(K,J,re){re||(re=ne);var Te=J[re[0]]-K[re[0]],We=J[re[1]]-K[re[1]];return Math.sqrt(Te*Te+We*We)}function Bt(K,J,re){re||(re=ne);var Te=J[re[0]]-K[re[0]],We=J[re[1]]-K[re[1]];return Math.atan2(We,Te)*180/Math.PI}function Ie(K,J){return Bt(J[1],J[0],me)+Bt(K[1],K[0],me)}function It(K,J){return gt(J[0],J[1],me)/gt(K[0],K[1],me)}var Ve={mousedown:Oe,mousemove:ae,mouseup:ue},Ye="mousedown",ft="mousemove mouseup";function kt(){this.evEl=Ye,this.evWin=ft,this.pressed=!1,he.apply(this,arguments)}x(kt,he,{handler:function(J){var re=Ve[J.type];re&Oe&&J.button===0&&(this.pressed=!0),re&ae&&J.which!==1&&(re=ue),this.pressed&&(re&ue&&(this.pressed=!1),this.callback(this.manager,re,{pointers:[J],changedPointers:[J],pointerType:se,srcEvent:J}))}});var vn={pointerdown:Oe,pointermove:ae,pointerup:ue,pointercancel:Ce,pointerout:Ce},zn={2:ee,3:ye,4:se,5:fe},Kn="pointerdown",ur="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(Kn="MSPointerDown",ur="MSPointerMove MSPointerUp MSPointerCancel");function le(){this.evEl=Kn,this.evWin=ur,he.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}x(le,he,{handler:function(J){var re=this.store,Te=!1,We=J.type.toLowerCase().replace("ms",""),ut=vn[We],tn=zn[J.pointerType]||J.pointerType,dr=tn==ee,Ur=F(re,J.pointerId,"pointerId");ut&Oe&&(J.button===0||dr)?Ur<0&&(re.push(J),Ur=re.length-1):ut&(ue|Ce)&&(Te=!0),!(Ur<0)&&(re[Ur]=J,this.callback(this.manager,ut,{pointers:re,changedPointers:[J],pointerType:tn,srcEvent:J}),Te&&re.splice(Ur,1))}});var _e={touchstart:Oe,touchmove:ae,touchend:ue,touchcancel:Ce},Me="touchstart",et="touchstart touchmove touchend touchcancel";function ct(){this.evTarget=Me,this.evWin=et,this.started=!1,he.apply(this,arguments)}x(ct,he,{handler:function(J){var re=_e[J.type];if(re===Oe&&(this.started=!0),!!this.started){var Te=jt.call(this,J,re);re&(ue|Ce)&&Te[0].length-Te[1].length===0&&(this.started=!1),this.callback(this.manager,re,{pointers:Te[0],changedPointers:Te[1],pointerType:ee,srcEvent:J})}}});function jt(K,J){var re=I(K.touches),Te=I(K.changedTouches);return J&(ue|Ce)&&(re=k(re.concat(Te),"identifier",!0)),[re,Te]}var Pt={touchstart:Oe,touchmove:ae,touchend:ue,touchcancel:Ce},Ct="touchstart touchmove touchend touchcancel";function vt(){this.evTarget=Ct,this.targetIds={},he.apply(this,arguments)}x(vt,he,{handler:function(J){var re=Pt[J.type],Te=Jt.call(this,J,re);Te&&this.callback(this.manager,re,{pointers:Te[0],changedPointers:Te[1],pointerType:ee,srcEvent:J})}});function Jt(K,J){var re=I(K.touches),Te=this.targetIds;if(J&(Oe|ae)&&re.length===1)return Te[re[0].identifier]=!0,[re,re];var We,ut,tn=I(K.changedTouches),dr=[],Ur=this.target;if(ut=re.filter(function(Gt){return P(Gt.target,Ur)}),J===Oe)for(We=0;We<ut.length;)Te[ut[We].identifier]=!0,We++;for(We=0;We<tn.length;)Te[tn[We].identifier]&&dr.push(tn[We]),J&(ue|Ce)&&delete Te[tn[We].identifier],We++;if(dr.length)return[k(ut.concat(dr),"identifier",!0),dr]}var Sn=2500,Nt=25;function Kt(){he.apply(this,arguments);var K=b(this.handler,this);this.touch=new vt(this.manager,K),this.mouse=new kt(this.manager,K),this.primaryTouch=null,this.lastTouches=[]}x(Kt,he,{handler:function(J,re,Te){var We=Te.pointerType==ee,ut=Te.pointerType==se;if(!(ut&&Te.sourceCapabilities&&Te.sourceCapabilities.firesTouchEvents)){if(We)Nn.call(this,re,Te);else if(ut&&Mn.call(this,Te))return;this.callback(J,re,Te)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Nn(K,J){K&Oe?(this.primaryTouch=J.changedPointers[0].identifier,qn.call(this,J)):K&(ue|Ce)&&qn.call(this,J)}function qn(K){var J=K.changedPointers[0];if(J.identifier===this.primaryTouch){var re={x:J.clientX,y:J.clientY};this.lastTouches.push(re);var Te=this.lastTouches,We=function(){var ut=Te.indexOf(re);ut>-1&&Te.splice(ut,1)};setTimeout(We,Sn)}}function Mn(K){for(var J=K.srcEvent.clientX,re=K.srcEvent.clientY,Te=0;Te<this.lastTouches.length;Te++){var We=this.lastTouches[Te],ut=Math.abs(J-We.x),tn=Math.abs(re-We.y);if(ut<=Nt&&tn<=Nt)return!0}return!1}var ti=R(o.style,"touchAction"),gs=ti!==i,Zi="compute",un="auto",yn="manipulation",ni="none",gi="pan-x",_r="pan-y",vs=$n();function Xt(K,J){this.manager=K,this.set(J)}Xt.prototype={set:function(K){K==Zi&&(K=this.compute()),gs&&this.manager.element.style&&vs[K]&&(this.manager.element.style[ti]=K),this.actions=K.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var K=[];return f(this.manager.recognizers,function(J){E(J.options.enable,[J])&&(K=K.concat(J.getTouchAction()))}),Zt(K.join(" "))},preventDefaults:function(K){var J=K.srcEvent,re=K.offsetDirection;if(this.manager.session.prevented){J.preventDefault();return}var Te=this.actions,We=M(Te,ni)&&!vs[ni],ut=M(Te,_r)&&!vs[_r],tn=M(Te,gi)&&!vs[gi];if(We){var dr=K.pointers.length===1,Ur=K.distance<2,Gt=K.deltaTime<250;if(dr&&Ur&&Gt)return}if(!(tn&&ut)&&(We||ut&&re&ie||tn&&re&q))return this.preventSrc(J)},preventSrc:function(K){this.manager.session.prevented=!0,K.preventDefault()}};function Zt(K){if(M(K,ni))return ni;var J=M(K,gi),re=M(K,_r);return J&&re?ni:J||re?J?gi:_r:M(K,yn)?yn:un}function $n(){if(!gs)return!1;var K={},J=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(re){K[re]=J?e.CSS.supports("touch-action",re):!0}),K}var Oi=1,br=2,ko=4,No=8,ya=No,nc=16,ki=32;function vi(K){this.options=m({},this.defaults,K||{}),this.id=X(),this.manager=null,this.options.enable=w(this.options.enable,!0),this.state=Oi,this.simultaneous={},this.requireFail=[]}vi.prototype={defaults:{},set:function(K){return m(this.options,K),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(K){if(h(K,"recognizeWith",this))return this;var J=this.simultaneous;return K=Js(K,this),J[K.id]||(J[K.id]=K,K.recognizeWith(this)),this},dropRecognizeWith:function(K){return h(K,"dropRecognizeWith",this)?this:(K=Js(K,this),delete this.simultaneous[K.id],this)},requireFailure:function(K){if(h(K,"requireFailure",this))return this;var J=this.requireFail;return K=Js(K,this),F(J,K)===-1&&(J.push(K),K.requireFailure(this)),this},dropRequireFailure:function(K){if(h(K,"dropRequireFailure",this))return this;K=Js(K,this);var J=F(this.requireFail,K);return J>-1&&this.requireFail.splice(J,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(K){return!!this.simultaneous[K.id]},emit:function(K){var J=this,re=this.state;function Te(We){J.manager.emit(We,K)}re<No&&Te(J.options.event+Vn(re)),Te(J.options.event),K.additionalEvent&&Te(K.additionalEvent),re>=No&&Te(J.options.event+Vn(re))},tryEmit:function(K){if(this.canEmit())return this.emit(K);this.state=ki},canEmit:function(){for(var K=0;K<this.requireFail.length;){if(!(this.requireFail[K].state&(ki|Oi)))return!1;K++}return!0},recognize:function(K){var J=m({},K);if(!E(this.options.enable,[this,J])){this.reset(),this.state=ki;return}this.state&(ya|nc|ki)&&(this.state=Oi),this.state=this.process(J),this.state&(br|ko|No|nc)&&this.tryEmit(J)},process:function(K){},getTouchAction:function(){},reset:function(){}};function Vn(K){return K&nc?"cancel":K&No?"end":K&ko?"move":K&br?"start":""}function Dn(K){return K==oe?"down":K==B?"up":K==ke?"left":K==Re?"right":""}function Js(K,J){var re=J.manager;return re?re.get(K):K}function jn(){vi.apply(this,arguments)}x(jn,vi,{defaults:{pointers:1},attrTest:function(K){var J=this.options.pointers;return J===0||K.pointers.length===J},process:function(K){var J=this.state,re=K.eventType,Te=J&(br|ko),We=this.attrTest(K);return Te&&(re&Ce||!We)?J|nc:Te||We?re&ue?J|No:J&br?J|ko:br:ki}});function ri(){jn.apply(this,arguments),this.pX=null,this.pY=null}x(ri,jn,{defaults:{event:"pan",threshold:10,pointers:1,direction:Y},getTouchAction:function(){var K=this.options.direction,J=[];return K&ie&&J.push(_r),K&q&&J.push(gi),J},directionTest:function(K){var J=this.options,re=!0,Te=K.distance,We=K.direction,ut=K.deltaX,tn=K.deltaY;return We&J.direction||(J.direction&ie?(We=ut===0?pe:ut<0?ke:Re,re=ut!=this.pX,Te=Math.abs(K.deltaX)):(We=tn===0?pe:tn<0?B:oe,re=tn!=this.pY,Te=Math.abs(K.deltaY))),K.direction=We,re&&Te>J.threshold&&We&J.direction},attrTest:function(K){return jn.prototype.attrTest.call(this,K)&&(this.state&br||!(this.state&br)&&this.directionTest(K))},emit:function(K){this.pX=K.deltaX,this.pY=K.deltaY;var J=Dn(K.direction);J&&(K.additionalEvent=this.options.event+J),this._super.emit.call(this,K)}});function _a(){jn.apply(this,arguments)}x(_a,jn,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ni]},attrTest:function(K){return this._super.attrTest.call(this,K)&&(Math.abs(K.scale-1)>this.options.threshold||this.state&br)},emit:function(K){if(K.scale!==1){var J=K.scale<1?"in":"out";K.additionalEvent=this.options.event+J}this._super.emit.call(this,K)}});function nl(){vi.apply(this,arguments),this._timer=null,this._input=null}x(nl,vi,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[un]},process:function(K){var J=this.options,re=K.pointers.length===J.pointers,Te=K.distance<J.threshold,We=K.deltaTime>J.time;if(this._input=K,!Te||!re||K.eventType&(ue|Ce)&&!We)this.reset();else if(K.eventType&Oe)this.reset(),this._timer=d(function(){this.state=ya,this.tryEmit()},J.time,this);else if(K.eventType&ue)return ya;return ki},reset:function(){clearTimeout(this._timer)},emit:function(K){this.state===ya&&(K&&K.eventType&ue?this.manager.emit(this.options.event+"up",K):(this._input.timeStamp=u(),this.manager.emit(this.options.event,this._input)))}});function Ni(){jn.apply(this,arguments)}x(Ni,jn,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ni]},attrTest:function(K){return this._super.attrTest.call(this,K)&&(Math.abs(K.rotation)>this.options.threshold||this.state&br)}});function jd(){jn.apply(this,arguments)}x(jd,jn,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:ie|q,pointers:1},getTouchAction:function(){return ri.prototype.getTouchAction.call(this)},attrTest:function(K){var J=this.options.direction,re;return J&(ie|q)?re=K.overallVelocity:J&ie?re=K.overallVelocityX:J&q&&(re=K.overallVelocityY),this._super.attrTest.call(this,K)&&J&K.offsetDirection&&K.distance>this.options.threshold&&K.maxPointers==this.options.pointers&&c(re)>this.options.velocity&&K.eventType&ue},emit:function(K){var J=Dn(K.offsetDirection);J&&this.manager.emit(this.options.event+J,K),this.manager.emit(this.options.event,K)}});function Gd(){vi.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}x(Gd,vi,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[yn]},process:function(K){var J=this.options,re=K.pointers.length===J.pointers,Te=K.distance<J.threshold,We=K.deltaTime<J.time;if(this.reset(),K.eventType&Oe&&this.count===0)return this.failTimeout();if(Te&&We&&re){if(K.eventType!=ue)return this.failTimeout();var ut=this.pTime?K.timeStamp-this.pTime<J.interval:!0,tn=!this.pCenter||gt(this.pCenter,K.center)<J.posThreshold;this.pTime=K.timeStamp,this.pCenter=K.center,!tn||!ut?this.count=1:this.count+=1,this._input=K;var dr=this.count%J.taps;if(dr===0)return this.hasRequireFailures()?(this._timer=d(function(){this.state=ya,this.tryEmit()},J.interval,this),br):ya}return ki},failTimeout:function(){return this._timer=d(function(){this.state=ki},this.options.interval,this),ki},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==ya&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Do(K,J){return J=J||{},J.recognizers=w(J.recognizers,Do.defaults.preset),new ys(K,J)}Do.VERSION="2.0.7",Do.defaults={domEvents:!1,touchAction:Zi,enable:!0,inputTarget:null,inputClass:null,preset:[[Ni,{enable:!1}],[_a,{enable:!1},["rotate"]],[jd,{direction:ie}],[ri,{direction:ie},["swipe"]],[Gd],[Gd,{event:"doubletap",taps:2},["tap"]],[nl]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var zf=1,Bg=2;function ys(K,J){this.options=m({},Do.defaults,J||{}),this.options.inputTarget=this.options.inputTarget||K,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=K,this.input=de(this),this.touchAction=new Xt(this,this.options.touchAction),l_(this,!0),f(this.options.recognizers,function(re){var Te=this.add(new re[0](re[1]));re[2]&&Te.recognizeWith(re[2]),re[3]&&Te.requireFailure(re[3])},this)}ys.prototype={set:function(K){return m(this.options,K),K.touchAction&&this.touchAction.update(),K.inputTarget&&(this.input.destroy(),this.input.target=K.inputTarget,this.input.init()),this},stop:function(K){this.session.stopped=K?Bg:zf},recognize:function(K){var J=this.session;if(!J.stopped){this.touchAction.preventDefaults(K);var re,Te=this.recognizers,We=J.curRecognizer;(!We||We&&We.state&ya)&&(We=J.curRecognizer=null);for(var ut=0;ut<Te.length;)re=Te[ut],J.stopped!==Bg&&(!We||re==We||re.canRecognizeWith(We))?re.recognize(K):re.reset(),!We&&re.state&(br|ko|No)&&(We=J.curRecognizer=re),ut++}},get:function(K){if(K instanceof vi)return K;for(var J=this.recognizers,re=0;re<J.length;re++)if(J[re].options.event==K)return J[re];return null},add:function(K){if(h(K,"add",this))return this;var J=this.get(K.options.event);return J&&this.remove(J),this.recognizers.push(K),K.manager=this,this.touchAction.update(),K},remove:function(K){if(h(K,"remove",this))return this;if(K=this.get(K),K){var J=this.recognizers,re=F(J,K);re!==-1&&(J.splice(re,1),this.touchAction.update())}return this},on:function(K,J){if(K!==i&&J!==i){var re=this.handlers;return f(N(K),function(Te){re[Te]=re[Te]||[],re[Te].push(J)}),this}},off:function(K,J){if(K!==i){var re=this.handlers;return f(N(K),function(Te){J?re[Te]&&re[Te].splice(F(re[Te],J),1):delete re[Te]}),this}},emit:function(K,J){this.options.domEvents&&AC(K,J);var re=this.handlers[K]&&this.handlers[K].slice();if(!(!re||!re.length)){J.type=K,J.preventDefault=function(){J.srcEvent.preventDefault()};for(var Te=0;Te<re.length;)re[Te](J),Te++}},destroy:function(){this.element&&l_(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function l_(K,J){var re=K.element;if(re.style){var Te;f(K.options.cssProps,function(We,ut){Te=R(re.style,ut),J?(K.oldCssProps[Te]=re.style[Te],re.style[Te]=We):re.style[Te]=K.oldCssProps[Te]||""}),J||(K.oldCssProps={})}}function AC(K,J){var re=n.createEvent("Event");re.initEvent(K,!0,!0),re.gesture=J,J.target.dispatchEvent(re)}m(Do,{INPUT_START:Oe,INPUT_MOVE:ae,INPUT_END:ue,INPUT_CANCEL:Ce,STATE_POSSIBLE:Oi,STATE_BEGAN:br,STATE_CHANGED:ko,STATE_ENDED:No,STATE_RECOGNIZED:ya,STATE_CANCELLED:nc,STATE_FAILED:ki,DIRECTION_NONE:pe,DIRECTION_LEFT:ke,DIRECTION_RIGHT:Re,DIRECTION_UP:B,DIRECTION_DOWN:oe,DIRECTION_HORIZONTAL:ie,DIRECTION_VERTICAL:q,DIRECTION_ALL:Y,Manager:ys,Input:he,TouchAction:Xt,TouchInput:vt,MouseInput:kt,PointerEventInput:le,TouchMouseInput:Kt,SingleTouchInput:ct,Recognizer:vi,AttrRecognizer:jn,Tap:Gd,Pan:ri,Swipe:jd,Pinch:_a,Rotate:Ni,Press:nl,on:T,off:C,each:f,merge:y,extend:_,assign:m,inherit:x,bindFn:b,prefixed:R});var Fg=typeof e<"u"?e:typeof self<"u"?self:{};Fg.Hammer=Do,typeof i=="function"&&i.amd?i(function(){return Do}):t.exports?t.exports=Do:e[r]=Do})(window,document,"Hammer")})(qQ);var i_=qQ.exports;const R6e=Ad(i_),vl=yO({__proto__:null,default:R6e},[i_]),ZQ=1,QQ=2,QL=4,P6e={mousedown:ZQ,mousemove:QQ,mouseup:QL};function I6e(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return!0;return!1}function M6e(t){const e=t.prototype.handler;t.prototype.handler=function(r){const i=this.store;r.button>0&&r.type==="pointerdown"&&(I6e(i,s=>s.pointerId===r.pointerId)||i.push(r)),e.call(this,r)}}function L6e(t){t.prototype.handler=function(n){let r=P6e[n.type];r&ZQ&&n.button>=0&&(this.pressed=!0),r&QQ&&n.which===0&&(r=QL),this.pressed&&(r&QL&&(this.pressed=!1),this.callback(this.manager,r,{pointers:[n],changedPointers:[n],pointerType:"mouse",srcEvent:n}))}}M6e(i_.PointerEventInput);L6e(i_.MouseInput);const O6e=i_.Manager;class EC{constructor(e,n,r){this.element=e,this.callback=n,this.options={enable:!0,...r}}}const k6e=vl?[[vl.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[vl.Rotate,{enable:!1}],[vl.Pinch,{enable:!1}],[vl.Swipe,{enable:!1}],[vl.Pan,{threshold:0,enable:!1}],[vl.Press,{enable:!1}],[vl.Tap,{event:"doubletap",taps:2,enable:!1}],[vl.Tap,{event:"anytap",enable:!1}],[vl.Tap,{enable:!1}]]:null,yj={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},N6e={doubletap:["tap"]},D6e={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},kD={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},B6e={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},_j={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},F6e=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",sm=typeof window<"u"?window:global;let JL=!1;try{const t={get passive(){return JL=!0,!0}};sm.addEventListener("test",null,t),sm.removeEventListener("test",null)}catch{JL=!1}const U6e=F6e.indexOf("firefox")!==-1,{WHEEL_EVENTS:z6e}=kD,bj="wheel",xj=4.000244140625,$6e=40,j6e=.25;class G6e extends EC{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{if(!this.options.enable)return;let s=i.deltaY;sm.WheelEvent&&(U6e&&i.deltaMode===sm.WheelEvent.DOM_DELTA_PIXEL&&(s/=sm.devicePixelRatio),i.deltaMode===sm.WheelEvent.DOM_DELTA_LINE&&(s*=$6e)),s!==0&&s%xj===0&&(s=Math.floor(s/xj)),i.shiftKey&&s&&(s=s*j6e),this.callback({type:bj,center:{x:i.clientX,y:i.clientY},delta:-s,srcEvent:i,pointerType:"mouse",target:i.target})},this.events=(this.options.events||[]).concat(z6e),this.events.forEach(i=>e.addEventListener(i,this.handleEvent,JL?{passive:!1}:!1))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===bj&&(this.options.enable=n)}}const{MOUSE_EVENTS:H6e}=kD,Ej="pointermove",wj="pointerover",Tj="pointerout",Sj="pointerenter",Cj="pointerleave";class V6e extends EC{constructor(e,n,r){super(e,n,r),this.handleEvent=s=>{this.handleOverEvent(s),this.handleOutEvent(s),this.handleEnterEvent(s),this.handleLeaveEvent(s),this.handleMoveEvent(s)},this.pressed=!1;const{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,this.events=(this.options.events||[]).concat(H6e),this.events.forEach(s=>e.addEventListener(s,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===Ej&&(this.enableMoveEvent=n),e===wj&&(this.enableOverEvent=n),e===Tj&&(this.enableOutEvent=n),e===Sj&&(this.enableEnterEvent=n),e===Cj&&(this.enableLeaveEvent=n)}handleOverEvent(e){this.enableOverEvent&&e.type==="mouseover"&&this._emit(wj,e)}handleOutEvent(e){this.enableOutEvent&&e.type==="mouseout"&&this._emit(Tj,e)}handleEnterEvent(e){this.enableEnterEvent&&e.type==="mouseenter"&&this._emit(Sj,e)}handleLeaveEvent(e){this.enableLeaveEvent&&e.type==="mouseleave"&&this._emit(Cj,e)}handleMoveEvent(e){if(this.enableMoveEvent)switch(e.type){case"mousedown":e.button>=0&&(this.pressed=!0);break;case"mousemove":e.which===0&&(this.pressed=!1),this.pressed||this._emit(Ej,e);break;case"mouseup":this.pressed=!1;break}}_emit(e,n){this.callback({type:e,center:{x:n.clientX,y:n.clientY},srcEvent:n,pointerType:"mouse",target:n.target})}}const{KEY_EVENTS:W6e}=kD,Aj="keydown",Rj="keyup";class X6e extends EC{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{const s=i.target||i.srcElement;s.tagName==="INPUT"&&s.type==="text"||s.tagName==="TEXTAREA"||(this.enableDownEvent&&i.type==="keydown"&&this.callback({type:Aj,srcEvent:i,key:i.key,target:i.target}),this.enableUpEvent&&i.type==="keyup"&&this.callback({type:Rj,srcEvent:i,key:i.key,target:i.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(W6e),e.tabIndex=this.options.tabIndex||0,e.style.outline="none",this.events.forEach(i=>e.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(e=>this.element.removeEventListener(e,this.handleEvent))}enableEventType(e,n){e===Aj&&(this.enableDownEvent=n),e===Rj&&(this.enableUpEvent=n)}}const Pj="contextmenu";class Y6e extends EC{constructor(e,n,r){super(e,n,r),this.handleEvent=i=>{this.options.enable&&this.callback({type:Pj,center:{x:i.clientX,y:i.clientY},srcEvent:i,pointerType:"mouse",target:i.target})},e.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(e,n){e===Pj&&(this.options.enable=n)}}const eO=1,mT=2,tO=4,K6e={pointerdown:eO,pointermove:mT,pointerup:tO,mousedown:eO,mousemove:mT,mouseup:tO},q6e=1,Z6e=2,Q6e=3,J6e=0,e$e=1,t$e=2,n$e=1,r$e=2,i$e=4;function s$e(t){const e=K6e[t.srcEvent.type];if(!e)return null;const{buttons:n,button:r,which:i}=t.srcEvent;let s=!1,o=!1,a=!1;return e===tO||e===mT&&!Number.isFinite(n)?(s=i===q6e,o=i===Z6e,a=i===Q6e):e===mT?(s=!!(n&n$e),o=!!(n&i$e),a=!!(n&r$e)):e===eO&&(s=r===J6e,o=r===e$e,a=r===t$e),{leftButton:s,middleButton:o,rightButton:a}}function o$e(t,e){const n=t.center;if(!n)return null;const r=e.getBoundingClientRect(),i=r.width/e.offsetWidth||1,s=r.height/e.offsetHeight||1,o={x:(n.x-r.left-e.clientLeft)/i,y:(n.y-r.top-e.clientTop)/s};return{center:n,offsetCenter:o}}const p2={srcElement:"root",priority:0};class a$e{constructor(e){this.handleEvent=n=>{if(this.isEmpty())return;const r=this._normalizeEvent(n);let i=n.srcEvent.target;for(;i&&i!==r.rootElement;){if(this._emit(r,i),r.handled)return;i=i.parentNode}this._emit(r,"root")},this.eventManager=e,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(e,n,r,i=!1,s=!1){const{handlers:o,handlersByElement:a}=this;let l=p2;typeof r=="string"||r&&r.addEventListener?l={...p2,srcElement:r}:r&&(l={...p2,...r});let c=a.get(l.srcElement);c||(c=[],a.set(l.srcElement,c));const u={type:e,handler:n,srcElement:l.srcElement,priority:l.priority};i&&(u.once=!0),s&&(u.passive=!0),o.push(u),this._active=this._active||!u.passive;let d=c.length-1;for(;d>=0&&!(c[d].priority>=u.priority);)d--;c.splice(d+1,0,u)}remove(e,n){const{handlers:r,handlersByElement:i}=this;for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.type===e&&o.handler===n){r.splice(s,1);const a=i.get(o.srcElement);a.splice(a.indexOf(o),1),a.length===0&&i.delete(o.srcElement)}}this._active=r.some(s=>!s.passive)}_emit(e,n){const r=this.handlersByElement.get(n);if(r){let i=!1;const s=()=>{e.handled=!0},o=()=>{e.handled=!0,i=!0},a=[];for(let l=0;l<r.length;l++){const{type:c,handler:u,once:d}=r[l];if(u({...e,type:c,stopPropagation:s,stopImmediatePropagation:o}),d&&a.push(r[l]),i)break}for(let l=0;l<a.length;l++){const{type:c,handler:u}=a[l];this.remove(c,u)}}}_normalizeEvent(e){const n=this.eventManager.getElement();return{...e,...s$e(e),...o$e(e,n),preventDefault:()=>{e.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:n}}}const l$e={events:null,recognizers:null,recognizerOptions:{},Manager:O6e,touchAction:"none",tabIndex:0};class c$e{constructor(e=null,n){this._onBasicInput=i=>{const{srcEvent:s}=i,o=D6e[s.type];o&&this.manager.emit(o,i)},this._onOtherEvent=i=>{this.manager.emit(i.type,i)},this.options={...l$e,...n},this.events=new Map,this.setElement(e);const{events:r}=this.options;r&&this.on(r)}getElement(){return this.element}setElement(e){if(this.element&&this.destroy(),this.element=e,!e)return;const{options:n}=this,r=n.Manager;this.manager=new r(e,{touchAction:n.touchAction,recognizers:n.recognizers||k6e}).on("hammer.input",this._onBasicInput),n.recognizers||Object.keys(yj).forEach(i=>{const s=this.manager.get(i);s&&yj[i].forEach(o=>{s.recognizeWith(o)})});for(const i in n.recognizerOptions){const s=this.manager.get(i);if(s){const o=n.recognizerOptions[i];delete o.enable,s.set(o)}}this.wheelInput=new G6e(e,this._onOtherEvent,{enable:!1}),this.moveInput=new V6e(e,this._onOtherEvent,{enable:!1}),this.keyInput=new X6e(e,this._onOtherEvent,{enable:!1,tabIndex:n.tabIndex}),this.contextmenuInput=new Y6e(e,this._onOtherEvent,{enable:!1});for(const[i,s]of this.events)s.isEmpty()||(this._toggleRecognizer(s.recognizerName,!0),this.manager.on(i,s.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(e,n,r){this._addEventHandler(e,n,r,!1)}once(e,n,r){this._addEventHandler(e,n,r,!0)}watch(e,n,r){this._addEventHandler(e,n,r,!1,!0)}off(e,n){this._removeEventHandler(e,n)}_toggleRecognizer(e,n){const{manager:r}=this;if(!r)return;const i=r.get(e);if(i&&i.options.enable!==n){i.set({enable:n});const s=N6e[e];s&&!this.options.recognizers&&s.forEach(o=>{const a=r.get(o);n?(a.requireFailure(e),i.dropRequireFailure(o)):a.dropRequireFailure(e)})}this.wheelInput.enableEventType(e,n),this.moveInput.enableEventType(e,n),this.keyInput.enableEventType(e,n),this.contextmenuInput.enableEventType(e,n)}_addEventHandler(e,n,r,i,s){if(typeof e!="string"){r=n;for(const u in e)this._addEventHandler(u,e[u],r,i,s);return}const{manager:o,events:a}=this,l=_j[e]||e;let c=a.get(l);c||(c=new a$e(this),a.set(l,c),c.recognizerName=B6e[l]||l,o&&o.on(l,c.handleEvent)),c.add(e,n,r,i,s),c.isEmpty()||this._toggleRecognizer(c.recognizerName,!0)}_removeEventHandler(e,n){if(typeof e!="string"){for(const o in e)this._removeEventHandler(o,e[o]);return}const{events:r}=this,i=_j[e]||e,s=r.get(i);if(s&&(s.remove(e,n),s.isEmpty())){const{recognizerName:o}=s;let a=!1;for(const l of r.values())if(l.recognizerName===o&&!l.isEmpty()){a=!0;break}a||this._toggleRecognizer(o,!1)}}}function ch(){}const u$e=({isDragging:t})=>t?"grabbing":"grab",JQ={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:ch,onResize:ch,onViewStateChange:ch,onInteractionStateChange:ch,onBeforeRender:ch,onAfterRender:ch,onLoad:ch,onError:t=>Yn.error(t.message,t.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:u$e,getTooltip:null,debug:!1,drawPickingColors:!1};class wC{constructor(e){W(this,"props",void 0),W(this,"width",0),W(this,"height",0),W(this,"userData",{}),W(this,"canvas",null),W(this,"viewManager",null),W(this,"layerManager",null),W(this,"effectManager",null),W(this,"deckRenderer",null),W(this,"deckPicker",null),W(this,"eventManager",null),W(this,"tooltip",null),W(this,"metrics",void 0),W(this,"animationLoop",void 0),W(this,"stats",void 0),W(this,"viewState",void 0),W(this,"cursorState",void 0),W(this,"_needsRedraw",void 0),W(this,"_pickRequest",void 0),W(this,"_lastPointerDownInfo",null),W(this,"_metricsCounter",void 0),W(this,"_onPointerMove",n=>{const{_pickRequest:r}=this;if(n.type==="pointerleave")r.x=-1,r.y=-1,r.radius=0;else{if(n.leftButton||n.rightButton)return;{const i=n.offsetCenter;if(!i)return;r.x=i.x,r.y=i.y,r.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:r.x,y:r.y}),r.event=n}),W(this,"_onEvent",n=>{const r=h$[n.type],i=n.offsetCenter;if(!r||!i||!this.layerManager)return;const s=this.layerManager.getLayers(),o=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:s,viewports:this.getViewports(i)},this._lastPointerDownInfo),{layer:a}=o,l=a&&(a[r.handler]||a.props[r.handler]),c=this.props[r.handler];let u=!1;l&&(u=l.call(a,o,n)),!u&&c&&c(o,n)}),W(this,"_onPointerDown",n=>{const r=n.offsetCenter,i=this._pick("pickObject","pickObject Time",{x:r.x,y:r.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=i.result[0]||i.emptyInfo}),this.props={...JQ,...e},e=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},e.viewState&&e.initialViewState&&Yn.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),qZ()==="IE"&&Yn.warn("IE 11 is not supported")(),this.viewState=e.initialViewState,e.gl||typeof document<"u"&&(this.canvas=this._createCanvas(e)),this.animationLoop=this._createAnimationLoop(e),this.stats=new vD({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(e),e._typedArrayManagerProps&&fg.setOptions(e._typedArrayManagerProps),this.animationLoop.start()}finalize(){var e,n,r,i,s,o,a,l;if((e=this.animationLoop)===null||e===void 0||e.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,(n=this.layerManager)===null||n===void 0||n.finalize(),this.layerManager=null,(r=this.viewManager)===null||r===void 0||r.finalize(),this.viewManager=null,(i=this.effectManager)===null||i===void 0||i.finalize(),this.effectManager=null,(s=this.deckRenderer)===null||s===void 0||s.finalize(),this.deckRenderer=null,(o=this.deckPicker)===null||o===void 0||o.finalize(),this.deckPicker=null,(a=this.eventManager)===null||a===void 0||a.destroy(),this.eventManager=null,(l=this.tooltip)===null||l===void 0||l.remove(),this.tooltip=null,!this.props.canvas&&!this.props.gl&&this.canvas){var c;(c=this.canvas.parentElement)===null||c===void 0||c.removeChild(this.canvas),this.canvas=null}}setProps(e){this.stats.get("setProps Time").timeStart(),"onLayerHover"in e&&Yn.removed("onLayerHover","onHover")(),"onLayerClick"in e&&Yn.removed("onLayerClick","onClick")(),e.initialViewState&&!kl(this.props.initialViewState,e.initialViewState,3)&&(this.viewState=e.initialViewState),Object.assign(this.props,e),this._setCanvasSize(this.props);const n=Object.create(this.props);Object.assign(n,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(n),this.layerManager&&(this.viewManager.setProps(n),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(n),this.effectManager.setProps(n),this.deckRenderer.setProps(n),this.deckPicker.setProps(n)),this.stats.get("setProps Time").timeEnd()}needsRedraw(e={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let n=this._needsRedraw;e.clearRedrawFlags&&(this._needsRedraw=!1);const r=this.viewManager.needsRedraw(e),i=this.layerManager.needsRedraw(e),s=this.effectManager.needsRedraw(e),o=this.deckRenderer.needsRedraw(e);return n=n||r||i||s||o,n}redraw(e){if(!this.layerManager)return;let n=this.needsRedraw({clearRedrawFlags:!0});n=e||n,n&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(n):this._drawLayers(n))}get isInitialized(){return this.viewManager!==null}getViews(){return Ai(this.viewManager),this.viewManager.views}getViewports(e){return Ai(this.viewManager),this.viewManager.getViewports(e)}getCanvas(){return this.canvas}pickObject(e){const n=this._pick("pickObject","pickObject Time",e).result;return n.length?n[0]:null}pickMultipleObjects(e){return e.depth=e.depth||10,this._pick("pickObject","pickMultipleObjects Time",e).result}pickObjects(e){return this._pick("pickObjects","pickObjects Time",e)}_addResources(e,n=!1){for(const r in e)this.layerManager.resourceManager.add({resourceId:r,data:e[r],forceUpdate:n})}_removeResources(e){for(const n of e)this.layerManager.resourceManager.remove(n)}_addDefaultEffect(e){this.effectManager.addDefaultEffect(e)}_pick(e,n,r){Ai(this.deckPicker);const{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(n).timeStart();const s=this.deckPicker[e]({layers:this.layerManager.getLayers(r),views:this.viewManager.getViews(),viewports:this.getViewports(r),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...r});return i.get(n).timeEnd(),s}_createCanvas(e){let n=e.canvas;return typeof n=="string"&&(n=document.getElementById(n),Ai(n)),n||(n=document.createElement("canvas"),n.id=e.id||"deckgl-overlay",(e.parent||document.body).appendChild(n)),Object.assign(n.style,e.style),n}_setCanvasSize(e){if(!this.canvas)return;const{width:n,height:r}=e;if(n||n===0){const s=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.width=s}if(r||r===0){var i;const s=Number.isFinite(r)?"".concat(r,"px"):r;this.canvas.style.position=((i=e.style)===null||i===void 0?void 0:i.position)||"absolute",this.canvas.style.height=s}}_updateCanvasSize(){var e,n;const{canvas:r}=this;if(!r)return;const i=(e=r.clientWidth)!==null&&e!==void 0?e:r.width,s=(n=r.clientHeight)!==null&&n!==void 0?n:r.height;if(i!==this.width||s!==this.height){var o,a;this.width=i,this.height=s,(o=this.viewManager)===null||o===void 0||o.setProps({width:i,height:s}),(a=this.layerManager)===null||a===void 0||a.activateViewport(this.getViewports()[0]),this.props.onResize({width:i,height:s})}}_createAnimationLoop(e){const{width:n,height:r,gl:i,glOptions:s,debug:o,onError:a,onBeforeRender:l,onAfterRender:c,useDevicePixels:u}=e;return new f5e({width:n,height:r,useDevicePixels:u,autoResizeDrawingBuffer:!i,autoResizeViewport:!1,gl:i,onCreateContext:d=>rQ({...s,...d,canvas:this.canvas,debug:o,onContextLost:()=>this._onContextLost()}),onInitialize:d=>this._setGLContext(d.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:l,onAfterRender:c,onError:a})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let e=this.props.views||[new OD({id:"default-view"})];return e=Array.isArray(e)?e:[e],e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){const{onError:e}=this.props;this.animationLoop&&e&&e(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:e}=this;if(e.event){const{result:r,emptyInfo:i}=this._pick("pickObject","pickObject Time",e);this.cursorState.isHovering=r.length>0;let s=i,o=!1;for(const a of r){var n;s=a,o=((n=a.layer)===null||n===void 0?void 0:n.onHover(a,e.event))||o}if(!o&&this.props.onHover&&this.props.onHover(s,e.event),this.props.getTooltip&&this.tooltip){const a=this.props.getTooltip(s);this.tooltip.setTooltip(a,s.x,s.y)}e.event=null}}_updateCursor(){const e=this.props.parent||this.canvas;e&&(e.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(e){if(this.layerManager)return;this.canvas||(this.canvas=e.canvas,gD(e,{enable:!0,copyState:!0})),this.tooltip=new A6e(this.canvas),Gc(e,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(e);const n=new LQ;n.play(),this.animationLoop.attachTimeline(n),this.eventManager=new c$e(this.props.parent||e.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const i in h$)this.eventManager.on(i,this._onEvent);this.viewManager=new e6e({timeline:n,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const r=this.viewManager.getViewports()[0];this.layerManager=new J8e(e,{deck:this,stats:this.stats,viewport:r,timeline:n}),this.effectManager=new g6e,this.deckRenderer=new _6e(e),this.deckPicker=new S6e(e),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(e,n){const{gl:r}=this.layerManager.context;Gc(r,this.props.parameters),this.props.onBeforeRender({gl:r}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...n}),this.props.onAfterRender({gl:r})}_onRenderFrame(e){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),Yn.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(e){const n=this.props.onViewStateChange(e)||e.viewState;this.viewState&&(this.viewState={...this.viewState,[e.viewId]:n},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(e){this.cursorState.isDragging=e.isDragging||!1,this.props.onInteractionStateChange(e)}_getFrameStats(){const{stats:e}=this;e.get("frameRate").timeEnd(),e.get("frameRate").timeStart();const n=this.animationLoop.stats;e.get("GPU Time").addTime(n.get("GPU Time").lastTiming),e.get("CPU Time").addTime(n.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:e,stats:n}=this;e.fps=n.get("frameRate").getHz(),e.setPropsTime=n.get("setProps Time").time,e.updateAttributesTime=n.get("Update Attributes").time,e.framesRedrawn=n.get("Redraw Count").count,e.pickTime=n.get("pickObject Time").time+n.get("pickMultipleObjects Time").time+n.get("pickObjects Time").time,e.pickCount=n.get("Pick Count").count,e.gpuTime=n.get("GPU Time").time,e.cpuTime=n.get("CPU Time").time,e.gpuTimePerFrame=n.get("GPU Time").getAverageTime(),e.cpuTimePerFrame=n.get("CPU Time").getAverageTime();const r=Oh.get("Memory Usage");e.bufferMemory=r.get("Buffer Memory").count,e.textureMemory=r.get("Texture Memory").count,e.renderbufferMemory=r.get("Renderbuffer Memory").count,e.gpuMemory=r.get("GPU Memory").count}}W(wC,"defaultProps",JQ);W(wC,"VERSION",yBe);class m2{constructor(e,n){W(this,"opts",void 0),W(this,"source",void 0),this.opts=n,this.source=e}get value(){return this.source.value}getValue(){const e=this.source.getBuffer(),n=this.getAccessor();if(e)return[e,n];const{value:r}=this.source,{size:i}=n;let s=r;if(r&&r.length!==i){s=new Float32Array(i);const o=n.elementOffset||0;for(let a=0;a<i;++a)s[a]=r[o+a]}return s}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function d$e(t){switch(t){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}function RE(t){return t.stride||t.size*t.bytesPerElement}function eJ(t,e){e.offset&&Yn.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const n=RE(t),r=e.vertexOffset!==void 0?e.vertexOffset:t.vertexOffset||0,i=e.elementOffset||0,s=r*n+i*t.bytesPerElement+(t.offset||0);return{...e,offset:s,stride:n}}function h$e(t,e){const n=eJ(t,e);return{high:n,low:{...n,offset:n.offset+t.size*4}}}class f$e{constructor(e,n,r){W(this,"gl",void 0),W(this,"id",void 0),W(this,"size",void 0),W(this,"settings",void 0),W(this,"value",void 0),W(this,"doublePrecision",void 0),W(this,"_buffer",void 0),W(this,"state",void 0),this.gl=e,this.id=n.id||"",this.size=n.size||1;const i=n.logicalType||n.type,s=i===5130;let{defaultValue:o}=n;o=Number.isFinite(o)?[o]:o||new Array(this.size).fill(0);let a;s?a=5126:!i&&n.isIndexed?a=e&&GFe(e,sr.ELEMENT_INDEX_UINT32)?5125:5123:a=i||5126;let l=d$e(i||a||5126);this.doublePrecision=s,s&&n.fp64===!1&&(l=Float32Array),this.value=null,this.settings={...n,defaultType:l,defaultValue:o,logicalType:i,type:a,size:this.size,bytesPerElement:l.BYTES_PER_ELEMENT},this.state={...r,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:e,type:n}=this.settings;this._buffer=new kn(this.gl,{id:this.id,target:e?34963:34962,accessor:{type:n}})}return this._buffer}get byteOffset(){const e=this.getAccessor();return e.vertexOffset?e.vertexOffset*RE(e):0}get numInstances(){return this.state.numInstances}set numInstances(e){this.state.numInstances=e}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),fg.release(this.state.allocatedValue)}getShaderAttributes(e,n){if(this.doublePrecision){const r={},i=this.value instanceof Float64Array,s=h$e(this.getAccessor(),n||{});return r[e]=new m2(this,s.high),r["".concat(e,"64Low")]=i?new m2(this,s.low):new Float32Array(this.size),r}if(n){const r=eJ(this.getAccessor(),n);return{[e]:new m2(this,r)}}return{[e]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let e=null;if(this.state.constant&&this.value){const n=Array.from(this.value);e=[n,n]}else{const{value:n,numInstances:r,size:i}=this,s=r*i;if(n&&s&&n.length>=s){const o=new Array(i).fill(1/0),a=new Array(i).fill(-1/0);for(let l=0;l<s;)for(let c=0;c<i;c++){const u=n[l++];u<o[c]&&(o[c]=u),u>a[c]&&(a[c]=u)}e=[o,a]}}return this.state.bounds=e,e}setData(e){const{state:n}=this;let r;ArrayBuffer.isView(e)?r={value:e}:e instanceof kn?r={buffer:e}:r=e;const i={...this.settings,...r};if(n.bufferAccessor=i,n.bounds=null,r.constant){let s=r.value;if(s=this._normalizeValue(s,[],0),this.settings.normalized&&(s=this.normalizeConstant(s)),!(!n.constant||!this._areValuesEqual(s,this.value)))return!1;n.externalBuffer=null,n.constant=!0,this.value=s}else if(r.buffer){const s=r.buffer;n.externalBuffer=s,n.constant=!1,this.value=r.value||null;const o=r.value instanceof Float64Array;i.type=r.type||s.accessor.type,i.bytesPerElement=s.accessor.BYTES_PER_ELEMENT*(o?2:1),i.stride=RE(i)}else if(r.value){this._checkExternalBuffer(r);let s=r.value;n.externalBuffer=null,n.constant=!1,this.value=s,i.bytesPerElement=s.BYTES_PER_ELEMENT,i.stride=RE(i);const{buffer:o,byteOffset:a}=this;this.doublePrecision&&s instanceof Float64Array&&(s=d2(s,i));const l=s.byteLength+a+i.stride*2;o.byteLength<l&&o.reallocate(l),o.setAccessor(null),o.subData({data:s,offset:a}),i.type=r.type||o.accessor.type}return!0}updateSubBuffer(e={}){this.state.bounds=null;const n=this.value,{startOffset:r=0,endOffset:i}=e;this.buffer.subData({data:this.doublePrecision&&n instanceof Float64Array?d2(n,{size:this.size,startIndex:r,endIndex:i}):n.subarray(r,i),offset:r*n.BYTES_PER_ELEMENT+this.byteOffset})}allocate(e,n=!1){const{state:r}=this,i=r.allocatedValue,s=fg.allocate(i,e+1,{size:this.size,type:this.settings.defaultType,copy:n});this.value=s;const{buffer:o,byteOffset:a}=this;return o.byteLength<s.byteLength+a&&(o.reallocate(s.byteLength+a),n&&i&&o.subData({data:i instanceof Float64Array?d2(i,this):i,offset:a})),r.allocatedValue=s,r.constant=!1,r.externalBuffer=null,r.bufferAccessor=this.settings,!0}_checkExternalBuffer(e){const{value:n}=e;if(!ArrayBuffer.isView(n))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const r=this.settings.defaultType;let i=!1;if(this.doublePrecision&&(i=n.BYTES_PER_ELEMENT<4),i)throw new Error("Attribute ".concat(this.id," does not support ").concat(n.constructor.name));!(n instanceof r)&&this.settings.normalized&&!("normalized"in e)&&Yn.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(e){switch(this.settings.type){case 5120:return new Float32Array(e).map(n=>(n+128)/255*2-1);case 5122:return new Float32Array(e).map(n=>(n+32768)/65535*2-1);case 5121:return new Float32Array(e).map(n=>n/255);case 5123:return new Float32Array(e).map(n=>n/65535);default:return e}}_normalizeValue(e,n,r){const{defaultValue:i,size:s}=this.settings;if(Number.isFinite(e))return n[r]=e,n;if(!e){let o=s;for(;--o>=0;)n[r+o]=i[o];return n}switch(s){case 4:n[r+3]=Number.isFinite(e[3])?e[3]:i[3];case 3:n[r+2]=Number.isFinite(e[2])?e[2]:i[2];case 2:n[r+1]=Number.isFinite(e[1])?e[1]:i[1];case 1:n[r+0]=Number.isFinite(e[0])?e[0]:i[0];break;default:let o=s;for(;--o>=0;)n[r+o]=Number.isFinite(e[o])?e[o]:i[o]}return n}_areValuesEqual(e,n){if(!e||!n)return!1;const{size:r}=this;for(let i=0;i<r;i++)if(e[i]!==n[i])return!1;return!0}}const Ij=[],Mj=[];function tJ(t,e=0,n=1/0){let r=Ij;const i={index:-1,data:t,target:[]};return t?typeof t[Symbol.iterator]=="function"?r=t:t.length>0&&(Mj.length=t.length,r=Mj):r=Ij,(e>0||Number.isFinite(n))&&(r=(Array.isArray(r)?r:Array.from(r)).slice(e,n),i.index=e-1),{iterable:r,objectInfo:i}}function nJ(t){return t&&t[Symbol.asyncIterator]}function rJ(t,e){const{size:n,stride:r,offset:i,startIndices:s,nested:o}=e,a=t.BYTES_PER_ELEMENT,l=r?r/a:n,c=i?i/a:0,u=Math.floor((t.length-c)/l);return(d,{index:h,target:f})=>{if(!s){const y=h*l+c;for(let x=0;x<n;x++)f[x]=t[y+x];return f}const p=s[h],m=s[h+1]||u;let _;if(o){_=new Array(m-p);for(let y=p;y<m;y++){const x=y*l+c;f=new Array(n);for(let b=0;b<n;b++)f[b]=t[x+b];_[y-p]=f}}else if(l===n)_=t.subarray(p*n+c,m*n+c);else{_=new t.constructor((m-p)*n);let y=0;for(let x=p;x<m;x++){const b=x*l+c;for(let E=0;E<n;E++)_[y++]=t[b+E]}}return _}}const p$e=[],PE=[[0,1/0]];function m$e(t,e){if(t===PE||(e[0]<0&&(e[0]=0),e[0]>=e[1]))return t;const n=[],r=t.length;let i=0;for(let s=0;s<r;s++){const o=t[s];o[1]<e[0]?(n.push(o),i=s+1):o[0]>e[1]?n.push(o):e=[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}return n.splice(i,0,e),n}function g2(t){const{source:e,target:n,start:r=0,size:i,getData:s}=t,o=t.end||n.length,a=e.length,l=o-r;if(a>l){n.set(e.subarray(0,l),r);return}if(n.set(e,r),!s)return;let c=a;for(;c<l;){const u=s(c,e);for(let d=0;d<i;d++)n[r+c]=u[d]||0,c++}}function g$e({source:t,target:e,size:n,getData:r,sourceStartIndices:i,targetStartIndices:s}){if(!Array.isArray(s))return g2({source:t,target:e,size:n,getData:r}),e;let o=0,a=0;const l=r&&((u,d)=>r(u+a,d)),c=Math.min(i.length,s.length);for(let u=1;u<c;u++){const d=i[u]*n,h=s[u]*n;g2({source:t.subarray(o,d),target:e,start:a,end:h,size:n,getData:l}),o=d,a=h}return a<e.length&&g2({source:[],target:e,start:a,size:n,getData:l}),e}const v$e={interpolation:{duration:0,easing:t=>t},spring:{stiffness:.05,damping:.5}};function iJ(t,e){if(!t)return null;Number.isFinite(t)&&(t={type:"interpolation",duration:t});const n=t.type||"interpolation";return{...v$e[n],...e,...t,type:n}}function sJ(t,e){const n=e.getBuffer();return n?[n,{divisor:0,size:e.size,normalized:e.settings.normalized}]:e.value}function oJ(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(t,'"'))}}function aJ(t){t.push(t.shift())}function ND(t,e){const{doublePrecision:n,settings:r,value:i,size:s}=t,o=n&&i instanceof Float64Array?2:1;return(r.noAlloc?i.length:e*s)*o}function lJ({buffer:t,numInstances:e,attribute:n,fromLength:r,fromStartIndices:i,getData:s=o=>o}){const o=n.doublePrecision&&n.value instanceof Float64Array?2:1,a=n.size*o,l=n.byteOffset,c=n.startIndices,u=i&&c,d=ND(n,e),h=n.isConstant;if(!u&&r>=d)return;const f=h?n.value:n.getBuffer().getData({srcByteOffset:l});if(n.settings.normalized&&!h){const y=s;s=(x,b)=>n.normalizeConstant(y(x,b))}const p=h?(y,x)=>s(f,x):(y,x)=>s(f.subarray(y,y+a),x),m=t.getData({length:r}),_=new Float32Array(d);g$e({source:m,target:_,sourceStartIndices:i,targetStartIndices:c,size:a,getData:p}),t.byteLength<_.byteLength+l&&t.reallocate(_.byteLength+l),t.subData({data:_,offset:l})}class DD extends f$e{constructor(e,n){super(e,n,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:PE}),W(this,"constant",!1),this.settings.update=n.update||(n.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(e){this.state.startIndices=e}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:e=!1}={}){const n=this.state.needsRedraw;return this.state.needsRedraw=n&&!e,n}getUpdateTriggers(){const{accessor:e}=this.settings;return[this.id].concat(typeof e!="function"&&e||[])}supportsTransition(){return!!this.settings.transition}getTransitionSetting(e){if(!e||!this.supportsTransition())return null;const{accessor:n}=this.settings,r=this.settings.transition,i=Array.isArray(n)?e[n.find(s=>e[s])]:e[n];return iJ(i,r)}setNeedsUpdate(e=this.id,n){if(this.state.needsUpdate=this.state.needsUpdate||e,this.setNeedsRedraw(e),n){const{startRow:r=0,endRow:i=1/0}=n;this.state.updateRanges=m$e(this.state.updateRanges,[r,i])}else this.state.updateRanges=PE}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=p$e}setNeedsRedraw(e=this.id){this.state.needsRedraw=this.state.needsRedraw||e}allocate(e){const{state:n,settings:r}=this;return r.noAlloc?!1:r.update?(super.allocate(e,n.updateRanges!==PE),!0):!1}updateBuffer({numInstances:e,data:n,props:r,context:i}){if(!this.needsUpdate())return!1;const{state:{updateRanges:s},settings:{update:o,noAlloc:a}}=this;let l=!0;if(o){for(const[c,u]of s)o.call(i,this,{data:n,startRow:c,endRow:u,props:r,numInstances:e});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[c,u]of s){const d=Number.isFinite(c)?this.getVertexOffset(c):0,h=Number.isFinite(u)?this.getVertexOffset(u):a||!Number.isFinite(e)?this.value.length:e*this.size;super.updateSubBuffer({startOffset:d,endOffset:h})}this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(e){return e===void 0||typeof e=="function"?!1:(this.setData({constant:!0,value:e})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(e){const{state:n}=this;return e?(this.clearNeedsUpdate(),n.lastExternalBuffer===e||(n.lastExternalBuffer=e,this.setNeedsRedraw(),this.setData(e)),!0):(n.lastExternalBuffer=null,!1)}setBinaryValue(e,n=null){const{state:r,settings:i}=this;if(!e)return r.binaryValue=null,r.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(r.binaryValue===e)return this.clearNeedsUpdate(),!0;if(r.binaryValue=e,this.setNeedsRedraw(),i.transform||n!==this.startIndices){ArrayBuffer.isView(e)&&(e={value:e});const o=e;Ai(ArrayBuffer.isView(o.value),"invalid ".concat(i.accessor));const a=!!o.size&&o.size!==this.size;return r.binaryAccessor=rJ(o.value,{size:o.size||this.size,stride:o.stride,offset:o.offset,startIndices:n,nested:a}),!1}return this.clearNeedsUpdate(),this.setData(e),!0}getVertexOffset(e){const{startIndices:n}=this;return(n?e<n.length?n[e]:this.numInstances:e)*this.size}getShaderAttributes(){const e=this.settings.shaderAttributes||{[this.id]:null},n={};for(const r in e)Object.assign(n,super.getShaderAttributes(r,e[r]));return n}_autoUpdater(e,{data:n,startRow:r,endRow:i,props:s,numInstances:o}){if(e.constant)return;const{settings:a,state:l,value:c,size:u,startIndices:d}=e,{accessor:h,transform:f}=a,p=l.binaryAccessor||(typeof h=="function"?h:s[h]);Ai(typeof p=="function",'accessor "'.concat(h,'" is not a function'));let m=e.getVertexOffset(r);const{iterable:_,objectInfo:y}=tJ(n,r,i);for(const x of _){y.index++;let b=p(x,y);if(f&&(b=f.call(this,b)),d){const E=(y.index<d.length-1?d[y.index+1]:o)-d[y.index];if(b&&Array.isArray(b[0])){let w=m;for(const T of b)e._normalizeValue(T,c,w),w+=u}else b&&b.length>u?c.set(b,m):(e._normalizeValue(b,y.target,0),H8e({target:c,source:y.target,start:m,count:E}));m+=E*u}else e._normalizeValue(b,c,m),m+=u}}_validateAttributeUpdaters(){const{settings:e}=this;if(!(e.noAlloc||typeof e.update=="function"))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:e}=this,n=Math.min(4,this.size);if(e&&e.length>=n){let r=!0;switch(n){case 4:r=r&&Number.isFinite(e[3]);case 3:r=r&&Number.isFinite(e[2]);case 2:r=r&&Number.isFinite(e[1]);case 1:r=r&&Number.isFinite(e[0]);break;default:r=!1}if(!r)throw new Error("Illegal attribute generated for ".concat(this.id))}}}class y$e{constructor({gl:e,attribute:n,timeline:r}){W(this,"gl",void 0),W(this,"type","interpolation"),W(this,"attributeInTransition",void 0),W(this,"settings",void 0),W(this,"attribute",void 0),W(this,"transition",void 0),W(this,"currentStartIndices",void 0),W(this,"currentLength",void 0),W(this,"transform",void 0),W(this,"buffers",void 0),this.gl=e,this.transition=new r_(r),this.attribute=n,this.attributeInTransition=new DD(e,n.settings),this.currentStartIndices=n.startIndices,this.currentLength=0,this.transform=b$e(e,n);const i={byteLength:0,usage:35050};this.buffers=[new kn(e,i),new kn(e,i)]}get inProgress(){return this.transition.inProgress}start(e,n){if(e.duration<=0){this.transition.cancel();return}this.settings=e;const{gl:r,buffers:i,attribute:s}=this;aJ(i);const o={numInstances:n,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of i)lJ({buffer:a,...o});this.currentStartIndices=s.startIndices,this.currentLength=ND(s,n),this.attributeInTransition.setData({buffer:i[1],value:s.value}),this.transition.start(e),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aFrom:i[0],aTo:sJ(r,s)},feedbackBuffers:{vCurrent:i[1]}})}update(){const e=this.transition.update();if(e){const{duration:n,easing:r}=this.settings,{time:i}=this.transition;let s=i/n;r&&(s=r(s)),this.transform.run({uniforms:{time:s}})}return e}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0}}const _$e=`
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
attribute ATTRIBUTE_TYPE aFrom;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`;function b$e(t,e){const n=oJ(e.size);return new SD(t,{vs:_$e,defines:{ATTRIBUTE_TYPE:n},varyings:["vCurrent"]})}class x$e{constructor({gl:e,attribute:n,timeline:r}){W(this,"gl",void 0),W(this,"type","spring"),W(this,"attributeInTransition",void 0),W(this,"settings",void 0),W(this,"attribute",void 0),W(this,"transition",void 0),W(this,"currentStartIndices",void 0),W(this,"currentLength",void 0),W(this,"texture",void 0),W(this,"framebuffer",void 0),W(this,"transform",void 0),W(this,"buffers",void 0),this.gl=e,this.type="spring",this.transition=new r_(r),this.attribute=n,this.attributeInTransition=new DD(e,{...n.settings,normalized:!1}),this.currentStartIndices=n.startIndices,this.currentLength=0,this.texture=w$e(e),this.framebuffer=T$e(e,this.texture),this.transform=E$e(e,n,this.framebuffer);const i={byteLength:0,usage:35050};this.buffers=[new kn(e,i),new kn(e,i),new kn(e,i)]}get inProgress(){return this.transition.inProgress}start(e,n){const{gl:r,buffers:i,attribute:s}=this,o={numInstances:n,attribute:s,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:e.enter};for(const a of i)lJ({buffer:a,...o});this.settings=e,this.currentStartIndices=s.startIndices,this.currentLength=ND(s,n),this.attributeInTransition.setData({buffer:i[1],value:s.value}),this.transition.start({...e,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/s.size),sourceBuffers:{aTo:sJ(r,s)}})}update(){const{buffers:e,transform:n,framebuffer:r,transition:i}=this;if(!i.update())return!1;const o=this.settings;return n.update({sourceBuffers:{aPrev:e[0],aCur:e[1]},feedbackBuffers:{vNext:e[2]}}),n.run({framebuffer:r,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:o.stiffness,damping:o.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),aJ(e),this.attributeInTransition.setData({buffer:e[1],value:this.attribute.value}),xC(r)[0]>0||i.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const e of this.buffers)e.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}function E$e(t,e,n){const r=oJ(e.size);return new SD(t,{framebuffer:n,vs:`
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
attribute ATTRIBUTE_TYPE aPrev;
attribute ATTRIBUTE_TYPE aCur;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vNext;
varying float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs:`
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

varying float vIsTransitioningFlag;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  gl_FragColor = vec4(1.0);
}`,defines:{ATTRIBUTE_TYPE:r},varyings:["vNext"]})}function w$e(t){return new Ja(t,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function T$e(t,e){return new pi(t,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{36064:e}})}const S$e={interpolation:y$e,spring:x$e};class C$e{constructor(e,{id:n,timeline:r}){W(this,"id",void 0),W(this,"isSupported",void 0),W(this,"gl",void 0),W(this,"timeline",void 0),W(this,"transitions",void 0),W(this,"needsRedraw",void 0),W(this,"numInstances",void 0),this.id=n,this.gl=e,this.timeline=r,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=SD.isSupported(e)}finalize(){for(const e in this.transitions)this._removeTransition(e)}update({attributes:e,transitions:n,numInstances:r}){this.numInstances=r||1;for(const i in e){const s=e[i],o=s.getTransitionSetting(n);o&&this._updateAttribute(i,s,o)}for(const i in this.transitions){const s=e[i];(!s||!s.getTransitionSetting(n))&&this._removeTransition(i)}}hasAttribute(e){const n=this.transitions[e];return n&&n.inProgress}getAttributes(){const e={};for(const n in this.transitions){const r=this.transitions[n];r.inProgress&&(e[n]=r.attributeInTransition)}return e}run(){if(!this.isSupported||this.numInstances===0)return!1;for(const n in this.transitions)this.transitions[n].update()&&(this.needsRedraw=!0);const e=this.needsRedraw;return this.needsRedraw=!1,e}_removeTransition(e){this.transitions[e].cancel(),delete this.transitions[e]}_updateAttribute(e,n,r){const i=this.transitions[e];let s=!i||i.type!==r.type;if(s){if(!this.isSupported){Yn.warn("WebGL2 not supported by this browser. Transition for ".concat(e," is disabled."))();return}i&&this._removeTransition(e);const o=S$e[r.type];o?this.transitions[e]=new o({attribute:n,timeline:this.timeline,gl:this.gl}):(Yn.error("unsupported transition type '".concat(r.type,"'"))(),s=!1)}(s||n.needsRedraw())&&(this.needsRedraw=!0,this.transitions[e].start(r,this.numInstances))}}const Lj="attributeManager.invalidate",A$e="attributeManager.updateStart",R$e="attributeManager.updateEnd",P$e="attribute.updateStart",I$e="attribute.allocate",M$e="attribute.updateEnd";class L$e{constructor(e,{id:n="attribute-manager",stats:r,timeline:i}={}){W(this,"id",void 0),W(this,"gl",void 0),W(this,"attributes",void 0),W(this,"updateTriggers",void 0),W(this,"needsRedraw",void 0),W(this,"userData",void 0),W(this,"stats",void 0),W(this,"attributeTransitionManager",void 0),W(this,"mergeBoundsMemoized",n_(N8e)),this.id=n,this.gl=e,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=r,this.attributeTransitionManager=new C$e(e,{id:"".concat(n,"-transitions"),timeline:i}),Object.seal(this)}finalize(){for(const e in this.attributes)this.attributes[e].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(e={clearRedrawFlags:!1}){const n=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!e.clearRedrawFlags,n&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(e){this._add(e)}addInstanced(e){this._add(e,{instanced:1})}remove(e){for(const n of e)this.attributes[n]!==void 0&&(this.attributes[n].delete(),delete this.attributes[n])}invalidate(e,n){const r=this._invalidateTrigger(e,n);Cs(Lj,this,e,r)}invalidateAll(e){for(const n in this.attributes)this.attributes[n].setNeedsUpdate(n,e);Cs(Lj,this,"all")}update({data:e,numInstances:n,startIndices:r=null,transitions:i,props:s={},buffers:o={},context:a={}}){let l=!1;Cs(A$e,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const c in this.attributes){const u=this.attributes[c],d=u.settings.accessor;u.startIndices=r,u.numInstances=n,s[c]&&Yn.removed("props.".concat(c),"data.attributes.".concat(c))(),u.setExternalBuffer(o[c])||u.setBinaryValue(typeof d=="string"?o[d]:void 0,e.startIndices)||typeof d=="string"&&!o[d]&&u.setConstantValue(s[d])||u.needsUpdate()&&(l=!0,this._updateAttribute({attribute:u,numInstances:n,data:e,props:s,context:a})),this.needsRedraw=this.needsRedraw||u.needsRedraw()}l&&Cs(R$e,this,n),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:n,transitions:i})}updateTransition(){const{attributeTransitionManager:e}=this,n=e.run();return this.needsRedraw=this.needsRedraw||n,n}getAttributes(){return this.attributes}getBounds(e){const n=e.map(r=>{var i;return(i=this.attributes[r])===null||i===void 0?void 0:i.getBounds()});return this.mergeBoundsMemoized(n)}getChangedAttributes(e={clearChangedFlags:!1}){const{attributes:n,attributeTransitionManager:r}=this,i={...r.getAttributes()};for(const s in n){const o=n[s];o.needsRedraw(e)&&!r.hasAttribute(s)&&(i[s]=o)}return i}getShaderAttributes(e,n={}){e||(e=this.getAttributes());const r={};for(const i in e)n[i]||Object.assign(r,e[i].getShaderAttributes());return r}_add(e,n={}){for(const r in e){const i=e[r];this.attributes[r]=this._createAttribute(r,i,n)}this._mapUpdateTriggersToAttributes()}_createAttribute(e,n,r){const i={...n,id:e,size:n.isIndexed&&1||n.size||1,divisor:r.instanced?1:n.divisor||0};return new DD(this.gl,i)}_mapUpdateTriggersToAttributes(){const e={};for(const n in this.attributes)this.attributes[n].getUpdateTriggers().forEach(i=>{e[i]||(e[i]=[]),e[i].push(n)});this.updateTriggers=e}_invalidateTrigger(e,n){const{attributes:r,updateTriggers:i}=this,s=i[e];return s&&s.forEach(o=>{const a=r[o];a&&a.setNeedsUpdate(a.id,n)}),s}_updateAttribute(e){const{attribute:n,numInstances:r}=e;if(Cs(P$e,n),n.constant){n.setConstantValue(n.value);return}n.allocate(r)&&Cs(I$e,n,r),n.updateBuffer(e)&&(this.needsRedraw=!0,Cs(M$e,n,r))}}class O$e extends r_{get value(){return this._value}_onUpdate(){const{time:e,settings:{fromValue:n,toValue:r,duration:i,easing:s}}=this,o=s(e/i);this._value=lT(n,r,o)}}const Oj=1e-5;function kj(t,e,n,r,i){const s=e-t,a=(n-e)*i,l=-s*r;return a+l+s+e}function k$e(t,e,n,r,i){if(Array.isArray(n)){const s=[];for(let o=0;o<n.length;o++)s[o]=kj(t[o],e[o],n[o],r,i);return s}return kj(t,e,n,r,i)}function Nj(t,e){if(Array.isArray(t)){let n=0;for(let r=0;r<t.length;r++){const i=t[r]-e[r];n+=i*i}return Math.sqrt(n)}return Math.abs(t-e)}class N$e extends r_{get value(){return this._currValue}_onUpdate(){const{fromValue:e,toValue:n,damping:r,stiffness:i}=this.settings,{_prevValue:s=e,_currValue:o=e}=this;let a=k$e(s,o,n,r,i);const l=Nj(a,n),c=Nj(a,o);l<Oj&&c<Oj&&(a=n,this.end()),this._prevValue=o,this._currValue=a}}const D$e={interpolation:O$e,spring:N$e};class B$e{constructor(e){this.transitions=new Map,this.timeline=e}get active(){return this.transitions.size>0}add(e,n,r,i){const{transitions:s}=this;if(s.has(e)){const l=s.get(e),{value:c=l.settings.fromValue}=l;n=c,this.remove(e)}if(i=iJ(i),!i)return;const o=D$e[i.type];if(!o){Yn.error("unsupported transition type '".concat(i.type,"'"))();return}const a=new o(this.timeline);a.start({...i,fromValue:n,toValue:r}),s.set(e,a)}remove(e){const{transitions:n}=this;n.has(e)&&(n.get(e).cancel(),n.delete(e))}update(){const e={};for(const[n,r]of this.transitions)r.update(),e[n]=r.value,r.inProgress||this.remove(n);return e}clear(){for(const e of this.transitions.keys())this.remove(e)}}function F$e(t){const e=t[qh];for(const n in e){const r=e[n],{validate:i}=r;if(i&&!i(t[n],r))throw new Error("Invalid prop ".concat(n,": ").concat(t[n]))}}function U$e(t,e){const n=cJ({newProps:t,oldProps:e,propTypes:t[qh],ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),r=$$e(t,e);let i=!1;return r||(i=j$e(t,e)),{dataChanged:r,propsChanged:n,updateTriggersChanged:i,extensionsChanged:G$e(t,e),transitionsChanged:z$e(t,e)}}function z$e(t,e){if(!t.transitions)return!1;const n={},r=t[qh];let i=!1;for(const s in t.transitions){const o=r[s],a=o&&o.type;(a==="number"||a==="color"||a==="array")&&nO(t[s],e[s],o)&&(n[s]=!0,i=!0)}return i?n:!1}function cJ({newProps:t,oldProps:e,ignoreProps:n={},propTypes:r={},triggerName:i="props"}){if(e===t)return!1;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return"".concat(i," changed shallowly");for(const s of Object.keys(t))if(!(s in n)){if(!(s in e))return"".concat(i,".").concat(s," added");const o=nO(t[s],e[s],r[s]);if(o)return"".concat(i,".").concat(s," ").concat(o)}for(const s of Object.keys(e))if(!(s in n)){if(!(s in t))return"".concat(i,".").concat(s," dropped");if(!Object.hasOwnProperty.call(t,s)){const o=nO(t[s],e[s],r[s]);if(o)return"".concat(i,".").concat(s," ").concat(o)}}return!1}function nO(t,e,n){let r=n&&n.equal;return r&&!r(t,e,n)||!r&&(r=t&&e&&t.equals,r&&!r.call(t,e))?"changed deeply":!r&&e!==t?"changed shallowly":null}function $$e(t,e){if(e===null)return"oldProps is null, initial diff";let n=!1;const{dataComparator:r,_dataDiff:i}=t;return r?r(t.data,e.data)||(n="Data comparator detected a change"):t.data!==e.data&&(n="A new data container was supplied"),n&&i&&(n=i(t.data,e.data)||n),n}function j$e(t,e){if(e===null)return{all:!0};if("all"in t.updateTriggers&&Dj(t,e,"all"))return{all:!0};const n={};let r=!1;for(const i in t.updateTriggers)i!=="all"&&Dj(t,e,i)&&(n[i]=!0,r=!0);return r?n:!1}function G$e(t,e){if(e===null)return!0;const n=e.extensions,{extensions:r}=t;if(r===n)return!1;if(!n||!r||r.length!==n.length)return!0;for(let i=0;i<r.length;i++)if(!r[i].equals(n[i]))return!0;return!1}function Dj(t,e,n){let r=t.updateTriggers[n];r=r??{};let i=e.updateTriggers[n];return i=i??{},cJ({oldProps:i,newProps:r,triggerName:n})}const H$e="count(): argument not an object",V$e="count(): argument not a container";function W$e(t){if(!Y$e(t))throw new Error(H$e);if(typeof t.count=="function")return t.count();if(Number.isFinite(t.size))return t.size;if(Number.isFinite(t.length))return t.length;if(X$e(t))return Object.keys(t).length;throw new Error(V$e)}function X$e(t){return t!==null&&typeof t=="object"&&t.constructor===Object}function Y$e(t){return t!==null&&typeof t=="object"}function K$e(t,e){if(!e)return t;const n={...t,...e};if("defines"in e&&(n.defines={...t.defines,...e.defines}),"modules"in e&&(n.modules=(t.modules||[]).concat(e.modules),e.modules.some(r=>r.name==="project64"))){const r=n.modules.findIndex(i=>i.name==="project32");r>=0&&n.modules.splice(r,1)}if("inject"in e)if(!t.inject)n.inject=e.inject;else{const r={...t.inject};for(const i in e.inject)r[i]=(r[i]||"")+e.inject[i];n.inject=r}return n}const q$e={10241:9987,10240:9729,10242:33071,10243:33071},rO={};function Z$e(t,e,n,r){if(n instanceof Ja)return n;n.constructor&&n.constructor.name!=="Object"&&(n={data:n});let i=null;n.compressed&&(i={10241:n.data.length>1?9985:9729});const s=new Ja(e,{...n,parameters:{...q$e,...i,...r}});return rO[s.id]=t,s}function Q$e(t,e){!e||!(e instanceof Ja)||rO[e.id]===t&&(e.delete(),delete rO[e.id])}const J$e={boolean:{validate(t,e){return!0},equal(t,e,n){return!!t==!!e}},number:{validate(t,e){return Number.isFinite(t)&&(!("max"in e)||t<=e.max)&&(!("min"in e)||t>=e.min)}},color:{validate(t,e){return e.optional&&!t||iO(t)&&(t.length===3||t.length===4)},equal(t,e,n){return kl(t,e,1)}},accessor:{validate(t,e){const n=gT(t);return n==="function"||n===gT(e.value)},equal(t,e,n){return typeof e=="function"?!0:kl(t,e,1)}},array:{validate(t,e){return e.optional&&!t||iO(t)},equal(t,e,n){const{compare:r}=n,i=Number.isInteger(r)?r:r?1:0;return r?kl(t,e,i):t===e}},object:{equal(t,e,n){if(n.ignore)return!0;const{compare:r}=n,i=Number.isInteger(r)?r:r?1:0;return r?kl(t,e,i):t===e}},function:{validate(t,e){return e.optional&&!t||typeof t=="function"},equal(t,e,n){return!n.compare&&n.ignore!==!1||t===e}},data:{transform:(t,e,n)=>{const{dataTransform:r}=n.props;return r&&t?r(t):t}},image:{transform:(t,e,n)=>{const r=n.context;return!r||!r.gl?null:Z$e(n.id,r.gl,t,{...e.parameters,...n.props.textureParameters})},release:(t,e,n)=>{Q$e(n.id,t)}}};function eje(t){const e={},n={},r={};for(const[i,s]of Object.entries(t)){const o=s==null?void 0:s.deprecatedFor;if(o)r[i]=Array.isArray(o)?o:[o];else{const a=tje(i,s);e[i]=a,n[i]=a.value}}return{propTypes:e,defaultProps:n,deprecatedProps:r}}function tje(t,e){switch(gT(e)){case"object":return z0(t,e);case"array":return z0(t,{type:"array",value:e,compare:!1});case"boolean":return z0(t,{type:"boolean",value:e});case"number":return z0(t,{type:"number",value:e});case"function":return z0(t,{type:"function",value:e,compare:!0});default:return{name:t,type:"unknown",value:e}}}function z0(t,e){return"type"in e?{name:t,...J$e[e.type],...e}:"value"in e?{name:t,type:gT(e.value),...e}:{name:t,type:"object",value:e}}function iO(t){return Array.isArray(t)||ArrayBuffer.isView(t)}function gT(t){return iO(t)?"array":t===null?"null":typeof t}function nje(t,e){let n;for(let s=e.length-1;s>=0;s--){const o=e[s];"extensions"in o&&(n=o.extensions)}const r=sO(t.constructor,n),i=Object.create(r);i[pT]=t,i[Ef]={},i[Zu]={};for(let s=0;s<e.length;++s){const o=e[s];for(const a in o)i[a]=o[a]}return Object.freeze(i),i}const rje="_mergedDefaultProps";function sO(t,e){let n=rje;if(e)for(const i of e){const s=i.constructor;s&&(n+=":".concat(s.extensionName||s.name))}const r=uJ(t,n);return r||(t[n]=ije(t,e||[]))}function ije(t,e){if(!t.prototype)return null;const r=Object.getPrototypeOf(t),i=sO(r),s=uJ(t,"defaultProps")||{},o=eje(s),a=Object.assign(Object.create(null),i,o.defaultProps),l=Object.assign(Object.create(null),i==null?void 0:i[qh],o.propTypes),c=Object.assign(Object.create(null),i==null?void 0:i[f2],o.deprecatedProps);for(const u of e){const d=sO(u.constructor);d&&(Object.assign(a,d),Object.assign(l,d[qh]),Object.assign(c,d[f2]))}return sje(a,t),aje(a,l),oje(a,c),a[qh]=l,a[f2]=c,e.length===0&&!BD(t,"_propTypes")&&(t._propTypes=l),a}function sje(t,e){const n=cje(e);Object.defineProperties(t,{id:{writable:!0,value:n}})}function oje(t,e){for(const n in e)Object.defineProperty(t,n,{enumerable:!1,set(r){const i="".concat(this.id,": ").concat(n);for(const s of e[n])BD(this,s)||(this[s]=r);Yn.deprecated(i,e[n].join("/"))()}})}function aje(t,e){const n={},r={};for(const i in e){const s=e[i],{name:o,value:a}=s;s.async&&(n[o]=a,r[o]=lje(o))}t[Am]=n,t[Ef]={},Object.defineProperties(t,r)}function lje(t){return{enumerable:!0,set(e){typeof e=="string"||e instanceof Promise||nJ(e)?this[Ef][t]=e:this[Zu][t]=e},get(){if(this[Zu]){if(t in this[Zu])return this[Zu][t]||this[Am][t];if(t in this[Ef]){const e=this[pT]&&this[pT].internalState;if(e&&e.hasAsyncProp(t))return e.getAsyncProp(t)||this[Am][t]}}return this[Am][t]}}}function BD(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function uJ(t,e){return BD(t,e)&&t[e]}function cje(t){const e=t.componentName;return e||Yn.warn("".concat(t.name,".componentName not specified"))(),e||t.name}let uje=0;class FD{constructor(...e){W(this,"id",void 0),W(this,"props",void 0),W(this,"count",void 0),this.props=nje(this,e),this.id=this.props.id,this.count=uje++}clone(e){const{props:n}=this,r={};for(const i in n[Am])i in n[Zu]?r[i]=n[Zu][i]:i in n[Ef]&&(r[i]=n[Ef][i]);return new this.constructor({...n,...r,...e})}}W(FD,"componentName","Component");W(FD,"defaultProps",{});const dje=Object.freeze({});class hje{constructor(e){W(this,"component",void 0),W(this,"onAsyncPropUpdated",void 0),W(this,"asyncProps",void 0),W(this,"oldProps",void 0),W(this,"oldAsyncProps",void 0),this.component=e,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const e in this.asyncProps){const n=this.asyncProps[e];n&&n.type&&n.type.release&&n.type.release(n.resolvedValue,n.type,this.component)}this.asyncProps={},this.component=null,this.resetOldProps()}getOldProps(){return this.oldAsyncProps||this.oldProps||dje}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component?this.component.props:null}hasAsyncProp(e){return e in this.asyncProps}getAsyncProp(e){const n=this.asyncProps[e];return n&&n.resolvedValue}isAsyncPropLoading(e){if(e){const n=this.asyncProps[e];return!!(n&&n.pendingLoadCount>0&&n.pendingLoadCount!==n.resolvedLoadCount)}for(const n in this.asyncProps)if(this.isAsyncPropLoading(n))return!0;return!1}reloadAsyncProp(e,n){this._watchPromise(e,Promise.resolve(n))}setAsyncProps(e){this.component=e[pT]||this.component;const n=e[Zu]||{},r=e[Ef]||e,i=e[Am]||{};for(const s in n){const o=n[s];this._createAsyncPropData(s,i[s]),this._updateAsyncProp(s,o),n[s]=this.getAsyncProp(s)}for(const s in r){const o=r[s];this._createAsyncPropData(s,i[s]),this._updateAsyncProp(s,o)}}_fetch(e,n){return null}_onResolve(e,n){}_onError(e,n){}_updateAsyncProp(e,n){if(this._didAsyncInputValueChange(e,n)){if(typeof n=="string"&&(n=this._fetch(e,n)),n instanceof Promise){this._watchPromise(e,n);return}if(nJ(n)){this._resolveAsyncIterable(e,n);return}this._setPropValue(e,n)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const e in this.asyncProps)Object.defineProperty(this.oldAsyncProps,e,{enumerable:!0,value:this.oldProps[e]})}}_didAsyncInputValueChange(e,n){const r=this.asyncProps[e];return n===r.resolvedValue||n===r.lastValue?!1:(r.lastValue=n,!0)}_setPropValue(e,n){this._freezeAsyncOldProps();const r=this.asyncProps[e];r&&(n=this._postProcessValue(r,n),r.resolvedValue=n,r.pendingLoadCount++,r.resolvedLoadCount=r.pendingLoadCount)}_setAsyncPropValue(e,n,r){const i=this.asyncProps[e];i&&r>=i.resolvedLoadCount&&n!==void 0&&(this._freezeAsyncOldProps(),i.resolvedValue=n,i.resolvedLoadCount=r,this.onAsyncPropUpdated(e,n))}_watchPromise(e,n){const r=this.asyncProps[e];if(r){r.pendingLoadCount++;const i=r.pendingLoadCount;n.then(s=>{this.component&&(s=this._postProcessValue(r,s),this._setAsyncPropValue(e,s,i),this._onResolve(e,s))}).catch(s=>{this._onError(e,s)})}}async _resolveAsyncIterable(e,n){if(e!=="data"){this._setPropValue(e,n);return}const r=this.asyncProps[e];if(!r)return;r.pendingLoadCount++;const i=r.pendingLoadCount;let s=[],o=0;for await(const a of n){if(!this.component)return;const{dataTransform:l}=this.component.props;l?s=l(a,s):s=s.concat(a),Object.defineProperty(s,"__diff",{enumerable:!1,value:[{startRow:o,endRow:s.length}]}),o=s.length,this._setAsyncPropValue(e,s,i)}this._onResolve(e,s)}_postProcessValue(e,n){const r=e.type;return r&&this.component&&(r.release&&r.release(e.resolvedValue,r,this.component),r.transform)?r.transform(n,r,this.component):n}_createAsyncPropData(e,n){if(!this.asyncProps[e]){const i=this.component&&this.component.props[qh];this.asyncProps[e]={type:i&&i[e],lastValue:null,resolvedValue:n,pendingLoadCount:0,resolvedLoadCount:0}}}}class fje extends hje{constructor({attributeManager:e,layer:n}){super(n),W(this,"attributeManager",void 0),W(this,"needsRedraw",void 0),W(this,"needsUpdate",void 0),W(this,"subLayers",void 0),W(this,"usesPickingColorCache",void 0),W(this,"hasPickingBuffer",void 0),W(this,"changeFlags",void 0),W(this,"viewport",void 0),W(this,"uniformTransitions",void 0),W(this,"propsInTransition",void 0),this.attributeManager=e,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}_fetch(e,n){const r=this.layer,i=r==null?void 0:r.props.fetch;return i?i(n,{propName:e,layer:r}):super._fetch(e,n)}_onResolve(e,n){const r=this.layer;if(r){const i=r.props.onDataLoad;e==="data"&&i&&i(n,{propName:e,layer:r})}}_onError(e,n){const r=this.layer;r&&r.raiseError(n,"loading ".concat(e," of ").concat(this.layer))}}const pje="layer.changeFlag",mje="layer.initialize",gje="layer.update",vje="layer.finalize",yje="layer.matched",Bj=2**24-1,_je=Object.freeze([]),bje=n_(({oldViewport:t,viewport:e})=>t.equals(e));let yl=new Uint8ClampedArray(0);const xje={data:{type:"data",value:_je,async:!0},dataComparator:{type:"function",value:null,optional:!0},_dataDiff:{type:"function",value:t=>t&&t.__diff,optional:!0},dataTransform:{type:"function",value:null,optional:!0},onDataLoad:{type:"function",value:null,optional:!0},onError:{type:"function",value:null,optional:!0},fetch:{type:"function",value:(t,{propName:e,layer:n,loaders:r,loadOptions:i,signal:s})=>{const{resourceManager:o}=n.context;if(i=i||n.getLoadOptions(),r=r||n.props.loaders,s){var a;i={...i,fetch:{...(a=i)===null||a===void 0?void 0:a.fetch,signal:s}}}let l=o.contains(t);return!l&&!i&&(o.add({resourceId:t,data:kL(t,r),persistent:!1}),l=!0),l?o.subscribe({resourceId:t,onChange:c=>{var u;return(u=n.internalState)===null||u===void 0?void 0:u.reloadAsyncProp(e,c)},consumerId:n.id,requestId:e}):kL(t,r,i)}},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:"draw",onHover:{type:"function",value:null,optional:!0},onClick:{type:"function",value:null,optional:!0},onDragStart:{type:"function",value:null,optional:!0},onDrag:{type:"function",value:null,optional:!0},onDragEnd:{type:"function",value:null,optional:!0},coordinateSystem:wn.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:2},loadOptions:{type:"object",value:null,optional:!0,ignore:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,ignore:!0},getPolygonOffset:{type:"function",value:({layerIndex:t})=>[0,-t*100]},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Dg extends FD{constructor(...e){super(...e),W(this,"internalState",null),W(this,"lifecycle",Fp.NO_STATE),W(this,"context",void 0),W(this,"state",void 0),W(this,"parent",null)}static get componentName(){return Object.prototype.hasOwnProperty.call(this,"layerName")?this.layerName:""}get root(){let e=this;for(;e.parent;)e=e.parent;return e}toString(){const e=this.constructor.layerName||this.constructor.name;return"".concat(e,"({id: '").concat(this.props.id,"'})")}project(e){Ai(this.internalState);const n=this.internalState.viewport||this.context.viewport,r=GQ(e,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,s,o]=$Q(r,n.pixelProjectionMatrix);return e.length===2?[i,s]:[i,s,o]}unproject(e){return Ai(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(e)}projectPosition(e,n){Ai(this.internalState);const r=this.internalState.viewport||this.context.viewport;return $8e(e,{viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...n})}get isComposite(){return!1}setState(e){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,e),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(e){for(const n of this.getModels())n.updateModuleSettings(e)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:e}=this.props;return e===wn.DEFAULT||e===wn.LNGLAT||e===wn.CARTESIAN}onHover(e,n){return this.props.onHover&&this.props.onHover(e,n)||!1}onClick(e,n){return this.props.onClick&&this.props.onClick(e,n)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(e,n=[]){return n[0]=e+1&255,n[1]=e+1>>8&255,n[2]=e+1>>8>>8&255,n}decodePickingColor(e){Ai(e instanceof Uint8Array);const[n,r,i]=e;return n+r*256+i*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:W$e(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var e;return(e=this.getAttributeManager())===null||e===void 0?void 0:e.getBounds(["positions","instancePositions"])}getShaders(e){for(const n of this.props.extensions)e=K$e(e,n.getShaders.call(this,n));return e}shouldUpdateState(e){return e.changeFlags.propsOrDataChanged}updateState(e){const n=this.getAttributeManager(),{dataChanged:r}=e.changeFlags;if(r&&n)if(Array.isArray(r))for(const i of r)n.invalidateAll(i);else n.invalidateAll();if(n){const{props:i}=e,s=this.internalState.hasPickingBuffer,o=Number.isInteger(i.highlightedObjectIndex)||i.pickable||i.extensions.some(a=>a.getNeedsPickingBuffer.call(this,a));if(s!==o){this.internalState.hasPickingBuffer=o;const{pickingColors:a,instancePickingColors:l}=n.attributes,c=a||l;c&&(o&&c.constant&&(c.constant=!1,n.invalidate(c.id)),!c.value&&!o&&(c.constant=!0,c.value=[0,0,0]))}}}finalizeState(e){for(const r of this.getModels())r.delete();const n=this.getAttributeManager();n&&n.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(e){for(const n of this.getModels())n.draw(e)}getPickingInfo({info:e,mode:n,sourceLayer:r}){const{index:i}=e;return i>=0&&Array.isArray(this.props.data)&&(e.object=this.props.data[i]),e}raiseError(e,n){var r,i;if(n&&(e=new Error("".concat(n,": ").concat(e.message),{cause:e})),!((r=(i=this.props).onError)!==null&&r!==void 0&&r.call(i,e))){var s,o;(s=this.context)===null||s===void 0||(o=s.onError)===null||o===void 0||o.call(s,e,this)}}getNeedsRedraw(e={clearRedrawFlags:!1}){return this._getNeedsRedraw(e)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var e;return((e=this.internalState)===null||e===void 0?void 0:e.uniformTransitions.active)||!1}activateViewport(e){if(!this.internalState)return;const n=this.internalState.viewport;this.internalState.viewport=e,(!n||!bje({oldViewport:n,viewport:e}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(e="all"){const n=this.getAttributeManager();n&&(e==="all"?n.invalidateAll():n.invalidate(e))}updateAttributes(e){for(const n of this.getModels())this._setModelAttributes(n,e)}_updateAttributes(){const e=this.getAttributeManager();if(!e)return;const n=this.props,r=this.getNumInstances(),i=this.getStartIndices();e.update({data:n.data,numInstances:r,startIndices:i,props:n,transitions:n.transitions,buffers:n.data.attributes,context:this});const s=e.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(s)}_updateAttributeTransition(){const e=this.getAttributeManager();e&&e.updateTransition()}_updateUniformTransition(){const{uniformTransitions:e}=this.internalState;if(e.active){const n=e.update(),r=Object.create(this.props);for(const i in n)Object.defineProperty(r,i,{value:n[i]});return r}return this.props}calculateInstancePickingColors(e,{numInstances:n}){if(e.constant)return;const r=Math.floor(yl.length/3);if(this.internalState.usesPickingColorCache=!0,r<n){n>Bj&&Yn.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),yl=fg.allocate(yl,n,{size:3,copy:!0,maxCount:Math.max(n,Bj)});const i=Math.floor(yl.length/3),s=[];for(let o=r;o<i;o++)this.encodePickingColor(o,s),yl[o*3+0]=s[0],yl[o*3+1]=s[1],yl[o*3+2]=s[2]}e.value=yl.subarray(0,n*3)}_setModelAttributes(e,n){const r=this.getAttributeManager(),i=e.userData.excludeAttributes||{},s=r.getShaderAttributes(n,i);e.setAttributes(s)}disablePickingIndex(e){const n=this.props.data;if(!("attributes"in n)){this._disablePickingIndex(e);return}const{pickingColors:r,instancePickingColors:i}=this.getAttributeManager().attributes,s=r||i,o=s&&n.attributes&&n.attributes[s.id];if(o&&o.value){const a=o.value,l=this.encodePickingColor(e);for(let c=0;c<n.length;c++){const u=s.getVertexOffset(c);a[u]===l[0]&&a[u+1]===l[1]&&a[u+2]===l[2]&&this._disablePickingIndex(c)}}else this._disablePickingIndex(e)}_disablePickingIndex(e){const{pickingColors:n,instancePickingColors:r}=this.getAttributeManager().attributes,i=n||r;if(!i)return;const s=i.getVertexOffset(e),o=i.getVertexOffset(e+1);i.buffer.subData({data:new Uint8Array(o-s),offset:s})}restorePickingColors(){const{pickingColors:e,instancePickingColors:n}=this.getAttributeManager().attributes,r=e||n;r&&(this.internalState.usesPickingColorCache&&r.value.buffer!==yl.buffer&&(r.value=yl.subarray(0,r.value.length)),r.updateSubBuffer({startOffset:0}))}_initialize(){Ai(!this.internalState),Ai(Number.isFinite(this.props.coordinateSystem)),Cs(mje,this);const e=this._getAttributeManager();e&&e.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new fje({attributeManager:e,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(Yn.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),e)}),this.internalState.uniformTransitions=new B$e(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const n of this.props.extensions)n.initializeState.call(this,this.context,n);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(e){Cs(yje,this,this===e);const{state:n,internalState:r}=e;this!==e&&(this.internalState=r,this.state=n,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const e=this.needsUpdate();if(Cs(gje,this,e),!e)return;const n=this.props,r=this.context,i=this.internalState,s=r.viewport,o=this._updateUniformTransition();i.propsInTransition=o,r.viewport=i.viewport||s,this.props=o;try{const a=this._getUpdateParams(),l=this.getModels();if(r.gl)this.updateState(a);else try{this.updateState(a)}catch{}for(const u of this.props.extensions)u.updateState.call(this,a,u);const c=this.getModels()[0]!==l[0];this._postUpdate(a,c)}finally{r.viewport=s,this.props=n,this._clearChangeFlags(),i.needsUpdate=!1,i.resetOldProps()}}_finalize(){Cs(vje,this),this.finalizeState(this.context);for(const e of this.props.extensions)e.finalizeState.call(this,this.context,e)}_drawLayer({moduleParameters:e=null,uniforms:n={},parameters:r={}}){this._updateAttributeTransition();const i=this.props,s=this.context;this.props=this.internalState.propsInTransition||i;const o=this.props.opacity;n.opacity=Math.pow(o,1/2.2);try{e&&this.setModuleParameters(e);const{getPolygonOffset:a}=this.props,l=a&&a(n)||[0,0];Gc(s.gl,{polygonOffset:l}),Ka(s.gl,r,()=>{const c={moduleParameters:e,uniforms:n,parameters:r,context:s};for(const u of this.props.extensions)u.draw.call(this,c,u);this.draw(c)})}finally{this.props=i}}getChangeFlags(){var e;return(e=this.internalState)===null||e===void 0?void 0:e.changeFlags}setChangeFlags(e){if(!this.internalState)return;const{changeFlags:n}=this.internalState;for(const i in e)if(e[i]){let s=!1;switch(i){case"dataChanged":const o=e[i],a=n[i];o&&Array.isArray(a)&&(n.dataChanged=Array.isArray(o)?a.concat(o):o,s=!0);default:n[i]||(n[i]=e[i],s=!0)}s&&Cs(pje,this,i,e)}const r=!!(n.dataChanged||n.updateTriggersChanged||n.propsChanged||n.extensionsChanged);n.propsOrDataChanged=r,n.somethingChanged=r||n.viewportChanged||n.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(e,n){const r=U$e(e,n);if(r.updateTriggersChanged)for(const s in r.updateTriggersChanged)r.updateTriggersChanged[s]&&this.invalidateAttribute(s);if(r.transitionsChanged)for(const s in r.transitionsChanged){var i;this.internalState.uniformTransitions.add(s,n[s],e[s],(i=e.transitions)===null||i===void 0?void 0:i[s])}return this.setChangeFlags(r)}validateProps(){F$e(this.props)}updateAutoHighlight(e){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(e)}_updateAutoHighlight(e){const n={pickingSelectedColor:e.picked?e.color:null},{highlightColor:r}=this.props;e.picked&&typeof r=="function"&&(n.pickingHighlightColor=r(e)),this.setModuleParameters(n),this.setNeedsRedraw()}_getAttributeManager(){const e=this.context;return new L$e(e.gl,{id:this.props.id,stats:e.stats,timeline:e.timeline})}_postUpdate(e,n){const{props:r,oldProps:i}=e;this.setNeedsRedraw(),this._updateAttributes();const{model:s}=this.state;s==null||s.setInstanceCount(this.getNumInstances());const{autoHighlight:o,highlightedObjectIndex:a,highlightColor:l}=r;if(n||i.autoHighlight!==o||i.highlightedObjectIndex!==a||i.highlightColor!==l){const c={};o||(c.pickingSelectedColor=null),Array.isArray(l)&&(c.pickingHighlightColor=l),(n||a!==i.highlightedObjectIndex)&&(c.pickingSelectedColor=Number.isFinite(a)&&a>=0?this.encodePickingColor(a):null),this.setModuleParameters(c)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(e){if(!this.internalState)return!1;let n=!1;n=n||this.internalState.needsRedraw&&this.id;const r=this.getAttributeManager(),i=r?r.getNeedsRedraw(e):!1;if(n=n||i,n)for(const s of this.props.extensions)s.onNeedsRedraw.call(this,s);return this.internalState.needsRedraw=this.internalState.needsRedraw&&!e.clearRedrawFlags,n}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}W(Dg,"defaultProps",xje);W(Dg,"layerName","Layer");class dJ{constructor(e){W(this,"opts",void 0),W(this,"typedArrayManager",void 0),W(this,"indexStarts",[0]),W(this,"vertexStarts",[0]),W(this,"vertexCount",0),W(this,"instanceCount",0),W(this,"attributes",void 0),W(this,"_attributeDefs",void 0),W(this,"data",void 0),W(this,"getGeometry",void 0),W(this,"geometryBuffer",void 0),W(this,"buffers",void 0),W(this,"positionSize",void 0),W(this,"normalize",void 0);const{attributes:n={}}=e;this.typedArrayManager=fg,this.attributes={},this._attributeDefs=n,this.opts=e,this.updateGeometry(e)}updateGeometry(e){Object.assign(this.opts,e);const{data:n,buffers:r={},getGeometry:i,geometryBuffer:s,positionFormat:o,dataChanged:a,normalize:l=!0}=this.opts;if(this.data=n,this.getGeometry=i,this.positionSize=s&&s.size||(o==="XY"?2:3),this.buffers=r,this.normalize=l,s&&(Ai(n.startIndices),this.getGeometry=this.getGeometryFromBuffer(s),l||(r.positions=s)),this.geometryBuffer=r.positions,Array.isArray(a))for(const c of a)this._rebuildGeometry(c);else this._rebuildGeometry()}updatePartialGeometry({startRow:e,endRow:n}){this._rebuildGeometry({startRow:e,endRow:n})}getGeometryFromBuffer(e){const n=e.value||e;return ArrayBuffer.isView(n)?rJ(n,{size:this.positionSize,offset:e.offset,stride:e.stride,startIndices:this.data.startIndices}):null}_allocate(e,n){const{attributes:r,buffers:i,_attributeDefs:s,typedArrayManager:o}=this;for(const a in s)if(a in i)o.release(r[a]),r[a]=null;else{const l=s[a];l.copy=n,r[a]=o.allocate(r[a],e,l)}}_forEachGeometry(e,n,r){const{data:i,getGeometry:s}=this,{iterable:o,objectInfo:a}=tJ(i,n,r);for(const l of o){a.index++;const c=s?s(l,a):null;e(c,a.index)}}_rebuildGeometry(e){if(!this.data)return;let{indexStarts:n,vertexStarts:r,instanceCount:i}=this;const{data:s,geometryBuffer:o}=this,{startRow:a=0,endRow:l=1/0}=e||{},c={};if(e||(n=[0],r=[0]),this.normalize||!o)this._forEachGeometry((d,h)=>{const f=d&&this.normalizeGeometry(d);c[h]=f,r[h+1]=r[h]+(f?this.getGeometrySize(f):0)},a,l),i=r[r.length-1];else if(r=s.startIndices,i=r[s.length]||0,ArrayBuffer.isView(o))i=i||o.length/this.positionSize;else if(o instanceof kn){const d=o.accessor.stride||this.positionSize*4;i=i||o.byteLength/d}else if(o.buffer){const d=o.stride||this.positionSize*4;i=i||o.buffer.byteLength/d}else if(o.value){const d=o.value,h=o.stride/d.BYTES_PER_ELEMENT||this.positionSize;i=i||d.length/h}this._allocate(i,!!e),this.indexStarts=n,this.vertexStarts=r,this.instanceCount=i;const u={};this._forEachGeometry((d,h)=>{const f=c[h]||d;u.vertexStart=r[h],u.indexStart=n[h];const p=h<r.length-1?r[h+1]:i;u.geometrySize=p-r[h],u.geometryIndex=h,this.updateGeometryAttributes(f,u)},a,l),this.vertexCount=n[n.length-1]}}const Eje=typeof window<"u"?A.useLayoutEffect:A.useEffect;function vT(t,e){for(;t;){if(t===e)return!0;t=Object.getPrototypeOf(t)}return!1}const wje={position:"absolute",zIndex:-1};function hJ(t,e){if(typeof t=="function")return t(e);if(Array.isArray(t))return t.map(n=>hJ(n,e));if(TC(t)){if(Tje(t))return e.style=wje,A.cloneElement(t,e);if(Sje(t))return A.cloneElement(t,e)}return t}function TC(t){return t&&typeof t=="object"&&"type"in t||!1}function Tje(t){var e;return(e=t.props)===null||e===void 0?void 0:e.mapStyle}function Sje(t){const e=t.type;return e&&e.deckGLViewProps}function oO(t){if(typeof t=="function")return A.createElement(mg,{},t);if(Array.isArray(t))return t.map(oO);if(TC(t)){if(t.type===A.Fragment)return oO(t.props.children);if(vT(t.type,mg))return t}return t}function Cje({children:t,layers:e=[],views:n=null}){const r=[],i=[],s={};return A.Children.forEach(oO(t),o=>{if(TC(o)){const a=o.type;if(vT(a,Dg)){const l=Aje(a,o.props);i.push(l)}else r.push(o);if(vT(a,mg)&&a!==mg&&o.props.id){const l=new a(o.props);s[l.id]=l}}else o&&r.push(o)}),Object.keys(s).length>0&&(Array.isArray(n)?n.forEach(o=>{s[o.id]=o}):n&&(s[n.id]=n),n=Object.values(s)),e=i.length>0?[...i,...e]:e,{layers:e,children:r,views:n}}function Aje(t,e){const n={},r=t.defaultProps||{};for(const i in e)r[i]!==e[i]&&(n[i]=e[i]);return new t(n)}function Rje({children:t,deck:e,ContextProvider:n}){const{viewManager:r}=e||{};if(!r||!r.views.length)return[];const i={},s=r.views[0].id;for(const o of t){let a=s,l=o;TC(o)&&vT(o.type,mg)&&(a=o.props.id||s,l=o.props.children);const c=r.getViewport(a),u=r.getViewState(a);if(c){u.padding=c.padding;const{x:d,y:h,width:f,height:p}=c;l=hJ(l,{x:d,y:h,width:f,height:p,viewport:c,viewState:u}),i[a]||(i[a]={viewport:c,children:[]}),i[a].children.push(l)}}return Object.keys(i).map(o=>{const{viewport:a,children:l}=i[o],{x:c,y:u,width:d,height:h}=a,f={position:"absolute",left:c,top:u,width:d,height:h},p="view-".concat(o),m=A.createElement("div",{key:p,id:p,style:f},...l);if(n){const _={viewport:a,container:e.canvas.offsetParent,eventManager:e.eventManager,onViewStateChange:y=>{y.viewId=o,e._onViewStateChange(y)}};return A.createElement(n,{key:p,value:_},m)}return m})}const Pje={mixBlendMode:null};function Ije({width:t,height:e,style:n}){const r={position:"absolute",zIndex:0,left:0,top:0,width:t,height:e},i={left:0,top:0};if(n)for(const s in n)s in Pje?i[s]=n[s]:r[s]=n[s];return{containerStyle:r,canvasStyle:i}}function Mje(t){return{get deck(){return t.deck},pickObject:e=>t.deck.pickObject(e),pickMultipleObjects:e=>t.deck.pickMultipleObjects(e),pickObjects:e=>t.deck.pickObjects(e)}}function fJ(t){t.redrawReason&&(t.deck._drawLayers(t.redrawReason),t.redrawReason=null)}function Lje(t,e,n){const r=new e({...n,_customRender:i=>{t.redrawReason=i;const s=r.getViewports();t.lastRenderedViewports!==s?t.forceUpdate():fJ(t)}});return r}const pJ=A.forwardRef((t,e)=>{const[n,r]=A.useState(0),s=A.useRef({control:null,version:n,forceUpdate:()=>r(w=>w+1)}).current,o=A.useRef(null),a=A.useRef(null),l=A.useMemo(()=>Cje(t),[t.layers,t.views,t.children]);let c=!0;const u=w=>{var T;return c&&t.viewState?(s.viewStateUpdateRequested=w,null):(s.viewStateUpdateRequested=null,(T=t.onViewStateChange)===null||T===void 0?void 0:T.call(t,w))},d=w=>{if(c)s.interactionStateUpdateRequested=w;else{var T;s.interactionStateUpdateRequested=null,(T=t.onInteractionStateChange)===null||T===void 0||T.call(t,w)}},h=A.useMemo(()=>{const w={...t,style:null,width:"100%",height:"100%",parent:o.current,canvas:a.current,layers:l.layers,views:l.views,onViewStateChange:u,onInteractionStateChange:d};return delete w._customRender,s.deck&&s.deck.setProps(w),w},[t]);A.useEffect(()=>{const w=t.Deck||wC;return s.deck=Lje(s,w,{...h,parent:o.current,canvas:a.current}),()=>{var T;return(T=s.deck)===null||T===void 0?void 0:T.finalize()}},[]),Eje(()=>{fJ(s);const{viewStateUpdateRequested:w,interactionStateUpdateRequested:T}=s;w&&u(w),T&&d(T)}),A.useImperativeHandle(e,()=>Mje(s),[]);const f=s.deck&&s.deck.isInitialized?s.deck.getViewports():void 0,{ContextProvider:p,width:m,height:_,id:y,style:x}=t,{containerStyle:b,canvasStyle:E}=A.useMemo(()=>Ije({width:m,height:_,style:x}),[m,_,x]);if(!s.viewStateUpdateRequested&&s.lastRenderedViewports===f||s.version!==n){s.lastRenderedViewports=f,s.version=n;const w=Rje({children:l.children,deck:s.deck,ContextProvider:p}),T=A.createElement("canvas",{key:"canvas",id:y||"deckgl-overlay",ref:a,style:E});s.control=A.createElement("div",{id:"".concat(y||"deckgl","-wrapper"),ref:o,style:b},[T,w])}return c=!1,s.control});pJ.defaultProps=wC.defaultProps;const Oje=pJ,kje="modulepreload",Nje=function(t){return"/"+t},Fj={},Dje=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){const s=document.getElementsByTagName("link");i=Promise.all(n.map(o=>{if(o=Nje(o),o in Fj)return;Fj[o]=!0;const a=o.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!r)for(let d=s.length-1;d>=0;d--){const h=s[d];if(h.href===o&&(!a||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${l}`))return;const u=document.createElement("link");if(u.rel=a?"stylesheet":kje,a||(u.as="script",u.crossOrigin=""),u.href=o,document.head.appendChild(u),a)return new Promise((d,h)=>{u.addEventListener("load",d),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${o}`)))})}))}return i.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})},Bje=A.createContext(null);function Fje(t,e){const n=Array.isArray(t)?t[0]:t?t.x:0,r=Array.isArray(t)?t[1]:t?t.y:0,i=Array.isArray(e)?e[0]:e?e.x:0,s=Array.isArray(e)?e[1]:e?e.y:0;return n===i&&r===s}function Ec(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!Ec(t[n],e[n]))return!1;return!0}else if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const i of n)if(!e.hasOwnProperty(i)||!Ec(t[i],e[i]))return!1;return!0}return!1}function Uje(t){const e=t.clone();return e.pixelsToGLUnits=t.pixelsToGLUnits,e}function Uj(t,e){if(!t.getProjection)return;const n=t.getProjection(),r=e.getProjection();Ec(n,r)||e.setProjection(n)}function zj(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function $j(t,e){const n=e.viewState||e;let r=!1;if("longitude"in n&&"latitude"in n){const i=t.center;t.center=new i.constructor(n.longitude,n.latitude),r=r||i!==t.center}if("zoom"in n){const i=t.zoom;t.zoom=n.zoom,r=r||i!==t.zoom}if("bearing"in n){const i=t.bearing;t.bearing=n.bearing,r=r||i!==t.bearing}if("pitch"in n){const i=t.pitch;t.pitch=n.pitch,r=r||i!==t.pitch}return n.padding&&!t.isPaddingEqual(n.padding)&&(r=!0,t.padding=n.padding),r}const zje=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function jj(t){if(!t)return null;if(typeof t=="string"||("toJS"in t&&(t=t.toJS()),!t.layers))return t;const e={};for(const r of t.layers)e[r.id]=r;const n=t.layers.map(r=>{let i=null;"interactive"in r&&(i=Object.assign({},r),delete i.interactive);const s=e[r.ref];if(s){i=i||Object.assign({},r),delete i.ref;for(const o of zje)o in s&&(i[o]=s[o])}return i||r});return{...t,layers:n}}var Gj={};const Hj={version:8,sources:{},layers:[]},Vj={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},v2={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},Wj={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},$je=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],jje=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class gg{constructor(e,n,r){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=i=>{const s=this.props[Wj[i.type]];s?s(i):i.type==="error"&&console.error(i.error)},this._onPointerEvent=i=>{(i.type==="mousemove"||i.type==="mouseout")&&this._updateHover(i);const s=this.props[Vj[i.type]];s&&(this.props.interactiveLayerIds&&i.type!=="mouseover"&&i.type!=="mouseout"&&(i.features=this._hoveredFeatures||this._queryRenderedFeatures(i.point)),s(i),delete i.features)},this._onCameraEvent=i=>{if(!this._internalUpdate){const s=this.props[v2[i.type]];s&&s(i)}i.type in this._deferredEvents&&(this._deferredEvents[i.type]=!1)},this._MapClass=e,this.props=n,this._initialize(r)}get map(){return this._map}get transform(){return this._renderTransform}setProps(e){const n=this.props;this.props=e;const r=this._updateSettings(e,n);r&&this._createShadowTransform(this._map);const i=this._updateSize(e),s=this._updateViewState(e,!0);this._updateStyle(e,n),this._updateStyleComponents(e,n),this._updateHandlers(e,n),(r||i||s&&!this._map.isMoving())&&this.redraw()}static reuse(e,n){const r=gg.savedMaps.pop();if(!r)return null;const i=r.map,s=i.getContainer();for(n.className=s.className;s.childNodes.length>0;)n.appendChild(s.childNodes[0]);i._container=n;const o=i._resizeObserver;o&&(o.disconnect(),o.observe(n)),r.setProps({...e,styleDiffing:!1}),i.resize();const{initialViewState:a}=e;return a&&(a.bounds?i.fitBounds(a.bounds,{...a.fitBoundsOptions,duration:0}):r._updateViewState(a,!1)),i.isStyleLoaded()?i.fire("load"):i.once("styledata",()=>i.fire("load")),i._update(),r}_initialize(e){const{props:n}=this,{mapStyle:r=Hj}=n,i={...n,...n.initialViewState,accessToken:n.mapboxAccessToken||Gje()||null,container:e,style:jj(r)},s=i.initialViewState||i.viewState||i;if(Object.assign(i,{center:[s.longitude||0,s.latitude||0],zoom:s.zoom||0,pitch:s.pitch||0,bearing:s.bearing||0}),n.gl){const u=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=u,n.gl)}const o=new this._MapClass(i);s.padding&&o.setPadding(s.padding),n.cursor&&(o.getCanvas().style.cursor=n.cursor),this._createShadowTransform(o);const a=o._render;o._render=u=>{this._inRender=!0,a.call(o,u),this._inRender=!1};const l=o._renderTaskQueue.run;o._renderTaskQueue.run=u=>{l.call(o._renderTaskQueue,u),this._onBeforeRepaint()},o.on("render",()=>this._onAfterRepaint());const c=o.fire;o.fire=this._fireEvent.bind(this,c),o.on("resize",()=>{this._renderTransform.resize(o.transform.width,o.transform.height)}),o.on("styledata",()=>{this._updateStyleComponents(this.props,{}),Uj(o.transform,this._renderTransform)}),o.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const u in Vj)o.on(u,this._onPointerEvent);for(const u in v2)o.on(u,this._onCameraEvent);for(const u in Wj)o.on(u,this._onEvent);this._map=o}recycle(){const n=this.map.getContainer().querySelector("[mapboxgl-children]");n==null||n.remove(),gg.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const e=this._map;!this._inRender&&e.style&&(e._frame&&(e._frame.cancel(),e._frame=null),e._render())}_createShadowTransform(e){const n=Uje(e.transform);e.painter.transform=n,this._renderTransform=n}_updateSize(e){const{viewState:n}=e;if(n){const r=this._map;if(n.width!==r.transform.width||n.height!==r.transform.height)return r.resize(),!0}return!1}_updateViewState(e,n){if(this._internalUpdate)return!1;const r=this._map,i=this._renderTransform,{zoom:s,pitch:o,bearing:a}=i,l=r.isMoving();l&&(i.cameraElevationReference="sea");const c=$j(i,{...zj(r.transform),...e});if(l&&(i.cameraElevationReference="ground"),c&&n){const u=this._deferredEvents;u.move=!0,u.zoom||(u.zoom=s!==i.zoom),u.rotate||(u.rotate=a!==i.bearing),u.pitch||(u.pitch=o!==i.pitch)}return l||$j(r.transform,e),c}_updateSettings(e,n){const r=this._map;let i=!1;for(const s of $je)if(s in e&&!Ec(e[s],n[s])){i=!0;const o=r[`set${s[0].toUpperCase()}${s.slice(1)}`];o==null||o.call(r,e[s])}return i}_updateStyle(e,n){if(e.cursor!==n.cursor&&(this._map.getCanvas().style.cursor=e.cursor||""),e.mapStyle!==n.mapStyle){const{mapStyle:r=Hj,styleDiffing:i=!0}=e,s={diff:i};return"localIdeographFontFamily"in e&&(s.localIdeographFontFamily=e.localIdeographFontFamily),this._map.setStyle(jj(r),s),!0}return!1}_updateStyleComponents(e,n){const r=this._map;let i=!1;return r.isStyleLoaded()&&("light"in e&&r.setLight&&!Ec(e.light,n.light)&&(i=!0,r.setLight(e.light)),"fog"in e&&r.setFog&&!Ec(e.fog,n.fog)&&(i=!0,r.setFog(e.fog)),"terrain"in e&&r.setTerrain&&!Ec(e.terrain,n.terrain)&&(!e.terrain||r.getSource(e.terrain.source))&&(i=!0,r.setTerrain(e.terrain))),i}_updateHandlers(e,n){var r,i;const s=this._map;let o=!1;for(const a of jje){const l=(r=e[a])!==null&&r!==void 0?r:!0,c=(i=n[a])!==null&&i!==void 0?i:!0;Ec(l,c)||(o=!0,l?s[a].enable(l):s[a].disable())}return o}_queryRenderedFeatures(e){const n=this._map,r=n.transform,{interactiveLayerIds:i=[]}=this.props;try{return n.transform=this._renderTransform,n.queryRenderedFeatures(e,{layers:i.filter(n.getLayer.bind(n))})}catch{return[]}finally{n.transform=r}}_updateHover(e){var n;const{props:r}=this;if(r.interactiveLayerIds&&(r.onMouseMove||r.onMouseEnter||r.onMouseLeave)){const s=e.type,o=((n=this._hoveredFeatures)===null||n===void 0?void 0:n.length)>0,a=this._queryRenderedFeatures(e.point),l=a.length>0;!l&&o&&(e.type="mouseleave",this._onPointerEvent(e)),this._hoveredFeatures=a,l&&!o&&(e.type="mouseenter",this._onPointerEvent(e)),e.type=s}else this._hoveredFeatures=null}_fireEvent(e,n,r){const i=this._map,s=i.transform,o=typeof n=="string"?n:n.type;return o==="move"&&this._updateViewState(this.props,!1),o in v2&&(typeof n=="object"&&(n.viewState=zj(s)),this._map.isMoving())?(i.transform=this._renderTransform,e.call(i,n,r),i.transform=s,i):(e.call(i,n,r),i)}_onBeforeRepaint(){const e=this._map;this._internalUpdate=!0;for(const r in this._deferredEvents)this._deferredEvents[r]&&e.fire(r);this._internalUpdate=!1;const n=this._map.transform;e.transform=this._renderTransform,this._onAfterRepaint=()=>{Uj(this._renderTransform,n),e.transform=n}}}gg.savedMaps=[];function Gje(){let t=null;if(typeof location<"u"){const e=/access_token=([^&\/]*)/.exec(location.search);t=e&&e[1]}try{t=t||Gj.MapboxAccessToken}catch{}try{t=t||Gj.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return t}const Hje=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function Vje(t){if(!t)return null;const e=t.map,n={getMap:()=>e,getCenter:()=>t.transform.center,getZoom:()=>t.transform.zoom,getBearing:()=>t.transform.bearing,getPitch:()=>t.transform.pitch,getPadding:()=>t.transform.padding,getBounds:()=>t.transform.getBounds(),project:r=>{const i=e.transform;e.transform=t.transform;const s=e.project(r);return e.transform=i,s},unproject:r=>{const i=e.transform;e.transform=t.transform;const s=e.unproject(r);return e.transform=i,s},queryTerrainElevation:(r,i)=>{const s=e.transform;e.transform=t.transform;const o=e.queryTerrainElevation(r,i);return e.transform=s,o},queryRenderedFeatures:(r,i)=>{const s=e.transform;e.transform=t.transform;const o=e.queryRenderedFeatures(r,i);return e.transform=s,o}};for(const r of Wje(e))!(r in n)&&!Hje.includes(r)&&(n[r]=e[r].bind(e));return n}function Wje(t){const e=new Set;let n=t;for(;n;){for(const r of Object.getOwnPropertyNames(n))r[0]!=="_"&&typeof t[r]=="function"&&r!=="fire"&&r!=="setEventedParent"&&e.add(r);n=Object.getPrototypeOf(n)}return Array.from(e)}const Xje=typeof document<"u"?A.useLayoutEffect:A.useEffect,Yje=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function Kje(t,e){for(const r of Yje)r in e&&(t[r]=e[r]);const{RTLTextPlugin:n="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=e;n&&t.getRTLTextPluginStatus&&t.getRTLTextPluginStatus()==="unavailable"&&t.setRTLTextPlugin(n,r=>{r&&console.error(r)},!0)}const SC=A.createContext(null);function qje(t,e,n){const r=A.useContext(Bje),[i,s]=A.useState(null),o=A.useRef(),{current:a}=A.useRef({mapLib:null,map:null});A.useEffect(()=>{const u=t.mapLib;let d=!0,h;return Promise.resolve(u||n).then(f=>{if(!d)return;if(!f)throw new Error("Invalid mapLib");const p="Map"in f?f:f.default;if(!p.Map)throw new Error("Invalid mapLib");if(Kje(p,t),!p.supported||p.supported(t))t.reuseMaps&&(h=gg.reuse(t,o.current)),h||(h=new gg(p.Map,t,o.current)),a.map=Vje(h),a.mapLib=p,s(h),r==null||r.onMapMount(a.map,t.id);else throw new Error("Map is not supported by this browser")}).catch(f=>{const{onError:p}=t;p?p({type:"error",target:null,originalEvent:null,error:f}):console.error(f)}),()=>{d=!1,h&&(r==null||r.onMapUnmount(t.id),t.reuseMaps?h.recycle():h.destroy())}},[]),Xje(()=>{i&&i.setProps(t)}),A.useImperativeHandle(e,()=>a.map,[i]);const l=A.useMemo(()=>({position:"relative",width:"100%",height:"100%",...t.style}),[t.style]),c={height:"100%"};return A.createElement("div",{id:t.id,ref:o,style:l},i&&A.createElement(SC.Provider,{value:a},A.createElement("div",{"mapboxgl-children":"",style:c},t.children)))}const Zje=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Uf(t,e){if(!t||!e)return;const n=t.style;for(const r in e){const i=e[r];Number.isFinite(i)&&!Zje.test(r)?n[r]=`${i}px`:n[r]=i}}function Qje(t,e){const{map:n,mapLib:r}=A.useContext(SC),i=A.useRef({props:t});i.current.props=t;const s=A.useMemo(()=>{let m=!1;A.Children.forEach(t.children,x=>{x&&(m=!0)});const _={...t,element:m?document.createElement("div"):null},y=new r.Marker(_);return y.setLngLat([t.longitude,t.latitude]),y.getElement().addEventListener("click",x=>{var b,E;(E=(b=i.current.props).onClick)===null||E===void 0||E.call(b,{type:"click",target:y,originalEvent:x})}),y.on("dragstart",x=>{var b,E;const w=x;w.lngLat=s.getLngLat(),(E=(b=i.current.props).onDragStart)===null||E===void 0||E.call(b,w)}),y.on("drag",x=>{var b,E;const w=x;w.lngLat=s.getLngLat(),(E=(b=i.current.props).onDrag)===null||E===void 0||E.call(b,w)}),y.on("dragend",x=>{var b,E;const w=x;w.lngLat=s.getLngLat(),(E=(b=i.current.props).onDragEnd)===null||E===void 0||E.call(b,w)}),y},[]);A.useEffect(()=>(s.addTo(n.getMap()),()=>{s.remove()}),[]);const{longitude:o,latitude:a,offset:l,style:c,draggable:u=!1,popup:d=null,rotation:h=0,rotationAlignment:f="auto",pitchAlignment:p="auto"}=t;return A.useEffect(()=>{Uf(s.getElement(),c)},[c]),A.useImperativeHandle(e,()=>s,[]),(s.getLngLat().lng!==o||s.getLngLat().lat!==a)&&s.setLngLat([o,a]),l&&!Fje(s.getOffset(),l)&&s.setOffset(l),s.isDraggable()!==u&&s.setDraggable(u),s.getRotation()!==h&&s.setRotation(h),s.getRotationAlignment()!==f&&s.setRotationAlignment(f),s.getPitchAlignment()!==p&&s.setPitchAlignment(p),s.getPopup()!==d&&s.setPopup(d),Wc.createPortal(t.children,s.getElement())}A.memo(A.forwardRef(Qje));function Xj(t){return new Set(t?t.trim().split(/\s+/):[])}function Jje(t,e){const{map:n,mapLib:r}=A.useContext(SC),i=A.useMemo(()=>document.createElement("div"),[]),s=A.useRef({props:t});s.current.props=t;const o=A.useMemo(()=>{const a={...t},l=new r.Popup(a);return l.setLngLat([t.longitude,t.latitude]),l.once("open",c=>{var u,d;(d=(u=s.current.props).onOpen)===null||d===void 0||d.call(u,c)}),l},[]);if(A.useEffect(()=>{const a=l=>{var c,u;(u=(c=s.current.props).onClose)===null||u===void 0||u.call(c,l)};return o.on("close",a),o.setDOMContent(i).addTo(n.getMap()),()=>{o.off("close",a),o.isOpen()&&o.remove()}},[]),A.useEffect(()=>{Uf(o.getElement(),t.style)},[t.style]),A.useImperativeHandle(e,()=>o,[]),o.isOpen()&&((o.getLngLat().lng!==t.longitude||o.getLngLat().lat!==t.latitude)&&o.setLngLat([t.longitude,t.latitude]),t.offset&&!Ec(o.options.offset,t.offset)&&o.setOffset(t.offset),(o.options.anchor!==t.anchor||o.options.maxWidth!==t.maxWidth)&&(o.options.anchor=t.anchor,o.setMaxWidth(t.maxWidth)),o.options.className!==t.className)){const a=Xj(o.options.className),l=Xj(t.className);for(const c of a)l.has(c)||o.removeClassName(c);for(const c of l)a.has(c)||o.addClassName(c);o.options.className=t.className}return Wc.createPortal(t.children,i)}A.memo(A.forwardRef(Jje));function s_(t,e,n,r){const i=A.useContext(SC),s=A.useMemo(()=>t(i),[]);return A.useEffect(()=>{const o=r||n||e,a=typeof e=="function"&&typeof n=="function"?e:null,l=typeof n=="function"?n:typeof e=="function"?e:null,{map:c}=i;return c.hasControl(s)||(c.addControl(s,o==null?void 0:o.position),a&&a(i)),()=>{l&&l(i),c.hasControl(s)&&c.removeControl(s)}},[]),s}function eGe(t){const e=s_(({mapLib:n})=>new n.AttributionControl(t),{position:t.position});return A.useEffect(()=>{Uf(e._container,t.style)},[t.style]),null}A.memo(eGe);function tGe(t){const e=s_(({mapLib:n})=>new n.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)}),{position:t.position});return A.useEffect(()=>{Uf(e._controlContainer,t.style)},[t.style]),null}A.memo(tGe);function nGe(t,e){const n=A.useRef({props:t}),r=s_(({mapLib:i})=>{const s=new i.GeolocateControl(t),o=s._setupUI;return s._setupUI=a=>{s._container.hasChildNodes()||o(a)},s.on("geolocate",a=>{var l,c;(c=(l=n.current.props).onGeolocate)===null||c===void 0||c.call(l,a)}),s.on("error",a=>{var l,c;(c=(l=n.current.props).onError)===null||c===void 0||c.call(l,a)}),s.on("outofmaxbounds",a=>{var l,c;(c=(l=n.current.props).onOutOfMaxBounds)===null||c===void 0||c.call(l,a)}),s.on("trackuserlocationstart",a=>{var l,c;(c=(l=n.current.props).onTrackUserLocationStart)===null||c===void 0||c.call(l,a)}),s.on("trackuserlocationend",a=>{var l,c;(c=(l=n.current.props).onTrackUserLocationEnd)===null||c===void 0||c.call(l,a)}),s},{position:t.position});return n.current.props=t,A.useImperativeHandle(e,()=>r,[]),A.useEffect(()=>{Uf(r._container,t.style)},[t.style]),null}A.memo(A.forwardRef(nGe));function rGe(t){const e=s_(({mapLib:n})=>new n.NavigationControl(t),{position:t.position});return A.useEffect(()=>{Uf(e._container,t.style)},[t.style]),null}A.memo(rGe);function iGe(t){const e=s_(({mapLib:s})=>new s.ScaleControl(t),{position:t.position}),n=A.useRef(t),r=n.current;n.current=t;const{style:i}=t;return t.maxWidth!==void 0&&t.maxWidth!==r.maxWidth&&(e.options.maxWidth=t.maxWidth),t.unit!==void 0&&t.unit!==r.unit&&e.setUnit(t.unit),A.useEffect(()=>{Uf(e._container,i)},[i]),null}A.memo(iGe);const sGe=Dje(()=>import("./maplibre-gl-BRB2Trix.js").then(t=>t.m),__vite__mapDeps([])),oGe=A.forwardRef(function(e,n){return qje(e,n,sGe)}),la=10,Yj={NOT_CONTAINED:-1},vg=256;function o1(t,e){let n=Math.sin(t.lat*Math.PI/180);n=Math.min(Math.max(n,-.9999),.9999);const r=vg*(.5+t.lng/360)*Math.pow(2,e),i=vg*(.5-Math.log((1+n)/(1-n))/(4*Math.PI))*Math.pow(2,e);return{x:r,y:i}}function Kj(t,e){const n=Math.pow(2,e),r=(t.x/n/vg-.5)*360,i=(t.y/n/vg-.5)*(-2*Math.PI);return{lat:Math.atan(Math.sinh(i))*180/Math.PI,lng:r}}function yT(t,e){return{x:Math.floor(t.x/vg),y:Math.floor(t.y/vg),z:e}}function aO({x:t,y:e,z:n}){let r=0;for(let i=0;i<n;i++){const s=1<<i;t&s&&(r|=1<<2*i),e&s&&(r|=1<<2*i+1)}return r}function aGe(t,e){let n=la;for(;n>0;){const r=yT(o1(t,n),n),i=yT(o1(e,n),n),s=aO(r),o=aO(i);if(s!==o)break;n--}return n}function _T(t,e,n){if(n===void 0&&(n=aGe(t,e)),n<0||n>la)throw new Error(`Invalid zoom level: ${n}`);if(t.lng>e.lng){const r=y2(t,{lat:e.lat,lng:180},n),i=y2({lat:t.lat,lng:-180},e,n);return[r,i]}else return t.lng===-180&&e.lng===180?[[0]]:[y2(t,e,n)]}function y2(t,e,n){const r=o1(t,n),i=o1(e,n),s=yT(r,n),o=yT(i,n),a=[];for(let l=s.x;l<=o.x;l++)for(let c=s.y;c<=o.y;c++)a.push(aO({x:l,y:c,z:n}));return a}function lGe(t,e,n){if(n<0||n>la)throw new Error(`Invalid max zoom level: ${n}`);const r=new Array(la);for(let i=0;i<=n;i++)r[i]=_T(t,e,i);for(let i=n+1;i<=la;i++)r[i]=r[i-1];return r}function cGe(t,e,n){if(n<0||n>la)throw new Error(`Invalid max zoom level: ${n}`);const r={};for(let i=0;i<=n;i++)r[`z${i}`]=_T(t,e,i);return r}const uGe=t=>{const e=[];return t.forEach((n,r)=>{r===0?e.push(n):e.push(n.length===1?[t[r][0].concat(e[r-1][0])]:n.length===2?[e[r-1][0].concat(t[r][0]),e[r-1].length===2?e[r-1][1].concat(t[r][1]):t[r][1]]:[])}),e};function qj(t){let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,r=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;for(const s of t)for(let o=0;o<s.length;o+=2){const a=s[o];for(const l of a){const c=l[0],u=l[1];c<e&&(e=c),c>n&&(n=c),u<r&&(r=u),u>i&&(i=u)}}return{topLeft:{lng:e,lat:i},bottomRight:{lng:n,lat:r}}}function dGe(t,e,n,r){const i=o1(n,r),s={x:i.x-t/2,y:i.y-e/2},o={x:i.x+t/2,y:i.y+e/2};return{topLeft:Kj(s,r),bottomRight:Kj(o,r)}}function lO(t,e,n){if(t===e)return!0;if(!n||!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(!lO(t[r],e[r],n-1))return!1;return!0}if(Array.isArray(e))return!1;if(typeof t=="object"&&typeof e=="object"){const r=Object.keys(t),i=Object.keys(e);if(r.length!==i.length)return!1;for(const s of r)if(!e.hasOwnProperty(s)||!lO(t[s],e[s],n-1))return!1;return!0}return!1}class hGe{constructor(e,n,r){this.pool=[],this.taskQueue=[],this.onResult=r;for(let i=0;i<n;i++)this.addWorkerToPool(e)}addWorkerToPool(e){const n=new e;n.onerror=r=>{console.error(r)},n.onmessage=r=>{const i=this.pool.findIndex(s=>s.worker===n);if(i!==-1){this.pool[i].currentTaskId=null;const s=r.data;this.onResult(s),this.executeNextTask()}},this.pool.push({worker:n,workerConstructor:e,currentTaskId:null})}executeTask(e){this.taskQueue.push(e),this.executeNextTask()}executeNextTask(){const e=this.pool.find(n=>n.currentTaskId===null);if(e&&this.taskQueue.length>0){const n=this.taskQueue.shift();e.currentTaskId=n.id,e.worker.postMessage({...n,payload:JSON.stringify(n.payload)})}}terminateTask(e){const n=this.pool.findIndex(r=>r.currentTaskId===e);if(n!==-1){const r=this.pool[n];r.worker.terminate(),this.pool.splice(n,1),this.addWorkerToPool(r.workerConstructor)}}terminateAllTasks(){this.pool.forEach(e=>e.worker.terminate()),this.pool=[]}}function fGe(t){return new Worker("/assets/GeoQueryWorker-jwF2j0kZ.js",{name:t==null?void 0:t.name})}const pGe=`#define SHADER_NAME scatterplot-layer-vertex-shader

attribute vec3 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceRadius;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform float opacity;
uniform float radiusScale;
uniform float radiusMinPixels;
uniform float radiusMaxPixels;
uniform float lineWidthScale;
uniform float lineWidthMinPixels;
uniform float lineWidthMaxPixels;
uniform float stroked;
uniform bool filled;
uniform bool antialiasing;
uniform bool billboard;
uniform int radiusUnits;
uniform int lineWidthUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;


void main(void) {
  geometry.worldPosition = instancePositions;
  outerRadiusPixels = clamp(
    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),
    radiusMinPixels, radiusMaxPixels
  );
  float lineWidthPixels = clamp(
    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),
    lineWidthMinPixels, lineWidthMaxPixels
  );
  outerRadiusPixels += stroked * lineWidthPixels / 2.0;
  float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;
  unitPosition = edgePadding * positions.xy;
  geometry.uv = unitPosition;
  geometry.pickingColor = instancePickingColors;

  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;
  
  if (billboard) {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
    vec3 offset = edgePadding * positions * outerRadiusPixels;
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,mGe=`#define SHADER_NAME scatterplot-layer-fragment-shader

precision highp float;

uniform bool filled;
uniform float stroked;
uniform bool antialiasing;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;

void main(void) {
  geometry.uv = unitPosition;

  float distToCenter = length(unitPosition) * outerRadiusPixels;
  float inCircle = antialiasing ? 
    smoothedge(distToCenter, outerRadiusPixels) : 
    step(distToCenter, outerRadiusPixels);

  if (inCircle == 0.0) {
    discard;
  }

  if (stroked > 0.5) {
    float isLine = antialiasing ? 
      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
      step(innerUnitRadius * outerRadiusPixels, distToCenter);

    if (filled) {
      gl_FragColor = mix(vFillColor, vLineColor, isLine);
    } else {
      if (isLine == 0.0) {
        discard;
      }
      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
    }
  } else if (!filled) {
    discard;
  } else {
    gl_FragColor = vFillColor;
  }

  gl_FragColor.a *= inCircle;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,Zj=[0,0,0,255],gGe={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:t=>t.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:Zj},getLineColor:{type:"accessor",value:Zj},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class UD extends Dg{getShaders(){return super.getShaders({vs:pGe,fs:mGe,modules:[MD,LD]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(e){if(super.updateState(e),e.changeFlags.extensionsChanged){var n;const{gl:r}=this.context;(n=this.state.model)===null||n===void 0||n.delete(),this.state.model=this._getModel(r),this.getAttributeManager().invalidateAll()}}draw({uniforms:e}){const{radiusUnits:n,radiusScale:r,radiusMinPixels:i,radiusMaxPixels:s,stroked:o,filled:a,billboard:l,antialiasing:c,lineWidthUnits:u,lineWidthScale:d,lineWidthMinPixels:h,lineWidthMaxPixels:f}=this.props;this.state.model.setUniforms(e).setUniforms({stroked:o?1:0,filled:a,billboard:l,antialiasing:c,radiusUnits:e1[n],radiusScale:r,radiusMinPixels:i,radiusMaxPixels:s,lineWidthUnits:e1[u],lineWidthScale:d,lineWidthMinPixels:h,lineWidthMaxPixels:f}).draw()}_getModel(e){const n=[-1,-1,0,1,-1,0,1,1,0,-1,1,0];return new s1(e,{...this.getShaders(),id:this.props.id,geometry:new CD({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array(n)}}}),isInstanced:!0})}}W(UD,"defaultProps",gGe);W(UD,"layerName","ScatterplotLayer");const mJ={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function gJ(t,e,n={}){return vGe(t,n)!==e?(_Ge(t,n),!0):!1}function vGe(t,e={}){return Math.sign(yGe(t,e))}function yGe(t,e={}){const{start:n=0,end:r=t.length}=e,i=e.size||2;let s=0;for(let o=n,a=r-i;o<r;o+=i)s+=(t[o]-t[a])*(t[o+1]+t[a+1]),a=o;return s/2}function _Ge(t,e){const{start:n=0,end:r=t.length,size:i=2}=e,s=(r-n)/i,o=Math.floor(s/2);for(let a=0;a<o;++a){const l=n+a*i,c=n+(s-1-a)*i;for(let u=0;u<i;++u){const d=t[l+u];t[l+u]=t[c+u],t[c+u]=d}}}function Ga(t,e){const n=e.length,r=t.length;if(r>0){let i=!0;for(let s=0;s<n;s++)if(t[r-n+s]!==e[s]){i=!1;break}if(i)return!1}for(let i=0;i<n;i++)t[r+i]=e[i];return!0}function cO(t,e){const n=e.length;for(let r=0;r<n;r++)t[r]=e[r]}function a1(t,e,n,r,i=[]){const s=r+e*n;for(let o=0;o<n;o++)i[o]=t[s+o];return i}function uO(t,e,n,r,i=[]){let s,o;if(n&8)s=(r[3]-t[1])/(e[1]-t[1]),o=3;else if(n&4)s=(r[1]-t[1])/(e[1]-t[1]),o=1;else if(n&2)s=(r[2]-t[0])/(e[0]-t[0]),o=2;else if(n&1)s=(r[0]-t[0])/(e[0]-t[0]),o=0;else return null;for(let a=0;a<t.length;a++)i[a]=(o&1)===a?r[o]:s*(e[a]-t[a])+t[a];return i}function IE(t,e){let n=0;return t[0]<e[0]?n|=1:t[0]>e[2]&&(n|=2),t[1]<e[1]?n|=4:t[1]>e[3]&&(n|=8),n}function vJ(t,e){const{size:n=2,broken:r=!1,gridResolution:i=10,gridOffset:s=[0,0],startIndex:o=0,endIndex:a=t.length}=e||{},l=(a-o)/n;let c=[];const u=[c],d=a1(t,0,n,o);let h,f;const p=_J(d,i,s,[]),m=[];Ga(c,d);for(let _=1;_<l;_++){for(h=a1(t,_,n,o,h),f=IE(h,p);f;){uO(d,h,f,p,m);const y=IE(m,p);y&&(uO(d,m,y,p,m),f=y),Ga(c,m),cO(d,m),xGe(p,i,f),r&&c.length>n&&(c=[],u.push(c),Ga(c,d)),f=IE(h,p)}Ga(c,h),cO(d,h)}return r?u:u[0]}const Qj=0,bGe=1;function Lx(t,e){for(let n=0;n<e.length;n++)t.push(e[n]);return t}function yJ(t,e=null,n){if(!t.length)return[];const{size:r=2,gridResolution:i=10,gridOffset:s=[0,0],edgeTypes:o=!1}=n||{},a=[],l=[{pos:t,types:o?new Array(t.length/r).fill(bGe):null,holes:e||[]}],c=[[],[]];let u=[];for(;l.length;){const{pos:d,types:h,holes:f}=l.shift();EGe(d,r,f[0]||d.length,c),u=_J(c[0],i,s,u);const p=IE(c[1],u);if(p){let m=Jj(d,h,r,0,f[0]||d.length,u,p);const _={pos:m[0].pos,types:m[0].types,holes:[]},y={pos:m[1].pos,types:m[1].types,holes:[]};l.push(_,y);for(let x=0;x<f.length;x++)m=Jj(d,h,r,f[x],f[x+1]||d.length,u,p),m[0]&&(_.holes.push(_.pos.length),_.pos=Lx(_.pos,m[0].pos),o&&(_.types=Lx(_.types,m[0].types))),m[1]&&(y.holes.push(y.pos.length),y.pos=Lx(y.pos,m[1].pos),o&&(y.types=Lx(y.types,m[1].types)))}else{const m={positions:d};o&&(m.edgeTypes=h),f.length&&(m.holeIndices=f),a.push(m)}}return a}function Jj(t,e,n,r,i,s,o){const a=(i-r)/n,l=[],c=[],u=[],d=[],h=[];let f,p,m;const _=a1(t,a-1,n,r);let y=Math.sign(o&8?_[1]-s[3]:_[0]-s[2]),x=e&&e[a-1],b=0,E=0;for(let w=0;w<a;w++)f=a1(t,w,n,r,f),p=Math.sign(o&8?f[1]-s[3]:f[0]-s[2]),m=e&&e[r/n+w],p&&y&&y!==p&&(uO(_,f,o,s,h),Ga(l,h)&&u.push(x),Ga(c,h)&&d.push(x)),p<=0?(Ga(l,f)&&u.push(m),b-=p):u.length&&(u[u.length-1]=Qj),p>=0?(Ga(c,f)&&d.push(m),E+=p):d.length&&(d[d.length-1]=Qj),cO(_,f),y=p,x=m;return[b?{pos:l,types:e&&u}:null,E?{pos:c,types:e&&d}:null]}function _J(t,e,n,r){const i=Math.floor((t[0]-n[0])/e)*e+n[0],s=Math.floor((t[1]-n[1])/e)*e+n[1];return r[0]=i,r[1]=s,r[2]=i+e,r[3]=s+e,r}function xGe(t,e,n){n&8?(t[1]+=e,t[3]+=e):n&4?(t[1]-=e,t[3]-=e):n&2?(t[0]+=e,t[2]+=e):n&1&&(t[0]-=e,t[2]-=e)}function EGe(t,e,n,r){let i=1/0,s=-1/0,o=1/0,a=-1/0;for(let l=0;l<n;l+=e){const c=t[l],u=t[l+1];i=c<i?c:i,s=c>s?c:s,o=u<o?u:o,a=u>a?u:a}return r[0][0]=i,r[0][1]=o,r[1][0]=s,r[1][1]=a,r}const wGe=85.051129;function TGe(t,e){const{size:n=2,startIndex:r=0,endIndex:i=t.length,normalize:s=!0}=e||{},o=t.slice(r,i);bJ(o,n,0,i-r);const a=vJ(o,{size:n,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(s)for(const l of a)xJ(l,n);return a}function SGe(t,e=null,n){const{size:r=2,normalize:i=!0,edgeTypes:s=!1}=n||{};e=e||[];const o=[],a=[];let l=0,c=0;for(let d=0;d<=e.length;d++){const h=e[d]||t.length,f=c,p=CGe(t,r,l,h);for(let m=p;m<h;m++)o[c++]=t[m];for(let m=l;m<p;m++)o[c++]=t[m];bJ(o,r,f,c),AGe(o,r,f,c,n==null?void 0:n.maxLatitude),l=h,a[d]=c}a.pop();const u=yJ(o,a,{size:r,gridResolution:360,gridOffset:[-180,-180],edgeTypes:s});if(i)for(const d of u)xJ(d.positions,r);return u}function CGe(t,e,n,r){let i=-1,s=-1;for(let o=n+1;o<r;o+=e){const a=Math.abs(t[o]);a>i&&(i=a,s=o-1)}return s}function AGe(t,e,n,r,i=wGe){const s=t[n],o=t[r-e];if(Math.abs(s-o)>180){const a=a1(t,0,e,n);a[0]+=Math.round((o-s)/360)*360,Ga(t,a),a[1]=Math.sign(a[1])*i,Ga(t,a),a[0]=s,Ga(t,a)}}function bJ(t,e,n,r){let i=t[0],s;for(let o=n;o<r;o+=e){s=t[o];const a=s-i;(a>180||a<-180)&&(s-=Math.round(a/360)*360),t[o]=i=s}}function xJ(t,e){let n;const r=t.length/e;for(let s=0;s<r&&(n=t[s*e],(n+180)%360===0);s++);const i=-Math.round(n/360)*360;if(i!==0)for(let s=0;s<r;s++)t[s*e]+=i}function RGe(t,e,n,r){let i;if(Array.isArray(t[0])){const s=t.length*e;i=new Array(s);for(let o=0;o<t.length;o++)for(let a=0;a<e;a++)i[o*e+a]=t[o][a]||0}else i=t;return n?vJ(i,{size:e,gridResolution:n}):r?TGe(i,{size:e}):i}const PGe=1,IGe=2,_2=4;class MGe extends dJ{constructor(e){super({...e,attributes:{positions:{size:3,padding:18,initialize:!0,type:e.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(e){return this.attributes[e]}getGeometryFromBuffer(e){return this.normalize?super.getGeometryFromBuffer(e):null}normalizeGeometry(e){return this.normalize?RGe(e,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):e}getGeometrySize(e){if(eG(e)){let r=0;for(const i of e)r+=this.getGeometrySize(i);return r}const n=this.getPathLength(e);return n<2?0:this.isClosed(e)?n<3?0:n+2:n}updateGeometryAttributes(e,n){if(n.geometrySize!==0)if(e&&eG(e))for(const r of e){const i=this.getGeometrySize(r);n.geometrySize=i,this.updateGeometryAttributes(r,n),n.vertexStart+=i}else this._updateSegmentTypes(e,n),this._updatePositions(e,n)}_updateSegmentTypes(e,n){const r=this.attributes.segmentTypes,i=e?this.isClosed(e):!1,{vertexStart:s,geometrySize:o}=n;r.fill(0,s,s+o),i?(r[s]=_2,r[s+o-2]=_2):(r[s]+=PGe,r[s+o-2]+=IGe),r[s+o-1]=_2}_updatePositions(e,n){const{positions:r}=this.attributes;if(!r||!e)return;const{vertexStart:i,geometrySize:s}=n,o=new Array(3);for(let a=i,l=0;l<s;a++,l++)this.getPointOnPath(e,l,o),r[a*3]=o[0],r[a*3+1]=o[1],r[a*3+2]=o[2]}getPathLength(e){return e.length/this.positionSize}getPointOnPath(e,n,r=[]){const{positionSize:i}=this;n*i>=e.length&&(n+=1-e.length/i);const s=n*i;return r[0]=e[s],r[1]=e[s+1],r[2]=i===3&&e[s+2]||0,r}isClosed(e){if(!this.normalize)return!!this.opts.loop;const{positionSize:n}=this,r=e.length-n;return e[0]===e[r]&&e[1]===e[r+1]&&(n===2||e[2]===e[r+2])}}function eG(t){return Array.isArray(t[0])}const LGe=`#define SHADER_NAME path-layer-vertex-shader

attribute vec2 positions;

attribute float instanceTypes;
attribute vec3 instanceStartPositions;
attribute vec3 instanceEndPositions;
attribute vec3 instanceLeftPositions;
attribute vec3 instanceRightPositions;
attribute vec3 instanceLeftPositions64Low;
attribute vec3 instanceStartPositions64Low;
attribute vec3 instanceEndPositions64Low;
attribute vec3 instanceRightPositions64Low;
attribute float instanceStrokeWidths;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;

uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float jointType;
uniform float capType;
uniform float miterLimit;
uniform bool billboard;
uniform int widthUnits;

uniform float opacity;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

const float EPSILON = 0.001;
const vec3 ZERO_OFFSET = vec3(0.0);

float flipIfTrue(bool flag) {
  return -(float(flag) * 2. - 1.);
}
vec3 getLineJoinOffset(
  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,
  vec2 width
) {
  bool isEnd = positions.x > 0.0;
  float sideOfPath = positions.y;
  float isJoint = float(sideOfPath == 0.0);

  vec3 deltaA3 = (currPoint - prevPoint);
  vec3 deltaB3 = (nextPoint - currPoint);

  mat3 rotationMatrix;
  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);
  if (needsRotation) {
    deltaA3 = deltaA3 * rotationMatrix;
    deltaB3 = deltaB3 * rotationMatrix;
  }
  vec2 deltaA = deltaA3.xy / width;
  vec2 deltaB = deltaB3.xy / width;

  float lenA = length(deltaA);
  float lenB = length(deltaB);

  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);
  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);

  vec2 perpA = vec2(-dirA.y, dirA.x);
  vec2 perpB = vec2(-dirB.y, dirB.x);
  vec2 tangent = dirA + dirB;
  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;
  vec2 miterVec = vec2(-tangent.y, tangent.x);
  vec2 dir = isEnd ? dirA : dirB;
  vec2 perp = isEnd ? perpA : perpB;
  float L = isEnd ? lenA : lenB;
  float sinHalfA = abs(dot(miterVec, perp));
  float cosHalfA = abs(dot(dirA, miterVec));
  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);
  float cornerPosition = sideOfPath * turnDirection;

  float miterSize = 1.0 / max(sinHalfA, EPSILON);
  miterSize = mix(
    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),
    miterSize,
    step(0.0, cornerPosition)
  );

  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))
    * (sideOfPath + isJoint * turnDirection);
  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));
  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));
  bool isCap = isStartCap || isEndCap;
  if (isCap) {
    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);
    vJointType = capType;
  } else {
    vJointType = jointType;
  }
  vPathLength = L;
  vCornerOffset = offsetVec;
  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);
  vMiterLength = isCap ? isJoint : vMiterLength;

  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);
  vPathPosition = vec2(
    dot(offsetFromStartOfPath, perp),
    dot(offsetFromStartOfPath, dir)
  );
  geometry.uv = vPathPosition;

  float isValid = step(instanceTypes, 3.5);
  vec3 offset = vec3(offsetVec * width * isValid, 0.0);

  if (needsRotation) {
    offset = rotationMatrix * offset;
  }
  return offset;
}
void clipLine(inout vec4 position, vec4 refPosition) {
  if (position.w < EPSILON) {
    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);
    position = refPosition + (position - refPosition) * r;
  }
}

void main() {
  geometry.pickingColor = instancePickingColors;

  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);

  float isEnd = positions.x;

  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);
  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);

  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);
  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);

  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);
  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);

  geometry.worldPosition = currPosition;
  vec2 widthPixels = vec2(clamp(
    project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels) / 2.0);
  vec3 width;

  if (billboard) {
    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);
    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);
    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);

    clipLine(prevPositionScreen, currPositionScreen);
    clipLine(nextPositionScreen, currPositionScreen);
    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));

    width = vec3(widthPixels, 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec3 offset = getLineJoinOffset(
      prevPositionScreen.xyz / prevPositionScreen.w,
      currPositionScreen.xyz / currPositionScreen.w,
      nextPositionScreen.xyz / nextPositionScreen.w,
      project_pixel_size_to_clipspace(width.xy)
    );

    DECKGL_FILTER_GL_POSITION(currPositionScreen, geometry);
    gl_Position = vec4(currPositionScreen.xyz + offset * currPositionScreen.w, currPositionScreen.w);
  } else {
    prevPosition = project_position(prevPosition, prevPosition64Low);
    currPosition = project_position(currPosition, currPosition64Low);
    nextPosition = project_position(nextPosition, nextPosition64Low);

    width = vec3(project_pixel_size(widthPixels), 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec3 offset = getLineJoinOffset(prevPosition, currPosition, nextPosition, width.xy);
    geometry.position = vec4(currPosition + offset, 1.0);
    gl_Position = project_common_position_to_clipspace(geometry.position);
    DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,OGe=`#define SHADER_NAME path-layer-fragment-shader

precision highp float;

uniform float miterLimit;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

void main(void) {
  geometry.uv = vPathPosition;

  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {
    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {
      discard;
    }
    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {
      discard;
    }
  }
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,EJ=[0,0,0,255],kGe={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:t=>t.path},getColor:{type:"accessor",value:EJ},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},b2={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class zD extends Dg{constructor(...e){super(...e),W(this,"state",void 0)}getShaders(){return super.getShaders({vs:LGe,fs:OGe,modules:[MD,LD]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:b2,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:b2,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:b2,defaultValue:EJ},instancePickingColors:{size:3,type:5121,accessor:(r,{index:i,target:s})=>this.encodePickingColor(r&&r.__source?r.__source.index:i,s)}}),this.setState({pathTesselator:new MGe({fp64:this.use64bitPositions()})})}updateState(e){super.updateState(e);const{props:n,changeFlags:r}=e,i=this.getAttributeManager();if(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPath)){const{pathTesselator:a}=this.state,l=n.data.attributes||{};a.updateGeometry({data:n.data,geometryBuffer:l.getPath,buffers:l,normalize:!n._pathType,loop:n._pathType==="loop",getGeometry:n.getPath,positionFormat:n.positionFormat,wrapLongitude:n.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:r.dataChanged}),this.setState({numInstances:a.instanceCount,startIndices:a.vertexStarts}),r.dataChanged||i.invalidateAll()}if(r.extensionsChanged){var o;const{gl:a}=this.context;(o=this.state.model)===null||o===void 0||o.delete(),this.state.model=this._getModel(a),i.invalidateAll()}}getPickingInfo(e){const n=super.getPickingInfo(e),{index:r}=n,{data:i}=this.props;return i[0]&&i[0].__source&&(n.object=i.find(s=>s.__source.index===r)),n}disablePickingIndex(e){const{data:n}=this.props;if(n[0]&&n[0].__source)for(let r=0;r<n.length;r++)n[r].__source.index===e&&this._disablePickingIndex(r);else super.disablePickingIndex(e)}draw({uniforms:e}){const{jointRounded:n,capRounded:r,billboard:i,miterLimit:s,widthUnits:o,widthScale:a,widthMinPixels:l,widthMaxPixels:c}=this.props;this.state.model.setUniforms(e).setUniforms({jointType:Number(n),capType:Number(r),billboard:i,widthUnits:e1[o],widthScale:a,miterLimit:s,widthMinPixels:l,widthMaxPixels:c}).draw()}_getModel(e){const n=[0,1,2,1,4,2,1,3,4,3,5,4],r=[0,0,0,-1,0,1,1,-1,1,1,1,0];return new s1(e,{...this.getShaders(),id:this.props.id,geometry:new CD({drawMode:4,attributes:{indices:new Uint16Array(n),positions:{value:new Float32Array(r),size:2}}}),isInstanced:!0})}calculatePositions(e){const{pathTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("positions")}calculateSegmentTypes(e){const{pathTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("segmentTypes")}}W(zD,"defaultProps",kGe);W(zD,"layerName","PathLayer");const Ox=mJ.CLOCKWISE,tG=mJ.COUNTER_CLOCKWISE,Qu={isClosed:!0};function NGe(t){if(t=t&&t.positions||t,!Array.isArray(t)&&!ArrayBuffer.isView(t))throw new Error("invalid polygon")}function gv(t){return"positions"in t?t.positions:t}function ME(t){return"holeIndices"in t?t.holeIndices:null}function DGe(t){return Array.isArray(t[0])}function BGe(t){return t.length>=1&&t[0].length>=2&&Number.isFinite(t[0][0])}function FGe(t){const e=t[0],n=t[t.length-1];return e[0]===n[0]&&e[1]===n[1]&&e[2]===n[2]}function UGe(t,e,n,r){for(let i=0;i<e;i++)if(t[n+i]!==t[r-e+i])return!1;return!0}function nG(t,e,n,r,i){let s=e;const o=n.length;for(let a=0;a<o;a++)for(let l=0;l<r;l++)t[s++]=n[a][l]||0;if(!FGe(n))for(let a=0;a<r;a++)t[s++]=n[0][a]||0;return Qu.start=e,Qu.end=s,Qu.size=r,gJ(t,i,Qu),s}function rG(t,e,n,r,i=0,s,o){s=s||n.length;const a=s-i;if(a<=0)return e;let l=e;for(let c=0;c<a;c++)t[l++]=n[i+c];if(!UGe(n,r,i,s))for(let c=0;c<r;c++)t[l++]=n[i+c];return Qu.start=e,Qu.end=l,Qu.size=r,gJ(t,o,Qu),l}function zGe(t,e){NGe(t);const n=[],r=[];if("positions"in t){const{positions:i,holeIndices:s}=t;if(s){let o=0;for(let a=0;a<=s.length;a++)o=rG(n,o,i,e,s[a-1],s[a],a===0?Ox:tG),r.push(o);return r.pop(),{positions:n,holeIndices:r}}t=i}if(!DGe(t))return rG(n,0,t,e,0,n.length,Ox),n;if(!BGe(t)){let i=0;for(const[s,o]of t.entries())i=nG(n,i,o,e,s===0?Ox:tG),r.push(i);return r.pop(),{positions:n,holeIndices:r}}return nG(n,0,t,e,Ox),n}function x2(t,e,n){const r=t.length/3;let i=0;for(let s=0;s<r;s++){const o=(s+1)%r;i+=t[s*3+e]*t[o*3+n],i-=t[o*3+e]*t[s*3+n]}return Math.abs(i/2)}function iG(t,e,n,r){const i=t.length/3;for(let s=0;s<i;s++){const o=s*3,a=t[o+0],l=t[o+1],c=t[o+2];t[o+e]=a,t[o+n]=l,t[o+r]=c}}function $Ge(t,e,n,r){let i=ME(t);i&&(i=i.map(a=>a/e));let s=gv(t);const o=r&&e===3;if(n){const a=s.length;s=s.slice();const l=[];for(let c=0;c<a;c+=e){l[0]=s[c],l[1]=s[c+1],o&&(l[2]=s[c+2]);const u=n(l);s[c]=u[0],s[c+1]=u[1],o&&(s[c+2]=u[2])}}if(o){const a=x2(s,0,1),l=x2(s,0,2),c=x2(s,1,2);if(!a&&!l&&!c)return[];a>l&&a>c||(l>c?(n||(s=s.slice()),iG(s,0,2,1)):(n||(s=s.slice()),iG(s,2,0,1)))}return Fk(s,i,e)}class jGe extends dJ{constructor(e){const{fp64:n,IndexType:r=Uint32Array}=e;super({...e,attributes:{positions:{size:3,type:n?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:r,size:1}}})}get(e){const{attributes:n}=this;return e==="indices"?n.indices&&n.indices.subarray(0,this.vertexCount):n[e]}updateGeometry(e){super.updateGeometry(e);const n=this.buffers.indices;if(n)this.vertexCount=(n.value||n).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(e){if(this.normalize){const n=zGe(e,this.positionSize);return this.opts.resolution?yJ(gv(n),ME(n),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?SGe(gv(n),ME(n),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):n}return e}getGeometrySize(e){if(sG(e)){let n=0;for(const r of e)n+=this.getGeometrySize(r);return n}return gv(e).length/this.positionSize}getGeometryFromBuffer(e){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(e):null}updateGeometryAttributes(e,n){if(e&&sG(e))for(const r of e){const i=this.getGeometrySize(r);n.geometrySize=i,this.updateGeometryAttributes(r,n),n.vertexStart+=i,n.indexStart=this.indexStarts[n.geometryIndex+1]}else this._updateIndices(e,n),this._updatePositions(e,n),this._updateVertexValid(e,n)}_updateIndices(e,{geometryIndex:n,vertexStart:r,indexStart:i}){const{attributes:s,indexStarts:o,typedArrayManager:a}=this;let l=s.indices;if(!l||!e)return;let c=i;const u=$Ge(e,this.positionSize,this.opts.preproject,this.opts.full3d);l=a.allocate(l,i+u.length,{copy:!0});for(let d=0;d<u.length;d++)l[c++]=u[d]+r;o[n+1]=i+u.length,s.indices=l}_updatePositions(e,{vertexStart:n,geometrySize:r}){const{attributes:{positions:i},positionSize:s}=this;if(!i||!e)return;const o=gv(e);for(let a=n,l=0;l<r;a++,l++){const c=o[l*s],u=o[l*s+1],d=s>2?o[l*s+2]:0;i[a*3]=c,i[a*3+1]=u,i[a*3+2]=d}}_updateVertexValid(e,{vertexStart:n,geometrySize:r}){const{positionSize:i}=this,s=this.attributes.vertexValid,o=e&&ME(e);if(e&&e.edgeTypes?s.set(e.edgeTypes,n):s.fill(1,n,n+r),o)for(let a=0;a<o.length;a++)s[n+o[a]/i-1]=0;s[n+r-1]=0}}function sG(t){return Array.isArray(t)&&t.length>0&&!Number.isFinite(t[0])}const wJ=`
attribute vec2 vertexPositions;
attribute float vertexValid;

uniform bool extruded;
uniform bool isWireframe;
uniform float elevationScale;
uniform float opacity;

varying vec4 vColor;

struct PolygonProps {
  vec4 fillColors;
  vec4 lineColors;
  vec3 positions;
  vec3 nextPositions;
  vec3 pickingColors;
  vec3 positions64Low;
  vec3 nextPositions64Low;
  float elevations;
};

vec3 project_offset_normal(vec3 vector) {
  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {
    return normalize(vector * project_uCommonUnitsPerWorldUnit);
  }
  return project_normal(vector);
}

void calculatePosition(PolygonProps props) {
#ifdef IS_SIDE_VERTEX
  if(vertexValid < 0.5){
    gl_Position = vec4(0.);
    return;
  }
#endif

  vec3 pos;
  vec3 pos64Low;
  vec3 normal;
  vec4 colors = isWireframe ? props.lineColors : props.fillColors;

  geometry.worldPosition = props.positions;
  geometry.worldPositionAlt = props.nextPositions;
  geometry.pickingColor = props.pickingColors;

#ifdef IS_SIDE_VERTEX
  pos = mix(props.positions, props.nextPositions, vertexPositions.x);
  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);
#else
  pos = props.positions;
  pos64Low = props.positions64Low;
#endif

  if (extruded) {
    pos.z += props.elevations * vertexPositions.y * elevationScale;
  }
  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  if (extruded) {
  #ifdef IS_SIDE_VERTEX
    normal = vec3(
      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),
      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),
      0.0);
    normal = project_offset_normal(normal);
  #else
    normal = project_normal(vec3(0.0, 0.0, 1.0));
  #endif
    geometry.normal = normal;
    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);
    vColor = vec4(lightColor, colors.a * opacity);
  } else {
    vColor = vec4(colors.rgb, colors.a * opacity);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,GGe=`#define SHADER_NAME solid-polygon-layer-vertex-shader

attribute vec3 positions;
attribute vec3 positions64Low;
attribute float elevations;
attribute vec4 fillColors;
attribute vec4 lineColors;
attribute vec3 pickingColors;

`.concat(wJ,`

void main(void) {
  PolygonProps props;

  props.positions = positions;
  props.positions64Low = positions64Low;
  props.elevations = elevations;
  props.fillColors = fillColors;
  props.lineColors = lineColors;
  props.pickingColors = pickingColors;

  calculatePosition(props);
}
`),HGe=`#define SHADER_NAME solid-polygon-layer-vertex-shader-side
#define IS_SIDE_VERTEX


attribute vec3 instancePositions;
attribute vec3 nextPositions;
attribute vec3 instancePositions64Low;
attribute vec3 nextPositions64Low;
attribute float instanceElevations;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

`.concat(wJ,`

void main(void) {
  PolygonProps props;

  #if RING_WINDING_ORDER_CW == 1
    props.positions = instancePositions;
    props.positions64Low = instancePositions64Low;
    props.nextPositions = nextPositions;
    props.nextPositions64Low = nextPositions64Low;
  #else
    props.positions = nextPositions;
    props.positions64Low = nextPositions64Low;
    props.nextPositions = instancePositions;
    props.nextPositions64Low = instancePositions64Low;
  #endif
  props.elevations = instanceElevations;
  props.fillColors = instanceFillColors;
  props.lineColors = instanceLineColors;
  props.pickingColors = instancePickingColors;

  calculatePosition(props);
}
`),VGe=`#define SHADER_NAME solid-polygon-layer-fragment-shader

precision highp float;

varying vec4 vColor;

void main(void) {
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,bT=[0,0,0,255],WGe={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",_full3d:!1,elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:t=>t.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:bT},getLineColor:{type:"accessor",value:bT},material:!0},kx={enter:(t,e)=>e.length?e.subarray(e.length-t.length):t};class $D extends Dg{constructor(...e){super(...e),W(this,"state",void 0)}getShaders(e){return super.getShaders({vs:e==="top"?GGe:HGe,fs:VGe,defines:{RING_WINDING_ORDER_CW:!this.props._normalize&&this.props._windingOrder==="CCW"?0:1},modules:[MD,cze,LD]})}get wrapLongitude(){return!1}initializeState(){const{gl:e,viewport:n}=this.context;let{coordinateSystem:r}=this.props;const{_full3d:i}=this.props;n.isGeospatial&&r===wn.DEFAULT&&(r=wn.LNGLAT);let s;r===wn.LNGLAT&&(i?s=n.projectPosition.bind(n):s=n.projectFlat.bind(n)),this.setState({numInstances:0,polygonTesselator:new jGe({preproject:s,fp64:this.use64bitPositions(),IndexType:!e||bD(e,sr.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});const o=this.getAttributeManager(),a=!0;o.remove(["instancePickingColors"]),o.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:a},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:kx,accessor:"getPolygon",update:this.calculatePositions,noAlloc:a,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:a},elevations:{size:1,transition:kx,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:kx,accessor:"getFillColor",defaultValue:bT,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:kx,accessor:"getLineColor",defaultValue:bT,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:(l,{index:c,target:u})=>this.encodePickingColor(l&&l.__source?l.__source.index:c,u),shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}getPickingInfo(e){const n=super.getPickingInfo(e),{index:r}=n,{data:i}=this.props;return i[0]&&i[0].__source&&(n.object=i.find(s=>s.__source.index===r)),n}disablePickingIndex(e){const{data:n}=this.props;if(n[0]&&n[0].__source)for(let r=0;r<n.length;r++)n[r].__source.index===e&&this._disablePickingIndex(r);else super.disablePickingIndex(e)}draw({uniforms:e}){const{extruded:n,filled:r,wireframe:i,elevationScale:s}=this.props,{topModel:o,sideModel:a,polygonTesselator:l}=this.state,c={...e,extruded:!!n,elevationScale:s};a&&(a.setInstanceCount(l.instanceCount-1),a.setUniforms(c),i&&(a.setDrawMode(3),a.setUniforms({isWireframe:!0}).draw()),r&&(a.setDrawMode(6),a.setUniforms({isWireframe:!1}).draw())),o&&(o.setVertexCount(l.vertexCount),o.setUniforms(c).draw())}updateState(e){super.updateState(e),this.updateGeometry(e);const{props:n,oldProps:r,changeFlags:i}=e,s=this.getAttributeManager();if(i.extensionsChanged||n.filled!==r.filled||n.extruded!==r.extruded){var a;(a=this.state.models)===null||a===void 0||a.forEach(l=>l.delete()),this.setState(this._getModels(this.context.gl)),s.invalidateAll()}}updateGeometry({props:e,oldProps:n,changeFlags:r}){if(r.dataChanged||r.updateTriggersChanged&&(r.updateTriggersChanged.all||r.updateTriggersChanged.getPolygon)){const{polygonTesselator:s}=this.state,o=e.data.attributes||{};s.updateGeometry({data:e.data,normalize:e._normalize,geometryBuffer:o.getPolygon,buffers:o,getGeometry:e.getPolygon,positionFormat:e.positionFormat,wrapLongitude:e.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:r.dataChanged,full3d:e._full3d}),this.setState({numInstances:s.instanceCount,startIndices:s.vertexStarts}),r.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(e){const{id:n,filled:r,extruded:i}=this.props;let s,o;if(r){const a=this.getShaders("top");a.defines.NON_INSTANCED_MODEL=1,s=new s1(e,{...a,id:"".concat(n,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0})}return i&&(o=new s1(e,{...this.getShaders("side"),id:"".concat(n,"-side"),geometry:new CD({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}),o.userData.excludeAttributes={indices:!0}),{models:[o,s].filter(Boolean),topModel:s,sideModel:o}}calculateIndices(e){const{polygonTesselator:n}=this.state;e.startIndices=n.indexStarts,e.value=n.get("indices")}calculatePositions(e){const{polygonTesselator:n}=this.state;e.startIndices=n.vertexStarts,e.value=n.get("positions")}calculateVertexValid(e){e.value=this.state.polygonTesselator.get("vertexValid")}}W($D,"defaultProps",WGe);W($D,"layerName","SolidPolygonLayer");const $u={DEPTH_BUFFER_BIT:256,STENCIL_BUFFER_BIT:1024,COLOR_BUFFER_BIT:16384,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,ZERO:0,ONE:1,SRC_COLOR:768,ONE_MINUS_SRC_COLOR:769,SRC_ALPHA:770,ONE_MINUS_SRC_ALPHA:771,DST_ALPHA:772,ONE_MINUS_DST_ALPHA:773,DST_COLOR:774,ONE_MINUS_DST_COLOR:775,SRC_ALPHA_SATURATE:776,CONSTANT_COLOR:32769,ONE_MINUS_CONSTANT_COLOR:32770,CONSTANT_ALPHA:32771,ONE_MINUS_CONSTANT_ALPHA:32772,FUNC_ADD:32774,FUNC_SUBTRACT:32778,FUNC_REVERSE_SUBTRACT:32779,BLEND_EQUATION:32777,BLEND_EQUATION_RGB:32777,BLEND_EQUATION_ALPHA:34877,BLEND_DST_RGB:32968,BLEND_SRC_RGB:32969,BLEND_DST_ALPHA:32970,BLEND_SRC_ALPHA:32971,BLEND_COLOR:32773,ARRAY_BUFFER_BINDING:34964,ELEMENT_ARRAY_BUFFER_BINDING:34965,LINE_WIDTH:2849,ALIASED_POINT_SIZE_RANGE:33901,ALIASED_LINE_WIDTH_RANGE:33902,CULL_FACE_MODE:2885,FRONT_FACE:2886,DEPTH_RANGE:2928,DEPTH_WRITEMASK:2930,DEPTH_CLEAR_VALUE:2931,DEPTH_FUNC:2932,STENCIL_CLEAR_VALUE:2961,STENCIL_FUNC:2962,STENCIL_FAIL:2964,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STENCIL_BACK_FUNC:34816,STENCIL_BACK_FAIL:34817,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,VIEWPORT:2978,SCISSOR_BOX:3088,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,UNPACK_ALIGNMENT:3317,PACK_ALIGNMENT:3333,MAX_TEXTURE_SIZE:3379,MAX_VIEWPORT_DIMS:3386,SUBPIXEL_BITS:3408,RED_BITS:3410,GREEN_BITS:3411,BLUE_BITS:3412,ALPHA_BITS:3413,DEPTH_BITS:3414,STENCIL_BITS:3415,POLYGON_OFFSET_UNITS:10752,POLYGON_OFFSET_FACTOR:32824,TEXTURE_BINDING_2D:32873,SAMPLE_BUFFERS:32936,SAMPLES:32937,SAMPLE_COVERAGE_VALUE:32938,SAMPLE_COVERAGE_INVERT:32939,COMPRESSED_TEXTURE_FORMATS:34467,VENDOR:7936,RENDERER:7937,VERSION:7938,IMPLEMENTATION_COLOR_READ_TYPE:35738,IMPLEMENTATION_COLOR_READ_FORMAT:35739,BROWSER_DEFAULT_WEBGL:37444,STATIC_DRAW:35044,STREAM_DRAW:35040,DYNAMIC_DRAW:35048,ARRAY_BUFFER:34962,ELEMENT_ARRAY_BUFFER:34963,BUFFER_SIZE:34660,BUFFER_USAGE:34661,CURRENT_VERTEX_ATTRIB:34342,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,CULL_FACE:2884,FRONT:1028,BACK:1029,FRONT_AND_BACK:1032,BLEND:3042,DEPTH_TEST:2929,DITHER:3024,POLYGON_OFFSET_FILL:32823,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_COVERAGE:32928,SCISSOR_TEST:3089,STENCIL_TEST:2960,NO_ERROR:0,INVALID_ENUM:1280,INVALID_VALUE:1281,INVALID_OPERATION:1282,OUT_OF_MEMORY:1285,CONTEXT_LOST_WEBGL:37442,CW:2304,CCW:2305,DONT_CARE:4352,FASTEST:4353,NICEST:4354,GENERATE_MIPMAP_HINT:33170,BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126,DOUBLE:5130,DEPTH_COMPONENT:6402,ALPHA:6406,RGB:6407,RGBA:6408,LUMINANCE:6409,LUMINANCE_ALPHA:6410,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,FRAGMENT_SHADER:35632,VERTEX_SHADER:35633,COMPILE_STATUS:35713,DELETE_STATUS:35712,LINK_STATUS:35714,VALIDATE_STATUS:35715,ATTACHED_SHADERS:35717,ACTIVE_ATTRIBUTES:35721,ACTIVE_UNIFORMS:35718,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VARYING_VECTORS:36348,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_FRAGMENT_UNIFORM_VECTORS:36349,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,CURRENT_PROGRAM:35725,NEVER:512,ALWAYS:519,LESS:513,EQUAL:514,LEQUAL:515,GREATER:516,GEQUAL:518,NOTEQUAL:517,KEEP:7680,REPLACE:7681,INCR:7682,DECR:7683,INVERT:5386,INCR_WRAP:34055,DECR_WRAP:34056,NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TEXTURE_2D:3553,TEXTURE:5890,TEXTURE_CUBE_MAP:34067,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,MAX_CUBE_MAP_TEXTURE_SIZE:34076,TEXTURE0:33984,ACTIVE_TEXTURE:34016,REPEAT:10497,CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,TEXTURE_WIDTH:4096,TEXTURE_HEIGHT:4097,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,SAMPLER_2D:35678,SAMPLER_CUBE:35680,LOW_FLOAT:36336,MEDIUM_FLOAT:36337,HIGH_FLOAT:36338,LOW_INT:36339,MEDIUM_INT:36340,HIGH_INT:36341,FRAMEBUFFER:36160,RENDERBUFFER:36161,RGBA4:32854,RGB5_A1:32855,RGB565:36194,DEPTH_COMPONENT16:33189,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,DEPTH_STENCIL:34041,RENDERBUFFER_WIDTH:36162,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_STENCIL_SIZE:36181,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,COLOR_ATTACHMENT0:36064,DEPTH_ATTACHMENT:36096,STENCIL_ATTACHMENT:36128,DEPTH_STENCIL_ATTACHMENT:33306,NONE:0,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_UNSUPPORTED:36061,FRAMEBUFFER_BINDING:36006,RENDERBUFFER_BINDING:36007,READ_FRAMEBUFFER:36008,DRAW_FRAMEBUFFER:36009,MAX_RENDERBUFFER_SIZE:34024,INVALID_FRAMEBUFFER_OPERATION:1286,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,READ_BUFFER:3074,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_ROWS:3315,UNPACK_SKIP_PIXELS:3316,PACK_ROW_LENGTH:3330,PACK_SKIP_ROWS:3331,PACK_SKIP_PIXELS:3332,TEXTURE_BINDING_3D:32874,UNPACK_SKIP_IMAGES:32877,UNPACK_IMAGE_HEIGHT:32878,MAX_3D_TEXTURE_SIZE:32883,MAX_ELEMENTS_VERTICES:33e3,MAX_ELEMENTS_INDICES:33001,MAX_TEXTURE_LOD_BIAS:34045,MAX_FRAGMENT_UNIFORM_COMPONENTS:35657,MAX_VERTEX_UNIFORM_COMPONENTS:35658,MAX_ARRAY_TEXTURE_LAYERS:35071,MIN_PROGRAM_TEXEL_OFFSET:35076,MAX_PROGRAM_TEXEL_OFFSET:35077,MAX_VARYING_COMPONENTS:35659,FRAGMENT_SHADER_DERIVATIVE_HINT:35723,RASTERIZER_DISCARD:35977,VERTEX_ARRAY_BINDING:34229,MAX_VERTEX_OUTPUT_COMPONENTS:37154,MAX_FRAGMENT_INPUT_COMPONENTS:37157,MAX_SERVER_WAIT_TIMEOUT:37137,MAX_ELEMENT_INDEX:36203,RED:6403,RGB8:32849,RGBA8:32856,RGB10_A2:32857,TEXTURE_3D:32879,TEXTURE_WRAP_R:32882,TEXTURE_MIN_LOD:33082,TEXTURE_MAX_LOD:33083,TEXTURE_BASE_LEVEL:33084,TEXTURE_MAX_LEVEL:33085,TEXTURE_COMPARE_MODE:34892,TEXTURE_COMPARE_FUNC:34893,SRGB:35904,SRGB8:35905,SRGB8_ALPHA8:35907,COMPARE_REF_TO_TEXTURE:34894,RGBA32F:34836,RGB32F:34837,RGBA16F:34842,RGB16F:34843,TEXTURE_2D_ARRAY:35866,TEXTURE_BINDING_2D_ARRAY:35869,R11F_G11F_B10F:35898,RGB9_E5:35901,RGBA32UI:36208,RGB32UI:36209,RGBA16UI:36214,RGB16UI:36215,RGBA8UI:36220,RGB8UI:36221,RGBA32I:36226,RGB32I:36227,RGBA16I:36232,RGB16I:36233,RGBA8I:36238,RGB8I:36239,RED_INTEGER:36244,RGB_INTEGER:36248,RGBA_INTEGER:36249,R8:33321,RG8:33323,R16F:33325,R32F:33326,RG16F:33327,RG32F:33328,R8I:33329,R8UI:33330,R16I:33331,R16UI:33332,R32I:33333,R32UI:33334,RG8I:33335,RG8UI:33336,RG16I:33337,RG16UI:33338,RG32I:33339,RG32UI:33340,R8_SNORM:36756,RG8_SNORM:36757,RGB8_SNORM:36758,RGBA8_SNORM:36759,RGB10_A2UI:36975,TEXTURE_IMMUTABLE_FORMAT:37167,TEXTURE_IMMUTABLE_LEVELS:33503,UNSIGNED_INT_2_10_10_10_REV:33640,UNSIGNED_INT_10F_11F_11F_REV:35899,UNSIGNED_INT_5_9_9_9_REV:35902,FLOAT_32_UNSIGNED_INT_24_8_REV:36269,UNSIGNED_INT_24_8:34042,HALF_FLOAT:5131,RG:33319,RG_INTEGER:33320,INT_2_10_10_10_REV:36255,CURRENT_QUERY:34917,QUERY_RESULT:34918,QUERY_RESULT_AVAILABLE:34919,ANY_SAMPLES_PASSED:35887,ANY_SAMPLES_PASSED_CONSERVATIVE:36202,MAX_DRAW_BUFFERS:34852,DRAW_BUFFER0:34853,DRAW_BUFFER1:34854,DRAW_BUFFER2:34855,DRAW_BUFFER3:34856,DRAW_BUFFER4:34857,DRAW_BUFFER5:34858,DRAW_BUFFER6:34859,DRAW_BUFFER7:34860,DRAW_BUFFER8:34861,DRAW_BUFFER9:34862,DRAW_BUFFER10:34863,DRAW_BUFFER11:34864,DRAW_BUFFER12:34865,DRAW_BUFFER13:34866,DRAW_BUFFER14:34867,DRAW_BUFFER15:34868,MAX_COLOR_ATTACHMENTS:36063,COLOR_ATTACHMENT1:36065,COLOR_ATTACHMENT2:36066,COLOR_ATTACHMENT3:36067,COLOR_ATTACHMENT4:36068,COLOR_ATTACHMENT5:36069,COLOR_ATTACHMENT6:36070,COLOR_ATTACHMENT7:36071,COLOR_ATTACHMENT8:36072,COLOR_ATTACHMENT9:36073,COLOR_ATTACHMENT10:36074,COLOR_ATTACHMENT11:36075,COLOR_ATTACHMENT12:36076,COLOR_ATTACHMENT13:36077,COLOR_ATTACHMENT14:36078,COLOR_ATTACHMENT15:36079,SAMPLER_3D:35679,SAMPLER_2D_SHADOW:35682,SAMPLER_2D_ARRAY:36289,SAMPLER_2D_ARRAY_SHADOW:36292,SAMPLER_CUBE_SHADOW:36293,INT_SAMPLER_2D:36298,INT_SAMPLER_3D:36299,INT_SAMPLER_CUBE:36300,INT_SAMPLER_2D_ARRAY:36303,UNSIGNED_INT_SAMPLER_2D:36306,UNSIGNED_INT_SAMPLER_3D:36307,UNSIGNED_INT_SAMPLER_CUBE:36308,UNSIGNED_INT_SAMPLER_2D_ARRAY:36311,MAX_SAMPLES:36183,SAMPLER_BINDING:35097,PIXEL_PACK_BUFFER:35051,PIXEL_UNPACK_BUFFER:35052,PIXEL_PACK_BUFFER_BINDING:35053,PIXEL_UNPACK_BUFFER_BINDING:35055,COPY_READ_BUFFER:36662,COPY_WRITE_BUFFER:36663,COPY_READ_BUFFER_BINDING:36662,COPY_WRITE_BUFFER_BINDING:36663,FLOAT_MAT2x3:35685,FLOAT_MAT2x4:35686,FLOAT_MAT3x2:35687,FLOAT_MAT3x4:35688,FLOAT_MAT4x2:35689,FLOAT_MAT4x3:35690,UNSIGNED_INT_VEC2:36294,UNSIGNED_INT_VEC3:36295,UNSIGNED_INT_VEC4:36296,UNSIGNED_NORMALIZED:35863,SIGNED_NORMALIZED:36764,VERTEX_ATTRIB_ARRAY_INTEGER:35069,VERTEX_ATTRIB_ARRAY_DIVISOR:35070,TRANSFORM_FEEDBACK_BUFFER_MODE:35967,MAX_TRANSFORM_FEEDBACK_SEPARATE_COMPONENTS:35968,TRANSFORM_FEEDBACK_VARYINGS:35971,TRANSFORM_FEEDBACK_BUFFER_START:35972,TRANSFORM_FEEDBACK_BUFFER_SIZE:35973,TRANSFORM_FEEDBACK_PRIMITIVES_WRITTEN:35976,MAX_TRANSFORM_FEEDBACK_INTERLEAVED_COMPONENTS:35978,MAX_TRANSFORM_FEEDBACK_SEPARATE_ATTRIBS:35979,INTERLEAVED_ATTRIBS:35980,SEPARATE_ATTRIBS:35981,TRANSFORM_FEEDBACK_BUFFER:35982,TRANSFORM_FEEDBACK_BUFFER_BINDING:35983,TRANSFORM_FEEDBACK:36386,TRANSFORM_FEEDBACK_PAUSED:36387,TRANSFORM_FEEDBACK_ACTIVE:36388,TRANSFORM_FEEDBACK_BINDING:36389,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE:33297,FRAMEBUFFER_ATTACHMENT_RED_SIZE:33298,FRAMEBUFFER_ATTACHMENT_GREEN_SIZE:33299,FRAMEBUFFER_ATTACHMENT_BLUE_SIZE:33300,FRAMEBUFFER_ATTACHMENT_ALPHA_SIZE:33301,FRAMEBUFFER_ATTACHMENT_DEPTH_SIZE:33302,FRAMEBUFFER_ATTACHMENT_STENCIL_SIZE:33303,FRAMEBUFFER_DEFAULT:33304,DEPTH24_STENCIL8:35056,DRAW_FRAMEBUFFER_BINDING:36006,READ_FRAMEBUFFER_BINDING:36010,RENDERBUFFER_SAMPLES:36011,FRAMEBUFFER_ATTACHMENT_TEXTURE_LAYER:36052,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE:36182,UNIFORM_BUFFER:35345,UNIFORM_BUFFER_BINDING:35368,UNIFORM_BUFFER_START:35369,UNIFORM_BUFFER_SIZE:35370,MAX_VERTEX_UNIFORM_BLOCKS:35371,MAX_FRAGMENT_UNIFORM_BLOCKS:35373,MAX_COMBINED_UNIFORM_BLOCKS:35374,MAX_UNIFORM_BUFFER_BINDINGS:35375,MAX_UNIFORM_BLOCK_SIZE:35376,MAX_COMBINED_VERTEX_UNIFORM_COMPONENTS:35377,MAX_COMBINED_FRAGMENT_UNIFORM_COMPONENTS:35379,UNIFORM_BUFFER_OFFSET_ALIGNMENT:35380,ACTIVE_UNIFORM_BLOCKS:35382,UNIFORM_TYPE:35383,UNIFORM_SIZE:35384,UNIFORM_BLOCK_INDEX:35386,UNIFORM_OFFSET:35387,UNIFORM_ARRAY_STRIDE:35388,UNIFORM_MATRIX_STRIDE:35389,UNIFORM_IS_ROW_MAJOR:35390,UNIFORM_BLOCK_BINDING:35391,UNIFORM_BLOCK_DATA_SIZE:35392,UNIFORM_BLOCK_ACTIVE_UNIFORMS:35394,UNIFORM_BLOCK_ACTIVE_UNIFORM_INDICES:35395,UNIFORM_BLOCK_REFERENCED_BY_VERTEX_SHADER:35396,UNIFORM_BLOCK_REFERENCED_BY_FRAGMENT_SHADER:35398,OBJECT_TYPE:37138,SYNC_CONDITION:37139,SYNC_STATUS:37140,SYNC_FLAGS:37141,SYNC_FENCE:37142,SYNC_GPU_COMMANDS_COMPLETE:37143,UNSIGNALED:37144,SIGNALED:37145,ALREADY_SIGNALED:37146,TIMEOUT_EXPIRED:37147,CONDITION_SATISFIED:37148,WAIT_FAILED:37149,SYNC_FLUSH_COMMANDS_BIT:1,COLOR:6144,DEPTH:6145,STENCIL:6146,MIN:32775,MAX:32776,DEPTH_COMPONENT24:33190,STREAM_READ:35041,STREAM_COPY:35042,STATIC_READ:35045,STATIC_COPY:35046,DYNAMIC_READ:35049,DYNAMIC_COPY:35050,DEPTH_COMPONENT32F:36012,DEPTH32F_STENCIL8:36013,INVALID_INDEX:4294967295,TIMEOUT_IGNORED:-1,MAX_CLIENT_WAIT_TIMEOUT_WEBGL:37447,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,UNMASKED_VENDOR_WEBGL:37445,UNMASKED_RENDERER_WEBGL:37446,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,TEXTURE_MAX_ANISOTROPY_EXT:34046,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779,COMPRESSED_R11_EAC:37488,COMPRESSED_SIGNED_R11_EAC:37489,COMPRESSED_RG11_EAC:37490,COMPRESSED_SIGNED_RG11_EAC:37491,COMPRESSED_RGB8_ETC2:37492,COMPRESSED_RGBA8_ETC2_EAC:37493,COMPRESSED_SRGB8_ETC2:37494,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:37495,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:37496,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:37497,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGB_ETC1_WEBGL:36196,COMPRESSED_RGB_ATC_WEBGL:35986,COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL:35986,COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL:34798,UNSIGNED_INT_24_8_WEBGL:34042,HALF_FLOAT_OES:36193,RGBA32F_EXT:34836,RGB32F_EXT:34837,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,UNSIGNED_NORMALIZED_EXT:35863,MIN_EXT:32775,MAX_EXT:32776,SRGB_EXT:35904,SRGB_ALPHA_EXT:35906,SRGB8_ALPHA8_EXT:35907,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067,COLOR_ATTACHMENT4_WEBGL:36068,COLOR_ATTACHMENT5_WEBGL:36069,COLOR_ATTACHMENT6_WEBGL:36070,COLOR_ATTACHMENT7_WEBGL:36071,COLOR_ATTACHMENT8_WEBGL:36072,COLOR_ATTACHMENT9_WEBGL:36073,COLOR_ATTACHMENT10_WEBGL:36074,COLOR_ATTACHMENT11_WEBGL:36075,COLOR_ATTACHMENT12_WEBGL:36076,COLOR_ATTACHMENT13_WEBGL:36077,COLOR_ATTACHMENT14_WEBGL:36078,COLOR_ATTACHMENT15_WEBGL:36079,DRAW_BUFFER0_WEBGL:34853,DRAW_BUFFER1_WEBGL:34854,DRAW_BUFFER2_WEBGL:34855,DRAW_BUFFER3_WEBGL:34856,DRAW_BUFFER4_WEBGL:34857,DRAW_BUFFER5_WEBGL:34858,DRAW_BUFFER6_WEBGL:34859,DRAW_BUFFER7_WEBGL:34860,DRAW_BUFFER8_WEBGL:34861,DRAW_BUFFER9_WEBGL:34862,DRAW_BUFFER10_WEBGL:34863,DRAW_BUFFER11_WEBGL:34864,DRAW_BUFFER12_WEBGL:34865,DRAW_BUFFER13_WEBGL:34866,DRAW_BUFFER14_WEBGL:34867,DRAW_BUFFER15_WEBGL:34868,MAX_COLOR_ATTACHMENTS_WEBGL:36063,MAX_DRAW_BUFFERS_WEBGL:34852,VERTEX_ARRAY_BINDING_OES:34229,QUERY_COUNTER_BITS_EXT:34916,CURRENT_QUERY_EXT:34917,QUERY_RESULT_EXT:34918,QUERY_RESULT_AVAILABLE_EXT:34919,TIME_ELAPSED_EXT:35007,TIMESTAMP_EXT:36392,GPU_DISJOINT_EXT:36795};function XGe(t,e,n){const r=new kn(t,e),i={buffer:r,type:$u.FLOAT,size:2,offset:0},s={buffer:r,type:$u.FLOAT,size:1,offset:8},o={buffer:r,type:$u.FLOAT,size:1,offset:12},a={buffer:r,type:$u.UNSIGNED_BYTE,size:4,offset:16},l={buffer:r,type:$u.UNSIGNED_BYTE,size:4,offset:20};return new UD({id:"scatterplot-layer",data:{length:n,attributes:{getPosition:i,getRadius:s,getStrokeWidth:o,getStrokeColor:a,getFillColor:l}},pickable:!0,autoHighlight:!0,_normalize:!1})}function YGe(t,e,n){const r=new kn(t,e),i={buffer:r,type:$u.FLOAT,size:3,offset:0,stride:24},s={buffer:r,type:$u.FLOAT,size:1,offset:16,stride:24},o={buffer:r,type:$u.UNSIGNED_BYTE,size:4,offset:20,stride:24};return new zD({id:"path-layer",positionFormat:"XY",data:{length:n.byteLength/4,startIndices:new Uint32Array(n),attributes:{getPath:i,getLineWidth:s,getLineColor:o}},pickable:!0,autoHighlight:!0,_pathType:"open"})}function KGe(t,e,n,r,i,s,o){const a=new Float32Array(e),l=new Uint32Array(n),c=new Uint32Array(o);return console.log({positionsArray:a,polygonIndicesArray:l,fillColorsArray:c}),new $D({id:"polygon-layer",positionFormat:"XY",_normalize:!0,getFillColor:(u,{index:d,data:h,target:f})=>{const p=c[d];return[p&255,p>>8&255,p>>16&255,p>>24&255]},data:{length:l.length,startIndices:l,attributes:{getPolygon:{value:a,size:2}}}})}const qGe=24,ZGe=24;function QGe(t,e,n,r,i,s,o,a,l,c){const u=[],d=e.byteLength/qGe;if(d>0&&u.push(XGe(t,e,d)),n.byteLength/ZGe>0&&u.push(YGe(t,n,r)),s.byteLength/4>0){const p=KGe(t,i,s,o,a,l,c);u.push(p)}return u}function JGe(t,e){let n;return function(...r){n||(t(...r),n=!0,setTimeout(()=>n=!1,e))}}function eHe(t,e){let n;return function(...r){const i=()=>{n=null,t(...r)};n!==null&&clearTimeout(n),n=setTimeout(()=>i(),e)}}function oG(t,e,n){const r=JGe(t,e);return eHe(r,n)}const tHe=t=>{const e=ql(),[n,r]=A.useState({longitude:e.x,latitude:e.y,zoom:e.zoom}),[i,s]=A.useState([]),[o]=A.useState(null),[a,l]=A.useState(null),[c,u]=A.useState(null),d=A.useCallback(P=>{u(P)},[]),h=A.useMemo(()=>{if(c===null||!a)return[];const P=a[0],M=a[1],N=a[2],F=a[3],I=a[4],k=a[5],R=a[6],z=a[7],X=a[8];return QGe(c,P,M,N,F,I,k,R,z,X)},[c,a]),[f,p]=A.useState(null),m=mi(),_=A.useCallback(({zoom:P,latitude:M,longitude:N})=>{oG(()=>{const F=`/${Lt.RealWorld}/${e.uuid}/${P.toFixed(2)}/${M.toFixed(4)}/${N.toFixed(4)}/`;return m(F,{replace:!0})},100,300)()},[e.uuid,m]),y=A.useRef(-1);A.useEffect(()=>{const P=new hGe(fGe,10,M=>{try{l(M)}catch(N){console.log(N,M)}});return p(P),T(),()=>{P&&P.terminateAllTasks()}},[]),A.useEffect(()=>{if(f===null||t.width===0||t.height===0)return;const{topLeft:P,bottomRight:M}=dGe(t.width,t.height,{lng:n.longitude,lat:n.latitude},n.zoom),N=Math.ceil(n.zoom),F=lGe(P,M,N);if(lO(i,F[la-1],2))return;s(F[la-1]),y.current!==-1&&f.terminateTask(y.current);const I=y.current+1;y.current=I,f.executeTask({type:"dexie",id:I,payload:{uuid:e.uuid,mortonNumbers:uGe(F),zoom:Math.floor(n.zoom)}})},[f,t.width,t.height,e.x,e.y,e.zoom,i]);const x=()=>{if(!o)return;const{object:P,x:M,y:N}=o;if(!P)return null;const F=P.polygon?`Region: ${P.name}`:P.name?`Location: ${P.name}`:`Route: ${P.source} - ${P.target}`;return D("div",{style:{position:"absolute",zIndex:1,pointerEvents:"none",left:M,top:N,color:"white",backgroundColor:"black",padding:"5px"},children:F})},[b,E]=A.useState(),w=A.useCallback(oG(_,100,200),[_]);A.useEffect(()=>{w(n)},[w,n]),iC(Hi.openProject(t.uuid),Hi.layerPanelState,P=>{T()});const T=()=>{e.project.layerPanelState.toArray().then(P=>{const M=P[0].mapTileUuid;Pn.getResource(M).then(N=>{const F=N;F&&(F!=null&&F.mapName)&&(F!=null&&F.apiKey)&&E(`https://api.maptiler.com/maps/${F.mapName}/style.json?key=${F.apiKey}`)})})},C=A.useCallback(P=>{if(P.viewState===void 0||P.viewState.zoom>=la)return;const M=P.viewState;r(M)},[]);return!f||y.current===-1||!b?D(Mf,{variant:"indeterminate",style:{position:"absolute",left:"3.9px",top:"0.5px"}}):Pe(Oje,{views:[new OD({repeat:!0})],width:t.width,height:t.height,controller:!0,layers:h,viewState:n,onWebGLInitialized:d,onViewStateChange:C,children:[D(oGe,{mapStyle:b}),x(),t.children]})},nHe=()=>Pe("div",{style:{fontSize:"12px",position:"absolute",bottom:0,right:"7px",background:"rgba(255,255,255,0.1)"},children:[D("a",{href:"https://www.maptiler.com/copyright/",target:"_blank",children:" MapTiler"})," ",D("a",{href:"https://www.openstreetmap.org/copyright",target:"_blank",children:" OpenStreetMap contributors"})]}),rHe=()=>{const{uuid:t,project:e,zoom:n,y:r,x:i,type:s}=ql(),{width:o,height:a}=a3();return D(v3,{uuid:t,type:s,viewportCenter:[n,r,i],backgroundColor:"rgba(230,230,230,0.6)",backgroundPanel:l=>D(tHe,{uuid:t,project:e,width:o,height:a,children:D(nHe,{})})})},iHe=()=>{const{uuid:t,x:e,y:n,zoom:r,type:i}=ql();return D(v3,{uuid:t,type:i,viewportCenter:[r,n,e],backgroundColor:"rgba(255,230,230,0.6)",backgroundPanel:s=>D(CZ,{...s})})},sHe=()=>{const{type:t}=ql();switch(t){case Lt.Racetrack:return D(iHe,{});case Lt.Graph:return D(VNe,{});case Lt.RealWorld:return D(rHe,{});default:throw new Error(t)}},oHe=Tt($t)`
  height: calc(100vh - 1px);
  padding: 0;
  margin: 0;
  align-items: center;
  justify-content: space-around;
  overflow: hidden;
  scroll-behavior: unset;
`,aHe=t=>D(oHe,{children:t.children}),lHe=Tt.div`
  padding-top: 8px;
  padding-bottom: 4px;
  align-self: center;
  justify-content: center;
  align-items: center;
  text-align: center;
  display: flex;
`;function cHe(t){return Pe(lHe,{children:[t.startIcon,D(en,{sx:{fontSize:"1.8em",marginLeft:"0.2em"},children:t.children})]})}var TJ={},jD={};Object.defineProperty(jD,"__esModule",{value:!0});jD.default=function(){return`
.github-corner:hover .octo-arm {
  animation: octocat-wave 560ms ease-in-out;
}

@keyframes octocat-wave {
  0%, 100% {
    transform: rotate(0deg);
  }

  20%, 60% {
    transform: rotate(-25deg);
  }

  40%, 80% {
    transform: rotate(10deg);
  }
}

@media (max-width: 500px) {
    .github-corner:hover .octo-arm {
        animation: none;
    }

    .github-corner .octo-arm {
        animation: octocat-wave 560ms ease-in-out;
    }
}
`};Object.defineProperty(TJ,"__esModule",{value:!0});var aG=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uHe=function(){function t(e,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),SJ=A,$0=CJ(SJ),dHe=jD,hHe=CJ(dHe);function CJ(t){return t&&t.__esModule?t:{default:t}}function fHe(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function pHe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mHe(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:t}function gHe(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var lG="____GITHUB_CORNER_SUPER_SECRET___",cG=(0,hHe.default)(),AJ=function(t){gHe(e,t);function e(){return pHe(this,e),mHe(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return uHe(e,[{key:"componentDidMount",value:function(){if(!document.getElementById(lG)){var r=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",i.id=lG,i.styleSheet?i.styleSheet.cssText=cG:i.appendChild(document.createTextNode(cG)),r.appendChild(i)}}},{key:"render",value:function(){var r=this.props,i=r.href,s=r.size,o=r.direction,a=r.octoColor,l=r.bannerColor,c=r.ariaLabel,u=r.className,d=r.svgStyle,h=fHe(r,["href","size","direction","octoColor","bannerColor","ariaLabel","className","svgStyle"]),f={position:"absolute",top:0,fill:a},p={},m="",_="",y="";o==="left"?(m="M250 0L135 115h-15l-12 27L0 250V0z",_="M122 109c15-9 9-19 9-19-3-7-2-11-2-11 1-7-3-2-3-2-4 5-2 11-2 11 3 10-5 15-9 16",y="M135 115s-4 2-5 0l-14-14c-3-2-6-3-8-3 8-11 15-24-2-41-5-5-10-7-16-7-1-2-3-7-12-11 0 0-5 3-7 16-4 2-8 5-12 9s-7 8-9 12c-14 4-17 9-17 9 4 8 9 11 11 11 0 6 2 11 7 16 16 16 30 10 41 2 0 3 1 7 5 11l12 11c1 2-1 6-1 6z",f.left=0,p.WebkitTransformOrigin="120px 144px",p.transformOrigin="120px 144px"):(m="M0 0l115 115h15l12 27 108 108V0z",_="M128 109c-15-9-9-19-9-19 3-7 2-11 2-11-1-7 3-2 3-2 4 5 2 11 2 11-3 10 5 15 9 16",y="M115 115s4 2 5 0l14-14c3-2 6-3 8-3-8-11-15-24 2-41 5-5 10-7 16-7 1-2 3-7 12-11 0 0 5 3 7 16 4 2 8 5 12 9s7 8 9 12c14 3 17 7 17 7-4 8-9 11-11 11 0 6-2 11-7 16-16 16-30 10-41 2 0 3-1 7-5 11l-12 11c-1 1 1 5 1 5z",f.right=0,p.WebkitTransformOrigin="130px 106px",p.transformOrigin="130px 106px");var x=typeof u=="string"?" "+u:"";return $0.default.createElement("a",aG({},h,{href:i,className:"github-corner"+x,"aria-label":c}),$0.default.createElement("svg",{width:s,height:s,viewBox:"0 0 250 250",style:aG({},f,d)},$0.default.createElement("path",{className:"octo-banner",d:m,fill:l}),$0.default.createElement("path",{className:"octo-arm",d:_,style:p}),$0.default.createElement("path",{className:"octo-body",d:y})))}}]),e}(SJ.Component);AJ.defaultProps={href:"/",size:80,direction:"right",octoColor:"#fff",bannerColor:"#151513",ariaLabel:"Open GitHub project"};var vHe=TJ.default=AJ,dO=(t=>(t.start="start",t.cancel="cancel",t))(dO||{}),Ju=(t=>(t.started="started",t.progress="progress",t.cancel="cancel",t.error="error",t.finished="finished",t))(Ju||{});const yHe=Tt.div`
  align-items: center;
  justify-content: center;

  height: calc(100vh - 20px);

  border: ${t=>t.isDragOver?"10px dashed #eee":"10px solid rgba(255,255,255,0)"};

  background-color: ${t=>t.isError?"#ff000040":t.isDragOver?"#00ff0010":"transparent"};
`,_He=Ld({});function uG(t,e){const n=[];for(let r=0;r<t.length;r++){const s=t[r].name,o=s.slice(s.lastIndexOf(".")),a=e.includes(o);n.push(a)}return n}const bHe=Tt(Zc)`
  padding: 30px;
`,xHe=Tt.div`
  flex: 1;
  overflow: scroll;
`;function EHe({processDialogOpen:t,loadingFiles:e,cancelTask:n,isFinished:r,closeDialog:i}){const s=A.useRef(null),[o,a]=A.useState(!0),l=()=>{const c=s.current;c&&c.scrollTop<c.scrollHeight-c.offsetHeight&&a(!1)};return A.useEffect(()=>{if(o){const c=s.current;c&&(c.scrollTop=c==null?void 0:c.scrollHeight)}},[e,s,o]),Pe(qc,{open:t,fullScreen:!0,children:[D(Lf,{children:" Processing File "}),Pe(bHe,{children:[D(xHe,{ref:s,onScroll:l,children:Object.values(e).map(c=>Pe("div",{children:[Pe(en,{children:["FileName: ",c.fileName]}),c.progress?Pe(ui,{children:[Pe(en,{style:{textAlign:"right"},children:[c.index.toLocaleString()," /"," ",c.total.toLocaleString()," (",c.progress,"%)"]}),D(_M,{variant:"determinate",value:c.progress}),D(en,{children:D("strong",{children:c.errorMessage&&c.errorMessage})})]}):D(_M,{variant:"indeterminate"})]},c.fileName))}),Pe($t,{style:{margin:"8px",display:"flex",gap:"8px",height:"40px",alignItems:"center"},children:[D(Ki,{variant:"contained",onClick:n,disabled:r,children:"Cancel"}),D(Ki,{variant:"contained",onClick:i,disabled:!r,children:"Close"})]})]})]})}const wHe=Tt.div`
  padding: 10px;
`,THe=Tt.div`
  color: red;
`,RJ=t=>{const[e,n]=A.useState(!1),[r,i]=A.useState(!1),[s,o]=A.useState(!1),[a,l]=A.useState(!1),[c,u]=of(_He),[d,h]=A.useState(null),f=A.useCallback(E=>{if(E.preventDefault(),n(!0),t.acceptableSuffixes){const w=uG(E.dataTransfer.files,t.acceptableSuffixes);i(w.some(T=>!T))}else i(!1)},[]),p=A.useCallback(E=>{E.preventDefault(),n(!1),i(!1)},[]),m=E=>{const T=uG(E,t.acceptableSuffixes).some(C=>!C);i(T),t.handleFiles&&t.handleFiles(E),u(()=>({}));for(let C=0;C<E.length;C++)d.postMessage({type:dO.start,payload:{file:E[C]}})},_=A.useCallback(E=>{E.preventDefault(),n(!1);const w=E.dataTransfer.files;E.dataTransfer&&(t.handleFiles?t.handleFiles(w):m(w))},[m]),y=A.useCallback(E=>{const w=E.target.files;w&&(t.handleFiles?t.handleFiles(w):m(w),document.getElementById("file").value=null)},[m]),x=A.useCallback(()=>{d.postMessage({type:dO.cancel}),o(!1),u(()=>({}))},[d]),b=A.useCallback(()=>{o(!1),u(()=>({}))},[d]);return A.useEffect(()=>{const E=new Worker(new URL("/assets/FileLoaderWorker-CN0wIScJ.js",import.meta.url),{type:"module"}),w=C=>{l(!1),o(!0),u(P=>({...P,[C.fileName]:C}))},T=C=>{u(P=>({...P,[C.fileName]:C})),C.progress===100&&Object.values(c).every(M=>M.progress===100)&&(l(!0),t.onFinish&&t.onFinish(Date.now()))};return E.onmessage=C=>{const P=C.data;switch(P.value.type){case Ju.started:w(P.value);break;case Ju.progress:T(P.value);break;case Ju.cancel:u(()=>({}));break}},h(E),()=>{E.terminate()}},[]),Pe(ui,{children:[Pe(yHe,{isDragOver:e,onDragOver:f,onDragLeave:p,onDrop:_,isError:r,children:[D("div",{children:t.children}),D("div",{children:D(Wi,{title:"resource files(GADM Shapes GeoJSON files, IDE-GSM cities and routes csv files) and project files",children:Pe(wHe,{children:[D(en,{style:{textAlign:"center",fontWeight:"bold"}}),D("div",{style:{textAlign:"center",marginTop:"20px",marginLeft:"40px"},children:D("input",{id:"file",onChange:y,type:"file",multiple:!0})}),D(THe,{children:r&&":"})]})})})]}),D(EHe,{processDialogOpen:s,loadingFiles:Object.values(c),cancelTask:x,isFinished:a,closeDialog:b})]})};function SHe(){return Rf()}function CHe(t){const e=[];for(let n=0;n<t.length;n++){const r=t.item(n);r&&e.push(r)}return e}const PJ=(t,e)=>e?t.replace("https://","/").replace("http://","/"):`https://api.allorigins.win/get?url=${encodeURIComponent(t)}`,AHe=[{code:"AFG",name:"Afghanistan",level:2},{code:"XAD",name:"Akrotiri and Dhekelia",level:1},{code:"ALA",name:"land",level:2},{code:"ALB",name:"Albania",level:3},{code:"DZA",name:"Algeria",level:2},{code:"ASM",name:"American Samoa",level:3},{code:"AND",name:"Andorra",level:1},{code:"AGO",name:"Angola",level:3},{code:"AIA",name:"Anguilla",level:1},{code:"ATA",name:"Antarctica",level:0},{code:"ATG",name:"Antigua and Barbuda",level:1},{code:"ARG",name:"Argentina",level:2},{code:"ARM",name:"Armenia",level:1},{code:"ABW",name:"Aruba",level:0},{code:"AUS",name:"Australia",level:2},{code:"AUT",name:"Austria",level:4},{code:"AZE",name:"Azerbaijan",level:2},{code:"BHS",name:"Bahamas",level:1},{code:"BHR",name:"Bahrain",level:1},{code:"BGD",name:"Bangladesh",level:4},{code:"BRB",name:"Barbados",level:1},{code:"BLR",name:"Belarus",level:2},{code:"BEL",name:"Belgium",level:4},{code:"BLZ",name:"Belize",level:1},{code:"BEN",name:"Benin",level:3},{code:"BMU",name:"Bermuda",level:1},{code:"BTN",name:"Bhutan",level:2},{code:"BOL",name:"Bolivia",level:3},{code:"BES",name:"Bonaire, Saint Eustatius and Saba",level:1},{code:"BIH",name:"Bosnia and Herzegovina",level:3},{code:"BWA",name:"Botswana",level:2},{code:"BVT",name:"Bouvet Island",level:0},{code:"BRA",name:"Brazil",level:2},{code:"IOT",name:"British Indian Ocean Territory",level:0},{code:"VGB",name:"British Virgin Islands",level:1},{code:"BRN",name:"Brunei",level:2},{code:"BGR",name:"Bulgaria",level:2},{code:"BFA",name:"Burkina Faso",level:3},{code:"BDI",name:"Burundi",level:4},{code:"CPV",name:"Cabo Verde",level:1},{code:"KHM",name:"Cambodia",level:3},{code:"CMR",name:"Cameroon",level:3},{code:"CAN",name:"Canada",level:3},{code:"XCA",name:"Caspian Sea",level:0},{code:"CYM",name:"Cayman Islands",level:1},{code:"CAF",name:"Central African Republic",level:2},{code:"TCD",name:"Chad",level:3},{code:"CHL",name:"Chile",level:3},{code:"CHN",name:"China",level:3},{code:"CXR",name:"Christmas Island",level:0},{code:"XCL",name:"Clipperton Island",level:0},{code:"CCK",name:"Cocos Islands",level:0},{code:"COL",name:"Colombia",level:2},{code:"COM",name:"Comoros",level:1},{code:"COG",name:"Congo",level:2},{code:"COK",name:"Cook Islands",level:1},{code:"CRI",name:"Costa Rica",level:3},{code:"CIV",name:"Cte d'Ivoire",level:4},{code:"HRV",name:"Croatia",level:2},{code:"CUB",name:"Cuba",level:2},{code:"CUW",name:"Curaao",level:0},{code:"CYP",name:"Cyprus",level:1},{code:"CZE",name:"Czech Republic",level:2},{code:"COD",name:"Democratic Republic of the Congo",level:2},{code:"DNK",name:"Denmark",level:2},{code:"DJI",name:"Djibouti",level:2},{code:"DMA",name:"Dominica",level:1},{code:"DOM",name:"Dominican Republic",level:2},{code:"TLS",name:"East Timor",level:3},{code:"ECU",name:"Ecuador",level:3},{code:"EGY",name:"Egypt",level:2},{code:"SLV",name:"El Salvador",level:2},{code:"GNQ",name:"Equatorial Guinea",level:2},{code:"ERI",name:"Eritrea",level:2},{code:"EST",name:"Estonia",level:3},{code:"SWZ",name:"Eswatini",level:2},{code:"ETH",name:"Ethiopia",level:3},{code:"FLK",name:"Falkland Islands",level:0},{code:"FRO",name:"Faroe Islands",level:2},{code:"FJI",name:"Fiji",level:2},{code:"FIN",name:"Finland",level:4},{code:"FRA",name:"France",level:4},{code:"GUF",name:"French Guiana",level:2},{code:"PYF",name:"French Polynesia",level:1},{code:"ATF",name:"French Southern Territories",level:1},{code:"GAB",name:"Gabon",level:2},{code:"GMB",name:"Gambia",level:2},{code:"GEO",name:"Georgia",level:2},{code:"DEU",name:"Germany",level:4},{code:"GHA",name:"Ghana",level:2},{code:"GIB",name:"Gibraltar",level:0},{code:"GRC",name:"Greece",level:3},{code:"GRL",name:"Greenland",level:1},{code:"GRD",name:"Grenada",level:1},{code:"GLP",name:"Guadeloupe",level:2},{code:"GUM",name:"Guam",level:1},{code:"GTM",name:"Guatemala",level:2},{code:"GGY",name:"Guernsey",level:1},{code:"GIN",name:"Guinea",level:3},{code:"GNB",name:"Guinea-Bissau",level:2},{code:"GUY",name:"Guyana",level:2},{code:"HTI",name:"Haiti",level:4},{code:"HMD",name:"Heard Island and McDonald Islands",level:0},{code:"HND",name:"Honduras",level:2},{code:"HUN",name:"Hungary",level:2},{code:"ISL",name:"Iceland",level:2},{code:"IND",name:"India",level:3},{code:"IDN",name:"Indonesia",level:4},{code:"IRN",name:"Iran",level:2},{code:"IRQ",name:"Iraq",level:2},{code:"IRL",name:"Ireland",level:2},{code:"IMN",name:"Isle of Man",level:1},{code:"ISR",name:"Israel",level:1},{code:"ITA",name:"Italy",level:3},{code:"JAM",name:"Jamaica",level:1},{code:"JPN",name:"Japan",level:2},{code:"JEY",name:"Jersey",level:1},{code:"JOR",name:"Jordan",level:2},{code:"KAZ",name:"Kazakhstan",level:2},{code:"KEN",name:"Kenya",level:3},{code:"KIR",name:"Kiribati",level:0},{code:"XKO",name:"Kosovo",level:2},{code:"KWT",name:"Kuwait",level:1},{code:"KGZ",name:"Kyrgyzstan",level:2},{code:"LAO",name:"Laos",level:2},{code:"LVA",name:"Latvia",level:2},{code:"LBN",name:"Lebanon",level:3},{code:"LSO",name:"Lesotho",level:1},{code:"LBR",name:"Liberia",level:3},{code:"LBY",name:"Libya",level:1},{code:"LIE",name:"Liechtenstein",level:1},{code:"LTU",name:"Lithuania",level:2},{code:"LUX",name:"Luxembourg",level:4},{code:"MKD",name:"Macedonia",level:1},{code:"MDG",name:"Madagascar",level:4},{code:"MWI",name:"Malawi",level:3},{code:"MYS",name:"Malaysia",level:2},{code:"MDV",name:"Maldives",level:0},{code:"MLI",name:"Mali",level:4},{code:"MLT",name:"Malta",level:2},{code:"MHL",name:"Marshall Islands",level:1},{code:"MTQ",name:"Martinique",level:2},{code:"MRT",name:"Mauritania",level:2},{code:"MUS",name:"Mauritius",level:1},{code:"MYT",name:"Mayotte",level:1},{code:"MEX",name:"Mexico",level:2},{code:"FSM",name:"Micronesia",level:2},{code:"MDA",name:"Moldova",level:1},{code:"MCO",name:"Monaco",level:0},{code:"MNG",name:"Mongolia",level:2},{code:"MNE",name:"Montenegro",level:1},{code:"MSR",name:"Montserrat",level:1},{code:"MAR",name:"Morocco",level:4},{code:"MOZ",name:"Mozambique",level:3},{code:"MMR",name:"Myanmar",level:3},{code:"NAM",name:"Namibia",level:2},{code:"NRU",name:"Nauru",level:1},{code:"NPL",name:"Nepal",level:4},{code:"NLD",name:"Netherlands",level:2},{code:"NCL",name:"New Caledonia",level:2},{code:"NZL",name:"New Zealand",level:2},{code:"NIC",name:"Nicaragua",level:2},{code:"NER",name:"Niger",level:3},{code:"NGA",name:"Nigeria",level:2},{code:"NIU",name:"Niue",level:0},{code:"NFK",name:"Norfolk Island",level:0},{code:"PRK",name:"North Korea",level:2},{code:"ZNC",name:"Northern Cyprus",level:1},{code:"MNP",name:"Northern Mariana Islands",level:1},{code:"NOR",name:"Norway",level:2},{code:"OMN",name:"Oman",level:2},{code:"PAK",name:"Pakistan",level:3},{code:"PLW",name:"Palau",level:1},{code:"PSE",name:"Palestine",level:2},{code:"PAN",name:"Panama",level:3},{code:"PNG",name:"Papua New Guinea",level:2},{code:"XPI",name:"Paracel Islands",level:0},{code:"PRY",name:"Paraguay",level:2},{code:"PER",name:"Peru",level:3},{code:"PHL",name:"Philippines",level:3},{code:"PCN",name:"Pitcairn Islands",level:0},{code:"POL",name:"Poland",level:3},{code:"PRT",name:"Portugal",level:3},{code:"PRI",name:"Puerto Rico",level:1},{code:"QAT",name:"Qatar",level:1},{code:"REU",name:"Runion",level:2},{code:"ROU",name:"Romania",level:2},{code:"RUS",name:"Russia",level:3},{code:"RWA",name:"Rwanda",level:4},{code:"BLM",name:"Saint-Barthlemy",level:2},{code:"MAF",name:"Saint-Martin",level:0},{code:"SHN",name:"Saint Helena",level:2},{code:"KNA",name:"Saint Kitts and Nevis",level:1},{code:"LCA",name:"Saint Lucia",level:1},{code:"SPM",name:"Saint Pierre and Miquelon",level:1},{code:"VCT",name:"Saint Vincent and the Grenadines",level:1},{code:"WSM",name:"Samoa",level:2},{code:"SMR",name:"San Marino",level:1},{code:"STP",name:"So Tom and Prncipe",level:2},{code:"SAU",name:"Saudi Arabia",level:2},{code:"SEN",name:"Senegal",level:4},{code:"SRB",name:"Serbia",level:2},{code:"SYC",name:"Seychelles",level:1},{code:"SLE",name:"Sierra Leone",level:3},{code:"SGP",name:"Singapore",level:1},{code:"SXM",name:"Sint Maarten",level:0},{code:"SVK",name:"Slovakia",level:2},{code:"SVN",name:"Slovenia",level:2},{code:"SLB",name:"Solomon Islands",level:2},{code:"SOM",name:"Somalia",level:2},{code:"ZAF",name:"South Africa",level:4},{code:"SGS",name:"South Georgia and the South Sandwich Islands",level:0},{code:"KOR",name:"South Korea",level:3},{code:"SSD",name:"South Sudan",level:3},{code:"ESP",name:"Spain",level:4},{code:"XSP",name:"Spratly Islands",level:0},{code:"LKA",name:"Sri Lanka",level:2},{code:"SDN",name:"Sudan",level:3},{code:"SUR",name:"Suriname",level:2},{code:"SJM",name:"Svalbard and Jan Mayen",level:1},{code:"SWE",name:"Sweden",level:2},{code:"CHE",name:"Switzerland",level:3},{code:"SYR",name:"Syria",level:2},{code:"TWN",name:"Taiwan",level:2},{code:"TJK",name:"Tajikistan",level:3},{code:"TZA",name:"Tanzania",level:3},{code:"THA",name:"Thailand",level:3},{code:"TGO",name:"Togo",level:3},{code:"TKL",name:"Tokelau",level:1},{code:"TON",name:"Tonga",level:2},{code:"TTO",name:"Trinidad and Tobago",level:1},{code:"TUN",name:"Tunisia",level:2},{code:"TUR",name:"Turkey",level:2},{code:"TKM",name:"Turkmenistan",level:2},{code:"TCA",name:"Turks and Caicos Islands",level:1},{code:"TUV",name:"Tuvalu",level:1},{code:"UGA",name:"Uganda",level:4},{code:"UKR",name:"Ukraine",level:2},{code:"ARE",name:"United Arab Emirates",level:3},{code:"GBR",name:"United Kingdom",level:4},{code:"USA",name:"United States",level:2},{code:"UMI",name:"United States Minor Outlying Islands",level:1},{code:"URY",name:"Uruguay",level:2},{code:"UZB",name:"Uzbekistan",level:2},{code:"VUT",name:"Vanuatu",level:2},{code:"VAT",name:"Vatican City",level:0},{code:"VEN",name:"Venezuela",level:2},{code:"VNM",name:"Vietnam",level:3},{code:"VIR",name:"Virgin Islands, U.S.",level:2},{code:"WLF",name:"Wallis and Futuna",level:2},{code:"ESH",name:"Western Sahara",level:1},{code:"YEM",name:"Yemen",level:2},{code:"ZMB",name:"Zambia",level:2},{code:"ZWE",name:"Zimbabwe",level:3}],IJ=(t,e,n)=>{const r=`https://geodata.ucdavis.edu/gadm/gadm4.1/json/gadm41_${t}_${e}.json${e===0?"":".zip"}`;return n?PJ(r):r},RHe=t=>{const[e,n]=t.split("gadm41_"),[r,i]=n.split("_"),[s,o]=i.split(".");return{url:"file:///"+t,countryName:Array.from(AHe).find(a=>a.code===r).name,countryCode:r,level:parseInt(s)}};function Nx(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var MJ={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(t,e){(function(n){t.exports=n()})(function(){return function n(r,i,s){function o(c,u){if(!i[c]){if(!r[c]){var d=typeof Nx=="function"&&Nx;if(!u&&d)return d(c,!0);if(a)return a(c,!0);var h=new Error("Cannot find module '"+c+"'");throw h.code="MODULE_NOT_FOUND",h}var f=i[c]={exports:{}};r[c][0].call(f.exports,function(p){var m=r[c][1][p];return o(m||p)},f,f.exports,n,r,i,s)}return i[c].exports}for(var a=typeof Nx=="function"&&Nx,l=0;l<s.length;l++)o(s[l]);return o}({1:[function(n,r,i){var s=n("./utils"),o=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(l){for(var c,u,d,h,f,p,m,_=[],y=0,x=l.length,b=x,E=s.getTypeOf(l)!=="string";y<l.length;)b=x-y,d=E?(c=l[y++],u=y<x?l[y++]:0,y<x?l[y++]:0):(c=l.charCodeAt(y++),u=y<x?l.charCodeAt(y++):0,y<x?l.charCodeAt(y++):0),h=c>>2,f=(3&c)<<4|u>>4,p=1<b?(15&u)<<2|d>>6:64,m=2<b?63&d:64,_.push(a.charAt(h)+a.charAt(f)+a.charAt(p)+a.charAt(m));return _.join("")},i.decode=function(l){var c,u,d,h,f,p,m=0,_=0,y="data:";if(l.substr(0,y.length)===y)throw new Error("Invalid base64 input, it looks like a data url.");var x,b=3*(l=l.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(l.charAt(l.length-1)===a.charAt(64)&&b--,l.charAt(l.length-2)===a.charAt(64)&&b--,b%1!=0)throw new Error("Invalid base64 input, bad content length.");for(x=o.uint8array?new Uint8Array(0|b):new Array(0|b);m<l.length;)c=a.indexOf(l.charAt(m++))<<2|(h=a.indexOf(l.charAt(m++)))>>4,u=(15&h)<<4|(f=a.indexOf(l.charAt(m++)))>>2,d=(3&f)<<6|(p=a.indexOf(l.charAt(m++))),x[_++]=c,f!==64&&(x[_++]=u),p!==64&&(x[_++]=d);return x}},{"./support":30,"./utils":32}],2:[function(n,r,i){var s=n("./external"),o=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),l=n("./stream/DataLengthProbe");function c(u,d,h,f,p){this.compressedSize=u,this.uncompressedSize=d,this.crc32=h,this.compression=f,this.compressedContent=p}c.prototype={getContentWorker:function(){var u=new o(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),d=this;return u.on("end",function(){if(this.streamInfo.data_length!==d.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),u},getCompressedWorker:function(){return new o(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},c.createWorkerFrom=function(u,d,h){return u.pipe(new a).pipe(new l("uncompressedSize")).pipe(d.compressWorker(h)).pipe(new l("compressedSize")).withStreamInfo("compression",d)},r.exports=c},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,i){var s=n("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,i){var s=n("./utils"),o=function(){for(var a,l=[],c=0;c<256;c++){a=c;for(var u=0;u<8;u++)a=1&a?3988292384^a>>>1:a>>>1;l[c]=a}return l}();r.exports=function(a,l){return a!==void 0&&a.length?s.getTypeOf(a)!=="string"?function(c,u,d,h){var f=o,p=h+d;c^=-1;for(var m=h;m<p;m++)c=c>>>8^f[255&(c^u[m])];return-1^c}(0|l,a,a.length,0):function(c,u,d,h){var f=o,p=h+d;c^=-1;for(var m=h;m<p;m++)c=c>>>8^f[255&(c^u.charCodeAt(m))];return-1^c}(0|l,a,a.length,0):0}},{"./utils":32}],5:[function(n,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(n,r,i){var s=null;s=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:s}},{lie:37}],7:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),a=n("./utils"),l=n("./stream/GenericWorker"),c=s?"uint8array":"array";function u(d,h){l.call(this,"FlateWorker/"+d),this._pako=null,this._pakoAction=d,this._pakoOptions=h,this.meta={}}i.magic="\b\0",a.inherits(u,l),u.prototype.processChunk=function(d){this.meta=d.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(c,d.data),!1)},u.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},u.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},u.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var d=this;this._pako.onData=function(h){d.push({data:h,meta:d.meta})}},i.compressWorker=function(d){return new u("Deflate",d)},i.uncompressWorker=function(){return new u("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,i){function s(f,p){var m,_="";for(m=0;m<p;m++)_+=String.fromCharCode(255&f),f>>>=8;return _}function o(f,p,m,_,y,x){var b,E,w=f.file,T=f.compression,C=x!==c.utf8encode,P=a.transformTo("string",x(w.name)),M=a.transformTo("string",c.utf8encode(w.name)),N=w.comment,F=a.transformTo("string",x(N)),I=a.transformTo("string",c.utf8encode(N)),k=M.length!==w.name.length,R=I.length!==N.length,z="",X="",G="",j=w.dir,H=w.date,Q={crc32:0,compressedSize:0,uncompressedSize:0};p&&!m||(Q.crc32=f.crc32,Q.compressedSize=f.compressedSize,Q.uncompressedSize=f.uncompressedSize);var V=0;p&&(V|=8),C||!k&&!R||(V|=2048);var ee=0,ye=0;j&&(ee|=16),y==="UNIX"?(ye=798,ee|=function(fe,ve){var Oe=fe;return fe||(Oe=ve?16893:33204),(65535&Oe)<<16}(w.unixPermissions,j)):(ye=20,ee|=function(fe){return 63&(fe||0)}(w.dosPermissions)),b=H.getUTCHours(),b<<=6,b|=H.getUTCMinutes(),b<<=5,b|=H.getUTCSeconds()/2,E=H.getUTCFullYear()-1980,E<<=4,E|=H.getUTCMonth()+1,E<<=5,E|=H.getUTCDate(),k&&(X=s(1,1)+s(u(P),4)+M,z+="up"+s(X.length,2)+X),R&&(G=s(1,1)+s(u(F),4)+I,z+="uc"+s(G.length,2)+G);var se="";return se+=`
\0`,se+=s(V,2),se+=T.magic,se+=s(b,2),se+=s(E,2),se+=s(Q.crc32,4),se+=s(Q.compressedSize,4),se+=s(Q.uncompressedSize,4),se+=s(P.length,2),se+=s(z.length,2),{fileRecord:d.LOCAL_FILE_HEADER+se+P+z,dirRecord:d.CENTRAL_FILE_HEADER+s(ye,2)+se+s(F.length,2)+"\0\0\0\0"+s(ee,4)+s(_,4)+P+z+F}}var a=n("../utils"),l=n("../stream/GenericWorker"),c=n("../utf8"),u=n("../crc32"),d=n("../signature");function h(f,p,m,_){l.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=p,this.zipPlatform=m,this.encodeFileName=_,this.streamFiles=f,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(h,l),h.prototype.push=function(f){var p=f.meta.percent||0,m=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(f):(this.bytesWritten+=f.data.length,l.prototype.push.call(this,{data:f.data,meta:{currentFile:this.currentFile,percent:m?(p+100*(m-_-1))/m:100}}))},h.prototype.openedSource=function(f){this.currentSourceOffset=this.bytesWritten,this.currentFile=f.file.name;var p=this.streamFiles&&!f.file.dir;if(p){var m=o(f,p,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:m.fileRecord,meta:{percent:0}})}else this.accumulate=!0},h.prototype.closedSource=function(f){this.accumulate=!1;var p=this.streamFiles&&!f.file.dir,m=o(f,p,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(m.dirRecord),p)this.push({data:function(_){return d.DATA_DESCRIPTOR+s(_.crc32,4)+s(_.compressedSize,4)+s(_.uncompressedSize,4)}(f),meta:{percent:100}});else for(this.push({data:m.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},h.prototype.flush=function(){for(var f=this.bytesWritten,p=0;p<this.dirRecords.length;p++)this.push({data:this.dirRecords[p],meta:{percent:100}});var m=this.bytesWritten-f,_=function(y,x,b,E,w){var T=a.transformTo("string",w(E));return d.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(y,2)+s(y,2)+s(x,4)+s(b,4)+s(T.length,2)+T}(this.dirRecords.length,m,f,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},h.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},h.prototype.registerPrevious=function(f){this._sources.push(f);var p=this;return f.on("data",function(m){p.processChunk(m)}),f.on("end",function(){p.closedSource(p.previous.streamInfo),p._sources.length?p.prepareNextSource():p.end()}),f.on("error",function(m){p.error(m)}),this},h.prototype.resume=function(){return!!l.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},h.prototype.error=function(f){var p=this._sources;if(!l.prototype.error.call(this,f))return!1;for(var m=0;m<p.length;m++)try{p[m].error(f)}catch{}return!0},h.prototype.lock=function(){l.prototype.lock.call(this);for(var f=this._sources,p=0;p<f.length;p++)f[p].lock()},r.exports=h},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,i){var s=n("../compressions"),o=n("./ZipFileWorker");i.generateWorker=function(a,l,c){var u=new o(l.streamFiles,c,l.platform,l.encodeFileName),d=0;try{a.forEach(function(h,f){d++;var p=function(x,b){var E=x||b,w=s[E];if(!w)throw new Error(E+" is not a valid compression method !");return w}(f.options.compression,l.compression),m=f.options.compressionOptions||l.compressionOptions||{},_=f.dir,y=f.date;f._compressWorker(p,m).withStreamInfo("file",{name:h,dir:_,date:y,comment:f.comment||"",unixPermissions:f.unixPermissions,dosPermissions:f.dosPermissions}).pipe(u)}),u.entriesCount=d}catch(h){u.error(h)}return u}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new s;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(s.prototype=n("./object")).loadAsync=n("./load"),s.support=n("./support"),s.defaults=n("./defaults"),s.version="3.10.1",s.loadAsync=function(o,a){return new s().loadAsync(o,a)},s.external=n("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,i){var s=n("./utils"),o=n("./external"),a=n("./utf8"),l=n("./zipEntries"),c=n("./stream/Crc32Probe"),u=n("./nodejsUtils");function d(h){return new o.Promise(function(f,p){var m=h.decompressed.getContentWorker().pipe(new c);m.on("error",function(_){p(_)}).on("end",function(){m.streamInfo.crc32!==h.decompressed.crc32?p(new Error("Corrupted zip : CRC32 mismatch")):f()}).resume()})}r.exports=function(h,f){var p=this;return f=s.extend(f||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),u.isNode&&u.isStream(h)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",h,!0,f.optimizedBinaryString,f.base64).then(function(m){var _=new l(f);return _.load(m),_}).then(function(m){var _=[o.Promise.resolve(m)],y=m.files;if(f.checkCRC32)for(var x=0;x<y.length;x++)_.push(d(y[x]));return o.Promise.all(_)}).then(function(m){for(var _=m.shift(),y=_.files,x=0;x<y.length;x++){var b=y[x],E=b.fileNameStr,w=s.resolve(b.fileNameStr);p.file(w,b.decompressed,{binary:!0,optimizedBinaryString:!0,date:b.date,dir:b.dir,comment:b.fileCommentStr.length?b.fileCommentStr:null,unixPermissions:b.unixPermissions,dosPermissions:b.dosPermissions,createFolders:f.createFolders}),b.dir||(p.file(w).unsafeOriginalName=E)}return _.zipComment.length&&(p.comment=_.zipComment),p})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,i){var s=n("../utils"),o=n("../stream/GenericWorker");function a(l,c){o.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(c)}s.inherits(a,o),a.prototype._bindStream=function(l){var c=this;(this._stream=l).pause(),l.on("data",function(u){c.push({data:u,meta:{percent:0}})}).on("error",function(u){c.isPaused?this.generatedError=u:c.error(u)}).on("end",function(){c.isPaused?c._upstreamEnded=!0:c.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,i){var s=n("readable-stream").Readable;function o(a,l,c){s.call(this,l),this._helper=a;var u=this;a.on("data",function(d,h){u.push(d)||u._helper.pause(),c&&c(h)}).on("error",function(d){u.emit("error",d)}).on("end",function(){u.push(null)})}n("../utils").inherits(o,s),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,o);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,o)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var o=new Buffer(s);return o.fill(0),o},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(n,r,i){function s(w,T,C){var P,M=a.getTypeOf(T),N=a.extend(C||{},u);N.date=N.date||new Date,N.compression!==null&&(N.compression=N.compression.toUpperCase()),typeof N.unixPermissions=="string"&&(N.unixPermissions=parseInt(N.unixPermissions,8)),N.unixPermissions&&16384&N.unixPermissions&&(N.dir=!0),N.dosPermissions&&16&N.dosPermissions&&(N.dir=!0),N.dir&&(w=y(w)),N.createFolders&&(P=_(w))&&x.call(this,P,!0);var F=M==="string"&&N.binary===!1&&N.base64===!1;C&&C.binary!==void 0||(N.binary=!F),(T instanceof d&&T.uncompressedSize===0||N.dir||!T||T.length===0)&&(N.base64=!1,N.binary=!0,T="",N.compression="STORE",M="string");var I=null;I=T instanceof d||T instanceof l?T:p.isNode&&p.isStream(T)?new m(w,T):a.prepareContent(w,T,N.binary,N.optimizedBinaryString,N.base64);var k=new h(w,I,N);this.files[w]=k}var o=n("./utf8"),a=n("./utils"),l=n("./stream/GenericWorker"),c=n("./stream/StreamHelper"),u=n("./defaults"),d=n("./compressedObject"),h=n("./zipObject"),f=n("./generate"),p=n("./nodejsUtils"),m=n("./nodejs/NodejsStreamInputAdapter"),_=function(w){w.slice(-1)==="/"&&(w=w.substring(0,w.length-1));var T=w.lastIndexOf("/");return 0<T?w.substring(0,T):""},y=function(w){return w.slice(-1)!=="/"&&(w+="/"),w},x=function(w,T){return T=T!==void 0?T:u.createFolders,w=y(w),this.files[w]||s.call(this,w,null,{dir:!0,createFolders:T}),this.files[w]};function b(w){return Object.prototype.toString.call(w)==="[object RegExp]"}var E={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(w){var T,C,P;for(T in this.files)P=this.files[T],(C=T.slice(this.root.length,T.length))&&T.slice(0,this.root.length)===this.root&&w(C,P)},filter:function(w){var T=[];return this.forEach(function(C,P){w(C,P)&&T.push(P)}),T},file:function(w,T,C){if(arguments.length!==1)return w=this.root+w,s.call(this,w,T,C),this;if(b(w)){var P=w;return this.filter(function(N,F){return!F.dir&&P.test(N)})}var M=this.files[this.root+w];return M&&!M.dir?M:null},folder:function(w){if(!w)return this;if(b(w))return this.filter(function(M,N){return N.dir&&w.test(M)});var T=this.root+w,C=x.call(this,T),P=this.clone();return P.root=C.name,P},remove:function(w){w=this.root+w;var T=this.files[w];if(T||(w.slice(-1)!=="/"&&(w+="/"),T=this.files[w]),T&&!T.dir)delete this.files[w];else for(var C=this.filter(function(M,N){return N.name.slice(0,w.length)===w}),P=0;P<C.length;P++)delete this.files[C[P].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(w){var T,C={};try{if((C=a.extend(w||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=C.type.toLowerCase(),C.compression=C.compression.toUpperCase(),C.type==="binarystring"&&(C.type="string"),!C.type)throw new Error("No output type specified.");a.checkSupport(C.type),C.platform!=="darwin"&&C.platform!=="freebsd"&&C.platform!=="linux"&&C.platform!=="sunos"||(C.platform="UNIX"),C.platform==="win32"&&(C.platform="DOS");var P=C.comment||this.comment||"";T=f.generateWorker(this,C,P)}catch(M){(T=new l("error")).error(M)}return new c(T,C.type||"string",C.mimeType)},generateAsync:function(w,T){return this.generateInternalStream(w).accumulate(T)},generateNodeStream:function(w,T){return(w=w||{}).type||(w.type="nodebuffer"),this.generateInternalStream(w).toNodejsStream(T)}};r.exports=E},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,i){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,i){var s=n("./DataReader");function o(a){s.call(this,a);for(var l=0;l<this.data.length;l++)a[l]=255&a[l]}n("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var l=a.charCodeAt(0),c=a.charCodeAt(1),u=a.charCodeAt(2),d=a.charCodeAt(3),h=this.length-4;0<=h;--h)if(this.data[h]===l&&this.data[h+1]===c&&this.data[h+2]===u&&this.data[h+3]===d)return h-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var l=a.charCodeAt(0),c=a.charCodeAt(1),u=a.charCodeAt(2),d=a.charCodeAt(3),h=this.readData(4);return l===h[0]&&c===h[1]&&u===h[2]&&d===h[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,i){var s=n("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var l,c=0;for(this.checkOffset(a),l=this.index+a-1;l>=this.index;l--)c=(c<<8)+this.byteAt(l);return this.index+=a,c},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,i){var s=n("./Uint8ArrayReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,i){var s=n("./DataReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var l=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,i){var s=n("./ArrayReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var l=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,l},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,i){var s=n("../utils"),o=n("../support"),a=n("./ArrayReader"),l=n("./StringReader"),c=n("./NodeBufferReader"),u=n("./Uint8ArrayReader");r.exports=function(d){var h=s.getTypeOf(d);return s.checkSupport(h),h!=="string"||o.uint8array?h==="nodebuffer"?new c(d):o.uint8array?new u(s.transformTo("uint8array",d)):new a(s.transformTo("array",d)):new l(d)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,i){var s=n("./GenericWorker"),o=n("../utils");function a(l){s.call(this,"ConvertWorker to "+l),this.destType=l}o.inherits(a,s),a.prototype.processChunk=function(l){this.push({data:o.transformTo(this.destType,l.data),meta:l.meta})},r.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,i){var s=n("./GenericWorker"),o=n("../crc32");function a(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,s),a.prototype.processChunk=function(l){this.streamInfo.crc32=o(l.data,this.streamInfo.crc32||0),this.push(l)},r.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,i){var s=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(a,o),a.prototype.processChunk=function(l){if(l){var c=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=c+l.data.length}o.prototype.processChunk.call(this,l)},r.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,i){var s=n("../utils"),o=n("./GenericWorker");function a(l){o.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,l.then(function(u){c.dataIsReady=!0,c.data=u,c.max=u&&u.length||0,c.type=s.getTypeOf(u),c.isPaused||c._tickAndRepeat()},function(u){c.error(u)})}s.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var l=null,c=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":l=this.data.substring(this.index,c);break;case"uint8array":l=this.data.subarray(this.index,c);break;case"array":case"nodebuffer":l=this.data.slice(this.index,c)}return this.index=c,this.push({data:l,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,i){function s(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var l=0;l<this._listeners[o].length;l++)this._listeners[o][l].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(l){a.processChunk(l)}),o.on("end",function(){a.end()}),o.on("error",function(l){a.error(l)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=s},{}],29:[function(n,r,i){var s=n("../utils"),o=n("./ConvertWorker"),a=n("./GenericWorker"),l=n("../base64"),c=n("../support"),u=n("../external"),d=null;if(c.nodestream)try{d=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function h(p,m){return new u.Promise(function(_,y){var x=[],b=p._internalType,E=p._outputType,w=p._mimeType;p.on("data",function(T,C){x.push(T),m&&m(C)}).on("error",function(T){x=[],y(T)}).on("end",function(){try{var T=function(C,P,M){switch(C){case"blob":return s.newBlob(s.transformTo("arraybuffer",P),M);case"base64":return l.encode(P);default:return s.transformTo(C,P)}}(E,function(C,P){var M,N=0,F=null,I=0;for(M=0;M<P.length;M++)I+=P[M].length;switch(C){case"string":return P.join("");case"array":return Array.prototype.concat.apply([],P);case"uint8array":for(F=new Uint8Array(I),M=0;M<P.length;M++)F.set(P[M],N),N+=P[M].length;return F;case"nodebuffer":return Buffer.concat(P);default:throw new Error("concat : unsupported type '"+C+"'")}}(b,x),w);_(T)}catch(C){y(C)}x=[]}).resume()})}function f(p,m,_){var y=m;switch(m){case"blob":case"arraybuffer":y="uint8array";break;case"base64":y="string"}try{this._internalType=y,this._outputType=m,this._mimeType=_,s.checkSupport(y),this._worker=p.pipe(new o(y)),p.lock()}catch(x){this._worker=new a("error"),this._worker.error(x)}}f.prototype={accumulate:function(p){return h(this,p)},on:function(p,m){var _=this;return p==="data"?this._worker.on(p,function(y){m.call(_,y.data,y.meta)}):this._worker.on(p,function(){s.delay(m,arguments,_)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(p){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new d(this,{objectMode:this._outputType!=="nodebuffer"},p)}},r.exports=f},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(s),i.blob=o.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!n("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,i){for(var s=n("./utils"),o=n("./support"),a=n("./nodejsUtils"),l=n("./stream/GenericWorker"),c=new Array(256),u=0;u<256;u++)c[u]=252<=u?6:248<=u?5:240<=u?4:224<=u?3:192<=u?2:1;c[254]=c[254]=1;function d(){l.call(this,"utf-8 decode"),this.leftOver=null}function h(){l.call(this,"utf-8 encode")}i.utf8encode=function(f){return o.nodebuffer?a.newBufferFrom(f,"utf-8"):function(p){var m,_,y,x,b,E=p.length,w=0;for(x=0;x<E;x++)(64512&(_=p.charCodeAt(x)))==55296&&x+1<E&&(64512&(y=p.charCodeAt(x+1)))==56320&&(_=65536+(_-55296<<10)+(y-56320),x++),w+=_<128?1:_<2048?2:_<65536?3:4;for(m=o.uint8array?new Uint8Array(w):new Array(w),x=b=0;b<w;x++)(64512&(_=p.charCodeAt(x)))==55296&&x+1<E&&(64512&(y=p.charCodeAt(x+1)))==56320&&(_=65536+(_-55296<<10)+(y-56320),x++),_<128?m[b++]=_:(_<2048?m[b++]=192|_>>>6:(_<65536?m[b++]=224|_>>>12:(m[b++]=240|_>>>18,m[b++]=128|_>>>12&63),m[b++]=128|_>>>6&63),m[b++]=128|63&_);return m}(f)},i.utf8decode=function(f){return o.nodebuffer?s.transformTo("nodebuffer",f).toString("utf-8"):function(p){var m,_,y,x,b=p.length,E=new Array(2*b);for(m=_=0;m<b;)if((y=p[m++])<128)E[_++]=y;else if(4<(x=c[y]))E[_++]=65533,m+=x-1;else{for(y&=x===2?31:x===3?15:7;1<x&&m<b;)y=y<<6|63&p[m++],x--;1<x?E[_++]=65533:y<65536?E[_++]=y:(y-=65536,E[_++]=55296|y>>10&1023,E[_++]=56320|1023&y)}return E.length!==_&&(E.subarray?E=E.subarray(0,_):E.length=_),s.applyFromCharCode(E)}(f=s.transformTo(o.uint8array?"uint8array":"array",f))},s.inherits(d,l),d.prototype.processChunk=function(f){var p=s.transformTo(o.uint8array?"uint8array":"array",f.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var m=p;(p=new Uint8Array(m.length+this.leftOver.length)).set(this.leftOver,0),p.set(m,this.leftOver.length)}else p=this.leftOver.concat(p);this.leftOver=null}var _=function(x,b){var E;for((b=b||x.length)>x.length&&(b=x.length),E=b-1;0<=E&&(192&x[E])==128;)E--;return E<0||E===0?b:E+c[x[E]]>b?E:b}(p),y=p;_!==p.length&&(o.uint8array?(y=p.subarray(0,_),this.leftOver=p.subarray(_,p.length)):(y=p.slice(0,_),this.leftOver=p.slice(_,p.length))),this.push({data:i.utf8decode(y),meta:f.meta})},d.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=d,s.inherits(h,l),h.prototype.processChunk=function(f){this.push({data:i.utf8encode(f.data),meta:f.meta})},i.Utf8EncodeWorker=h},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,i){var s=n("./support"),o=n("./base64"),a=n("./nodejsUtils"),l=n("./external");function c(m){return m}function u(m,_){for(var y=0;y<m.length;++y)_[y]=255&m.charCodeAt(y);return _}n("setimmediate"),i.newBlob=function(m,_){i.checkSupport("blob");try{return new Blob([m],{type:_})}catch{try{var y=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return y.append(m),y.getBlob(_)}catch{throw new Error("Bug : can't construct the Blob.")}}};var d={stringifyByChunk:function(m,_,y){var x=[],b=0,E=m.length;if(E<=y)return String.fromCharCode.apply(null,m);for(;b<E;)_==="array"||_==="nodebuffer"?x.push(String.fromCharCode.apply(null,m.slice(b,Math.min(b+y,E)))):x.push(String.fromCharCode.apply(null,m.subarray(b,Math.min(b+y,E)))),b+=y;return x.join("")},stringifyByChar:function(m){for(var _="",y=0;y<m.length;y++)_+=String.fromCharCode(m[y]);return _},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function h(m){var _=65536,y=i.getTypeOf(m),x=!0;if(y==="uint8array"?x=d.applyCanBeUsed.uint8array:y==="nodebuffer"&&(x=d.applyCanBeUsed.nodebuffer),x)for(;1<_;)try{return d.stringifyByChunk(m,y,_)}catch{_=Math.floor(_/2)}return d.stringifyByChar(m)}function f(m,_){for(var y=0;y<m.length;y++)_[y]=m[y];return _}i.applyFromCharCode=h;var p={};p.string={string:c,array:function(m){return u(m,new Array(m.length))},arraybuffer:function(m){return p.string.uint8array(m).buffer},uint8array:function(m){return u(m,new Uint8Array(m.length))},nodebuffer:function(m){return u(m,a.allocBuffer(m.length))}},p.array={string:h,array:c,arraybuffer:function(m){return new Uint8Array(m).buffer},uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return a.newBufferFrom(m)}},p.arraybuffer={string:function(m){return h(new Uint8Array(m))},array:function(m){return f(new Uint8Array(m),new Array(m.byteLength))},arraybuffer:c,uint8array:function(m){return new Uint8Array(m)},nodebuffer:function(m){return a.newBufferFrom(new Uint8Array(m))}},p.uint8array={string:h,array:function(m){return f(m,new Array(m.length))},arraybuffer:function(m){return m.buffer},uint8array:c,nodebuffer:function(m){return a.newBufferFrom(m)}},p.nodebuffer={string:h,array:function(m){return f(m,new Array(m.length))},arraybuffer:function(m){return p.nodebuffer.uint8array(m).buffer},uint8array:function(m){return f(m,new Uint8Array(m.length))},nodebuffer:c},i.transformTo=function(m,_){if(_=_||"",!m)return _;i.checkSupport(m);var y=i.getTypeOf(_);return p[y][m](_)},i.resolve=function(m){for(var _=m.split("/"),y=[],x=0;x<_.length;x++){var b=_[x];b==="."||b===""&&x!==0&&x!==_.length-1||(b===".."?y.pop():y.push(b))}return y.join("/")},i.getTypeOf=function(m){return typeof m=="string"?"string":Object.prototype.toString.call(m)==="[object Array]"?"array":s.nodebuffer&&a.isBuffer(m)?"nodebuffer":s.uint8array&&m instanceof Uint8Array?"uint8array":s.arraybuffer&&m instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(m){if(!s[m.toLowerCase()])throw new Error(m+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(m){var _,y,x="";for(y=0;y<(m||"").length;y++)x+="\\x"+((_=m.charCodeAt(y))<16?"0":"")+_.toString(16).toUpperCase();return x},i.delay=function(m,_,y){setImmediate(function(){m.apply(y||null,_||[])})},i.inherits=function(m,_){function y(){}y.prototype=_.prototype,m.prototype=new y},i.extend=function(){var m,_,y={};for(m=0;m<arguments.length;m++)for(_ in arguments[m])Object.prototype.hasOwnProperty.call(arguments[m],_)&&y[_]===void 0&&(y[_]=arguments[m][_]);return y},i.prepareContent=function(m,_,y,x,b){return l.Promise.resolve(_).then(function(E){return s.blob&&(E instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(E))!==-1)&&typeof FileReader<"u"?new l.Promise(function(w,T){var C=new FileReader;C.onload=function(P){w(P.target.result)},C.onerror=function(P){T(P.target.error)},C.readAsArrayBuffer(E)}):E}).then(function(E){var w=i.getTypeOf(E);return w?(w==="arraybuffer"?E=i.transformTo("uint8array",E):w==="string"&&(b?E=o.decode(E):y&&x!==!0&&(E=function(T){return u(T,s.uint8array?new Uint8Array(T.length):new Array(T.length))}(E))),E):l.Promise.reject(new Error("Can't read the data of '"+m+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,i){var s=n("./reader/readerFor"),o=n("./utils"),a=n("./signature"),l=n("./zipEntry"),c=n("./support");function u(d){this.files=[],this.loadOptions=d}u.prototype={checkSignature:function(d){if(!this.reader.readAndCheckSignature(d)){this.reader.index-=4;var h=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(h)+", expected "+o.pretty(d)+")")}},isSignature:function(d,h){var f=this.reader.index;this.reader.setIndex(d);var p=this.reader.readString(4)===h;return this.reader.setIndex(f),p},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var d=this.reader.readData(this.zipCommentLength),h=c.uint8array?"uint8array":"array",f=o.transformTo(h,d);this.zipComment=this.loadOptions.decodeFileName(f)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var d,h,f,p=this.zip64EndOfCentralSize-44;0<p;)d=this.reader.readInt(2),h=this.reader.readInt(4),f=this.reader.readData(h),this.zip64ExtensibleData[d]={id:d,length:h,value:f}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var d,h;for(d=0;d<this.files.length;d++)h=this.files[d],this.reader.setIndex(h.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),h.readLocalPart(this.reader),h.handleUTF8(),h.processAttributes()},readCentralDir:function(){var d;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(d=new l({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(d);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var d=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(d<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(d);var h=d;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(d=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(d),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var f=this.centralDirOffset+this.centralDirSize;this.zip64&&(f+=20,f+=12+this.zip64EndOfCentralSize);var p=h-f;if(0<p)this.isSignature(h,a.CENTRAL_FILE_HEADER)||(this.reader.zero=p);else if(p<0)throw new Error("Corrupted zip: missing "+Math.abs(p)+" bytes.")},prepareReader:function(d){this.reader=s(d)},load:function(d){this.prepareReader(d),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=u},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,i){var s=n("./reader/readerFor"),o=n("./utils"),a=n("./compressedObject"),l=n("./crc32"),c=n("./utf8"),u=n("./compressions"),d=n("./support");function h(f,p){this.options=f,this.loadOptions=p}h.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(f){var p,m;if(f.skip(22),this.fileNameLength=f.readInt(2),m=f.readInt(2),this.fileName=f.readData(this.fileNameLength),f.skip(m),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((p=function(_){for(var y in u)if(Object.prototype.hasOwnProperty.call(u,y)&&u[y].magic===_)return u[y];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,p,f.readData(this.compressedSize))},readCentralPart:function(f){this.versionMadeBy=f.readInt(2),f.skip(2),this.bitFlag=f.readInt(2),this.compressionMethod=f.readString(2),this.date=f.readDate(),this.crc32=f.readInt(4),this.compressedSize=f.readInt(4),this.uncompressedSize=f.readInt(4);var p=f.readInt(2);if(this.extraFieldsLength=f.readInt(2),this.fileCommentLength=f.readInt(2),this.diskNumberStart=f.readInt(2),this.internalFileAttributes=f.readInt(2),this.externalFileAttributes=f.readInt(4),this.localHeaderOffset=f.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");f.skip(p),this.readExtraFields(f),this.parseZIP64ExtraField(f),this.fileComment=f.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var f=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),f==0&&(this.dosPermissions=63&this.externalFileAttributes),f==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var f=s(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=f.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=f.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=f.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=f.readInt(4))}},readExtraFields:function(f){var p,m,_,y=f.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});f.index+4<y;)p=f.readInt(2),m=f.readInt(2),_=f.readData(m),this.extraFields[p]={id:p,length:m,value:_};f.setIndex(y)},handleUTF8:function(){var f=d.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=c.utf8decode(this.fileName),this.fileCommentStr=c.utf8decode(this.fileComment);else{var p=this.findExtraFieldUnicodePath();if(p!==null)this.fileNameStr=p;else{var m=o.transformTo(f,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(m)}var _=this.findExtraFieldUnicodeComment();if(_!==null)this.fileCommentStr=_;else{var y=o.transformTo(f,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(y)}}},findExtraFieldUnicodePath:function(){var f=this.extraFields[28789];if(f){var p=s(f.value);return p.readInt(1)!==1||l(this.fileName)!==p.readInt(4)?null:c.utf8decode(p.readData(f.length-5))}return null},findExtraFieldUnicodeComment:function(){var f=this.extraFields[25461];if(f){var p=s(f.value);return p.readInt(1)!==1||l(this.fileComment)!==p.readInt(4)?null:c.utf8decode(p.readData(f.length-5))}return null}},r.exports=h},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,i){function s(p,m,_){this.name=p,this.dir=_.dir,this.date=_.date,this.comment=_.comment,this.unixPermissions=_.unixPermissions,this.dosPermissions=_.dosPermissions,this._data=m,this._dataBinary=_.binary,this.options={compression:_.compression,compressionOptions:_.compressionOptions}}var o=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),l=n("./utf8"),c=n("./compressedObject"),u=n("./stream/GenericWorker");s.prototype={internalStream:function(p){var m=null,_="string";try{if(!p)throw new Error("No output type specified.");var y=(_=p.toLowerCase())==="string"||_==="text";_!=="binarystring"&&_!=="text"||(_="string"),m=this._decompressWorker();var x=!this._dataBinary;x&&!y&&(m=m.pipe(new l.Utf8EncodeWorker)),!x&&y&&(m=m.pipe(new l.Utf8DecodeWorker))}catch(b){(m=new u("error")).error(b)}return new o(m,_,"")},async:function(p,m){return this.internalStream(p).accumulate(m)},nodeStream:function(p,m){return this.internalStream(p||"nodebuffer").toNodejsStream(m)},_compressWorker:function(p,m){if(this._data instanceof c&&this._data.compression.magic===p.magic)return this._data.getCompressedWorker();var _=this._decompressWorker();return this._dataBinary||(_=_.pipe(new l.Utf8EncodeWorker)),c.createWorkerFrom(_,p,m)},_decompressWorker:function(){return this._data instanceof c?this._data.getContentWorker():this._data instanceof u?this._data:new a(this._data)}};for(var d=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],h=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},f=0;f<d.length;f++)s.prototype[d[f]]=h;r.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,i){(function(s){var o,a,l=s.MutationObserver||s.WebKitMutationObserver;if(l){var c=0,u=new l(p),d=s.document.createTextNode("");u.observe(d,{characterData:!0}),o=function(){d.data=c=++c%2}}else if(s.setImmediate||s.MessageChannel===void 0)o="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var m=s.document.createElement("script");m.onreadystatechange=function(){p(),m.onreadystatechange=null,m.parentNode.removeChild(m),m=null},s.document.documentElement.appendChild(m)}:function(){setTimeout(p,0)};else{var h=new s.MessageChannel;h.port1.onmessage=p,o=function(){h.port2.postMessage(0)}}var f=[];function p(){var m,_;a=!0;for(var y=f.length;y;){for(_=f,f=[],m=-1;++m<y;)_[m]();y=f.length}a=!1}r.exports=function(m){f.push(m)!==1||a||o()}}).call(this,typeof Pi<"u"?Pi:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,i){var s=n("immediate");function o(){}var a={},l=["REJECTED"],c=["FULFILLED"],u=["PENDING"];function d(y){if(typeof y!="function")throw new TypeError("resolver must be a function");this.state=u,this.queue=[],this.outcome=void 0,y!==o&&m(this,y)}function h(y,x,b){this.promise=y,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof b=="function"&&(this.onRejected=b,this.callRejected=this.otherCallRejected)}function f(y,x,b){s(function(){var E;try{E=x(b)}catch(w){return a.reject(y,w)}E===y?a.reject(y,new TypeError("Cannot resolve promise with itself")):a.resolve(y,E)})}function p(y){var x=y&&y.then;if(y&&(typeof y=="object"||typeof y=="function")&&typeof x=="function")return function(){x.apply(y,arguments)}}function m(y,x){var b=!1;function E(C){b||(b=!0,a.reject(y,C))}function w(C){b||(b=!0,a.resolve(y,C))}var T=_(function(){x(w,E)});T.status==="error"&&E(T.value)}function _(y,x){var b={};try{b.value=y(x),b.status="success"}catch(E){b.status="error",b.value=E}return b}(r.exports=d).prototype.finally=function(y){if(typeof y!="function")return this;var x=this.constructor;return this.then(function(b){return x.resolve(y()).then(function(){return b})},function(b){return x.resolve(y()).then(function(){throw b})})},d.prototype.catch=function(y){return this.then(null,y)},d.prototype.then=function(y,x){if(typeof y!="function"&&this.state===c||typeof x!="function"&&this.state===l)return this;var b=new this.constructor(o);return this.state!==u?f(b,this.state===c?y:x,this.outcome):this.queue.push(new h(b,y,x)),b},h.prototype.callFulfilled=function(y){a.resolve(this.promise,y)},h.prototype.otherCallFulfilled=function(y){f(this.promise,this.onFulfilled,y)},h.prototype.callRejected=function(y){a.reject(this.promise,y)},h.prototype.otherCallRejected=function(y){f(this.promise,this.onRejected,y)},a.resolve=function(y,x){var b=_(p,x);if(b.status==="error")return a.reject(y,b.value);var E=b.value;if(E)m(y,E);else{y.state=c,y.outcome=x;for(var w=-1,T=y.queue.length;++w<T;)y.queue[w].callFulfilled(x)}return y},a.reject=function(y,x){y.state=l,y.outcome=x;for(var b=-1,E=y.queue.length;++b<E;)y.queue[b].callRejected(x);return y},d.resolve=function(y){return y instanceof this?y:a.resolve(new this(o),y)},d.reject=function(y){var x=new this(o);return a.reject(x,y)},d.all=function(y){var x=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=y.length,E=!1;if(!b)return this.resolve([]);for(var w=new Array(b),T=0,C=-1,P=new this(o);++C<b;)M(y[C],C);return P;function M(N,F){x.resolve(N).then(function(I){w[F]=I,++T!==b||E||(E=!0,a.resolve(P,w))},function(I){E||(E=!0,a.reject(P,I))})}},d.race=function(y){var x=this;if(Object.prototype.toString.call(y)!=="[object Array]")return this.reject(new TypeError("must be an array"));var b=y.length,E=!1;if(!b)return this.resolve([]);for(var w=-1,T=new this(o);++w<b;)C=y[w],x.resolve(C).then(function(P){E||(E=!0,a.resolve(T,P))},function(P){E||(E=!0,a.reject(T,P))});var C;return T}},{immediate:36}],38:[function(n,r,i){var s={};(0,n("./lib/utils/common").assign)(s,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,i){var s=n("./zlib/deflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/messages"),c=n("./zlib/zstream"),u=Object.prototype.toString,d=0,h=-1,f=0,p=8;function m(y){if(!(this instanceof m))return new m(y);this.options=o.assign({level:h,method:p,chunkSize:16384,windowBits:15,memLevel:8,strategy:f,to:""},y||{});var x=this.options;x.raw&&0<x.windowBits?x.windowBits=-x.windowBits:x.gzip&&0<x.windowBits&&x.windowBits<16&&(x.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var b=s.deflateInit2(this.strm,x.level,x.method,x.windowBits,x.memLevel,x.strategy);if(b!==d)throw new Error(l[b]);if(x.header&&s.deflateSetHeader(this.strm,x.header),x.dictionary){var E;if(E=typeof x.dictionary=="string"?a.string2buf(x.dictionary):u.call(x.dictionary)==="[object ArrayBuffer]"?new Uint8Array(x.dictionary):x.dictionary,(b=s.deflateSetDictionary(this.strm,E))!==d)throw new Error(l[b]);this._dict_set=!0}}function _(y,x){var b=new m(x);if(b.push(y,!0),b.err)throw b.msg||l[b.err];return b.result}m.prototype.push=function(y,x){var b,E,w=this.strm,T=this.options.chunkSize;if(this.ended)return!1;E=x===~~x?x:x===!0?4:0,typeof y=="string"?w.input=a.string2buf(y):u.call(y)==="[object ArrayBuffer]"?w.input=new Uint8Array(y):w.input=y,w.next_in=0,w.avail_in=w.input.length;do{if(w.avail_out===0&&(w.output=new o.Buf8(T),w.next_out=0,w.avail_out=T),(b=s.deflate(w,E))!==1&&b!==d)return this.onEnd(b),!(this.ended=!0);w.avail_out!==0&&(w.avail_in!==0||E!==4&&E!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(w.output,w.next_out))):this.onData(o.shrinkBuf(w.output,w.next_out)))}while((0<w.avail_in||w.avail_out===0)&&b!==1);return E===4?(b=s.deflateEnd(this.strm),this.onEnd(b),this.ended=!0,b===d):E!==2||(this.onEnd(d),!(w.avail_out=0))},m.prototype.onData=function(y){this.chunks.push(y)},m.prototype.onEnd=function(y){y===d&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},i.Deflate=m,i.deflate=_,i.deflateRaw=function(y,x){return(x=x||{}).raw=!0,_(y,x)},i.gzip=function(y,x){return(x=x||{}).gzip=!0,_(y,x)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,i){var s=n("./zlib/inflate"),o=n("./utils/common"),a=n("./utils/strings"),l=n("./zlib/constants"),c=n("./zlib/messages"),u=n("./zlib/zstream"),d=n("./zlib/gzheader"),h=Object.prototype.toString;function f(m){if(!(this instanceof f))return new f(m);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},m||{});var _=this.options;_.raw&&0<=_.windowBits&&_.windowBits<16&&(_.windowBits=-_.windowBits,_.windowBits===0&&(_.windowBits=-15)),!(0<=_.windowBits&&_.windowBits<16)||m&&m.windowBits||(_.windowBits+=32),15<_.windowBits&&_.windowBits<48&&!(15&_.windowBits)&&(_.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var y=s.inflateInit2(this.strm,_.windowBits);if(y!==l.Z_OK)throw new Error(c[y]);this.header=new d,s.inflateGetHeader(this.strm,this.header)}function p(m,_){var y=new f(_);if(y.push(m,!0),y.err)throw y.msg||c[y.err];return y.result}f.prototype.push=function(m,_){var y,x,b,E,w,T,C=this.strm,P=this.options.chunkSize,M=this.options.dictionary,N=!1;if(this.ended)return!1;x=_===~~_?_:_===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof m=="string"?C.input=a.binstring2buf(m):h.call(m)==="[object ArrayBuffer]"?C.input=new Uint8Array(m):C.input=m,C.next_in=0,C.avail_in=C.input.length;do{if(C.avail_out===0&&(C.output=new o.Buf8(P),C.next_out=0,C.avail_out=P),(y=s.inflate(C,l.Z_NO_FLUSH))===l.Z_NEED_DICT&&M&&(T=typeof M=="string"?a.string2buf(M):h.call(M)==="[object ArrayBuffer]"?new Uint8Array(M):M,y=s.inflateSetDictionary(this.strm,T)),y===l.Z_BUF_ERROR&&N===!0&&(y=l.Z_OK,N=!1),y!==l.Z_STREAM_END&&y!==l.Z_OK)return this.onEnd(y),!(this.ended=!0);C.next_out&&(C.avail_out!==0&&y!==l.Z_STREAM_END&&(C.avail_in!==0||x!==l.Z_FINISH&&x!==l.Z_SYNC_FLUSH)||(this.options.to==="string"?(b=a.utf8border(C.output,C.next_out),E=C.next_out-b,w=a.buf2string(C.output,b),C.next_out=E,C.avail_out=P-E,E&&o.arraySet(C.output,C.output,b,E,0),this.onData(w)):this.onData(o.shrinkBuf(C.output,C.next_out)))),C.avail_in===0&&C.avail_out===0&&(N=!0)}while((0<C.avail_in||C.avail_out===0)&&y!==l.Z_STREAM_END);return y===l.Z_STREAM_END&&(x=l.Z_FINISH),x===l.Z_FINISH?(y=s.inflateEnd(this.strm),this.onEnd(y),this.ended=!0,y===l.Z_OK):x!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),!(C.avail_out=0))},f.prototype.onData=function(m){this.chunks.push(m)},f.prototype.onEnd=function(m){m===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},i.Inflate=f,i.inflate=p,i.inflateRaw=function(m,_){return(_=_||{}).raw=!0,p(m,_)},i.ungzip=p},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(l){for(var c=Array.prototype.slice.call(arguments,1);c.length;){var u=c.shift();if(u){if(typeof u!="object")throw new TypeError(u+"must be non-object");for(var d in u)u.hasOwnProperty(d)&&(l[d]=u[d])}}return l},i.shrinkBuf=function(l,c){return l.length===c?l:l.subarray?l.subarray(0,c):(l.length=c,l)};var o={arraySet:function(l,c,u,d,h){if(c.subarray&&l.subarray)l.set(c.subarray(u,u+d),h);else for(var f=0;f<d;f++)l[h+f]=c[u+f]},flattenChunks:function(l){var c,u,d,h,f,p;for(c=d=0,u=l.length;c<u;c++)d+=l[c].length;for(p=new Uint8Array(d),c=h=0,u=l.length;c<u;c++)f=l[c],p.set(f,h),h+=f.length;return p}},a={arraySet:function(l,c,u,d,h){for(var f=0;f<d;f++)l[h+f]=c[u+f]},flattenChunks:function(l){return[].concat.apply([],l)}};i.setTyped=function(l){l?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,a))},i.setTyped(s)},{}],42:[function(n,r,i){var s=n("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var l=new s.Buf8(256),c=0;c<256;c++)l[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function u(d,h){if(h<65537&&(d.subarray&&a||!d.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(d,h));for(var f="",p=0;p<h;p++)f+=String.fromCharCode(d[p]);return f}l[254]=l[254]=1,i.string2buf=function(d){var h,f,p,m,_,y=d.length,x=0;for(m=0;m<y;m++)(64512&(f=d.charCodeAt(m)))==55296&&m+1<y&&(64512&(p=d.charCodeAt(m+1)))==56320&&(f=65536+(f-55296<<10)+(p-56320),m++),x+=f<128?1:f<2048?2:f<65536?3:4;for(h=new s.Buf8(x),m=_=0;_<x;m++)(64512&(f=d.charCodeAt(m)))==55296&&m+1<y&&(64512&(p=d.charCodeAt(m+1)))==56320&&(f=65536+(f-55296<<10)+(p-56320),m++),f<128?h[_++]=f:(f<2048?h[_++]=192|f>>>6:(f<65536?h[_++]=224|f>>>12:(h[_++]=240|f>>>18,h[_++]=128|f>>>12&63),h[_++]=128|f>>>6&63),h[_++]=128|63&f);return h},i.buf2binstring=function(d){return u(d,d.length)},i.binstring2buf=function(d){for(var h=new s.Buf8(d.length),f=0,p=h.length;f<p;f++)h[f]=d.charCodeAt(f);return h},i.buf2string=function(d,h){var f,p,m,_,y=h||d.length,x=new Array(2*y);for(f=p=0;f<y;)if((m=d[f++])<128)x[p++]=m;else if(4<(_=l[m]))x[p++]=65533,f+=_-1;else{for(m&=_===2?31:_===3?15:7;1<_&&f<y;)m=m<<6|63&d[f++],_--;1<_?x[p++]=65533:m<65536?x[p++]=m:(m-=65536,x[p++]=55296|m>>10&1023,x[p++]=56320|1023&m)}return u(x,p)},i.utf8border=function(d,h){var f;for((h=h||d.length)>d.length&&(h=d.length),f=h-1;0<=f&&(192&d[f])==128;)f--;return f<0||f===0?h:f+l[d[f]]>h?f:h}},{"./common":41}],43:[function(n,r,i){r.exports=function(s,o,a,l){for(var c=65535&s|0,u=s>>>16&65535|0,d=0;a!==0;){for(a-=d=2e3<a?2e3:a;u=u+(c=c+o[l++]|0)|0,--d;);c%=65521,u%=65521}return c|u<<16|0}},{}],44:[function(n,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,i){var s=function(){for(var o,a=[],l=0;l<256;l++){o=l;for(var c=0;c<8;c++)o=1&o?3988292384^o>>>1:o>>>1;a[l]=o}return a}();r.exports=function(o,a,l,c){var u=s,d=c+l;o^=-1;for(var h=c;h<d;h++)o=o>>>8^u[255&(o^a[h])];return-1^o}},{}],46:[function(n,r,i){var s,o=n("../utils/common"),a=n("./trees"),l=n("./adler32"),c=n("./crc32"),u=n("./messages"),d=0,h=4,f=0,p=-2,m=-1,_=4,y=2,x=8,b=9,E=286,w=30,T=19,C=2*E+1,P=15,M=3,N=258,F=N+M+1,I=42,k=113,R=1,z=2,X=3,G=4;function j(B,oe){return B.msg=u[oe],oe}function H(B){return(B<<1)-(4<B?9:0)}function Q(B){for(var oe=B.length;0<=--oe;)B[oe]=0}function V(B){var oe=B.state,ie=oe.pending;ie>B.avail_out&&(ie=B.avail_out),ie!==0&&(o.arraySet(B.output,oe.pending_buf,oe.pending_out,ie,B.next_out),B.next_out+=ie,oe.pending_out+=ie,B.total_out+=ie,B.avail_out-=ie,oe.pending-=ie,oe.pending===0&&(oe.pending_out=0))}function ee(B,oe){a._tr_flush_block(B,0<=B.block_start?B.block_start:-1,B.strstart-B.block_start,oe),B.block_start=B.strstart,V(B.strm)}function ye(B,oe){B.pending_buf[B.pending++]=oe}function se(B,oe){B.pending_buf[B.pending++]=oe>>>8&255,B.pending_buf[B.pending++]=255&oe}function fe(B,oe){var ie,q,Y=B.max_chain_length,ne=B.strstart,me=B.prev_length,he=B.nice_match,de=B.strstart>B.w_size-F?B.strstart-(B.w_size-F):0,Ae=B.window,De=B.w_mask,Be=B.prev,tt=B.strstart+N,St=Ae[ne+me-1],be=Ae[ne+me];B.prev_length>=B.good_match&&(Y>>=2),he>B.lookahead&&(he=B.lookahead);do if(Ae[(ie=oe)+me]===be&&Ae[ie+me-1]===St&&Ae[ie]===Ae[ne]&&Ae[++ie]===Ae[ne+1]){ne+=2,ie++;do;while(Ae[++ne]===Ae[++ie]&&Ae[++ne]===Ae[++ie]&&Ae[++ne]===Ae[++ie]&&Ae[++ne]===Ae[++ie]&&Ae[++ne]===Ae[++ie]&&Ae[++ne]===Ae[++ie]&&Ae[++ne]===Ae[++ie]&&Ae[++ne]===Ae[++ie]&&ne<tt);if(q=N-(tt-ne),ne=tt-N,me<q){if(B.match_start=oe,he<=(me=q))break;St=Ae[ne+me-1],be=Ae[ne+me]}}while((oe=Be[oe&De])>de&&--Y!=0);return me<=B.lookahead?me:B.lookahead}function ve(B){var oe,ie,q,Y,ne,me,he,de,Ae,De,Be=B.w_size;do{if(Y=B.window_size-B.lookahead-B.strstart,B.strstart>=Be+(Be-F)){for(o.arraySet(B.window,B.window,Be,Be,0),B.match_start-=Be,B.strstart-=Be,B.block_start-=Be,oe=ie=B.hash_size;q=B.head[--oe],B.head[oe]=Be<=q?q-Be:0,--ie;);for(oe=ie=Be;q=B.prev[--oe],B.prev[oe]=Be<=q?q-Be:0,--ie;);Y+=Be}if(B.strm.avail_in===0)break;if(me=B.strm,he=B.window,de=B.strstart+B.lookahead,Ae=Y,De=void 0,De=me.avail_in,Ae<De&&(De=Ae),ie=De===0?0:(me.avail_in-=De,o.arraySet(he,me.input,me.next_in,De,de),me.state.wrap===1?me.adler=l(me.adler,he,De,de):me.state.wrap===2&&(me.adler=c(me.adler,he,De,de)),me.next_in+=De,me.total_in+=De,De),B.lookahead+=ie,B.lookahead+B.insert>=M)for(ne=B.strstart-B.insert,B.ins_h=B.window[ne],B.ins_h=(B.ins_h<<B.hash_shift^B.window[ne+1])&B.hash_mask;B.insert&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[ne+M-1])&B.hash_mask,B.prev[ne&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=ne,ne++,B.insert--,!(B.lookahead+B.insert<M)););}while(B.lookahead<F&&B.strm.avail_in!==0)}function Oe(B,oe){for(var ie,q;;){if(B.lookahead<F){if(ve(B),B.lookahead<F&&oe===d)return R;if(B.lookahead===0)break}if(ie=0,B.lookahead>=M&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+M-1])&B.hash_mask,ie=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart),ie!==0&&B.strstart-ie<=B.w_size-F&&(B.match_length=fe(B,ie)),B.match_length>=M)if(q=a._tr_tally(B,B.strstart-B.match_start,B.match_length-M),B.lookahead-=B.match_length,B.match_length<=B.max_lazy_match&&B.lookahead>=M){for(B.match_length--;B.strstart++,B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+M-1])&B.hash_mask,ie=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart,--B.match_length!=0;);B.strstart++}else B.strstart+=B.match_length,B.match_length=0,B.ins_h=B.window[B.strstart],B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+1])&B.hash_mask;else q=a._tr_tally(B,0,B.window[B.strstart]),B.lookahead--,B.strstart++;if(q&&(ee(B,!1),B.strm.avail_out===0))return R}return B.insert=B.strstart<M-1?B.strstart:M-1,oe===h?(ee(B,!0),B.strm.avail_out===0?X:G):B.last_lit&&(ee(B,!1),B.strm.avail_out===0)?R:z}function ae(B,oe){for(var ie,q,Y;;){if(B.lookahead<F){if(ve(B),B.lookahead<F&&oe===d)return R;if(B.lookahead===0)break}if(ie=0,B.lookahead>=M&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+M-1])&B.hash_mask,ie=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart),B.prev_length=B.match_length,B.prev_match=B.match_start,B.match_length=M-1,ie!==0&&B.prev_length<B.max_lazy_match&&B.strstart-ie<=B.w_size-F&&(B.match_length=fe(B,ie),B.match_length<=5&&(B.strategy===1||B.match_length===M&&4096<B.strstart-B.match_start)&&(B.match_length=M-1)),B.prev_length>=M&&B.match_length<=B.prev_length){for(Y=B.strstart+B.lookahead-M,q=a._tr_tally(B,B.strstart-1-B.prev_match,B.prev_length-M),B.lookahead-=B.prev_length-1,B.prev_length-=2;++B.strstart<=Y&&(B.ins_h=(B.ins_h<<B.hash_shift^B.window[B.strstart+M-1])&B.hash_mask,ie=B.prev[B.strstart&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=B.strstart),--B.prev_length!=0;);if(B.match_available=0,B.match_length=M-1,B.strstart++,q&&(ee(B,!1),B.strm.avail_out===0))return R}else if(B.match_available){if((q=a._tr_tally(B,0,B.window[B.strstart-1]))&&ee(B,!1),B.strstart++,B.lookahead--,B.strm.avail_out===0)return R}else B.match_available=1,B.strstart++,B.lookahead--}return B.match_available&&(q=a._tr_tally(B,0,B.window[B.strstart-1]),B.match_available=0),B.insert=B.strstart<M-1?B.strstart:M-1,oe===h?(ee(B,!0),B.strm.avail_out===0?X:G):B.last_lit&&(ee(B,!1),B.strm.avail_out===0)?R:z}function ue(B,oe,ie,q,Y){this.good_length=B,this.max_lazy=oe,this.nice_length=ie,this.max_chain=q,this.func=Y}function Ce(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=x,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*C),this.dyn_dtree=new o.Buf16(2*(2*w+1)),this.bl_tree=new o.Buf16(2*(2*T+1)),Q(this.dyn_ltree),Q(this.dyn_dtree),Q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(P+1),this.heap=new o.Buf16(2*E+1),Q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*E+1),Q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function pe(B){var oe;return B&&B.state?(B.total_in=B.total_out=0,B.data_type=y,(oe=B.state).pending=0,oe.pending_out=0,oe.wrap<0&&(oe.wrap=-oe.wrap),oe.status=oe.wrap?I:k,B.adler=oe.wrap===2?0:1,oe.last_flush=d,a._tr_init(oe),f):j(B,p)}function ke(B){var oe=pe(B);return oe===f&&function(ie){ie.window_size=2*ie.w_size,Q(ie.head),ie.max_lazy_match=s[ie.level].max_lazy,ie.good_match=s[ie.level].good_length,ie.nice_match=s[ie.level].nice_length,ie.max_chain_length=s[ie.level].max_chain,ie.strstart=0,ie.block_start=0,ie.lookahead=0,ie.insert=0,ie.match_length=ie.prev_length=M-1,ie.match_available=0,ie.ins_h=0}(B.state),oe}function Re(B,oe,ie,q,Y,ne){if(!B)return p;var me=1;if(oe===m&&(oe=6),q<0?(me=0,q=-q):15<q&&(me=2,q-=16),Y<1||b<Y||ie!==x||q<8||15<q||oe<0||9<oe||ne<0||_<ne)return j(B,p);q===8&&(q=9);var he=new Ce;return(B.state=he).strm=B,he.wrap=me,he.gzhead=null,he.w_bits=q,he.w_size=1<<he.w_bits,he.w_mask=he.w_size-1,he.hash_bits=Y+7,he.hash_size=1<<he.hash_bits,he.hash_mask=he.hash_size-1,he.hash_shift=~~((he.hash_bits+M-1)/M),he.window=new o.Buf8(2*he.w_size),he.head=new o.Buf16(he.hash_size),he.prev=new o.Buf16(he.w_size),he.lit_bufsize=1<<Y+6,he.pending_buf_size=4*he.lit_bufsize,he.pending_buf=new o.Buf8(he.pending_buf_size),he.d_buf=1*he.lit_bufsize,he.l_buf=3*he.lit_bufsize,he.level=oe,he.strategy=ne,he.method=ie,ke(B)}s=[new ue(0,0,0,0,function(B,oe){var ie=65535;for(ie>B.pending_buf_size-5&&(ie=B.pending_buf_size-5);;){if(B.lookahead<=1){if(ve(B),B.lookahead===0&&oe===d)return R;if(B.lookahead===0)break}B.strstart+=B.lookahead,B.lookahead=0;var q=B.block_start+ie;if((B.strstart===0||B.strstart>=q)&&(B.lookahead=B.strstart-q,B.strstart=q,ee(B,!1),B.strm.avail_out===0)||B.strstart-B.block_start>=B.w_size-F&&(ee(B,!1),B.strm.avail_out===0))return R}return B.insert=0,oe===h?(ee(B,!0),B.strm.avail_out===0?X:G):(B.strstart>B.block_start&&(ee(B,!1),B.strm.avail_out),R)}),new ue(4,4,8,4,Oe),new ue(4,5,16,8,Oe),new ue(4,6,32,32,Oe),new ue(4,4,16,16,ae),new ue(8,16,32,32,ae),new ue(8,16,128,128,ae),new ue(8,32,128,256,ae),new ue(32,128,258,1024,ae),new ue(32,258,258,4096,ae)],i.deflateInit=function(B,oe){return Re(B,oe,x,15,8,0)},i.deflateInit2=Re,i.deflateReset=ke,i.deflateResetKeep=pe,i.deflateSetHeader=function(B,oe){return B&&B.state?B.state.wrap!==2?p:(B.state.gzhead=oe,f):p},i.deflate=function(B,oe){var ie,q,Y,ne;if(!B||!B.state||5<oe||oe<0)return B?j(B,p):p;if(q=B.state,!B.output||!B.input&&B.avail_in!==0||q.status===666&&oe!==h)return j(B,B.avail_out===0?-5:p);if(q.strm=B,ie=q.last_flush,q.last_flush=oe,q.status===I)if(q.wrap===2)B.adler=0,ye(q,31),ye(q,139),ye(q,8),q.gzhead?(ye(q,(q.gzhead.text?1:0)+(q.gzhead.hcrc?2:0)+(q.gzhead.extra?4:0)+(q.gzhead.name?8:0)+(q.gzhead.comment?16:0)),ye(q,255&q.gzhead.time),ye(q,q.gzhead.time>>8&255),ye(q,q.gzhead.time>>16&255),ye(q,q.gzhead.time>>24&255),ye(q,q.level===9?2:2<=q.strategy||q.level<2?4:0),ye(q,255&q.gzhead.os),q.gzhead.extra&&q.gzhead.extra.length&&(ye(q,255&q.gzhead.extra.length),ye(q,q.gzhead.extra.length>>8&255)),q.gzhead.hcrc&&(B.adler=c(B.adler,q.pending_buf,q.pending,0)),q.gzindex=0,q.status=69):(ye(q,0),ye(q,0),ye(q,0),ye(q,0),ye(q,0),ye(q,q.level===9?2:2<=q.strategy||q.level<2?4:0),ye(q,3),q.status=k);else{var me=x+(q.w_bits-8<<4)<<8;me|=(2<=q.strategy||q.level<2?0:q.level<6?1:q.level===6?2:3)<<6,q.strstart!==0&&(me|=32),me+=31-me%31,q.status=k,se(q,me),q.strstart!==0&&(se(q,B.adler>>>16),se(q,65535&B.adler)),B.adler=1}if(q.status===69)if(q.gzhead.extra){for(Y=q.pending;q.gzindex<(65535&q.gzhead.extra.length)&&(q.pending!==q.pending_buf_size||(q.gzhead.hcrc&&q.pending>Y&&(B.adler=c(B.adler,q.pending_buf,q.pending-Y,Y)),V(B),Y=q.pending,q.pending!==q.pending_buf_size));)ye(q,255&q.gzhead.extra[q.gzindex]),q.gzindex++;q.gzhead.hcrc&&q.pending>Y&&(B.adler=c(B.adler,q.pending_buf,q.pending-Y,Y)),q.gzindex===q.gzhead.extra.length&&(q.gzindex=0,q.status=73)}else q.status=73;if(q.status===73)if(q.gzhead.name){Y=q.pending;do{if(q.pending===q.pending_buf_size&&(q.gzhead.hcrc&&q.pending>Y&&(B.adler=c(B.adler,q.pending_buf,q.pending-Y,Y)),V(B),Y=q.pending,q.pending===q.pending_buf_size)){ne=1;break}ne=q.gzindex<q.gzhead.name.length?255&q.gzhead.name.charCodeAt(q.gzindex++):0,ye(q,ne)}while(ne!==0);q.gzhead.hcrc&&q.pending>Y&&(B.adler=c(B.adler,q.pending_buf,q.pending-Y,Y)),ne===0&&(q.gzindex=0,q.status=91)}else q.status=91;if(q.status===91)if(q.gzhead.comment){Y=q.pending;do{if(q.pending===q.pending_buf_size&&(q.gzhead.hcrc&&q.pending>Y&&(B.adler=c(B.adler,q.pending_buf,q.pending-Y,Y)),V(B),Y=q.pending,q.pending===q.pending_buf_size)){ne=1;break}ne=q.gzindex<q.gzhead.comment.length?255&q.gzhead.comment.charCodeAt(q.gzindex++):0,ye(q,ne)}while(ne!==0);q.gzhead.hcrc&&q.pending>Y&&(B.adler=c(B.adler,q.pending_buf,q.pending-Y,Y)),ne===0&&(q.status=103)}else q.status=103;if(q.status===103&&(q.gzhead.hcrc?(q.pending+2>q.pending_buf_size&&V(B),q.pending+2<=q.pending_buf_size&&(ye(q,255&B.adler),ye(q,B.adler>>8&255),B.adler=0,q.status=k)):q.status=k),q.pending!==0){if(V(B),B.avail_out===0)return q.last_flush=-1,f}else if(B.avail_in===0&&H(oe)<=H(ie)&&oe!==h)return j(B,-5);if(q.status===666&&B.avail_in!==0)return j(B,-5);if(B.avail_in!==0||q.lookahead!==0||oe!==d&&q.status!==666){var he=q.strategy===2?function(de,Ae){for(var De;;){if(de.lookahead===0&&(ve(de),de.lookahead===0)){if(Ae===d)return R;break}if(de.match_length=0,De=a._tr_tally(de,0,de.window[de.strstart]),de.lookahead--,de.strstart++,De&&(ee(de,!1),de.strm.avail_out===0))return R}return de.insert=0,Ae===h?(ee(de,!0),de.strm.avail_out===0?X:G):de.last_lit&&(ee(de,!1),de.strm.avail_out===0)?R:z}(q,oe):q.strategy===3?function(de,Ae){for(var De,Be,tt,St,be=de.window;;){if(de.lookahead<=N){if(ve(de),de.lookahead<=N&&Ae===d)return R;if(de.lookahead===0)break}if(de.match_length=0,de.lookahead>=M&&0<de.strstart&&(Be=be[tt=de.strstart-1])===be[++tt]&&Be===be[++tt]&&Be===be[++tt]){St=de.strstart+N;do;while(Be===be[++tt]&&Be===be[++tt]&&Be===be[++tt]&&Be===be[++tt]&&Be===be[++tt]&&Be===be[++tt]&&Be===be[++tt]&&Be===be[++tt]&&tt<St);de.match_length=N-(St-tt),de.match_length>de.lookahead&&(de.match_length=de.lookahead)}if(de.match_length>=M?(De=a._tr_tally(de,1,de.match_length-M),de.lookahead-=de.match_length,de.strstart+=de.match_length,de.match_length=0):(De=a._tr_tally(de,0,de.window[de.strstart]),de.lookahead--,de.strstart++),De&&(ee(de,!1),de.strm.avail_out===0))return R}return de.insert=0,Ae===h?(ee(de,!0),de.strm.avail_out===0?X:G):de.last_lit&&(ee(de,!1),de.strm.avail_out===0)?R:z}(q,oe):s[q.level].func(q,oe);if(he!==X&&he!==G||(q.status=666),he===R||he===X)return B.avail_out===0&&(q.last_flush=-1),f;if(he===z&&(oe===1?a._tr_align(q):oe!==5&&(a._tr_stored_block(q,0,0,!1),oe===3&&(Q(q.head),q.lookahead===0&&(q.strstart=0,q.block_start=0,q.insert=0))),V(B),B.avail_out===0))return q.last_flush=-1,f}return oe!==h?f:q.wrap<=0?1:(q.wrap===2?(ye(q,255&B.adler),ye(q,B.adler>>8&255),ye(q,B.adler>>16&255),ye(q,B.adler>>24&255),ye(q,255&B.total_in),ye(q,B.total_in>>8&255),ye(q,B.total_in>>16&255),ye(q,B.total_in>>24&255)):(se(q,B.adler>>>16),se(q,65535&B.adler)),V(B),0<q.wrap&&(q.wrap=-q.wrap),q.pending!==0?f:1)},i.deflateEnd=function(B){var oe;return B&&B.state?(oe=B.state.status)!==I&&oe!==69&&oe!==73&&oe!==91&&oe!==103&&oe!==k&&oe!==666?j(B,p):(B.state=null,oe===k?j(B,-3):f):p},i.deflateSetDictionary=function(B,oe){var ie,q,Y,ne,me,he,de,Ae,De=oe.length;if(!B||!B.state||(ne=(ie=B.state).wrap)===2||ne===1&&ie.status!==I||ie.lookahead)return p;for(ne===1&&(B.adler=l(B.adler,oe,De,0)),ie.wrap=0,De>=ie.w_size&&(ne===0&&(Q(ie.head),ie.strstart=0,ie.block_start=0,ie.insert=0),Ae=new o.Buf8(ie.w_size),o.arraySet(Ae,oe,De-ie.w_size,ie.w_size,0),oe=Ae,De=ie.w_size),me=B.avail_in,he=B.next_in,de=B.input,B.avail_in=De,B.next_in=0,B.input=oe,ve(ie);ie.lookahead>=M;){for(q=ie.strstart,Y=ie.lookahead-(M-1);ie.ins_h=(ie.ins_h<<ie.hash_shift^ie.window[q+M-1])&ie.hash_mask,ie.prev[q&ie.w_mask]=ie.head[ie.ins_h],ie.head[ie.ins_h]=q,q++,--Y;);ie.strstart=q,ie.lookahead=M-1,ve(ie)}return ie.strstart+=ie.lookahead,ie.block_start=ie.strstart,ie.insert=ie.lookahead,ie.lookahead=0,ie.match_length=ie.prev_length=M-1,ie.match_available=0,B.next_in=he,B.input=de,B.avail_in=me,ie.wrap=ne,f},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,i){r.exports=function(s,o){var a,l,c,u,d,h,f,p,m,_,y,x,b,E,w,T,C,P,M,N,F,I,k,R,z;a=s.state,l=s.next_in,R=s.input,c=l+(s.avail_in-5),u=s.next_out,z=s.output,d=u-(o-s.avail_out),h=u+(s.avail_out-257),f=a.dmax,p=a.wsize,m=a.whave,_=a.wnext,y=a.window,x=a.hold,b=a.bits,E=a.lencode,w=a.distcode,T=(1<<a.lenbits)-1,C=(1<<a.distbits)-1;e:do{b<15&&(x+=R[l++]<<b,b+=8,x+=R[l++]<<b,b+=8),P=E[x&T];t:for(;;){if(x>>>=M=P>>>24,b-=M,(M=P>>>16&255)===0)z[u++]=65535&P;else{if(!(16&M)){if(!(64&M)){P=E[(65535&P)+(x&(1<<M)-1)];continue t}if(32&M){a.mode=12;break e}s.msg="invalid literal/length code",a.mode=30;break e}N=65535&P,(M&=15)&&(b<M&&(x+=R[l++]<<b,b+=8),N+=x&(1<<M)-1,x>>>=M,b-=M),b<15&&(x+=R[l++]<<b,b+=8,x+=R[l++]<<b,b+=8),P=w[x&C];n:for(;;){if(x>>>=M=P>>>24,b-=M,!(16&(M=P>>>16&255))){if(!(64&M)){P=w[(65535&P)+(x&(1<<M)-1)];continue n}s.msg="invalid distance code",a.mode=30;break e}if(F=65535&P,b<(M&=15)&&(x+=R[l++]<<b,(b+=8)<M&&(x+=R[l++]<<b,b+=8)),f<(F+=x&(1<<M)-1)){s.msg="invalid distance too far back",a.mode=30;break e}if(x>>>=M,b-=M,(M=u-d)<F){if(m<(M=F-M)&&a.sane){s.msg="invalid distance too far back",a.mode=30;break e}if(k=y,(I=0)===_){if(I+=p-M,M<N){for(N-=M;z[u++]=y[I++],--M;);I=u-F,k=z}}else if(_<M){if(I+=p+_-M,(M-=_)<N){for(N-=M;z[u++]=y[I++],--M;);if(I=0,_<N){for(N-=M=_;z[u++]=y[I++],--M;);I=u-F,k=z}}}else if(I+=_-M,M<N){for(N-=M;z[u++]=y[I++],--M;);I=u-F,k=z}for(;2<N;)z[u++]=k[I++],z[u++]=k[I++],z[u++]=k[I++],N-=3;N&&(z[u++]=k[I++],1<N&&(z[u++]=k[I++]))}else{for(I=u-F;z[u++]=z[I++],z[u++]=z[I++],z[u++]=z[I++],2<(N-=3););N&&(z[u++]=z[I++],1<N&&(z[u++]=z[I++]))}break}}break}}while(l<c&&u<h);l-=N=b>>3,x&=(1<<(b-=N<<3))-1,s.next_in=l,s.next_out=u,s.avail_in=l<c?c-l+5:5-(l-c),s.avail_out=u<h?h-u+257:257-(u-h),a.hold=x,a.bits=b}},{}],49:[function(n,r,i){var s=n("../utils/common"),o=n("./adler32"),a=n("./crc32"),l=n("./inffast"),c=n("./inftrees"),u=1,d=2,h=0,f=-2,p=1,m=852,_=592;function y(I){return(I>>>24&255)+(I>>>8&65280)+((65280&I)<<8)+((255&I)<<24)}function x(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function b(I){var k;return I&&I.state?(k=I.state,I.total_in=I.total_out=k.total=0,I.msg="",k.wrap&&(I.adler=1&k.wrap),k.mode=p,k.last=0,k.havedict=0,k.dmax=32768,k.head=null,k.hold=0,k.bits=0,k.lencode=k.lendyn=new s.Buf32(m),k.distcode=k.distdyn=new s.Buf32(_),k.sane=1,k.back=-1,h):f}function E(I){var k;return I&&I.state?((k=I.state).wsize=0,k.whave=0,k.wnext=0,b(I)):f}function w(I,k){var R,z;return I&&I.state?(z=I.state,k<0?(R=0,k=-k):(R=1+(k>>4),k<48&&(k&=15)),k&&(k<8||15<k)?f:(z.window!==null&&z.wbits!==k&&(z.window=null),z.wrap=R,z.wbits=k,E(I))):f}function T(I,k){var R,z;return I?(z=new x,(I.state=z).window=null,(R=w(I,k))!==h&&(I.state=null),R):f}var C,P,M=!0;function N(I){if(M){var k;for(C=new s.Buf32(512),P=new s.Buf32(32),k=0;k<144;)I.lens[k++]=8;for(;k<256;)I.lens[k++]=9;for(;k<280;)I.lens[k++]=7;for(;k<288;)I.lens[k++]=8;for(c(u,I.lens,0,288,C,0,I.work,{bits:9}),k=0;k<32;)I.lens[k++]=5;c(d,I.lens,0,32,P,0,I.work,{bits:5}),M=!1}I.lencode=C,I.lenbits=9,I.distcode=P,I.distbits=5}function F(I,k,R,z){var X,G=I.state;return G.window===null&&(G.wsize=1<<G.wbits,G.wnext=0,G.whave=0,G.window=new s.Buf8(G.wsize)),z>=G.wsize?(s.arraySet(G.window,k,R-G.wsize,G.wsize,0),G.wnext=0,G.whave=G.wsize):(z<(X=G.wsize-G.wnext)&&(X=z),s.arraySet(G.window,k,R-z,X,G.wnext),(z-=X)?(s.arraySet(G.window,k,R-z,z,0),G.wnext=z,G.whave=G.wsize):(G.wnext+=X,G.wnext===G.wsize&&(G.wnext=0),G.whave<G.wsize&&(G.whave+=X))),0}i.inflateReset=E,i.inflateReset2=w,i.inflateResetKeep=b,i.inflateInit=function(I){return T(I,15)},i.inflateInit2=T,i.inflate=function(I,k){var R,z,X,G,j,H,Q,V,ee,ye,se,fe,ve,Oe,ae,ue,Ce,pe,ke,Re,B,oe,ie,q,Y=0,ne=new s.Buf8(4),me=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!I||!I.state||!I.output||!I.input&&I.avail_in!==0)return f;(R=I.state).mode===12&&(R.mode=13),j=I.next_out,X=I.output,Q=I.avail_out,G=I.next_in,z=I.input,H=I.avail_in,V=R.hold,ee=R.bits,ye=H,se=Q,oe=h;e:for(;;)switch(R.mode){case p:if(R.wrap===0){R.mode=13;break}for(;ee<16;){if(H===0)break e;H--,V+=z[G++]<<ee,ee+=8}if(2&R.wrap&&V===35615){ne[R.check=0]=255&V,ne[1]=V>>>8&255,R.check=a(R.check,ne,2,0),ee=V=0,R.mode=2;break}if(R.flags=0,R.head&&(R.head.done=!1),!(1&R.wrap)||(((255&V)<<8)+(V>>8))%31){I.msg="incorrect header check",R.mode=30;break}if((15&V)!=8){I.msg="unknown compression method",R.mode=30;break}if(ee-=4,B=8+(15&(V>>>=4)),R.wbits===0)R.wbits=B;else if(B>R.wbits){I.msg="invalid window size",R.mode=30;break}R.dmax=1<<B,I.adler=R.check=1,R.mode=512&V?10:12,ee=V=0;break;case 2:for(;ee<16;){if(H===0)break e;H--,V+=z[G++]<<ee,ee+=8}if(R.flags=V,(255&R.flags)!=8){I.msg="unknown compression method",R.mode=30;break}if(57344&R.flags){I.msg="unknown header flags set",R.mode=30;break}R.head&&(R.head.text=V>>8&1),512&R.flags&&(ne[0]=255&V,ne[1]=V>>>8&255,R.check=a(R.check,ne,2,0)),ee=V=0,R.mode=3;case 3:for(;ee<32;){if(H===0)break e;H--,V+=z[G++]<<ee,ee+=8}R.head&&(R.head.time=V),512&R.flags&&(ne[0]=255&V,ne[1]=V>>>8&255,ne[2]=V>>>16&255,ne[3]=V>>>24&255,R.check=a(R.check,ne,4,0)),ee=V=0,R.mode=4;case 4:for(;ee<16;){if(H===0)break e;H--,V+=z[G++]<<ee,ee+=8}R.head&&(R.head.xflags=255&V,R.head.os=V>>8),512&R.flags&&(ne[0]=255&V,ne[1]=V>>>8&255,R.check=a(R.check,ne,2,0)),ee=V=0,R.mode=5;case 5:if(1024&R.flags){for(;ee<16;){if(H===0)break e;H--,V+=z[G++]<<ee,ee+=8}R.length=V,R.head&&(R.head.extra_len=V),512&R.flags&&(ne[0]=255&V,ne[1]=V>>>8&255,R.check=a(R.check,ne,2,0)),ee=V=0}else R.head&&(R.head.extra=null);R.mode=6;case 6:if(1024&R.flags&&(H<(fe=R.length)&&(fe=H),fe&&(R.head&&(B=R.head.extra_len-R.length,R.head.extra||(R.head.extra=new Array(R.head.extra_len)),s.arraySet(R.head.extra,z,G,fe,B)),512&R.flags&&(R.check=a(R.check,z,fe,G)),H-=fe,G+=fe,R.length-=fe),R.length))break e;R.length=0,R.mode=7;case 7:if(2048&R.flags){if(H===0)break e;for(fe=0;B=z[G+fe++],R.head&&B&&R.length<65536&&(R.head.name+=String.fromCharCode(B)),B&&fe<H;);if(512&R.flags&&(R.check=a(R.check,z,fe,G)),H-=fe,G+=fe,B)break e}else R.head&&(R.head.name=null);R.length=0,R.mode=8;case 8:if(4096&R.flags){if(H===0)break e;for(fe=0;B=z[G+fe++],R.head&&B&&R.length<65536&&(R.head.comment+=String.fromCharCode(B)),B&&fe<H;);if(512&R.flags&&(R.check=a(R.check,z,fe,G)),H-=fe,G+=fe,B)break e}else R.head&&(R.head.comment=null);R.mode=9;case 9:if(512&R.flags){for(;ee<16;){if(H===0)break e;H--,V+=z[G++]<<ee,ee+=8}if(V!==(65535&R.check)){I.msg="header crc mismatch",R.mode=30;break}ee=V=0}R.head&&(R.head.hcrc=R.flags>>9&1,R.head.done=!0),I.adler=R.check=0,R.mode=12;break;case 10:for(;ee<32;){if(H===0)break e;H--,V+=z[G++]<<ee,ee+=8}I.adler=R.check=y(V),ee=V=0,R.mode=11;case 11:if(R.havedict===0)return I.next_out=j,I.avail_out=Q,I.next_in=G,I.avail_in=H,R.hold=V,R.bits=ee,2;I.adler=R.check=1,R.mode=12;case 12:if(k===5||k===6)break e;case 13:if(R.last){V>>>=7&ee,ee-=7&ee,R.mode=27;break}for(;ee<3;){if(H===0)break e;H--,V+=z[G++]<<ee,ee+=8}switch(R.last=1&V,ee-=1,3&(V>>>=1)){case 0:R.mode=14;break;case 1:if(N(R),R.mode=20,k!==6)break;V>>>=2,ee-=2;break e;case 2:R.mode=17;break;case 3:I.msg="invalid block type",R.mode=30}V>>>=2,ee-=2;break;case 14:for(V>>>=7&ee,ee-=7&ee;ee<32;){if(H===0)break e;H--,V+=z[G++]<<ee,ee+=8}if((65535&V)!=(V>>>16^65535)){I.msg="invalid stored block lengths",R.mode=30;break}if(R.length=65535&V,ee=V=0,R.mode=15,k===6)break e;case 15:R.mode=16;case 16:if(fe=R.length){if(H<fe&&(fe=H),Q<fe&&(fe=Q),fe===0)break e;s.arraySet(X,z,G,fe,j),H-=fe,G+=fe,Q-=fe,j+=fe,R.length-=fe;break}R.mode=12;break;case 17:for(;ee<14;){if(H===0)break e;H--,V+=z[G++]<<ee,ee+=8}if(R.nlen=257+(31&V),V>>>=5,ee-=5,R.ndist=1+(31&V),V>>>=5,ee-=5,R.ncode=4+(15&V),V>>>=4,ee-=4,286<R.nlen||30<R.ndist){I.msg="too many length or distance symbols",R.mode=30;break}R.have=0,R.mode=18;case 18:for(;R.have<R.ncode;){for(;ee<3;){if(H===0)break e;H--,V+=z[G++]<<ee,ee+=8}R.lens[me[R.have++]]=7&V,V>>>=3,ee-=3}for(;R.have<19;)R.lens[me[R.have++]]=0;if(R.lencode=R.lendyn,R.lenbits=7,ie={bits:R.lenbits},oe=c(0,R.lens,0,19,R.lencode,0,R.work,ie),R.lenbits=ie.bits,oe){I.msg="invalid code lengths set",R.mode=30;break}R.have=0,R.mode=19;case 19:for(;R.have<R.nlen+R.ndist;){for(;ue=(Y=R.lencode[V&(1<<R.lenbits)-1])>>>16&255,Ce=65535&Y,!((ae=Y>>>24)<=ee);){if(H===0)break e;H--,V+=z[G++]<<ee,ee+=8}if(Ce<16)V>>>=ae,ee-=ae,R.lens[R.have++]=Ce;else{if(Ce===16){for(q=ae+2;ee<q;){if(H===0)break e;H--,V+=z[G++]<<ee,ee+=8}if(V>>>=ae,ee-=ae,R.have===0){I.msg="invalid bit length repeat",R.mode=30;break}B=R.lens[R.have-1],fe=3+(3&V),V>>>=2,ee-=2}else if(Ce===17){for(q=ae+3;ee<q;){if(H===0)break e;H--,V+=z[G++]<<ee,ee+=8}ee-=ae,B=0,fe=3+(7&(V>>>=ae)),V>>>=3,ee-=3}else{for(q=ae+7;ee<q;){if(H===0)break e;H--,V+=z[G++]<<ee,ee+=8}ee-=ae,B=0,fe=11+(127&(V>>>=ae)),V>>>=7,ee-=7}if(R.have+fe>R.nlen+R.ndist){I.msg="invalid bit length repeat",R.mode=30;break}for(;fe--;)R.lens[R.have++]=B}}if(R.mode===30)break;if(R.lens[256]===0){I.msg="invalid code -- missing end-of-block",R.mode=30;break}if(R.lenbits=9,ie={bits:R.lenbits},oe=c(u,R.lens,0,R.nlen,R.lencode,0,R.work,ie),R.lenbits=ie.bits,oe){I.msg="invalid literal/lengths set",R.mode=30;break}if(R.distbits=6,R.distcode=R.distdyn,ie={bits:R.distbits},oe=c(d,R.lens,R.nlen,R.ndist,R.distcode,0,R.work,ie),R.distbits=ie.bits,oe){I.msg="invalid distances set",R.mode=30;break}if(R.mode=20,k===6)break e;case 20:R.mode=21;case 21:if(6<=H&&258<=Q){I.next_out=j,I.avail_out=Q,I.next_in=G,I.avail_in=H,R.hold=V,R.bits=ee,l(I,se),j=I.next_out,X=I.output,Q=I.avail_out,G=I.next_in,z=I.input,H=I.avail_in,V=R.hold,ee=R.bits,R.mode===12&&(R.back=-1);break}for(R.back=0;ue=(Y=R.lencode[V&(1<<R.lenbits)-1])>>>16&255,Ce=65535&Y,!((ae=Y>>>24)<=ee);){if(H===0)break e;H--,V+=z[G++]<<ee,ee+=8}if(ue&&!(240&ue)){for(pe=ae,ke=ue,Re=Ce;ue=(Y=R.lencode[Re+((V&(1<<pe+ke)-1)>>pe)])>>>16&255,Ce=65535&Y,!(pe+(ae=Y>>>24)<=ee);){if(H===0)break e;H--,V+=z[G++]<<ee,ee+=8}V>>>=pe,ee-=pe,R.back+=pe}if(V>>>=ae,ee-=ae,R.back+=ae,R.length=Ce,ue===0){R.mode=26;break}if(32&ue){R.back=-1,R.mode=12;break}if(64&ue){I.msg="invalid literal/length code",R.mode=30;break}R.extra=15&ue,R.mode=22;case 22:if(R.extra){for(q=R.extra;ee<q;){if(H===0)break e;H--,V+=z[G++]<<ee,ee+=8}R.length+=V&(1<<R.extra)-1,V>>>=R.extra,ee-=R.extra,R.back+=R.extra}R.was=R.length,R.mode=23;case 23:for(;ue=(Y=R.distcode[V&(1<<R.distbits)-1])>>>16&255,Ce=65535&Y,!((ae=Y>>>24)<=ee);){if(H===0)break e;H--,V+=z[G++]<<ee,ee+=8}if(!(240&ue)){for(pe=ae,ke=ue,Re=Ce;ue=(Y=R.distcode[Re+((V&(1<<pe+ke)-1)>>pe)])>>>16&255,Ce=65535&Y,!(pe+(ae=Y>>>24)<=ee);){if(H===0)break e;H--,V+=z[G++]<<ee,ee+=8}V>>>=pe,ee-=pe,R.back+=pe}if(V>>>=ae,ee-=ae,R.back+=ae,64&ue){I.msg="invalid distance code",R.mode=30;break}R.offset=Ce,R.extra=15&ue,R.mode=24;case 24:if(R.extra){for(q=R.extra;ee<q;){if(H===0)break e;H--,V+=z[G++]<<ee,ee+=8}R.offset+=V&(1<<R.extra)-1,V>>>=R.extra,ee-=R.extra,R.back+=R.extra}if(R.offset>R.dmax){I.msg="invalid distance too far back",R.mode=30;break}R.mode=25;case 25:if(Q===0)break e;if(fe=se-Q,R.offset>fe){if((fe=R.offset-fe)>R.whave&&R.sane){I.msg="invalid distance too far back",R.mode=30;break}ve=fe>R.wnext?(fe-=R.wnext,R.wsize-fe):R.wnext-fe,fe>R.length&&(fe=R.length),Oe=R.window}else Oe=X,ve=j-R.offset,fe=R.length;for(Q<fe&&(fe=Q),Q-=fe,R.length-=fe;X[j++]=Oe[ve++],--fe;);R.length===0&&(R.mode=21);break;case 26:if(Q===0)break e;X[j++]=R.length,Q--,R.mode=21;break;case 27:if(R.wrap){for(;ee<32;){if(H===0)break e;H--,V|=z[G++]<<ee,ee+=8}if(se-=Q,I.total_out+=se,R.total+=se,se&&(I.adler=R.check=R.flags?a(R.check,X,se,j-se):o(R.check,X,se,j-se)),se=Q,(R.flags?V:y(V))!==R.check){I.msg="incorrect data check",R.mode=30;break}ee=V=0}R.mode=28;case 28:if(R.wrap&&R.flags){for(;ee<32;){if(H===0)break e;H--,V+=z[G++]<<ee,ee+=8}if(V!==(4294967295&R.total)){I.msg="incorrect length check",R.mode=30;break}ee=V=0}R.mode=29;case 29:oe=1;break e;case 30:oe=-3;break e;case 31:return-4;case 32:default:return f}return I.next_out=j,I.avail_out=Q,I.next_in=G,I.avail_in=H,R.hold=V,R.bits=ee,(R.wsize||se!==I.avail_out&&R.mode<30&&(R.mode<27||k!==4))&&F(I,I.output,I.next_out,se-I.avail_out)?(R.mode=31,-4):(ye-=I.avail_in,se-=I.avail_out,I.total_in+=ye,I.total_out+=se,R.total+=se,R.wrap&&se&&(I.adler=R.check=R.flags?a(R.check,X,se,I.next_out-se):o(R.check,X,se,I.next_out-se)),I.data_type=R.bits+(R.last?64:0)+(R.mode===12?128:0)+(R.mode===20||R.mode===15?256:0),(ye==0&&se===0||k===4)&&oe===h&&(oe=-5),oe)},i.inflateEnd=function(I){if(!I||!I.state)return f;var k=I.state;return k.window&&(k.window=null),I.state=null,h},i.inflateGetHeader=function(I,k){var R;return I&&I.state&&2&(R=I.state).wrap?((R.head=k).done=!1,h):f},i.inflateSetDictionary=function(I,k){var R,z=k.length;return I&&I.state?(R=I.state).wrap!==0&&R.mode!==11?f:R.mode===11&&o(1,k,z,0)!==R.check?-3:F(I,k,z,z)?(R.mode=31,-4):(R.havedict=1,h):f},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,i){var s=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],l=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],c=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(u,d,h,f,p,m,_,y){var x,b,E,w,T,C,P,M,N,F=y.bits,I=0,k=0,R=0,z=0,X=0,G=0,j=0,H=0,Q=0,V=0,ee=null,ye=0,se=new s.Buf16(16),fe=new s.Buf16(16),ve=null,Oe=0;for(I=0;I<=15;I++)se[I]=0;for(k=0;k<f;k++)se[d[h+k]]++;for(X=F,z=15;1<=z&&se[z]===0;z--);if(z<X&&(X=z),z===0)return p[m++]=20971520,p[m++]=20971520,y.bits=1,0;for(R=1;R<z&&se[R]===0;R++);for(X<R&&(X=R),I=H=1;I<=15;I++)if(H<<=1,(H-=se[I])<0)return-1;if(0<H&&(u===0||z!==1))return-1;for(fe[1]=0,I=1;I<15;I++)fe[I+1]=fe[I]+se[I];for(k=0;k<f;k++)d[h+k]!==0&&(_[fe[d[h+k]]++]=k);if(C=u===0?(ee=ve=_,19):u===1?(ee=o,ye-=257,ve=a,Oe-=257,256):(ee=l,ve=c,-1),I=R,T=m,j=k=V=0,E=-1,w=(Q=1<<(G=X))-1,u===1&&852<Q||u===2&&592<Q)return 1;for(;;){for(P=I-j,N=_[k]<C?(M=0,_[k]):_[k]>C?(M=ve[Oe+_[k]],ee[ye+_[k]]):(M=96,0),x=1<<I-j,R=b=1<<G;p[T+(V>>j)+(b-=x)]=P<<24|M<<16|N|0,b!==0;);for(x=1<<I-1;V&x;)x>>=1;if(x!==0?(V&=x-1,V+=x):V=0,k++,--se[I]==0){if(I===z)break;I=d[h+_[k]]}if(X<I&&(V&w)!==E){for(j===0&&(j=X),T+=R,H=1<<(G=I-j);G+j<z&&!((H-=se[G+j])<=0);)G++,H<<=1;if(Q+=1<<G,u===1&&852<Q||u===2&&592<Q)return 1;p[E=V&w]=X<<24|G<<16|T-m|0}}return V!==0&&(p[T+V]=I-j<<24|64<<16|0),y.bits=X,0}},{"../utils/common":41}],51:[function(n,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,i){var s=n("../utils/common"),o=0,a=1;function l(Y){for(var ne=Y.length;0<=--ne;)Y[ne]=0}var c=0,u=29,d=256,h=d+1+u,f=30,p=19,m=2*h+1,_=15,y=16,x=7,b=256,E=16,w=17,T=18,C=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],P=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],N=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],F=new Array(2*(h+2));l(F);var I=new Array(2*f);l(I);var k=new Array(512);l(k);var R=new Array(256);l(R);var z=new Array(u);l(z);var X,G,j,H=new Array(f);function Q(Y,ne,me,he,de){this.static_tree=Y,this.extra_bits=ne,this.extra_base=me,this.elems=he,this.max_length=de,this.has_stree=Y&&Y.length}function V(Y,ne){this.dyn_tree=Y,this.max_code=0,this.stat_desc=ne}function ee(Y){return Y<256?k[Y]:k[256+(Y>>>7)]}function ye(Y,ne){Y.pending_buf[Y.pending++]=255&ne,Y.pending_buf[Y.pending++]=ne>>>8&255}function se(Y,ne,me){Y.bi_valid>y-me?(Y.bi_buf|=ne<<Y.bi_valid&65535,ye(Y,Y.bi_buf),Y.bi_buf=ne>>y-Y.bi_valid,Y.bi_valid+=me-y):(Y.bi_buf|=ne<<Y.bi_valid&65535,Y.bi_valid+=me)}function fe(Y,ne,me){se(Y,me[2*ne],me[2*ne+1])}function ve(Y,ne){for(var me=0;me|=1&Y,Y>>>=1,me<<=1,0<--ne;);return me>>>1}function Oe(Y,ne,me){var he,de,Ae=new Array(_+1),De=0;for(he=1;he<=_;he++)Ae[he]=De=De+me[he-1]<<1;for(de=0;de<=ne;de++){var Be=Y[2*de+1];Be!==0&&(Y[2*de]=ve(Ae[Be]++,Be))}}function ae(Y){var ne;for(ne=0;ne<h;ne++)Y.dyn_ltree[2*ne]=0;for(ne=0;ne<f;ne++)Y.dyn_dtree[2*ne]=0;for(ne=0;ne<p;ne++)Y.bl_tree[2*ne]=0;Y.dyn_ltree[2*b]=1,Y.opt_len=Y.static_len=0,Y.last_lit=Y.matches=0}function ue(Y){8<Y.bi_valid?ye(Y,Y.bi_buf):0<Y.bi_valid&&(Y.pending_buf[Y.pending++]=Y.bi_buf),Y.bi_buf=0,Y.bi_valid=0}function Ce(Y,ne,me,he){var de=2*ne,Ae=2*me;return Y[de]<Y[Ae]||Y[de]===Y[Ae]&&he[ne]<=he[me]}function pe(Y,ne,me){for(var he=Y.heap[me],de=me<<1;de<=Y.heap_len&&(de<Y.heap_len&&Ce(ne,Y.heap[de+1],Y.heap[de],Y.depth)&&de++,!Ce(ne,he,Y.heap[de],Y.depth));)Y.heap[me]=Y.heap[de],me=de,de<<=1;Y.heap[me]=he}function ke(Y,ne,me){var he,de,Ae,De,Be=0;if(Y.last_lit!==0)for(;he=Y.pending_buf[Y.d_buf+2*Be]<<8|Y.pending_buf[Y.d_buf+2*Be+1],de=Y.pending_buf[Y.l_buf+Be],Be++,he===0?fe(Y,de,ne):(fe(Y,(Ae=R[de])+d+1,ne),(De=C[Ae])!==0&&se(Y,de-=z[Ae],De),fe(Y,Ae=ee(--he),me),(De=P[Ae])!==0&&se(Y,he-=H[Ae],De)),Be<Y.last_lit;);fe(Y,b,ne)}function Re(Y,ne){var me,he,de,Ae=ne.dyn_tree,De=ne.stat_desc.static_tree,Be=ne.stat_desc.has_stree,tt=ne.stat_desc.elems,St=-1;for(Y.heap_len=0,Y.heap_max=m,me=0;me<tt;me++)Ae[2*me]!==0?(Y.heap[++Y.heap_len]=St=me,Y.depth[me]=0):Ae[2*me+1]=0;for(;Y.heap_len<2;)Ae[2*(de=Y.heap[++Y.heap_len]=St<2?++St:0)]=1,Y.depth[de]=0,Y.opt_len--,Be&&(Y.static_len-=De[2*de+1]);for(ne.max_code=St,me=Y.heap_len>>1;1<=me;me--)pe(Y,Ae,me);for(de=tt;me=Y.heap[1],Y.heap[1]=Y.heap[Y.heap_len--],pe(Y,Ae,1),he=Y.heap[1],Y.heap[--Y.heap_max]=me,Y.heap[--Y.heap_max]=he,Ae[2*de]=Ae[2*me]+Ae[2*he],Y.depth[de]=(Y.depth[me]>=Y.depth[he]?Y.depth[me]:Y.depth[he])+1,Ae[2*me+1]=Ae[2*he+1]=de,Y.heap[1]=de++,pe(Y,Ae,1),2<=Y.heap_len;);Y.heap[--Y.heap_max]=Y.heap[1],function(be,we){var qe,gt,Bt,Ie,It,Ve,Ye=we.dyn_tree,ft=we.max_code,kt=we.stat_desc.static_tree,vn=we.stat_desc.has_stree,zn=we.stat_desc.extra_bits,Kn=we.stat_desc.extra_base,ur=we.stat_desc.max_length,le=0;for(Ie=0;Ie<=_;Ie++)be.bl_count[Ie]=0;for(Ye[2*be.heap[be.heap_max]+1]=0,qe=be.heap_max+1;qe<m;qe++)ur<(Ie=Ye[2*Ye[2*(gt=be.heap[qe])+1]+1]+1)&&(Ie=ur,le++),Ye[2*gt+1]=Ie,ft<gt||(be.bl_count[Ie]++,It=0,Kn<=gt&&(It=zn[gt-Kn]),Ve=Ye[2*gt],be.opt_len+=Ve*(Ie+It),vn&&(be.static_len+=Ve*(kt[2*gt+1]+It)));if(le!==0){do{for(Ie=ur-1;be.bl_count[Ie]===0;)Ie--;be.bl_count[Ie]--,be.bl_count[Ie+1]+=2,be.bl_count[ur]--,le-=2}while(0<le);for(Ie=ur;Ie!==0;Ie--)for(gt=be.bl_count[Ie];gt!==0;)ft<(Bt=be.heap[--qe])||(Ye[2*Bt+1]!==Ie&&(be.opt_len+=(Ie-Ye[2*Bt+1])*Ye[2*Bt],Ye[2*Bt+1]=Ie),gt--)}}(Y,ne),Oe(Ae,St,Y.bl_count)}function B(Y,ne,me){var he,de,Ae=-1,De=ne[1],Be=0,tt=7,St=4;for(De===0&&(tt=138,St=3),ne[2*(me+1)+1]=65535,he=0;he<=me;he++)de=De,De=ne[2*(he+1)+1],++Be<tt&&de===De||(Be<St?Y.bl_tree[2*de]+=Be:de!==0?(de!==Ae&&Y.bl_tree[2*de]++,Y.bl_tree[2*E]++):Be<=10?Y.bl_tree[2*w]++:Y.bl_tree[2*T]++,Ae=de,St=(Be=0)===De?(tt=138,3):de===De?(tt=6,3):(tt=7,4))}function oe(Y,ne,me){var he,de,Ae=-1,De=ne[1],Be=0,tt=7,St=4;for(De===0&&(tt=138,St=3),he=0;he<=me;he++)if(de=De,De=ne[2*(he+1)+1],!(++Be<tt&&de===De)){if(Be<St)for(;fe(Y,de,Y.bl_tree),--Be!=0;);else de!==0?(de!==Ae&&(fe(Y,de,Y.bl_tree),Be--),fe(Y,E,Y.bl_tree),se(Y,Be-3,2)):Be<=10?(fe(Y,w,Y.bl_tree),se(Y,Be-3,3)):(fe(Y,T,Y.bl_tree),se(Y,Be-11,7));Ae=de,St=(Be=0)===De?(tt=138,3):de===De?(tt=6,3):(tt=7,4)}}l(H);var ie=!1;function q(Y,ne,me,he){se(Y,(c<<1)+(he?1:0),3),function(de,Ae,De,Be){ue(de),Be&&(ye(de,De),ye(de,~De)),s.arraySet(de.pending_buf,de.window,Ae,De,de.pending),de.pending+=De}(Y,ne,me,!0)}i._tr_init=function(Y){ie||(function(){var ne,me,he,de,Ae,De=new Array(_+1);for(de=he=0;de<u-1;de++)for(z[de]=he,ne=0;ne<1<<C[de];ne++)R[he++]=de;for(R[he-1]=de,de=Ae=0;de<16;de++)for(H[de]=Ae,ne=0;ne<1<<P[de];ne++)k[Ae++]=de;for(Ae>>=7;de<f;de++)for(H[de]=Ae<<7,ne=0;ne<1<<P[de]-7;ne++)k[256+Ae++]=de;for(me=0;me<=_;me++)De[me]=0;for(ne=0;ne<=143;)F[2*ne+1]=8,ne++,De[8]++;for(;ne<=255;)F[2*ne+1]=9,ne++,De[9]++;for(;ne<=279;)F[2*ne+1]=7,ne++,De[7]++;for(;ne<=287;)F[2*ne+1]=8,ne++,De[8]++;for(Oe(F,h+1,De),ne=0;ne<f;ne++)I[2*ne+1]=5,I[2*ne]=ve(ne,5);X=new Q(F,C,d+1,h,_),G=new Q(I,P,0,f,_),j=new Q(new Array(0),M,0,p,x)}(),ie=!0),Y.l_desc=new V(Y.dyn_ltree,X),Y.d_desc=new V(Y.dyn_dtree,G),Y.bl_desc=new V(Y.bl_tree,j),Y.bi_buf=0,Y.bi_valid=0,ae(Y)},i._tr_stored_block=q,i._tr_flush_block=function(Y,ne,me,he){var de,Ae,De=0;0<Y.level?(Y.strm.data_type===2&&(Y.strm.data_type=function(Be){var tt,St=4093624447;for(tt=0;tt<=31;tt++,St>>>=1)if(1&St&&Be.dyn_ltree[2*tt]!==0)return o;if(Be.dyn_ltree[18]!==0||Be.dyn_ltree[20]!==0||Be.dyn_ltree[26]!==0)return a;for(tt=32;tt<d;tt++)if(Be.dyn_ltree[2*tt]!==0)return a;return o}(Y)),Re(Y,Y.l_desc),Re(Y,Y.d_desc),De=function(Be){var tt;for(B(Be,Be.dyn_ltree,Be.l_desc.max_code),B(Be,Be.dyn_dtree,Be.d_desc.max_code),Re(Be,Be.bl_desc),tt=p-1;3<=tt&&Be.bl_tree[2*N[tt]+1]===0;tt--);return Be.opt_len+=3*(tt+1)+5+5+4,tt}(Y),de=Y.opt_len+3+7>>>3,(Ae=Y.static_len+3+7>>>3)<=de&&(de=Ae)):de=Ae=me+5,me+4<=de&&ne!==-1?q(Y,ne,me,he):Y.strategy===4||Ae===de?(se(Y,2+(he?1:0),3),ke(Y,F,I)):(se(Y,4+(he?1:0),3),function(Be,tt,St,be){var we;for(se(Be,tt-257,5),se(Be,St-1,5),se(Be,be-4,4),we=0;we<be;we++)se(Be,Be.bl_tree[2*N[we]+1],3);oe(Be,Be.dyn_ltree,tt-1),oe(Be,Be.dyn_dtree,St-1)}(Y,Y.l_desc.max_code+1,Y.d_desc.max_code+1,De+1),ke(Y,Y.dyn_ltree,Y.dyn_dtree)),ae(Y),he&&ue(Y)},i._tr_tally=function(Y,ne,me){return Y.pending_buf[Y.d_buf+2*Y.last_lit]=ne>>>8&255,Y.pending_buf[Y.d_buf+2*Y.last_lit+1]=255&ne,Y.pending_buf[Y.l_buf+Y.last_lit]=255&me,Y.last_lit++,ne===0?Y.dyn_ltree[2*me]++:(Y.matches++,ne--,Y.dyn_ltree[2*(R[me]+d+1)]++,Y.dyn_dtree[2*ee(ne)]++),Y.last_lit===Y.lit_bufsize-1},i._tr_align=function(Y){se(Y,2,3),fe(Y,b,F),function(ne){ne.bi_valid===16?(ye(ne,ne.bi_buf),ne.bi_buf=0,ne.bi_valid=0):8<=ne.bi_valid&&(ne.pending_buf[ne.pending++]=255&ne.bi_buf,ne.bi_buf>>=8,ne.bi_valid-=8)}(Y)}},{"../utils/common":41}],53:[function(n,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,i){(function(s){(function(o,a){if(!o.setImmediate){var l,c,u,d,h=1,f={},p=!1,m=o.document,_=Object.getPrototypeOf&&Object.getPrototypeOf(o);_=_&&_.setTimeout?_:o,l={}.toString.call(o.process)==="[object process]"?function(E){process.nextTick(function(){x(E)})}:function(){if(o.postMessage&&!o.importScripts){var E=!0,w=o.onmessage;return o.onmessage=function(){E=!1},o.postMessage("","*"),o.onmessage=w,E}}()?(d="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",b,!1):o.attachEvent("onmessage",b),function(E){o.postMessage(d+E,"*")}):o.MessageChannel?((u=new MessageChannel).port1.onmessage=function(E){x(E.data)},function(E){u.port2.postMessage(E)}):m&&"onreadystatechange"in m.createElement("script")?(c=m.documentElement,function(E){var w=m.createElement("script");w.onreadystatechange=function(){x(E),w.onreadystatechange=null,c.removeChild(w),w=null},c.appendChild(w)}):function(E){setTimeout(x,0,E)},_.setImmediate=function(E){typeof E!="function"&&(E=new Function(""+E));for(var w=new Array(arguments.length-1),T=0;T<w.length;T++)w[T]=arguments[T+1];var C={callback:E,args:w};return f[h]=C,l(h),h++},_.clearImmediate=y}function y(E){delete f[E]}function x(E){if(p)setTimeout(x,0,E);else{var w=f[E];if(w){p=!0;try{(function(T){var C=T.callback,P=T.args;switch(P.length){case 0:C();break;case 1:C(P[0]);break;case 2:C(P[0],P[1]);break;case 3:C(P[0],P[1],P[2]);break;default:C.apply(a,P)}})(w)}finally{y(E),p=!1}}}}function b(E){E.source===o&&typeof E.data=="string"&&E.data.indexOf(d)===0&&x(+E.data.slice(d.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Pi<"u"?Pi:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(MJ);var PHe=MJ.exports;const GD=Ad(PHe),Su="z0, z1, z2, z3, z4, z5, z6, z7, z8, z9, z10",uh="z0_, z1_, z2_, z3_, z4_, z5_, z6_, z7_, z8_, z9_, z10_",dG=.05;var Je;(function(t){t[t.BACKSPACE=8]="BACKSPACE",t[t.FORM_FEED=12]="FORM_FEED",t[t.NEWLINE=10]="NEWLINE",t[t.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",t[t.TAB=9]="TAB",t[t.SPACE=32]="SPACE",t[t.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",t[t.QUOTATION_MARK=34]="QUOTATION_MARK",t[t.NUMBER_SIGN=35]="NUMBER_SIGN",t[t.DOLLAR_SIGN=36]="DOLLAR_SIGN",t[t.PERCENT_SIGN=37]="PERCENT_SIGN",t[t.AMPERSAND=38]="AMPERSAND",t[t.APOSTROPHE=39]="APOSTROPHE",t[t.LEFT_PARENTHESIS=40]="LEFT_PARENTHESIS",t[t.RIGHT_PARENTHESIS=41]="RIGHT_PARENTHESIS",t[t.ASTERISK=42]="ASTERISK",t[t.PLUS_SIGN=43]="PLUS_SIGN",t[t.COMMA=44]="COMMA",t[t.HYPHEN_MINUS=45]="HYPHEN_MINUS",t[t.FULL_STOP=46]="FULL_STOP",t[t.SOLIDUS=47]="SOLIDUS",t[t.DIGIT_ZERO=48]="DIGIT_ZERO",t[t.DIGIT_ONE=49]="DIGIT_ONE",t[t.DIGIT_TWO=50]="DIGIT_TWO",t[t.DIGIT_THREE=51]="DIGIT_THREE",t[t.DIGIT_FOUR=52]="DIGIT_FOUR",t[t.DIGIT_FIVE=53]="DIGIT_FIVE",t[t.DIGIT_SIX=54]="DIGIT_SIX",t[t.DIGIT_SEVEN=55]="DIGIT_SEVEN",t[t.DIGIT_EIGHT=56]="DIGIT_EIGHT",t[t.DIGIT_NINE=57]="DIGIT_NINE",t[t.COLON=58]="COLON",t[t.SEMICOLON=59]="SEMICOLON",t[t.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",t[t.EQUALS_SIGN=61]="EQUALS_SIGN",t[t.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",t[t.QUESTION_MARK=63]="QUESTION_MARK",t[t.COMMERCIAL_AT=64]="COMMERCIAL_AT",t[t.LATIN_CAPITAL_LETTER_A=65]="LATIN_CAPITAL_LETTER_A",t[t.LATIN_CAPITAL_LETTER_B=66]="LATIN_CAPITAL_LETTER_B",t[t.LATIN_CAPITAL_LETTER_C=67]="LATIN_CAPITAL_LETTER_C",t[t.LATIN_CAPITAL_LETTER_D=68]="LATIN_CAPITAL_LETTER_D",t[t.LATIN_CAPITAL_LETTER_E=69]="LATIN_CAPITAL_LETTER_E",t[t.LATIN_CAPITAL_LETTER_F=70]="LATIN_CAPITAL_LETTER_F",t[t.LATIN_CAPITAL_LETTER_G=71]="LATIN_CAPITAL_LETTER_G",t[t.LATIN_CAPITAL_LETTER_H=72]="LATIN_CAPITAL_LETTER_H",t[t.LATIN_CAPITAL_LETTER_I=73]="LATIN_CAPITAL_LETTER_I",t[t.LATIN_CAPITAL_LETTER_J=74]="LATIN_CAPITAL_LETTER_J",t[t.LATIN_CAPITAL_LETTER_K=75]="LATIN_CAPITAL_LETTER_K",t[t.LATIN_CAPITAL_LETTER_L=76]="LATIN_CAPITAL_LETTER_L",t[t.LATIN_CAPITAL_LETTER_M=77]="LATIN_CAPITAL_LETTER_M",t[t.LATIN_CAPITAL_LETTER_N=78]="LATIN_CAPITAL_LETTER_N",t[t.LATIN_CAPITAL_LETTER_O=79]="LATIN_CAPITAL_LETTER_O",t[t.LATIN_CAPITAL_LETTER_P=80]="LATIN_CAPITAL_LETTER_P",t[t.LATIN_CAPITAL_LETTER_Q=81]="LATIN_CAPITAL_LETTER_Q",t[t.LATIN_CAPITAL_LETTER_R=82]="LATIN_CAPITAL_LETTER_R",t[t.LATIN_CAPITAL_LETTER_S=83]="LATIN_CAPITAL_LETTER_S",t[t.LATIN_CAPITAL_LETTER_T=84]="LATIN_CAPITAL_LETTER_T",t[t.LATIN_CAPITAL_LETTER_U=85]="LATIN_CAPITAL_LETTER_U",t[t.LATIN_CAPITAL_LETTER_V=86]="LATIN_CAPITAL_LETTER_V",t[t.LATIN_CAPITAL_LETTER_W=87]="LATIN_CAPITAL_LETTER_W",t[t.LATIN_CAPITAL_LETTER_X=88]="LATIN_CAPITAL_LETTER_X",t[t.LATIN_CAPITAL_LETTER_Y=89]="LATIN_CAPITAL_LETTER_Y",t[t.LATIN_CAPITAL_LETTER_Z=90]="LATIN_CAPITAL_LETTER_Z",t[t.LEFT_SQUARE_BRACKET=91]="LEFT_SQUARE_BRACKET",t[t.REVERSE_SOLIDUS=92]="REVERSE_SOLIDUS",t[t.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",t[t.CIRCUMFLEX_ACCENT=94]="CIRCUMFLEX_ACCENT",t[t.LOW_LINE=95]="LOW_LINE",t[t.GRAVE_ACCENT=96]="GRAVE_ACCENT",t[t.LATIN_SMALL_LETTER_A=97]="LATIN_SMALL_LETTER_A",t[t.LATIN_SMALL_LETTER_B=98]="LATIN_SMALL_LETTER_B",t[t.LATIN_SMALL_LETTER_C=99]="LATIN_SMALL_LETTER_C",t[t.LATIN_SMALL_LETTER_D=100]="LATIN_SMALL_LETTER_D",t[t.LATIN_SMALL_LETTER_E=101]="LATIN_SMALL_LETTER_E",t[t.LATIN_SMALL_LETTER_F=102]="LATIN_SMALL_LETTER_F",t[t.LATIN_SMALL_LETTER_G=103]="LATIN_SMALL_LETTER_G",t[t.LATIN_SMALL_LETTER_H=104]="LATIN_SMALL_LETTER_H",t[t.LATIN_SMALL_LETTER_I=105]="LATIN_SMALL_LETTER_I",t[t.LATIN_SMALL_LETTER_J=106]="LATIN_SMALL_LETTER_J",t[t.LATIN_SMALL_LETTER_K=107]="LATIN_SMALL_LETTER_K",t[t.LATIN_SMALL_LETTER_L=108]="LATIN_SMALL_LETTER_L",t[t.LATIN_SMALL_LETTER_M=109]="LATIN_SMALL_LETTER_M",t[t.LATIN_SMALL_LETTER_N=110]="LATIN_SMALL_LETTER_N",t[t.LATIN_SMALL_LETTER_O=111]="LATIN_SMALL_LETTER_O",t[t.LATIN_SMALL_LETTER_P=112]="LATIN_SMALL_LETTER_P",t[t.LATIN_SMALL_LETTER_Q=113]="LATIN_SMALL_LETTER_Q",t[t.LATIN_SMALL_LETTER_R=114]="LATIN_SMALL_LETTER_R",t[t.LATIN_SMALL_LETTER_S=115]="LATIN_SMALL_LETTER_S",t[t.LATIN_SMALL_LETTER_T=116]="LATIN_SMALL_LETTER_T",t[t.LATIN_SMALL_LETTER_U=117]="LATIN_SMALL_LETTER_U",t[t.LATIN_SMALL_LETTER_V=118]="LATIN_SMALL_LETTER_V",t[t.LATIN_SMALL_LETTER_W=119]="LATIN_SMALL_LETTER_W",t[t.LATIN_SMALL_LETTER_X=120]="LATIN_SMALL_LETTER_X",t[t.LATIN_SMALL_LETTER_Y=121]="LATIN_SMALL_LETTER_Y",t[t.LATIN_SMALL_LETTER_Z=122]="LATIN_SMALL_LETTER_Z",t[t.LEFT_CURLY_BRACKET=123]="LEFT_CURLY_BRACKET",t[t.VERTICAL_LINE=124]="VERTICAL_LINE",t[t.RIGHT_CURLY_BRACKET=125]="RIGHT_CURLY_BRACKET",t[t.TILDE=126]="TILDE"})(Je||(Je={}));const IHe={[Je.QUOTATION_MARK]:Je.QUOTATION_MARK,[Je.REVERSE_SOLIDUS]:Je.REVERSE_SOLIDUS,[Je.SOLIDUS]:Je.SOLIDUS,[Je.LATIN_SMALL_LETTER_B]:Je.BACKSPACE,[Je.LATIN_SMALL_LETTER_F]:Je.FORM_FEED,[Je.LATIN_SMALL_LETTER_N]:Je.NEWLINE,[Je.LATIN_SMALL_LETTER_R]:Je.CARRIAGE_RETURN,[Je.LATIN_SMALL_LETTER_T]:Je.TAB};class hG{constructor(){this.decoder=new TextDecoder("utf-8"),this.strings=[],this.byteLength=0}appendChar(e){this.strings.push(String.fromCharCode(e)),this.byteLength+=1}appendBuf(e,n=0,r=e.length){this.strings.push(this.decoder.decode(e.subarray(n,r))),this.byteLength+=r-n}reset(){this.strings=[],this.byteLength=0}toString(){return this.strings.join("")}}class fG{constructor(e){this.decoder=new TextDecoder("utf-8"),this.bufferOffset=0,this.string="",this.byteLength=0,this.buffer=new Uint8Array(e)}appendChar(e){this.bufferOffset>=this.buffer.length&&this.flushStringBuffer(),this.buffer[this.bufferOffset++]=e,this.byteLength+=1}appendBuf(e,n=0,r=e.length){const i=r-n;this.bufferOffset+i>this.buffer.length&&this.flushStringBuffer(),this.buffer.set(e.subarray(n,r),this.bufferOffset),this.bufferOffset+=i,this.byteLength+=i}flushStringBuffer(){this.string+=this.decoder.decode(this.buffer.subarray(0,this.bufferOffset)),this.bufferOffset=0}reset(){this.string="",this.bufferOffset=0,this.byteLength=0}toString(){return this.flushStringBuffer(),this.string}}var hO;(function(t){t[t.LEFT_BRACE=0]="LEFT_BRACE",t[t.RIGHT_BRACE=1]="RIGHT_BRACE",t[t.LEFT_BRACKET=2]="LEFT_BRACKET",t[t.RIGHT_BRACKET=3]="RIGHT_BRACKET",t[t.COLON=4]="COLON",t[t.COMMA=5]="COMMA",t[t.TRUE=6]="TRUE",t[t.FALSE=7]="FALSE",t[t.NULL=8]="NULL",t[t.STRING=9]="STRING",t[t.NUMBER=10]="NUMBER",t[t.SEPARATOR=11]="SEPARATOR"})(hO||(hO={}));const _n=hO;var He;(function(t){t[t.START=0]="START",t[t.ENDED=1]="ENDED",t[t.ERROR=2]="ERROR",t[t.TRUE1=3]="TRUE1",t[t.TRUE2=4]="TRUE2",t[t.TRUE3=5]="TRUE3",t[t.FALSE1=6]="FALSE1",t[t.FALSE2=7]="FALSE2",t[t.FALSE3=8]="FALSE3",t[t.FALSE4=9]="FALSE4",t[t.NULL1=10]="NULL1",t[t.NULL2=11]="NULL2",t[t.NULL3=12]="NULL3",t[t.STRING_DEFAULT=13]="STRING_DEFAULT",t[t.STRING_AFTER_BACKSLASH=14]="STRING_AFTER_BACKSLASH",t[t.STRING_UNICODE_DIGIT_1=15]="STRING_UNICODE_DIGIT_1",t[t.STRING_UNICODE_DIGIT_2=16]="STRING_UNICODE_DIGIT_2",t[t.STRING_UNICODE_DIGIT_3=17]="STRING_UNICODE_DIGIT_3",t[t.STRING_UNICODE_DIGIT_4=18]="STRING_UNICODE_DIGIT_4",t[t.STRING_INCOMPLETE_CHAR=19]="STRING_INCOMPLETE_CHAR",t[t.NUMBER_AFTER_INITIAL_MINUS=20]="NUMBER_AFTER_INITIAL_MINUS",t[t.NUMBER_AFTER_INITIAL_ZERO=21]="NUMBER_AFTER_INITIAL_ZERO",t[t.NUMBER_AFTER_INITIAL_NON_ZERO=22]="NUMBER_AFTER_INITIAL_NON_ZERO",t[t.NUMBER_AFTER_FULL_STOP=23]="NUMBER_AFTER_FULL_STOP",t[t.NUMBER_AFTER_DECIMAL=24]="NUMBER_AFTER_DECIMAL",t[t.NUMBER_AFTER_E=25]="NUMBER_AFTER_E",t[t.NUMBER_AFTER_E_AND_SIGN=26]="NUMBER_AFTER_E_AND_SIGN",t[t.NUMBER_AFTER_E_AND_DIGIT=27]="NUMBER_AFTER_E_AND_DIGIT",t[t.SEPARATOR=28]="SEPARATOR",t[t.BOM_OR_START=29]="BOM_OR_START",t[t.BOM=30]="BOM"})(He||(He={}));function pG(t){return["START","ENDED","ERROR","TRUE1","TRUE2","TRUE3","FALSE1","FALSE2","FALSE3","FALSE4","NULL1","NULL2","NULL3","STRING_DEFAULT","STRING_AFTER_BACKSLASH","STRING_UNICODE_DIGIT_1","STRING_UNICODE_DIGIT_2","STRING_UNICODE_DIGIT_3","STRING_UNICODE_DIGIT_4","STRING_INCOMPLETE_CHAR","NUMBER_AFTER_INITIAL_MINUS","NUMBER_AFTER_INITIAL_ZERO","NUMBER_AFTER_INITIAL_NON_ZERO","NUMBER_AFTER_FULL_STOP","NUMBER_AFTER_DECIMAL","NUMBER_AFTER_E","NUMBER_AFTER_E_AND_SIGN","NUMBER_AFTER_E_AND_DIGIT","SEPARATOR","BOM_OR_START","BOM"][t]}const MHe={stringBufferSize:0,numberBufferSize:0,separator:void 0,emitPartialTokens:!1};class qv extends Error{constructor(e){super(e),Object.setPrototypeOf(this,qv.prototype)}}class LJ{constructor(e){this.state=He.BOM_OR_START,this.bomIndex=0,this.separatorIndex=0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.char_split_buffer=new Uint8Array(4),this.encoder=new TextEncoder,this.offset=-1,e=Object.assign(Object.assign({},MHe),e),this.emitPartialTokens=e.emitPartialTokens===!0,this.bufferedString=e.stringBufferSize&&e.stringBufferSize>4?new fG(e.stringBufferSize):new hG,this.bufferedNumber=e.numberBufferSize&&e.numberBufferSize>0?new fG(e.numberBufferSize):new hG,this.separator=e.separator,this.separatorBytes=e.separator?this.encoder.encode(e.separator):void 0}get isEnded(){return this.state===He.ENDED}write(e){try{let n;if(e instanceof Uint8Array)n=e;else if(typeof e=="string")n=this.encoder.encode(e);else if(Array.isArray(e))n=Uint8Array.from(e);else if(ArrayBuffer.isView(e))n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);else throw new TypeError("Unexpected type. The `write` function only accepts Arrays, TypedArrays and Strings.");for(let r=0;r<n.length;r+=1){const i=n[r];switch(this.state){case He.BOM_OR_START:if(e instanceof Uint8Array&&i===239){this.bom=[239,187,191],this.bomIndex+=1,this.state=He.BOM;continue}if(e instanceof Uint16Array){if(i===254){this.bom=[254,255],this.bomIndex+=1,this.state=He.BOM;continue}if(i===255){this.bom=[255,254],this.bomIndex+=1,this.state=He.BOM;continue}}if(e instanceof Uint32Array){if(i===0){this.bom=[0,0,254,255],this.bomIndex+=1,this.state=He.BOM;continue}if(i===255){this.bom=[255,254,0,0],this.bomIndex+=1,this.state=He.BOM;continue}}case He.START:if(this.offset+=1,this.separatorBytes&&i===this.separatorBytes[0]){if(this.separatorBytes.length===1){this.state=He.START,this.onToken({token:_n.SEPARATOR,value:this.separator,offset:this.offset+this.separatorBytes.length-1});continue}this.state=He.SEPARATOR;continue}if(i===Je.SPACE||i===Je.NEWLINE||i===Je.CARRIAGE_RETURN||i===Je.TAB)continue;if(i===Je.LEFT_CURLY_BRACKET){this.onToken({token:_n.LEFT_BRACE,value:"{",offset:this.offset});continue}if(i===Je.RIGHT_CURLY_BRACKET){this.onToken({token:_n.RIGHT_BRACE,value:"}",offset:this.offset});continue}if(i===Je.LEFT_SQUARE_BRACKET){this.onToken({token:_n.LEFT_BRACKET,value:"[",offset:this.offset});continue}if(i===Je.RIGHT_SQUARE_BRACKET){this.onToken({token:_n.RIGHT_BRACKET,value:"]",offset:this.offset});continue}if(i===Je.COLON){this.onToken({token:_n.COLON,value:":",offset:this.offset});continue}if(i===Je.COMMA){this.onToken({token:_n.COMMA,value:",",offset:this.offset});continue}if(i===Je.LATIN_SMALL_LETTER_T){this.state=He.TRUE1;continue}if(i===Je.LATIN_SMALL_LETTER_F){this.state=He.FALSE1;continue}if(i===Je.LATIN_SMALL_LETTER_N){this.state=He.NULL1;continue}if(i===Je.QUOTATION_MARK){this.bufferedString.reset(),this.state=He.STRING_DEFAULT;continue}if(i>=Je.DIGIT_ONE&&i<=Je.DIGIT_NINE){this.bufferedNumber.reset(),this.bufferedNumber.appendChar(i),this.state=He.NUMBER_AFTER_INITIAL_NON_ZERO;continue}if(i===Je.DIGIT_ZERO){this.bufferedNumber.reset(),this.bufferedNumber.appendChar(i),this.state=He.NUMBER_AFTER_INITIAL_ZERO;continue}if(i===Je.HYPHEN_MINUS){this.bufferedNumber.reset(),this.bufferedNumber.appendChar(i),this.state=He.NUMBER_AFTER_INITIAL_MINUS;continue}break;case He.STRING_DEFAULT:if(i===Je.QUOTATION_MARK){const o=this.bufferedString.toString();this.state=He.START,this.onToken({token:_n.STRING,value:o,offset:this.offset}),this.offset+=this.bufferedString.byteLength+1;continue}if(i===Je.REVERSE_SOLIDUS){this.state=He.STRING_AFTER_BACKSLASH;continue}if(i>=128){if(i>=194&&i<=223?this.bytes_in_sequence=2:i<=239?this.bytes_in_sequence=3:this.bytes_in_sequence=4,this.bytes_in_sequence<=n.length-r){this.bufferedString.appendBuf(n,r,r+this.bytes_in_sequence),r+=this.bytes_in_sequence-1;continue}this.bytes_remaining=r+this.bytes_in_sequence-n.length,this.char_split_buffer.set(n.subarray(r)),r=n.length-1,this.state=He.STRING_INCOMPLETE_CHAR;continue}if(i>=Je.SPACE){this.bufferedString.appendChar(i);continue}break;case He.STRING_INCOMPLETE_CHAR:this.char_split_buffer.set(n.subarray(r,r+this.bytes_remaining),this.bytes_in_sequence-this.bytes_remaining),this.bufferedString.appendBuf(this.char_split_buffer,0,this.bytes_in_sequence),r=this.bytes_remaining-1,this.state=He.STRING_DEFAULT;continue;case He.STRING_AFTER_BACKSLASH:const s=IHe[i];if(s){this.bufferedString.appendChar(s),this.state=He.STRING_DEFAULT;continue}if(i===Je.LATIN_SMALL_LETTER_U){this.unicode="",this.state=He.STRING_UNICODE_DIGIT_1;continue}break;case He.STRING_UNICODE_DIGIT_1:case He.STRING_UNICODE_DIGIT_2:case He.STRING_UNICODE_DIGIT_3:if(i>=Je.DIGIT_ZERO&&i<=Je.DIGIT_NINE||i>=Je.LATIN_CAPITAL_LETTER_A&&i<=Je.LATIN_CAPITAL_LETTER_F||i>=Je.LATIN_SMALL_LETTER_A&&i<=Je.LATIN_SMALL_LETTER_F){this.unicode+=String.fromCharCode(i),this.state+=1;continue}break;case He.STRING_UNICODE_DIGIT_4:if(i>=Je.DIGIT_ZERO&&i<=Je.DIGIT_NINE||i>=Je.LATIN_CAPITAL_LETTER_A&&i<=Je.LATIN_CAPITAL_LETTER_F||i>=Je.LATIN_SMALL_LETTER_A&&i<=Je.LATIN_SMALL_LETTER_F){const o=parseInt(this.unicode+String.fromCharCode(i),16);this.highSurrogate===void 0?o>=55296&&o<=56319?this.highSurrogate=o:this.bufferedString.appendBuf(this.encoder.encode(String.fromCharCode(o))):(o>=56320&&o<=57343?this.bufferedString.appendBuf(this.encoder.encode(String.fromCharCode(this.highSurrogate,o))):this.bufferedString.appendBuf(this.encoder.encode(String.fromCharCode(this.highSurrogate))),this.highSurrogate=void 0),this.state=He.STRING_DEFAULT;continue}break;case He.NUMBER_AFTER_INITIAL_MINUS:if(i===Je.DIGIT_ZERO){this.bufferedNumber.appendChar(i),this.state=He.NUMBER_AFTER_INITIAL_ZERO;continue}if(i>=Je.DIGIT_ONE&&i<=Je.DIGIT_NINE){this.bufferedNumber.appendChar(i),this.state=He.NUMBER_AFTER_INITIAL_NON_ZERO;continue}break;case He.NUMBER_AFTER_INITIAL_ZERO:if(i===Je.FULL_STOP){this.bufferedNumber.appendChar(i),this.state=He.NUMBER_AFTER_FULL_STOP;continue}if(i===Je.LATIN_SMALL_LETTER_E||i===Je.LATIN_CAPITAL_LETTER_E){this.bufferedNumber.appendChar(i),this.state=He.NUMBER_AFTER_E;continue}r-=1,this.state=He.START,this.emitNumber();continue;case He.NUMBER_AFTER_INITIAL_NON_ZERO:if(i>=Je.DIGIT_ZERO&&i<=Je.DIGIT_NINE){this.bufferedNumber.appendChar(i);continue}if(i===Je.FULL_STOP){this.bufferedNumber.appendChar(i),this.state=He.NUMBER_AFTER_FULL_STOP;continue}if(i===Je.LATIN_SMALL_LETTER_E||i===Je.LATIN_CAPITAL_LETTER_E){this.bufferedNumber.appendChar(i),this.state=He.NUMBER_AFTER_E;continue}r-=1,this.state=He.START,this.emitNumber();continue;case He.NUMBER_AFTER_FULL_STOP:if(i>=Je.DIGIT_ZERO&&i<=Je.DIGIT_NINE){this.bufferedNumber.appendChar(i),this.state=He.NUMBER_AFTER_DECIMAL;continue}break;case He.NUMBER_AFTER_DECIMAL:if(i>=Je.DIGIT_ZERO&&i<=Je.DIGIT_NINE){this.bufferedNumber.appendChar(i);continue}if(i===Je.LATIN_SMALL_LETTER_E||i===Je.LATIN_CAPITAL_LETTER_E){this.bufferedNumber.appendChar(i),this.state=He.NUMBER_AFTER_E;continue}r-=1,this.state=He.START,this.emitNumber();continue;case He.NUMBER_AFTER_E:if(i===Je.PLUS_SIGN||i===Je.HYPHEN_MINUS){this.bufferedNumber.appendChar(i),this.state=He.NUMBER_AFTER_E_AND_SIGN;continue}case He.NUMBER_AFTER_E_AND_SIGN:if(i>=Je.DIGIT_ZERO&&i<=Je.DIGIT_NINE){this.bufferedNumber.appendChar(i),this.state=He.NUMBER_AFTER_E_AND_DIGIT;continue}break;case He.NUMBER_AFTER_E_AND_DIGIT:if(i>=Je.DIGIT_ZERO&&i<=Je.DIGIT_NINE){this.bufferedNumber.appendChar(i);continue}r-=1,this.state=He.START,this.emitNumber();continue;case He.TRUE1:if(i===Je.LATIN_SMALL_LETTER_R){this.state=He.TRUE2;continue}break;case He.TRUE2:if(i===Je.LATIN_SMALL_LETTER_U){this.state=He.TRUE3;continue}break;case He.TRUE3:if(i===Je.LATIN_SMALL_LETTER_E){this.state=He.START,this.onToken({token:_n.TRUE,value:!0,offset:this.offset}),this.offset+=3;continue}break;case He.FALSE1:if(i===Je.LATIN_SMALL_LETTER_A){this.state=He.FALSE2;continue}break;case He.FALSE2:if(i===Je.LATIN_SMALL_LETTER_L){this.state=He.FALSE3;continue}break;case He.FALSE3:if(i===Je.LATIN_SMALL_LETTER_S){this.state=He.FALSE4;continue}break;case He.FALSE4:if(i===Je.LATIN_SMALL_LETTER_E){this.state=He.START,this.onToken({token:_n.FALSE,value:!1,offset:this.offset}),this.offset+=4;continue}break;case He.NULL1:if(i===Je.LATIN_SMALL_LETTER_U){this.state=He.NULL2;continue}break;case He.NULL2:if(i===Je.LATIN_SMALL_LETTER_L){this.state=He.NULL3;continue}break;case He.NULL3:if(i===Je.LATIN_SMALL_LETTER_L){this.state=He.START,this.onToken({token:_n.NULL,value:null,offset:this.offset}),this.offset+=3;continue}break;case He.SEPARATOR:if(this.separatorIndex+=1,!this.separatorBytes||i!==this.separatorBytes[this.separatorIndex])break;this.separatorIndex===this.separatorBytes.length-1&&(this.state=He.START,this.onToken({token:_n.SEPARATOR,value:this.separator,offset:this.offset+this.separatorIndex}),this.separatorIndex=0);continue;case He.BOM:if(i===this.bom[this.bomIndex]){if(this.bomIndex===this.bom.length-1){this.state=He.START,this.bom=void 0,this.bomIndex=0;continue}this.bomIndex+=1;continue}break;case He.ENDED:if(i===Je.SPACE||i===Je.NEWLINE||i===Je.CARRIAGE_RETURN||i===Je.TAB)continue}throw new qv(`Unexpected "${String.fromCharCode(i)}" at position "${r}" in state ${pG(this.state)}`)}if(this.emitPartialTokens)switch(this.state){case He.TRUE1:case He.TRUE2:case He.TRUE3:this.onToken({token:_n.TRUE,value:!0,offset:this.offset,partial:!0});break;case He.FALSE1:case He.FALSE2:case He.FALSE3:case He.FALSE4:this.onToken({token:_n.FALSE,value:!1,offset:this.offset,partial:!0});break;case He.NULL1:case He.NULL2:case He.NULL3:this.onToken({token:_n.NULL,value:null,offset:this.offset,partial:!0});break;case He.STRING_DEFAULT:{const r=this.bufferedString.toString();this.onToken({token:_n.STRING,value:r,offset:this.offset,partial:!0});break}case He.NUMBER_AFTER_INITIAL_ZERO:case He.NUMBER_AFTER_INITIAL_NON_ZERO:case He.NUMBER_AFTER_DECIMAL:case He.NUMBER_AFTER_E_AND_DIGIT:try{this.onToken({token:_n.NUMBER,value:this.parseNumber(this.bufferedNumber.toString()),offset:this.offset,partial:!0})}catch{}}}catch(n){this.error(n)}}emitNumber(){this.onToken({token:_n.NUMBER,value:this.parseNumber(this.bufferedNumber.toString()),offset:this.offset}),this.offset+=this.bufferedNumber.byteLength-1}parseNumber(e){return Number(e)}error(e){this.state!==He.ENDED&&(this.state=He.ERROR),this.onError(e)}end(){switch(this.state){case He.NUMBER_AFTER_INITIAL_ZERO:case He.NUMBER_AFTER_INITIAL_NON_ZERO:case He.NUMBER_AFTER_DECIMAL:case He.NUMBER_AFTER_E_AND_DIGIT:this.state=He.ENDED,this.emitNumber(),this.onEnd();break;case He.BOM_OR_START:case He.START:case He.ERROR:case He.SEPARATOR:this.state=He.ENDED,this.onEnd();break;default:this.error(new qv(`Tokenizer ended in the middle of a token (state: ${pG(this.state)}). Either not all the data was received or the data was invalid.`))}}onToken(e){throw new qv(`Can't emit tokens before the "onToken" callback has been set up.`)}onError(e){throw e}onEnd(){}}var xs;(function(t){t[t.OBJECT=0]="OBJECT",t[t.ARRAY=1]="ARRAY"})(xs||(xs={}));var Wn;(function(t){t[t.VALUE=0]="VALUE",t[t.KEY=1]="KEY",t[t.COLON=2]="COLON",t[t.COMMA=3]="COMMA",t[t.ENDED=4]="ENDED",t[t.ERROR=5]="ERROR",t[t.SEPARATOR=6]="SEPARATOR"})(Wn||(Wn={}));function mG(t){return["VALUE","KEY","COLON","COMMA","ENDED","ERROR","SEPARATOR"][t]}const LHe={paths:void 0,keepStack:!0,separator:void 0,emitPartialValues:!1};class om extends Error{constructor(e){super(e),Object.setPrototypeOf(this,om.prototype)}}class OJ{constructor(e){this.state=Wn.VALUE,this.mode=void 0,this.key=void 0,this.value=void 0,this.stack=[],e=Object.assign(Object.assign({},LHe),e),e.paths&&(this.paths=e.paths.map(n=>{if(n===void 0||n==="$*")return;if(!n.startsWith("$"))throw new om(`Invalid selector "${n}". Should start with "$".`);const r=n.split(".").slice(1);if(r.includes(""))throw new om(`Invalid selector "${n}". ".." syntax not supported.`);return r})),this.keepStack=e.keepStack||!1,this.separator=e.separator,e.emitPartialValues||(this.emitPartial=()=>{})}shouldEmit(){return this.paths?this.paths.some(e=>{var n;if(e===void 0)return!0;if(e.length!==this.stack.length)return!1;for(let i=0;i<e.length-1;i++){const s=e[i],o=this.stack[i+1].key;if(s!=="*"&&s!==o)return!1}const r=e[e.length-1];return r==="*"?!0:r===((n=this.key)===null||n===void 0?void 0:n.toString())}):!0}push(){this.stack.push({key:this.key,value:this.value,mode:this.mode,emit:this.shouldEmit()})}pop(){const e=this.value;let n;({key:this.key,value:this.value,mode:this.mode,emit:n}=this.stack.pop()),this.state=this.mode!==void 0?Wn.COMMA:Wn.VALUE,this.emit(e,n)}emit(e,n){!this.keepStack&&this.value&&this.stack.every(r=>!r.emit)&&delete this.value[this.key],n&&this.onValue({value:e,key:this.key,parent:this.value,stack:this.stack}),this.stack.length===0&&(this.separator?this.state=Wn.SEPARATOR:this.separator===void 0&&this.end())}emitPartial(e){if(this.shouldEmit()){if(this.state===Wn.KEY){this.onValue({value:void 0,key:e,parent:this.value,stack:this.stack,partial:!0});return}this.onValue({value:e,key:this.key,parent:this.value,stack:this.stack,partial:!0})}}get isEnded(){return this.state===Wn.ENDED}write({token:e,value:n,partial:r}){try{if(r){this.emitPartial(n);return}if(this.state===Wn.VALUE){if(e===_n.STRING||e===_n.NUMBER||e===_n.TRUE||e===_n.FALSE||e===_n.NULL){this.mode===xs.OBJECT?(this.value[this.key]=n,this.state=Wn.COMMA):this.mode===xs.ARRAY&&(this.value.push(n),this.state=Wn.COMMA),this.emit(n,this.shouldEmit());return}if(e===_n.LEFT_BRACE){if(this.push(),this.mode===xs.OBJECT)this.value=this.value[this.key]={};else if(this.mode===xs.ARRAY){const i={};this.value.push(i),this.value=i}else this.value={};this.mode=xs.OBJECT,this.state=Wn.KEY,this.key=void 0,this.emitPartial();return}if(e===_n.LEFT_BRACKET){if(this.push(),this.mode===xs.OBJECT)this.value=this.value[this.key]=[];else if(this.mode===xs.ARRAY){const i=[];this.value.push(i),this.value=i}else this.value=[];this.mode=xs.ARRAY,this.state=Wn.VALUE,this.key=0,this.emitPartial();return}if(this.mode===xs.ARRAY&&e===_n.RIGHT_BRACKET&&this.value.length===0){this.pop();return}}if(this.state===Wn.KEY){if(e===_n.STRING){this.key=n,this.state=Wn.COLON,this.emitPartial();return}if(e===_n.RIGHT_BRACE&&Object.keys(this.value).length===0){this.pop();return}}if(this.state===Wn.COLON&&e===_n.COLON){this.state=Wn.VALUE;return}if(this.state===Wn.COMMA){if(e===_n.COMMA){if(this.mode===xs.ARRAY){this.state=Wn.VALUE,this.key+=1;return}if(this.mode===xs.OBJECT){this.state=Wn.KEY;return}}if(e===_n.RIGHT_BRACE&&this.mode===xs.OBJECT||e===_n.RIGHT_BRACKET&&this.mode===xs.ARRAY){this.pop();return}}if(this.state===Wn.SEPARATOR&&e===_n.SEPARATOR&&n===this.separator){this.state=Wn.VALUE;return}throw new om(`Unexpected ${_n[e]} (${JSON.stringify(n)}) in state ${mG(this.state)}`)}catch(i){this.error(i)}}error(e){this.state!==Wn.ENDED&&(this.state=Wn.ERROR),this.onError(e)}end(){this.state!==Wn.VALUE&&this.state!==Wn.SEPARATOR||this.stack.length>0?this.error(new Error(`Parser ended in mid-parsing (state: ${mG(this.state)}). Either not all the data was received or the data was invalid.`)):(this.state=Wn.ENDED,this.onEnd())}onValue(e){throw new om(`Can't emit data before the "onValue" callback has been set up.`)}onError(e){throw e}onEnd(){}}class OHe{constructor(e={}){this.tokenizer=new LJ(e),this.tokenParser=new OJ(e),this.tokenizer.onToken=this.tokenParser.write.bind(this.tokenParser),this.tokenizer.onEnd=()=>{this.tokenParser.isEnded||this.tokenParser.end()},this.tokenParser.onError=this.tokenizer.error.bind(this.tokenizer),this.tokenParser.onEnd=()=>{this.tokenizer.isEnded||this.tokenizer.end()}}get isEnded(){return this.tokenizer.isEnded&&this.tokenParser.isEnded}write(e){this.tokenizer.write(e)}end(){this.tokenizer.end()}set onToken(e){this.tokenizer.onToken=n=>{e(n),this.tokenParser.write(n)}}set onValue(e){this.tokenParser.onValue=e}set onError(e){this.tokenizer.onError=e}set onEnd(e){this.tokenParser.onEnd=()=>{this.tokenizer.isEnded||this.tokenizer.end(),e.call(this.tokenParser)}}}function kJ(t){const{value:e,key:n,parent:r,stack:i,partial:s}=t;return{value:e,key:n,parent:gG(r),stack:gG(i),partial:s}}function gG(t){return typeof t!="object"||Array.isArray(t)&&t.filter(e=>e).length===0?t:JSON.parse(JSON.stringify(t))}class kHe extends OHe{constructor(e){super(e),this.onValue=n=>this.controller.enqueue(kJ(n)),this.onError=n=>this.controller.error(n),this.onEnd=()=>this.controller.terminate()}start(e){this.controller=e}transform(e){this.write(e)}flush(){this.end()}}class vG extends TransformStream{constructor(e,n,r){const i=new kHe(e);super(i,n,r)}}class NHe extends LJ{constructor(e){super(e),this.onToken=n=>this.controller.enqueue(n),this.onError=n=>this.controller.error(n),this.onEnd=()=>this.controller.terminate()}start(e){this.controller=e}transform(e){this.write(e)}flush(){this.end()}}class v9e extends TransformStream{constructor(e,n,r){const i=new NHe(e);super(i,n,r)}}class DHe extends OJ{constructor(e){super(e),this.onValue=n=>this.controller.enqueue(kJ(n)),this.onError=n=>this.controller.error(n),this.onEnd=()=>this.controller.terminate()}start(e){this.controller=e}transform(e){this.write(e)}flush(){this.end()}}class y9e extends TransformStream{constructor(e,n,r){const i=new DHe(e);super(i,n,r)}}function BHe(t,e){const n=t[0]-e[0],r=t[1]-e[1];return n*n+r*r}function FHe(t,e,n){let r=e[0],i=e[1],s=n[0]-r,o=n[1]-i;if(s!==0||o!==0){const a=((t[0]-r)*s+(t[1]-i)*o)/(s*s+o*o);a>1?(r=n[0],i=n[1]):a>0&&(r+=s*a,i+=o*a)}return s=t[0]-r,o=t[1]-i,s*s+o*o}function UHe(t,e){let n=t[0];const r=[n];let i=null;for(let s=1,o=t.length;s<o;s++)i=t[s],BHe(i,n)>e&&(r.push(i),n=i);return n!==i&&r.push(i),r}function fO(t,e,n,r,i){let s=r,o=0;for(let a=e+1;a<n;a++){const l=FHe(t[a],t[e],t[n]);l>s&&(o=a,s=l)}s>r&&(o-e>1&&fO(t,e,o,r,i),i.push(t[o]),n-o>1&&fO(t,o,n,r,i))}function zHe(t,e){const n=t.length-1,r=[t[0]];return fO(t,0,n,e,r),r.push(t[n]),r}function $He(t,e,n){if(t.length<=2)return t;const r=e!==void 0?e*e:1;return t=n?t:UHe(t,r),t=zHe(t,r),t}function ju(t,e=1e4){return Math.round((t[0]+180)*e)*(1e3*e)+Math.round((t[1]+90)*e)}function jHe(t,e){const n=[],r=t.map(o=>{const a=ju(o);return e.has(a)});let i=0,s=r[0];for(let o=1;o<=r.length;o++)(o===r.length||r[o]!==s)&&(n.push({isCached:s,startIndex:i,endIndex:o-1}),i=o,s=o<r.length?r[o]:!s);return n}function GHe(t,e,n,r){let i=0,s=0;for(;i<e.length&&s<n.length;){const o=n[s],a=ju(o),l=e[i],c=ju(l);r.set(c,a),c===a?(i++,s++):i++}return r}const yG=new Map;function _G(t,e,n,r,i){return e.map((s,o)=>s.map((a,l)=>{const c=[];return jHe(a,i).forEach((d,h)=>{if(d.isCached)for(let f=d.startIndex;f<=d.endIndex;f++){const p=a[f],m=ju(p);i.get(m)===m&&c.push(p)}else{const f=a.slice(d.startIndex,d.endIndex+1),p=$He(f,n,r);f.length>0&&p.length>0&&(ju(f[0])!==ju(p[0])&&p.unshift(f[0]),ju(f[f.length-1])!==ju(p[p.length-1])&&p.push(f[f.length-1])),c.push(...p),GHe(t,f,p,i)}}),c}).filter(a=>a.length>2)).filter(s=>s.length>0)}const xT={x:0,y:1,z:2};function NJ(t,e={}){const{start:n=0,end:r=t.length,plane:i="xy"}=e,s=e.size||2;let o=0;const a=xT[i[0]],l=xT[i[1]];for(let c=n,u=r-s;c<r;c+=s)o+=(t[c+a]-t[u+a])*(t[c+l]+t[u+l]),u=c;return o/2}function HHe(t,e,n=2,r,i="xy"){const s=e&&e.length,o=s?e[0]*n:t.length;let a=DJ(t,0,o,n,!0,r&&r[0],i);const l=[];if(!a||a.next===a.prev)return l;let c,u,d,h,f,p,m;if(s&&(a=KHe(t,e,a,n,r,i)),t.length>80*n){h=u=t[0],f=d=t[1];for(let _=n;_<o;_+=n)p=t[_],m=t[_+1],p<h&&(h=p),m<f&&(f=m),p>u&&(u=p),m>d&&(d=m);c=Math.max(u-h,d-f),c=c!==0?32767/c:0}return l1(a,l,n,h,f,c,0),l}function DJ(t,e,n,r,i,s,o){let a,l;s===void 0&&(s=NJ(t,{start:e,end:n,size:r,plane:o}));let c=xT[o[0]],u=xT[o[1]];if(i===s<0)for(a=e;a<n;a+=r)l=bG(a,t[a+c],t[a+u],l);else for(a=n-r;a>=e;a-=r)l=bG(a,t[a+c],t[a+u],l);return l&&CC(l,l.next)&&(u1(l),l=l.next),l}function wf(t,e){if(!t)return t;e||(e=t);let n=t,r;do if(r=!1,!n.steiner&&(CC(n,n.next)||Tr(n.prev,n,n.next)===0)){if(u1(n),n=e=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==e);return e}function l1(t,e,n,r,i,s,o){if(!t)return;!o&&s&&eVe(t,r,i,s);let a=t,l,c;for(;t.prev!==t.next;){if(l=t.prev,c=t.next,s?WHe(t,r,i,s):VHe(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(c.i/n|0),u1(t),t=c.next,a=c.next;continue}if(t=c,t===a){o?o===1?(t=XHe(wf(t),e,n),l1(t,e,n,r,i,s,2)):o===2&&YHe(t,e,n,r,i,s):l1(wf(t),e,n,r,i,s,1);break}}}function VHe(t){const e=t.prev,n=t,r=t.next;if(Tr(e,n,r)>=0)return!1;const i=e.x,s=n.x,o=r.x,a=e.y,l=n.y,c=r.y,u=i<s?i<o?i:o:s<o?s:o,d=a<l?a<c?a:c:l<c?l:c,h=i>s?i>o?i:o:s>o?s:o,f=a>l?a>c?a:c:l>c?l:c;let p=r.next;for(;p!==e;){if(p.x>=u&&p.x<=h&&p.y>=d&&p.y<=f&&am(i,a,s,l,o,c,p.x,p.y)&&Tr(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function WHe(t,e,n,r){const i=t.prev,s=t,o=t.next;if(Tr(i,s,o)>=0)return!1;const a=i.x,l=s.x,c=o.x,u=i.y,d=s.y,h=o.y,f=a<l?a<c?a:c:l<c?l:c,p=u<d?u<h?u:h:d<h?d:h,m=a>l?a>c?a:c:l>c?l:c,_=u>d?u>h?u:h:d>h?d:h,y=pO(f,p,e,n,r),x=pO(m,_,e,n,r);let b=t.prevZ,E=t.nextZ;for(;b&&b.z>=y&&E&&E.z<=x;){if(b.x>=f&&b.x<=m&&b.y>=p&&b.y<=_&&b!==i&&b!==o&&am(a,u,l,d,c,h,b.x,b.y)&&Tr(b.prev,b,b.next)>=0||(b=b.prevZ,E.x>=f&&E.x<=m&&E.y>=p&&E.y<=_&&E!==i&&E!==o&&am(a,u,l,d,c,h,E.x,E.y)&&Tr(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;b&&b.z>=y;){if(b.x>=f&&b.x<=m&&b.y>=p&&b.y<=_&&b!==i&&b!==o&&am(a,u,l,d,c,h,b.x,b.y)&&Tr(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;E&&E.z<=x;){if(E.x>=f&&E.x<=m&&E.y>=p&&E.y<=_&&E!==i&&E!==o&&am(a,u,l,d,c,h,E.x,E.y)&&Tr(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function XHe(t,e,n){let r=t;do{const i=r.prev,s=r.next.next;!CC(i,s)&&BJ(i,r,r.next,s)&&c1(i,s)&&c1(s,i)&&(e.push(i.i/n|0),e.push(r.i/n|0),e.push(s.i/n|0),u1(r),u1(r.next),r=t=s),r=r.next}while(r!==t);return wf(r)}function YHe(t,e,n,r,i,s){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&rVe(o,a)){let l=FJ(o,a);o=wf(o,o.next),l=wf(l,l.next),l1(o,e,n,r,i,s,0),l1(l,e,n,r,i,s,0);return}a=a.next}o=o.next}while(o!==t)}function KHe(t,e,n,r,i,s){const o=[];let a,l,c,u,d;for(a=0,l=e.length;a<l;a++)c=e[a]*r,u=a<l-1?e[a+1]*r:t.length,d=DJ(t,c,u,r,!1,i&&i[a+1],s),d===d.next&&(d.steiner=!0),o.push(nVe(d));for(o.sort(qHe),a=0;a<o.length;a++)n=ZHe(o[a],n);return n}function qHe(t,e){return t.x-e.x}function ZHe(t,e){const n=QHe(t,e);if(!n)return e;const r=FJ(n,t);return wf(r,r.next),wf(n,n.next)}function QHe(t,e){let n=e;const r=t.x,i=t.y;let s=-1/0,o;do{if(i<=n.y&&i>=n.next.y&&n.next.y!==n.y){const h=n.x+(i-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(h<=r&&h>s&&(s=h,o=n.x<n.next.x?n:n.next,h===r))return o}n=n.next}while(n!==e);if(!o)return null;const a=o,l=o.x,c=o.y;let u=1/0,d;n=o;do r>=n.x&&n.x>=l&&r!==n.x&&am(i<c?r:s,i,l,c,i<c?s:r,i,n.x,n.y)&&(d=Math.abs(i-n.y)/(r-n.x),c1(n,t)&&(d<u||d===u&&(n.x>o.x||n.x===o.x&&JHe(o,n)))&&(o=n,u=d)),n=n.next;while(n!==a);return o}function JHe(t,e){return Tr(t.prev,t,e.prev)<0&&Tr(e.next,t,t.next)<0}function eVe(t,e,n,r){let i=t;do i.z===0&&(i.z=pO(i.x,i.y,e,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,tVe(i)}function tVe(t){let e,n,r=1,i,s,o,a,l,c;do{for(s=t,t=null,c=null,i=0;s;){for(i++,a=s,o=0,n=0;n<r&&(o++,a=a.nextZ,!!a);n++);for(l=r;o>0||l>0&&a;)o!==0&&(l===0||!a||s.z<=a.z)?(e=s,s=s.nextZ,o--):(e=a,a=a.nextZ,l--),c?c.nextZ=e:t=e,e.prevZ=c,c=e;s=a}c.nextZ=null,r*=2}while(i>1);return t}function pO(t,e,n,r,i){return t=(t-n)*i|0,e=(e-r)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function nVe(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function am(t,e,n,r,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(r-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(i-o)*(r-a)}function rVe(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!iVe(t,e)&&(c1(t,e)&&c1(e,t)&&sVe(t,e)&&(Tr(t.prev,t,e.prev)||Tr(t,e.prev,e))||CC(t,e)&&Tr(t.prev,t,t.next)>0&&Tr(e.prev,e,e.next)>0)}function Tr(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function CC(t,e){return t.x===e.x&&t.y===e.y}function BJ(t,e,n,r){const i=Bx(Tr(t,e,n)),s=Bx(Tr(t,e,r)),o=Bx(Tr(n,r,t)),a=Bx(Tr(n,r,e));return!!(i!==s&&o!==a||i===0&&Dx(t,n,e)||s===0&&Dx(t,r,e)||o===0&&Dx(n,t,r)||a===0&&Dx(n,e,r))}function Dx(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Bx(t){return t>0?1:t<0?-1:0}function iVe(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&BJ(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function c1(t,e){return Tr(t.prev,t,t.next)<0?Tr(t,e,t.next)>=0&&Tr(t,t.prev,e)>=0:Tr(t,e,t.prev)<0||Tr(t,t.next,e)<0}function sVe(t,e){let n=t,r=!1;const i=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==t);return r}function FJ(t,e){const n=new mO(t.i,t.x,t.y),r=new mO(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function bG(t,e,n,r){const i=new mO(t,e,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function u1(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}class mO{constructor(e,n,r){W(this,"i",void 0),W(this,"x",void 0),W(this,"y",void 0),W(this,"prev",null),W(this,"next",null),W(this,"z",0),W(this,"prevZ",null),W(this,"nextZ",null),W(this,"steiner",!1),this.i=e,this.x=n,this.y=r}}function oVe(t,e,n){const r=aVe(t),i=Object.keys(r).filter(s=>r[s]!==Array);return lVe(t,{propArrayTypes:r,...e},{numericPropKeys:n&&n.numericPropKeys||i,PositionDataType:n?n.PositionDataType:Float32Array,triangulate:n?n.triangulate:!0})}function aVe(t){const e={};for(const n of t)if(n.properties)for(const r in n.properties){const i=n.properties[r];e[r]=pVe(i,e[r])}return e}function lVe(t,e,n){const{pointPositionsCount:r,pointFeaturesCount:i,linePositionsCount:s,linePathsCount:o,lineFeaturesCount:a,polygonPositionsCount:l,polygonObjectsCount:c,polygonRingsCount:u,polygonFeaturesCount:d,propArrayTypes:h,coordLength:f}=e,{numericPropKeys:p=[],PositionDataType:m=Float32Array,triangulate:_=!0}=n,y=t[0]&&"id"in t[0],x=t.length>65535?Uint32Array:Uint16Array,b={type:"Point",positions:new m(r*f),globalFeatureIds:new x(r),featureIds:i>65535?new Uint32Array(r):new Uint16Array(r),numericProps:{},properties:[],fields:[]},E={type:"LineString",pathIndices:s>65535?new Uint32Array(o+1):new Uint16Array(o+1),positions:new m(s*f),globalFeatureIds:new x(s),featureIds:a>65535?new Uint32Array(s):new Uint16Array(s),numericProps:{},properties:[],fields:[]},w={type:"Polygon",polygonIndices:l>65535?new Uint32Array(c+1):new Uint16Array(c+1),primitivePolygonIndices:l>65535?new Uint32Array(u+1):new Uint16Array(u+1),positions:new m(l*f),globalFeatureIds:new x(l),featureIds:d>65535?new Uint32Array(l):new Uint16Array(l),numericProps:{},properties:[],fields:[]};_&&(w.triangles=[]);for(const C of[b,E,w])for(const P of p){const M=h[P];C.numericProps[P]=new M(C.positions.length/f)}E.pathIndices[o]=s,w.polygonIndices[c]=l,w.primitivePolygonIndices[u]=l;const T={pointPosition:0,pointFeature:0,linePosition:0,linePath:0,lineFeature:0,polygonPosition:0,polygonObject:0,polygonRing:0,polygonFeature:0,feature:0};for(const C of t){const P=C.geometry,M=C.properties||{};switch(P.type){case"Point":cVe(P,b,T,f,M),b.properties.push(w2(M,p)),y&&b.fields.push({id:C.id}),T.pointFeature++;break;case"LineString":uVe(P,E,T,f,M),E.properties.push(w2(M,p)),y&&E.fields.push({id:C.id}),T.lineFeature++;break;case"Polygon":dVe(P,w,T,f,M),w.properties.push(w2(M,p)),y&&w.fields.push({id:C.id}),T.polygonFeature++;break;default:throw new Error("Invalid geometry type")}T.feature++}return fVe(b,E,w,f)}function cVe(t,e,n,r,i){e.positions.set(t.data,n.pointPosition*r);const s=t.data.length/r;HD(e,i,n.pointPosition,s),e.globalFeatureIds.fill(n.feature,n.pointPosition,n.pointPosition+s),e.featureIds.fill(n.pointFeature,n.pointPosition,n.pointPosition+s),n.pointPosition+=s}function uVe(t,e,n,r,i){e.positions.set(t.data,n.linePosition*r);const s=t.data.length/r;HD(e,i,n.linePosition,s),e.globalFeatureIds.fill(n.feature,n.linePosition,n.linePosition+s),e.featureIds.fill(n.lineFeature,n.linePosition,n.linePosition+s);for(let o=0,a=t.indices.length;o<a;++o){const l=t.indices[o],c=o===a-1?t.data.length:t.indices[o+1];e.pathIndices[n.linePath++]=n.linePosition,n.linePosition+=(c-l)/r}}function dVe(t,e,n,r,i){e.positions.set(t.data,n.polygonPosition*r);const s=t.data.length/r;HD(e,i,n.polygonPosition,s),e.globalFeatureIds.fill(n.feature,n.polygonPosition,n.polygonPosition+s),e.featureIds.fill(n.polygonFeature,n.polygonPosition,n.polygonPosition+s);for(let o=0,a=t.indices.length;o<a;++o){const l=n.polygonPosition;e.polygonIndices[n.polygonObject++]=l;const c=t.areas[o],u=t.indices[o],d=t.indices[o+1];for(let f=0,p=u.length;f<p;++f){const m=u[f],_=f===p-1?d===void 0?t.data.length:d[0]:u[f+1];e.primitivePolygonIndices[n.polygonRing++]=n.polygonPosition,n.polygonPosition+=(_-m)/r}const h=n.polygonPosition;hVe(e,c,u,{startPosition:l,endPosition:h,coordLength:r})}}function hVe(t,e,n,r){let{startPosition:i,endPosition:s,coordLength:o}=r;if(!t.triangles)return;const a=i*o,l=s*o,c=t.positions.subarray(a,l),u=n[0],d=n.slice(1).map(f=>(f-u)/o),h=HHe(c,d,o,e);for(let f=0,p=h.length;f<p;++f)t.triangles.push(i+h[f])}function E2(t,e){const n={};for(const r in t)n[r]={value:t[r],size:e};return n}function fVe(t,e,n,r){const i={shape:"binary-feature-collection",points:{...t,positions:{value:t.positions,size:r},globalFeatureIds:{value:t.globalFeatureIds,size:1},featureIds:{value:t.featureIds,size:1},numericProps:E2(t.numericProps,1)},lines:{...e,positions:{value:e.positions,size:r},pathIndices:{value:e.pathIndices,size:1},globalFeatureIds:{value:e.globalFeatureIds,size:1},featureIds:{value:e.featureIds,size:1},numericProps:E2(e.numericProps,1)},polygons:{...n,positions:{value:n.positions,size:r},polygonIndices:{value:n.polygonIndices,size:1},primitivePolygonIndices:{value:n.primitivePolygonIndices,size:1},globalFeatureIds:{value:n.globalFeatureIds,size:1},featureIds:{value:n.featureIds,size:1},numericProps:E2(n.numericProps,1)}};return i.polygons&&n.triangles&&(i.polygons.triangles={value:new Uint32Array(n.triangles),size:1}),i}function HD(t,e,n,r){for(const i in t.numericProps)if(i in e){const s=e[i];t.numericProps[i].fill(s,n,n+r)}}function w2(t,e){const n={};for(const r in t)e.includes(r)||(n[r]=t[r]);return n}function pVe(t,e){return e===Array||!Number.isFinite(t)?Array:e===Float64Array||Math.fround(t)!==t?Float64Array:Float32Array}function mVe(t){let e=0,n=0,r=0,i=0,s=0,o=0,a=0,l=0,c=0;const u=new Set;for(const d of t){const h=d.geometry;switch(h.type){case"Point":n++,e++,u.add(h.coordinates.length);break;case"MultiPoint":n++,e+=h.coordinates.length;for(const p of h.coordinates)u.add(p.length);break;case"LineString":s++,r+=h.coordinates.length,i++;for(const p of h.coordinates)u.add(p.length);break;case"MultiLineString":s++;for(const p of h.coordinates){r+=p.length,i++;for(const m of p)u.add(m.length)}break;case"Polygon":c++,a++,l+=h.coordinates.length;const f=h.coordinates.flat();o+=f.length;for(const p of f)u.add(p.length);break;case"MultiPolygon":c++;for(const p of h.coordinates){a++,l+=p.length;const m=p.flat();o+=m.length;for(const _ of m)u.add(_.length)}break;default:throw new Error(`Unsupported geometry type: ${h.type}`)}}return{coordLength:u.size>0?Math.max(...u):2,pointPositionsCount:e,pointFeaturesCount:n,linePositionsCount:r,linePathsCount:i,lineFeaturesCount:s,polygonPositionsCount:o,polygonObjectsCount:a,polygonRingsCount:l,polygonFeaturesCount:c}}function gVe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{coordLength:2,fixRingWinding:!0};return t.map(n=>vVe(n,e))}function xG(t,e,n,r){n.push(e.length),e.push(...t);for(let i=t.length;i<r.coordLength;i++)e.push(0)}function gO(t,e,n,r){n.push(e.length);for(const i of t){e.push(...i);for(let s=i.length;s<r.coordLength;s++)e.push(0)}}function EG(t,e,n,r,i){let s=0;const o=[],a=[];for(const l of t){const c=l.map(h=>h.slice(0,2));let u=NJ(c.flat());const d=u<0;i.fixRingWinding&&(s===0&&!d||s>0&&d)&&(l.reverse(),u=-u),o.push(u),gO(l,e,a,i),s++}s>0&&(r.push(o),n.push(a))}function vVe(t,e){const{geometry:n}=t;if(n.type==="GeometryCollection")throw new Error("GeometryCollection type not supported");const r=[],i=[];let s,o;switch(n.type){case"Point":o="Point",xG(n.coordinates,r,i,e);break;case"MultiPoint":o="Point",n.coordinates.map(a=>xG(a,r,i,e));break;case"LineString":o="LineString",gO(n.coordinates,r,i,e);break;case"MultiLineString":o="LineString",n.coordinates.map(a=>gO(a,r,i,e));break;case"Polygon":o="Polygon",s=[],EG(n.coordinates,r,i,s,e);break;case"MultiPolygon":o="Polygon",s=[],n.coordinates.map(a=>EG(a,r,i,s,e));break;default:throw new Error(`Unknown type: ${o}`)}return{...t,geometry:{type:o,indices:i,data:r,areas:s}}}function yVe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{fixRingWinding:!0,triangulate:!0};const n=mVe(t),r=n.coordLength,{fixRingWinding:i}=e,s=gVe(t,{coordLength:r,fixRingWinding:i});return oVe(s,n,{numericPropKeys:e.numericPropKeys,PositionDataType:e.PositionDataType||Float32Array,triangulate:e.triangulate})}class o_ extends Yt{constructor(e){super(e),this.version(10).stores({countries:"++id, name, &gid_0, "+Su+","+uh,regions1:"++id, name, resourceIdRef, &[gid_0+gid_1], "+Su+","+uh,regions2:"++id, resourceIdRef, name, &[gid_0+gid_1+gid_2], "+Su+","+uh,points:"++id, resourceIdRef, type, country, name_1, name, &[country+name_1+name], "+Su,routeSegments:"++id, resourceIdRef, mode, sourceCountry, sourceName1, sourceName2, sourceName, targetCountry, targetName1, targetName2, targetName, sourceIdRef, targetIdRef, &[sourceIdRef+targetIdRef], "+Su+","+uh,gadm0:"++id, name, &gid_0, "+Su+","+uh,gadm1:"++id, name, resourceIdRef, &[gid_0+gid_1], "+Su+","+uh,gadm2:"++id, resourceIdRef, name, &[gid_0+gid_1+gid_2], "+Su+","+uh}),this.countries=this.table("countries"),this.regions1=this.table("regions1"),this.regions2=this.table("regions2"),this.points=this.table("points"),this.routeSegments=this.table("routeSegments"),this.gadm0=this.table("gadm0"),this.gadm1=this.table("gadm1"),this.gadm2=this.table("gadm2")}static fileNameOf(e,n){switch(e){case an.resources:return`${tN}-${n}`;case an.projects:return`${nN}-${n}`;default:throw new Error("invalid type:"+e)}}static async openResource(e){return new o_(this.fileNameOf(an.resources,e))}async findAllGeoRegions(e,n){const r=0<=n&&n<=2?[this.countries]:n<=4?[this.countries,this.regions1]:[this.regions1,this.regions2];return(await Promise.all(r.map(async i=>{const s=[];for(let o=n;o>=0;o--)if(e[n].length===1){if(s.push(i.where(`z${n}`).anyOf(e[n][0]).toArray()),e[n][0].length===1)break}else s.push(i.where(`z${n}`).anyOf(e[n].length===2?e[n][0].concat(e[n][1]):e[n][0]).toArray());return(await Promise.all(s)).flat(1)}))).flat(1)}async findAllGeoPoints(e,n){const r=this.points,i=[];for(let s=n;s>=0;s--)if(e[n].length===1){if(i.push(r.where(`z${n}`).anyOf(e[n][0]).toArray()),e[n][0].length===1)break}else i.push(r.where(`z${n}`).anyOf(e[n].length===2?e[n][0].concat(e[n][1]):e[n][0]).toArray());return(await Promise.all(i)).flat(1)}async findAllGeoLineStrings(e,n){const r=this.routeSegments,i=[];for(let s=n;s>=0;s--)if(e[n].length===1){if(i.push(r.where(`z${n}`).anyOf(e[n][0]).toArray()),e[n][0].length===1)break}else i.push(r.where(`z${n}`).anyOf(e[n].length===2?e[n][0].concat(e[n][1]):e[n][0]).toArray());return(await Promise.all(i)).flat(1)}async storeGISRouteSegment(e){const n=await Promise.all(e.map(async r=>{const{sourceCountry:i,sourceName1:s,sourceName2:o,sourceName:a,targetCountry:l,targetName1:c,targetName2:u,targetName:d}=r,h=await this.findGISPoint({country:i,name_1:s,name_2:o,name:a}),f=await this.findGISPoint({country:l,name_1:c,name_2:u,name:d});if(h===void 0||f===void 0||h.id===void 0||f.id===void 0)throw new Error;const[p,m]=h.lat>f.lat?[h.lat,f.lat]:[f.lat,h.lat],[_,y]=h.lng>f.lng?[h.lng,f.lng]:[f.lng,h.lng],x=cGe({lat:p,lng:_},{lat:m,lng:y},la),b={...r,uuid:Rf(),sourceIdRef:h.uuid,targetIdRef:f.uuid,...x};return console.log(b),b}));await this.routeSegments.bulkAdd(n)}async findGISPoint({country:e,name_1:n,name_2:r,name:i}){return this.points.where("[country+name_1+name_2+name]").equals(e+n+r+i).last()}async storeAsGeoJson({stream:e,fileName:n,fileSize:r,startedCallback:i,progressCallback:s,errorCallback:o,finishedCallback:a,cancelCallback:l}){let u=[],d=[],h=[];const f=new vG({stringBufferSize:void 0,paths:["$.features"],keepStack:!1}),p=async(y,x,b)=>{y.bulkAdd(x).catch(E=>{o&&o(b,E.message)})};let m=0;const _=async y=>{i&&i(n,this.name),y.getReader().read().then(x=>{const{done:b,value:E}=x;if(b)return;const w=E.value;m+=w.length,w.forEach((T,C)=>{const{COUNTRY:P,NAME_1:M,NAME_2:N,GID_0:F,GID_1:I,GID_2:k}=T.properties,R=T.geometry.coordinates,z=_G(`${P}	${M}	${N}`,R,dG,!0,yG),X={},G=qj(z);for(let Q=0;Q<=la;Q++){const V=_T(G.topLeft,G.bottomRight,Q);if(V.length===0)X[`z${Q}`]=Yj.NOT_CONTAINED;else if(V.length===1)if(V[0].length===1)X[`z${Q}`]=V[0][0];else if(V[0].length>=2)X[`z${Q}`]=X[`z${Q-1}`];else throw new Error;else if(V.length===2)V[1].length===1?X[`z${Q}_`]=V[1][0]:V[1].length>=2&&(X[`z${Q}_`]=X[`z${Q-1}_`]);else throw new Error("mortonNumber.length > 2 :"+V.join(" ,"))}const j=yVe(w,{PositionDataType:Float32Array,fixRingWinding:!0}),H={country:P,gid_0:F,binaryFeatures:j,...X};w.some(Q=>{var V;return((V=Q.coordinates)==null?void 0:V.length)>0})&&H.country&&(M?N?h.push({...H,name_1:M,gid_1:I,name_2:N,gid_2:k,name:H.name_2}):d.push({...H,name_1:M,gid_1:I,name:H.name_1}):u.push({...H,name:H.country}),s&&s({type:Ju.progress,progress:C/w.length*100,index:C,total:m,unit:"items",fileName:n,fileSize:r||-1}),u.length===64&&(p(this.gadm0,u,n),u=[]),d.length===64&&(p(this.gadm1,d,n),d=[]),h.length===64&&(p(this.gadm2,h,n),h=[]))}),u.length>0&&p(this.gadm0,u,n),d.length>0&&p(this.gadm1,d,n),h.length>0&&p(this.gadm2,h,n),s&&s({type:Ju.progress,fileName:n,fileSize:r,progress:100,total:m,index:m,unit:"items_end"}),a&&a(n)})};try{await _(e.pipeThrough(f))}catch(y){console.error(y),o&&o(n,y.message);return}}async storeGadmGeoJson({stream:e,fileName:n,fileSize:r,startedCallback:i,progressCallback:s,errorCallback:o,finishedCallback:a,cancelCallback:l}){await this.storeAsGeoRegion({stream:e,fileName:n,fileSize:r,startedCallback:i,progressCallback:s,errorCallback:o,finishedCallback:a,cancelCallback:l})}async storeAsGeoRegion({stream:e,fileName:n,fileSize:r,startedCallback:i,progressCallback:s,errorCallback:o,finishedCallback:a,cancelCallback:l}){let u=[],d=[],h=[];const f=new vG({stringBufferSize:void 0,paths:["$.features"],keepStack:!1}),p=async(y,x,b)=>{y.bulkAdd(x).catch(E=>{o&&o(b,E.message)})};let m=0;const _=async y=>{i&&i(n,this.name),y.getReader().read().then(x=>{const{done:b,value:E}=x;if(b)return;const w=E.value;m+=w.length,w.forEach((T,C)=>{const{COUNTRY:P,NAME_1:M,NAME_2:N,GID_0:F,GID_1:I,GID_2:k}=T.properties,R=T.geometry.coordinates,z=_G(`${P}	${M}	${N}`,R,dG,!0,yG),X={},G=qj(z);for(let H=0;H<=la;H++){const Q=_T(G.topLeft,G.bottomRight,H);if(Q.length===0)X[`z${H}`]=Yj.NOT_CONTAINED;else if(Q.length===1)if(Q[0].length===1)X[`z${H}`]=Q[0][0];else if(Q[0].length>=2)X[`z${H}`]=X[`z${H-1}`];else throw new Error;else if(Q.length===2)Q[1].length===1?X[`z${H}_`]=Q[1][0]:Q[1].length>=2&&(X[`z${H}_`]=X[`z${H-1}_`]);else throw new Error("mortonNumber.length > 2 :"+Q.join(" ,"))}const j={country:P,gid_0:F,coordinates:z,...X};j.coordinates.length>0&&j.country&&(M?N?h.push({...j,name_1:M,gid_1:I,name_2:N,gid_2:k,name:j.name_2}):d.push({...j,name_1:M,gid_1:I,name:j.name_1}):u.push({...j,name:j.country}),s&&s({type:Ju.progress,progress:C/w.length*100,index:C,total:m,unit:"items",fileName:n,fileSize:r||-1}),u.length===64&&(p(this.countries,u,n),u=[]),d.length===64&&(p(this.regions1,d,n),d=[]),h.length===64&&(p(this.regions2,h,n),h=[]))}),u.length>0&&p(this.countries,u,n),d.length>0&&p(this.regions1,d,n),h.length>0&&p(this.regions2,h,n),s&&s({type:Ju.progress,fileName:n,fileSize:r,progress:100,total:m,index:m,unit:"items_end"}),a&&a(n)})};try{await _(e.pipeThrough(f))}catch(y){console.error(y),o&&o(n,y.message);return}}}const _Ve=(t,e)=>{const n=t.lastIndexOf(e);return n>=0&&n<t.length-1?parseInt(t.slice(n+e.length)):0},bVe=(t,e)=>Math.max(...t.map(n=>_Ve(n,e))),a_=(t,e)=>{const n=t.length===0?0:bVe(t,e);return`${e}${n+1}`};function xVe(t){return new ReadableStream({start(e){e.enqueue(t),e.close()}})}async function EVe(t){const e=[],n=t.getReader();let r=await n.read();for(;!r.done;){const{value:i}=r;e.push(i),r=await n.read()}return new Blob(e)}async function wVe(t){const n=await(await EVe(t)).arrayBuffer(),i=await new GD().loadAsync(n),s=Object.keys(i.files);if(s.length===0)throw new Error("ZIP");const o=s[0];return await i.files[o].async("uint8array")}const TVe=()=>{const t=mi();return{handleFiles:async n=>{const r=SHe(),i=CHe(n);function s(b){return b.name.startsWith("gadm")&&(b.name.endsWith("json")||b.name.endsWith("json.zip"))}function o(b){return!b.name.startsWith("gadm")&&(b.name.endsWith("json")||b.name.endsWith("json.zip"))}function a(b){return b.every(E=>s(E))}function l(b){return b.every(E=>o(E))}function c(b){return(b.name.startsWith("cities")||b.name.startsWith("city"))&&(b.name.endsWith("csv")||b.name.endsWith("csv.zip"))}function u(b){return b.every(E=>c(E))}function d(b){return(b.name.startsWith("routes")||b.name.startsWith("route"))&&(b.name.endsWith("csv")||b.name.endsWith("csv.zip"))}function h(b){return b.every(E=>d(E))}const[f,p]=a(i)?[an.resources,Ut.gadmGeoJSON]:l(i)?[an.resources,Ut.genericGeoJson]:u(i)?[an.resources,Ut.idegsmCities]:h(i)?[an.resources,Ut.idegsmRoutes]:[null,null];if(f===null||p===null){const b=i.map(E=>E.name).join(", ");throw new Error(b)}const m=i.map(b=>RHe(b.name)),_=await Pn.getResourcesByType(Ut.gadmGeoJSON),y=a_(_.map(b=>b.name),"GADM GeoJSON #");await Pn.createGADMGeoJsonResourceEntity({uuid:r,name:y,description:"import from local",items:m});const x=await o_.openResource(r);switch(p){case Ut.gadmGeoJSON:for(let b=0;b<n.length;b++){const w=n[b].name.endsWith("zip")?xVe(await wVe(n[b].stream())):n[b].stream();await x.storeGadmGeoJson({stream:w,fileName:n[b].name,fileSize:void 0,startedCallback:(T,C)=>{},progressCallback:T=>{},cancelCallback:T=>{},finishedCallback:T=>{console.log("finished: ",T)}})}return t(`/resources/update/${Ut.gadmGeoJSON}/${r}`);default:throw new Error("unimplemented resource type")}}}},SVe=()=>{const t=mi(),{handleFiles:e}=TVe();return A.useEffect(()=>{(window.location.hash===""||window.location.hash==="#/")&&t("/projects",{replace:!0})},[t]),Pe(aHe,{children:[Pe(RJ,{type:"projects",acceptableSuffixes:["json.zip",".json",".csv"],handleFiles:e,onFinish:n=>{console.log("finish loading: ",n)},children:[D(cHe,{startIcon:D(c3,{fontSize:"large"}),children:xY}),D(Ak,{})]}),D(vHe,{style:{position:"absolute",top:0,right:0},href:"https://github.com/kubohiroya/racetrack-economy-model",size:64})]})},wG=t=>{const{children:e,value:n,index:r,...i}=t;return D("div",{role:"tabpanel",hidden:n!==r,id:`vertical-tabpanel-${r}`,"aria-labelledby":`vertical-tab-${r}`,...i,children:n===r&&D($t,{sx:{p:3},children:e})})};function TG(t){return{id:`vertical-tab-${t}`,"aria-controls":`vertical-tabpanel-${t}`}}const SG=t=>{const e=mi(),n=(i,s)=>{e(s===0?"/resources":"/projects",{replace:!0})},r=t.type===an.resources?0:1;return Pe($t,{children:[D($t,{sx:{borderBottom:1,borderColor:"divider"},children:Pe(_Ee,{variant:"fullWidth",value:r,onChange:n,"aria-label":"tabs",textColor:r===0?"primary":"secondary",indicatorColor:r===0?"primary":"secondary",children:[D(bz,{label:"Resources",...TG(0)}),D(bz,{label:"Projects",...TG(1)})]})}),D(wG,{value:r,index:0,children:t.items[0]}),D(wG,{value:r,index:1,children:t.items[1]}),D(Ak,{})]})};var VD={},CVe=p3;Object.defineProperty(VD,"__esModule",{value:!0});var UJ=VD.default=void 0,AVe=CVe(m3()),RVe=Z;UJ=VD.default=(0,AVe.default)((0,RVe.jsx)("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu");const zJ=({tableType:t,item:e})=>{const n=A.useRef(null),[r,i]=Gn.useState(!1),s=mi(),o=A.useCallback(()=>{i(!1)},[]),a=A.useCallback(u=>()=>{i(u)},[]),l=A.useCallback(()=>{s(`/${t}/update/${e.type}/${e.uuid}`)},[e.type,e.uuid,s,t]),c=A.useCallback(()=>{s(`/${t}/delete/${e.type}/${e.uuid}`)},[e.type,e.uuid,s,t]);return Pe(ui,{children:[D(fi,{ref:n,onClick:a(!0),children:D(UJ,{})}),D(SN,{open:r,anchorEl:n.current,role:void 0,placement:"bottom-start",transition:!0,disablePortal:!0,style:{zIndex:1e3},children:({TransitionProps:u,placement:d})=>D(Aw,{...u,style:{transformOrigin:d==="bottom-start"?"left top":"left bottom"},children:D(Nd,{children:D(vfe,{onClickAway:o,children:Pe(F7,{autoFocusItem:r,id:"composition-menu","aria-labelledby":"composition-button",children:[Pe($v,{onClick:l,children:[D(UR,{children:D(nC,{})}),D(cE,{children:"Update"})]}),Pe($v,{onClick:o,disabled:!0,children:[D(UR,{children:D(GX,{})}),D(cE,{children:"Duplicate"})]}),Pe($v,{onClick:c,children:[D(UR,{children:D(HX,{})}),D(cE,{children:"Delete"})]})]})})})})})]})};function $J(){}function PVe(t,e){return t===$J?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){var r=this,i=arguments;return n.then(function(){return e.apply(r,i)})}return e.apply(this,arguments)}}function IVe(){var t=Date.now(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var r=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(n==="x"?r:r&7|8).toString(16)});return e}function MVe(t,e){return function(r){return function(i,s,o,a){if(t.dynamicallyOpened())return r.apply(this,arguments);var l=!1;i==="readwrite"&&s.some(function(u){return o[u]&&o[u].observable})&&(l=!0,s=s.slice(0),s.indexOf("_changes")===-1&&s.push("_changes"));var c=r.call(this,i,s,o,a);return l&&(c._lastWrittenRevision=0,c.on("complete",function(){if(c._lastWrittenRevision)if(!a)e.timeoutHandle&&clearTimeout(e.timeoutHandle),e.timeoutHandle=setTimeout(function(){delete e.timeoutHandle,e(c._lastWrittenRevision)},25);else{var u=function d(h){return h.parent?d(h.parent):h}(a);u._lastWrittenRevision=Math.max(c._lastWrittenRevision,u.lastWrittenRevision||0)}}),c.parent&&c.parent.source&&(c.source=c.parent.source)),c}}}function LVe(t,e,n){return function(i){e.latestRevision[t.name]<i&&(e.latestRevision[t.name]=i,Yt.ignoreTransaction(function(){e.on("latestRevisionIncremented").fire(t.name,i)}),n&&n.setItem("Dexie.Observable/latestRevision/"+t.name,i))}}var OVe=1,kVe=2,NVe=3;function DVe(t,e){return function(r,i,s){var o=void 0;r===void 0&&e.schema.primKey.uuid&&(r=o=Yt.Observable.createUUID(),e.schema.primKey.keyPath&&Yt.setByKeyPath(i,e.schema.primKey.keyPath,r));var a={source:s.source||null,table:e.name,key:r===void 0?null:r,type:OVe,obj:i},l=t._changes.add(a).then(function(c){return s._lastWrittenRevision=Math.max(s._lastWrittenRevision,c),c});return this.onsuccess=function(c){r!=c&&l._then(function(){a.key=c,t._changes.put(a)})},this.onerror=function(){l._then(function(c){t._changes.delete(c)})},o}}function BVe(t,e){return function(r,i,s,o){var a={},l=!1,c=Yt.deepClone(s);for(var u in r){var d=r[u];if(typeof d>"u")Yt.delByKeyPath(c,u),a[u]=null,l=!0;else{var h=Yt.getByKeyPath(s,u);d!==h&&JSON.stringify(d)!==JSON.stringify(h)&&(Yt.setByKeyPath(c,u,d),a[u]=d,l=!0)}}if(l){var f={source:o.source||null,table:e,key:i,type:kVe,mods:a,oldObj:s,obj:c},p=t._changes.add(f);this.onsuccess=function(){p._then(function(m){o._lastWrittenRevision=Math.max(o._lastWrittenRevision,m)})},this.onerror=function(){p._then(function(m){t._changes.delete(m)})}}}}function FVe(t,e){return function(r,i,s){var o=t._changes.add({source:s.source||null,table:e,key:r,type:NVe,oldObj:i}).then(function(a){return s._lastWrittenRevision=Math.max(s._lastWrittenRevision,a),a}).catch(function(a){console.log(i),console.log(a.stack)});this.onerror=function(){o._then(function(a){t._changes.delete(a)})}}}function UVe(t){return function(n){if(!n.hook._observing){n.hook._observing=!0;var r=n.name;n.hook("creating").subscribe(DVe(t,n)),n.hook("updating").subscribe(BVe(t,r)),n.hook("deleting").subscribe(FVe(t,r))}}}function zVe(t){return function(n){if(n.key&&n.key.indexOf("Dexie.Observable/")===0){var r=n.key.split("/"),i=r[1],s=r[2];if(i==="latestRevision"){var o=parseInt(n.newValue,10);!isNaN(o)&&o>t.latestRevision[s]&&(t.latestRevision[s]=o,Yt.ignoreTransaction(function(){t.on("latestRevisionIncremented").fire(s,o)}))}else if(i.indexOf("deadnode:")===0){var a=parseInt(i.split(":")[1],10);n.newValue&&t.on.suicideNurseCall.fire(s,a)}else i==="intercomm"&&n.newValue&&t.on.intercomm.fire(s)}}}function $Ve(t,e,n){return function(i){return function(){return Object.keys(t._allTables).forEach(function(s){var o=t._allTables[s];o.schema.observable&&n(o),o.name==="_syncNodes"&&o.mapToClass(e)}),i.apply(this,arguments)}}}var j0=Yt.Promise;function jVe(t,e,n,r,i){var s={};t.observable.sendMessage=function(c,u,d,h){if(h=h||{},!r.node)return h.wantReply?j0.reject(new Yt.DatabaseClosedError):j0.resolve();var f={message:u,destinationNode:d,sender:r.node.id,type:c};return Yt.extend(f,h),Yt.ignoreTransaction(function(){var p=["_intercomm"];h.wantReply&&p.push("_syncNodes");var m=t.transaction("rw",p,function(){return h.wantReply?t._syncNodes.where("id").equals(d).count(function(_){return _?t._intercomm.add(f):t._syncNodes.where("isMaster").above(0).first(function(y){return f.destinationNode=y.id,t._intercomm.add(f)})}):t._intercomm.add(f)}).then(function(_){var y=null;return h.wantReply&&(y=new j0(function(x,b){s[_.toString()]={resolve:x,reject:b}})),i&&i.setItem("Dexie.Observable/intercomm/"+t.name,_.toString()),e.on.intercomm.fire(t.name),y});if(h.wantReply)return m;m.catch(function(){})})},t.observable.broadcastMessage=function(c,u,d){if(r.node){var h=r.node.id;Yt.ignoreTransaction(function(){t._syncNodes.toArray(function(f){return j0.all(f.filter(function(p){return p.type==="local"&&(d||p.id!==h)}).map(function(p){return t.observable.sendMessage(c,u,p.id)}))}).catch(function(){})})}};function o(){return r.node?Yt.ignoreTransaction(function(){return t.transaction("rw","_intercomm",function(){return t._intercomm.where({destinationNode:r.node.id}).toArray(function(c){return c.forEach(function(u){return a(u)}),t._intercomm.where("id").anyOf(c.map(function(u){return u.id})).delete()})})}):j0.reject(new Yt.DatabaseClosedError)}function a(c){if(c.type==="response"){var u=s[c.requestId.toString()];u&&(c.isFailure?u.reject(c.message.error):u.resolve(c.message.result),delete s[c.requestId.toString()])}else c.resolve=function(d){t.observable.sendMessage("response",{result:d},c.sender,{requestId:c.id})},c.reject=function(d){t.observable.sendMessage("response",{error:d.toString()},c.sender,{isFailure:!0,requestId:c.id})},t.on.message.fire(c)}function l(c){c===t.name&&o().catch("DatabaseClosedError",function(){})}return{onIntercomm:l,consumeIntercommMessages:o}}function GVe(t){return function(e,n){e._changes="++rev",e._syncNodes="++id,myRevision,lastHeartBeat,&url,isMaster,type,status",e._intercomm="++id,destinationNode",e._uncommittedChanges="++id,node",t.call(this,e,n),Object.keys(n).forEach(function(r){var i=n[r];i.primKey.name.indexOf("$$")===0&&(i.primKey.uuid=!0,i.primKey.name=i.primKey.name.substr(2),i.primKey.keyPath=i.primKey.keyPath.substr(2))}),Object.keys(n).forEach(function(r){r.indexOf("_")!==0&&r.indexOf("$")!==0&&(n[r].observable=!0)})}}function jJ(t){var e=100;Yt.ignoreTransaction(function(){return t._syncNodes.orderBy("myRevision").first(function(n){return t._changes.where("rev").below(n.myRevision).limit(e).primaryKeys()}).then(function(n){if(n.length!==0)return t._changes.bulkDelete(n).then(function(){n.length===e&&setTimeout(function(){return t.isOpen()&&jJ(t)},500)})})}).catch(function(){})}var Gu=self,HVe=Yt.defineClass({rev:Number,source:String,table:String,key:Object,type:Number,obj:Object,mods:Object,oldObj:Object}),G0=Yt.override,CG=Yt.Promise,AG=!1;function ln(t){if(!/^(3|4)\./.test(Yt.version))throw new Error("Missing dexie version 3.x or 4.x");if(t.observable){if(t.observable.version!=="{version}")throw new Error("Mixed versions of dexie-observable");return}var e=2e4,n=2e4,r=500,i=e-5e3,s=ln.localStorageImpl,o=Yt.defineClass({myRevision:Number,type:String,lastHeartBeat:Number,deleteTimeStamp:Number,url:String,isMaster:Number,syncProtocol:String,syncContext:null,syncOptions:Object,connected:!1,status:Number,appliedRemoteRevision:null,remoteBaseRevisions:[{local:Number,remote:null}],dbUploadState:{tablesToUpload:[String],currentTable:String,currentKey:null,localBaseRevision:Number}});t.observable={version:"{version}"},t.observable.SyncNode=o;var a=LVe(t,ln,s),l=MVe(t,a),c=UVe(t),u=$Ve(t,o,c),d={node:null},h=jVe(t,ln,o,d,s),f=h.onIntercomm,p=h.consumeIntercommMessages;Object.defineProperty(t,"_localSyncNode",{get:function(){return d.node}});var m=null,_=null;Yt.fake&&(t.version(1).stores({_syncNodes:"++id,myRevision,lastHeartBeat",_changes:"++rev",_intercomm:"++id,destinationNode",_uncommittedChanges:"++id,node"}),t._syncNodes.mapToClass(o),t._changes.mapToClass(HVe),d.node=new o({myRevision:0,type:"local",lastHeartBeat:Date.now(),deleteTimeStamp:null})),t.Version.prototype._parseStoresSpec=G0(t.Version.prototype._parseStoresSpec,GVe),t.on.addEventType({changes:"asap",cleanup:[PVe,$J],message:"asap"}),t._createTransaction=G0(t._createTransaction,l),ln.latestRevision[t.name]=ln.latestRevision[t.name]||0,t.open=G0(t.open,u),t.close=G0(t.close,function(M){return function(){return t.dynamicallyOpened()?M.apply(this,arguments):(a.timeoutHandle&&(clearTimeout(a.timeoutHandle),delete a.timeoutHandle),ln.on("latestRevisionIncremented").unsubscribe(x),ln.on("suicideNurseCall").unsubscribe(P),ln.on("intercomm").unsubscribe(f),ln.on("beforeunload").unsubscribe(C),d.node&&d.node.id&&(ln.on.suicideNurseCall.fire(t.name,d.node.id),s&&s.setItem("Dexie.Observable/deadnode:"+d.node.id.toString()+"/"+t.name,"dead"),d.node.deleteTimeStamp=1,d.node.lastHeartBeat=0,t._syncNodes.put(d.node),d.node=null),m&&clearTimeout(m),m=null,_&&clearTimeout(_),_=null,M.apply(this,arguments))}}),t.delete=G0(t.delete,function(M){return function(){return M.apply(this,arguments).then(function(N){return ln.latestRevision[t.name]=0,N})}}),t.on("ready",function(){return t.dynamicallyOpened()?t:t.table("_changes").orderBy("rev").last(function(N){var F=N?N.rev:0;return d.node=new o({myRevision:F,type:"local",lastHeartBeat:Date.now(),deleteTimeStamp:null,isMaster:0}),ln.latestRevision[t.name]<F&&(ln.latestRevision[t.name]=F,Yt.ignoreTransaction(function(){ln.on.latestRevisionIncremented.fire(F)})),t._syncNodes.put(d.node).then(Yt.ignoreTransaction(function(){var I=1;return t._syncNodes.orderBy("isMaster").reverse().modify(function(k){k.isMaster&&(k.lastHeartBeat<Date.now()-e?k.isMaster=0:I=0),d.node&&k.id===d.node.id&&(k.isMaster=d.node.isMaster=I)})})).then(function(){ln.on("latestRevisionIncremented",x),ln.on("beforeunload",C),ln.on("suicideNurseCall",P),ln.on("intercomm",f),m=setTimeout(w,r),_=setTimeout(E,i)}).then(function(){T()})})},!0);var y=0;function x(M,N){if(M===t.name){if(y>=N)return;y=N,Yt.vip(function(){b().catch("DatabaseClosedError",function(){})})}}function b(M,N,F){if(!N&&b.ongoingOperation)return b.ongoingOperation;var I=!1,k=d.node;if(!k)return CG.reject(new Yt.DatabaseClosedError);var R=1e3,z=t._changes.where("rev").above(k.myRevision).limit(R).toArray(function(X){if(X.length>0){var G=X[X.length-1];I=X.length===R,t.on("changes").fire(X,I),k.myRevision=G.rev}else F&&t.on("changes").fire([],!1);var j=!1;return t._syncNodes.where(":id").equals(k.id).modify(function(H){j=!0,H.lastHeartBeat=Date.now(),H.deleteTimeStamp=null,H.myRevision=Math.max(H.myRevision,k.myRevision)}).then(function(){return j})}).then(function(X){if(!X)throw AG?new Error("Browser is shutting down"):(t.close(),console.error("Out of sync"),Gu.location&&Gu.location.reload(!0),new Error("Out of sync"));if(I||ln.latestRevision[t.name]>k.myRevision)return b(ln.latestRevision[t.name],(N||0)+1,I)}).finally(function(){delete b.ongoingOperation});return N||(b.ongoingOperation=z),z}function E(){_=null;var M=d.node&&d.node.id;M&&t.transaction("rw!",t._syncNodes,function(){t._syncNodes.where({id:M}).first(function(N){if(!N){t.isOpen()&&t.close();return}return N.lastHeartBeat=Date.now(),N.deleteTimeStamp=null,t._syncNodes.put(N)})}).catch("DatabaseClosedError",function(){}).finally(function(){d.node&&d.node.id===M&&t.isOpen()&&(_=setTimeout(E,i))})}function w(){m=null;var M=d.node&&d.node.id;M&&Yt.vip(function(){b(ln.latestRevision[t.name]).then(T).then(p).catch("DatabaseClosedError",function(){}).finally(function(){d.node&&d.node.id===M&&t.isOpen()&&(m=setTimeout(w,r))})})}function T(){var M=d.node;return M?t.transaction("rw","_syncNodes","_changes","_intercomm",function(){var N=!1;t._syncNodes.where("lastHeartBeat").below(Date.now()-e).filter(function(F){return F.type==="local"}).modify(function(F){F.deleteTimeStamp&&F.deleteTimeStamp<Date.now()?(delete this.value,s&&s.removeItem("Dexie.Observable/deadnode:"+F.id+"/"+t.name),F.isMaster&&(t._syncNodes.update(M,{isMaster:1}),N=!0),t._intercomm.where({destinationNode:F.id}).modify(function(I){I.wantReply?I.destinationNode=M.id:delete this.value})):F.deleteTimeStamp||(F.deleteTimeStamp=Date.now()+n)}).then(function(){return ln.deleteOldChanges(t),t.on("cleanup").fire(N)})}):CG.reject(new Yt.DatabaseClosedError)}function C(){d.node&&(AG=!0,d.node.deleteTimeStamp=1,d.node.lastHeartBeat=0,t._syncNodes.put(d.node),ln.wereTheOneDying=!0,s&&s.setItem("Dexie.Observable/deadnode:"+d.node.id.toString()+"/"+t.name,"dead"))}function P(M,N){M===t.name&&!ln.wereTheOneDying&&Yt.vip(function(){t._syncNodes.update(N,{deleteTimeStamp:1,lastHeartBeat:0}).then(T)})}}ln.version="{version}";ln.latestRevision={};ln.on=Yt.Events(null,"latestRevisionIncremented","suicideNurseCall","intercomm","beforeunload");ln.createUUID=IVe;ln.deleteOldChanges=jJ;ln._onStorage=zVe(ln);ln._onBeforeUnload=function(){ln.on.beforeunload.fire()};try{ln.localStorageImpl=Gu.localStorage}catch{}Gu!=null&&Gu.addEventListener&&(Gu.addEventListener("storage",ln._onStorage),Gu.addEventListener("beforeunload",ln._onBeforeUnload));if(Yt.Observable){if(Yt.Observable.version!=="{version}")throw new Error("Mixed versions of dexie-observable")}else Yt.Observable=ln,Yt.addons.push(ln);Yt.Observable;function GJ(t){return`https://gadm.org/maps/${t}.html`}function VVe(t,e){return`https://gadm.org/maps/${t}_${e}.html`}const WVe=Tt(Ki)`
  margin: 1px;
  padding-left: 4px;
`,XVe=Tt($t)`
  display: flex;
  flex-direction: row;
  align-items: center;

  & > svg {
    width: 16px;
    height: 16px;
  }
`,YVe=A.memo(t=>{const e=A.useCallback(n=>()=>{window.location.href=n},[]);return Pe(WVe,{color:"primary",variant:"outlined",size:"small",children:[D(Wi,{title:t.country,children:D(en,{onClick:e(GJ(t.countryCode)),children:t.countryCode})}),Pe(XVe,{children:[t.levels.includes(0)&&D(Wi,{title:"0",children:D(bf,{onClick:e(t.urls[0])})}),t.levels.includes(1)&&D(Wi,{title:"1",children:D(xf,{onClick:e(t.urls[1])})}),t.levels.includes(2)&&D(Wi,{title:"2",children:D(l3,{onClick:e(t.urls[2])})}),t.levels.includes(3)&&D(Wi,{title:"3",children:D(iY,{onClick:e(t.urls[3])})}),t.levels.includes(4)&&D(Wi,{title:"4",children:D(sY,{onClick:e(t.urls[4])})})]})]})}),KVe=t=>{const e=new Map,n=[];return t.resource.items.forEach(r=>{let i=e.get(r.countryCode);i||(i=[],n.push(r.countryCode)),i.push(r),e.set(r.countryCode,i)}),n.map((r,i)=>{const s=e.get(r);if(s)return D(YVe,{country:s[0].countryName,countryCode:r,levels:s.map(o=>o.level),urls:s.map(o=>o.url)},i)})};function qVe(){if(document.location.hash.startsWith("#/projects"))return an.projects;if(document.location.hash.startsWith("#/resources"))return an.resources;throw new Error("Unrecognizable Type: "+document.location.hash)}function HJ(){A.useEffect(()=>{const t=qVe()?"Projects":"Resources";document.title=zl+" - "+t},[])}function VJ(){return Pn.getResources()}const WD=t=>D(Hm,{...t,color:"inherit",children:D("svg",{height:"800px",width:"800px",version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",style:{fill:"currentcolor"},children:D("path",{d:`M511.881,472.156L446.52,36.463c-0.809-5.329-5.383-9.227-10.777-9.227H76.257c-5.393,0-9.968,3.899-10.776,9.227
			L0.119,472.18c-0.468,3.138,0.458,6.362,2.521,8.761c2.074,2.404,5.085,3.823,8.255,3.823h490.209c3.17,0,6.181-1.431,8.255-3.835
			C511.423,478.53,512.349,475.295,511.881,472.156z M426.36,49.023l28.867,192.401l-71.313-17.853
			c-3.915-0.979-8.075,0.286-10.776,3.318l-85.755,96.473l-53.01,26.496l-37.484-91.039l94.781-115.844
			c1.851-2.271,2.713-5.143,2.394-8.053l-9.55-85.898H426.36z M85.64,49.023h176.948l9.316,83.749l-84.444,103.172l-24.875-60.433
			c-1.383-3.367-4.362-5.825-7.936-6.537c-3.564-0.729-7.266,0.395-9.84,2.975l-91.324,91.37L85.64,49.023z M23.545,462.977
			l24.672-164.536c1.101-0.521,2.149-1.221,3.061-2.132l97.382-97.394l70.031,170.078c1.149,2.798,3.415,4.985,6.255,6.049
			c1.234,0.463,2.532,0.69,3.819,0.69c1.67,0,3.341-0.388,4.872-1.149l52.984-26.444l26.489,114.837H23.545z M335.475,462.977
			l-29.468-127.742l79.023-88.925l73.696,18.458l29.728,198.208H335.475z`})})}),Zh={[Ut.mapTiles]:D(Fy,{}),[Ut.gadmGeoJSON]:D(bf,{}),[Ut.genericGeoJson]:D(WD,{}),[Ut.idegsmCities]:D(xf,{}),[Ut.idegsmRoutes]:D(Qm,{}),[Lt.RealWorld]:D(eY,{}),[Lt.Graph]:D(c3,{}),[Lt.Racetrack]:D(JX,{})},ZVe=()=>{const t=mi();return D(X7,{style:{position:"fixed",bottom:"20px",right:"20px"},direction:"up",ariaLabel:"Create new resource",icon:D(q7,{}),children:[{icon:D(Fy,{}),name:"MapTile",onClick:()=>t("/resources/create/mapTile")},{icon:D(bf,{}),name:"GADM GeoJSON",onClick:()=>t("/resources/create/gadm")},{icon:D(WD,{}),name:"GeoJSON",onClick:()=>t("/resources/create/geojson")},{icon:D(xf,{}),name:"IDE-GSM Cities",onClick:()=>t("/resources/create/cities")},{icon:D(Qm,{}),name:"IDE-GSM Routes",onClick:()=>t("/resources/create/routes")}].map(n=>D(Y7,{icon:n.icon,tooltipTitle:n.name,onClick:n.onClick},n.name))})},RG=()=>{const{resources:t}=ql(),[e,n]=A.useState(t),r=mi(),i=()=>{VJ().then(s=>n(s))};return A.useEffect(()=>{if(window.location.hash.endsWith("/resources")&&(e==null?void 0:e.length)===0)return r("/resources/new")},[r,e==null?void 0:e.length]),A.useEffect(()=>{i()},[]),iC(Pn.getSingleton(),an.resources,i),HJ(),Pe(J7,{component:Nd,style:{overflow:"scroll",maxHeight:"calc(100vh - 150px)"},children:[Pe(NN,{children:[D(BN,{children:Pe(qm,{children:[D(Jn,{}),D(Jn,{children:"name"}),D(Jn,{children:"description"}),D(Jn,{children:"contents"}),D(Jn,{children:"last updated"}),D(Jn,{})]})}),D(DN,{children:e==null?void 0:e.map((s,o)=>Pe(qm,{children:[D(Jn,{children:D(fi,{color:"primary",size:"large",onClick:()=>{console.log("resource icon clicked")},children:Zh[s.type]})}),D(Jn,{children:D(Wi,{title:s.uuid,children:D(en,{children:s.name})})}),D(Jn,{children:s.description}),D(Jn,{children:s.type===Ut.gadmGeoJSON?D(KVe,{resource:s},o):null}),D(Jn,{children:D("div",{children:new Date(s.updatedAt).toISOString()})}),D(Jn,{children:D(zJ,{item:s,tableType:an.resources})})]},s.uuid))})]}),D(ZVe,{})]})};function vO(t){return t.viewportCenter?`/${t.type}/${t.uuid}/${t.viewportCenter[0]}/${t.viewportCenter[1]}/${t.viewportCenter[2]}/`:`/${t.type}/${t.uuid}/1/0/0/`}function WJ(t){return Mr.getProjects()}function QVe(){const t=mi(),e=[{icon:Zh[Lt.Racetrack],name:Lt.Racetrack,onClick:()=>t(`/projects/create/${Lt.Racetrack}`)},{icon:Zh[Lt.Graph],name:Lt.Graph,onClick:()=>t(`/projects/create/${Lt.Graph}`)},{icon:Zh[Lt.RealWorld],name:Lt.RealWorld,onClick:()=>t(`/projects/create/${Lt.RealWorld}`)}];return ms(),D(X7,{style:{position:"fixed",bottom:"20px",right:"20px"},direction:"up",ariaLabel:"Create new project",icon:D(q7,{}),children:e.map(n=>D(Y7,{icon:n.icon,tooltipTitle:n.name,tooltipOpen:!0,onClick:n.onClick},n.name))})}const PG=()=>{const t=ql(),[e,n]=A.useState(t),r=mi(),i=()=>{WJ().then(s=>n(s))};return A.useEffect(()=>{i()},[]),iC(Mr.getSingleton(),an.projects,i),A.useEffect(()=>{if(window.location.hash.endsWith("/projects")&&e.length===0)return r("/projects/new")},[r,e==null?void 0:e.length]),HJ(),Pe(J7,{component:Nd,children:[Pe(NN,{children:[D(BN,{children:Pe(qm,{children:[D(Jn,{}),D(Jn,{children:"name"}),D(Jn,{children:"description"}),D(Jn,{children:"last updated"}),D(Jn,{})]})}),D(DN,{children:e==null?void 0:e.map(s=>Pe(qm,{children:[D(Jn,{children:D(Bm,{to:vO(s),target:"_blank",children:D(fi,{color:"primary",size:"large",children:Zh[s.type]})})}),D(Jn,{children:D(Bm,{to:vO(s),target:"_blank",title:s.uuid,children:s.name})}),D(Jn,{children:D("pre",{children:s.description})}),D(Jn,{children:D("div",{children:new Date(s.updatedAt).toISOString()})}),D(Jn,{children:D(zJ,{item:s,tableType:an.projects})})]},s.uuid))})]}),D(QVe,{})]})},JVe=Tt.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  margin-top: 10px;
  font-size: 20px;
  gap: 10px;
  padding: 10px;
`;function eWe({type:t}){return Pe(JVe,{children:[Pe(en,{style:{color:"#bbb",marginLeft:"30px",marginRight:"30px"},children:["Otherwise, drag and drop your local data files here to upload and create a new ",t===an.projects?"project":"resource","."]}),D(WX,{fontSize:"large"}),D(zSe,{fontSize:"large",style:{fontSize:"35px"}})]})}const tWe=Tt.div`
  display: flex;
  gap: 30px;
  margin-bottom: 5px;
  justify-content: center;
  align-items: center;
`,nWe=Tt(Ki)`
  margin-top: 5px;
  padding: 15px;
  display: block;
`,rWe=Tt.div`
  margin-top: 10px;
`,iWe=Tt.div`
  padding: 40px;
  display: grid;
  place-items: center;
  height: 100%;
`,XJ=t=>{const e=mi();return A.useEffect(()=>{document.title=zl+(t.type===an.resources?" - Select Resource Type":" - Select Projects Type")},[t.type]),D(iWe,{children:Pe($t,{children:[Pe(en,{style:{textAlign:"center",paddingBottom:"16px",color:"#888"},children:["Create a new"," ",t.type===an.resources?"resource":"project"," ",":"]}),D(tWe,{children:t.items.map((n,r)=>Pe(nWe,{variant:"outlined",title:n.tooltip,onClick:()=>e(n.url),children:[D("div",{children:n.name}),D(rWe,{children:n.icon})]},r))}),Pe(RJ,{type:t.type,acceptableSuffixes:[".json",".json.zip",".csv",".csv.zip"],handleFiles:n=>{console.log("handleFiles",n)},children:[D(Ak,{}),D(eWe,{type:t.type})]})]})})};function sWe(){const[t,e]=A.useState(!0);return Pe(qc,{open:t,fullWidth:!0,maxWidth:"xl",hideBackdrop:!1,onClick:()=>e(!1),children:[D(XJ,{type:an.resources,items:[{icon:D(Fy,{fontSize:"large"}),name:"MapTile",url:"/resources/create/mapTile",tooltip:"MapTile"},{icon:D(bf,{fontSize:"large"}),name:"GADM GeoJSON",url:"/resources/create/gadm",tooltip:"GADM Country(Level 0), division(Level 1) and subdivision(Level 2,3) shape files"},{icon:D(WD,{fontSize:"large"}),name:"Generic GeoJSON",url:"/resources/create/geojson",tooltip:"Generic GeoJSON files"},{icon:D(xf,{fontSize:"large"}),name:"IDE-GSM Cities",url:"/resources/create/cities",tooltip:"IDE-GSM data file includes city information, GDP, population, etc."},{icon:D(Qm,{fontSize:"large"}),name:"IDE-GSM Routes",url:"/resources/create/routes",tooltip:"IDE-GSM data file includes route information, start, end, distance, etc."}]}),D(Bm,{to:"/resources",children:D(fi,{size:"large",sx:{position:"absolute",top:"4px",right:"4px"},children:D(wd,{style:{width:"40px",height:"40px"}})})})]})}const XD={idle:"idle",started:"started",loading:"loading",finished:"finished",error:"error"},oWe=[],aWe=Ld(oWe),lWe={},YJ=Ld(lWe),cWe={progress:0,total:0,loaded:0,type:XD.loading},KJ=FW(cWe);async function uWe(t){const e=[];let n=0;for(;;){const{value:s,done:o}=await t.read();if(o)break;e.push(s),n+=s.length}const r=new Uint8Array(n);let i=0;for(const s of e)r.set(s,i),i+=s.length;return r.buffer}const qJ=async t=>{const e=window.location.hostname==="localhost",n=PJ(t,e);console.log(n);const r=await fetch(n).catch(i=>{throw i});if(e){const i=r.body.getReader(),s=await uWe(i);return t.endsWith(".zip")?hWe(s):new Uint8Array(s)}else{const i=(await r.json()).contents;return t.endsWith(".zip")?await dWe(i):new TextEncoder().encode(i)}};async function dWe(t){const e=atob(t.split("base64,")[1]),r=await new GD().loadAsync(e,{base64:!0}),i=Object.keys(r.files);if(i.length!==1)throw new Error("ZIP1");return await r.file(i[0]).async("uint8array")}async function hWe(t){const n=await new GD().loadAsync(t),r=Object.keys(n.files);if(r.length!==1)throw new Error("ZIP1");return await n.file(r[0]).async("uint8array")}function IG(t){return new Promise(e=>setTimeout(e,t))}var LE=(t=>(t[t.staged=0]="staged",t[t.loading=1]="loading",t[t.success=2]="success",t[t.error=3]="error",t))(LE||{});const fWe=async({urlList:t,onStatusChange:e,onSummaryChange:n,onLoad:r})=>{const i={};let s=0;const o=t.length;n({progress:0,loaded:0,total:o});for(const a of t){try{e(a,{status:1});const l=await qJ(a);r({url:a,data:l}),e(a,{status:2}),s++,n({loaded:s,total:o,progress:Math.round(s/o*100)})}catch(l){if(console.error(l),e(a,{status:3,error:l,retry:i[a]||0}),l.message.startsWith("Failed to fetch")||l.message.startsWith("Access to fetch")){await IG(3333+Math.random()*3333),i[a]=(i[a]||0)+1;continue}}await IG(100+Math.random()*500)}n({progress:100,loaded:o,total:o})};function pWe(){const[,t]=of(YJ),[,e]=of(KJ);async function n(r,i,s,o){const a=mWe(r,i),l=Rf(),c=await Pn.getResourcesByType(Ut.gadmGeoJSON),u=a_(c.map(h=>h.name),"GADM GeoJSON #");await Pn.createGADMGeoJsonResourceEntity({uuid:l,name:u,description:"",items:a});const d=await o_.openResource(l);return requestIdleCallback(async()=>{await fWe({urlList:s,onStatusChange:(h,f)=>{t(p=>({...p,[h]:f}))},onSummaryChange:({progress:h,loaded:f,total:p})=>{e(m=>{m.progress=h,m.loaded=f,m.total=p,m.type=XD.loading})},onLoad:async({url:h,data:f})=>{const p=new Uint8Array(f),m=new ReadableStream({start(_){_.enqueue(p),_.close()}});d.storeGadmGeoJson({stream:m,fileName:h,fileSize:void 0,cancelCallback(_){},errorCallback(_,y){},progressCallback(_){},startedCallback(_){},finishedCallback(_){}}),console.log("store: "+l+" "+h)}}),o()}),l}return{downloadGADMGeoJsonFiles:n}}function mWe(t,e){const n=[];for(let r=0;r<t.length;r++){const i=t[r];for(let s=0;s<=i.maxLevel;s++)e[r+1]&&e[r+1][s+1]&&n.push({countryName:i.countryName,countryCode:i.countryCode,level:s,url:IJ(i.countryCode,s,!1)})}return n}const ET=t=>D("span",{style:{display:"inline",verticalAlign:"middle",margin:"3px"},children:t.children}),li={onEnterTask:0,display:1,processing:2,done:3,onLeaveTask:4};function gWe(t){return Pe(ui,{children:[Pe(cd,{severity:"info",children:["GADM provides maps and spatial data for all countries and their sub-divisions. The data are freely available for academic use and other non-commercial use. Redistribution, or commercial use is not allowed without prior permission. See the"," ",D("a",{href:"https://gadm.org/license.html",children:"license"})," for more details."]}),D($t,{style:{display:"flex",justifyContent:"center",margin:"20px"},children:D(Ki,{size:"large",variant:"contained",onClick:t.handleClick,disabled:t.stepStatus[0]!==li.display,children:t.stepStatus[0]===li.display?Pe("a",{style:{textDecoration:"none",color:"white"},href:"https://gadm.org/license.html",target:"_blank",rel:"noreferrer",children:["See the license",D(ET,{children:D(Hz,{})})]}):Pe("span",{children:["See the license",D(ET,{children:D(Hz,{})})]})})})]})}function vWe(t){return ot("MuiLoadingButton",t)}const yWe=it("MuiLoadingButton",["root","loading","loadingIndicator","loadingIndicatorCenter","loadingIndicatorStart","loadingIndicatorEnd","endIconLoadingEnd","startIconLoadingStart"]),dc=yWe,_We=["children","disabled","id","loading","loadingIndicator","loadingPosition","variant"],bWe=t=>{const{loading:e,loadingPosition:n,classes:r}=t,i={root:["root",e&&"loading"],startIcon:[e&&`startIconLoading${xe(n)}`],endIcon:[e&&`endIconLoading${xe(n)}`],loadingIndicator:["loadingIndicator",e&&`loadingIndicator${xe(n)}`]},s=st(i,vWe,r);return U({},r,s)},xWe=t=>t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"&&t!=="classes",EWe=Se(Ki,{shouldForwardProp:t=>xWe(t)||t==="classes",name:"MuiLoadingButton",slot:"Root",overridesResolver:(t,e)=>[e.root,e.startIconLoadingStart&&{[`& .${dc.startIconLoadingStart}`]:e.startIconLoadingStart},e.endIconLoadingEnd&&{[`& .${dc.endIconLoadingEnd}`]:e.endIconLoadingEnd}]})(({ownerState:t,theme:e})=>U({[`& .${dc.startIconLoadingStart}, & .${dc.endIconLoadingEnd}`]:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}},t.loadingPosition==="center"&&{transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),[`&.${dc.loading}`]:{color:"transparent"}},t.loadingPosition==="start"&&t.fullWidth&&{[`& .${dc.startIconLoadingStart}, & .${dc.endIconLoadingEnd}`]:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0,marginRight:-8}},t.loadingPosition==="end"&&t.fullWidth&&{[`& .${dc.startIconLoadingStart}, & .${dc.endIconLoadingEnd}`]:{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0,marginLeft:-8}})),wWe=Se("span",{name:"MuiLoadingButton",slot:"LoadingIndicator",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.loadingIndicator,e[`loadingIndicator${xe(n.loadingPosition)}`]]}})(({theme:t,ownerState:e})=>U({position:"absolute",visibility:"visible",display:"flex"},e.loadingPosition==="start"&&(e.variant==="outlined"||e.variant==="contained")&&{left:e.size==="small"?10:14},e.loadingPosition==="start"&&e.variant==="text"&&{left:6},e.loadingPosition==="center"&&{left:"50%",transform:"translate(-50%)",color:(t.vars||t).palette.action.disabled},e.loadingPosition==="end"&&(e.variant==="outlined"||e.variant==="contained")&&{right:e.size==="small"?10:14},e.loadingPosition==="end"&&e.variant==="text"&&{right:6},e.loadingPosition==="start"&&e.fullWidth&&{position:"relative",left:-10},e.loadingPosition==="end"&&e.fullWidth&&{position:"relative",right:-10})),TWe=A.forwardRef(function(e,n){const r=A.useContext(PN),i=R1(r,e),s=at({props:i,name:"MuiLoadingButton"}),{children:o,disabled:a=!1,id:l,loading:c=!1,loadingIndicator:u,loadingPosition:d="center",variant:h="text"}=s,f=$e(s,_We),p=kd(l),m=u??Z.jsx(Mf,{"aria-labelledby":p,color:"inherit",size:16}),_=U({},s,{disabled:a,loading:c,loadingIndicator:m,loadingPosition:d,variant:h}),y=bWe(_),x=c?Z.jsx(wWe,{className:y.loadingIndicator,ownerState:_,children:m}):null;return Z.jsxs(EWe,U({disabled:a||c,id:p,ref:n},f,{variant:h,classes:y,ownerState:_,children:[_.loadingPosition==="end"?o:x,_.loadingPosition==="end"?x:o]}))}),SWe=TWe;function CWe(t){return Pe(ui,{children:[D(cd,{severity:"info",children:"Next, you are going to download the index file which contains a list of countries and its shapes available. It will be used to download the shape files."}),D($t,{style:{display:"flex",justifyContent:"center",margin:"20px"},children:t.stepStatus[1]!==li.processing&&t.stepStatus[1]===li.display?D(Ki,{size:"large",variant:"contained",onClick:t.handleClick,disabled:t.stepStatus[1]!==li.display,endIcon:D(Ow,{}),children:"Download the index file"}):t.stepStatus[1]===li.processing?D(SWe,{style:{width:"250px"},size:"large",variant:"outlined",disabled:!0,loading:!0,endIcon:D(Ow,{}),loadingPosition:"end",children:"Downloading"}):D(Ki,{size:"large",variant:"outlined",disabled:!0,children:"Download completed, go next!"})})]})}const AWe=Tt(NN)`
  & > tbody > tr > td {
    background-color: rgba(245, 245, 245);
  }
`,RWe=A.memo(({levelMax:t,countryMetadataList:e,checkboxMatrix:n,onChange:r})=>{const i=Rv(t),s=A.useCallback(f=>{let p=0,m=0,_=0;for(let y=1;y<n.length;y++)if(f<n[y].length){if(p++,n[y][f]?m++:_++,p===m||p===_)continue;return!0}return!1},[n]),o=A.useCallback(f=>{let p=0,m=0;const _=n[f].length-1;for(let x=0;x<_;x++)n[f][x+1]?p++:m++;return!(p===_&&m===0||m===_&&p===0)},[n]),a=A.useCallback((f,p)=>{r(Jp(n,m=>{m[f][p]=!m[f][p]}))},[n]),l=A.useCallback(f=>{r(Jp(n,p=>{const m=!p[f][0];p[f][0]=m;for(let _=1;_<p[f].length;_++)p[f][_]=m}))},[n]),c=A.useCallback(f=>{r(Jp(n,p=>{const m=!p[0][f];p[0][f]=m;for(let _=1;_<p.length;_++)f<p[_].length&&(p[_][f]=m)}))},[n]),u=A.useCallback(()=>{r(Jp(n,f=>{const p=!f[0][0];for(let m=0;m<f.length;m++)for(let _=0;_<f[m].length;_++)f[m][_]=p;return f}))},[n]),d=A.useCallback(()=>Object.keys(n).length>0&&Pe(ui,{children:[Pe(Jn,{component:"th",scope:"row",children:[D(Oa,{checked:n[0][0],indeterminate:n[0][0]===void 0,onChange:u,name:"all"}),D(en,{sx:{fontStyle:"bold"},children:"Select/Unselect All"})]},"-1"),i.map(f=>Pe(Jn,{component:"th",scope:"row",children:[D(Oa,{checked:n[0][f+1],indeterminate:s(f+1),onChange:()=>c(f+1),name:`${f}`}),D(Wi,{title:`Level ${f}: ${f===0?"Country":f===1?"Division":f===2?"Subdivision":f===3?"Subsubdivision":""}`,children:Pe(en,{sx:{fontStyle:"bold"},children:[f===0?D(bf,{}):f===1?D(xf,{}):f===2?D(l3,{}):f===3?D(iY,{}):f===4?D(sY,{}):"","Level ",f]})})]},f))]}),[n]),h=A.useCallback(()=>n.length>0&&e.map((f,p)=>Pe(qm,{children:[Pe(Jn,{component:"th",scope:"row",children:[D(Oa,{checked:n[p+1][0],indeterminate:o(p+1),onChange:()=>l(p+1),name:`${p+1}`}),Pe("a",{href:`https://gadm.org/maps/${f.countryCode}.html`,target:"_blank",rel:"noreferrer",children:[f.countryName,"(",f.countryCode,")"]})]}),i.map(m=>D(Jn,{children:m<=f.maxLevel&&Pe(ui,{children:[D(Oa,{checked:n[p+1][m+1],onChange:()=>a(p+1,m+1),name:`${p+1}_${m+1}`}),m===0&&D("a",{href:GJ(f.countryCode),target:"_blank",rel:"noreferrer",children:m}),m===1&&D("a",{href:VVe(f.countryCode,m),target:"_blank",rel:"noreferrer",children:m})]})},m))]},p)),[n]);return Object.keys(n).length===0?D($t,{style:{display:"flex",justifyContent:"center",margin:"20px"},children:D(Mf,{})}):D($t,{children:Pe(AWe,{stickyHeader:!0,size:"small",children:[D(BN,{children:D(qm,{children:d()})}),D(DN,{children:h()})]})})}),PWe=({createText:t})=>{const[e,n]=A.useState(null),r=A.useCallback(async()=>{try{const i=t();console.log("text",i),await navigator.clipboard.writeText(i),n(!0)}catch(i){console.error("Failed to copy: ",i),n(!1)}},[t]);return D(fi,{onClick:r,children:Pe(en,{children:[D(GX,{}),e===null?null:e?D(RSe,{}):D(tY,{})]})})},IWe=A.memo(({urlList:t})=>t.length===0?null:D($t,{style:{position:"absolute",bottom:"20px",width:"100%",display:"flex",justifyContent:"center",textAlign:"center"},children:Pe(en,{children:[t.length+(t.length>1?" files":" file")+" selected"," ",D(ET,{children:D(PWe,{createText:()=>t.join(`
`)})})]})}));function MWe(t){return Pe(M7,{children:[D(cd,{severity:"info",children:"Select some countries and levels to be downloaded into your resource. You can select multiple files from different countries and levels."}),!t.countryMetadataList||t.countryMetadataList.length===0?D($t,{style:{display:"flex",justifyContent:"center",margin:"8px"},children:D(Mf,{variant:"indeterminate"})}):Pe(ui,{children:[D(RWe,{levelMax:t.LEVEL_MAX,countryMetadataList:t.countryMetadataList,checkboxMatrix:t.checkboxMatrix,onChange:t.onChange}),D(IWe,{urlList:t.urlList})]})]})}function LWe(t){return Pe($t,{sx:{display:"flex",alignItems:"center"},children:[D($t,{sx:{width:"100%",mr:1},children:D(_M,{variant:"determinate",...t})}),D($t,{sx:{minWidth:180},children:t.total>0&&`${t.loaded} / ${t.total} (${Math.round(100*t.loaded/t.total)} %)`})]})}function OWe(t){return Pe(ui,{children:[t.urlList.length===0&&Pe(cd,{severity:"warning",children:["[",t.urlList.length,"] No data file to download at this time. Skip to next."]}),t.downloadSummaryStatus&&t.downloadSummaryStatus.type===XD.loading&&t.downloadSummaryStatus.progress<100&&Pe(ui,{children:[D($t,{style:{display:"flex",justifyContent:"center",margin:"8px"},children:D(Mf,{variant:"indeterminate"})}),D(cd,{severity:"info",children:"downloading files..."})]}),t.downloadSummaryStatus.progress===100&&Pe(ui,{children:[D($t,{style:{display:"flex",justifyContent:"center",margin:"8px"},children:D(LSe,{})}),D(cd,{severity:"success",children:"download completed."})]}),t.urlList.length>=1&&t.downloadSummaryStatus&&D(LWe,{variant:"determinate",loaded:t.downloadSummaryStatus.loaded,total:t.downloadSummaryStatus.total,value:t.downloadSummaryStatus.progress}),D($t,{style:{margin:"20px"},children:D(I7,{direction:"column",spacing:2,children:t.urlList.map((e,n)=>{const r=t.downloadStatus[e];return r?r.status===LE.loading?D(Ob,{label:e,deleteIcon:D(Ow,{})},n):r.status===LE.success?D(Ob,{color:"primary",label:e,deleteIcon:D(MSe,{})},n):r.status===LE.error?D(qme,{badgeContent:r.retry,color:"warning",children:D(Ob,{color:"warning",label:e,deleteIcon:D(tY,{})})},n):D(ui,{}):D(Ob,{label:e,variant:"outlined",deleteIcon:D(Ow,{})},n)})})})]})}function kWe(t){return Pe(ui,{children:[D(cd,{severity:"info",children:"Simplify polygons to reduce heavy load of CPU/Memory/Storage."}),D($t,{style:{display:"flex",justifyContent:"center",margin:"20px"},children:D(O1,{sx:{width:"70%"},min:0,defaultValue:3,max:6,step:1,marks:[{value:0,label:"0.1 (Low Quality)"},{value:1,label:"0.05"},{value:2,label:"0.01"},{value:3,label:"0.005"},{value:4,label:"0.001"},{value:5,label:"0.0005"},{value:6,label:"0.0001 (High Quality)"}],onChangeCommitted:(e,n)=>{t.setSimplifyLevel(n)}})})]})}function NWe(){return D(cd,{severity:"success",children:"Congratulations! You finished the GADM resource preparation."})}const DWe=()=>"https://gadm.org/download_country.html",BWe=async()=>{const t=await qJ(DWe()),e=new TextDecoder("utf-8").decode(t),n=/<option value="([^"]+)_(.+?)_(\d+)">(.+?)<\/option>/g,r=[];let i;for(;(i=n.exec(e))!==null;){const[s,o,a,l]=i;r.push({countryCode:o,countryName:a,maxLevel:parseInt(l,10)-1})}return r};function FWe(t,e,n){const r=[];for(let i=0;i<t.length;i++){const s=t[i];for(let o=0;o<=s.maxLevel;o++)i+1<e.length&&o+1<e[i+1].length&&e[i+1][o+1]&&r.push(IJ(s.countryCode,o,n))}return r}const T2=3;function MG(t,e){return[new Array(t+1).fill(!1),...e.map((n,r)=>new Array(Math.min(t+1,n.maxLevel+2)).fill(!1))]}const UWe=()=>{var k,R;const[t,e]=A.useState(""),[n,r]=Gn.useState(0),[i,s]=Gn.useState([li.done,li.display,null,null,null]),[o,a]=of(aWe),[l,c]=A.useState(MG(T2,o));A.useEffect(()=>{c(MG(T2,o))},[o]);const[u,d]=A.useState([]),h=Fm(YJ),f=Fm(KJ),[,p]=A.useState(3),{downloadGADMGeoJsonFiles:m}=pWe();A.useEffect(()=>{document.title=zl+" - Setup GADM maps"},[]);const _=()=>Object.values(i).every(z=>z===li.done),y=async()=>{if(await E(n),n===0)return x("/resources",{replace:!0});r(n-1),await w(n-1)},x=mi(),b=async()=>{0<=n&&await E(n),n<I.length&&(await w(n+1),r(n+1))},E=async z=>{s(X=>{const G=[...X];return G[z]=li.onLeaveTask,G}),I[z]&&I[z].onLeave&&await I[z].onLeave(),s(X=>{const G=[...X];return G[z]=li.done,G})},w=async z=>{0<=z&&(s(X=>{const G=[...X];return G[z]=li.onEnterTask,G}),I[z]&&I[z].onEnter&&await I[z].onEnter(),s(X=>{const G=[...X];return G[z]=li.display,G}))};A.useEffect(()=>{w(0)},[]);const T=A.useCallback(z=>()=>{s(X=>{const G=[...X];return G[z]=li.done,G})},[]),C=(z,X)=>{s(G=>{const j=[...G];return j[z]=X||li.done,j})},P=A.useCallback(async()=>{C(1,li.processing);const z=await BWe();a(z),C(1),T(1)},[a]),M=A.useCallback(z=>{c(z);const X=FWe(o,z,!1);d(X),C(2)},[o,c,d]),N=A.useCallback(()=>{C(3)},[]),F=()=>n!==4&&n!==5&&i[n]!==li.done,I=[{label:"Step 1: Read and accept the GADM license",contents:D(gWe,{handleClick:T(0),stepStatus:i})},{label:"Step 2: Download the index file",contents:D(CWe,{handleClick:P,stepStatus:i})},{label:"Step 3: Select countries/levels to be downloaded",contents:D(MWe,{LEVEL_MAX:T2,countryMetadataList:o,checkboxMatrix:l,onChange:M,urlList:u})},{label:"Step 4: Download the countries/levels files",contents:D(OWe,{urlList:u,downloadSummaryStatus:f,downloadStatus:h}),onEnter:async()=>{const z=await m(o,l,u,N);e(z)}},{label:"Step 5: Simplify polygons",contents:D(kWe,{setSimplifyLevel:p})},{label:"Step 6: Finish",contents:D(NWe,{}),onLeave:async()=>x(`/resources/update/${Ut.gadmGeoJSON}/${t}`)}];return Pe(qc,{open:!0,maxWidth:"xl",fullWidth:!0,children:[Pe(Lf,{children:[D(en,{children:"Create a new resource from the GADM maps"}),D(ixe,{activeStep:n,style:{marginLeft:"48px",marginRight:"48px",marginTop:"16px"},children:I.map((z,X)=>D(_be,{completed:i[X]===li.done,children:D(Hbe,{color:"inherit",children:z.label})},z.label))})]}),D(Zc,{children:D($t,{children:_()?D(en,{sx:{mt:2,mb:1},children:"All steps completed - you're finished"}):Pe(E7,{children:[Pe(w7,{children:[D(en,{sx:{fontSize:"18px",fontStyle:"bold"},children:(k=I[n])==null?void 0:k.label}),(R=I[n])==null?void 0:R.contents]}),D(Ige,{})]})})}),Pe(Ag,{sx:{margin:"10px"},children:[D(Bm,{to:"/resources",children:D(fi,{size:"large",sx:{position:"absolute",top:"4px",right:"4px"},children:D(wd,{style:{width:"40px",height:"40px"}})})}),D(Ki,{size:"large",style:{padding:"16px 48px 16px 48px"},variant:"contained",color:"inherit",disabled:i[n]===li.onEnterTask,onClick:y,children:n===0?"Cancel":"Back"}),D($t,{sx:{flex:"1 1 auto"}}),D(Ki,{size:"large",style:{padding:"16px 48px 16px 48px"},variant:"contained",disabled:F(),title:n<I.length-1?`Step ${n+1}`:"Finish",onClick:b,children:n<I.length-1?"Next":"Finish"})]})]})},zWe=()=>{A.useEffect(()=>{document.title=zl+" - IDE GSM Cities"},[]);const t=mi();return Pe(qc,{open:!0,maxWidth:"xl",children:[D(Lf,{children:D(en,{children:"IDE GSM Cities"})}),D(Zc,{children:D(IN,{children:"Please upload your local cities.csv files."})}),D(Ag,{sx:{margin:"10px"},children:D(fi,{size:"large",sx:{position:"absolute",top:"16px",right:"16px"},onClick:()=>{t("/resources",{replace:!0})},children:D(wd,{})})})]})},$We=()=>{A.useEffect(()=>{document.title=zl+" - IDE GSM Routes"},[]);const t=mi();return Pe(qc,{open:!0,maxWidth:"xl",children:[D(Lf,{children:D(en,{children:"IDE GSM Routes"})}),D(Zc,{children:D(IN,{children:"Please upload your local routes.csv files."})}),D(Ag,{sx:{margin:"10px"},children:D(fi,{size:"large",sx:{position:"absolute",top:"16px",right:"16px"},onClick:()=>{t("/resources",{replace:!0})},children:D(wd,{})})})]})},LG=({tableType:t})=>{const{uuid:e,type:n,name:r}=ql(),i=mi(),s=A.useCallback(()=>{switch(t){case an.projects:i("/projects",{replace:!0});break;case an.resources:i("/resources",{replace:!0});break;default:throw new Error(`Unknown Type: ${t}`)}},[i,t]),o=A.useCallback(async()=>{switch(t){case an.projects:await Yt.delete(Hi.fileNameOf(t,e)),await Mr.deleteProject(e);break;case an.resources:await Yt.delete(o_.fileNameOf(t,e)),await Pn.deleteResource(e);break;default:throw new Error(`Unknown Type: ${t}`)}s()},[s,e]),a=A.useCallback(()=>{s()},[s]);return Pe(qc,{open:!0,children:[Pe(Lf,{children:[Zh[n]," Delete",t===an.projects?" project":" resource"]}),Pe(Zc,{dividers:!0,children:[D(en,{children:"Are you sure you want to delete the following item?"}),D(Bm,{to:vO({uuid:e,type:n}),children:r})]}),Pe(Ag,{children:[D(Ki,{variant:"outlined",onClick:o,endIcon:D(HX,{}),children:"Delete"}),D(Ki,{variant:"contained",autoFocus:!0,onClick:a,children:"Cancel"})]})]})};function jWe(){const[t,e]=A.useState(!0);return Pe(qc,{open:t,fullWidth:!0,maxWidth:"xl",hideBackdrop:!1,onClick:()=>e(!1),children:[D(XJ,{type:an.projects,items:[{icon:D(JX,{fontSize:"large"}),name:"Racetrack Model",url:`/projects/create/${Lt.Racetrack}`,tooltip:"Paul Krugman's spatial economy model"},{icon:D(c3,{fontSize:"large"}),name:"Graph Structured Model",url:`/projects/create/${Lt.Racetrack}`,tooltip:"Graph structured spatial economy model"},{icon:D(eY,{fontSize:"large"}),name:"Real-World Model",url:`/projects/create/${Lt.RealWorld}`,tooltip:"Full-set simulation model"}]}),D(Bm,{to:"/projects",children:D(fi,{size:"large",sx:{position:"absolute",top:"4px",right:"4px"},children:D(wd,{style:{width:"40px",height:"40px"}})})})]})}const GWe=()=>{A.useEffect(()=>{document.title=zl+" - IDE GSM Cities"},[]);const t=mi();return Pe(qc,{open:!0,maxWidth:"xl",children:[D(Lf,{children:D(en,{children:"GeoJSON file"})}),D(Zc,{children:D(IN,{children:"Please upload your local GeoJSON json files."})}),D(Ag,{sx:{margin:"10px"},children:D(fi,{size:"large",sx:{position:"absolute",top:"16px",right:"16px"},onClick:()=>{t("/resources",{replace:!0})},children:D(wd,{})})})]})},YD=({uuid:t,tableType:e,type:n,onSubmit:r,children:i})=>{const s=ms(),o=iye(s.breakpoints.down("md")),a=mi(),l=()=>{switch(e){case an.projects:a("/projects",{replace:!0});break;case an.resources:a("/resources",{replace:!0});break;default:throw new Error(`Unknown ProjectType: ${e}`)}},c=()=>l();return A.useEffect(()=>{document.title=zl+`- ${t?"Update ":"Create New"} ${e}`},[t,e]),Pe(qc,{open:!0,fullWidth:!0,fullScreen:o,PaperProps:{component:"form",onSubmit:async u=>{u.preventDefault();const d=new FormData(u.currentTarget);await r({uuid:t,type:n,formData:d}),l()}},children:[Pe(Lf,{children:[D(ET,{children:Zh[n]}),t?"Update":"Create new"," ",e===an.projects?"project":"resource"]}),Pe(Zc,{children:[i,D(Ag,{children:Pe($t,{css:If`
              display: flex;
              gap: 10px;
              align-content: center;
              justify-content: center;
            `,children:[D(Ki,{variant:"outlined",onClick:c,children:"Cancel"}),D(Ki,{variant:"contained",type:"submit",endIcon:t?D(nC,{}):D(TSe,{}),children:t?"Update":"Create"})]})})]})]})},ZJ=t=>{const{name:e,description:n,mapName:r,apiKey:i}=t;A.useEffect(()=>{document.title=zl+" - MapTiler Configuration"},[]);const s=["backdrop","basic-v2","bright-v2","dataviz","ocean","openstreetmap","outdoor-v2","satellite","streets-v2","toner-v2","topo-v2","winter-v2"],[o,a]=A.useState(r||s[0]);return D($t,{children:Pe(L1,{style:{display:"flex"},children:[D(Wi,{title:"Please give a new name for this resource",children:D(Gh,{name:"name",autoComplete:"off",defaultValue:e,label:"Name",required:!0,fullWidth:!0,margin:"dense"})}),D(Wi,{title:"Please select the map of name by MapTiler Cloud",children:Pe(ui,{children:[Pe(en,{children:["Please select the map name of"," ",D("a",{href:"https://cloud.maptiler.com/maps/",children:"MapTiler Cloud Maps"})]}),D(kN,{name:"mapName",value:o,onChange:l=>a(l.target.value),children:s.map(l=>D($v,{value:l,children:l},l))})]})}),D(Wi,{title:"Please enter your MapTiler Cloud API Key",children:Pe(ui,{children:[Pe(en,{children:["Please enter your"," ",D("a",{href:"https://cloud.maptiler.com/account/keys/",children:"MapTiler Cloud API Key"})]}),D(Gh,{name:"apiKey",autoComplete:"off",defaultValue:i,label:"API Key",required:!0,fullWidth:!0,margin:"dense"})]})}),D(Gh,{autoComplete:"off",name:"description",defaultValue:n,label:"Description",multiline:!0,rows:3,fullWidth:!0,margin:"dense"})]})})},HWe=()=>{const t=A.useCallback(async r=>{const i=Object.fromEntries(r.formData.entries());r.uuid?await Pn.updateResource(r.uuid,Ut.mapTiles,{...i}):await Pn.createResource(void 0,Ut.mapTiles,{...i})},[]),[e,n]=A.useState("");return Pn.getResourcesByType(Ut.mapTiles).then(r=>{const i="MapTiler Cloud API Key #",s=r.map(a=>a.name),o=a_(s,i);n(o)}),e===""?null:D(YD,{uuid:void 0,tableType:an.resources,type:Ut.mapTiles,onSubmit:t,children:D(ZJ,{name:e,mapName:"openstreetmap",description:"",apiKey:""})})},VWe=({type:t,name:e,description:n})=>Pe(ui,{children:["Please enter the name and description of this ",t,".",Pe(L1,{style:{display:"flex"},children:[D(Gh,{name:"name",autoComplete:"off",defaultValue:e,label:"Name",autoFocus:!0,required:!0,fullWidth:!0,margin:"dense"}),D(Gh,{autoComplete:"off",name:"description",defaultValue:n,label:"Description",multiline:!0,rows:8,fullWidth:!0,margin:"dense"})]})]}),WWe=()=>{const{uuid:t,type:e,name:n,description:r,mapName:i,apiKey:s}=ql(),o=A.useCallback(async a=>{const l=Object.fromEntries(a.formData.entries());t?await Pn.updateResource(t,e,{...l}):await Pn.createResource(t,e,{...l,items:[]})},[e,t]);return D(YD,{uuid:t,tableType:an.resources,type:e,onSubmit:o,children:Pe(Zc,{children:[e===Ut.gadmGeoJSON&&D(VWe,{type:"resource",name:n,description:r}),e===Ut.mapTiles&&D(ZJ,{name:n,description:r,mapName:i,apiKey:s})]})})};var KD={};Object.defineProperty(KD,"__esModule",{value:!0});var QJ=KD.useGeolocated=void 0;const js=A;function XWe(t={}){const{positionOptions:e={enableHighAccuracy:!0,maximumAge:0,timeout:1/0},isOptimisticGeolocationEnabled:n=!0,userDecisionTimeout:r=void 0,suppressLocationOnMount:i=!1,watchPosition:s=!1,geolocationProvider:o=typeof navigator<"u"?navigator.geolocation:void 0,watchLocationPermissionChange:a=!1,onError:l,onSuccess:c}=t,u=(0,js.useRef)(0),d=(0,js.useRef)(!0),h=(0,js.useRef)(0),[f,p]=(0,js.useState)(n),[m,_]=(0,js.useState)(),[y,x]=(0,js.useState)(),[b,E]=(0,js.useState)(),[w,T]=(0,js.useState)(),C=(0,js.useCallback)(()=>{u.current&&window.clearTimeout(u.current)},[]),P=(0,js.useCallback)(F=>{C(),d.current&&(_(()=>{}),p(!1),E(F)),l==null||l(F)},[l,C]),M=(0,js.useCallback)(F=>{C(),d.current&&(_(F.coords),x(F.timestamp),p(!0),E(()=>{})),c==null||c(F)},[c,C]),N=(0,js.useCallback)(()=>{if(!o||!o.getCurrentPosition||!o.watchPosition)throw new Error("The provided geolocation provider is invalid");r&&(u.current=window.setTimeout(()=>{P()},r)),s?h.current=o.watchPosition(M,P,e):o.getCurrentPosition(M,P,e)},[o,s,r,P,M,e]);return(0,js.useEffect)(()=>{let F;return a&&o&&"permissions"in navigator&&navigator.permissions.query({name:"geolocation"}).then(I=>{F=I,F.onchange=()=>{T(F.state)}}).catch(I=>{console.error("Error updating the permissions",I)}),()=>{F&&(F.onchange=null)}},[]),(0,js.useEffect)(()=>(i||N(),()=>{C(),s&&h.current&&(o==null||o.clearWatch(h.current))}),[w]),{getPosition:N,coords:m,timestamp:y,isGeolocationEnabled:f,isGeolocationAvailable:!!o,positionError:b}}QJ=KD.useGeolocated=XWe;const OG=()=>{const{uuid:t,type:e,name:n,description:r}=ql(),{coords:i}=QJ({positionOptions:{enableHighAccuracy:!1},userDecisionTimeout:5e3}),{latitude:s,longitude:o,zoom:a}={latitude:(i==null?void 0:i.latitude)||SR.latitude,longitude:(i==null?void 0:i.longitude)||SR.longitude,zoom:SR.zoom},l=A.useCallback(async c=>{const u=Object.fromEntries(c.formData.entries());if(t)await Mr.updateProject(t,e,{...u});else{const d=e===Lt.RealWorld?[a,s,o]:[1,0,0];await Mr.createProject(t,e,{...u,viewportCenter:d})}},[s,o,e,t,a]);return D(YD,{uuid:t,tableType:an.projects,type:e,onSubmit:l,children:Pe(Zc,{children:["Please enter the name and description of the project.",Pe(L1,{style:{display:"flex"},children:[D(Gh,{name:"name",autoComplete:"off",defaultValue:n,label:"Name",autoFocus:!0,required:!0,fullWidth:!0,margin:"dense"}),D(Gh,{autoComplete:"off",name:"description",defaultValue:r,label:"Description",multiline:!0,rows:8,fullWidth:!0,margin:"dense"})]})]})})},YWe=t=>t===Ut.mapTiles?Ut.mapTiles:t===Ut.gadmGeoJSON?Ut.gadmGeoJSON:t===Ut.idegsmCities?Ut.idegsmCities:t===Ut.idegsmRoutes?Ut.idegsmRoutes:null,KWe=async t=>new Promise((e,n)=>{const r=YWe(t);if(r===null)return n("Invalid type");Pn.getResourcesByType(r).then(i=>{const s=t+" #",o=i.map(a=>a.name);return e(a_(o,s))})}),kG=async({params:t})=>t.uuid===void 0?{uuid:void 0,type:t.type,name:await KWe(t.type)}:Pn.getResource(t.uuid),qWe=t=>t===Lt.Racetrack?Lt.Racetrack:t===Lt.Graph?Lt.Graph:t===Lt.RealWorld?Lt.RealWorld:null,ZWe=async t=>new Promise((e,n)=>{const r=qWe(t);if(r===null)return n("Invalid type");Mr.getProjectsByType(r).then(i=>{const s=t+" #",o=i.map(a=>a.name);return e(a_(o,s))})}),S2=async({params:t})=>t.uuid===void 0?{uuid:void 0,type:t.type,name:await ZWe(t.type)}:Mr.getProject(t.uuid);console.log("built: 2024-02-27 19:39");const QWe=ise([{path:"/",element:D(SVe,{}),children:[{path:"/resources",element:D(SG,{type:an.resources,items:[D(RG,{}),D(PG,{})]}),loader:VJ,children:[{path:"/resources/new",element:D(sWe,{})},{path:"/resources/create/mapTile",element:D(HWe,{})},{path:"/resources/create/gadm",element:D(UWe,{})},{path:"/resources/create/geojson",element:D(GWe,{})},{path:"/resources/create/cities",element:D(zWe,{})},{path:"/resources/create/routes",element:D($We,{})},{path:"/resources/delete/:type/:uuid",element:D(LG,{tableType:an.resources}),loader:kG},{path:"/resources/update/:type/:uuid",element:D(WWe,{}),loader:kG}]},{path:"/projects",element:D(SG,{type:an.projects,items:[D(RG,{}),D(PG,{})]}),loader:WJ,children:[{path:"/projects/new",element:D(jWe,{})},{path:"/projects/delete/:type/:uuid",element:D(LG,{tableType:an.projects}),loader:S2},{path:"/projects/create/:type",element:D(OG,{}),loader:S2},{path:"/projects/update/:type/:uuid",element:D(OG,{}),loader:S2}]}]},{path:"/:projectType/:uuid/:zoom/:y/:x/",element:D(sHe,{}),loader:$le}]),JWe=document.getElementById("root"),e9e=PW(JWe);e9e.render(D(A.StrictMode,{children:D(fse,{router:QWe})}));export{Pi as c,Ad as g};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = []
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
