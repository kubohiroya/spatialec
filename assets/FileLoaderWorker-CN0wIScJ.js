(function(){"use strict";var Vr=(t=>(t.start="start",t.cancel="cancel",t))(Vr||{}),Pt=(t=>(t.started="started",t.progress="progress",t.cancel="cancel",t.error="error",t.finished="finished",t))(Pt||{});let tn;const ls=new Uint8Array(16);function cs(){if(!tn&&(tn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!tn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return tn(ls)}const At=[];for(let t=0;t<256;++t)At.push((t+256).toString(16).slice(1));function hs(t,e=0){return At[t[e+0]]+At[t[e+1]]+At[t[e+2]]+At[t[e+3]]+"-"+At[t[e+4]]+At[t[e+5]]+"-"+At[t[e+6]]+At[t[e+7]]+"-"+At[t[e+8]]+At[t[e+9]]+"-"+At[t[e+10]]+At[t[e+11]]+At[t[e+12]]+At[t[e+13]]+At[t[e+14]]+At[t[e+15]]}var qr={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function Fn(t,e,n){if(qr.randomUUID&&!e&&!t)return qr.randomUUID();t=t||{};const i=t.random||(t.rng||cs)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){n=n||0;for(let r=0;r<16;++r)e[n+r]=i[r];return e}return hs(i)}const Te={RegionCentroid:1,RoadWaypoint:2,Airport:3,AirwayWaypoint:4,Seaport:5,SeawayWaypoint:6,RailwayStation:7,RailwayWaypoint:8},Ie={Road:1,Airway:2,Seaway:3,Railway:4,HighSpeedRailway:5},Vt=10,Mn={NOT_CONTAINED:-1},en=256;function Re(t,e){let n=Math.sin(t.lat*Math.PI/180);n=Math.min(Math.max(n,-.9999),.9999);const i=en*(.5+t.lng/360)*Math.pow(2,e),r=en*(.5-Math.log((1+n)/(1-n))/(4*Math.PI))*Math.pow(2,e);return{x:i,y:r}}function Le(t,e){return{x:Math.floor(t.x/en),y:Math.floor(t.y/en),z:e}}function nn({x:t,y:e,z:n}){let i=0;for(let r=0;r<n;r++){const s=1<<r;t&s&&(i|=1<<2*r),e&s&&(i|=1<<2*r+1)}return i}function fs(t,e){let n=Vt;for(;n>0;){const i=Le(Re(t,n),n),r=Le(Re(e,n),n),s=nn(i),o=nn(r);if(s!==o)break;n--}return n}function rn(t,e,n){if(n===void 0&&(n=fs(t,e)),n<0||n>Vt)throw new Error(`Invalid zoom level: ${n}`);if(t.lng>e.lng){const i=Un(t,{lat:e.lat,lng:180},n),r=Un({lat:t.lat,lng:-180},e,n);return[i,r]}else return t.lng===-180&&e.lng===180?[[0]]:[Un(t,e,n)]}function Un(t,e,n){const i=Re(t,n),r=Re(e,n),s=Le(i,n),o=Le(r,n),a=[];for(let u=s.x;u<=o.x;u++)for(let f=s.y;f<=o.y;f++)a.push(nn({x:u,y:f,z:n}));return a}function ds(t,e,n){if(n<0||n>Vt)throw new Error(`Invalid max zoom level: ${n}`);const i={};for(let r=0;r<=n;r++)i[`z${r}`]=rn(t,e,r);return i}const ps=async({resource:t,stream:e,fileName:n,fileSize:i,csvLoaders:r,startedCallback:s,progressCallback:o,errorCallback:a,cancelCallback:u,finishedCallback:f})=>{let h=[],d=0;s(n,t.name);let l="",g=null,c=0,v=0;const m=e.getReader();for(;;){console.log(n,c);const{done:b,value:E}=await m.read();if(b||!E)break;const A=new TextDecoder("utf-8").decode(E);l+=A;const T=l.split(/[\r\n]+/);v+=T.length,l.endsWith(`
`)?l="":l=T.pop()||"";for(let x=0;x<T.length;x++){c++;const S=T[x];if(d===0&&x===0){const[,L]=Object.entries(r).find(([F,W])=>{if(W.check(S))return!0})||[null,null];if(L===null)throw new Error("loader not found:"+S);g=L;continue}if(g===null)throw new Error("loader not selected");const N=await g.createEntity(t,S);N&&(h.push(N),d++,h.length===64&&(await g.bulkAddEntity(t,h),h=[])),o({type:Pt.progress,fileName:n,fileSize:i,progress:Math.round(c/v*100),index:c,total:v,unit:"lines"})}}if(g===null)throw new Error("loader not selected");h.length>0&&await g.bulkAddEntity(t,h),f(n)},_s=(t,e)=>{const n=t.split(/[.\s]/);return n[0]==="Stn"?Te.RailwayStation:n[0]==="Port"?Te.Seaport:n[0]==="Airport"?Te.Airport:e?Te.RegionCentroid:Te.RoadWaypoint},ms=t=>{if(t==="0")return Ie.Road;if(t==="1")return Ie.Seaway;if(t==="2")return Ie.Airway;if(t==="3")return Ie.Railway;if(t==="4")return Ie.HighSpeedRailway;throw new Error},gs={0:{check:t=>t==="CapitalCity,Latitude,Longitude,Region,Country,Habitable,Population,Employment,EmplyomentA,EmploymentM1,EmploymentM2,EmploymentM3,EmploymentM4,EmploymentM5,EmploymentS,EmploymentA2,GDP,GDPA,GDPM1,GDPM2,GDPM3,GDPM4,GDPM5,GDPS,GDPA2,Area,Mining,Grate,Plimit"||t==="CapitalCity,Latitude,Longitude,Region,Country,Habitable,Population,Employment,EmploymentA,EmploymentM1,EmploymentM2,EmploymentM3,EmploymentM4,EmploymentM5,EmploymentS,EmploymentA2,GDP,GDPA,GDPM1,GDPM2,GDPM3,GDPM4,GDPM5,GDPS,GDPA2,Area,Mining,Grate,Plimit",createEntity:async(t,e)=>{const[n,i,r,s,o,a,...u]=e.split(",");if(n==="")return null;const f=[parseFloat(i),parseFloat(r)],h={};for(let g=0;g<=Vt;g++)h[`z${g}`]=nn(Le(Re({lat:f[0],lng:f[1]},g),g));const d=_s(n,a==="1"),l={uuid:Fn(),lat:f[0],lng:f[1],country:o,name_1:s,name_2:"",name:n,type:d,...h};return console.log(l),l},bulkAddEntity:async(t,e)=>{await t.points.bulkAdd(e)}},1:{check:t=>t==="Start,End,Name,Distance,Speed,Border,Orverhead,Loading,Mode,Quality,Oneway,Freight,Country1,Region1,Country2,Region2"||t==="Start,End,Name,Distance,Speed,Border,Overhead,Loading,Mode,Quality,Oneway,Freight,Country1,Region1,Country2,Region2",createEntity:async(t,e)=>{const[n,i,r,s,o,a,u,f,h,_,d,l,g,c,v,m]=e.split(","),b=await t.points.where("name").equals(n).last(),E=await t.points.where("name").equals(i).last();if(!b||!E)throw new Error;const[A,T]=b.lat>E.lat?[b.lat,E.lat]:[E.lat,b.lat],[x,S]=b.lng>E.lng?[b.lng,E.lng]:[E.lng,b.lng],N={};for(let F=0;F<=Vt;F++){const W=rn({lat:A,lng:x},{lat:T,lng:S},F);if(W.length===0)N[`z${F}`]=Mn.NOT_CONTAINED;else if(W.length===1)if(W[0].length===1)N[`z${F}`]=W[0][0];else if(W[0].length>=2)N[`z${F}`]=N[`z${F-1}`];else throw new Error;else if(W.length===2)W[1].length===1?N[`z${F}_`]=W[1][0]:W[1].length>=2&&(N[`z${F}_`]=N[`z${F-1}_`]);else throw new Error("mortonNumber.length > 2 :"+W.join(" ,"))}return{uuid:Fn(),sourceName:b.name,sourceIdRef:b.uuid,sourceCountry:g,sourceName1:c,sourceName2:"",targetName:E.name,targetIdRef:E.uuid,targetCountry:v,targetName1:m,targetName2:"",name:r,mode:ms(h),...N}},bulkAddEntity:async(t,e)=>{await t.routeSegments.bulkAdd(e)}}};var sn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ys(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function on(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Yr={exports:{}};/*!

  JSZip v3.10.1 - A JavaScript class for generating and reading zip files
  <http://stuartk.com/jszip>

  (c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
  Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

  JSZip uses the library pako released under the MIT license :
  https://github.com/nodeca/pako/blob/main/LICENSE
  */(function(t,e){(function(n){t.exports=n()})(function(){return function n(i,r,s){function o(f,h){if(!r[f]){if(!i[f]){var _=typeof on=="function"&&on;if(!h&&_)return _(f,!0);if(a)return a(f,!0);var d=new Error("Cannot find module '"+f+"'");throw d.code="MODULE_NOT_FOUND",d}var l=r[f]={exports:{}};i[f][0].call(l.exports,function(g){var c=i[f][1][g];return o(c||g)},l,l.exports,n,i,r,s)}return r[f].exports}for(var a=typeof on=="function"&&on,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,i,r){var s=n("./utils"),o=n("./support"),a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(u){for(var f,h,_,d,l,g,c,v=[],m=0,b=u.length,E=b,A=s.getTypeOf(u)!=="string";m<u.length;)E=b-m,_=A?(f=u[m++],h=m<b?u[m++]:0,m<b?u[m++]:0):(f=u.charCodeAt(m++),h=m<b?u.charCodeAt(m++):0,m<b?u.charCodeAt(m++):0),d=f>>2,l=(3&f)<<4|h>>4,g=1<E?(15&h)<<2|_>>6:64,c=2<E?63&_:64,v.push(a.charAt(d)+a.charAt(l)+a.charAt(g)+a.charAt(c));return v.join("")},r.decode=function(u){var f,h,_,d,l,g,c=0,v=0,m="data:";if(u.substr(0,m.length)===m)throw new Error("Invalid base64 input, it looks like a data url.");var b,E=3*(u=u.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(u.charAt(u.length-1)===a.charAt(64)&&E--,u.charAt(u.length-2)===a.charAt(64)&&E--,E%1!=0)throw new Error("Invalid base64 input, bad content length.");for(b=o.uint8array?new Uint8Array(0|E):new Array(0|E);c<u.length;)f=a.indexOf(u.charAt(c++))<<2|(d=a.indexOf(u.charAt(c++)))>>4,h=(15&d)<<4|(l=a.indexOf(u.charAt(c++)))>>2,_=(3&l)<<6|(g=a.indexOf(u.charAt(c++))),b[v++]=f,l!==64&&(b[v++]=h),g!==64&&(b[v++]=_);return b}},{"./support":30,"./utils":32}],2:[function(n,i,r){var s=n("./external"),o=n("./stream/DataWorker"),a=n("./stream/Crc32Probe"),u=n("./stream/DataLengthProbe");function f(h,_,d,l,g){this.compressedSize=h,this.uncompressedSize=_,this.crc32=d,this.compression=l,this.compressedContent=g}f.prototype={getContentWorker:function(){var h=new o(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new u("data_length")),_=this;return h.on("end",function(){if(this.streamInfo.data_length!==_.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),h},getCompressedWorker:function(){return new o(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},f.createWorkerFrom=function(h,_,d){return h.pipe(new a).pipe(new u("uncompressedSize")).pipe(_.compressWorker(d)).pipe(new u("compressedSize")).withStreamInfo("compression",_)},i.exports=f},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,i,r){var s=n("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},r.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,i,r){var s=n("./utils"),o=function(){for(var a,u=[],f=0;f<256;f++){a=f;for(var h=0;h<8;h++)a=1&a?3988292384^a>>>1:a>>>1;u[f]=a}return u}();i.exports=function(a,u){return a!==void 0&&a.length?s.getTypeOf(a)!=="string"?function(f,h,_,d){var l=o,g=d+_;f^=-1;for(var c=d;c<g;c++)f=f>>>8^l[255&(f^h[c])];return-1^f}(0|u,a,a.length,0):function(f,h,_,d){var l=o,g=d+_;f^=-1;for(var c=d;c<g;c++)f=f>>>8^l[255&(f^h.charCodeAt(c))];return-1^f}(0|u,a,a.length,0):0}},{"./utils":32}],5:[function(n,i,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(n,i,r){var s=null;s=typeof Promise<"u"?Promise:n("lie"),i.exports={Promise:s}},{lie:37}],7:[function(n,i,r){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),a=n("./utils"),u=n("./stream/GenericWorker"),f=s?"uint8array":"array";function h(_,d){u.call(this,"FlateWorker/"+_),this._pako=null,this._pakoAction=_,this._pakoOptions=d,this.meta={}}r.magic="\b\0",a.inherits(h,u),h.prototype.processChunk=function(_){this.meta=_.meta,this._pako===null&&this._createPako(),this._pako.push(a.transformTo(f,_.data),!1)},h.prototype.flush=function(){u.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){u.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var _=this;this._pako.onData=function(d){_.push({data:d,meta:_.meta})}},r.compressWorker=function(_){return new h("Deflate",_)},r.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,i,r){function s(l,g){var c,v="";for(c=0;c<g;c++)v+=String.fromCharCode(255&l),l>>>=8;return v}function o(l,g,c,v,m,b){var E,A,T=l.file,x=l.compression,S=b!==f.utf8encode,N=a.transformTo("string",b(T.name)),L=a.transformTo("string",f.utf8encode(T.name)),F=T.comment,W=a.transformTo("string",b(F)),R=a.transformTo("string",f.utf8encode(F)),D=L.length!==T.name.length,y=R.length!==F.length,M="",J="",U="",et=T.dir,z=T.date,Y={crc32:0,compressedSize:0,uncompressedSize:0};g&&!c||(Y.crc32=l.crc32,Y.compressedSize=l.compressedSize,Y.uncompressedSize=l.uncompressedSize);var O=0;g&&(O|=8),S||!D&&!y||(O|=2048);var P=0,it=0;et&&(P|=16),m==="UNIX"?(it=798,P|=function(q,mt){var It=q;return q||(It=mt?16893:33204),(65535&It)<<16}(T.unixPermissions,et)):(it=20,P|=function(q){return 63&(q||0)}(T.dosPermissions)),E=z.getUTCHours(),E<<=6,E|=z.getUTCMinutes(),E<<=5,E|=z.getUTCSeconds()/2,A=z.getUTCFullYear()-1980,A<<=4,A|=z.getUTCMonth()+1,A<<=5,A|=z.getUTCDate(),D&&(J=s(1,1)+s(h(N),4)+L,M+="up"+s(J.length,2)+J),y&&(U=s(1,1)+s(h(W),4)+R,M+="uc"+s(U.length,2)+U);var Q="";return Q+=`
\0`,Q+=s(O,2),Q+=x.magic,Q+=s(E,2),Q+=s(A,2),Q+=s(Y.crc32,4),Q+=s(Y.compressedSize,4),Q+=s(Y.uncompressedSize,4),Q+=s(N.length,2),Q+=s(M.length,2),{fileRecord:_.LOCAL_FILE_HEADER+Q+N+M,dirRecord:_.CENTRAL_FILE_HEADER+s(it,2)+Q+s(W.length,2)+"\0\0\0\0"+s(P,4)+s(v,4)+N+M+W}}var a=n("../utils"),u=n("../stream/GenericWorker"),f=n("../utf8"),h=n("../crc32"),_=n("../signature");function d(l,g,c,v){u.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=g,this.zipPlatform=c,this.encodeFileName=v,this.streamFiles=l,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}a.inherits(d,u),d.prototype.push=function(l){var g=l.meta.percent||0,c=this.entriesCount,v=this._sources.length;this.accumulate?this.contentBuffer.push(l):(this.bytesWritten+=l.data.length,u.prototype.push.call(this,{data:l.data,meta:{currentFile:this.currentFile,percent:c?(g+100*(c-v-1))/c:100}}))},d.prototype.openedSource=function(l){this.currentSourceOffset=this.bytesWritten,this.currentFile=l.file.name;var g=this.streamFiles&&!l.file.dir;if(g){var c=o(l,g,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:c.fileRecord,meta:{percent:0}})}else this.accumulate=!0},d.prototype.closedSource=function(l){this.accumulate=!1;var g=this.streamFiles&&!l.file.dir,c=o(l,g,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(c.dirRecord),g)this.push({data:function(v){return _.DATA_DESCRIPTOR+s(v.crc32,4)+s(v.compressedSize,4)+s(v.uncompressedSize,4)}(l),meta:{percent:100}});else for(this.push({data:c.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},d.prototype.flush=function(){for(var l=this.bytesWritten,g=0;g<this.dirRecords.length;g++)this.push({data:this.dirRecords[g],meta:{percent:100}});var c=this.bytesWritten-l,v=function(m,b,E,A,T){var x=a.transformTo("string",T(A));return _.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(m,2)+s(m,2)+s(b,4)+s(E,4)+s(x.length,2)+x}(this.dirRecords.length,c,l,this.zipComment,this.encodeFileName);this.push({data:v,meta:{percent:100}})},d.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},d.prototype.registerPrevious=function(l){this._sources.push(l);var g=this;return l.on("data",function(c){g.processChunk(c)}),l.on("end",function(){g.closedSource(g.previous.streamInfo),g._sources.length?g.prepareNextSource():g.end()}),l.on("error",function(c){g.error(c)}),this},d.prototype.resume=function(){return!!u.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},d.prototype.error=function(l){var g=this._sources;if(!u.prototype.error.call(this,l))return!1;for(var c=0;c<g.length;c++)try{g[c].error(l)}catch{}return!0},d.prototype.lock=function(){u.prototype.lock.call(this);for(var l=this._sources,g=0;g<l.length;g++)l[g].lock()},i.exports=d},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,i,r){var s=n("../compressions"),o=n("./ZipFileWorker");r.generateWorker=function(a,u,f){var h=new o(u.streamFiles,f,u.platform,u.encodeFileName),_=0;try{a.forEach(function(d,l){_++;var g=function(b,E){var A=b||E,T=s[A];if(!T)throw new Error(A+" is not a valid compression method !");return T}(l.options.compression,u.compression),c=l.options.compressionOptions||u.compressionOptions||{},v=l.dir,m=l.date;l._compressWorker(g,c).withStreamInfo("file",{name:d,dir:v,date:m,comment:l.comment||"",unixPermissions:l.unixPermissions,dosPermissions:l.dosPermissions}).pipe(h)}),h.entriesCount=_}catch(d){h.error(d)}return h}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,i,r){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new s;for(var a in this)typeof this[a]!="function"&&(o[a]=this[a]);return o}}(s.prototype=n("./object")).loadAsync=n("./load"),s.support=n("./support"),s.defaults=n("./defaults"),s.version="3.10.1",s.loadAsync=function(o,a){return new s().loadAsync(o,a)},s.external=n("./external"),i.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,i,r){var s=n("./utils"),o=n("./external"),a=n("./utf8"),u=n("./zipEntries"),f=n("./stream/Crc32Probe"),h=n("./nodejsUtils");function _(d){return new o.Promise(function(l,g){var c=d.decompressed.getContentWorker().pipe(new f);c.on("error",function(v){g(v)}).on("end",function(){c.streamInfo.crc32!==d.decompressed.crc32?g(new Error("Corrupted zip : CRC32 mismatch")):l()}).resume()})}i.exports=function(d,l){var g=this;return l=s.extend(l||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:a.utf8decode}),h.isNode&&h.isStream(d)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",d,!0,l.optimizedBinaryString,l.base64).then(function(c){var v=new u(l);return v.load(c),v}).then(function(c){var v=[o.Promise.resolve(c)],m=c.files;if(l.checkCRC32)for(var b=0;b<m.length;b++)v.push(_(m[b]));return o.Promise.all(v)}).then(function(c){for(var v=c.shift(),m=v.files,b=0;b<m.length;b++){var E=m[b],A=E.fileNameStr,T=s.resolve(E.fileNameStr);g.file(T,E.decompressed,{binary:!0,optimizedBinaryString:!0,date:E.date,dir:E.dir,comment:E.fileCommentStr.length?E.fileCommentStr:null,unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions,createFolders:l.createFolders}),E.dir||(g.file(T).unsafeOriginalName=A)}return v.zipComment.length&&(g.comment=v.zipComment),g})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,i,r){var s=n("../utils"),o=n("../stream/GenericWorker");function a(u,f){o.call(this,"Nodejs stream input adapter for "+u),this._upstreamEnded=!1,this._bindStream(f)}s.inherits(a,o),a.prototype._bindStream=function(u){var f=this;(this._stream=u).pause(),u.on("data",function(h){f.push({data:h,meta:{percent:0}})}).on("error",function(h){f.isPaused?this.generatedError=h:f.error(h)}).on("end",function(){f.isPaused?f._upstreamEnded=!0:f.end()})},a.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=a},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,i,r){var s=n("readable-stream").Readable;function o(a,u,f){s.call(this,u),this._helper=a;var h=this;a.on("data",function(_,d){h.push(_)||h._helper.pause(),f&&f(d)}).on("error",function(_){h.emit("error",_)}).on("end",function(){h.push(null)})}n("../utils").inherits(o,s),o.prototype._read=function(){this._helper.resume()},i.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,i,r){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,o);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,o)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var o=new Buffer(s);return o.fill(0),o},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(n,i,r){function s(T,x,S){var N,L=a.getTypeOf(x),F=a.extend(S||{},h);F.date=F.date||new Date,F.compression!==null&&(F.compression=F.compression.toUpperCase()),typeof F.unixPermissions=="string"&&(F.unixPermissions=parseInt(F.unixPermissions,8)),F.unixPermissions&&16384&F.unixPermissions&&(F.dir=!0),F.dosPermissions&&16&F.dosPermissions&&(F.dir=!0),F.dir&&(T=m(T)),F.createFolders&&(N=v(T))&&b.call(this,N,!0);var W=L==="string"&&F.binary===!1&&F.base64===!1;S&&S.binary!==void 0||(F.binary=!W),(x instanceof _&&x.uncompressedSize===0||F.dir||!x||x.length===0)&&(F.base64=!1,F.binary=!0,x="",F.compression="STORE",L="string");var R=null;R=x instanceof _||x instanceof u?x:g.isNode&&g.isStream(x)?new c(T,x):a.prepareContent(T,x,F.binary,F.optimizedBinaryString,F.base64);var D=new d(T,R,F);this.files[T]=D}var o=n("./utf8"),a=n("./utils"),u=n("./stream/GenericWorker"),f=n("./stream/StreamHelper"),h=n("./defaults"),_=n("./compressedObject"),d=n("./zipObject"),l=n("./generate"),g=n("./nodejsUtils"),c=n("./nodejs/NodejsStreamInputAdapter"),v=function(T){T.slice(-1)==="/"&&(T=T.substring(0,T.length-1));var x=T.lastIndexOf("/");return 0<x?T.substring(0,x):""},m=function(T){return T.slice(-1)!=="/"&&(T+="/"),T},b=function(T,x){return x=x!==void 0?x:h.createFolders,T=m(T),this.files[T]||s.call(this,T,null,{dir:!0,createFolders:x}),this.files[T]};function E(T){return Object.prototype.toString.call(T)==="[object RegExp]"}var A={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(T){var x,S,N;for(x in this.files)N=this.files[x],(S=x.slice(this.root.length,x.length))&&x.slice(0,this.root.length)===this.root&&T(S,N)},filter:function(T){var x=[];return this.forEach(function(S,N){T(S,N)&&x.push(N)}),x},file:function(T,x,S){if(arguments.length!==1)return T=this.root+T,s.call(this,T,x,S),this;if(E(T)){var N=T;return this.filter(function(F,W){return!W.dir&&N.test(F)})}var L=this.files[this.root+T];return L&&!L.dir?L:null},folder:function(T){if(!T)return this;if(E(T))return this.filter(function(L,F){return F.dir&&T.test(L)});var x=this.root+T,S=b.call(this,x),N=this.clone();return N.root=S.name,N},remove:function(T){T=this.root+T;var x=this.files[T];if(x||(T.slice(-1)!=="/"&&(T+="/"),x=this.files[T]),x&&!x.dir)delete this.files[T];else for(var S=this.filter(function(L,F){return F.name.slice(0,T.length)===T}),N=0;N<S.length;N++)delete this.files[S[N].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(T){var x,S={};try{if((S=a.extend(T||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=S.type.toLowerCase(),S.compression=S.compression.toUpperCase(),S.type==="binarystring"&&(S.type="string"),!S.type)throw new Error("No output type specified.");a.checkSupport(S.type),S.platform!=="darwin"&&S.platform!=="freebsd"&&S.platform!=="linux"&&S.platform!=="sunos"||(S.platform="UNIX"),S.platform==="win32"&&(S.platform="DOS");var N=S.comment||this.comment||"";x=l.generateWorker(this,S,N)}catch(L){(x=new u("error")).error(L)}return new f(x,S.type||"string",S.mimeType)},generateAsync:function(T,x){return this.generateInternalStream(T).accumulate(x)},generateNodeStream:function(T,x){return(T=T||{}).type||(T.type="nodebuffer"),this.generateInternalStream(T).toNodejsStream(x)}};i.exports=A},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,i,r){i.exports=n("stream")},{stream:void 0}],17:[function(n,i,r){var s=n("./DataReader");function o(a){s.call(this,a);for(var u=0;u<this.data.length;u++)a[u]=255&a[u]}n("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data[this.zero+a]},o.prototype.lastIndexOfSignature=function(a){for(var u=a.charCodeAt(0),f=a.charCodeAt(1),h=a.charCodeAt(2),_=a.charCodeAt(3),d=this.length-4;0<=d;--d)if(this.data[d]===u&&this.data[d+1]===f&&this.data[d+2]===h&&this.data[d+3]===_)return d-this.zero;return-1},o.prototype.readAndCheckSignature=function(a){var u=a.charCodeAt(0),f=a.charCodeAt(1),h=a.charCodeAt(2),_=a.charCodeAt(3),d=this.readData(4);return u===d[0]&&f===d[1]&&h===d[2]&&_===d[3]},o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,u},i.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,i,r){var s=n("../utils");function o(a){this.data=a,this.length=a.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(a){this.checkIndex(this.index+a)},checkIndex:function(a){if(this.length<this.zero+a||a<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+a+"). Corrupted zip ?")},setIndex:function(a){this.checkIndex(a),this.index=a},skip:function(a){this.setIndex(this.index+a)},byteAt:function(){},readInt:function(a){var u,f=0;for(this.checkOffset(a),u=this.index+a-1;u>=this.index;u--)f=(f<<8)+this.byteAt(u);return this.index+=a,f},readString:function(a){return s.transformTo("string",this.readData(a))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var a=this.readInt(4);return new Date(Date.UTC(1980+(a>>25&127),(a>>21&15)-1,a>>16&31,a>>11&31,a>>5&63,(31&a)<<1))}},i.exports=o},{"../utils":32}],19:[function(n,i,r){var s=n("./Uint8ArrayReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.readData=function(a){this.checkOffset(a);var u=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,u},i.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,i,r){var s=n("./DataReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.byteAt=function(a){return this.data.charCodeAt(this.zero+a)},o.prototype.lastIndexOfSignature=function(a){return this.data.lastIndexOf(a)-this.zero},o.prototype.readAndCheckSignature=function(a){return a===this.readData(4)},o.prototype.readData=function(a){this.checkOffset(a);var u=this.data.slice(this.zero+this.index,this.zero+this.index+a);return this.index+=a,u},i.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,i,r){var s=n("./ArrayReader");function o(a){s.call(this,a)}n("../utils").inherits(o,s),o.prototype.readData=function(a){if(this.checkOffset(a),a===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+a);return this.index+=a,u},i.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,i,r){var s=n("../utils"),o=n("../support"),a=n("./ArrayReader"),u=n("./StringReader"),f=n("./NodeBufferReader"),h=n("./Uint8ArrayReader");i.exports=function(_){var d=s.getTypeOf(_);return s.checkSupport(d),d!=="string"||o.uint8array?d==="nodebuffer"?new f(_):o.uint8array?new h(s.transformTo("uint8array",_)):new a(s.transformTo("array",_)):new u(_)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,i,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,i,r){var s=n("./GenericWorker"),o=n("../utils");function a(u){s.call(this,"ConvertWorker to "+u),this.destType=u}o.inherits(a,s),a.prototype.processChunk=function(u){this.push({data:o.transformTo(this.destType,u.data),meta:u.meta})},i.exports=a},{"../utils":32,"./GenericWorker":28}],25:[function(n,i,r){var s=n("./GenericWorker"),o=n("../crc32");function a(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(a,s),a.prototype.processChunk=function(u){this.streamInfo.crc32=o(u.data,this.streamInfo.crc32||0),this.push(u)},i.exports=a},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,i,r){var s=n("../utils"),o=n("./GenericWorker");function a(u){o.call(this,"DataLengthProbe for "+u),this.propName=u,this.withStreamInfo(u,0)}s.inherits(a,o),a.prototype.processChunk=function(u){if(u){var f=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=f+u.data.length}o.prototype.processChunk.call(this,u)},i.exports=a},{"../utils":32,"./GenericWorker":28}],27:[function(n,i,r){var s=n("../utils"),o=n("./GenericWorker");function a(u){o.call(this,"DataWorker");var f=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(h){f.dataIsReady=!0,f.data=h,f.max=h&&h.length||0,f.type=s.getTypeOf(h),f.isPaused||f._tickAndRepeat()},function(h){f.error(h)})}s.inherits(a,o),a.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},a.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},a.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},a.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=null,f=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":u=this.data.substring(this.index,f);break;case"uint8array":u=this.data.subarray(this.index,f);break;case"array":case"nodebuffer":u=this.data.slice(this.index,f)}return this.index=f,this.push({data:u,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=a},{"../utils":32,"./GenericWorker":28}],28:[function(n,i,r){function s(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,a){return this._listeners[o].push(a),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,a){if(this._listeners[o])for(var u=0;u<this._listeners[o].length;u++)this._listeners[o][u].call(this,a)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var a=this;return o.on("data",function(u){a.processChunk(u)}),o.on("end",function(){a.end()}),o.on("error",function(u){a.error(u)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,a){return this.extraStreamInfo[o]=a,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},i.exports=s},{}],29:[function(n,i,r){var s=n("../utils"),o=n("./ConvertWorker"),a=n("./GenericWorker"),u=n("../base64"),f=n("../support"),h=n("../external"),_=null;if(f.nodestream)try{_=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function d(g,c){return new h.Promise(function(v,m){var b=[],E=g._internalType,A=g._outputType,T=g._mimeType;g.on("data",function(x,S){b.push(x),c&&c(S)}).on("error",function(x){b=[],m(x)}).on("end",function(){try{var x=function(S,N,L){switch(S){case"blob":return s.newBlob(s.transformTo("arraybuffer",N),L);case"base64":return u.encode(N);default:return s.transformTo(S,N)}}(A,function(S,N){var L,F=0,W=null,R=0;for(L=0;L<N.length;L++)R+=N[L].length;switch(S){case"string":return N.join("");case"array":return Array.prototype.concat.apply([],N);case"uint8array":for(W=new Uint8Array(R),L=0;L<N.length;L++)W.set(N[L],F),F+=N[L].length;return W;case"nodebuffer":return Buffer.concat(N);default:throw new Error("concat : unsupported type '"+S+"'")}}(E,b),T);v(x)}catch(S){m(S)}b=[]}).resume()})}function l(g,c,v){var m=c;switch(c){case"blob":case"arraybuffer":m="uint8array";break;case"base64":m="string"}try{this._internalType=m,this._outputType=c,this._mimeType=v,s.checkSupport(m),this._worker=g.pipe(new o(m)),g.lock()}catch(b){this._worker=new a("error"),this._worker.error(b)}}l.prototype={accumulate:function(g){return d(this,g)},on:function(g,c){var v=this;return g==="data"?this._worker.on(g,function(m){c.call(v,m.data,m.meta)}):this._worker.on(g,function(){s.delay(c,arguments,v)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(g){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new _(this,{objectMode:this._outputType!=="nodebuffer"},g)}},i.exports=l},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,i,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=typeof Buffer<"u",r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var s=new ArrayBuffer(0);try{r.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(s),r.blob=o.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!n("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(n,i,r){for(var s=n("./utils"),o=n("./support"),a=n("./nodejsUtils"),u=n("./stream/GenericWorker"),f=new Array(256),h=0;h<256;h++)f[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;f[254]=f[254]=1;function _(){u.call(this,"utf-8 decode"),this.leftOver=null}function d(){u.call(this,"utf-8 encode")}r.utf8encode=function(l){return o.nodebuffer?a.newBufferFrom(l,"utf-8"):function(g){var c,v,m,b,E,A=g.length,T=0;for(b=0;b<A;b++)(64512&(v=g.charCodeAt(b)))==55296&&b+1<A&&(64512&(m=g.charCodeAt(b+1)))==56320&&(v=65536+(v-55296<<10)+(m-56320),b++),T+=v<128?1:v<2048?2:v<65536?3:4;for(c=o.uint8array?new Uint8Array(T):new Array(T),b=E=0;E<T;b++)(64512&(v=g.charCodeAt(b)))==55296&&b+1<A&&(64512&(m=g.charCodeAt(b+1)))==56320&&(v=65536+(v-55296<<10)+(m-56320),b++),v<128?c[E++]=v:(v<2048?c[E++]=192|v>>>6:(v<65536?c[E++]=224|v>>>12:(c[E++]=240|v>>>18,c[E++]=128|v>>>12&63),c[E++]=128|v>>>6&63),c[E++]=128|63&v);return c}(l)},r.utf8decode=function(l){return o.nodebuffer?s.transformTo("nodebuffer",l).toString("utf-8"):function(g){var c,v,m,b,E=g.length,A=new Array(2*E);for(c=v=0;c<E;)if((m=g[c++])<128)A[v++]=m;else if(4<(b=f[m]))A[v++]=65533,c+=b-1;else{for(m&=b===2?31:b===3?15:7;1<b&&c<E;)m=m<<6|63&g[c++],b--;1<b?A[v++]=65533:m<65536?A[v++]=m:(m-=65536,A[v++]=55296|m>>10&1023,A[v++]=56320|1023&m)}return A.length!==v&&(A.subarray?A=A.subarray(0,v):A.length=v),s.applyFromCharCode(A)}(l=s.transformTo(o.uint8array?"uint8array":"array",l))},s.inherits(_,u),_.prototype.processChunk=function(l){var g=s.transformTo(o.uint8array?"uint8array":"array",l.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var c=g;(g=new Uint8Array(c.length+this.leftOver.length)).set(this.leftOver,0),g.set(c,this.leftOver.length)}else g=this.leftOver.concat(g);this.leftOver=null}var v=function(b,E){var A;for((E=E||b.length)>b.length&&(E=b.length),A=E-1;0<=A&&(192&b[A])==128;)A--;return A<0||A===0?E:A+f[b[A]]>E?A:E}(g),m=g;v!==g.length&&(o.uint8array?(m=g.subarray(0,v),this.leftOver=g.subarray(v,g.length)):(m=g.slice(0,v),this.leftOver=g.slice(v,g.length))),this.push({data:r.utf8decode(m),meta:l.meta})},_.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=_,s.inherits(d,u),d.prototype.processChunk=function(l){this.push({data:r.utf8encode(l.data),meta:l.meta})},r.Utf8EncodeWorker=d},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,i,r){var s=n("./support"),o=n("./base64"),a=n("./nodejsUtils"),u=n("./external");function f(c){return c}function h(c,v){for(var m=0;m<c.length;++m)v[m]=255&c.charCodeAt(m);return v}n("setimmediate"),r.newBlob=function(c,v){r.checkSupport("blob");try{return new Blob([c],{type:v})}catch{try{var m=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return m.append(c),m.getBlob(v)}catch{throw new Error("Bug : can't construct the Blob.")}}};var _={stringifyByChunk:function(c,v,m){var b=[],E=0,A=c.length;if(A<=m)return String.fromCharCode.apply(null,c);for(;E<A;)v==="array"||v==="nodebuffer"?b.push(String.fromCharCode.apply(null,c.slice(E,Math.min(E+m,A)))):b.push(String.fromCharCode.apply(null,c.subarray(E,Math.min(E+m,A)))),E+=m;return b.join("")},stringifyByChar:function(c){for(var v="",m=0;m<c.length;m++)v+=String.fromCharCode(c[m]);return v},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,a.allocBuffer(1)).length===1}catch{return!1}}()}};function d(c){var v=65536,m=r.getTypeOf(c),b=!0;if(m==="uint8array"?b=_.applyCanBeUsed.uint8array:m==="nodebuffer"&&(b=_.applyCanBeUsed.nodebuffer),b)for(;1<v;)try{return _.stringifyByChunk(c,m,v)}catch{v=Math.floor(v/2)}return _.stringifyByChar(c)}function l(c,v){for(var m=0;m<c.length;m++)v[m]=c[m];return v}r.applyFromCharCode=d;var g={};g.string={string:f,array:function(c){return h(c,new Array(c.length))},arraybuffer:function(c){return g.string.uint8array(c).buffer},uint8array:function(c){return h(c,new Uint8Array(c.length))},nodebuffer:function(c){return h(c,a.allocBuffer(c.length))}},g.array={string:d,array:f,arraybuffer:function(c){return new Uint8Array(c).buffer},uint8array:function(c){return new Uint8Array(c)},nodebuffer:function(c){return a.newBufferFrom(c)}},g.arraybuffer={string:function(c){return d(new Uint8Array(c))},array:function(c){return l(new Uint8Array(c),new Array(c.byteLength))},arraybuffer:f,uint8array:function(c){return new Uint8Array(c)},nodebuffer:function(c){return a.newBufferFrom(new Uint8Array(c))}},g.uint8array={string:d,array:function(c){return l(c,new Array(c.length))},arraybuffer:function(c){return c.buffer},uint8array:f,nodebuffer:function(c){return a.newBufferFrom(c)}},g.nodebuffer={string:d,array:function(c){return l(c,new Array(c.length))},arraybuffer:function(c){return g.nodebuffer.uint8array(c).buffer},uint8array:function(c){return l(c,new Uint8Array(c.length))},nodebuffer:f},r.transformTo=function(c,v){if(v=v||"",!c)return v;r.checkSupport(c);var m=r.getTypeOf(v);return g[m][c](v)},r.resolve=function(c){for(var v=c.split("/"),m=[],b=0;b<v.length;b++){var E=v[b];E==="."||E===""&&b!==0&&b!==v.length-1||(E===".."?m.pop():m.push(E))}return m.join("/")},r.getTypeOf=function(c){return typeof c=="string"?"string":Object.prototype.toString.call(c)==="[object Array]"?"array":s.nodebuffer&&a.isBuffer(c)?"nodebuffer":s.uint8array&&c instanceof Uint8Array?"uint8array":s.arraybuffer&&c instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(c){if(!s[c.toLowerCase()])throw new Error(c+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(c){var v,m,b="";for(m=0;m<(c||"").length;m++)b+="\\x"+((v=c.charCodeAt(m))<16?"0":"")+v.toString(16).toUpperCase();return b},r.delay=function(c,v,m){setImmediate(function(){c.apply(m||null,v||[])})},r.inherits=function(c,v){function m(){}m.prototype=v.prototype,c.prototype=new m},r.extend=function(){var c,v,m={};for(c=0;c<arguments.length;c++)for(v in arguments[c])Object.prototype.hasOwnProperty.call(arguments[c],v)&&m[v]===void 0&&(m[v]=arguments[c][v]);return m},r.prepareContent=function(c,v,m,b,E){return u.Promise.resolve(v).then(function(A){return s.blob&&(A instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(A))!==-1)&&typeof FileReader<"u"?new u.Promise(function(T,x){var S=new FileReader;S.onload=function(N){T(N.target.result)},S.onerror=function(N){x(N.target.error)},S.readAsArrayBuffer(A)}):A}).then(function(A){var T=r.getTypeOf(A);return T?(T==="arraybuffer"?A=r.transformTo("uint8array",A):T==="string"&&(E?A=o.decode(A):m&&b!==!0&&(A=function(x){return h(x,s.uint8array?new Uint8Array(x.length):new Array(x.length))}(A))),A):u.Promise.reject(new Error("Can't read the data of '"+c+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,i,r){var s=n("./reader/readerFor"),o=n("./utils"),a=n("./signature"),u=n("./zipEntry"),f=n("./support");function h(_){this.files=[],this.loadOptions=_}h.prototype={checkSignature:function(_){if(!this.reader.readAndCheckSignature(_)){this.reader.index-=4;var d=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(d)+", expected "+o.pretty(_)+")")}},isSignature:function(_,d){var l=this.reader.index;this.reader.setIndex(_);var g=this.reader.readString(4)===d;return this.reader.setIndex(l),g},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var _=this.reader.readData(this.zipCommentLength),d=f.uint8array?"uint8array":"array",l=o.transformTo(d,_);this.zipComment=this.loadOptions.decodeFileName(l)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var _,d,l,g=this.zip64EndOfCentralSize-44;0<g;)_=this.reader.readInt(2),d=this.reader.readInt(4),l=this.reader.readData(d),this.zip64ExtensibleData[_]={id:_,length:d,value:l}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var _,d;for(_=0;_<this.files.length;_++)d=this.files[_],this.reader.setIndex(d.localHeaderOffset),this.checkSignature(a.LOCAL_FILE_HEADER),d.readLocalPart(this.reader),d.handleUTF8(),d.processAttributes()},readCentralDir:function(){var _;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(a.CENTRAL_FILE_HEADER);)(_=new u({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(_);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var _=this.reader.lastIndexOfSignature(a.CENTRAL_DIRECTORY_END);if(_<0)throw this.isSignature(0,a.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(_);var d=_;if(this.checkSignature(a.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(_=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(_),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,a.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(a.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var l=this.centralDirOffset+this.centralDirSize;this.zip64&&(l+=20,l+=12+this.zip64EndOfCentralSize);var g=d-l;if(0<g)this.isSignature(d,a.CENTRAL_FILE_HEADER)||(this.reader.zero=g);else if(g<0)throw new Error("Corrupted zip: missing "+Math.abs(g)+" bytes.")},prepareReader:function(_){this.reader=s(_)},load:function(_){this.prepareReader(_),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,i,r){var s=n("./reader/readerFor"),o=n("./utils"),a=n("./compressedObject"),u=n("./crc32"),f=n("./utf8"),h=n("./compressions"),_=n("./support");function d(l,g){this.options=l,this.loadOptions=g}d.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(l){var g,c;if(l.skip(22),this.fileNameLength=l.readInt(2),c=l.readInt(2),this.fileName=l.readData(this.fileNameLength),l.skip(c),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((g=function(v){for(var m in h)if(Object.prototype.hasOwnProperty.call(h,m)&&h[m].magic===v)return h[m];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new a(this.compressedSize,this.uncompressedSize,this.crc32,g,l.readData(this.compressedSize))},readCentralPart:function(l){this.versionMadeBy=l.readInt(2),l.skip(2),this.bitFlag=l.readInt(2),this.compressionMethod=l.readString(2),this.date=l.readDate(),this.crc32=l.readInt(4),this.compressedSize=l.readInt(4),this.uncompressedSize=l.readInt(4);var g=l.readInt(2);if(this.extraFieldsLength=l.readInt(2),this.fileCommentLength=l.readInt(2),this.diskNumberStart=l.readInt(2),this.internalFileAttributes=l.readInt(2),this.externalFileAttributes=l.readInt(4),this.localHeaderOffset=l.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");l.skip(g),this.readExtraFields(l),this.parseZIP64ExtraField(l),this.fileComment=l.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var l=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),l==0&&(this.dosPermissions=63&this.externalFileAttributes),l==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var l=s(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=l.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=l.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=l.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=l.readInt(4))}},readExtraFields:function(l){var g,c,v,m=l.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});l.index+4<m;)g=l.readInt(2),c=l.readInt(2),v=l.readData(c),this.extraFields[g]={id:g,length:c,value:v};l.setIndex(m)},handleUTF8:function(){var l=_.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=f.utf8decode(this.fileName),this.fileCommentStr=f.utf8decode(this.fileComment);else{var g=this.findExtraFieldUnicodePath();if(g!==null)this.fileNameStr=g;else{var c=o.transformTo(l,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(c)}var v=this.findExtraFieldUnicodeComment();if(v!==null)this.fileCommentStr=v;else{var m=o.transformTo(l,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(m)}}},findExtraFieldUnicodePath:function(){var l=this.extraFields[28789];if(l){var g=s(l.value);return g.readInt(1)!==1||u(this.fileName)!==g.readInt(4)?null:f.utf8decode(g.readData(l.length-5))}return null},findExtraFieldUnicodeComment:function(){var l=this.extraFields[25461];if(l){var g=s(l.value);return g.readInt(1)!==1||u(this.fileComment)!==g.readInt(4)?null:f.utf8decode(g.readData(l.length-5))}return null}},i.exports=d},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,i,r){function s(g,c,v){this.name=g,this.dir=v.dir,this.date=v.date,this.comment=v.comment,this.unixPermissions=v.unixPermissions,this.dosPermissions=v.dosPermissions,this._data=c,this._dataBinary=v.binary,this.options={compression:v.compression,compressionOptions:v.compressionOptions}}var o=n("./stream/StreamHelper"),a=n("./stream/DataWorker"),u=n("./utf8"),f=n("./compressedObject"),h=n("./stream/GenericWorker");s.prototype={internalStream:function(g){var c=null,v="string";try{if(!g)throw new Error("No output type specified.");var m=(v=g.toLowerCase())==="string"||v==="text";v!=="binarystring"&&v!=="text"||(v="string"),c=this._decompressWorker();var b=!this._dataBinary;b&&!m&&(c=c.pipe(new u.Utf8EncodeWorker)),!b&&m&&(c=c.pipe(new u.Utf8DecodeWorker))}catch(E){(c=new h("error")).error(E)}return new o(c,v,"")},async:function(g,c){return this.internalStream(g).accumulate(c)},nodeStream:function(g,c){return this.internalStream(g||"nodebuffer").toNodejsStream(c)},_compressWorker:function(g,c){if(this._data instanceof f&&this._data.compression.magic===g.magic)return this._data.getCompressedWorker();var v=this._decompressWorker();return this._dataBinary||(v=v.pipe(new u.Utf8EncodeWorker)),f.createWorkerFrom(v,g,c)},_decompressWorker:function(){return this._data instanceof f?this._data.getContentWorker():this._data instanceof h?this._data:new a(this._data)}};for(var _=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],d=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},l=0;l<_.length;l++)s.prototype[_[l]]=d;i.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,i,r){(function(s){var o,a,u=s.MutationObserver||s.WebKitMutationObserver;if(u){var f=0,h=new u(g),_=s.document.createTextNode("");h.observe(_,{characterData:!0}),o=function(){_.data=f=++f%2}}else if(s.setImmediate||s.MessageChannel===void 0)o="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var c=s.document.createElement("script");c.onreadystatechange=function(){g(),c.onreadystatechange=null,c.parentNode.removeChild(c),c=null},s.document.documentElement.appendChild(c)}:function(){setTimeout(g,0)};else{var d=new s.MessageChannel;d.port1.onmessage=g,o=function(){d.port2.postMessage(0)}}var l=[];function g(){var c,v;a=!0;for(var m=l.length;m;){for(v=l,l=[],c=-1;++c<m;)v[c]();m=l.length}a=!1}i.exports=function(c){l.push(c)!==1||a||o()}}).call(this,typeof sn<"u"?sn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,i,r){var s=n("immediate");function o(){}var a={},u=["REJECTED"],f=["FULFILLED"],h=["PENDING"];function _(m){if(typeof m!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,m!==o&&c(this,m)}function d(m,b,E){this.promise=m,typeof b=="function"&&(this.onFulfilled=b,this.callFulfilled=this.otherCallFulfilled),typeof E=="function"&&(this.onRejected=E,this.callRejected=this.otherCallRejected)}function l(m,b,E){s(function(){var A;try{A=b(E)}catch(T){return a.reject(m,T)}A===m?a.reject(m,new TypeError("Cannot resolve promise with itself")):a.resolve(m,A)})}function g(m){var b=m&&m.then;if(m&&(typeof m=="object"||typeof m=="function")&&typeof b=="function")return function(){b.apply(m,arguments)}}function c(m,b){var E=!1;function A(S){E||(E=!0,a.reject(m,S))}function T(S){E||(E=!0,a.resolve(m,S))}var x=v(function(){b(T,A)});x.status==="error"&&A(x.value)}function v(m,b){var E={};try{E.value=m(b),E.status="success"}catch(A){E.status="error",E.value=A}return E}(i.exports=_).prototype.finally=function(m){if(typeof m!="function")return this;var b=this.constructor;return this.then(function(E){return b.resolve(m()).then(function(){return E})},function(E){return b.resolve(m()).then(function(){throw E})})},_.prototype.catch=function(m){return this.then(null,m)},_.prototype.then=function(m,b){if(typeof m!="function"&&this.state===f||typeof b!="function"&&this.state===u)return this;var E=new this.constructor(o);return this.state!==h?l(E,this.state===f?m:b,this.outcome):this.queue.push(new d(E,m,b)),E},d.prototype.callFulfilled=function(m){a.resolve(this.promise,m)},d.prototype.otherCallFulfilled=function(m){l(this.promise,this.onFulfilled,m)},d.prototype.callRejected=function(m){a.reject(this.promise,m)},d.prototype.otherCallRejected=function(m){l(this.promise,this.onRejected,m)},a.resolve=function(m,b){var E=v(g,b);if(E.status==="error")return a.reject(m,E.value);var A=E.value;if(A)c(m,A);else{m.state=f,m.outcome=b;for(var T=-1,x=m.queue.length;++T<x;)m.queue[T].callFulfilled(b)}return m},a.reject=function(m,b){m.state=u,m.outcome=b;for(var E=-1,A=m.queue.length;++E<A;)m.queue[E].callRejected(b);return m},_.resolve=function(m){return m instanceof this?m:a.resolve(new this(o),m)},_.reject=function(m){var b=new this(o);return a.reject(b,m)},_.all=function(m){var b=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=m.length,A=!1;if(!E)return this.resolve([]);for(var T=new Array(E),x=0,S=-1,N=new this(o);++S<E;)L(m[S],S);return N;function L(F,W){b.resolve(F).then(function(R){T[W]=R,++x!==E||A||(A=!0,a.resolve(N,T))},function(R){A||(A=!0,a.reject(N,R))})}},_.race=function(m){var b=this;if(Object.prototype.toString.call(m)!=="[object Array]")return this.reject(new TypeError("must be an array"));var E=m.length,A=!1;if(!E)return this.resolve([]);for(var T=-1,x=new this(o);++T<E;)S=m[T],b.resolve(S).then(function(N){A||(A=!0,a.resolve(x,N))},function(N){A||(A=!0,a.reject(x,N))});var S;return x}},{immediate:36}],38:[function(n,i,r){var s={};(0,n("./lib/utils/common").assign)(s,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),i.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,i,r){var s=n("./zlib/deflate"),o=n("./utils/common"),a=n("./utils/strings"),u=n("./zlib/messages"),f=n("./zlib/zstream"),h=Object.prototype.toString,_=0,d=-1,l=0,g=8;function c(m){if(!(this instanceof c))return new c(m);this.options=o.assign({level:d,method:g,chunkSize:16384,windowBits:15,memLevel:8,strategy:l,to:""},m||{});var b=this.options;b.raw&&0<b.windowBits?b.windowBits=-b.windowBits:b.gzip&&0<b.windowBits&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new f,this.strm.avail_out=0;var E=s.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(E!==_)throw new Error(u[E]);if(b.header&&s.deflateSetHeader(this.strm,b.header),b.dictionary){var A;if(A=typeof b.dictionary=="string"?a.string2buf(b.dictionary):h.call(b.dictionary)==="[object ArrayBuffer]"?new Uint8Array(b.dictionary):b.dictionary,(E=s.deflateSetDictionary(this.strm,A))!==_)throw new Error(u[E]);this._dict_set=!0}}function v(m,b){var E=new c(b);if(E.push(m,!0),E.err)throw E.msg||u[E.err];return E.result}c.prototype.push=function(m,b){var E,A,T=this.strm,x=this.options.chunkSize;if(this.ended)return!1;A=b===~~b?b:b===!0?4:0,typeof m=="string"?T.input=a.string2buf(m):h.call(m)==="[object ArrayBuffer]"?T.input=new Uint8Array(m):T.input=m,T.next_in=0,T.avail_in=T.input.length;do{if(T.avail_out===0&&(T.output=new o.Buf8(x),T.next_out=0,T.avail_out=x),(E=s.deflate(T,A))!==1&&E!==_)return this.onEnd(E),!(this.ended=!0);T.avail_out!==0&&(T.avail_in!==0||A!==4&&A!==2)||(this.options.to==="string"?this.onData(a.buf2binstring(o.shrinkBuf(T.output,T.next_out))):this.onData(o.shrinkBuf(T.output,T.next_out)))}while((0<T.avail_in||T.avail_out===0)&&E!==1);return A===4?(E=s.deflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===_):A!==2||(this.onEnd(_),!(T.avail_out=0))},c.prototype.onData=function(m){this.chunks.push(m)},c.prototype.onEnd=function(m){m===_&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg},r.Deflate=c,r.deflate=v,r.deflateRaw=function(m,b){return(b=b||{}).raw=!0,v(m,b)},r.gzip=function(m,b){return(b=b||{}).gzip=!0,v(m,b)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,i,r){var s=n("./zlib/inflate"),o=n("./utils/common"),a=n("./utils/strings"),u=n("./zlib/constants"),f=n("./zlib/messages"),h=n("./zlib/zstream"),_=n("./zlib/gzheader"),d=Object.prototype.toString;function l(c){if(!(this instanceof l))return new l(c);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},c||{});var v=this.options;v.raw&&0<=v.windowBits&&v.windowBits<16&&(v.windowBits=-v.windowBits,v.windowBits===0&&(v.windowBits=-15)),!(0<=v.windowBits&&v.windowBits<16)||c&&c.windowBits||(v.windowBits+=32),15<v.windowBits&&v.windowBits<48&&!(15&v.windowBits)&&(v.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var m=s.inflateInit2(this.strm,v.windowBits);if(m!==u.Z_OK)throw new Error(f[m]);this.header=new _,s.inflateGetHeader(this.strm,this.header)}function g(c,v){var m=new l(v);if(m.push(c,!0),m.err)throw m.msg||f[m.err];return m.result}l.prototype.push=function(c,v){var m,b,E,A,T,x,S=this.strm,N=this.options.chunkSize,L=this.options.dictionary,F=!1;if(this.ended)return!1;b=v===~~v?v:v===!0?u.Z_FINISH:u.Z_NO_FLUSH,typeof c=="string"?S.input=a.binstring2buf(c):d.call(c)==="[object ArrayBuffer]"?S.input=new Uint8Array(c):S.input=c,S.next_in=0,S.avail_in=S.input.length;do{if(S.avail_out===0&&(S.output=new o.Buf8(N),S.next_out=0,S.avail_out=N),(m=s.inflate(S,u.Z_NO_FLUSH))===u.Z_NEED_DICT&&L&&(x=typeof L=="string"?a.string2buf(L):d.call(L)==="[object ArrayBuffer]"?new Uint8Array(L):L,m=s.inflateSetDictionary(this.strm,x)),m===u.Z_BUF_ERROR&&F===!0&&(m=u.Z_OK,F=!1),m!==u.Z_STREAM_END&&m!==u.Z_OK)return this.onEnd(m),!(this.ended=!0);S.next_out&&(S.avail_out!==0&&m!==u.Z_STREAM_END&&(S.avail_in!==0||b!==u.Z_FINISH&&b!==u.Z_SYNC_FLUSH)||(this.options.to==="string"?(E=a.utf8border(S.output,S.next_out),A=S.next_out-E,T=a.buf2string(S.output,E),S.next_out=A,S.avail_out=N-A,A&&o.arraySet(S.output,S.output,E,A,0),this.onData(T)):this.onData(o.shrinkBuf(S.output,S.next_out)))),S.avail_in===0&&S.avail_out===0&&(F=!0)}while((0<S.avail_in||S.avail_out===0)&&m!==u.Z_STREAM_END);return m===u.Z_STREAM_END&&(b=u.Z_FINISH),b===u.Z_FINISH?(m=s.inflateEnd(this.strm),this.onEnd(m),this.ended=!0,m===u.Z_OK):b!==u.Z_SYNC_FLUSH||(this.onEnd(u.Z_OK),!(S.avail_out=0))},l.prototype.onData=function(c){this.chunks.push(c)},l.prototype.onEnd=function(c){c===u.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=c,this.msg=this.strm.msg},r.Inflate=l,r.inflate=g,r.inflateRaw=function(c,v){return(v=v||{}).raw=!0,g(c,v)},r.ungzip=g},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,i,r){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(u){for(var f=Array.prototype.slice.call(arguments,1);f.length;){var h=f.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(var _ in h)h.hasOwnProperty(_)&&(u[_]=h[_])}}return u},r.shrinkBuf=function(u,f){return u.length===f?u:u.subarray?u.subarray(0,f):(u.length=f,u)};var o={arraySet:function(u,f,h,_,d){if(f.subarray&&u.subarray)u.set(f.subarray(h,h+_),d);else for(var l=0;l<_;l++)u[d+l]=f[h+l]},flattenChunks:function(u){var f,h,_,d,l,g;for(f=_=0,h=u.length;f<h;f++)_+=u[f].length;for(g=new Uint8Array(_),f=d=0,h=u.length;f<h;f++)l=u[f],g.set(l,d),d+=l.length;return g}},a={arraySet:function(u,f,h,_,d){for(var l=0;l<_;l++)u[d+l]=f[h+l]},flattenChunks:function(u){return[].concat.apply([],u)}};r.setTyped=function(u){u?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,o)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,a))},r.setTyped(s)},{}],42:[function(n,i,r){var s=n("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{a=!1}for(var u=new s.Buf8(256),f=0;f<256;f++)u[f]=252<=f?6:248<=f?5:240<=f?4:224<=f?3:192<=f?2:1;function h(_,d){if(d<65537&&(_.subarray&&a||!_.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(_,d));for(var l="",g=0;g<d;g++)l+=String.fromCharCode(_[g]);return l}u[254]=u[254]=1,r.string2buf=function(_){var d,l,g,c,v,m=_.length,b=0;for(c=0;c<m;c++)(64512&(l=_.charCodeAt(c)))==55296&&c+1<m&&(64512&(g=_.charCodeAt(c+1)))==56320&&(l=65536+(l-55296<<10)+(g-56320),c++),b+=l<128?1:l<2048?2:l<65536?3:4;for(d=new s.Buf8(b),c=v=0;v<b;c++)(64512&(l=_.charCodeAt(c)))==55296&&c+1<m&&(64512&(g=_.charCodeAt(c+1)))==56320&&(l=65536+(l-55296<<10)+(g-56320),c++),l<128?d[v++]=l:(l<2048?d[v++]=192|l>>>6:(l<65536?d[v++]=224|l>>>12:(d[v++]=240|l>>>18,d[v++]=128|l>>>12&63),d[v++]=128|l>>>6&63),d[v++]=128|63&l);return d},r.buf2binstring=function(_){return h(_,_.length)},r.binstring2buf=function(_){for(var d=new s.Buf8(_.length),l=0,g=d.length;l<g;l++)d[l]=_.charCodeAt(l);return d},r.buf2string=function(_,d){var l,g,c,v,m=d||_.length,b=new Array(2*m);for(l=g=0;l<m;)if((c=_[l++])<128)b[g++]=c;else if(4<(v=u[c]))b[g++]=65533,l+=v-1;else{for(c&=v===2?31:v===3?15:7;1<v&&l<m;)c=c<<6|63&_[l++],v--;1<v?b[g++]=65533:c<65536?b[g++]=c:(c-=65536,b[g++]=55296|c>>10&1023,b[g++]=56320|1023&c)}return h(b,g)},r.utf8border=function(_,d){var l;for((d=d||_.length)>_.length&&(d=_.length),l=d-1;0<=l&&(192&_[l])==128;)l--;return l<0||l===0?d:l+u[_[l]]>d?l:d}},{"./common":41}],43:[function(n,i,r){i.exports=function(s,o,a,u){for(var f=65535&s|0,h=s>>>16&65535|0,_=0;a!==0;){for(a-=_=2e3<a?2e3:a;h=h+(f=f+o[u++]|0)|0,--_;);f%=65521,h%=65521}return f|h<<16|0}},{}],44:[function(n,i,r){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,i,r){var s=function(){for(var o,a=[],u=0;u<256;u++){o=u;for(var f=0;f<8;f++)o=1&o?3988292384^o>>>1:o>>>1;a[u]=o}return a}();i.exports=function(o,a,u,f){var h=s,_=f+u;o^=-1;for(var d=f;d<_;d++)o=o>>>8^h[255&(o^a[d])];return-1^o}},{}],46:[function(n,i,r){var s,o=n("../utils/common"),a=n("./trees"),u=n("./adler32"),f=n("./crc32"),h=n("./messages"),_=0,d=4,l=0,g=-2,c=-1,v=4,m=2,b=8,E=9,A=286,T=30,x=19,S=2*A+1,N=15,L=3,F=258,W=F+L+1,R=42,D=113,y=1,M=2,J=3,U=4;function et(p,G){return p.msg=h[G],G}function z(p){return(p<<1)-(4<p?9:0)}function Y(p){for(var G=p.length;0<=--G;)p[G]=0}function O(p){var G=p.state,B=G.pending;B>p.avail_out&&(B=p.avail_out),B!==0&&(o.arraySet(p.output,G.pending_buf,G.pending_out,B,p.next_out),p.next_out+=B,G.pending_out+=B,p.total_out+=B,p.avail_out-=B,G.pending-=B,G.pending===0&&(G.pending_out=0))}function P(p,G){a._tr_flush_block(p,0<=p.block_start?p.block_start:-1,p.strstart-p.block_start,G),p.block_start=p.strstart,O(p.strm)}function it(p,G){p.pending_buf[p.pending++]=G}function Q(p,G){p.pending_buf[p.pending++]=G>>>8&255,p.pending_buf[p.pending++]=255&G}function q(p,G){var B,I,w=p.max_chain_length,k=p.strstart,K=p.prev_length,Z=p.nice_match,C=p.strstart>p.w_size-W?p.strstart-(p.w_size-W):0,$=p.window,tt=p.w_mask,V=p.prev,rt=p.strstart+F,ft=$[k+K-1],ut=$[k+K];p.prev_length>=p.good_match&&(w>>=2),Z>p.lookahead&&(Z=p.lookahead);do if($[(B=G)+K]===ut&&$[B+K-1]===ft&&$[B]===$[k]&&$[++B]===$[k+1]){k+=2,B++;do;while($[++k]===$[++B]&&$[++k]===$[++B]&&$[++k]===$[++B]&&$[++k]===$[++B]&&$[++k]===$[++B]&&$[++k]===$[++B]&&$[++k]===$[++B]&&$[++k]===$[++B]&&k<rt);if(I=F-(rt-k),k=rt-F,K<I){if(p.match_start=G,Z<=(K=I))break;ft=$[k+K-1],ut=$[k+K]}}while((G=V[G&tt])>C&&--w!=0);return K<=p.lookahead?K:p.lookahead}function mt(p){var G,B,I,w,k,K,Z,C,$,tt,V=p.w_size;do{if(w=p.window_size-p.lookahead-p.strstart,p.strstart>=V+(V-W)){for(o.arraySet(p.window,p.window,V,V,0),p.match_start-=V,p.strstart-=V,p.block_start-=V,G=B=p.hash_size;I=p.head[--G],p.head[G]=V<=I?I-V:0,--B;);for(G=B=V;I=p.prev[--G],p.prev[G]=V<=I?I-V:0,--B;);w+=V}if(p.strm.avail_in===0)break;if(K=p.strm,Z=p.window,C=p.strstart+p.lookahead,$=w,tt=void 0,tt=K.avail_in,$<tt&&(tt=$),B=tt===0?0:(K.avail_in-=tt,o.arraySet(Z,K.input,K.next_in,tt,C),K.state.wrap===1?K.adler=u(K.adler,Z,tt,C):K.state.wrap===2&&(K.adler=f(K.adler,Z,tt,C)),K.next_in+=tt,K.total_in+=tt,tt),p.lookahead+=B,p.lookahead+p.insert>=L)for(k=p.strstart-p.insert,p.ins_h=p.window[k],p.ins_h=(p.ins_h<<p.hash_shift^p.window[k+1])&p.hash_mask;p.insert&&(p.ins_h=(p.ins_h<<p.hash_shift^p.window[k+L-1])&p.hash_mask,p.prev[k&p.w_mask]=p.head[p.ins_h],p.head[p.ins_h]=k,k++,p.insert--,!(p.lookahead+p.insert<L)););}while(p.lookahead<W&&p.strm.avail_in!==0)}function It(p,G){for(var B,I;;){if(p.lookahead<W){if(mt(p),p.lookahead<W&&G===_)return y;if(p.lookahead===0)break}if(B=0,p.lookahead>=L&&(p.ins_h=(p.ins_h<<p.hash_shift^p.window[p.strstart+L-1])&p.hash_mask,B=p.prev[p.strstart&p.w_mask]=p.head[p.ins_h],p.head[p.ins_h]=p.strstart),B!==0&&p.strstart-B<=p.w_size-W&&(p.match_length=q(p,B)),p.match_length>=L)if(I=a._tr_tally(p,p.strstart-p.match_start,p.match_length-L),p.lookahead-=p.match_length,p.match_length<=p.max_lazy_match&&p.lookahead>=L){for(p.match_length--;p.strstart++,p.ins_h=(p.ins_h<<p.hash_shift^p.window[p.strstart+L-1])&p.hash_mask,B=p.prev[p.strstart&p.w_mask]=p.head[p.ins_h],p.head[p.ins_h]=p.strstart,--p.match_length!=0;);p.strstart++}else p.strstart+=p.match_length,p.match_length=0,p.ins_h=p.window[p.strstart],p.ins_h=(p.ins_h<<p.hash_shift^p.window[p.strstart+1])&p.hash_mask;else I=a._tr_tally(p,0,p.window[p.strstart]),p.lookahead--,p.strstart++;if(I&&(P(p,!1),p.strm.avail_out===0))return y}return p.insert=p.strstart<L-1?p.strstart:L-1,G===d?(P(p,!0),p.strm.avail_out===0?J:U):p.last_lit&&(P(p,!1),p.strm.avail_out===0)?y:M}function at(p,G){for(var B,I,w;;){if(p.lookahead<W){if(mt(p),p.lookahead<W&&G===_)return y;if(p.lookahead===0)break}if(B=0,p.lookahead>=L&&(p.ins_h=(p.ins_h<<p.hash_shift^p.window[p.strstart+L-1])&p.hash_mask,B=p.prev[p.strstart&p.w_mask]=p.head[p.ins_h],p.head[p.ins_h]=p.strstart),p.prev_length=p.match_length,p.prev_match=p.match_start,p.match_length=L-1,B!==0&&p.prev_length<p.max_lazy_match&&p.strstart-B<=p.w_size-W&&(p.match_length=q(p,B),p.match_length<=5&&(p.strategy===1||p.match_length===L&&4096<p.strstart-p.match_start)&&(p.match_length=L-1)),p.prev_length>=L&&p.match_length<=p.prev_length){for(w=p.strstart+p.lookahead-L,I=a._tr_tally(p,p.strstart-1-p.prev_match,p.prev_length-L),p.lookahead-=p.prev_length-1,p.prev_length-=2;++p.strstart<=w&&(p.ins_h=(p.ins_h<<p.hash_shift^p.window[p.strstart+L-1])&p.hash_mask,B=p.prev[p.strstart&p.w_mask]=p.head[p.ins_h],p.head[p.ins_h]=p.strstart),--p.prev_length!=0;);if(p.match_available=0,p.match_length=L-1,p.strstart++,I&&(P(p,!1),p.strm.avail_out===0))return y}else if(p.match_available){if((I=a._tr_tally(p,0,p.window[p.strstart-1]))&&P(p,!1),p.strstart++,p.lookahead--,p.strm.avail_out===0)return y}else p.match_available=1,p.strstart++,p.lookahead--}return p.match_available&&(I=a._tr_tally(p,0,p.window[p.strstart-1]),p.match_available=0),p.insert=p.strstart<L-1?p.strstart:L-1,G===d?(P(p,!0),p.strm.avail_out===0?J:U):p.last_lit&&(P(p,!1),p.strm.avail_out===0)?y:M}function lt(p,G,B,I,w){this.good_length=p,this.max_lazy=G,this.nice_length=B,this.max_chain=I,this.func=w}function Et(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=b,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*S),this.dyn_dtree=new o.Buf16(2*(2*T+1)),this.bl_tree=new o.Buf16(2*(2*x+1)),Y(this.dyn_ltree),Y(this.dyn_dtree),Y(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(N+1),this.heap=new o.Buf16(2*A+1),Y(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*A+1),Y(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function gt(p){var G;return p&&p.state?(p.total_in=p.total_out=0,p.data_type=m,(G=p.state).pending=0,G.pending_out=0,G.wrap<0&&(G.wrap=-G.wrap),G.status=G.wrap?R:D,p.adler=G.wrap===2?0:1,G.last_flush=_,a._tr_init(G),l):et(p,g)}function Ft(p){var G=gt(p);return G===l&&function(B){B.window_size=2*B.w_size,Y(B.head),B.max_lazy_match=s[B.level].max_lazy,B.good_match=s[B.level].good_length,B.nice_match=s[B.level].nice_length,B.max_chain_length=s[B.level].max_chain,B.strstart=0,B.block_start=0,B.lookahead=0,B.insert=0,B.match_length=B.prev_length=L-1,B.match_available=0,B.ins_h=0}(p.state),G}function Ot(p,G,B,I,w,k){if(!p)return g;var K=1;if(G===c&&(G=6),I<0?(K=0,I=-I):15<I&&(K=2,I-=16),w<1||E<w||B!==b||I<8||15<I||G<0||9<G||k<0||v<k)return et(p,g);I===8&&(I=9);var Z=new Et;return(p.state=Z).strm=p,Z.wrap=K,Z.gzhead=null,Z.w_bits=I,Z.w_size=1<<Z.w_bits,Z.w_mask=Z.w_size-1,Z.hash_bits=w+7,Z.hash_size=1<<Z.hash_bits,Z.hash_mask=Z.hash_size-1,Z.hash_shift=~~((Z.hash_bits+L-1)/L),Z.window=new o.Buf8(2*Z.w_size),Z.head=new o.Buf16(Z.hash_size),Z.prev=new o.Buf16(Z.w_size),Z.lit_bufsize=1<<w+6,Z.pending_buf_size=4*Z.lit_bufsize,Z.pending_buf=new o.Buf8(Z.pending_buf_size),Z.d_buf=1*Z.lit_bufsize,Z.l_buf=3*Z.lit_bufsize,Z.level=G,Z.strategy=k,Z.method=B,Ft(p)}s=[new lt(0,0,0,0,function(p,G){var B=65535;for(B>p.pending_buf_size-5&&(B=p.pending_buf_size-5);;){if(p.lookahead<=1){if(mt(p),p.lookahead===0&&G===_)return y;if(p.lookahead===0)break}p.strstart+=p.lookahead,p.lookahead=0;var I=p.block_start+B;if((p.strstart===0||p.strstart>=I)&&(p.lookahead=p.strstart-I,p.strstart=I,P(p,!1),p.strm.avail_out===0)||p.strstart-p.block_start>=p.w_size-W&&(P(p,!1),p.strm.avail_out===0))return y}return p.insert=0,G===d?(P(p,!0),p.strm.avail_out===0?J:U):(p.strstart>p.block_start&&(P(p,!1),p.strm.avail_out),y)}),new lt(4,4,8,4,It),new lt(4,5,16,8,It),new lt(4,6,32,32,It),new lt(4,4,16,16,at),new lt(8,16,32,32,at),new lt(8,16,128,128,at),new lt(8,32,128,256,at),new lt(32,128,258,1024,at),new lt(32,258,258,4096,at)],r.deflateInit=function(p,G){return Ot(p,G,b,15,8,0)},r.deflateInit2=Ot,r.deflateReset=Ft,r.deflateResetKeep=gt,r.deflateSetHeader=function(p,G){return p&&p.state?p.state.wrap!==2?g:(p.state.gzhead=G,l):g},r.deflate=function(p,G){var B,I,w,k;if(!p||!p.state||5<G||G<0)return p?et(p,g):g;if(I=p.state,!p.output||!p.input&&p.avail_in!==0||I.status===666&&G!==d)return et(p,p.avail_out===0?-5:g);if(I.strm=p,B=I.last_flush,I.last_flush=G,I.status===R)if(I.wrap===2)p.adler=0,it(I,31),it(I,139),it(I,8),I.gzhead?(it(I,(I.gzhead.text?1:0)+(I.gzhead.hcrc?2:0)+(I.gzhead.extra?4:0)+(I.gzhead.name?8:0)+(I.gzhead.comment?16:0)),it(I,255&I.gzhead.time),it(I,I.gzhead.time>>8&255),it(I,I.gzhead.time>>16&255),it(I,I.gzhead.time>>24&255),it(I,I.level===9?2:2<=I.strategy||I.level<2?4:0),it(I,255&I.gzhead.os),I.gzhead.extra&&I.gzhead.extra.length&&(it(I,255&I.gzhead.extra.length),it(I,I.gzhead.extra.length>>8&255)),I.gzhead.hcrc&&(p.adler=f(p.adler,I.pending_buf,I.pending,0)),I.gzindex=0,I.status=69):(it(I,0),it(I,0),it(I,0),it(I,0),it(I,0),it(I,I.level===9?2:2<=I.strategy||I.level<2?4:0),it(I,3),I.status=D);else{var K=b+(I.w_bits-8<<4)<<8;K|=(2<=I.strategy||I.level<2?0:I.level<6?1:I.level===6?2:3)<<6,I.strstart!==0&&(K|=32),K+=31-K%31,I.status=D,Q(I,K),I.strstart!==0&&(Q(I,p.adler>>>16),Q(I,65535&p.adler)),p.adler=1}if(I.status===69)if(I.gzhead.extra){for(w=I.pending;I.gzindex<(65535&I.gzhead.extra.length)&&(I.pending!==I.pending_buf_size||(I.gzhead.hcrc&&I.pending>w&&(p.adler=f(p.adler,I.pending_buf,I.pending-w,w)),O(p),w=I.pending,I.pending!==I.pending_buf_size));)it(I,255&I.gzhead.extra[I.gzindex]),I.gzindex++;I.gzhead.hcrc&&I.pending>w&&(p.adler=f(p.adler,I.pending_buf,I.pending-w,w)),I.gzindex===I.gzhead.extra.length&&(I.gzindex=0,I.status=73)}else I.status=73;if(I.status===73)if(I.gzhead.name){w=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>w&&(p.adler=f(p.adler,I.pending_buf,I.pending-w,w)),O(p),w=I.pending,I.pending===I.pending_buf_size)){k=1;break}k=I.gzindex<I.gzhead.name.length?255&I.gzhead.name.charCodeAt(I.gzindex++):0,it(I,k)}while(k!==0);I.gzhead.hcrc&&I.pending>w&&(p.adler=f(p.adler,I.pending_buf,I.pending-w,w)),k===0&&(I.gzindex=0,I.status=91)}else I.status=91;if(I.status===91)if(I.gzhead.comment){w=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>w&&(p.adler=f(p.adler,I.pending_buf,I.pending-w,w)),O(p),w=I.pending,I.pending===I.pending_buf_size)){k=1;break}k=I.gzindex<I.gzhead.comment.length?255&I.gzhead.comment.charCodeAt(I.gzindex++):0,it(I,k)}while(k!==0);I.gzhead.hcrc&&I.pending>w&&(p.adler=f(p.adler,I.pending_buf,I.pending-w,w)),k===0&&(I.status=103)}else I.status=103;if(I.status===103&&(I.gzhead.hcrc?(I.pending+2>I.pending_buf_size&&O(p),I.pending+2<=I.pending_buf_size&&(it(I,255&p.adler),it(I,p.adler>>8&255),p.adler=0,I.status=D)):I.status=D),I.pending!==0){if(O(p),p.avail_out===0)return I.last_flush=-1,l}else if(p.avail_in===0&&z(G)<=z(B)&&G!==d)return et(p,-5);if(I.status===666&&p.avail_in!==0)return et(p,-5);if(p.avail_in!==0||I.lookahead!==0||G!==_&&I.status!==666){var Z=I.strategy===2?function(C,$){for(var tt;;){if(C.lookahead===0&&(mt(C),C.lookahead===0)){if($===_)return y;break}if(C.match_length=0,tt=a._tr_tally(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++,tt&&(P(C,!1),C.strm.avail_out===0))return y}return C.insert=0,$===d?(P(C,!0),C.strm.avail_out===0?J:U):C.last_lit&&(P(C,!1),C.strm.avail_out===0)?y:M}(I,G):I.strategy===3?function(C,$){for(var tt,V,rt,ft,ut=C.window;;){if(C.lookahead<=F){if(mt(C),C.lookahead<=F&&$===_)return y;if(C.lookahead===0)break}if(C.match_length=0,C.lookahead>=L&&0<C.strstart&&(V=ut[rt=C.strstart-1])===ut[++rt]&&V===ut[++rt]&&V===ut[++rt]){ft=C.strstart+F;do;while(V===ut[++rt]&&V===ut[++rt]&&V===ut[++rt]&&V===ut[++rt]&&V===ut[++rt]&&V===ut[++rt]&&V===ut[++rt]&&V===ut[++rt]&&rt<ft);C.match_length=F-(ft-rt),C.match_length>C.lookahead&&(C.match_length=C.lookahead)}if(C.match_length>=L?(tt=a._tr_tally(C,1,C.match_length-L),C.lookahead-=C.match_length,C.strstart+=C.match_length,C.match_length=0):(tt=a._tr_tally(C,0,C.window[C.strstart]),C.lookahead--,C.strstart++),tt&&(P(C,!1),C.strm.avail_out===0))return y}return C.insert=0,$===d?(P(C,!0),C.strm.avail_out===0?J:U):C.last_lit&&(P(C,!1),C.strm.avail_out===0)?y:M}(I,G):s[I.level].func(I,G);if(Z!==J&&Z!==U||(I.status=666),Z===y||Z===J)return p.avail_out===0&&(I.last_flush=-1),l;if(Z===M&&(G===1?a._tr_align(I):G!==5&&(a._tr_stored_block(I,0,0,!1),G===3&&(Y(I.head),I.lookahead===0&&(I.strstart=0,I.block_start=0,I.insert=0))),O(p),p.avail_out===0))return I.last_flush=-1,l}return G!==d?l:I.wrap<=0?1:(I.wrap===2?(it(I,255&p.adler),it(I,p.adler>>8&255),it(I,p.adler>>16&255),it(I,p.adler>>24&255),it(I,255&p.total_in),it(I,p.total_in>>8&255),it(I,p.total_in>>16&255),it(I,p.total_in>>24&255)):(Q(I,p.adler>>>16),Q(I,65535&p.adler)),O(p),0<I.wrap&&(I.wrap=-I.wrap),I.pending!==0?l:1)},r.deflateEnd=function(p){var G;return p&&p.state?(G=p.state.status)!==R&&G!==69&&G!==73&&G!==91&&G!==103&&G!==D&&G!==666?et(p,g):(p.state=null,G===D?et(p,-3):l):g},r.deflateSetDictionary=function(p,G){var B,I,w,k,K,Z,C,$,tt=G.length;if(!p||!p.state||(k=(B=p.state).wrap)===2||k===1&&B.status!==R||B.lookahead)return g;for(k===1&&(p.adler=u(p.adler,G,tt,0)),B.wrap=0,tt>=B.w_size&&(k===0&&(Y(B.head),B.strstart=0,B.block_start=0,B.insert=0),$=new o.Buf8(B.w_size),o.arraySet($,G,tt-B.w_size,B.w_size,0),G=$,tt=B.w_size),K=p.avail_in,Z=p.next_in,C=p.input,p.avail_in=tt,p.next_in=0,p.input=G,mt(B);B.lookahead>=L;){for(I=B.strstart,w=B.lookahead-(L-1);B.ins_h=(B.ins_h<<B.hash_shift^B.window[I+L-1])&B.hash_mask,B.prev[I&B.w_mask]=B.head[B.ins_h],B.head[B.ins_h]=I,I++,--w;);B.strstart=I,B.lookahead=L-1,mt(B)}return B.strstart+=B.lookahead,B.block_start=B.strstart,B.insert=B.lookahead,B.lookahead=0,B.match_length=B.prev_length=L-1,B.match_available=0,p.next_in=Z,p.input=C,p.avail_in=K,B.wrap=k,l},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,i,r){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,i,r){i.exports=function(s,o){var a,u,f,h,_,d,l,g,c,v,m,b,E,A,T,x,S,N,L,F,W,R,D,y,M;a=s.state,u=s.next_in,y=s.input,f=u+(s.avail_in-5),h=s.next_out,M=s.output,_=h-(o-s.avail_out),d=h+(s.avail_out-257),l=a.dmax,g=a.wsize,c=a.whave,v=a.wnext,m=a.window,b=a.hold,E=a.bits,A=a.lencode,T=a.distcode,x=(1<<a.lenbits)-1,S=(1<<a.distbits)-1;t:do{E<15&&(b+=y[u++]<<E,E+=8,b+=y[u++]<<E,E+=8),N=A[b&x];e:for(;;){if(b>>>=L=N>>>24,E-=L,(L=N>>>16&255)===0)M[h++]=65535&N;else{if(!(16&L)){if(!(64&L)){N=A[(65535&N)+(b&(1<<L)-1)];continue e}if(32&L){a.mode=12;break t}s.msg="invalid literal/length code",a.mode=30;break t}F=65535&N,(L&=15)&&(E<L&&(b+=y[u++]<<E,E+=8),F+=b&(1<<L)-1,b>>>=L,E-=L),E<15&&(b+=y[u++]<<E,E+=8,b+=y[u++]<<E,E+=8),N=T[b&S];n:for(;;){if(b>>>=L=N>>>24,E-=L,!(16&(L=N>>>16&255))){if(!(64&L)){N=T[(65535&N)+(b&(1<<L)-1)];continue n}s.msg="invalid distance code",a.mode=30;break t}if(W=65535&N,E<(L&=15)&&(b+=y[u++]<<E,(E+=8)<L&&(b+=y[u++]<<E,E+=8)),l<(W+=b&(1<<L)-1)){s.msg="invalid distance too far back",a.mode=30;break t}if(b>>>=L,E-=L,(L=h-_)<W){if(c<(L=W-L)&&a.sane){s.msg="invalid distance too far back",a.mode=30;break t}if(D=m,(R=0)===v){if(R+=g-L,L<F){for(F-=L;M[h++]=m[R++],--L;);R=h-W,D=M}}else if(v<L){if(R+=g+v-L,(L-=v)<F){for(F-=L;M[h++]=m[R++],--L;);if(R=0,v<F){for(F-=L=v;M[h++]=m[R++],--L;);R=h-W,D=M}}}else if(R+=v-L,L<F){for(F-=L;M[h++]=m[R++],--L;);R=h-W,D=M}for(;2<F;)M[h++]=D[R++],M[h++]=D[R++],M[h++]=D[R++],F-=3;F&&(M[h++]=D[R++],1<F&&(M[h++]=D[R++]))}else{for(R=h-W;M[h++]=M[R++],M[h++]=M[R++],M[h++]=M[R++],2<(F-=3););F&&(M[h++]=M[R++],1<F&&(M[h++]=M[R++]))}break}}break}}while(u<f&&h<d);u-=F=E>>3,b&=(1<<(E-=F<<3))-1,s.next_in=u,s.next_out=h,s.avail_in=u<f?f-u+5:5-(u-f),s.avail_out=h<d?d-h+257:257-(h-d),a.hold=b,a.bits=E}},{}],49:[function(n,i,r){var s=n("../utils/common"),o=n("./adler32"),a=n("./crc32"),u=n("./inffast"),f=n("./inftrees"),h=1,_=2,d=0,l=-2,g=1,c=852,v=592;function m(R){return(R>>>24&255)+(R>>>8&65280)+((65280&R)<<8)+((255&R)<<24)}function b(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function E(R){var D;return R&&R.state?(D=R.state,R.total_in=R.total_out=D.total=0,R.msg="",D.wrap&&(R.adler=1&D.wrap),D.mode=g,D.last=0,D.havedict=0,D.dmax=32768,D.head=null,D.hold=0,D.bits=0,D.lencode=D.lendyn=new s.Buf32(c),D.distcode=D.distdyn=new s.Buf32(v),D.sane=1,D.back=-1,d):l}function A(R){var D;return R&&R.state?((D=R.state).wsize=0,D.whave=0,D.wnext=0,E(R)):l}function T(R,D){var y,M;return R&&R.state?(M=R.state,D<0?(y=0,D=-D):(y=1+(D>>4),D<48&&(D&=15)),D&&(D<8||15<D)?l:(M.window!==null&&M.wbits!==D&&(M.window=null),M.wrap=y,M.wbits=D,A(R))):l}function x(R,D){var y,M;return R?(M=new b,(R.state=M).window=null,(y=T(R,D))!==d&&(R.state=null),y):l}var S,N,L=!0;function F(R){if(L){var D;for(S=new s.Buf32(512),N=new s.Buf32(32),D=0;D<144;)R.lens[D++]=8;for(;D<256;)R.lens[D++]=9;for(;D<280;)R.lens[D++]=7;for(;D<288;)R.lens[D++]=8;for(f(h,R.lens,0,288,S,0,R.work,{bits:9}),D=0;D<32;)R.lens[D++]=5;f(_,R.lens,0,32,N,0,R.work,{bits:5}),L=!1}R.lencode=S,R.lenbits=9,R.distcode=N,R.distbits=5}function W(R,D,y,M){var J,U=R.state;return U.window===null&&(U.wsize=1<<U.wbits,U.wnext=0,U.whave=0,U.window=new s.Buf8(U.wsize)),M>=U.wsize?(s.arraySet(U.window,D,y-U.wsize,U.wsize,0),U.wnext=0,U.whave=U.wsize):(M<(J=U.wsize-U.wnext)&&(J=M),s.arraySet(U.window,D,y-M,J,U.wnext),(M-=J)?(s.arraySet(U.window,D,y-M,M,0),U.wnext=M,U.whave=U.wsize):(U.wnext+=J,U.wnext===U.wsize&&(U.wnext=0),U.whave<U.wsize&&(U.whave+=J))),0}r.inflateReset=A,r.inflateReset2=T,r.inflateResetKeep=E,r.inflateInit=function(R){return x(R,15)},r.inflateInit2=x,r.inflate=function(R,D){var y,M,J,U,et,z,Y,O,P,it,Q,q,mt,It,at,lt,Et,gt,Ft,Ot,p,G,B,I,w=0,k=new s.Buf8(4),K=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!R||!R.state||!R.output||!R.input&&R.avail_in!==0)return l;(y=R.state).mode===12&&(y.mode=13),et=R.next_out,J=R.output,Y=R.avail_out,U=R.next_in,M=R.input,z=R.avail_in,O=y.hold,P=y.bits,it=z,Q=Y,G=d;t:for(;;)switch(y.mode){case g:if(y.wrap===0){y.mode=13;break}for(;P<16;){if(z===0)break t;z--,O+=M[U++]<<P,P+=8}if(2&y.wrap&&O===35615){k[y.check=0]=255&O,k[1]=O>>>8&255,y.check=a(y.check,k,2,0),P=O=0,y.mode=2;break}if(y.flags=0,y.head&&(y.head.done=!1),!(1&y.wrap)||(((255&O)<<8)+(O>>8))%31){R.msg="incorrect header check",y.mode=30;break}if((15&O)!=8){R.msg="unknown compression method",y.mode=30;break}if(P-=4,p=8+(15&(O>>>=4)),y.wbits===0)y.wbits=p;else if(p>y.wbits){R.msg="invalid window size",y.mode=30;break}y.dmax=1<<p,R.adler=y.check=1,y.mode=512&O?10:12,P=O=0;break;case 2:for(;P<16;){if(z===0)break t;z--,O+=M[U++]<<P,P+=8}if(y.flags=O,(255&y.flags)!=8){R.msg="unknown compression method",y.mode=30;break}if(57344&y.flags){R.msg="unknown header flags set",y.mode=30;break}y.head&&(y.head.text=O>>8&1),512&y.flags&&(k[0]=255&O,k[1]=O>>>8&255,y.check=a(y.check,k,2,0)),P=O=0,y.mode=3;case 3:for(;P<32;){if(z===0)break t;z--,O+=M[U++]<<P,P+=8}y.head&&(y.head.time=O),512&y.flags&&(k[0]=255&O,k[1]=O>>>8&255,k[2]=O>>>16&255,k[3]=O>>>24&255,y.check=a(y.check,k,4,0)),P=O=0,y.mode=4;case 4:for(;P<16;){if(z===0)break t;z--,O+=M[U++]<<P,P+=8}y.head&&(y.head.xflags=255&O,y.head.os=O>>8),512&y.flags&&(k[0]=255&O,k[1]=O>>>8&255,y.check=a(y.check,k,2,0)),P=O=0,y.mode=5;case 5:if(1024&y.flags){for(;P<16;){if(z===0)break t;z--,O+=M[U++]<<P,P+=8}y.length=O,y.head&&(y.head.extra_len=O),512&y.flags&&(k[0]=255&O,k[1]=O>>>8&255,y.check=a(y.check,k,2,0)),P=O=0}else y.head&&(y.head.extra=null);y.mode=6;case 6:if(1024&y.flags&&(z<(q=y.length)&&(q=z),q&&(y.head&&(p=y.head.extra_len-y.length,y.head.extra||(y.head.extra=new Array(y.head.extra_len)),s.arraySet(y.head.extra,M,U,q,p)),512&y.flags&&(y.check=a(y.check,M,q,U)),z-=q,U+=q,y.length-=q),y.length))break t;y.length=0,y.mode=7;case 7:if(2048&y.flags){if(z===0)break t;for(q=0;p=M[U+q++],y.head&&p&&y.length<65536&&(y.head.name+=String.fromCharCode(p)),p&&q<z;);if(512&y.flags&&(y.check=a(y.check,M,q,U)),z-=q,U+=q,p)break t}else y.head&&(y.head.name=null);y.length=0,y.mode=8;case 8:if(4096&y.flags){if(z===0)break t;for(q=0;p=M[U+q++],y.head&&p&&y.length<65536&&(y.head.comment+=String.fromCharCode(p)),p&&q<z;);if(512&y.flags&&(y.check=a(y.check,M,q,U)),z-=q,U+=q,p)break t}else y.head&&(y.head.comment=null);y.mode=9;case 9:if(512&y.flags){for(;P<16;){if(z===0)break t;z--,O+=M[U++]<<P,P+=8}if(O!==(65535&y.check)){R.msg="header crc mismatch",y.mode=30;break}P=O=0}y.head&&(y.head.hcrc=y.flags>>9&1,y.head.done=!0),R.adler=y.check=0,y.mode=12;break;case 10:for(;P<32;){if(z===0)break t;z--,O+=M[U++]<<P,P+=8}R.adler=y.check=m(O),P=O=0,y.mode=11;case 11:if(y.havedict===0)return R.next_out=et,R.avail_out=Y,R.next_in=U,R.avail_in=z,y.hold=O,y.bits=P,2;R.adler=y.check=1,y.mode=12;case 12:if(D===5||D===6)break t;case 13:if(y.last){O>>>=7&P,P-=7&P,y.mode=27;break}for(;P<3;){if(z===0)break t;z--,O+=M[U++]<<P,P+=8}switch(y.last=1&O,P-=1,3&(O>>>=1)){case 0:y.mode=14;break;case 1:if(F(y),y.mode=20,D!==6)break;O>>>=2,P-=2;break t;case 2:y.mode=17;break;case 3:R.msg="invalid block type",y.mode=30}O>>>=2,P-=2;break;case 14:for(O>>>=7&P,P-=7&P;P<32;){if(z===0)break t;z--,O+=M[U++]<<P,P+=8}if((65535&O)!=(O>>>16^65535)){R.msg="invalid stored block lengths",y.mode=30;break}if(y.length=65535&O,P=O=0,y.mode=15,D===6)break t;case 15:y.mode=16;case 16:if(q=y.length){if(z<q&&(q=z),Y<q&&(q=Y),q===0)break t;s.arraySet(J,M,U,q,et),z-=q,U+=q,Y-=q,et+=q,y.length-=q;break}y.mode=12;break;case 17:for(;P<14;){if(z===0)break t;z--,O+=M[U++]<<P,P+=8}if(y.nlen=257+(31&O),O>>>=5,P-=5,y.ndist=1+(31&O),O>>>=5,P-=5,y.ncode=4+(15&O),O>>>=4,P-=4,286<y.nlen||30<y.ndist){R.msg="too many length or distance symbols",y.mode=30;break}y.have=0,y.mode=18;case 18:for(;y.have<y.ncode;){for(;P<3;){if(z===0)break t;z--,O+=M[U++]<<P,P+=8}y.lens[K[y.have++]]=7&O,O>>>=3,P-=3}for(;y.have<19;)y.lens[K[y.have++]]=0;if(y.lencode=y.lendyn,y.lenbits=7,B={bits:y.lenbits},G=f(0,y.lens,0,19,y.lencode,0,y.work,B),y.lenbits=B.bits,G){R.msg="invalid code lengths set",y.mode=30;break}y.have=0,y.mode=19;case 19:for(;y.have<y.nlen+y.ndist;){for(;lt=(w=y.lencode[O&(1<<y.lenbits)-1])>>>16&255,Et=65535&w,!((at=w>>>24)<=P);){if(z===0)break t;z--,O+=M[U++]<<P,P+=8}if(Et<16)O>>>=at,P-=at,y.lens[y.have++]=Et;else{if(Et===16){for(I=at+2;P<I;){if(z===0)break t;z--,O+=M[U++]<<P,P+=8}if(O>>>=at,P-=at,y.have===0){R.msg="invalid bit length repeat",y.mode=30;break}p=y.lens[y.have-1],q=3+(3&O),O>>>=2,P-=2}else if(Et===17){for(I=at+3;P<I;){if(z===0)break t;z--,O+=M[U++]<<P,P+=8}P-=at,p=0,q=3+(7&(O>>>=at)),O>>>=3,P-=3}else{for(I=at+7;P<I;){if(z===0)break t;z--,O+=M[U++]<<P,P+=8}P-=at,p=0,q=11+(127&(O>>>=at)),O>>>=7,P-=7}if(y.have+q>y.nlen+y.ndist){R.msg="invalid bit length repeat",y.mode=30;break}for(;q--;)y.lens[y.have++]=p}}if(y.mode===30)break;if(y.lens[256]===0){R.msg="invalid code -- missing end-of-block",y.mode=30;break}if(y.lenbits=9,B={bits:y.lenbits},G=f(h,y.lens,0,y.nlen,y.lencode,0,y.work,B),y.lenbits=B.bits,G){R.msg="invalid literal/lengths set",y.mode=30;break}if(y.distbits=6,y.distcode=y.distdyn,B={bits:y.distbits},G=f(_,y.lens,y.nlen,y.ndist,y.distcode,0,y.work,B),y.distbits=B.bits,G){R.msg="invalid distances set",y.mode=30;break}if(y.mode=20,D===6)break t;case 20:y.mode=21;case 21:if(6<=z&&258<=Y){R.next_out=et,R.avail_out=Y,R.next_in=U,R.avail_in=z,y.hold=O,y.bits=P,u(R,Q),et=R.next_out,J=R.output,Y=R.avail_out,U=R.next_in,M=R.input,z=R.avail_in,O=y.hold,P=y.bits,y.mode===12&&(y.back=-1);break}for(y.back=0;lt=(w=y.lencode[O&(1<<y.lenbits)-1])>>>16&255,Et=65535&w,!((at=w>>>24)<=P);){if(z===0)break t;z--,O+=M[U++]<<P,P+=8}if(lt&&!(240&lt)){for(gt=at,Ft=lt,Ot=Et;lt=(w=y.lencode[Ot+((O&(1<<gt+Ft)-1)>>gt)])>>>16&255,Et=65535&w,!(gt+(at=w>>>24)<=P);){if(z===0)break t;z--,O+=M[U++]<<P,P+=8}O>>>=gt,P-=gt,y.back+=gt}if(O>>>=at,P-=at,y.back+=at,y.length=Et,lt===0){y.mode=26;break}if(32&lt){y.back=-1,y.mode=12;break}if(64&lt){R.msg="invalid literal/length code",y.mode=30;break}y.extra=15&lt,y.mode=22;case 22:if(y.extra){for(I=y.extra;P<I;){if(z===0)break t;z--,O+=M[U++]<<P,P+=8}y.length+=O&(1<<y.extra)-1,O>>>=y.extra,P-=y.extra,y.back+=y.extra}y.was=y.length,y.mode=23;case 23:for(;lt=(w=y.distcode[O&(1<<y.distbits)-1])>>>16&255,Et=65535&w,!((at=w>>>24)<=P);){if(z===0)break t;z--,O+=M[U++]<<P,P+=8}if(!(240&lt)){for(gt=at,Ft=lt,Ot=Et;lt=(w=y.distcode[Ot+((O&(1<<gt+Ft)-1)>>gt)])>>>16&255,Et=65535&w,!(gt+(at=w>>>24)<=P);){if(z===0)break t;z--,O+=M[U++]<<P,P+=8}O>>>=gt,P-=gt,y.back+=gt}if(O>>>=at,P-=at,y.back+=at,64&lt){R.msg="invalid distance code",y.mode=30;break}y.offset=Et,y.extra=15&lt,y.mode=24;case 24:if(y.extra){for(I=y.extra;P<I;){if(z===0)break t;z--,O+=M[U++]<<P,P+=8}y.offset+=O&(1<<y.extra)-1,O>>>=y.extra,P-=y.extra,y.back+=y.extra}if(y.offset>y.dmax){R.msg="invalid distance too far back",y.mode=30;break}y.mode=25;case 25:if(Y===0)break t;if(q=Q-Y,y.offset>q){if((q=y.offset-q)>y.whave&&y.sane){R.msg="invalid distance too far back",y.mode=30;break}mt=q>y.wnext?(q-=y.wnext,y.wsize-q):y.wnext-q,q>y.length&&(q=y.length),It=y.window}else It=J,mt=et-y.offset,q=y.length;for(Y<q&&(q=Y),Y-=q,y.length-=q;J[et++]=It[mt++],--q;);y.length===0&&(y.mode=21);break;case 26:if(Y===0)break t;J[et++]=y.length,Y--,y.mode=21;break;case 27:if(y.wrap){for(;P<32;){if(z===0)break t;z--,O|=M[U++]<<P,P+=8}if(Q-=Y,R.total_out+=Q,y.total+=Q,Q&&(R.adler=y.check=y.flags?a(y.check,J,Q,et-Q):o(y.check,J,Q,et-Q)),Q=Y,(y.flags?O:m(O))!==y.check){R.msg="incorrect data check",y.mode=30;break}P=O=0}y.mode=28;case 28:if(y.wrap&&y.flags){for(;P<32;){if(z===0)break t;z--,O+=M[U++]<<P,P+=8}if(O!==(4294967295&y.total)){R.msg="incorrect length check",y.mode=30;break}P=O=0}y.mode=29;case 29:G=1;break t;case 30:G=-3;break t;case 31:return-4;case 32:default:return l}return R.next_out=et,R.avail_out=Y,R.next_in=U,R.avail_in=z,y.hold=O,y.bits=P,(y.wsize||Q!==R.avail_out&&y.mode<30&&(y.mode<27||D!==4))&&W(R,R.output,R.next_out,Q-R.avail_out)?(y.mode=31,-4):(it-=R.avail_in,Q-=R.avail_out,R.total_in+=it,R.total_out+=Q,y.total+=Q,y.wrap&&Q&&(R.adler=y.check=y.flags?a(y.check,J,Q,R.next_out-Q):o(y.check,J,Q,R.next_out-Q)),R.data_type=y.bits+(y.last?64:0)+(y.mode===12?128:0)+(y.mode===20||y.mode===15?256:0),(it==0&&Q===0||D===4)&&G===d&&(G=-5),G)},r.inflateEnd=function(R){if(!R||!R.state)return l;var D=R.state;return D.window&&(D.window=null),R.state=null,d},r.inflateGetHeader=function(R,D){var y;return R&&R.state&&2&(y=R.state).wrap?((y.head=D).done=!1,d):l},r.inflateSetDictionary=function(R,D){var y,M=D.length;return R&&R.state?(y=R.state).wrap!==0&&y.mode!==11?l:y.mode===11&&o(1,D,M,0)!==y.check?-3:W(R,D,M,M)?(y.mode=31,-4):(y.havedict=1,d):l},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,i,r){var s=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],u=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],f=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(h,_,d,l,g,c,v,m){var b,E,A,T,x,S,N,L,F,W=m.bits,R=0,D=0,y=0,M=0,J=0,U=0,et=0,z=0,Y=0,O=0,P=null,it=0,Q=new s.Buf16(16),q=new s.Buf16(16),mt=null,It=0;for(R=0;R<=15;R++)Q[R]=0;for(D=0;D<l;D++)Q[_[d+D]]++;for(J=W,M=15;1<=M&&Q[M]===0;M--);if(M<J&&(J=M),M===0)return g[c++]=20971520,g[c++]=20971520,m.bits=1,0;for(y=1;y<M&&Q[y]===0;y++);for(J<y&&(J=y),R=z=1;R<=15;R++)if(z<<=1,(z-=Q[R])<0)return-1;if(0<z&&(h===0||M!==1))return-1;for(q[1]=0,R=1;R<15;R++)q[R+1]=q[R]+Q[R];for(D=0;D<l;D++)_[d+D]!==0&&(v[q[_[d+D]]++]=D);if(S=h===0?(P=mt=v,19):h===1?(P=o,it-=257,mt=a,It-=257,256):(P=u,mt=f,-1),R=y,x=c,et=D=O=0,A=-1,T=(Y=1<<(U=J))-1,h===1&&852<Y||h===2&&592<Y)return 1;for(;;){for(N=R-et,F=v[D]<S?(L=0,v[D]):v[D]>S?(L=mt[It+v[D]],P[it+v[D]]):(L=96,0),b=1<<R-et,y=E=1<<U;g[x+(O>>et)+(E-=b)]=N<<24|L<<16|F|0,E!==0;);for(b=1<<R-1;O&b;)b>>=1;if(b!==0?(O&=b-1,O+=b):O=0,D++,--Q[R]==0){if(R===M)break;R=_[d+v[D]]}if(J<R&&(O&T)!==A){for(et===0&&(et=J),x+=y,z=1<<(U=R-et);U+et<M&&!((z-=Q[U+et])<=0);)U++,z<<=1;if(Y+=1<<U,h===1&&852<Y||h===2&&592<Y)return 1;g[A=O&T]=J<<24|U<<16|x-c|0}}return O!==0&&(g[x+O]=R-et<<24|64<<16|0),m.bits=J,0}},{"../utils/common":41}],51:[function(n,i,r){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,i,r){var s=n("../utils/common"),o=0,a=1;function u(w){for(var k=w.length;0<=--k;)w[k]=0}var f=0,h=29,_=256,d=_+1+h,l=30,g=19,c=2*d+1,v=15,m=16,b=7,E=256,A=16,T=17,x=18,S=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],N=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],L=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],W=new Array(2*(d+2));u(W);var R=new Array(2*l);u(R);var D=new Array(512);u(D);var y=new Array(256);u(y);var M=new Array(h);u(M);var J,U,et,z=new Array(l);function Y(w,k,K,Z,C){this.static_tree=w,this.extra_bits=k,this.extra_base=K,this.elems=Z,this.max_length=C,this.has_stree=w&&w.length}function O(w,k){this.dyn_tree=w,this.max_code=0,this.stat_desc=k}function P(w){return w<256?D[w]:D[256+(w>>>7)]}function it(w,k){w.pending_buf[w.pending++]=255&k,w.pending_buf[w.pending++]=k>>>8&255}function Q(w,k,K){w.bi_valid>m-K?(w.bi_buf|=k<<w.bi_valid&65535,it(w,w.bi_buf),w.bi_buf=k>>m-w.bi_valid,w.bi_valid+=K-m):(w.bi_buf|=k<<w.bi_valid&65535,w.bi_valid+=K)}function q(w,k,K){Q(w,K[2*k],K[2*k+1])}function mt(w,k){for(var K=0;K|=1&w,w>>>=1,K<<=1,0<--k;);return K>>>1}function It(w,k,K){var Z,C,$=new Array(v+1),tt=0;for(Z=1;Z<=v;Z++)$[Z]=tt=tt+K[Z-1]<<1;for(C=0;C<=k;C++){var V=w[2*C+1];V!==0&&(w[2*C]=mt($[V]++,V))}}function at(w){var k;for(k=0;k<d;k++)w.dyn_ltree[2*k]=0;for(k=0;k<l;k++)w.dyn_dtree[2*k]=0;for(k=0;k<g;k++)w.bl_tree[2*k]=0;w.dyn_ltree[2*E]=1,w.opt_len=w.static_len=0,w.last_lit=w.matches=0}function lt(w){8<w.bi_valid?it(w,w.bi_buf):0<w.bi_valid&&(w.pending_buf[w.pending++]=w.bi_buf),w.bi_buf=0,w.bi_valid=0}function Et(w,k,K,Z){var C=2*k,$=2*K;return w[C]<w[$]||w[C]===w[$]&&Z[k]<=Z[K]}function gt(w,k,K){for(var Z=w.heap[K],C=K<<1;C<=w.heap_len&&(C<w.heap_len&&Et(k,w.heap[C+1],w.heap[C],w.depth)&&C++,!Et(k,Z,w.heap[C],w.depth));)w.heap[K]=w.heap[C],K=C,C<<=1;w.heap[K]=Z}function Ft(w,k,K){var Z,C,$,tt,V=0;if(w.last_lit!==0)for(;Z=w.pending_buf[w.d_buf+2*V]<<8|w.pending_buf[w.d_buf+2*V+1],C=w.pending_buf[w.l_buf+V],V++,Z===0?q(w,C,k):(q(w,($=y[C])+_+1,k),(tt=S[$])!==0&&Q(w,C-=M[$],tt),q(w,$=P(--Z),K),(tt=N[$])!==0&&Q(w,Z-=z[$],tt)),V<w.last_lit;);q(w,E,k)}function Ot(w,k){var K,Z,C,$=k.dyn_tree,tt=k.stat_desc.static_tree,V=k.stat_desc.has_stree,rt=k.stat_desc.elems,ft=-1;for(w.heap_len=0,w.heap_max=c,K=0;K<rt;K++)$[2*K]!==0?(w.heap[++w.heap_len]=ft=K,w.depth[K]=0):$[2*K+1]=0;for(;w.heap_len<2;)$[2*(C=w.heap[++w.heap_len]=ft<2?++ft:0)]=1,w.depth[C]=0,w.opt_len--,V&&(w.static_len-=tt[2*C+1]);for(k.max_code=ft,K=w.heap_len>>1;1<=K;K--)gt(w,$,K);for(C=rt;K=w.heap[1],w.heap[1]=w.heap[w.heap_len--],gt(w,$,1),Z=w.heap[1],w.heap[--w.heap_max]=K,w.heap[--w.heap_max]=Z,$[2*C]=$[2*K]+$[2*Z],w.depth[C]=(w.depth[K]>=w.depth[Z]?w.depth[K]:w.depth[Z])+1,$[2*K+1]=$[2*Z+1]=C,w.heap[1]=C++,gt(w,$,1),2<=w.heap_len;);w.heap[--w.heap_max]=w.heap[1],function(ut,Nt){var Je,Mt,Xe,yt,Dn,$r,$t=Nt.dyn_tree,as=Nt.max_code,ua=Nt.stat_desc.static_tree,la=Nt.stat_desc.has_stree,ca=Nt.stat_desc.extra_bits,us=Nt.stat_desc.extra_base,Qe=Nt.stat_desc.max_length,Bn=0;for(yt=0;yt<=v;yt++)ut.bl_count[yt]=0;for($t[2*ut.heap[ut.heap_max]+1]=0,Je=ut.heap_max+1;Je<c;Je++)Qe<(yt=$t[2*$t[2*(Mt=ut.heap[Je])+1]+1]+1)&&(yt=Qe,Bn++),$t[2*Mt+1]=yt,as<Mt||(ut.bl_count[yt]++,Dn=0,us<=Mt&&(Dn=ca[Mt-us]),$r=$t[2*Mt],ut.opt_len+=$r*(yt+Dn),la&&(ut.static_len+=$r*(ua[2*Mt+1]+Dn)));if(Bn!==0){do{for(yt=Qe-1;ut.bl_count[yt]===0;)yt--;ut.bl_count[yt]--,ut.bl_count[yt+1]+=2,ut.bl_count[Qe]--,Bn-=2}while(0<Bn);for(yt=Qe;yt!==0;yt--)for(Mt=ut.bl_count[yt];Mt!==0;)as<(Xe=ut.heap[--Je])||($t[2*Xe+1]!==yt&&(ut.opt_len+=(yt-$t[2*Xe+1])*$t[2*Xe],$t[2*Xe+1]=yt),Mt--)}}(w,k),It($,ft,w.bl_count)}function p(w,k,K){var Z,C,$=-1,tt=k[1],V=0,rt=7,ft=4;for(tt===0&&(rt=138,ft=3),k[2*(K+1)+1]=65535,Z=0;Z<=K;Z++)C=tt,tt=k[2*(Z+1)+1],++V<rt&&C===tt||(V<ft?w.bl_tree[2*C]+=V:C!==0?(C!==$&&w.bl_tree[2*C]++,w.bl_tree[2*A]++):V<=10?w.bl_tree[2*T]++:w.bl_tree[2*x]++,$=C,ft=(V=0)===tt?(rt=138,3):C===tt?(rt=6,3):(rt=7,4))}function G(w,k,K){var Z,C,$=-1,tt=k[1],V=0,rt=7,ft=4;for(tt===0&&(rt=138,ft=3),Z=0;Z<=K;Z++)if(C=tt,tt=k[2*(Z+1)+1],!(++V<rt&&C===tt)){if(V<ft)for(;q(w,C,w.bl_tree),--V!=0;);else C!==0?(C!==$&&(q(w,C,w.bl_tree),V--),q(w,A,w.bl_tree),Q(w,V-3,2)):V<=10?(q(w,T,w.bl_tree),Q(w,V-3,3)):(q(w,x,w.bl_tree),Q(w,V-11,7));$=C,ft=(V=0)===tt?(rt=138,3):C===tt?(rt=6,3):(rt=7,4)}}u(z);var B=!1;function I(w,k,K,Z){Q(w,(f<<1)+(Z?1:0),3),function(C,$,tt,V){lt(C),V&&(it(C,tt),it(C,~tt)),s.arraySet(C.pending_buf,C.window,$,tt,C.pending),C.pending+=tt}(w,k,K,!0)}r._tr_init=function(w){B||(function(){var k,K,Z,C,$,tt=new Array(v+1);for(C=Z=0;C<h-1;C++)for(M[C]=Z,k=0;k<1<<S[C];k++)y[Z++]=C;for(y[Z-1]=C,C=$=0;C<16;C++)for(z[C]=$,k=0;k<1<<N[C];k++)D[$++]=C;for($>>=7;C<l;C++)for(z[C]=$<<7,k=0;k<1<<N[C]-7;k++)D[256+$++]=C;for(K=0;K<=v;K++)tt[K]=0;for(k=0;k<=143;)W[2*k+1]=8,k++,tt[8]++;for(;k<=255;)W[2*k+1]=9,k++,tt[9]++;for(;k<=279;)W[2*k+1]=7,k++,tt[7]++;for(;k<=287;)W[2*k+1]=8,k++,tt[8]++;for(It(W,d+1,tt),k=0;k<l;k++)R[2*k+1]=5,R[2*k]=mt(k,5);J=new Y(W,S,_+1,d,v),U=new Y(R,N,0,l,v),et=new Y(new Array(0),L,0,g,b)}(),B=!0),w.l_desc=new O(w.dyn_ltree,J),w.d_desc=new O(w.dyn_dtree,U),w.bl_desc=new O(w.bl_tree,et),w.bi_buf=0,w.bi_valid=0,at(w)},r._tr_stored_block=I,r._tr_flush_block=function(w,k,K,Z){var C,$,tt=0;0<w.level?(w.strm.data_type===2&&(w.strm.data_type=function(V){var rt,ft=4093624447;for(rt=0;rt<=31;rt++,ft>>>=1)if(1&ft&&V.dyn_ltree[2*rt]!==0)return o;if(V.dyn_ltree[18]!==0||V.dyn_ltree[20]!==0||V.dyn_ltree[26]!==0)return a;for(rt=32;rt<_;rt++)if(V.dyn_ltree[2*rt]!==0)return a;return o}(w)),Ot(w,w.l_desc),Ot(w,w.d_desc),tt=function(V){var rt;for(p(V,V.dyn_ltree,V.l_desc.max_code),p(V,V.dyn_dtree,V.d_desc.max_code),Ot(V,V.bl_desc),rt=g-1;3<=rt&&V.bl_tree[2*F[rt]+1]===0;rt--);return V.opt_len+=3*(rt+1)+5+5+4,rt}(w),C=w.opt_len+3+7>>>3,($=w.static_len+3+7>>>3)<=C&&(C=$)):C=$=K+5,K+4<=C&&k!==-1?I(w,k,K,Z):w.strategy===4||$===C?(Q(w,2+(Z?1:0),3),Ft(w,W,R)):(Q(w,4+(Z?1:0),3),function(V,rt,ft,ut){var Nt;for(Q(V,rt-257,5),Q(V,ft-1,5),Q(V,ut-4,4),Nt=0;Nt<ut;Nt++)Q(V,V.bl_tree[2*F[Nt]+1],3);G(V,V.dyn_ltree,rt-1),G(V,V.dyn_dtree,ft-1)}(w,w.l_desc.max_code+1,w.d_desc.max_code+1,tt+1),Ft(w,w.dyn_ltree,w.dyn_dtree)),at(w),Z&&lt(w)},r._tr_tally=function(w,k,K){return w.pending_buf[w.d_buf+2*w.last_lit]=k>>>8&255,w.pending_buf[w.d_buf+2*w.last_lit+1]=255&k,w.pending_buf[w.l_buf+w.last_lit]=255&K,w.last_lit++,k===0?w.dyn_ltree[2*K]++:(w.matches++,k--,w.dyn_ltree[2*(y[K]+_+1)]++,w.dyn_dtree[2*P(k)]++),w.last_lit===w.lit_bufsize-1},r._tr_align=function(w){Q(w,2,3),q(w,E,W),function(k){k.bi_valid===16?(it(k,k.bi_buf),k.bi_buf=0,k.bi_valid=0):8<=k.bi_valid&&(k.pending_buf[k.pending++]=255&k.bi_buf,k.bi_buf>>=8,k.bi_valid-=8)}(w)}},{"../utils/common":41}],53:[function(n,i,r){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,i,r){(function(s){(function(o,a){if(!o.setImmediate){var u,f,h,_,d=1,l={},g=!1,c=o.document,v=Object.getPrototypeOf&&Object.getPrototypeOf(o);v=v&&v.setTimeout?v:o,u={}.toString.call(o.process)==="[object process]"?function(A){process.nextTick(function(){b(A)})}:function(){if(o.postMessage&&!o.importScripts){var A=!0,T=o.onmessage;return o.onmessage=function(){A=!1},o.postMessage("","*"),o.onmessage=T,A}}()?(_="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",E,!1):o.attachEvent("onmessage",E),function(A){o.postMessage(_+A,"*")}):o.MessageChannel?((h=new MessageChannel).port1.onmessage=function(A){b(A.data)},function(A){h.port2.postMessage(A)}):c&&"onreadystatechange"in c.createElement("script")?(f=c.documentElement,function(A){var T=c.createElement("script");T.onreadystatechange=function(){b(A),T.onreadystatechange=null,f.removeChild(T),T=null},f.appendChild(T)}):function(A){setTimeout(b,0,A)},v.setImmediate=function(A){typeof A!="function"&&(A=new Function(""+A));for(var T=new Array(arguments.length-1),x=0;x<T.length;x++)T[x]=arguments[x+1];var S={callback:A,args:T};return l[d]=S,u(d),d++},v.clearImmediate=m}function m(A){delete l[A]}function b(A){if(g)setTimeout(b,0,A);else{var T=l[A];if(T){g=!0;try{(function(x){var S=x.callback,N=x.args;switch(N.length){case 0:S();break;case 1:S(N[0]);break;case 2:S(N[0],N[1]);break;case 3:S(N[0],N[1],N[2]);break;default:S.apply(a,N)}})(T)}finally{m(A),g=!1}}}}function E(A){A.source===o&&typeof A.data=="string"&&A.data.indexOf(_)===0&&b(+A.data.slice(_.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof sn<"u"?sn:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(Yr);var bs=Yr.exports,vs=ys(bs);async function zn(t){if(t.name.endsWith(".zip")){const n=await new vs().loadAsync(t);if(!n.files)throw new Error("Zip:"+t.name);for(const i in n.files)if(!n.files[i].dir){const r=n.files[i],s=await r.async("blob"),o=s.stream();return{fileName:r.name,fileSize:s.size,stream:o,zippedFilePath:t.name}}throw new Error}else{const e=t.stream();return{fileName:t.name,fileSize:t.size,stream:e}}}function Es(t){const e=[];for(let n=0;n<t.length;n++){const i=t.item(n);i&&e.push(i)}return e}const dt=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,bt=Object.keys,wt=Array.isArray;function Rt(t,e){return typeof e!="object"||bt(e).forEach(function(n){t[n]=e[n]}),t}typeof Promise>"u"||dt.Promise||(dt.Promise=Promise);const Se=Object.getPrototypeOf,As={}.hasOwnProperty;function xt(t,e){return As.call(t,e)}function de(t,e){typeof e=="function"&&(e=e(Se(t))),(typeof Reflect>"u"?bt:Reflect.ownKeys)(e).forEach(n=>{Ut(t,n,e[n])})}const Jr=Object.defineProperty;function Ut(t,e,n,i){Jr(t,e,Rt(n&&xt(n,"get")&&typeof n.get=="function"?{get:n.get,set:n.set,configurable:!0}:{value:n,configurable:!0,writable:!0},i))}function pe(t){return{from:function(e){return t.prototype=Object.create(e.prototype),Ut(t.prototype,"constructor",t),{extend:de.bind(null,t.prototype)}}}}const ws=Object.getOwnPropertyDescriptor;function Gn(t,e){let n;return ws(t,e)||(n=Se(t))&&Gn(n,e)}const Ts=[].slice;function an(t,e,n){return Ts.call(t,e,n)}function Xr(t,e){return e(t)}function xe(t){if(!t)throw new Error("Assertion Failed")}function Qr(t){dt.setImmediate?setImmediate(t):setTimeout(t,0)}function ti(t,e){return t.reduce((n,i,r)=>{var s=e(i,r);return s&&(n[s[0]]=s[1]),n},{})}function zt(t,e){if(typeof e=="string"&&xt(t,e))return t[e];if(!e)return t;if(typeof e!="string"){for(var n=[],i=0,r=e.length;i<r;++i){var s=zt(t,e[i]);n.push(s)}return n}var o=e.indexOf(".");if(o!==-1){var a=t[e.substr(0,o)];return a===void 0?void 0:zt(a,e.substr(o+1))}}function Ct(t,e,n){if(t&&e!==void 0&&(!("isFrozen"in Object)||!Object.isFrozen(t)))if(typeof e!="string"&&"length"in e){xe(typeof n!="string"&&"length"in n);for(var i=0,r=e.length;i<r;++i)Ct(t,e[i],n[i])}else{var s=e.indexOf(".");if(s!==-1){var o=e.substr(0,s),a=e.substr(s+1);if(a==="")n===void 0?wt(t)&&!isNaN(parseInt(o))?t.splice(o,1):delete t[o]:t[o]=n;else{var u=t[o];u&&xt(t,o)||(u=t[o]={}),Ct(u,a,n)}}else n===void 0?wt(t)&&!isNaN(parseInt(e))?t.splice(e,1):delete t[e]:t[e]=n}}function ei(t){var e={};for(var n in t)xt(t,n)&&(e[n]=t[n]);return e}const Is=[].concat;function ni(t){return Is.apply([],t)}const ri="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ni([8,16,32,64].map(t=>["Int","Uint","Float"].map(e=>e+t+"Array")))).filter(t=>dt[t]),Rs=ri.map(t=>dt[t]);ti(ri,t=>[t,!0]);let qt=null;function ke(t){qt=typeof WeakMap<"u"&&new WeakMap;const e=jn(t);return qt=null,e}function jn(t){if(!t||typeof t!="object")return t;let e=qt&&qt.get(t);if(e)return e;if(wt(t)){e=[],qt&&qt.set(t,e);for(var n=0,i=t.length;n<i;++n)e.push(jn(t[n]))}else if(Rs.indexOf(t.constructor)>=0)e=t;else{const s=Se(t);for(var r in e=s===Object.prototype?{}:Object.create(s),qt&&qt.set(t,e),t)xt(t,r)&&(e[r]=jn(t[r]))}return e}const{toString:Ls}={};function Kn(t){return Ls.call(t).slice(8,-1)}const Zn=typeof Symbol<"u"?Symbol.iterator:"@@iterator",Ss=typeof Zn=="symbol"?function(t){var e;return t!=null&&(e=t[Zn])&&e.apply(t)}:function(){return null},_e={};function Gt(t){var e,n,i,r;if(arguments.length===1){if(wt(t))return t.slice();if(this===_e&&typeof t=="string")return[t];if(r=Ss(t)){for(n=[];!(i=r.next()).done;)n.push(i.value);return n}if(t==null)return[t];if(typeof(e=t.length)=="number"){for(n=new Array(e);e--;)n[e]=t[e];return n}return[t]}for(e=arguments.length,n=new Array(e);e--;)n[e]=arguments[e];return n}const Wn=typeof Symbol<"u"?t=>t[Symbol.toStringTag]==="AsyncFunction":()=>!1;var Dt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ii(t,e){Dt=t,si=e}var si=()=>!0;const xs=!new Error("").stack;function re(){if(xs)try{throw re.arguments,new Error}catch(t){return t}return new Error}function Hn(t,e){var n=t.stack;return n?(e=e||0,n.indexOf(t.name)===0&&(e+=(t.name+t.message).split(`
`).length),n.split(`
`).slice(e).filter(si).map(i=>`
`+i).join("")):""}var oi=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],$n=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(oi),ks={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function me(t,e){this._e=re(),this.name=t,this.message=e}function ai(t,e){return t+". Errors: "+Object.keys(e).map(n=>e[n].toString()).filter((n,i,r)=>r.indexOf(n)===i).join(`
`)}function un(t,e,n,i){this._e=re(),this.failures=e,this.failedKeys=i,this.successCount=n,this.message=ai(t,e)}function Ne(t,e){this._e=re(),this.name="BulkError",this.failures=Object.keys(e).map(n=>e[n]),this.failuresByPos=e,this.message=ai(t,e)}pe(me).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+Hn(this._e,2))}},toString:function(){return this.name+": "+this.message}}),pe(un).from(me),pe(Ne).from(me);var Vn=$n.reduce((t,e)=>(t[e]=e+"Error",t),{});const Ns=me;var st=$n.reduce((t,e)=>{var n=e+"Error";function i(r,s){this._e=re(),this.name=n,r?typeof r=="string"?(this.message=`${r}${s?`
 `+s:""}`,this.inner=s||null):typeof r=="object"&&(this.message=`${r.name} ${r.message}`,this.inner=r):(this.message=ks[e]||n,this.inner=null)}return pe(i).from(Ns),t[e]=i,t},{});st.Syntax=SyntaxError,st.Type=TypeError,st.Range=RangeError;var ui=oi.reduce((t,e)=>(t[e+"Error"]=st[e],t),{}),ln=$n.reduce((t,e)=>(["Syntax","Type","Range"].indexOf(e)===-1&&(t[e+"Error"]=st[e]),t),{});function ct(){}function Ce(t){return t}function Cs(t,e){return t==null||t===Ce?e:function(n){return e(t(n))}}function ie(t,e){return function(){t.apply(this,arguments),e.apply(this,arguments)}}function Os(t,e){return t===ct?e:function(){var n=t.apply(this,arguments);n!==void 0&&(arguments[0]=n);var i=this.onsuccess,r=this.onerror;this.onsuccess=null,this.onerror=null;var s=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?ie(i,this.onsuccess):i),r&&(this.onerror=this.onerror?ie(r,this.onerror):r),s!==void 0?s:n}}function Ps(t,e){return t===ct?e:function(){t.apply(this,arguments);var n=this.onsuccess,i=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),n&&(this.onsuccess=this.onsuccess?ie(n,this.onsuccess):n),i&&(this.onerror=this.onerror?ie(i,this.onerror):i)}}function Ds(t,e){return t===ct?e:function(n){var i=t.apply(this,arguments);Rt(n,i);var r=this.onsuccess,s=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?ie(r,this.onsuccess):r),s&&(this.onerror=this.onerror?ie(s,this.onerror):s),i===void 0?o===void 0?void 0:o:Rt(i,o)}}function Bs(t,e){return t===ct?e:function(){return e.apply(this,arguments)!==!1&&t.apply(this,arguments)}}function qn(t,e){return t===ct?e:function(){var n=t.apply(this,arguments);if(n&&typeof n.then=="function"){for(var i=this,r=arguments.length,s=new Array(r);r--;)s[r]=arguments[r];return n.then(function(){return e.apply(i,s)})}return e.apply(this,arguments)}}ln.ModifyError=un,ln.DexieError=me,ln.BulkError=Ne;var Oe={};const li=100,[Yn,cn,Jn]=typeof Promise>"u"?[]:(()=>{let t=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[t,Se(t),t];const e=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[e,Se(e),t]})(),ci=cn&&cn.then,hn=Yn&&Yn.constructor,Xn=!!Jn;var Qn=!1,Fs=Jn?()=>{Jn.then(_n)}:dt.setImmediate?setImmediate.bind(null,_n):dt.MutationObserver?()=>{var t=document.createElement("div");new MutationObserver(()=>{_n(),t=null}).observe(t,{attributes:!0}),t.setAttribute("i","1")}:()=>{setTimeout(_n,0)},Pe=function(t,e){De.push([t,e]),fn&&(Fs(),fn=!1)},tr=!0,fn=!0,se=[],dn=[],er=null,nr=Ce,ge={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:vi,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach(t=>{try{vi(t[0],t[1])}catch{}})}},nt=ge,De=[],oe=0,pn=[];function X(t){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=ct,this._lib=!1;var e=this._PSD=nt;if(Dt&&(this._stackHolder=re(),this._prev=null,this._numPrev=0),typeof t!="function"){if(t!==Oe)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&ir(this,this._value))}this._state=null,this._value=null,++e.ref,fi(this,t)}const rr={get:function(){var t=nt,e=yn;function n(i,r){var s=!t.global&&(t!==nt||e!==yn);const o=s&&!jt();var a=new X((u,f)=>{sr(this,new hi(vn(i,t,s,o),vn(r,t,s,o),u,f,t))});return Dt&&_i(a,this),a}return n.prototype=Oe,n},set:function(t){Ut(this,"then",t&&t.prototype===Oe?rr:{get:function(){return t},set:rr.set})}};function hi(t,e,n,i,r){this.onFulfilled=typeof t=="function"?t:null,this.onRejected=typeof e=="function"?e:null,this.resolve=n,this.reject=i,this.psd=r}function fi(t,e){try{e(n=>{if(t._state===null){if(n===t)throw new TypeError("A promise cannot be resolved with itself.");var i=t._lib&&Be();n&&typeof n.then=="function"?fi(t,(r,s)=>{n instanceof X?n._then(r,s):n.then(r,s)}):(t._state=!0,t._value=n,di(t)),i&&Fe()}},ir.bind(null,t))}catch(n){ir(t,n)}}function ir(t,e){if(dn.push(e),t._state===null){var n=t._lib&&Be();e=nr(e),t._state=!1,t._value=e,Dt&&e!==null&&typeof e=="object"&&!e._promise&&function(i,r,s){try{i.apply(null,s)}catch(o){r&&r(o)}}(()=>{var i=Gn(e,"stack");e._promise=t,Ut(e,"stack",{get:()=>Qn?i&&(i.get?i.get.apply(e):i.value):t.stack})}),function(i){se.some(r=>r._value===i._value)||se.push(i)}(t),di(t),n&&Fe()}}function di(t){var e=t._listeners;t._listeners=[];for(var n=0,i=e.length;n<i;++n)sr(t,e[n]);var r=t._PSD;--r.ref||r.finalize(),oe===0&&(++oe,Pe(()=>{--oe==0&&or()},[]))}function sr(t,e){if(t._state!==null){var n=t._state?e.onFulfilled:e.onRejected;if(n===null)return(t._state?e.resolve:e.reject)(t._value);++e.psd.ref,++oe,Pe(Ms,[n,t,e])}else t._listeners.push(e)}function Ms(t,e,n){try{er=e;var i,r=e._value;e._state?i=t(r):(dn.length&&(dn=[]),i=t(r),dn.indexOf(r)===-1&&function(s){for(var o=se.length;o;)if(se[--o]._value===s._value)return void se.splice(o,1)}(e)),n.resolve(i)}catch(s){n.reject(s)}finally{er=null,--oe==0&&or(),--n.psd.ref||n.psd.finalize()}}function pi(t,e,n){if(e.length===n)return e;var i="";if(t._state===!1){var r,s,o=t._value;o!=null?(r=o.name||"Error",s=o.message||o,i=Hn(o,0)):(r=o,s=""),e.push(r+(s?": "+s:"")+i)}return Dt&&((i=Hn(t._stackHolder,2))&&e.indexOf(i)===-1&&e.push(i),t._prev&&pi(t._prev,e,n)),e}function _i(t,e){var n=e?e._numPrev+1:0;n<100&&(t._prev=e,t._numPrev=n)}function _n(){Be()&&Fe()}function Be(){var t=tr;return tr=!1,fn=!1,t}function Fe(){var t,e,n;do for(;De.length>0;)for(t=De,De=[],n=t.length,e=0;e<n;++e){var i=t[e];i[0].apply(null,i[1])}while(De.length>0);tr=!0,fn=!0}function or(){var t=se;se=[],t.forEach(i=>{i._PSD.onunhandled.call(null,i._value,i)});for(var e=pn.slice(0),n=e.length;n;)e[--n]()}function mn(t){return new X(Oe,!1,t)}function pt(t,e){var n=nt;return function(){var i=Be(),r=nt;try{return Jt(n,!0),t.apply(this,arguments)}catch(s){e&&e(s)}finally{Jt(r,!1),i&&Fe()}}}de(X.prototype,{then:rr,_then:function(t,e){sr(this,new hi(null,null,t,e,nt))},catch:function(t){if(arguments.length===1)return this.then(null,t);var e=arguments[0],n=arguments[1];return typeof e=="function"?this.then(null,i=>i instanceof e?n(i):mn(i)):this.then(null,i=>i&&i.name===e?n(i):mn(i))},finally:function(t){return this.then(e=>(t(),e),e=>(t(),mn(e)))},stack:{get:function(){if(this._stack)return this._stack;try{Qn=!0;var t=pi(this,[],20).join(`
From previous: `);return this._state!==null&&(this._stack=t),t}finally{Qn=!1}}},timeout:function(t,e){return t<1/0?new X((n,i)=>{var r=setTimeout(()=>i(new st.Timeout(e)),t);this.then(n,i).finally(clearTimeout.bind(null,r))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&Ut(X.prototype,Symbol.toStringTag,"Dexie.Promise"),ge.env=mi(),de(X,{all:function(){var t=Gt.apply(null,arguments).map(bn);return new X(function(e,n){t.length===0&&e([]);var i=t.length;t.forEach((r,s)=>X.resolve(r).then(o=>{t[s]=o,--i||e(t)},n))})},resolve:t=>{if(t instanceof X)return t;if(t&&typeof t.then=="function")return new X((n,i)=>{t.then(n,i)});var e=new X(Oe,!0,t);return _i(e,er),e},reject:mn,race:function(){var t=Gt.apply(null,arguments).map(bn);return new X((e,n)=>{t.map(i=>X.resolve(i).then(e,n))})},PSD:{get:()=>nt,set:t=>nt=t},totalEchoes:{get:()=>yn},newPSD:Yt,usePSD:be,scheduler:{get:()=>Pe,set:t=>{Pe=t}},rejectionMapper:{get:()=>nr,set:t=>{nr=t}},follow:(t,e)=>new X((n,i)=>Yt((r,s)=>{var o=nt;o.unhandleds=[],o.onunhandled=s,o.finalize=ie(function(){(function(a){function u(){a(),pn.splice(pn.indexOf(u),1)}pn.push(u),++oe,Pe(()=>{--oe==0&&or()},[])})(()=>{this.unhandleds.length===0?r():s(this.unhandleds[0])})},o.finalize),t()},e,n,i))}),hn&&(hn.allSettled&&Ut(X,"allSettled",function(){const t=Gt.apply(null,arguments).map(bn);return new X(e=>{t.length===0&&e([]);let n=t.length;const i=new Array(n);t.forEach((r,s)=>X.resolve(r).then(o=>i[s]={status:"fulfilled",value:o},o=>i[s]={status:"rejected",reason:o}).then(()=>--n||e(i)))})}),hn.any&&typeof AggregateError<"u"&&Ut(X,"any",function(){const t=Gt.apply(null,arguments).map(bn);return new X((e,n)=>{t.length===0&&n(new AggregateError([]));let i=t.length;const r=new Array(i);t.forEach((s,o)=>X.resolve(s).then(a=>e(a),a=>{r[o]=a,--i||n(new AggregateError(r))}))})}));const Tt={awaits:0,echoes:0,id:0};var Us=0,gn=[],ar=0,yn=0,zs=0;function Yt(t,e,n,i){var r=nt,s=Object.create(r);s.parent=r,s.ref=0,s.global=!1,s.id=++zs;var o=ge.env;s.env=Xn?{Promise:X,PromiseProp:{value:X,configurable:!0,writable:!0},all:X.all,race:X.race,allSettled:X.allSettled,any:X.any,resolve:X.resolve,reject:X.reject,nthen:yi(o.nthen,s),gthen:yi(o.gthen,s)}:{},e&&Rt(s,e),++r.ref,s.finalize=function(){--this.parent.ref||this.parent.finalize()};var a=be(s,t,n,i);return s.ref===0&&s.finalize(),a}function ye(){return Tt.id||(Tt.id=++Us),++Tt.awaits,Tt.echoes+=li,Tt.id}function jt(){return!!Tt.awaits&&(--Tt.awaits==0&&(Tt.id=0),Tt.echoes=Tt.awaits*li,!0)}function bn(t){return Tt.echoes&&t&&t.constructor===hn?(ye(),t.then(e=>(jt(),e),e=>(jt(),vt(e)))):t}function Gs(t){++yn,Tt.echoes&&--Tt.echoes!=0||(Tt.echoes=Tt.id=0),gn.push(nt),Jt(t,!0)}function js(){var t=gn[gn.length-1];gn.pop(),Jt(t,!1)}function Jt(t,e){var n=nt;if((e?!Tt.echoes||ar++&&t===nt:!ar||--ar&&t===nt)||gi(e?Gs.bind(null,t):js),t!==nt&&(nt=t,n===ge&&(ge.env=mi()),Xn)){var i=ge.env.Promise,r=t.env;cn.then=r.nthen,i.prototype.then=r.gthen,(n.global||t.global)&&(Object.defineProperty(dt,"Promise",r.PromiseProp),i.all=r.all,i.race=r.race,i.resolve=r.resolve,i.reject=r.reject,r.allSettled&&(i.allSettled=r.allSettled),r.any&&(i.any=r.any))}}function mi(){var t=dt.Promise;return Xn?{Promise:t,PromiseProp:Object.getOwnPropertyDescriptor(dt,"Promise"),all:t.all,race:t.race,allSettled:t.allSettled,any:t.any,resolve:t.resolve,reject:t.reject,nthen:cn.then,gthen:t.prototype.then}:{}}function be(t,e,n,i,r){var s=nt;try{return Jt(t,!0),e(n,i,r)}finally{Jt(s,!1)}}function gi(t){ci.call(Yn,t)}function vn(t,e,n,i){return typeof t!="function"?t:function(){var r=nt;n&&ye(),Jt(e,!0);try{return t.apply(this,arguments)}finally{Jt(r,!1),i&&gi(jt)}}}function yi(t,e){return function(n,i){return t.call(this,vn(n,e),vn(i,e))}}(""+ci).indexOf("[native code]")===-1&&(ye=jt=ct);const bi="unhandledrejection";function vi(t,e){var n;try{n=e.onuncatched(t)}catch{}if(n!==!1)try{var i,r={promise:e,reason:t};if(dt.document&&document.createEvent?((i=document.createEvent("Event")).initEvent(bi,!0,!0),Rt(i,r)):dt.CustomEvent&&Rt(i=new CustomEvent(bi,{detail:r}),r),i&&dt.dispatchEvent&&(dispatchEvent(i),!dt.PromiseRejectionEvent&&dt.onunhandledrejection))try{dt.onunhandledrejection(i)}catch{}Dt&&i&&!i.defaultPrevented&&console.warn(`Unhandled rejection: ${t.stack||t}`)}catch{}}var vt=X.reject;function ur(t,e,n,i){if(t.idbdb&&(t._state.openComplete||nt.letThrough||t._vip)){var r=t._createTransaction(e,n,t._dbSchema);try{r.create(),t._state.PR1398_maxLoop=3}catch(s){return s.name===Vn.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>ur(t,e,n,i))):vt(s)}return r._promise(e,(s,o)=>Yt(()=>(nt.trans=r,i(s,o,r)))).then(s=>r._completion.then(()=>s))}if(t._state.openComplete)return vt(new st.DatabaseClosed(t._state.dbOpenError));if(!t._state.isBeingOpened){if(!t._options.autoOpen)return vt(new st.DatabaseClosed);t.open().catch(ct)}return t._state.dbReadyPromise.then(()=>ur(t,e,n,i))}const Ei="3.2.5",ae="",lr=-1/0,Kt="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Ai="String expected.",Me=[],En=typeof navigator<"u"&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),Ks=En,Zs=En,wi=t=>!/(dexie\.js|dexie\.min\.js)/.test(t),An="__dbnames",cr="readonly",hr="readwrite";function ue(t,e){return t?e?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:t:e}const Ti={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function wn(t){return typeof t!="string"||/\./.test(t)?e=>e:e=>(e[t]===void 0&&t in e&&delete(e=ke(e))[t],e)}class Ws{_trans(e,n,i){const r=this._tx||nt.trans,s=this.name;function o(u,f,h){if(!h.schema[s])throw new st.NotFound("Table "+s+" not part of transaction");return n(h.idbtrans,h)}const a=Be();try{return r&&r.db===this.db?r===nt.trans?r._promise(e,o,i):Yt(()=>r._promise(e,o,i),{trans:r,transless:nt.transless||nt}):ur(this.db,e,[this.name],o)}finally{a&&Fe()}}get(e,n){return e&&e.constructor===Object?this.where(e).first(n):this._trans("readonly",i=>this.core.get({trans:i,key:e}).then(r=>this.hook.reading.fire(r))).then(n)}where(e){if(typeof e=="string")return new this.db.WhereClause(this,e);if(wt(e))return new this.db.WhereClause(this,`[${e.join("+")}]`);const n=bt(e);if(n.length===1)return this.where(n[0]).equals(e[n[0]]);const i=this.schema.indexes.concat(this.schema.primKey).filter(f=>{if(f.compound&&n.every(h=>f.keyPath.indexOf(h)>=0)){for(let h=0;h<n.length;++h)if(n.indexOf(f.keyPath[h])===-1)return!1;return!0}return!1}).sort((f,h)=>f.keyPath.length-h.keyPath.length)[0];if(i&&this.db._maxKey!==ae){const f=i.keyPath.slice(0,n.length);return this.where(f).equals(f.map(h=>e[h]))}!i&&Dt&&console.warn(`The query ${JSON.stringify(e)} on ${this.name} would benefit of a compound index [${n.join("+")}]`);const{idxByName:r}=this.schema,s=this.db._deps.indexedDB;function o(f,h){try{return s.cmp(f,h)===0}catch{return!1}}const[a,u]=n.reduce(([f,h],_)=>{const d=r[_],l=e[_];return[f||d,f||!d?ue(h,d&&d.multi?g=>{const c=zt(g,_);return wt(c)&&c.some(v=>o(l,v))}:g=>o(l,zt(g,_))):h]},[null,null]);return a?this.where(a.name).equals(e[a.keyPath]).filter(u):i?this.filter(u):this.where(n).equals("")}filter(e){return this.toCollection().and(e)}count(e){return this.toCollection().count(e)}offset(e){return this.toCollection().offset(e)}limit(e){return this.toCollection().limit(e)}each(e){return this.toCollection().each(e)}toArray(e){return this.toCollection().toArray(e)}toCollection(){return new this.db.Collection(new this.db.WhereClause(this))}orderBy(e){return new this.db.Collection(new this.db.WhereClause(this,wt(e)?`[${e.join("+")}]`:e))}reverse(){return this.toCollection().reverse()}mapToClass(e){this.schema.mappedClass=e;const n=i=>{if(!i)return i;const r=Object.create(e.prototype);for(var s in i)if(xt(i,s))try{r[s]=i[s]}catch{}return r};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=n,this.hook("reading",n),e}defineClass(){return this.mapToClass(function(e){Rt(this,e)})}add(e,n){const{auto:i,keyPath:r}=this.schema.primKey;let s=e;return r&&i&&(s=wn(r)(e)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"add",keys:n!=null?[n]:null,values:[s]})).then(o=>o.numFailures?X.reject(o.failures[0]):o.lastResult).then(o=>{if(r)try{Ct(e,r,o)}catch{}return o})}update(e,n){if(typeof e!="object"||wt(e))return this.where(":id").equals(e).modify(n);{const i=zt(e,this.schema.primKey.keyPath);if(i===void 0)return vt(new st.InvalidArgument("Given object does not contain its primary key"));try{typeof n!="function"?bt(n).forEach(r=>{Ct(e,r,n[r])}):n(e,{value:e,primKey:i})}catch{}return this.where(":id").equals(i).modify(n)}}put(e,n){const{auto:i,keyPath:r}=this.schema.primKey;let s=e;return r&&i&&(s=wn(r)(e)),this._trans("readwrite",o=>this.core.mutate({trans:o,type:"put",values:[s],keys:n!=null?[n]:null})).then(o=>o.numFailures?X.reject(o.failures[0]):o.lastResult).then(o=>{if(r)try{Ct(e,r,o)}catch{}return o})}delete(e){return this._trans("readwrite",n=>this.core.mutate({trans:n,type:"delete",keys:[e]})).then(n=>n.numFailures?X.reject(n.failures[0]):void 0)}clear(){return this._trans("readwrite",e=>this.core.mutate({trans:e,type:"deleteRange",range:Ti})).then(e=>e.numFailures?X.reject(e.failures[0]):void 0)}bulkGet(e){return this._trans("readonly",n=>this.core.getMany({keys:e,trans:n}).then(i=>i.map(r=>this.hook.reading.fire(r))))}bulkAdd(e,n,i){const r=Array.isArray(n)?n:void 0,s=(i=i||(r?void 0:n))?i.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:u}=this.schema.primKey;if(u&&r)throw new st.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(r&&r.length!==e.length)throw new st.InvalidArgument("Arguments objects and keys must have the same length");const f=e.length;let h=u&&a?e.map(wn(u)):e;return this.core.mutate({trans:o,type:"add",keys:r,values:h,wantResults:s}).then(({numFailures:_,results:d,lastResult:l,failures:g})=>{if(_===0)return s?d:l;throw new Ne(`${this.name}.bulkAdd(): ${_} of ${f} operations failed`,g)})})}bulkPut(e,n,i){const r=Array.isArray(n)?n:void 0,s=(i=i||(r?void 0:n))?i.allKeys:void 0;return this._trans("readwrite",o=>{const{auto:a,keyPath:u}=this.schema.primKey;if(u&&r)throw new st.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(r&&r.length!==e.length)throw new st.InvalidArgument("Arguments objects and keys must have the same length");const f=e.length;let h=u&&a?e.map(wn(u)):e;return this.core.mutate({trans:o,type:"put",keys:r,values:h,wantResults:s}).then(({numFailures:_,results:d,lastResult:l,failures:g})=>{if(_===0)return s?d:l;throw new Ne(`${this.name}.bulkPut(): ${_} of ${f} operations failed`,g)})})}bulkDelete(e){const n=e.length;return this._trans("readwrite",i=>this.core.mutate({trans:i,type:"delete",keys:e})).then(({numFailures:i,lastResult:r,failures:s})=>{if(i===0)return r;throw new Ne(`${this.name}.bulkDelete(): ${i} of ${n} operations failed`,s)})}}function Ue(t){var e={},n=function(o,a){if(a){for(var u=arguments.length,f=new Array(u-1);--u;)f[u-1]=arguments[u];return e[o].subscribe.apply(null,f),t}if(typeof o=="string")return e[o]};n.addEventType=s;for(var i=1,r=arguments.length;i<r;++i)s(arguments[i]);return n;function s(o,a,u){if(typeof o!="object"){var f;a||(a=Bs),u||(u=ct);var h={subscribers:[],fire:u,subscribe:function(_){h.subscribers.indexOf(_)===-1&&(h.subscribers.push(_),h.fire=a(h.fire,_))},unsubscribe:function(_){h.subscribers=h.subscribers.filter(function(d){return d!==_}),h.fire=h.subscribers.reduce(a,u)}};return e[o]=n[o]=h,h}bt(f=o).forEach(function(_){var d=f[_];if(wt(d))s(_,f[_][0],f[_][1]);else{if(d!=="asap")throw new st.InvalidArgument("Invalid event config");var l=s(_,Ce,function(){for(var g=arguments.length,c=new Array(g);g--;)c[g]=arguments[g];l.subscribers.forEach(function(v){Qr(function(){v.apply(null,c)})})})}})}}function ze(t,e){return pe(e).from({prototype:t}),e}function ve(t,e){return!(t.filter||t.algorithm||t.or)&&(e?t.justLimit:!t.replayFilter)}function fr(t,e){t.filter=ue(t.filter,e)}function dr(t,e,n){var i=t.replayFilter;t.replayFilter=i?()=>ue(i(),e()):e,t.justLimit=n&&!i}function Tn(t,e){if(t.isPrimKey)return e.primaryKey;const n=e.getIndexByKeyPath(t.index);if(!n)throw new st.Schema("KeyPath "+t.index+" on object store "+e.name+" is not indexed");return n}function Ii(t,e,n){const i=Tn(t,e.schema);return e.openCursor({trans:n,values:!t.keysOnly,reverse:t.dir==="prev",unique:!!t.unique,query:{index:i,range:t.range}})}function In(t,e,n,i){const r=t.replayFilter?ue(t.filter,t.replayFilter()):t.filter;if(t.or){const s={},o=(a,u,f)=>{if(!r||r(u,f,d=>u.stop(d),d=>u.fail(d))){var h=u.primaryKey,_=""+h;_==="[object ArrayBuffer]"&&(_=""+new Uint8Array(h)),xt(s,_)||(s[_]=!0,e(a,u,f))}};return Promise.all([t.or._iterate(o,n),Ri(Ii(t,i,n),t.algorithm,o,!t.keysOnly&&t.valueMapper)])}return Ri(Ii(t,i,n),ue(t.algorithm,r),e,!t.keysOnly&&t.valueMapper)}function Ri(t,e,n,i){var r=pt(i?(s,o,a)=>n(i(s),o,a):n);return t.then(s=>{if(s)return s.start(()=>{var o=()=>s.continue();e&&!e(s,a=>o=a,a=>{s.stop(a),o=ct},a=>{s.fail(a),o=ct})||r(s.value,s,a=>o=a),o()})})}function Lt(t,e){try{const n=Li(t),i=Li(e);if(n!==i)return n==="Array"?1:i==="Array"?-1:n==="binary"?1:i==="binary"?-1:n==="string"?1:i==="string"?-1:n==="Date"?1:i!=="Date"?NaN:-1;switch(n){case"number":case"Date":case"string":return t>e?1:t<e?-1:0;case"binary":return function(r,s){const o=r.length,a=s.length,u=o<a?o:a;for(let f=0;f<u;++f)if(r[f]!==s[f])return r[f]<s[f]?-1:1;return o===a?0:o<a?-1:1}(Si(t),Si(e));case"Array":return function(r,s){const o=r.length,a=s.length,u=o<a?o:a;for(let f=0;f<u;++f){const h=Lt(r[f],s[f]);if(h!==0)return h}return o===a?0:o<a?-1:1}(t,e)}}catch{}return NaN}function Li(t){const e=typeof t;if(e!=="object")return e;if(ArrayBuffer.isView(t))return"binary";const n=Kn(t);return n==="ArrayBuffer"?"binary":n}function Si(t){return t instanceof Uint8Array?t:ArrayBuffer.isView(t)?new Uint8Array(t.buffer,t.byteOffset,t.byteLength):new Uint8Array(t)}class Hs{_read(e,n){var i=this._ctx;return i.error?i.table._trans(null,vt.bind(null,i.error)):i.table._trans("readonly",e).then(n)}_write(e){var n=this._ctx;return n.error?n.table._trans(null,vt.bind(null,n.error)):n.table._trans("readwrite",e,"locked")}_addAlgorithm(e){var n=this._ctx;n.algorithm=ue(n.algorithm,e)}_iterate(e,n){return In(this._ctx,e,n,this._ctx.table.core)}clone(e){var n=Object.create(this.constructor.prototype),i=Object.create(this._ctx);return e&&Rt(i,e),n._ctx=i,n}raw(){return this._ctx.valueMapper=null,this}each(e){var n=this._ctx;return this._read(i=>In(n,e,i,n.table.core))}count(e){return this._read(n=>{const i=this._ctx,r=i.table.core;if(ve(i,!0))return r.count({trans:n,query:{index:Tn(i,r.schema),range:i.range}}).then(o=>Math.min(o,i.limit));var s=0;return In(i,()=>(++s,!1),n,r).then(()=>s)}).then(e)}sortBy(e,n){const i=e.split(".").reverse(),r=i[0],s=i.length-1;function o(f,h){return h?o(f[i[h]],h-1):f[r]}var a=this._ctx.dir==="next"?1:-1;function u(f,h){var _=o(f,s),d=o(h,s);return _<d?-a:_>d?a:0}return this.toArray(function(f){return f.sort(u)}).then(n)}toArray(e){return this._read(n=>{var i=this._ctx;if(i.dir==="next"&&ve(i,!0)&&i.limit>0){const{valueMapper:r}=i,s=Tn(i,i.table.core.schema);return i.table.core.query({trans:n,limit:i.limit,values:!0,query:{index:s,range:i.range}}).then(({result:o})=>r?o.map(r):o)}{const r=[];return In(i,s=>r.push(s),n,i.table.core).then(()=>r)}},e)}offset(e){var n=this._ctx;return e<=0||(n.offset+=e,ve(n)?dr(n,()=>{var i=e;return(r,s)=>i===0||(i===1?(--i,!1):(s(()=>{r.advance(i),i=0}),!1))}):dr(n,()=>{var i=e;return()=>--i<0})),this}limit(e){return this._ctx.limit=Math.min(this._ctx.limit,e),dr(this._ctx,()=>{var n=e;return function(i,r,s){return--n<=0&&r(s),n>=0}},!0),this}until(e,n){return fr(this._ctx,function(i,r,s){return!e(i.value)||(r(s),n)}),this}first(e){return this.limit(1).toArray(function(n){return n[0]}).then(e)}last(e){return this.reverse().first(e)}filter(e){var n,i;return fr(this._ctx,function(r){return e(r.value)}),n=this._ctx,i=e,n.isMatch=ue(n.isMatch,i),this}and(e){return this.filter(e)}or(e){return new this.db.WhereClause(this._ctx.table,e,this)}reverse(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this}desc(){return this.reverse()}eachKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(i,r){e(r.key,r)})}eachUniqueKey(e){return this._ctx.unique="unique",this.eachKey(e)}eachPrimaryKey(e){var n=this._ctx;return n.keysOnly=!n.isMatch,this.each(function(i,r){e(r.primaryKey,r)})}keys(e){var n=this._ctx;n.keysOnly=!n.isMatch;var i=[];return this.each(function(r,s){i.push(s.key)}).then(function(){return i}).then(e)}primaryKeys(e){var n=this._ctx;if(n.dir==="next"&&ve(n,!0)&&n.limit>0)return this._read(r=>{var s=Tn(n,n.table.core.schema);return n.table.core.query({trans:r,values:!1,limit:n.limit,query:{index:s,range:n.range}})}).then(({result:r})=>r).then(e);n.keysOnly=!n.isMatch;var i=[];return this.each(function(r,s){i.push(s.primaryKey)}).then(function(){return i}).then(e)}uniqueKeys(e){return this._ctx.unique="unique",this.keys(e)}firstKey(e){return this.limit(1).keys(function(n){return n[0]}).then(e)}lastKey(e){return this.reverse().firstKey(e)}distinct(){var e=this._ctx,n=e.index&&e.table.schema.idxByName[e.index];if(!n||!n.multi)return this;var i={};return fr(this._ctx,function(r){var s=r.primaryKey.toString(),o=xt(i,s);return i[s]=!0,!o}),this}modify(e){var n=this._ctx;return this._write(i=>{var r;if(typeof e=="function")r=e;else{var s=bt(e),o=s.length;r=function(c){for(var v=!1,m=0;m<o;++m){var b=s[m],E=e[b];zt(c,b)!==E&&(Ct(c,b,E),v=!0)}return v}}const a=n.table.core,{outbound:u,extractKey:f}=a.schema.primaryKey,h=this.db._options.modifyChunkSize||200,_=[];let d=0;const l=[],g=(c,v)=>{const{failures:m,numFailures:b}=v;d+=c-b;for(let E of bt(m))_.push(m[E])};return this.clone().primaryKeys().then(c=>{const v=m=>{const b=Math.min(h,c.length-m);return a.getMany({trans:i,keys:c.slice(m,m+b),cache:"immutable"}).then(E=>{const A=[],T=[],x=u?[]:null,S=[];for(let L=0;L<b;++L){const F=E[L],W={value:ke(F),primKey:c[m+L]};r.call(W,W.value,W)!==!1&&(W.value==null?S.push(c[m+L]):u||Lt(f(F),f(W.value))===0?(T.push(W.value),u&&x.push(c[m+L])):(S.push(c[m+L]),A.push(W.value)))}const N=ve(n)&&n.limit===1/0&&(typeof e!="function"||e===pr)&&{index:n.index,range:n.range};return Promise.resolve(A.length>0&&a.mutate({trans:i,type:"add",values:A}).then(L=>{for(let F in L.failures)S.splice(parseInt(F),1);g(A.length,L)})).then(()=>(T.length>0||N&&typeof e=="object")&&a.mutate({trans:i,type:"put",keys:x,values:T,criteria:N,changeSpec:typeof e!="function"&&e}).then(L=>g(T.length,L))).then(()=>(S.length>0||N&&e===pr)&&a.mutate({trans:i,type:"delete",keys:S,criteria:N}).then(L=>g(S.length,L))).then(()=>c.length>m+b&&v(m+h))})};return v(0).then(()=>{if(_.length>0)throw new un("Error modifying one or more objects",_,d,l);return c.length})})})}delete(){var e=this._ctx,n=e.range;return ve(e)&&(e.isPrimKey&&!Zs||n.type===3)?this._write(i=>{const{primaryKey:r}=e.table.core.schema,s=n;return e.table.core.count({trans:i,query:{index:r,range:s}}).then(o=>e.table.core.mutate({trans:i,type:"deleteRange",range:s}).then(({failures:a,lastResult:u,results:f,numFailures:h})=>{if(h)throw new un("Could not delete some values",Object.keys(a).map(_=>a[_]),o-h);return o-h}))}):this.modify(pr)}}const pr=(t,e)=>e.value=null;function $s(t,e){return t<e?-1:t===e?0:1}function Vs(t,e){return t>e?-1:t===e?0:1}function kt(t,e,n){var i=t instanceof ki?new t.Collection(t):t;return i._ctx.error=n?new n(e):new TypeError(e),i}function Ee(t){return new t.Collection(t,()=>xi("")).limit(0)}function qs(t,e,n,i,r,s){for(var o=Math.min(t.length,i.length),a=-1,u=0;u<o;++u){var f=e[u];if(f!==i[u])return r(t[u],n[u])<0?t.substr(0,u)+n[u]+n.substr(u+1):r(t[u],i[u])<0?t.substr(0,u)+i[u]+n.substr(u+1):a>=0?t.substr(0,a)+e[a]+n.substr(a+1):null;r(t[u],f)<0&&(a=u)}return o<i.length&&s==="next"?t+n.substr(t.length):o<t.length&&s==="prev"?t.substr(0,n.length):a<0?null:t.substr(0,a)+i[a]+n.substr(a+1)}function Rn(t,e,n,i){var r,s,o,a,u,f,h,_=n.length;if(!n.every(c=>typeof c=="string"))return kt(t,Ai);function d(c){r=function(m){return m==="next"?b=>b.toUpperCase():b=>b.toLowerCase()}(c),s=function(m){return m==="next"?b=>b.toLowerCase():b=>b.toUpperCase()}(c),o=c==="next"?$s:Vs;var v=n.map(function(m){return{lower:s(m),upper:r(m)}}).sort(function(m,b){return o(m.lower,b.lower)});a=v.map(function(m){return m.upper}),u=v.map(function(m){return m.lower}),f=c,h=c==="next"?"":i}d("next");var l=new t.Collection(t,()=>Xt(a[0],u[_-1]+i));l._ondirectionchange=function(c){d(c)};var g=0;return l._addAlgorithm(function(c,v,m){var b=c.key;if(typeof b!="string")return!1;var E=s(b);if(e(E,u,g))return!0;for(var A=null,T=g;T<_;++T){var x=qs(b,E,a[T],u[T],o,f);x===null&&A===null?g=T+1:(A===null||o(A,x)>0)&&(A=x)}return v(A!==null?function(){c.continue(A+h)}:m),!1}),l}function Xt(t,e,n,i){return{type:2,lower:t,upper:e,lowerOpen:n,upperOpen:i}}function xi(t){return{type:1,lower:t,upper:t}}class ki{get Collection(){return this._ctx.table.db.Collection}between(e,n,i,r){i=i!==!1,r=r===!0;try{return this._cmp(e,n)>0||this._cmp(e,n)===0&&(i||r)&&(!i||!r)?Ee(this):new this.Collection(this,()=>Xt(e,n,!i,!r))}catch{return kt(this,Kt)}}equals(e){return e==null?kt(this,Kt):new this.Collection(this,()=>xi(e))}above(e){return e==null?kt(this,Kt):new this.Collection(this,()=>Xt(e,void 0,!0))}aboveOrEqual(e){return e==null?kt(this,Kt):new this.Collection(this,()=>Xt(e,void 0,!1))}below(e){return e==null?kt(this,Kt):new this.Collection(this,()=>Xt(void 0,e,!1,!0))}belowOrEqual(e){return e==null?kt(this,Kt):new this.Collection(this,()=>Xt(void 0,e))}startsWith(e){return typeof e!="string"?kt(this,Ai):this.between(e,e+ae,!0,!0)}startsWithIgnoreCase(e){return e===""?this.startsWith(e):Rn(this,(n,i)=>n.indexOf(i[0])===0,[e],ae)}equalsIgnoreCase(e){return Rn(this,(n,i)=>n===i[0],[e],"")}anyOfIgnoreCase(){var e=Gt.apply(_e,arguments);return e.length===0?Ee(this):Rn(this,(n,i)=>i.indexOf(n)!==-1,e,"")}startsWithAnyOfIgnoreCase(){var e=Gt.apply(_e,arguments);return e.length===0?Ee(this):Rn(this,(n,i)=>i.some(r=>n.indexOf(r)===0),e,ae)}anyOf(){const e=Gt.apply(_e,arguments);let n=this._cmp;try{e.sort(n)}catch{return kt(this,Kt)}if(e.length===0)return Ee(this);const i=new this.Collection(this,()=>Xt(e[0],e[e.length-1]));i._ondirectionchange=s=>{n=s==="next"?this._ascending:this._descending,e.sort(n)};let r=0;return i._addAlgorithm((s,o,a)=>{const u=s.key;for(;n(u,e[r])>0;)if(++r,r===e.length)return o(a),!1;return n(u,e[r])===0||(o(()=>{s.continue(e[r])}),!1)}),i}notEqual(e){return this.inAnyRange([[lr,e],[e,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})}noneOf(){const e=Gt.apply(_e,arguments);if(e.length===0)return new this.Collection(this);try{e.sort(this._ascending)}catch{return kt(this,Kt)}const n=e.reduce((i,r)=>i?i.concat([[i[i.length-1][1],r]]):[[lr,r]],null);return n.push([e[e.length-1],this.db._maxKey]),this.inAnyRange(n,{includeLowers:!1,includeUppers:!1})}inAnyRange(e,n){const i=this._cmp,r=this._ascending,s=this._descending,o=this._min,a=this._max;if(e.length===0)return Ee(this);if(!e.every(b=>b[0]!==void 0&&b[1]!==void 0&&r(b[0],b[1])<=0))return kt(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",st.InvalidArgument);const u=!n||n.includeLowers!==!1,f=n&&n.includeUppers===!0;let h,_=r;function d(b,E){return _(b[0],E[0])}try{h=e.reduce(function(b,E){let A=0,T=b.length;for(;A<T;++A){const x=b[A];if(i(E[0],x[1])<0&&i(E[1],x[0])>0){x[0]=o(x[0],E[0]),x[1]=a(x[1],E[1]);break}}return A===T&&b.push(E),b},[]),h.sort(d)}catch{return kt(this,Kt)}let l=0;const g=f?b=>r(b,h[l][1])>0:b=>r(b,h[l][1])>=0,c=u?b=>s(b,h[l][0])>0:b=>s(b,h[l][0])>=0;let v=g;const m=new this.Collection(this,()=>Xt(h[0][0],h[h.length-1][1],!u,!f));return m._ondirectionchange=b=>{b==="next"?(v=g,_=r):(v=c,_=s),h.sort(d)},m._addAlgorithm((b,E,A)=>{for(var T=b.key;v(T);)if(++l,l===h.length)return E(A),!1;return!!function(x){return!g(x)&&!c(x)}(T)||(this._cmp(T,h[l][1])===0||this._cmp(T,h[l][0])===0||E(()=>{_===r?b.continue(h[l][0]):b.continue(h[l][1])}),!1)}),m}startsWithAnyOf(){const e=Gt.apply(_e,arguments);return e.every(n=>typeof n=="string")?e.length===0?Ee(this):this.inAnyRange(e.map(n=>[n,n+ae])):kt(this,"startsWithAnyOf() only works with strings")}}function Bt(t){return pt(function(e){return Ge(e),t(e.target.error),!1})}function Ge(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault()}const je="storagemutated",Qt="x-storagemutated-1",te=Ue(null,je);class Ys{_lock(){return xe(!nt.global),++this._reculock,this._reculock!==1||nt.global||(nt.lockOwnerFor=this),this}_unlock(){if(xe(!nt.global),--this._reculock==0)for(nt.global||(nt.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var e=this._blockedFuncs.shift();try{be(e[1],e[0])}catch{}}return this}_locked(){return this._reculock&&nt.lockOwnerFor!==this}create(e){if(!this.mode)return this;const n=this.db.idbdb,i=this.db._state.dbOpenError;if(xe(!this.idbtrans),!e&&!n)switch(i&&i.name){case"DatabaseClosedError":throw new st.DatabaseClosed(i);case"MissingAPIError":throw new st.MissingAPI(i.message,i);default:throw new st.OpenFailed(i)}if(!this.active)throw new st.TransactionInactive;return xe(this._completion._state===null),(e=this.idbtrans=e||(this.db.core?this.db.core.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}):n.transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability}))).onerror=pt(r=>{Ge(r),this._reject(e.error)}),e.onabort=pt(r=>{Ge(r),this.active&&this._reject(new st.Abort(e.error)),this.active=!1,this.on("abort").fire(r)}),e.oncomplete=pt(()=>{this.active=!1,this._resolve(),"mutatedParts"in e&&te.storagemutated.fire(e.mutatedParts)}),this}_promise(e,n,i){if(e==="readwrite"&&this.mode!=="readwrite")return vt(new st.ReadOnly("Transaction is readonly"));if(!this.active)return vt(new st.TransactionInactive);if(this._locked())return new X((s,o)=>{this._blockedFuncs.push([()=>{this._promise(e,n,i).then(s,o)},nt])});if(i)return Yt(()=>{var s=new X((o,a)=>{this._lock();const u=n(o,a,this);u&&u.then&&u.then(o,a)});return s.finally(()=>this._unlock()),s._lib=!0,s});var r=new X((s,o)=>{var a=n(s,o,this);a&&a.then&&a.then(s,o)});return r._lib=!0,r}_root(){return this.parent?this.parent._root():this}waitFor(e){var n=this._root();const i=X.resolve(e);if(n._waitingFor)n._waitingFor=n._waitingFor.then(()=>i);else{n._waitingFor=i,n._waitingQueue=[];var r=n.idbtrans.objectStore(n.storeNames[0]);(function o(){for(++n._spinCount;n._waitingQueue.length;)n._waitingQueue.shift()();n._waitingFor&&(r.get(-1/0).onsuccess=o)})()}var s=n._waitingFor;return new X((o,a)=>{i.then(u=>n._waitingQueue.push(pt(o.bind(null,u))),u=>n._waitingQueue.push(pt(a.bind(null,u)))).finally(()=>{n._waitingFor===s&&(n._waitingFor=null)})})}abort(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new st.Abort))}table(e){const n=this._memoizedTables||(this._memoizedTables={});if(xt(n,e))return n[e];const i=this.schema[e];if(!i)throw new st.NotFound("Table "+e+" not part of transaction");const r=new this.db.Table(e,i,this);return r.core=this.db.core.table(e),n[e]=r,r}}function _r(t,e,n,i,r,s,o){return{name:t,keyPath:e,unique:n,multi:i,auto:r,compound:s,src:(n&&!o?"&":"")+(i?"*":"")+(r?"++":"")+Ni(e)}}function Ni(t){return typeof t=="string"?t:t?"["+[].join.call(t,"+")+"]":""}function Ci(t,e,n){return{name:t,primKey:e,indexes:n,mappedClass:null,idxByName:ti(n,i=>[i.name,i])}}let Ke=t=>{try{return t.only([[]]),Ke=()=>[[]],[[]]}catch{return Ke=()=>ae,ae}};function mr(t){return t==null?()=>{}:typeof t=="string"?function(e){return e.split(".").length===1?i=>i[e]:i=>zt(i,e)}(t):e=>zt(e,t)}function Oi(t){return[].slice.call(t)}let Js=0;function Ze(t){return t==null?":id":typeof t=="string"?t:`[${t.join("+")}]`}function Xs(t,e,n){function i(u){if(u.type===3)return null;if(u.type===4)throw new Error("Cannot convert never type to IDBKeyRange");const{lower:f,upper:h,lowerOpen:_,upperOpen:d}=u;return f===void 0?h===void 0?null:e.upperBound(h,!!d):h===void 0?e.lowerBound(f,!!_):e.bound(f,h,!!_,!!d)}const{schema:r,hasGetAll:s}=function(u,f){const h=Oi(u.objectStoreNames);return{schema:{name:u.name,tables:h.map(_=>f.objectStore(_)).map(_=>{const{keyPath:d,autoIncrement:l}=_,g=wt(d),c=d==null,v={},m={name:_.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:c,compound:g,keyPath:d,autoIncrement:l,unique:!0,extractKey:mr(d)},indexes:Oi(_.indexNames).map(b=>_.index(b)).map(b=>{const{name:E,unique:A,multiEntry:T,keyPath:x}=b,S={name:E,compound:wt(x),keyPath:x,unique:A,multiEntry:T,extractKey:mr(x)};return v[Ze(x)]=S,S}),getIndexByKeyPath:b=>v[Ze(b)]};return v[":id"]=m.primaryKey,d!=null&&(v[Ze(d)]=m.primaryKey),m})},hasGetAll:h.length>0&&"getAll"in f.objectStore(h[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}}(t,n),o=r.tables.map(u=>function(f){const h=f.name;return{name:h,schema:f,mutate:function({trans:_,type:d,keys:l,values:g,range:c}){return new Promise((v,m)=>{v=pt(v);const b=_.objectStore(h),E=b.keyPath==null,A=d==="put"||d==="add";if(!A&&d!=="delete"&&d!=="deleteRange")throw new Error("Invalid operation type: "+d);const{length:T}=l||g||{length:1};if(l&&g&&l.length!==g.length)throw new Error("Given keys array must have same length as given values array.");if(T===0)return v({numFailures:0,failures:{},results:[],lastResult:void 0});let x;const S=[],N=[];let L=0;const F=R=>{++L,Ge(R)};if(d==="deleteRange"){if(c.type===4)return v({numFailures:L,failures:N,results:[],lastResult:void 0});c.type===3?S.push(x=b.clear()):S.push(x=b.delete(i(c)))}else{const[R,D]=A?E?[g,l]:[g,null]:[l,null];if(A)for(let y=0;y<T;++y)S.push(x=D&&D[y]!==void 0?b[d](R[y],D[y]):b[d](R[y])),x.onerror=F;else for(let y=0;y<T;++y)S.push(x=b[d](R[y])),x.onerror=F}const W=R=>{const D=R.target.result;S.forEach((y,M)=>y.error!=null&&(N[M]=y.error)),v({numFailures:L,failures:N,results:d==="delete"?l:S.map(y=>y.result),lastResult:D})};x.onerror=R=>{F(R),W(R)},x.onsuccess=W})},getMany:({trans:_,keys:d})=>new Promise((l,g)=>{l=pt(l);const c=_.objectStore(h),v=d.length,m=new Array(v);let b,E=0,A=0;const T=S=>{const N=S.target;m[N._pos]=N.result,++A===E&&l(m)},x=Bt(g);for(let S=0;S<v;++S)d[S]!=null&&(b=c.get(d[S]),b._pos=S,b.onsuccess=T,b.onerror=x,++E);E===0&&l(m)}),get:({trans:_,key:d})=>new Promise((l,g)=>{l=pt(l);const c=_.objectStore(h).get(d);c.onsuccess=v=>l(v.target.result),c.onerror=Bt(g)}),query:function(_){return d=>new Promise((l,g)=>{l=pt(l);const{trans:c,values:v,limit:m,query:b}=d,E=m===1/0?void 0:m,{index:A,range:T}=b,x=c.objectStore(h),S=A.isPrimaryKey?x:x.index(A.name),N=i(T);if(m===0)return l({result:[]});if(_){const L=v?S.getAll(N,E):S.getAllKeys(N,E);L.onsuccess=F=>l({result:F.target.result}),L.onerror=Bt(g)}else{let L=0;const F=v||!("openKeyCursor"in S)?S.openCursor(N):S.openKeyCursor(N),W=[];F.onsuccess=R=>{const D=F.result;return D?(W.push(v?D.value:D.primaryKey),++L===m?l({result:W}):void D.continue()):l({result:W})},F.onerror=Bt(g)}})}(s),openCursor:function({trans:_,values:d,query:l,reverse:g,unique:c}){return new Promise((v,m)=>{v=pt(v);const{index:b,range:E}=l,A=_.objectStore(h),T=b.isPrimaryKey?A:A.index(b.name),x=g?c?"prevunique":"prev":c?"nextunique":"next",S=d||!("openKeyCursor"in T)?T.openCursor(i(E),x):T.openKeyCursor(i(E),x);S.onerror=Bt(m),S.onsuccess=pt(N=>{const L=S.result;if(!L)return void v(null);L.___id=++Js,L.done=!1;const F=L.continue.bind(L);let W=L.continuePrimaryKey;W&&(W=W.bind(L));const R=L.advance.bind(L),D=()=>{throw new Error("Cursor not stopped")};L.trans=_,L.stop=L.continue=L.continuePrimaryKey=L.advance=()=>{throw new Error("Cursor not started")},L.fail=pt(m),L.next=function(){let y=1;return this.start(()=>y--?this.continue():this.stop()).then(()=>this)},L.start=y=>{const M=new Promise((U,et)=>{U=pt(U),S.onerror=Bt(et),L.fail=et,L.stop=z=>{L.stop=L.continue=L.continuePrimaryKey=L.advance=D,U(z)}}),J=()=>{if(S.result)try{y()}catch(U){L.fail(U)}else L.done=!0,L.start=()=>{throw new Error("Cursor behind last entry")},L.stop()};return S.onsuccess=pt(U=>{S.onsuccess=J,J()}),L.continue=F,L.continuePrimaryKey=W,L.advance=R,J(),M},v(L)},m)})},count({query:_,trans:d}){const{index:l,range:g}=_;return new Promise((c,v)=>{const m=d.objectStore(h),b=l.isPrimaryKey?m:m.index(l.name),E=i(g),A=E?b.count(E):b.count();A.onsuccess=pt(T=>c(T.target.result)),A.onerror=Bt(v)})}}}(u)),a={};return o.forEach(u=>a[u.name]=u),{stack:"dbcore",transaction:t.transaction.bind(t),table(u){if(!a[u])throw new Error(`Table '${u}' not found`);return a[u]},MIN_KEY:-1/0,MAX_KEY:Ke(e),schema:r}}function gr({_novip:t},e){const n=e.db,i=function(r,s,{IDBKeyRange:o,indexedDB:a},u){return{dbcore:function(h,_){return _.reduce((d,{create:l})=>({...d,...l(d)}),h)}(Xs(s,o,u),r.dbcore)}}(t._middlewares,n,t._deps,e);t.core=i.dbcore,t.tables.forEach(r=>{const s=r.name;t.core.schema.tables.some(o=>o.name===s)&&(r.core=t.core.table(s),t[s]instanceof t.Table&&(t[s].core=r.core))})}function Ln({_novip:t},e,n,i){n.forEach(r=>{const s=i[r];e.forEach(o=>{const a=Gn(o,r);(!a||"value"in a&&a.value===void 0)&&(o===t.Transaction.prototype||o instanceof t.Transaction?Ut(o,r,{get(){return this.table(r)},set(u){Jr(this,r,{value:u,writable:!0,configurable:!0,enumerable:!0})}}):o[r]=new t.Table(r,s))})})}function yr({_novip:t},e){e.forEach(n=>{for(let i in n)n[i]instanceof t.Table&&delete n[i]})}function Qs(t,e){return t._cfg.version-e._cfg.version}function to(t,e,n,i){const r=t._dbSchema,s=t._createTransaction("readwrite",t._storeNames,r);s.create(n),s._completion.catch(i);const o=s._reject.bind(s),a=nt.transless||nt;Yt(()=>{nt.trans=s,nt.transless=a,e===0?(bt(r).forEach(u=>{br(n,u,r[u].primKey,r[u].indexes)}),gr(t,n),X.follow(()=>t.on.populate.fire(s)).catch(o)):function({_novip:u},f,h,_){const d=[],l=u._versions;let g=u._dbSchema=Er(u,u.idbdb,_),c=!1;const v=l.filter(b=>b._cfg.version>=f);function m(){return d.length?X.resolve(d.shift()(h.idbtrans)).then(m):X.resolve()}return v.forEach(b=>{d.push(()=>{const E=g,A=b._cfg.dbschema;Ar(u,E,_),Ar(u,A,_),g=u._dbSchema=A;const T=Pi(E,A);T.add.forEach(S=>{br(_,S[0],S[1].primKey,S[1].indexes)}),T.change.forEach(S=>{if(S.recreate)throw new st.Upgrade("Not yet support for changing primary key");{const N=_.objectStore(S.name);S.add.forEach(L=>vr(N,L)),S.change.forEach(L=>{N.deleteIndex(L.name),vr(N,L)}),S.del.forEach(L=>N.deleteIndex(L))}});const x=b._cfg.contentUpgrade;if(x&&b._cfg.version>f){gr(u,_),h._memoizedTables={},c=!0;let S=ei(A);T.del.forEach(W=>{S[W]=E[W]}),yr(u,[u.Transaction.prototype]),Ln(u,[u.Transaction.prototype],bt(S),S),h.schema=S;const N=Wn(x);let L;N&&ye();const F=X.follow(()=>{if(L=x(h),L&&N){var W=jt.bind(null,null);L.then(W,W)}});return L&&typeof L.then=="function"?X.resolve(L):F.then(()=>L)}}),d.push(E=>{(!c||!Ks)&&function(A,T){[].slice.call(T.db.objectStoreNames).forEach(x=>A[x]==null&&T.db.deleteObjectStore(x))}(b._cfg.dbschema,E),yr(u,[u.Transaction.prototype]),Ln(u,[u.Transaction.prototype],u._storeNames,u._dbSchema),h.schema=u._dbSchema})}),m().then(()=>{var b,E;E=_,bt(b=g).forEach(A=>{E.db.objectStoreNames.contains(A)||br(E,A,b[A].primKey,b[A].indexes)})})}(t,e,s,n).catch(o)})}function Pi(t,e){const n={del:[],add:[],change:[]};let i;for(i in t)e[i]||n.del.push(i);for(i in e){const r=t[i],s=e[i];if(r){const o={name:i,def:s,recreate:!1,del:[],add:[],change:[]};if(""+(r.primKey.keyPath||"")!=""+(s.primKey.keyPath||"")||r.primKey.auto!==s.primKey.auto&&!En)o.recreate=!0,n.change.push(o);else{const a=r.idxByName,u=s.idxByName;let f;for(f in a)u[f]||o.del.push(f);for(f in u){const h=a[f],_=u[f];h?h.src!==_.src&&o.change.push(_):o.add.push(_)}(o.del.length>0||o.add.length>0||o.change.length>0)&&n.change.push(o)}}else n.add.push([i,s])}return n}function br(t,e,n,i){const r=t.db.createObjectStore(e,n.keyPath?{keyPath:n.keyPath,autoIncrement:n.auto}:{autoIncrement:n.auto});return i.forEach(s=>vr(r,s)),r}function vr(t,e){t.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function Er(t,e,n){const i={};return an(e.objectStoreNames,0).forEach(r=>{const s=n.objectStore(r);let o=s.keyPath;const a=_r(Ni(o),o||"",!1,!1,!!s.autoIncrement,o&&typeof o!="string",!0),u=[];for(let h=0;h<s.indexNames.length;++h){const _=s.index(s.indexNames[h]);o=_.keyPath;var f=_r(_.name,o,!!_.unique,!!_.multiEntry,!1,o&&typeof o!="string",!1);u.push(f)}i[r]=Ci(r,a,u)}),i}function Ar({_novip:t},e,n){const i=n.db.objectStoreNames;for(let r=0;r<i.length;++r){const s=i[r],o=n.objectStore(s);t._hasGetAll="getAll"in o;for(let a=0;a<o.indexNames.length;++a){const u=o.indexNames[a],f=o.index(u).keyPath,h=typeof f=="string"?f:"["+an(f).join("+")+"]";if(e[s]){const _=e[s].idxByName[h];_&&(_.name=u,delete e[s].idxByName[h],e[s].idxByName[u]=_)}}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&dt.WorkerGlobalScope&&dt instanceof dt.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(t._hasGetAll=!1)}class eo{_parseStoresSpec(e,n){bt(e).forEach(i=>{if(e[i]!==null){var r=e[i].split(",").map((o,a)=>{const u=(o=o.trim()).replace(/([&*]|\+\+)/g,""),f=/^\[/.test(u)?u.match(/^\[(.*)\]$/)[1].split("+"):u;return _r(u,f||null,/\&/.test(o),/\*/.test(o),/\+\+/.test(o),wt(f),a===0)}),s=r.shift();if(s.multi)throw new st.Schema("Primary key cannot be multi-valued");r.forEach(o=>{if(o.auto)throw new st.Schema("Only primary key can be marked as autoIncrement (++)");if(!o.keyPath)throw new st.Schema("Index must have a name and cannot be an empty string")}),n[i]=Ci(i,s,r)}})}stores(e){const n=this.db;this._cfg.storesSource=this._cfg.storesSource?Rt(this._cfg.storesSource,e):e;const i=n._versions,r={};let s={};return i.forEach(o=>{Rt(r,o._cfg.storesSource),s=o._cfg.dbschema={},o._parseStoresSpec(r,s)}),n._dbSchema=s,yr(n,[n._allTables,n,n.Transaction.prototype]),Ln(n,[n._allTables,n,n.Transaction.prototype,this._cfg.tables],bt(s),s),n._storeNames=bt(s),this}upgrade(e){return this._cfg.contentUpgrade=qn(this._cfg.contentUpgrade||ct,e),this}}function wr(t,e){let n=t._dbNamesDB;return n||(n=t._dbNamesDB=new le(An,{addons:[],indexedDB:t,IDBKeyRange:e}),n.version(1).stores({dbnames:"name"})),n.table("dbnames")}function Tr(t){return t&&typeof t.databases=="function"}function Ir(t){return Yt(function(){return nt.letThrough=!0,t()})}function no(){var t;return!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(e){var n=function(){return indexedDB.databases().finally(e)};t=setInterval(n,100),n()}).finally(function(){return clearInterval(t)}):Promise.resolve()}function ro(t){const e=t._state,{indexedDB:n}=t._deps;if(e.isBeingOpened||t.idbdb)return e.dbReadyPromise.then(()=>e.dbOpenError?vt(e.dbOpenError):t);Dt&&(e.openCanceller._stackHolder=re()),e.isBeingOpened=!0,e.dbOpenError=null,e.openComplete=!1;const i=e.openCanceller;function r(){if(e.openCanceller!==i)throw new st.DatabaseClosed("db.open() was cancelled")}let s=e.dbReadyResolve,o=null,a=!1;const u=()=>new X((f,h)=>{if(r(),!n)throw new st.MissingAPI;const _=t.name,d=e.autoSchema?n.open(_):n.open(_,Math.round(10*t.verno));if(!d)throw new st.MissingAPI;d.onerror=Bt(h),d.onblocked=pt(t._fireOnBlocked),d.onupgradeneeded=pt(l=>{if(o=d.transaction,e.autoSchema&&!t._options.allowEmptyDB){d.onerror=Ge,o.abort(),d.result.close();const c=n.deleteDatabase(_);c.onsuccess=c.onerror=pt(()=>{h(new st.NoSuchDatabase(`Database ${_} doesnt exist`))})}else{o.onerror=Bt(h);var g=l.oldVersion>Math.pow(2,62)?0:l.oldVersion;a=g<1,t._novip.idbdb=d.result,to(t,g/10,o,h)}},h),d.onsuccess=pt(()=>{o=null;const l=t._novip.idbdb=d.result,g=an(l.objectStoreNames);if(g.length>0)try{const v=l.transaction((c=g).length===1?c[0]:c,"readonly");e.autoSchema?function({_novip:m},b,E){m.verno=b.version/10;const A=m._dbSchema=Er(0,b,E);m._storeNames=an(b.objectStoreNames,0),Ln(m,[m._allTables],bt(A),A)}(t,l,v):(Ar(t,t._dbSchema,v),function(m,b){const E=Pi(Er(0,m.idbdb,b),m._dbSchema);return!(E.add.length||E.change.some(A=>A.add.length||A.change.length))}(t,v)||console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Some queries may fail.")),gr(t,v)}catch{}var c;Me.push(t),l.onversionchange=pt(v=>{e.vcFired=!0,t.on("versionchange").fire(v)}),l.onclose=pt(v=>{t.on("close").fire(v)}),a&&function({indexedDB:v,IDBKeyRange:m},b){!Tr(v)&&b!==An&&wr(v,m).put({name:b}).catch(ct)}(t._deps,_),f()},h)}).catch(f=>f&&f.name==="UnknownError"&&e.PR1398_maxLoop>0?(e.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),u()):X.reject(f));return X.race([i,(typeof navigator>"u"?X.resolve():no()).then(u)]).then(()=>(r(),e.onReadyBeingFired=[],X.resolve(Ir(()=>t.on.ready.fire(t.vip))).then(function f(){if(e.onReadyBeingFired.length>0){let h=e.onReadyBeingFired.reduce(qn,ct);return e.onReadyBeingFired=[],X.resolve(Ir(()=>h(t.vip))).then(f)}}))).finally(()=>{e.onReadyBeingFired=null,e.isBeingOpened=!1}).then(()=>t).catch(f=>{e.dbOpenError=f;try{o&&o.abort()}catch{}return i===e.openCanceller&&t._close(),vt(f)}).finally(()=>{e.openComplete=!0,s()})}function Rr(t){var e=s=>t.next(s),n=r(e),i=r(s=>t.throw(s));function r(s){return o=>{var a=s(o),u=a.value;return a.done?u:u&&typeof u.then=="function"?u.then(n,i):wt(u)?Promise.all(u).then(n,i):n(u)}}return r(e)()}function io(t,e,n){var i=arguments.length;if(i<2)throw new st.InvalidArgument("Too few arguments");for(var r=new Array(i-1);--i;)r[i-1]=arguments[i];return n=r.pop(),[t,ni(r),n]}function Di(t,e,n,i,r){return X.resolve().then(()=>{const s=nt.transless||nt,o=t._createTransaction(e,n,t._dbSchema,i),a={trans:o,transless:s};if(i)o.idbtrans=i.idbtrans;else try{o.create(),t._state.PR1398_maxLoop=3}catch(_){return _.name===Vn.InvalidState&&t.isOpen()&&--t._state.PR1398_maxLoop>0?(console.warn("Dexie: Need to reopen db"),t._close(),t.open().then(()=>Di(t,e,n,null,r))):vt(_)}const u=Wn(r);let f;u&&ye();const h=X.follow(()=>{if(f=r.call(o,o),f)if(u){var _=jt.bind(null,null);f.then(_,_)}else typeof f.next=="function"&&typeof f.throw=="function"&&(f=Rr(f))},a);return(f&&typeof f.then=="function"?X.resolve(f).then(_=>o.active?_:vt(new st.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))):h.then(()=>f)).then(_=>(i&&o._resolve(),o._completion.then(()=>_))).catch(_=>(o._reject(_),vt(_)))})}function Sn(t,e,n){const i=wt(t)?t.slice():[t];for(let r=0;r<n;++r)i.push(e);return i}const so={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(t){return{...t,table(e){const n=t.table(e),{schema:i}=n,r={},s=[];function o(h,_,d){const l=Ze(h),g=r[l]=r[l]||[],c=h==null?0:typeof h=="string"?1:h.length,v=_>0,m={...d,isVirtual:v,keyTail:_,keyLength:c,extractKey:mr(h),unique:!v&&d.unique};return g.push(m),m.isPrimaryKey||s.push(m),c>1&&o(c===2?h[0]:h.slice(0,c-1),_+1,d),g.sort((b,E)=>b.keyTail-E.keyTail),m}const a=o(i.primaryKey.keyPath,0,i.primaryKey);r[":id"]=[a];for(const h of i.indexes)o(h.keyPath,0,h);function u(h){const _=h.query.index;return _.isVirtual?{...h,query:{index:_,range:(d=h.query.range,l=_.keyTail,{type:d.type===1?2:d.type,lower:Sn(d.lower,d.lowerOpen?t.MAX_KEY:t.MIN_KEY,l),lowerOpen:!0,upper:Sn(d.upper,d.upperOpen?t.MIN_KEY:t.MAX_KEY,l),upperOpen:!0})}}:h;var d,l}return{...n,schema:{...i,primaryKey:a,indexes:s,getIndexByKeyPath:function(h){const _=r[Ze(h)];return _&&_[0]}},count:h=>n.count(u(h)),query:h=>n.query(u(h)),openCursor(h){const{keyTail:_,isVirtual:d,keyLength:l}=h.query.index;return d?n.openCursor(u(h)).then(g=>g&&function(c){return Object.create(c,{continue:{value:function(m){m!=null?c.continue(Sn(m,h.reverse?t.MAX_KEY:t.MIN_KEY,_)):h.unique?c.continue(c.key.slice(0,l).concat(h.reverse?t.MIN_KEY:t.MAX_KEY,_)):c.continue()}},continuePrimaryKey:{value(m,b){c.continuePrimaryKey(Sn(m,t.MAX_KEY,_),b)}},primaryKey:{get:()=>c.primaryKey},key:{get(){const m=c.key;return l===1?m[0]:m.slice(0,l)}},value:{get:()=>c.value}})}(g)):n.openCursor(h)}}}}}};function Lr(t,e,n,i){return n=n||{},i=i||"",bt(t).forEach(r=>{if(xt(e,r)){var s=t[r],o=e[r];if(typeof s=="object"&&typeof o=="object"&&s&&o){const a=Kn(s);a!==Kn(o)?n[i+r]=e[r]:a==="Object"?Lr(s,o,n,i+r+"."):s!==o&&(n[i+r]=e[r])}else s!==o&&(n[i+r]=e[r])}else n[i+r]=void 0}),bt(e).forEach(r=>{xt(t,r)||(n[i+r]=e[r])}),n}const oo={stack:"dbcore",name:"HooksMiddleware",level:2,create:t=>({...t,table(e){const n=t.table(e),{primaryKey:i}=n.schema;return{...n,mutate(s){const o=nt.trans,{deleting:a,creating:u,updating:f}=o.table(e).hook;switch(s.type){case"add":if(u.fire===ct)break;return o._promise("readwrite",()=>h(s),!0);case"put":if(u.fire===ct&&f.fire===ct)break;return o._promise("readwrite",()=>h(s),!0);case"delete":if(a.fire===ct)break;return o._promise("readwrite",()=>h(s),!0);case"deleteRange":if(a.fire===ct)break;return o._promise("readwrite",()=>function(d){return _(d.trans,d.range,1e4)}(s),!0)}return n.mutate(s);function h(d){const l=nt.trans,g=d.keys||function(c,v){return v.type==="delete"?v.keys:v.keys||v.values.map(c.extractKey)}(i,d);if(!g)throw new Error("Keys missing");return(d=d.type==="add"||d.type==="put"?{...d,keys:g}:{...d}).type!=="delete"&&(d.values=[...d.values]),d.keys&&(d.keys=[...d.keys]),function(c,v,m){return v.type==="add"?Promise.resolve([]):c.getMany({trans:v.trans,keys:m,cache:"immutable"})}(n,d,g).then(c=>{const v=g.map((m,b)=>{const E=c[b],A={onerror:null,onsuccess:null};if(d.type==="delete")a.fire.call(A,m,E,l);else if(d.type==="add"||E===void 0){const T=u.fire.call(A,m,d.values[b],l);m==null&&T!=null&&(m=T,d.keys[b]=m,i.outbound||Ct(d.values[b],i.keyPath,m))}else{const T=Lr(E,d.values[b]),x=f.fire.call(A,T,m,E,l);if(x){const S=d.values[b];Object.keys(x).forEach(N=>{xt(S,N)?S[N]=x[N]:Ct(S,N,x[N])})}}return A});return n.mutate(d).then(({failures:m,results:b,numFailures:E,lastResult:A})=>{for(let T=0;T<g.length;++T){const x=b?b[T]:g[T],S=v[T];x==null?S.onerror&&S.onerror(m[T]):S.onsuccess&&S.onsuccess(d.type==="put"&&c[T]?d.values[T]:x)}return{failures:m,results:b,numFailures:E,lastResult:A}}).catch(m=>(v.forEach(b=>b.onerror&&b.onerror(m)),Promise.reject(m)))})}function _(d,l,g){return n.query({trans:d,values:!1,query:{index:i,range:l},limit:g}).then(({result:c})=>h({type:"delete",keys:c,trans:d}).then(v=>v.numFailures>0?Promise.reject(v.failures[0]):c.length<g?{failures:[],numFailures:0,lastResult:void 0}:_(d,{...l,lower:c[c.length-1],lowerOpen:!0},g)))}}}}})};function Bi(t,e,n){try{if(!e||e.keys.length<t.length)return null;const i=[];for(let r=0,s=0;r<e.keys.length&&s<t.length;++r)Lt(e.keys[r],t[s])===0&&(i.push(n?ke(e.values[r]):e.values[r]),++s);return i.length===t.length?i:null}catch{return null}}const ao={stack:"dbcore",level:-1,create:t=>({table:e=>{const n=t.table(e);return{...n,getMany:i=>{if(!i.cache)return n.getMany(i);const r=Bi(i.keys,i.trans._cache,i.cache==="clone");return r?X.resolve(r):n.getMany(i).then(s=>(i.trans._cache={keys:i.keys,values:i.cache==="clone"?ke(s):s},s))},mutate:i=>(i.type!=="add"&&(i.trans._cache=null),n.mutate(i))}}})};function Sr(t){return!("from"in t)}const Zt=function(t,e){if(!this){const n=new Zt;return t&&"d"in t&&Rt(n,t),n}Rt(this,arguments.length?{d:1,from:t,to:arguments.length>1?e:t}:{d:0})};function We(t,e,n){const i=Lt(e,n);if(isNaN(i))return;if(i>0)throw RangeError();if(Sr(t))return Rt(t,{from:e,to:n,d:1});const r=t.l,s=t.r;if(Lt(n,t.from)<0)return r?We(r,e,n):t.l={from:e,to:n,d:1,l:null,r:null},Fi(t);if(Lt(e,t.to)>0)return s?We(s,e,n):t.r={from:e,to:n,d:1,l:null,r:null},Fi(t);Lt(e,t.from)<0&&(t.from=e,t.l=null,t.d=s?s.d+1:1),Lt(n,t.to)>0&&(t.to=n,t.r=null,t.d=t.l?t.l.d+1:1);const o=!t.r;r&&!t.l&&xn(t,r),s&&o&&xn(t,s)}function xn(t,e){Sr(e)||function n(i,{from:r,to:s,l:o,r:a}){We(i,r,s),o&&n(i,o),a&&n(i,a)}(t,e)}function uo(t,e){const n=xr(e);let i=n.next();if(i.done)return!1;let r=i.value;const s=xr(t);let o=s.next(r.from),a=o.value;for(;!i.done&&!o.done;){if(Lt(a.from,r.to)<=0&&Lt(a.to,r.from)>=0)return!0;Lt(r.from,a.from)<0?r=(i=n.next(a.from)).value:a=(o=s.next(r.from)).value}return!1}function xr(t){let e=Sr(t)?null:{s:0,n:t};return{next(n){const i=arguments.length>0;for(;e;)switch(e.s){case 0:if(e.s=1,i)for(;e.n.l&&Lt(n,e.n.from)<0;)e={up:e,n:e.n.l,s:1};else for(;e.n.l;)e={up:e,n:e.n.l,s:1};case 1:if(e.s=2,!i||Lt(n,e.n.to)<=0)return{value:e.n,done:!1};case 2:if(e.n.r){e.s=3,e={up:e,n:e.n.r,s:0};continue}case 3:e=e.up}return{done:!0}}}}function Fi(t){var e,n;const i=(((e=t.r)===null||e===void 0?void 0:e.d)||0)-(((n=t.l)===null||n===void 0?void 0:n.d)||0),r=i>1?"r":i<-1?"l":"";if(r){const s=r==="r"?"l":"r",o={...t},a=t[r];t.from=a.from,t.to=a.to,t[r]=a[r],o[r]=a[s],t[s]=o,o.d=Mi(o)}t.d=Mi(t)}function Mi({r:t,l:e}){return(t?e?Math.max(t.d,e.d):t.d:e?e.d:0)+1}de(Zt.prototype,{add(t){return xn(this,t),this},addKey(t){return We(this,t,t),this},addKeys(t){return t.forEach(e=>We(this,e,e)),this},[Zn](){return xr(this)}});const lo={stack:"dbcore",level:0,create:t=>{const e=t.schema.name,n=new Zt(t.MIN_KEY,t.MAX_KEY);return{...t,table:i=>{const r=t.table(i),{schema:s}=r,{primaryKey:o}=s,{extractKey:a,outbound:u}=o,f={...r,mutate:d=>{const l=d.trans,g=l.mutatedParts||(l.mutatedParts={}),c=x=>{const S=`idb://${e}/${i}/${x}`;return g[S]||(g[S]=new Zt)},v=c(""),m=c(":dels"),{type:b}=d;let[E,A]=d.type==="deleteRange"?[d.range]:d.type==="delete"?[d.keys]:d.values.length<50?[[],d.values]:[];const T=d.trans._cache;return r.mutate(d).then(x=>{if(wt(E)){b!=="delete"&&(E=x.results),v.addKeys(E);const S=Bi(E,T);S||b==="add"||m.addKeys(E),(S||A)&&function(N,L,F,W){function R(D){const y=N(D.name||"");function M(U){return U!=null?D.extractKey(U):null}const J=U=>D.multiEntry&&wt(U)?U.forEach(et=>y.addKey(et)):y.addKey(U);(F||W).forEach((U,et)=>{const z=F&&M(F[et]),Y=W&&M(W[et]);Lt(z,Y)!==0&&(z!=null&&J(z),Y!=null&&J(Y))})}L.indexes.forEach(R)}(c,s,S,A)}else if(E){const S={from:E.lower,to:E.upper};m.add(S),v.add(S)}else v.add(n),m.add(n),s.indexes.forEach(S=>c(S.name).add(n));return x})}},h=({query:{index:d,range:l}})=>{var g,c;return[d,new Zt((g=l.lower)!==null&&g!==void 0?g:t.MIN_KEY,(c=l.upper)!==null&&c!==void 0?c:t.MAX_KEY)]},_={get:d=>[o,new Zt(d.key)],getMany:d=>[o,new Zt().addKeys(d.keys)],count:h,query:h,openCursor:h};return bt(_).forEach(d=>{f[d]=function(l){const{subscr:g}=nt;if(g){const c=A=>{const T=`idb://${e}/${i}/${A}`;return g[T]||(g[T]=new Zt)},v=c(""),m=c(":dels"),[b,E]=_[d](l);if(c(b.name||"").add(E),!b.isPrimaryKey){if(d!=="count"){const A=d==="query"&&u&&l.values&&r.query({...l,values:!1});return r[d].apply(this,arguments).then(T=>{if(d==="query"){if(u&&l.values)return A.then(({result:S})=>(v.addKeys(S),T));const x=l.values?T.result.map(a):T.result;l.values?v.addKeys(x):m.addKeys(x)}else if(d==="openCursor"){const x=T,S=l.values;return x&&Object.create(x,{key:{get:()=>(m.addKey(x.primaryKey),x.key)},primaryKey:{get(){const N=x.primaryKey;return m.addKey(N),N}},value:{get:()=>(S&&v.addKey(x.primaryKey),x.value)}})}return T})}m.add(n)}}return r[d].apply(this,arguments)}}),f}}}};class le{constructor(e,n){this._middlewares={},this.verno=0;const i=le.dependencies;this._options=n={addons:le.addons,autoOpen:!0,indexedDB:i.indexedDB,IDBKeyRange:i.IDBKeyRange,...n},this._deps={indexedDB:n.indexedDB,IDBKeyRange:n.IDBKeyRange};const{addons:r}=n;this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;const s={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:ct,dbReadyPromise:null,cancelOpen:ct,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3};var o;s.dbReadyPromise=new X(a=>{s.dbReadyResolve=a}),s.openCanceller=new X((a,u)=>{s.cancelOpen=u}),this._state=s,this.name=e,this.on=Ue(this,"populate","blocked","versionchange","close",{ready:[qn,ct]}),this.on.ready.subscribe=Xr(this.on.ready.subscribe,a=>(u,f)=>{le.vip(()=>{const h=this._state;if(h.openComplete)h.dbOpenError||X.resolve().then(u),f&&a(u);else if(h.onReadyBeingFired)h.onReadyBeingFired.push(u),f&&a(u);else{a(u);const _=this;f||a(function d(){_.on.ready.unsubscribe(u),_.on.ready.unsubscribe(d)})}})}),this.Collection=(o=this,ze(Hs.prototype,function(a,u){this.db=o;let f=Ti,h=null;if(u)try{f=u()}catch(g){h=g}const _=a._ctx,d=_.table,l=d.hook.reading.fire;this._ctx={table:d,index:_.index,isPrimKey:!_.index||d.schema.primKey.keyPath&&_.index===d.schema.primKey.name,range:f,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:h,or:_.or,valueMapper:l!==Ce?l:null}})),this.Table=function(a){return ze(Ws.prototype,function(u,f,h){this.db=a,this._tx=h,this.name=u,this.schema=f,this.hook=a._allTables[u]?a._allTables[u].hook:Ue(null,{creating:[Os,ct],reading:[Cs,Ce],updating:[Ds,ct],deleting:[Ps,ct]})})}(this),this.Transaction=function(a){return ze(Ys.prototype,function(u,f,h,_,d){this.db=a,this.mode=u,this.storeNames=f,this.schema=h,this.chromeTransactionDurability=_,this.idbtrans=null,this.on=Ue(this,"complete","error","abort"),this.parent=d||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new X((l,g)=>{this._resolve=l,this._reject=g}),this._completion.then(()=>{this.active=!1,this.on.complete.fire()},l=>{var g=this.active;return this.active=!1,this.on.error.fire(l),this.parent?this.parent._reject(l):g&&this.idbtrans&&this.idbtrans.abort(),vt(l)})})}(this),this.Version=function(a){return ze(eo.prototype,function(u){this.db=a,this._cfg={version:u,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})}(this),this.WhereClause=function(a){return ze(ki.prototype,function(u,f,h){this.db=a,this._ctx={table:u,index:f===":id"?null:f,or:h};const _=a._deps.indexedDB;if(!_)throw new st.MissingAPI;this._cmp=this._ascending=_.cmp.bind(_),this._descending=(d,l)=>_.cmp(l,d),this._max=(d,l)=>_.cmp(d,l)>0?d:l,this._min=(d,l)=>_.cmp(d,l)<0?d:l,this._IDBKeyRange=a._deps.IDBKeyRange})}(this),this.on("versionchange",a=>{a.newVersion>0?console.warn(`Another connection wants to upgrade database '${this.name}'. Closing db now to resume the upgrade.`):console.warn(`Another connection wants to delete database '${this.name}'. Closing db now to resume the delete request.`),this.close()}),this.on("blocked",a=>{!a.newVersion||a.newVersion<a.oldVersion?console.warn(`Dexie.delete('${this.name}') was blocked`):console.warn(`Upgrade '${this.name}' blocked by other connection holding version ${a.oldVersion/10}`)}),this._maxKey=Ke(n.IDBKeyRange),this._createTransaction=(a,u,f,h)=>new this.Transaction(a,u,f,this._options.chromeTransactionDurability,h),this._fireOnBlocked=a=>{this.on("blocked").fire(a),Me.filter(u=>u.name===this.name&&u!==this&&!u._state.vcFired).map(u=>u.on("versionchange").fire(a))},this.use(so),this.use(oo),this.use(lo),this.use(ao),this.vip=Object.create(this,{_vip:{value:!0}}),r.forEach(a=>a(this))}version(e){if(isNaN(e)||e<.1)throw new st.Type("Given version is not a positive number");if(e=Math.round(10*e)/10,this.idbdb||this._state.isBeingOpened)throw new st.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,e);const n=this._versions;var i=n.filter(r=>r._cfg.version===e)[0];return i||(i=new this.Version(e),n.push(i),n.sort(Qs),i.stores({}),this._state.autoSchema=!1,i)}_whenReady(e){return this.idbdb&&(this._state.openComplete||nt.letThrough||this._vip)?e():new X((n,i)=>{if(this._state.openComplete)return i(new st.DatabaseClosed(this._state.dbOpenError));if(!this._state.isBeingOpened){if(!this._options.autoOpen)return void i(new st.DatabaseClosed);this.open().catch(ct)}this._state.dbReadyPromise.then(n,i)}).then(e)}use({stack:e,create:n,level:i,name:r}){r&&this.unuse({stack:e,name:r});const s=this._middlewares[e]||(this._middlewares[e]=[]);return s.push({stack:e,create:n,level:i??10,name:r}),s.sort((o,a)=>o.level-a.level),this}unuse({stack:e,name:n,create:i}){return e&&this._middlewares[e]&&(this._middlewares[e]=this._middlewares[e].filter(r=>i?r.create!==i:!!n&&r.name!==n)),this}open(){return ro(this)}_close(){const e=this._state,n=Me.indexOf(this);if(n>=0&&Me.splice(n,1),this.idbdb){try{this.idbdb.close()}catch{}this._novip.idbdb=null}e.dbReadyPromise=new X(i=>{e.dbReadyResolve=i}),e.openCanceller=new X((i,r)=>{e.cancelOpen=r})}close(){this._close();const e=this._state;this._options.autoOpen=!1,e.dbOpenError=new st.DatabaseClosed,e.isBeingOpened&&e.cancelOpen(e.dbOpenError)}delete(){const e=arguments.length>0,n=this._state;return new X((i,r)=>{const s=()=>{this.close();var o=this._deps.indexedDB.deleteDatabase(this.name);o.onsuccess=pt(()=>{(function({indexedDB:a,IDBKeyRange:u},f){!Tr(a)&&f!==An&&wr(a,u).delete(f).catch(ct)})(this._deps,this.name),i()}),o.onerror=Bt(r),o.onblocked=this._fireOnBlocked};if(e)throw new st.InvalidArgument("Arguments not allowed in db.delete()");n.isBeingOpened?n.dbReadyPromise.then(s):s()})}backendDB(){return this.idbdb}isOpen(){return this.idbdb!==null}hasBeenClosed(){const e=this._state.dbOpenError;return e&&e.name==="DatabaseClosed"}hasFailed(){return this._state.dbOpenError!==null}dynamicallyOpened(){return this._state.autoSchema}get tables(){return bt(this._allTables).map(e=>this._allTables[e])}transaction(){const e=io.apply(this,arguments);return this._transaction.apply(this,e)}_transaction(e,n,i){let r=nt.trans;r&&r.db===this&&e.indexOf("!")===-1||(r=null);const s=e.indexOf("?")!==-1;let o,a;e=e.replace("!","").replace("?","");try{if(a=n.map(f=>{var h=f instanceof this.Table?f.name:f;if(typeof h!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return h}),e=="r"||e===cr)o=cr;else{if(e!="rw"&&e!=hr)throw new st.InvalidArgument("Invalid transaction mode: "+e);o=hr}if(r){if(r.mode===cr&&o===hr){if(!s)throw new st.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r=null}r&&a.forEach(f=>{if(r&&r.storeNames.indexOf(f)===-1){if(!s)throw new st.SubTransaction("Table "+f+" not included in parent transaction.");r=null}}),s&&r&&!r.active&&(r=null)}}catch(f){return r?r._promise(null,(h,_)=>{_(f)}):vt(f)}const u=Di.bind(null,this,o,a,r,i);return r?r._promise(o,u,"lock"):nt.trans?be(nt.transless,()=>this._whenReady(u)):this._whenReady(u)}table(e){if(!xt(this._allTables,e))throw new st.InvalidTable(`Table ${e} does not exist`);return this._allTables[e]}}const co=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable";class ho{constructor(e){this._subscribe=e}subscribe(e,n,i){return this._subscribe(e&&typeof e!="function"?e:{next:e,error:n,complete:i})}[co](){return this}}function Ui(t,e){return bt(e).forEach(n=>{xn(t[n]||(t[n]=new Zt),e[n])}),t}function fo(t){let e,n=!1;const i=new ho(r=>{const s=Wn(t);let o=!1,a={},u={};const f={get closed(){return o},unsubscribe:()=>{o=!0,te.storagemutated.unsubscribe(l)}};r.start&&r.start(f);let h=!1,_=!1;function d(){return bt(u).some(c=>a[c]&&uo(a[c],u[c]))}const l=c=>{Ui(a,c),d()&&g()},g=()=>{if(h||o)return;a={};const c={},v=function(m){s&&ye();const b=()=>Yt(t,{subscr:m,trans:null}),E=nt.trans?be(nt.transless,b):b();return s&&E.then(jt,jt),E}(c);_||(te(je,l),_=!0),h=!0,Promise.resolve(v).then(m=>{n=!0,e=m,h=!1,o||(d()?g():(a={},u=c,r.next&&r.next(m)))},m=>{h=!1,n=!1,r.error&&r.error(m),f.unsubscribe()})};return g(),f});return i.hasValue=()=>n,i.getValue=()=>e,i}let kr;try{kr={indexedDB:dt.indexedDB||dt.mozIndexedDB||dt.webkitIndexedDB||dt.msIndexedDB,IDBKeyRange:dt.IDBKeyRange||dt.webkitIDBKeyRange}}catch{kr={indexedDB:null,IDBKeyRange:null}}const ce=le;function kn(t){let e=Wt;try{Wt=!0,te.storagemutated.fire(t)}finally{Wt=e}}de(ce,{...ln,delete:t=>new ce(t,{addons:[]}).delete(),exists:t=>new ce(t,{addons:[]}).open().then(e=>(e.close(),!0)).catch("NoSuchDatabaseError",()=>!1),getDatabaseNames(t){try{return function({indexedDB:e,IDBKeyRange:n}){return Tr(e)?Promise.resolve(e.databases()).then(i=>i.map(r=>r.name).filter(r=>r!==An)):wr(e,n).toCollection().primaryKeys()}(ce.dependencies).then(t)}catch{return vt(new st.MissingAPI)}},defineClass:()=>function(t){Rt(this,t)},ignoreTransaction:t=>nt.trans?be(nt.transless,t):t(),vip:Ir,async:function(t){return function(){try{var e=Rr(t.apply(this,arguments));return e&&typeof e.then=="function"?e:X.resolve(e)}catch(n){return vt(n)}}},spawn:function(t,e,n){try{var i=Rr(t.apply(n,e||[]));return i&&typeof i.then=="function"?i:X.resolve(i)}catch(r){return vt(r)}},currentTransaction:{get:()=>nt.trans||null},waitFor:function(t,e){const n=X.resolve(typeof t=="function"?ce.ignoreTransaction(t):t).timeout(e||6e4);return nt.trans?nt.trans.waitFor(n):n},Promise:X,debug:{get:()=>Dt,set:t=>{ii(t,t==="dexie"?()=>!0:wi)}},derive:pe,extend:Rt,props:de,override:Xr,Events:Ue,on:te,liveQuery:fo,extendObservabilitySet:Ui,getByKeyPath:zt,setByKeyPath:Ct,delByKeyPath:function(t,e){typeof e=="string"?Ct(t,e,void 0):"length"in e&&[].map.call(e,function(n){Ct(t,n,void 0)})},shallowClone:ei,deepClone:ke,getObjectDiff:Lr,cmp:Lt,asap:Qr,minKey:lr,addons:[],connections:Me,errnames:Vn,dependencies:kr,semVer:Ei,version:Ei.split(".").map(t=>parseInt(t)).reduce((t,e,n)=>t+e/Math.pow(10,2*n))}),ce.maxKey=Ke(ce.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(te(je,t=>{if(!Wt){let e;En?(e=document.createEvent("CustomEvent"),e.initCustomEvent(Qt,!0,!0,t)):e=new CustomEvent(Qt,{detail:t}),Wt=!0,dispatchEvent(e),Wt=!1}}),addEventListener(Qt,({detail:t})=>{Wt||kn(t)}));let Wt=!1;if(typeof BroadcastChannel<"u"){const t=new BroadcastChannel(Qt);typeof t.unref=="function"&&t.unref(),te(je,e=>{Wt||t.postMessage(e)}),t.onmessage=e=>{e.data&&kn(e.data)}}else if(typeof self<"u"&&typeof navigator<"u"){te(je,e=>{try{Wt||(typeof localStorage<"u"&&localStorage.setItem(Qt,JSON.stringify({trig:Math.random(),changedParts:e})),typeof self.clients=="object"&&[...self.clients.matchAll({includeUncontrolled:!0})].forEach(n=>n.postMessage({type:Qt,changedParts:e})))}catch{}}),typeof addEventListener<"u"&&addEventListener("storage",e=>{if(e.key===Qt){const n=JSON.parse(e.newValue);n&&kn(n.changedParts)}});const t=self.document&&navigator.serviceWorker;t&&t.addEventListener("message",function({data:e}){e&&e.type===Qt&&kn(e.changedParts)})}X.rejectionMapper=function(t,e){if(!t||t instanceof me||t instanceof TypeError||t instanceof SyntaxError||!t.name||!ui[t.name])return t;var n=new ui[t.name](e||t.message,t);return"stack"in t&&Ut(n,"stack",{get:function(){return this.inner.stack}}),n},ii(Dt,wi);const ee="z0, z1, z2, z3, z4, z5, z6, z7, z8, z9, z10",he="z0_, z1_, z2_, z3_, z4_, z5_, z6_, z7_, z8_, z9_, z10_",zi=.05,Nr={resources:"resources",projects:"projects"},Gi="Spatialec",po=Gi+"_Resources",_o=Gi+"_Projects";var H;(function(t){t[t.BACKSPACE=8]="BACKSPACE",t[t.FORM_FEED=12]="FORM_FEED",t[t.NEWLINE=10]="NEWLINE",t[t.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",t[t.TAB=9]="TAB",t[t.SPACE=32]="SPACE",t[t.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",t[t.QUOTATION_MARK=34]="QUOTATION_MARK",t[t.NUMBER_SIGN=35]="NUMBER_SIGN",t[t.DOLLAR_SIGN=36]="DOLLAR_SIGN",t[t.PERCENT_SIGN=37]="PERCENT_SIGN",t[t.AMPERSAND=38]="AMPERSAND",t[t.APOSTROPHE=39]="APOSTROPHE",t[t.LEFT_PARENTHESIS=40]="LEFT_PARENTHESIS",t[t.RIGHT_PARENTHESIS=41]="RIGHT_PARENTHESIS",t[t.ASTERISK=42]="ASTERISK",t[t.PLUS_SIGN=43]="PLUS_SIGN",t[t.COMMA=44]="COMMA",t[t.HYPHEN_MINUS=45]="HYPHEN_MINUS",t[t.FULL_STOP=46]="FULL_STOP",t[t.SOLIDUS=47]="SOLIDUS",t[t.DIGIT_ZERO=48]="DIGIT_ZERO",t[t.DIGIT_ONE=49]="DIGIT_ONE",t[t.DIGIT_TWO=50]="DIGIT_TWO",t[t.DIGIT_THREE=51]="DIGIT_THREE",t[t.DIGIT_FOUR=52]="DIGIT_FOUR",t[t.DIGIT_FIVE=53]="DIGIT_FIVE",t[t.DIGIT_SIX=54]="DIGIT_SIX",t[t.DIGIT_SEVEN=55]="DIGIT_SEVEN",t[t.DIGIT_EIGHT=56]="DIGIT_EIGHT",t[t.DIGIT_NINE=57]="DIGIT_NINE",t[t.COLON=58]="COLON",t[t.SEMICOLON=59]="SEMICOLON",t[t.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",t[t.EQUALS_SIGN=61]="EQUALS_SIGN",t[t.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",t[t.QUESTION_MARK=63]="QUESTION_MARK",t[t.COMMERCIAL_AT=64]="COMMERCIAL_AT",t[t.LATIN_CAPITAL_LETTER_A=65]="LATIN_CAPITAL_LETTER_A",t[t.LATIN_CAPITAL_LETTER_B=66]="LATIN_CAPITAL_LETTER_B",t[t.LATIN_CAPITAL_LETTER_C=67]="LATIN_CAPITAL_LETTER_C",t[t.LATIN_CAPITAL_LETTER_D=68]="LATIN_CAPITAL_LETTER_D",t[t.LATIN_CAPITAL_LETTER_E=69]="LATIN_CAPITAL_LETTER_E",t[t.LATIN_CAPITAL_LETTER_F=70]="LATIN_CAPITAL_LETTER_F",t[t.LATIN_CAPITAL_LETTER_G=71]="LATIN_CAPITAL_LETTER_G",t[t.LATIN_CAPITAL_LETTER_H=72]="LATIN_CAPITAL_LETTER_H",t[t.LATIN_CAPITAL_LETTER_I=73]="LATIN_CAPITAL_LETTER_I",t[t.LATIN_CAPITAL_LETTER_J=74]="LATIN_CAPITAL_LETTER_J",t[t.LATIN_CAPITAL_LETTER_K=75]="LATIN_CAPITAL_LETTER_K",t[t.LATIN_CAPITAL_LETTER_L=76]="LATIN_CAPITAL_LETTER_L",t[t.LATIN_CAPITAL_LETTER_M=77]="LATIN_CAPITAL_LETTER_M",t[t.LATIN_CAPITAL_LETTER_N=78]="LATIN_CAPITAL_LETTER_N",t[t.LATIN_CAPITAL_LETTER_O=79]="LATIN_CAPITAL_LETTER_O",t[t.LATIN_CAPITAL_LETTER_P=80]="LATIN_CAPITAL_LETTER_P",t[t.LATIN_CAPITAL_LETTER_Q=81]="LATIN_CAPITAL_LETTER_Q",t[t.LATIN_CAPITAL_LETTER_R=82]="LATIN_CAPITAL_LETTER_R",t[t.LATIN_CAPITAL_LETTER_S=83]="LATIN_CAPITAL_LETTER_S",t[t.LATIN_CAPITAL_LETTER_T=84]="LATIN_CAPITAL_LETTER_T",t[t.LATIN_CAPITAL_LETTER_U=85]="LATIN_CAPITAL_LETTER_U",t[t.LATIN_CAPITAL_LETTER_V=86]="LATIN_CAPITAL_LETTER_V",t[t.LATIN_CAPITAL_LETTER_W=87]="LATIN_CAPITAL_LETTER_W",t[t.LATIN_CAPITAL_LETTER_X=88]="LATIN_CAPITAL_LETTER_X",t[t.LATIN_CAPITAL_LETTER_Y=89]="LATIN_CAPITAL_LETTER_Y",t[t.LATIN_CAPITAL_LETTER_Z=90]="LATIN_CAPITAL_LETTER_Z",t[t.LEFT_SQUARE_BRACKET=91]="LEFT_SQUARE_BRACKET",t[t.REVERSE_SOLIDUS=92]="REVERSE_SOLIDUS",t[t.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",t[t.CIRCUMFLEX_ACCENT=94]="CIRCUMFLEX_ACCENT",t[t.LOW_LINE=95]="LOW_LINE",t[t.GRAVE_ACCENT=96]="GRAVE_ACCENT",t[t.LATIN_SMALL_LETTER_A=97]="LATIN_SMALL_LETTER_A",t[t.LATIN_SMALL_LETTER_B=98]="LATIN_SMALL_LETTER_B",t[t.LATIN_SMALL_LETTER_C=99]="LATIN_SMALL_LETTER_C",t[t.LATIN_SMALL_LETTER_D=100]="LATIN_SMALL_LETTER_D",t[t.LATIN_SMALL_LETTER_E=101]="LATIN_SMALL_LETTER_E",t[t.LATIN_SMALL_LETTER_F=102]="LATIN_SMALL_LETTER_F",t[t.LATIN_SMALL_LETTER_G=103]="LATIN_SMALL_LETTER_G",t[t.LATIN_SMALL_LETTER_H=104]="LATIN_SMALL_LETTER_H",t[t.LATIN_SMALL_LETTER_I=105]="LATIN_SMALL_LETTER_I",t[t.LATIN_SMALL_LETTER_J=106]="LATIN_SMALL_LETTER_J",t[t.LATIN_SMALL_LETTER_K=107]="LATIN_SMALL_LETTER_K",t[t.LATIN_SMALL_LETTER_L=108]="LATIN_SMALL_LETTER_L",t[t.LATIN_SMALL_LETTER_M=109]="LATIN_SMALL_LETTER_M",t[t.LATIN_SMALL_LETTER_N=110]="LATIN_SMALL_LETTER_N",t[t.LATIN_SMALL_LETTER_O=111]="LATIN_SMALL_LETTER_O",t[t.LATIN_SMALL_LETTER_P=112]="LATIN_SMALL_LETTER_P",t[t.LATIN_SMALL_LETTER_Q=113]="LATIN_SMALL_LETTER_Q",t[t.LATIN_SMALL_LETTER_R=114]="LATIN_SMALL_LETTER_R",t[t.LATIN_SMALL_LETTER_S=115]="LATIN_SMALL_LETTER_S",t[t.LATIN_SMALL_LETTER_T=116]="LATIN_SMALL_LETTER_T",t[t.LATIN_SMALL_LETTER_U=117]="LATIN_SMALL_LETTER_U",t[t.LATIN_SMALL_LETTER_V=118]="LATIN_SMALL_LETTER_V",t[t.LATIN_SMALL_LETTER_W=119]="LATIN_SMALL_LETTER_W",t[t.LATIN_SMALL_LETTER_X=120]="LATIN_SMALL_LETTER_X",t[t.LATIN_SMALL_LETTER_Y=121]="LATIN_SMALL_LETTER_Y",t[t.LATIN_SMALL_LETTER_Z=122]="LATIN_SMALL_LETTER_Z",t[t.LEFT_CURLY_BRACKET=123]="LEFT_CURLY_BRACKET",t[t.VERTICAL_LINE=124]="VERTICAL_LINE",t[t.RIGHT_CURLY_BRACKET=125]="RIGHT_CURLY_BRACKET",t[t.TILDE=126]="TILDE"})(H||(H={}));const mo={[H.QUOTATION_MARK]:H.QUOTATION_MARK,[H.REVERSE_SOLIDUS]:H.REVERSE_SOLIDUS,[H.SOLIDUS]:H.SOLIDUS,[H.LATIN_SMALL_LETTER_B]:H.BACKSPACE,[H.LATIN_SMALL_LETTER_F]:H.FORM_FEED,[H.LATIN_SMALL_LETTER_N]:H.NEWLINE,[H.LATIN_SMALL_LETTER_R]:H.CARRIAGE_RETURN,[H.LATIN_SMALL_LETTER_T]:H.TAB};class ji{constructor(){this.decoder=new TextDecoder("utf-8"),this.strings=[],this.byteLength=0}appendChar(e){this.strings.push(String.fromCharCode(e)),this.byteLength+=1}appendBuf(e,n=0,i=e.length){this.strings.push(this.decoder.decode(e.subarray(n,i))),this.byteLength+=i-n}reset(){this.strings=[],this.byteLength=0}toString(){return this.strings.join("")}}class Ki{constructor(e){this.decoder=new TextDecoder("utf-8"),this.bufferOffset=0,this.string="",this.byteLength=0,this.buffer=new Uint8Array(e)}appendChar(e){this.bufferOffset>=this.buffer.length&&this.flushStringBuffer(),this.buffer[this.bufferOffset++]=e,this.byteLength+=1}appendBuf(e,n=0,i=e.length){const r=i-n;this.bufferOffset+r>this.buffer.length&&this.flushStringBuffer(),this.buffer.set(e.subarray(n,i),this.bufferOffset),this.bufferOffset+=r,this.byteLength+=r}flushStringBuffer(){this.string+=this.decoder.decode(this.buffer.subarray(0,this.bufferOffset)),this.bufferOffset=0}reset(){this.string="",this.bufferOffset=0,this.byteLength=0}toString(){return this.flushStringBuffer(),this.string}}var Cr;(function(t){t[t.LEFT_BRACE=0]="LEFT_BRACE",t[t.RIGHT_BRACE=1]="RIGHT_BRACE",t[t.LEFT_BRACKET=2]="LEFT_BRACKET",t[t.RIGHT_BRACKET=3]="RIGHT_BRACKET",t[t.COLON=4]="COLON",t[t.COMMA=5]="COMMA",t[t.TRUE=6]="TRUE",t[t.FALSE=7]="FALSE",t[t.NULL=8]="NULL",t[t.STRING=9]="STRING",t[t.NUMBER=10]="NUMBER",t[t.SEPARATOR=11]="SEPARATOR"})(Cr||(Cr={}));var ot=Cr,j;(function(t){t[t.START=0]="START",t[t.ENDED=1]="ENDED",t[t.ERROR=2]="ERROR",t[t.TRUE1=3]="TRUE1",t[t.TRUE2=4]="TRUE2",t[t.TRUE3=5]="TRUE3",t[t.FALSE1=6]="FALSE1",t[t.FALSE2=7]="FALSE2",t[t.FALSE3=8]="FALSE3",t[t.FALSE4=9]="FALSE4",t[t.NULL1=10]="NULL1",t[t.NULL2=11]="NULL2",t[t.NULL3=12]="NULL3",t[t.STRING_DEFAULT=13]="STRING_DEFAULT",t[t.STRING_AFTER_BACKSLASH=14]="STRING_AFTER_BACKSLASH",t[t.STRING_UNICODE_DIGIT_1=15]="STRING_UNICODE_DIGIT_1",t[t.STRING_UNICODE_DIGIT_2=16]="STRING_UNICODE_DIGIT_2",t[t.STRING_UNICODE_DIGIT_3=17]="STRING_UNICODE_DIGIT_3",t[t.STRING_UNICODE_DIGIT_4=18]="STRING_UNICODE_DIGIT_4",t[t.STRING_INCOMPLETE_CHAR=19]="STRING_INCOMPLETE_CHAR",t[t.NUMBER_AFTER_INITIAL_MINUS=20]="NUMBER_AFTER_INITIAL_MINUS",t[t.NUMBER_AFTER_INITIAL_ZERO=21]="NUMBER_AFTER_INITIAL_ZERO",t[t.NUMBER_AFTER_INITIAL_NON_ZERO=22]="NUMBER_AFTER_INITIAL_NON_ZERO",t[t.NUMBER_AFTER_FULL_STOP=23]="NUMBER_AFTER_FULL_STOP",t[t.NUMBER_AFTER_DECIMAL=24]="NUMBER_AFTER_DECIMAL",t[t.NUMBER_AFTER_E=25]="NUMBER_AFTER_E",t[t.NUMBER_AFTER_E_AND_SIGN=26]="NUMBER_AFTER_E_AND_SIGN",t[t.NUMBER_AFTER_E_AND_DIGIT=27]="NUMBER_AFTER_E_AND_DIGIT",t[t.SEPARATOR=28]="SEPARATOR",t[t.BOM_OR_START=29]="BOM_OR_START",t[t.BOM=30]="BOM"})(j||(j={}));function Zi(t){return["START","ENDED","ERROR","TRUE1","TRUE2","TRUE3","FALSE1","FALSE2","FALSE3","FALSE4","NULL1","NULL2","NULL3","STRING_DEFAULT","STRING_AFTER_BACKSLASH","STRING_UNICODE_DIGIT_1","STRING_UNICODE_DIGIT_2","STRING_UNICODE_DIGIT_3","STRING_UNICODE_DIGIT_4","STRING_INCOMPLETE_CHAR","NUMBER_AFTER_INITIAL_MINUS","NUMBER_AFTER_INITIAL_ZERO","NUMBER_AFTER_INITIAL_NON_ZERO","NUMBER_AFTER_FULL_STOP","NUMBER_AFTER_DECIMAL","NUMBER_AFTER_E","NUMBER_AFTER_E_AND_SIGN","NUMBER_AFTER_E_AND_DIGIT","SEPARATOR","BOM_OR_START","BOM"][t]}const go={stringBufferSize:0,numberBufferSize:0,separator:void 0,emitPartialTokens:!1};class He extends Error{constructor(e){super(e),Object.setPrototypeOf(this,He.prototype)}}class Wi{constructor(e){this.state=j.BOM_OR_START,this.bomIndex=0,this.separatorIndex=0,this.bytes_remaining=0,this.bytes_in_sequence=0,this.char_split_buffer=new Uint8Array(4),this.encoder=new TextEncoder,this.offset=-1,e=Object.assign(Object.assign({},go),e),this.emitPartialTokens=e.emitPartialTokens===!0,this.bufferedString=e.stringBufferSize&&e.stringBufferSize>4?new Ki(e.stringBufferSize):new ji,this.bufferedNumber=e.numberBufferSize&&e.numberBufferSize>0?new Ki(e.numberBufferSize):new ji,this.separator=e.separator,this.separatorBytes=e.separator?this.encoder.encode(e.separator):void 0}get isEnded(){return this.state===j.ENDED}write(e){try{let n;if(e instanceof Uint8Array)n=e;else if(typeof e=="string")n=this.encoder.encode(e);else if(Array.isArray(e))n=Uint8Array.from(e);else if(ArrayBuffer.isView(e))n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength);else throw new TypeError("Unexpected type. The `write` function only accepts Arrays, TypedArrays and Strings.");for(let i=0;i<n.length;i+=1){const r=n[i];switch(this.state){case j.BOM_OR_START:if(e instanceof Uint8Array&&r===239){this.bom=[239,187,191],this.bomIndex+=1,this.state=j.BOM;continue}if(e instanceof Uint16Array){if(r===254){this.bom=[254,255],this.bomIndex+=1,this.state=j.BOM;continue}if(r===255){this.bom=[255,254],this.bomIndex+=1,this.state=j.BOM;continue}}if(e instanceof Uint32Array){if(r===0){this.bom=[0,0,254,255],this.bomIndex+=1,this.state=j.BOM;continue}if(r===255){this.bom=[255,254,0,0],this.bomIndex+=1,this.state=j.BOM;continue}}case j.START:if(this.offset+=1,this.separatorBytes&&r===this.separatorBytes[0]){if(this.separatorBytes.length===1){this.state=j.START,this.onToken({token:ot.SEPARATOR,value:this.separator,offset:this.offset+this.separatorBytes.length-1});continue}this.state=j.SEPARATOR;continue}if(r===H.SPACE||r===H.NEWLINE||r===H.CARRIAGE_RETURN||r===H.TAB)continue;if(r===H.LEFT_CURLY_BRACKET){this.onToken({token:ot.LEFT_BRACE,value:"{",offset:this.offset});continue}if(r===H.RIGHT_CURLY_BRACKET){this.onToken({token:ot.RIGHT_BRACE,value:"}",offset:this.offset});continue}if(r===H.LEFT_SQUARE_BRACKET){this.onToken({token:ot.LEFT_BRACKET,value:"[",offset:this.offset});continue}if(r===H.RIGHT_SQUARE_BRACKET){this.onToken({token:ot.RIGHT_BRACKET,value:"]",offset:this.offset});continue}if(r===H.COLON){this.onToken({token:ot.COLON,value:":",offset:this.offset});continue}if(r===H.COMMA){this.onToken({token:ot.COMMA,value:",",offset:this.offset});continue}if(r===H.LATIN_SMALL_LETTER_T){this.state=j.TRUE1;continue}if(r===H.LATIN_SMALL_LETTER_F){this.state=j.FALSE1;continue}if(r===H.LATIN_SMALL_LETTER_N){this.state=j.NULL1;continue}if(r===H.QUOTATION_MARK){this.bufferedString.reset(),this.state=j.STRING_DEFAULT;continue}if(r>=H.DIGIT_ONE&&r<=H.DIGIT_NINE){this.bufferedNumber.reset(),this.bufferedNumber.appendChar(r),this.state=j.NUMBER_AFTER_INITIAL_NON_ZERO;continue}if(r===H.DIGIT_ZERO){this.bufferedNumber.reset(),this.bufferedNumber.appendChar(r),this.state=j.NUMBER_AFTER_INITIAL_ZERO;continue}if(r===H.HYPHEN_MINUS){this.bufferedNumber.reset(),this.bufferedNumber.appendChar(r),this.state=j.NUMBER_AFTER_INITIAL_MINUS;continue}break;case j.STRING_DEFAULT:if(r===H.QUOTATION_MARK){const o=this.bufferedString.toString();this.state=j.START,this.onToken({token:ot.STRING,value:o,offset:this.offset}),this.offset+=this.bufferedString.byteLength+1;continue}if(r===H.REVERSE_SOLIDUS){this.state=j.STRING_AFTER_BACKSLASH;continue}if(r>=128){if(r>=194&&r<=223?this.bytes_in_sequence=2:r<=239?this.bytes_in_sequence=3:this.bytes_in_sequence=4,this.bytes_in_sequence<=n.length-i){this.bufferedString.appendBuf(n,i,i+this.bytes_in_sequence),i+=this.bytes_in_sequence-1;continue}this.bytes_remaining=i+this.bytes_in_sequence-n.length,this.char_split_buffer.set(n.subarray(i)),i=n.length-1,this.state=j.STRING_INCOMPLETE_CHAR;continue}if(r>=H.SPACE){this.bufferedString.appendChar(r);continue}break;case j.STRING_INCOMPLETE_CHAR:this.char_split_buffer.set(n.subarray(i,i+this.bytes_remaining),this.bytes_in_sequence-this.bytes_remaining),this.bufferedString.appendBuf(this.char_split_buffer,0,this.bytes_in_sequence),i=this.bytes_remaining-1,this.state=j.STRING_DEFAULT;continue;case j.STRING_AFTER_BACKSLASH:const s=mo[r];if(s){this.bufferedString.appendChar(s),this.state=j.STRING_DEFAULT;continue}if(r===H.LATIN_SMALL_LETTER_U){this.unicode="",this.state=j.STRING_UNICODE_DIGIT_1;continue}break;case j.STRING_UNICODE_DIGIT_1:case j.STRING_UNICODE_DIGIT_2:case j.STRING_UNICODE_DIGIT_3:if(r>=H.DIGIT_ZERO&&r<=H.DIGIT_NINE||r>=H.LATIN_CAPITAL_LETTER_A&&r<=H.LATIN_CAPITAL_LETTER_F||r>=H.LATIN_SMALL_LETTER_A&&r<=H.LATIN_SMALL_LETTER_F){this.unicode+=String.fromCharCode(r),this.state+=1;continue}break;case j.STRING_UNICODE_DIGIT_4:if(r>=H.DIGIT_ZERO&&r<=H.DIGIT_NINE||r>=H.LATIN_CAPITAL_LETTER_A&&r<=H.LATIN_CAPITAL_LETTER_F||r>=H.LATIN_SMALL_LETTER_A&&r<=H.LATIN_SMALL_LETTER_F){const o=parseInt(this.unicode+String.fromCharCode(r),16);this.highSurrogate===void 0?o>=55296&&o<=56319?this.highSurrogate=o:this.bufferedString.appendBuf(this.encoder.encode(String.fromCharCode(o))):(o>=56320&&o<=57343?this.bufferedString.appendBuf(this.encoder.encode(String.fromCharCode(this.highSurrogate,o))):this.bufferedString.appendBuf(this.encoder.encode(String.fromCharCode(this.highSurrogate))),this.highSurrogate=void 0),this.state=j.STRING_DEFAULT;continue}break;case j.NUMBER_AFTER_INITIAL_MINUS:if(r===H.DIGIT_ZERO){this.bufferedNumber.appendChar(r),this.state=j.NUMBER_AFTER_INITIAL_ZERO;continue}if(r>=H.DIGIT_ONE&&r<=H.DIGIT_NINE){this.bufferedNumber.appendChar(r),this.state=j.NUMBER_AFTER_INITIAL_NON_ZERO;continue}break;case j.NUMBER_AFTER_INITIAL_ZERO:if(r===H.FULL_STOP){this.bufferedNumber.appendChar(r),this.state=j.NUMBER_AFTER_FULL_STOP;continue}if(r===H.LATIN_SMALL_LETTER_E||r===H.LATIN_CAPITAL_LETTER_E){this.bufferedNumber.appendChar(r),this.state=j.NUMBER_AFTER_E;continue}i-=1,this.state=j.START,this.emitNumber();continue;case j.NUMBER_AFTER_INITIAL_NON_ZERO:if(r>=H.DIGIT_ZERO&&r<=H.DIGIT_NINE){this.bufferedNumber.appendChar(r);continue}if(r===H.FULL_STOP){this.bufferedNumber.appendChar(r),this.state=j.NUMBER_AFTER_FULL_STOP;continue}if(r===H.LATIN_SMALL_LETTER_E||r===H.LATIN_CAPITAL_LETTER_E){this.bufferedNumber.appendChar(r),this.state=j.NUMBER_AFTER_E;continue}i-=1,this.state=j.START,this.emitNumber();continue;case j.NUMBER_AFTER_FULL_STOP:if(r>=H.DIGIT_ZERO&&r<=H.DIGIT_NINE){this.bufferedNumber.appendChar(r),this.state=j.NUMBER_AFTER_DECIMAL;continue}break;case j.NUMBER_AFTER_DECIMAL:if(r>=H.DIGIT_ZERO&&r<=H.DIGIT_NINE){this.bufferedNumber.appendChar(r);continue}if(r===H.LATIN_SMALL_LETTER_E||r===H.LATIN_CAPITAL_LETTER_E){this.bufferedNumber.appendChar(r),this.state=j.NUMBER_AFTER_E;continue}i-=1,this.state=j.START,this.emitNumber();continue;case j.NUMBER_AFTER_E:if(r===H.PLUS_SIGN||r===H.HYPHEN_MINUS){this.bufferedNumber.appendChar(r),this.state=j.NUMBER_AFTER_E_AND_SIGN;continue}case j.NUMBER_AFTER_E_AND_SIGN:if(r>=H.DIGIT_ZERO&&r<=H.DIGIT_NINE){this.bufferedNumber.appendChar(r),this.state=j.NUMBER_AFTER_E_AND_DIGIT;continue}break;case j.NUMBER_AFTER_E_AND_DIGIT:if(r>=H.DIGIT_ZERO&&r<=H.DIGIT_NINE){this.bufferedNumber.appendChar(r);continue}i-=1,this.state=j.START,this.emitNumber();continue;case j.TRUE1:if(r===H.LATIN_SMALL_LETTER_R){this.state=j.TRUE2;continue}break;case j.TRUE2:if(r===H.LATIN_SMALL_LETTER_U){this.state=j.TRUE3;continue}break;case j.TRUE3:if(r===H.LATIN_SMALL_LETTER_E){this.state=j.START,this.onToken({token:ot.TRUE,value:!0,offset:this.offset}),this.offset+=3;continue}break;case j.FALSE1:if(r===H.LATIN_SMALL_LETTER_A){this.state=j.FALSE2;continue}break;case j.FALSE2:if(r===H.LATIN_SMALL_LETTER_L){this.state=j.FALSE3;continue}break;case j.FALSE3:if(r===H.LATIN_SMALL_LETTER_S){this.state=j.FALSE4;continue}break;case j.FALSE4:if(r===H.LATIN_SMALL_LETTER_E){this.state=j.START,this.onToken({token:ot.FALSE,value:!1,offset:this.offset}),this.offset+=4;continue}break;case j.NULL1:if(r===H.LATIN_SMALL_LETTER_U){this.state=j.NULL2;continue}break;case j.NULL2:if(r===H.LATIN_SMALL_LETTER_L){this.state=j.NULL3;continue}break;case j.NULL3:if(r===H.LATIN_SMALL_LETTER_L){this.state=j.START,this.onToken({token:ot.NULL,value:null,offset:this.offset}),this.offset+=3;continue}break;case j.SEPARATOR:if(this.separatorIndex+=1,!this.separatorBytes||r!==this.separatorBytes[this.separatorIndex])break;this.separatorIndex===this.separatorBytes.length-1&&(this.state=j.START,this.onToken({token:ot.SEPARATOR,value:this.separator,offset:this.offset+this.separatorIndex}),this.separatorIndex=0);continue;case j.BOM:if(r===this.bom[this.bomIndex]){if(this.bomIndex===this.bom.length-1){this.state=j.START,this.bom=void 0,this.bomIndex=0;continue}this.bomIndex+=1;continue}break;case j.ENDED:if(r===H.SPACE||r===H.NEWLINE||r===H.CARRIAGE_RETURN||r===H.TAB)continue}throw new He(`Unexpected "${String.fromCharCode(r)}" at position "${i}" in state ${Zi(this.state)}`)}if(this.emitPartialTokens)switch(this.state){case j.TRUE1:case j.TRUE2:case j.TRUE3:this.onToken({token:ot.TRUE,value:!0,offset:this.offset,partial:!0});break;case j.FALSE1:case j.FALSE2:case j.FALSE3:case j.FALSE4:this.onToken({token:ot.FALSE,value:!1,offset:this.offset,partial:!0});break;case j.NULL1:case j.NULL2:case j.NULL3:this.onToken({token:ot.NULL,value:null,offset:this.offset,partial:!0});break;case j.STRING_DEFAULT:{const i=this.bufferedString.toString();this.onToken({token:ot.STRING,value:i,offset:this.offset,partial:!0});break}case j.NUMBER_AFTER_INITIAL_ZERO:case j.NUMBER_AFTER_INITIAL_NON_ZERO:case j.NUMBER_AFTER_DECIMAL:case j.NUMBER_AFTER_E_AND_DIGIT:try{this.onToken({token:ot.NUMBER,value:this.parseNumber(this.bufferedNumber.toString()),offset:this.offset,partial:!0})}catch{}}}catch(n){this.error(n)}}emitNumber(){this.onToken({token:ot.NUMBER,value:this.parseNumber(this.bufferedNumber.toString()),offset:this.offset}),this.offset+=this.bufferedNumber.byteLength-1}parseNumber(e){return Number(e)}error(e){this.state!==j.ENDED&&(this.state=j.ERROR),this.onError(e)}end(){switch(this.state){case j.NUMBER_AFTER_INITIAL_ZERO:case j.NUMBER_AFTER_INITIAL_NON_ZERO:case j.NUMBER_AFTER_DECIMAL:case j.NUMBER_AFTER_E_AND_DIGIT:this.state=j.ENDED,this.emitNumber(),this.onEnd();break;case j.BOM_OR_START:case j.START:case j.ERROR:case j.SEPARATOR:this.state=j.ENDED,this.onEnd();break;default:this.error(new He(`Tokenizer ended in the middle of a token (state: ${Zi(this.state)}). Either not all the data was received or the data was invalid.`))}}onToken(e){throw new He(`Can't emit tokens before the "onToken" callback has been set up.`)}onError(e){throw e}onEnd(){}}var St;(function(t){t[t.OBJECT=0]="OBJECT",t[t.ARRAY=1]="ARRAY"})(St||(St={}));var ht;(function(t){t[t.VALUE=0]="VALUE",t[t.KEY=1]="KEY",t[t.COLON=2]="COLON",t[t.COMMA=3]="COMMA",t[t.ENDED=4]="ENDED",t[t.ERROR=5]="ERROR",t[t.SEPARATOR=6]="SEPARATOR"})(ht||(ht={}));function Hi(t){return["VALUE","KEY","COLON","COMMA","ENDED","ERROR","SEPARATOR"][t]}const yo={paths:void 0,keepStack:!0,separator:void 0,emitPartialValues:!1};class Ae extends Error{constructor(e){super(e),Object.setPrototypeOf(this,Ae.prototype)}}class $i{constructor(e){this.state=ht.VALUE,this.mode=void 0,this.key=void 0,this.value=void 0,this.stack=[],e=Object.assign(Object.assign({},yo),e),e.paths&&(this.paths=e.paths.map(n=>{if(n===void 0||n==="$*")return;if(!n.startsWith("$"))throw new Ae(`Invalid selector "${n}". Should start with "$".`);const i=n.split(".").slice(1);if(i.includes(""))throw new Ae(`Invalid selector "${n}". ".." syntax not supported.`);return i})),this.keepStack=e.keepStack||!1,this.separator=e.separator,e.emitPartialValues||(this.emitPartial=()=>{})}shouldEmit(){return this.paths?this.paths.some(e=>{var n;if(e===void 0)return!0;if(e.length!==this.stack.length)return!1;for(let r=0;r<e.length-1;r++){const s=e[r],o=this.stack[r+1].key;if(s!=="*"&&s!==o)return!1}const i=e[e.length-1];return i==="*"?!0:i===((n=this.key)===null||n===void 0?void 0:n.toString())}):!0}push(){this.stack.push({key:this.key,value:this.value,mode:this.mode,emit:this.shouldEmit()})}pop(){const e=this.value;let n;({key:this.key,value:this.value,mode:this.mode,emit:n}=this.stack.pop()),this.state=this.mode!==void 0?ht.COMMA:ht.VALUE,this.emit(e,n)}emit(e,n){!this.keepStack&&this.value&&this.stack.every(i=>!i.emit)&&delete this.value[this.key],n&&this.onValue({value:e,key:this.key,parent:this.value,stack:this.stack}),this.stack.length===0&&(this.separator?this.state=ht.SEPARATOR:this.separator===void 0&&this.end())}emitPartial(e){if(this.shouldEmit()){if(this.state===ht.KEY){this.onValue({value:void 0,key:e,parent:this.value,stack:this.stack,partial:!0});return}this.onValue({value:e,key:this.key,parent:this.value,stack:this.stack,partial:!0})}}get isEnded(){return this.state===ht.ENDED}write({token:e,value:n,partial:i}){try{if(i){this.emitPartial(n);return}if(this.state===ht.VALUE){if(e===ot.STRING||e===ot.NUMBER||e===ot.TRUE||e===ot.FALSE||e===ot.NULL){this.mode===St.OBJECT?(this.value[this.key]=n,this.state=ht.COMMA):this.mode===St.ARRAY&&(this.value.push(n),this.state=ht.COMMA),this.emit(n,this.shouldEmit());return}if(e===ot.LEFT_BRACE){if(this.push(),this.mode===St.OBJECT)this.value=this.value[this.key]={};else if(this.mode===St.ARRAY){const r={};this.value.push(r),this.value=r}else this.value={};this.mode=St.OBJECT,this.state=ht.KEY,this.key=void 0,this.emitPartial();return}if(e===ot.LEFT_BRACKET){if(this.push(),this.mode===St.OBJECT)this.value=this.value[this.key]=[];else if(this.mode===St.ARRAY){const r=[];this.value.push(r),this.value=r}else this.value=[];this.mode=St.ARRAY,this.state=ht.VALUE,this.key=0,this.emitPartial();return}if(this.mode===St.ARRAY&&e===ot.RIGHT_BRACKET&&this.value.length===0){this.pop();return}}if(this.state===ht.KEY){if(e===ot.STRING){this.key=n,this.state=ht.COLON,this.emitPartial();return}if(e===ot.RIGHT_BRACE&&Object.keys(this.value).length===0){this.pop();return}}if(this.state===ht.COLON&&e===ot.COLON){this.state=ht.VALUE;return}if(this.state===ht.COMMA){if(e===ot.COMMA){if(this.mode===St.ARRAY){this.state=ht.VALUE,this.key+=1;return}if(this.mode===St.OBJECT){this.state=ht.KEY;return}}if(e===ot.RIGHT_BRACE&&this.mode===St.OBJECT||e===ot.RIGHT_BRACKET&&this.mode===St.ARRAY){this.pop();return}}if(this.state===ht.SEPARATOR&&e===ot.SEPARATOR&&n===this.separator){this.state=ht.VALUE;return}throw new Ae(`Unexpected ${ot[e]} (${JSON.stringify(n)}) in state ${Hi(this.state)}`)}catch(r){this.error(r)}}error(e){this.state!==ht.ENDED&&(this.state=ht.ERROR),this.onError(e)}end(){this.state!==ht.VALUE&&this.state!==ht.SEPARATOR||this.stack.length>0?this.error(new Error(`Parser ended in mid-parsing (state: ${Hi(this.state)}). Either not all the data was received or the data was invalid.`)):(this.state=ht.ENDED,this.onEnd())}onValue(e){throw new Ae(`Can't emit data before the "onValue" callback has been set up.`)}onError(e){throw e}onEnd(){}}class bo{constructor(e={}){this.tokenizer=new Wi(e),this.tokenParser=new $i(e),this.tokenizer.onToken=this.tokenParser.write.bind(this.tokenParser),this.tokenizer.onEnd=()=>{this.tokenParser.isEnded||this.tokenParser.end()},this.tokenParser.onError=this.tokenizer.error.bind(this.tokenizer),this.tokenParser.onEnd=()=>{this.tokenizer.isEnded||this.tokenizer.end()}}get isEnded(){return this.tokenizer.isEnded&&this.tokenParser.isEnded}write(e){this.tokenizer.write(e)}end(){this.tokenizer.end()}set onToken(e){this.tokenizer.onToken=n=>{e(n),this.tokenParser.write(n)}}set onValue(e){this.tokenParser.onValue=e}set onError(e){this.tokenizer.onError=e}set onEnd(e){this.tokenParser.onEnd=()=>{this.tokenizer.isEnded||this.tokenizer.end(),e.call(this.tokenParser)}}}function Vi(t){const{value:e,key:n,parent:i,stack:r,partial:s}=t;return{value:e,key:n,parent:qi(i),stack:qi(r),partial:s}}function qi(t){return typeof t!="object"||Array.isArray(t)&&t.filter(e=>e).length===0?t:JSON.parse(JSON.stringify(t))}class vo extends bo{constructor(e){super(e),this.onValue=n=>this.controller.enqueue(Vi(n)),this.onError=n=>this.controller.error(n),this.onEnd=()=>this.controller.terminate()}start(e){this.controller=e}transform(e){this.write(e)}flush(){this.end()}}class Yi extends TransformStream{constructor(e,n,i){const r=new vo(e);super(r,n,i)}}class Eo extends Wi{constructor(e){super(e),this.onToken=n=>this.controller.enqueue(n),this.onError=n=>this.controller.error(n),this.onEnd=()=>this.controller.terminate()}start(e){this.controller=e}transform(e){this.write(e)}flush(){this.end()}}class fa extends TransformStream{constructor(e,n,i){const r=new Eo(e);super(r,n,i)}}class Ao extends $i{constructor(e){super(e),this.onValue=n=>this.controller.enqueue(Vi(n)),this.onError=n=>this.controller.error(n),this.onEnd=()=>this.controller.terminate()}start(e){this.controller=e}transform(e){this.write(e)}flush(){this.end()}}class da extends TransformStream{constructor(e,n,i){const r=new Ao(e);super(r,n,i)}}function wo(t,e){const n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i}function To(t,e,n){let i=e[0],r=e[1],s=n[0]-i,o=n[1]-r;if(s!==0||o!==0){const a=((t[0]-i)*s+(t[1]-r)*o)/(s*s+o*o);a>1?(i=n[0],r=n[1]):a>0&&(i+=s*a,r+=o*a)}return s=t[0]-i,o=t[1]-r,s*s+o*o}function Io(t,e){let n=t[0];const i=[n];let r=null;for(let s=1,o=t.length;s<o;s++)r=t[s],wo(r,n)>e&&(i.push(r),n=r);return n!==r&&i.push(r),i}function Or(t,e,n,i,r){let s=i,o=0;for(let a=e+1;a<n;a++){const u=To(t[a],t[e],t[n]);u>s&&(o=a,s=u)}s>i&&(o-e>1&&Or(t,e,o,i,r),r.push(t[o]),n-o>1&&Or(t,o,n,i,r))}function Ro(t,e){const n=t.length-1,i=[t[0]];return Or(t,0,n,e,i),i.push(t[n]),i}function Lo(t,e,n){if(t.length<=2)return t;const i=e!==void 0?e*e:1;return t=n?t:Io(t,i),t=Ro(t,i),t}function ne(t,e=1e4){return Math.round((t[0]+180)*e)*(1e3*e)+Math.round((t[1]+90)*e)}function So(t,e){const n=[],i=t.map(o=>{const a=ne(o);return e.has(a)});let r=0,s=i[0];for(let o=1;o<=i.length;o++)(o===i.length||i[o]!==s)&&(n.push({isCached:s,startIndex:r,endIndex:o-1}),r=o,s=o<i.length?i[o]:!s);return n}function xo(t,e,n,i){let r=0,s=0;for(;r<e.length&&s<n.length;){const o=n[s],a=ne(o),u=e[r],f=ne(u);i.set(f,a),f===a?(r++,s++):r++}return i}const Ji=new Map;function Xi(t,e,n,i,r){return e.map((s,o)=>s.map((a,u)=>{const f=[];return So(a,r).forEach((_,d)=>{if(_.isCached)for(let l=_.startIndex;l<=_.endIndex;l++){const g=a[l],c=ne(g);r.get(c)===c&&f.push(g)}else{const l=a.slice(_.startIndex,_.endIndex+1),g=Lo(l,n,i);l.length>0&&g.length>0&&(ne(l[0])!==ne(g[0])&&g.unshift(l[0]),ne(l[l.length-1])!==ne(g[g.length-1])&&g.push(l[l.length-1])),f.push(...g),xo(t,l,g,r)}}),f}).filter(a=>a.length>2)).filter(s=>s.length>0)}function Qi(t){let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;for(const s of t)for(let o=0;o<s.length;o+=2){const a=s[o];for(const u of a){const f=u[0],h=u[1];f<e&&(e=f),f>n&&(n=f),h<i&&(i=h),h>r&&(r=h)}}return{topLeft:{lng:e,lat:r},bottomRight:{lng:n,lat:i}}}function $e(t){"@babel/helpers - typeof";return $e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$e(t)}function ko(t,e){if($e(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if($e(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function No(t){var e=ko(t,"string");return $e(e)=="symbol"?e:String(e)}function Ht(t,e,n){return e=No(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const Nn={x:0,y:1,z:2};function ts(t,e={}){const{start:n=0,end:i=t.length,plane:r="xy"}=e,s=e.size||2;let o=0;const a=Nn[r[0]],u=Nn[r[1]];for(let f=n,h=i-s;f<i;f+=s)o+=(t[f+a]-t[h+a])*(t[f+u]+t[h+u]),h=f;return o/2}function Co(t,e,n=2,i,r="xy"){const s=e&&e.length,o=s?e[0]*n:t.length;let a=es(t,0,o,n,!0,i&&i[0],r);const u=[];if(!a||a.next===a.prev)return u;let f,h,_,d,l,g,c;if(s&&(a=Fo(t,e,a,n,i,r)),t.length>80*n){d=h=t[0],l=_=t[1];for(let v=n;v<o;v+=n)g=t[v],c=t[v+1],g<d&&(d=g),c<l&&(l=c),g>h&&(h=g),c>_&&(_=c);f=Math.max(h-d,_-l),f=f!==0?32767/f:0}return Ve(a,u,n,d,l,f,0),u}function es(t,e,n,i,r,s,o){let a,u;s===void 0&&(s=ts(t,{start:e,end:n,size:i,plane:o}));let f=Nn[o[0]],h=Nn[o[1]];if(r===s<0)for(a=e;a<n;a+=i)u=is(a,t[a+f],t[a+h],u);else for(a=n-i;a>=e;a-=i)u=is(a,t[a+f],t[a+h],u);return u&&Cn(u,u.next)&&(Ye(u),u=u.next),u}function fe(t,e){if(!t)return t;e||(e=t);let n=t,i;do if(i=!1,!n.steiner&&(Cn(n,n.next)||_t(n.prev,n,n.next)===0)){if(Ye(n),n=e=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==e);return e}function Ve(t,e,n,i,r,s,o){if(!t)return;!o&&s&&jo(t,i,r,s);let a=t,u,f;for(;t.prev!==t.next;){if(u=t.prev,f=t.next,s?Po(t,i,r,s):Oo(t)){e.push(u.i/n|0),e.push(t.i/n|0),e.push(f.i/n|0),Ye(t),t=f.next,a=f.next;continue}if(t=f,t===a){o?o===1?(t=Do(fe(t),e,n),Ve(t,e,n,i,r,s,2)):o===2&&Bo(t,e,n,i,r,s):Ve(fe(t),e,n,i,r,s,1);break}}}function Oo(t){const e=t.prev,n=t,i=t.next;if(_t(e,n,i)>=0)return!1;const r=e.x,s=n.x,o=i.x,a=e.y,u=n.y,f=i.y,h=r<s?r<o?r:o:s<o?s:o,_=a<u?a<f?a:f:u<f?u:f,d=r>s?r>o?r:o:s>o?s:o,l=a>u?a>f?a:f:u>f?u:f;let g=i.next;for(;g!==e;){if(g.x>=h&&g.x<=d&&g.y>=_&&g.y<=l&&we(r,a,s,u,o,f,g.x,g.y)&&_t(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}function Po(t,e,n,i){const r=t.prev,s=t,o=t.next;if(_t(r,s,o)>=0)return!1;const a=r.x,u=s.x,f=o.x,h=r.y,_=s.y,d=o.y,l=a<u?a<f?a:f:u<f?u:f,g=h<_?h<d?h:d:_<d?_:d,c=a>u?a>f?a:f:u>f?u:f,v=h>_?h>d?h:d:_>d?_:d,m=Pr(l,g,e,n,i),b=Pr(c,v,e,n,i);let E=t.prevZ,A=t.nextZ;for(;E&&E.z>=m&&A&&A.z<=b;){if(E.x>=l&&E.x<=c&&E.y>=g&&E.y<=v&&E!==r&&E!==o&&we(a,h,u,_,f,d,E.x,E.y)&&_t(E.prev,E,E.next)>=0||(E=E.prevZ,A.x>=l&&A.x<=c&&A.y>=g&&A.y<=v&&A!==r&&A!==o&&we(a,h,u,_,f,d,A.x,A.y)&&_t(A.prev,A,A.next)>=0))return!1;A=A.nextZ}for(;E&&E.z>=m;){if(E.x>=l&&E.x<=c&&E.y>=g&&E.y<=v&&E!==r&&E!==o&&we(a,h,u,_,f,d,E.x,E.y)&&_t(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;A&&A.z<=b;){if(A.x>=l&&A.x<=c&&A.y>=g&&A.y<=v&&A!==r&&A!==o&&we(a,h,u,_,f,d,A.x,A.y)&&_t(A.prev,A,A.next)>=0)return!1;A=A.nextZ}return!0}function Do(t,e,n){let i=t;do{const r=i.prev,s=i.next.next;!Cn(r,s)&&ns(r,i,i.next,s)&&qe(r,s)&&qe(s,r)&&(e.push(r.i/n|0),e.push(i.i/n|0),e.push(s.i/n|0),Ye(i),Ye(i.next),i=t=s),i=i.next}while(i!==t);return fe(i)}function Bo(t,e,n,i,r,s){let o=t;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&Wo(o,a)){let u=rs(o,a);o=fe(o,o.next),u=fe(u,u.next),Ve(o,e,n,i,r,s,0),Ve(u,e,n,i,r,s,0);return}a=a.next}o=o.next}while(o!==t)}function Fo(t,e,n,i,r,s){const o=[];let a,u,f,h,_;for(a=0,u=e.length;a<u;a++)f=e[a]*i,h=a<u-1?e[a+1]*i:t.length,_=es(t,f,h,i,!1,r&&r[a+1],s),_===_.next&&(_.steiner=!0),o.push(Zo(_));for(o.sort(Mo),a=0;a<o.length;a++)n=Uo(o[a],n);return n}function Mo(t,e){return t.x-e.x}function Uo(t,e){const n=zo(t,e);if(!n)return e;const i=rs(n,t);return fe(i,i.next),fe(n,n.next)}function zo(t,e){let n=e;const i=t.x,r=t.y;let s=-1/0,o;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const d=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(d<=i&&d>s&&(s=d,o=n.x<n.next.x?n:n.next,d===i))return o}n=n.next}while(n!==e);if(!o)return null;const a=o,u=o.x,f=o.y;let h=1/0,_;n=o;do i>=n.x&&n.x>=u&&i!==n.x&&we(r<f?i:s,r,u,f,r<f?s:i,r,n.x,n.y)&&(_=Math.abs(r-n.y)/(i-n.x),qe(n,t)&&(_<h||_===h&&(n.x>o.x||n.x===o.x&&Go(o,n)))&&(o=n,h=_)),n=n.next;while(n!==a);return o}function Go(t,e){return _t(t.prev,t,e.prev)<0&&_t(e.next,t,t.next)<0}function jo(t,e,n,i){let r=t;do r.z===0&&(r.z=Pr(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,Ko(r)}function Ko(t){let e,n,i=1,r,s,o,a,u,f;do{for(s=t,t=null,f=null,r=0;s;){for(r++,a=s,o=0,n=0;n<i&&(o++,a=a.nextZ,!!a);n++);for(u=i;o>0||u>0&&a;)o!==0&&(u===0||!a||s.z<=a.z)?(e=s,s=s.nextZ,o--):(e=a,a=a.nextZ,u--),f?f.nextZ=e:t=e,e.prevZ=f,f=e;s=a}f.nextZ=null,i*=2}while(r>1);return t}function Pr(t,e,n,i,r){return t=(t-n)*r|0,e=(e-i)*r|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function Zo(t){let e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function we(t,e,n,i,r,s,o,a){return(r-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(i-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(r-o)*(i-a)}function Wo(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Ho(t,e)&&(qe(t,e)&&qe(e,t)&&$o(t,e)&&(_t(t.prev,t,e.prev)||_t(t,e.prev,e))||Cn(t,e)&&_t(t.prev,t,t.next)>0&&_t(e.prev,e,e.next)>0)}function _t(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Cn(t,e){return t.x===e.x&&t.y===e.y}function ns(t,e,n,i){const r=Pn(_t(t,e,n)),s=Pn(_t(t,e,i)),o=Pn(_t(n,i,t)),a=Pn(_t(n,i,e));return!!(r!==s&&o!==a||r===0&&On(t,n,e)||s===0&&On(t,i,e)||o===0&&On(n,t,i)||a===0&&On(n,e,i))}function On(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Pn(t){return t>0?1:t<0?-1:0}function Ho(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&ns(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function qe(t,e){return _t(t.prev,t,t.next)<0?_t(t,e,t.next)>=0&&_t(t,t.prev,e)>=0:_t(t,e,t.prev)<0||_t(t,t.next,e)<0}function $o(t,e){let n=t,i=!1;const r=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t);return i}function rs(t,e){const n=new Dr(t.i,t.x,t.y),i=new Dr(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function is(t,e,n,i){const r=new Dr(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Ye(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}class Dr{constructor(e,n,i){Ht(this,"i",void 0),Ht(this,"x",void 0),Ht(this,"y",void 0),Ht(this,"prev",null),Ht(this,"next",null),Ht(this,"z",0),Ht(this,"prevZ",null),Ht(this,"nextZ",null),Ht(this,"steiner",!1),this.i=e,this.x=n,this.y=i}}function Vo(t,e,n){const i=qo(t),r=Object.keys(i).filter(s=>i[s]!==Array);return Yo(t,{propArrayTypes:i,...e},{numericPropKeys:n&&n.numericPropKeys||r,PositionDataType:n?n.PositionDataType:Float32Array,triangulate:n?n.triangulate:!0})}function qo(t){const e={};for(const n of t)if(n.properties)for(const i in n.properties){const r=n.properties[i];e[i]=na(r,e[i])}return e}function Yo(t,e,n){const{pointPositionsCount:i,pointFeaturesCount:r,linePositionsCount:s,linePathsCount:o,lineFeaturesCount:a,polygonPositionsCount:u,polygonObjectsCount:f,polygonRingsCount:h,polygonFeaturesCount:_,propArrayTypes:d,coordLength:l}=e,{numericPropKeys:g=[],PositionDataType:c=Float32Array,triangulate:v=!0}=n,m=t[0]&&"id"in t[0],b=t.length>65535?Uint32Array:Uint16Array,E={type:"Point",positions:new c(i*l),globalFeatureIds:new b(i),featureIds:r>65535?new Uint32Array(i):new Uint16Array(i),numericProps:{},properties:[],fields:[]},A={type:"LineString",pathIndices:s>65535?new Uint32Array(o+1):new Uint16Array(o+1),positions:new c(s*l),globalFeatureIds:new b(s),featureIds:a>65535?new Uint32Array(s):new Uint16Array(s),numericProps:{},properties:[],fields:[]},T={type:"Polygon",polygonIndices:u>65535?new Uint32Array(f+1):new Uint16Array(f+1),primitivePolygonIndices:u>65535?new Uint32Array(h+1):new Uint16Array(h+1),positions:new c(u*l),globalFeatureIds:new b(u),featureIds:_>65535?new Uint32Array(u):new Uint16Array(u),numericProps:{},properties:[],fields:[]};v&&(T.triangles=[]);for(const S of[E,A,T])for(const N of g){const L=d[N];S.numericProps[N]=new L(S.positions.length/l)}A.pathIndices[o]=s,T.polygonIndices[f]=u,T.primitivePolygonIndices[h]=u;const x={pointPosition:0,pointFeature:0,linePosition:0,linePath:0,lineFeature:0,polygonPosition:0,polygonObject:0,polygonRing:0,polygonFeature:0,feature:0};for(const S of t){const N=S.geometry,L=S.properties||{};switch(N.type){case"Point":Jo(N,E,x,l,L),E.properties.push(Mr(L,g)),m&&E.fields.push({id:S.id}),x.pointFeature++;break;case"LineString":Xo(N,A,x,l,L),A.properties.push(Mr(L,g)),m&&A.fields.push({id:S.id}),x.lineFeature++;break;case"Polygon":Qo(N,T,x,l,L),T.properties.push(Mr(L,g)),m&&T.fields.push({id:S.id}),x.polygonFeature++;break;default:throw new Error("Invalid geometry type")}x.feature++}return ea(E,A,T,l)}function Jo(t,e,n,i,r){e.positions.set(t.data,n.pointPosition*i);const s=t.data.length/i;Fr(e,r,n.pointPosition,s),e.globalFeatureIds.fill(n.feature,n.pointPosition,n.pointPosition+s),e.featureIds.fill(n.pointFeature,n.pointPosition,n.pointPosition+s),n.pointPosition+=s}function Xo(t,e,n,i,r){e.positions.set(t.data,n.linePosition*i);const s=t.data.length/i;Fr(e,r,n.linePosition,s),e.globalFeatureIds.fill(n.feature,n.linePosition,n.linePosition+s),e.featureIds.fill(n.lineFeature,n.linePosition,n.linePosition+s);for(let o=0,a=t.indices.length;o<a;++o){const u=t.indices[o],f=o===a-1?t.data.length:t.indices[o+1];e.pathIndices[n.linePath++]=n.linePosition,n.linePosition+=(f-u)/i}}function Qo(t,e,n,i,r){e.positions.set(t.data,n.polygonPosition*i);const s=t.data.length/i;Fr(e,r,n.polygonPosition,s),e.globalFeatureIds.fill(n.feature,n.polygonPosition,n.polygonPosition+s),e.featureIds.fill(n.polygonFeature,n.polygonPosition,n.polygonPosition+s);for(let o=0,a=t.indices.length;o<a;++o){const u=n.polygonPosition;e.polygonIndices[n.polygonObject++]=u;const f=t.areas[o],h=t.indices[o],_=t.indices[o+1];for(let l=0,g=h.length;l<g;++l){const c=h[l],v=l===g-1?_===void 0?t.data.length:_[0]:h[l+1];e.primitivePolygonIndices[n.polygonRing++]=n.polygonPosition,n.polygonPosition+=(v-c)/i}const d=n.polygonPosition;ta(e,f,h,{startPosition:u,endPosition:d,coordLength:i})}}function ta(t,e,n,i){let{startPosition:r,endPosition:s,coordLength:o}=i;if(!t.triangles)return;const a=r*o,u=s*o,f=t.positions.subarray(a,u),h=n[0],_=n.slice(1).map(l=>(l-h)/o),d=Co(f,_,o,e);for(let l=0,g=d.length;l<g;++l)t.triangles.push(r+d[l])}function Br(t,e){const n={};for(const i in t)n[i]={value:t[i],size:e};return n}function ea(t,e,n,i){const r={shape:"binary-feature-collection",points:{...t,positions:{value:t.positions,size:i},globalFeatureIds:{value:t.globalFeatureIds,size:1},featureIds:{value:t.featureIds,size:1},numericProps:Br(t.numericProps,1)},lines:{...e,positions:{value:e.positions,size:i},pathIndices:{value:e.pathIndices,size:1},globalFeatureIds:{value:e.globalFeatureIds,size:1},featureIds:{value:e.featureIds,size:1},numericProps:Br(e.numericProps,1)},polygons:{...n,positions:{value:n.positions,size:i},polygonIndices:{value:n.polygonIndices,size:1},primitivePolygonIndices:{value:n.primitivePolygonIndices,size:1},globalFeatureIds:{value:n.globalFeatureIds,size:1},featureIds:{value:n.featureIds,size:1},numericProps:Br(n.numericProps,1)}};return r.polygons&&n.triangles&&(r.polygons.triangles={value:new Uint32Array(n.triangles),size:1}),r}function Fr(t,e,n,i){for(const r in t.numericProps)if(r in e){const s=e[r];t.numericProps[r].fill(s,n,n+i)}}function Mr(t,e){const n={};for(const i in t)e.includes(i)||(n[i]=t[i]);return n}function na(t,e){return e===Array||!Number.isFinite(t)?Array:e===Float64Array||Math.fround(t)!==t?Float64Array:Float32Array}function ra(t){let e=0,n=0,i=0,r=0,s=0,o=0,a=0,u=0,f=0;const h=new Set;for(const _ of t){const d=_.geometry;switch(d.type){case"Point":n++,e++,h.add(d.coordinates.length);break;case"MultiPoint":n++,e+=d.coordinates.length;for(const g of d.coordinates)h.add(g.length);break;case"LineString":s++,i+=d.coordinates.length,r++;for(const g of d.coordinates)h.add(g.length);break;case"MultiLineString":s++;for(const g of d.coordinates){i+=g.length,r++;for(const c of g)h.add(c.length)}break;case"Polygon":f++,a++,u+=d.coordinates.length;const l=d.coordinates.flat();o+=l.length;for(const g of l)h.add(g.length);break;case"MultiPolygon":f++;for(const g of d.coordinates){a++,u+=g.length;const c=g.flat();o+=c.length;for(const v of c)h.add(v.length)}break;default:throw new Error(`Unsupported geometry type: ${d.type}`)}}return{coordLength:h.size>0?Math.max(...h):2,pointPositionsCount:e,pointFeaturesCount:n,linePositionsCount:i,linePathsCount:r,lineFeaturesCount:s,polygonPositionsCount:o,polygonObjectsCount:a,polygonRingsCount:u,polygonFeaturesCount:f}}function ia(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{coordLength:2,fixRingWinding:!0};return t.map(n=>sa(n,e))}function ss(t,e,n,i){n.push(e.length),e.push(...t);for(let r=t.length;r<i.coordLength;r++)e.push(0)}function Ur(t,e,n,i){n.push(e.length);for(const r of t){e.push(...r);for(let s=r.length;s<i.coordLength;s++)e.push(0)}}function os(t,e,n,i,r){let s=0;const o=[],a=[];for(const u of t){const f=u.map(d=>d.slice(0,2));let h=ts(f.flat());const _=h<0;r.fixRingWinding&&(s===0&&!_||s>0&&_)&&(u.reverse(),h=-h),o.push(h),Ur(u,e,a,r),s++}s>0&&(i.push(o),n.push(a))}function sa(t,e){const{geometry:n}=t;if(n.type==="GeometryCollection")throw new Error("GeometryCollection type not supported");const i=[],r=[];let s,o;switch(n.type){case"Point":o="Point",ss(n.coordinates,i,r,e);break;case"MultiPoint":o="Point",n.coordinates.map(a=>ss(a,i,r,e));break;case"LineString":o="LineString",Ur(n.coordinates,i,r,e);break;case"MultiLineString":o="LineString",n.coordinates.map(a=>Ur(a,i,r,e));break;case"Polygon":o="Polygon",s=[],os(n.coordinates,i,r,s,e);break;case"MultiPolygon":o="Polygon",s=[],n.coordinates.map(a=>os(a,i,r,s,e));break;default:throw new Error(`Unknown type: ${o}`)}return{...t,geometry:{type:o,indices:r,data:i,areas:s}}}function oa(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{fixRingWinding:!0,triangulate:!0};const n=ra(t),i=n.coordLength,{fixRingWinding:r}=e,s=ia(t,{coordLength:i,fixRingWinding:r});return Vo(s,n,{numericPropKeys:e.numericPropKeys,PositionDataType:e.PositionDataType||Float32Array,triangulate:e.triangulate})}class zr extends le{constructor(e){super(e),this.version(10).stores({countries:"++id, name, &gid_0, "+ee+","+he,regions1:"++id, name, resourceIdRef, &[gid_0+gid_1], "+ee+","+he,regions2:"++id, resourceIdRef, name, &[gid_0+gid_1+gid_2], "+ee+","+he,points:"++id, resourceIdRef, type, country, name_1, name, &[country+name_1+name], "+ee,routeSegments:"++id, resourceIdRef, mode, sourceCountry, sourceName1, sourceName2, sourceName, targetCountry, targetName1, targetName2, targetName, sourceIdRef, targetIdRef, &[sourceIdRef+targetIdRef], "+ee+","+he,gadm0:"++id, name, &gid_0, "+ee+","+he,gadm1:"++id, name, resourceIdRef, &[gid_0+gid_1], "+ee+","+he,gadm2:"++id, resourceIdRef, name, &[gid_0+gid_1+gid_2], "+ee+","+he}),this.countries=this.table("countries"),this.regions1=this.table("regions1"),this.regions2=this.table("regions2"),this.points=this.table("points"),this.routeSegments=this.table("routeSegments"),this.gadm0=this.table("gadm0"),this.gadm1=this.table("gadm1"),this.gadm2=this.table("gadm2")}static fileNameOf(e,n){switch(e){case Nr.resources:return`${po}-${n}`;case Nr.projects:return`${_o}-${n}`;default:throw new Error("invalid type:"+e)}}static async openResource(e){return new zr(this.fileNameOf(Nr.resources,e))}async findAllGeoRegions(e,n){const i=0<=n&&n<=2?[this.countries]:n<=4?[this.countries,this.regions1]:[this.regions1,this.regions2];return(await Promise.all(i.map(async r=>{const s=[];for(let o=n;o>=0;o--)if(e[n].length===1){if(s.push(r.where(`z${n}`).anyOf(e[n][0]).toArray()),e[n][0].length===1)break}else s.push(r.where(`z${n}`).anyOf(e[n].length===2?e[n][0].concat(e[n][1]):e[n][0]).toArray());return(await Promise.all(s)).flat(1)}))).flat(1)}async findAllGeoPoints(e,n){const i=this.points,r=[];for(let s=n;s>=0;s--)if(e[n].length===1){if(r.push(i.where(`z${n}`).anyOf(e[n][0]).toArray()),e[n][0].length===1)break}else r.push(i.where(`z${n}`).anyOf(e[n].length===2?e[n][0].concat(e[n][1]):e[n][0]).toArray());return(await Promise.all(r)).flat(1)}async findAllGeoLineStrings(e,n){const i=this.routeSegments,r=[];for(let s=n;s>=0;s--)if(e[n].length===1){if(r.push(i.where(`z${n}`).anyOf(e[n][0]).toArray()),e[n][0].length===1)break}else r.push(i.where(`z${n}`).anyOf(e[n].length===2?e[n][0].concat(e[n][1]):e[n][0]).toArray());return(await Promise.all(r)).flat(1)}async storeGISRouteSegment(e){const n=await Promise.all(e.map(async i=>{const{sourceCountry:r,sourceName1:s,sourceName2:o,sourceName:a,targetCountry:u,targetName1:f,targetName2:h,targetName:_}=i,d=await this.findGISPoint({country:r,name_1:s,name_2:o,name:a}),l=await this.findGISPoint({country:u,name_1:f,name_2:h,name:_});if(d===void 0||l===void 0||d.id===void 0||l.id===void 0)throw new Error;const[g,c]=d.lat>l.lat?[d.lat,l.lat]:[l.lat,d.lat],[v,m]=d.lng>l.lng?[d.lng,l.lng]:[l.lng,d.lng],b=ds({lat:g,lng:v},{lat:c,lng:m},Vt),E={...i,uuid:Fn(),sourceIdRef:d.uuid,targetIdRef:l.uuid,...b};return console.log(E),E}));await this.routeSegments.bulkAdd(n)}async findGISPoint({country:e,name_1:n,name_2:i,name:r}){return this.points.where("[country+name_1+name_2+name]").equals(e+n+i+r).last()}async storeAsGeoJson({stream:e,fileName:n,fileSize:i,startedCallback:r,progressCallback:s,errorCallback:o,finishedCallback:a,cancelCallback:u}){let h=[],_=[],d=[];const l=new Yi({stringBufferSize:void 0,paths:["$.features"],keepStack:!1}),g=async(m,b,E)=>{m.bulkAdd(b).catch(A=>{o&&o(E,A.message)})};let c=0;const v=async m=>{r&&r(n,this.name),m.getReader().read().then(b=>{const{done:E,value:A}=b;if(E)return;const T=A.value;c+=T.length,T.forEach((x,S)=>{const{COUNTRY:N,NAME_1:L,NAME_2:F,GID_0:W,GID_1:R,GID_2:D}=x.properties,y=x.geometry.coordinates,M=Xi(`${N}	${L}	${F}`,y,zi,!0,Ji),J={},U=Qi(M);for(let Y=0;Y<=Vt;Y++){const O=rn(U.topLeft,U.bottomRight,Y);if(O.length===0)J[`z${Y}`]=Mn.NOT_CONTAINED;else if(O.length===1)if(O[0].length===1)J[`z${Y}`]=O[0][0];else if(O[0].length>=2)J[`z${Y}`]=J[`z${Y-1}`];else throw new Error;else if(O.length===2)O[1].length===1?J[`z${Y}_`]=O[1][0]:O[1].length>=2&&(J[`z${Y}_`]=J[`z${Y-1}_`]);else throw new Error("mortonNumber.length > 2 :"+O.join(" ,"))}const et=oa(T,{PositionDataType:Float32Array,fixRingWinding:!0}),z={country:N,gid_0:W,binaryFeatures:et,...J};T.some(Y=>{var O;return((O=Y.coordinates)==null?void 0:O.length)>0})&&z.country&&(L?F?d.push({...z,name_1:L,gid_1:R,name_2:F,gid_2:D,name:z.name_2}):_.push({...z,name_1:L,gid_1:R,name:z.name_1}):h.push({...z,name:z.country}),s&&s({type:Pt.progress,progress:S/T.length*100,index:S,total:c,unit:"items",fileName:n,fileSize:i||-1}),h.length===64&&(g(this.gadm0,h,n),h=[]),_.length===64&&(g(this.gadm1,_,n),_=[]),d.length===64&&(g(this.gadm2,d,n),d=[]))}),h.length>0&&g(this.gadm0,h,n),_.length>0&&g(this.gadm1,_,n),d.length>0&&g(this.gadm2,d,n),s&&s({type:Pt.progress,fileName:n,fileSize:i,progress:100,total:c,index:c,unit:"items_end"}),a&&a(n)})};try{await v(e.pipeThrough(l))}catch(m){console.error(m),o&&o(n,m.message);return}}async storeGadmGeoJson({stream:e,fileName:n,fileSize:i,startedCallback:r,progressCallback:s,errorCallback:o,finishedCallback:a,cancelCallback:u}){await this.storeAsGeoRegion({stream:e,fileName:n,fileSize:i,startedCallback:r,progressCallback:s,errorCallback:o,finishedCallback:a,cancelCallback:u})}async storeAsGeoRegion({stream:e,fileName:n,fileSize:i,startedCallback:r,progressCallback:s,errorCallback:o,finishedCallback:a,cancelCallback:u}){let h=[],_=[],d=[];const l=new Yi({stringBufferSize:void 0,paths:["$.features"],keepStack:!1}),g=async(m,b,E)=>{m.bulkAdd(b).catch(A=>{o&&o(E,A.message)})};let c=0;const v=async m=>{r&&r(n,this.name),m.getReader().read().then(b=>{const{done:E,value:A}=b;if(E)return;const T=A.value;c+=T.length,T.forEach((x,S)=>{const{COUNTRY:N,NAME_1:L,NAME_2:F,GID_0:W,GID_1:R,GID_2:D}=x.properties,y=x.geometry.coordinates,M=Xi(`${N}	${L}	${F}`,y,zi,!0,Ji),J={},U=Qi(M);for(let z=0;z<=Vt;z++){const Y=rn(U.topLeft,U.bottomRight,z);if(Y.length===0)J[`z${z}`]=Mn.NOT_CONTAINED;else if(Y.length===1)if(Y[0].length===1)J[`z${z}`]=Y[0][0];else if(Y[0].length>=2)J[`z${z}`]=J[`z${z-1}`];else throw new Error;else if(Y.length===2)Y[1].length===1?J[`z${z}_`]=Y[1][0]:Y[1].length>=2&&(J[`z${z}_`]=J[`z${z-1}_`]);else throw new Error("mortonNumber.length > 2 :"+Y.join(" ,"))}const et={country:N,gid_0:W,coordinates:M,...J};et.coordinates.length>0&&et.country&&(L?F?d.push({...et,name_1:L,gid_1:R,name_2:F,gid_2:D,name:et.name_2}):_.push({...et,name_1:L,gid_1:R,name:et.name_1}):h.push({...et,name:et.country}),s&&s({type:Pt.progress,progress:S/T.length*100,index:S,total:c,unit:"items",fileName:n,fileSize:i||-1}),h.length===64&&(g(this.countries,h,n),h=[]),_.length===64&&(g(this.regions1,_,n),_=[]),d.length===64&&(g(this.regions2,d,n),d=[]))}),h.length>0&&g(this.countries,h,n),_.length>0&&g(this.regions1,_,n),d.length>0&&g(this.regions2,d,n),s&&s({type:Pt.progress,fileName:n,fileSize:i,progress:100,total:c,index:c,unit:"items_end"}),a&&a(n)})};try{await v(e.pipeThrough(l))}catch(m){console.error(m),o&&o(n,m.message);return}}}let Gr=!1;const jr=(t,e)=>{self.postMessage({value:{type:Pt.started,value:{dbName:e,fileName:t}}})},Kr=t=>{self.postMessage({value:t})},Zr=(t,e)=>{self.postMessage({value:{type:Pt.error,fileName:t,errorMessage:e}})},Wr=t=>{self.postMessage({value:{type:Pt.cancel,fileName:t}})},Hr=t=>{self.postMessage({value:{type:Pt.finished,fileName:t}})},aa=async(t,e,n)=>{const i=Es(e);for(const r of["cities","routes"])await Promise.all(i.filter(s=>{const o=s.name.toLowerCase();return o.startsWith(r)&&o.endsWith(".csv")}).map(async s=>ps({resource:t,stream:(await zn(s)).stream,fileName:s.name,fileSize:s.size,csvLoaders:n,startedCallback:jr,progressCallback:Kr,errorCallback:Zr,cancelCallback:Wr,finishedCallback:Hr})));await Promise.all(i.filter(r=>{const s=r.name.toLowerCase();return s.startsWith("gadm")&&(s.endsWith(".json")||s.endsWith(".json.zip"))}).map(async r=>t.storeAsGeoRegion({stream:(await zn(r)).stream,fileName:r.name,fileSize:r.size,startedCallback:jr,progressCallback:Kr,errorCallback:Zr,cancelCallback:Wr,finishedCallback:Hr}))).catch(r=>{console.error(r)}).then(()=>{}),await Promise.all(i.filter(r=>{const s=r.name.toLowerCase();return!s.startsWith("gadm")&&(s.endsWith(".json")||s.endsWith(".json.zip"))}).map(async r=>t.storeAsGeoJson({stream:(await zn(r)).stream,fileName:r.name,fileSize:r.size,startedCallback:jr,progressCallback:Kr,errorCallback:Zr,cancelCallback:Wr,finishedCallback:Hr}))).catch(r=>{console.error(r)}).then(()=>{})};self.onmessage=async function(e){const n=e.data;switch(n.type){case Vr.start:if(!Gr){Gr=!0;const i=n.value.dbName,r=new zr(i);await aa(r,e.data.data,gs),Gr=!1}break}}})();
